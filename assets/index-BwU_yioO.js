var Zj=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var f4e=Zj((m4e,Ej)=>{function Jj(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var ml=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function i0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function e$(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var jR={exports:{}},a0={},$R={exports:{}},It={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vh=Symbol.for("react.element"),t$=Symbol.for("react.portal"),n$=Symbol.for("react.fragment"),r$=Symbol.for("react.strict_mode"),i$=Symbol.for("react.profiler"),a$=Symbol.for("react.provider"),o$=Symbol.for("react.context"),s$=Symbol.for("react.forward_ref"),u$=Symbol.for("react.suspense"),l$=Symbol.for("react.memo"),c$=Symbol.for("react.lazy"),pN=Symbol.iterator;function f$(t){return t===null||typeof t!="object"?null:(t=pN&&t[pN]||t["@@iterator"],typeof t=="function"?t:null)}var zR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},UR=Object.assign,WR={};function vf(t,e,n){this.props=t,this.context=e,this.refs=WR,this.updater=n||zR}vf.prototype.isReactComponent={};vf.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};vf.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function VR(){}VR.prototype=vf.prototype;function Vw(t,e,n){this.props=t,this.context=e,this.refs=WR,this.updater=n||zR}var qw=Vw.prototype=new VR;qw.constructor=Vw;UR(qw,vf.prototype);qw.isPureReactComponent=!0;var mN=Array.isArray,qR=Object.prototype.hasOwnProperty,Hw={current:null},HR={key:!0,ref:!0,__self:!0,__source:!0};function GR(t,e,n){var r,i={},a=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)qR.call(e,r)&&!HR.hasOwnProperty(r)&&(i[r]=e[r]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+2];i.children=u}if(t&&t.defaultProps)for(r in s=t.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return{$$typeof:Vh,type:t,key:a,ref:o,props:i,_owner:Hw.current}}function d$(t,e){return{$$typeof:Vh,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Gw(t){return typeof t=="object"&&t!==null&&t.$$typeof===Vh}function h$(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var vN=/\/+/g;function Ty(t,e){return typeof t=="object"&&t!==null&&t.key!=null?h$(""+t.key):e.toString(36)}function Om(t,e,n,r,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Vh:case t$:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Ty(o,0):r,mN(i)?(n="",t!=null&&(n=t.replace(vN,"$&/")+"/"),Om(i,e,n,"",function(l){return l})):i!=null&&(Gw(i)&&(i=d$(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(vN,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",mN(t))for(var s=0;s<t.length;s++){a=t[s];var u=r+Ty(a,s);o+=Om(a,e,n,u,i)}else if(u=f$(t),typeof u=="function")for(t=u.call(t),s=0;!(a=t.next()).done;)a=a.value,u=r+Ty(a,s++),o+=Om(a,e,n,u,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Rp(t,e,n){if(t==null)return t;var r=[],i=0;return Om(t,r,"","",function(a){return e.call(n,a,i++)}),r}function p$(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Kr={current:null},Bm={transition:null},m$={ReactCurrentDispatcher:Kr,ReactCurrentBatchConfig:Bm,ReactCurrentOwner:Hw};function KR(){throw Error("act(...) is not supported in production builds of React.")}It.Children={map:Rp,forEach:function(t,e,n){Rp(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Rp(t,function(){e++}),e},toArray:function(t){return Rp(t,function(e){return e})||[]},only:function(t){if(!Gw(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};It.Component=vf;It.Fragment=n$;It.Profiler=i$;It.PureComponent=Vw;It.StrictMode=r$;It.Suspense=u$;It.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=m$;It.act=KR;It.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=UR({},t.props),i=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=Hw.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(u in e)qR.call(e,u)&&!HR.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&s!==void 0?s[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){s=Array(u);for(var l=0;l<u;l++)s[l]=arguments[l+2];r.children=s}return{$$typeof:Vh,type:t.type,key:i,ref:a,props:r,_owner:o}};It.createContext=function(t){return t={$$typeof:o$,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:a$,_context:t},t.Consumer=t};It.createElement=GR;It.createFactory=function(t){var e=GR.bind(null,t);return e.type=t,e};It.createRef=function(){return{current:null}};It.forwardRef=function(t){return{$$typeof:s$,render:t}};It.isValidElement=Gw;It.lazy=function(t){return{$$typeof:c$,_payload:{_status:-1,_result:t},_init:p$}};It.memo=function(t,e){return{$$typeof:l$,type:t,compare:e===void 0?null:e}};It.startTransition=function(t){var e=Bm.transition;Bm.transition={};try{t()}finally{Bm.transition=e}};It.unstable_act=KR;It.useCallback=function(t,e){return Kr.current.useCallback(t,e)};It.useContext=function(t){return Kr.current.useContext(t)};It.useDebugValue=function(){};It.useDeferredValue=function(t){return Kr.current.useDeferredValue(t)};It.useEffect=function(t,e){return Kr.current.useEffect(t,e)};It.useId=function(){return Kr.current.useId()};It.useImperativeHandle=function(t,e,n){return Kr.current.useImperativeHandle(t,e,n)};It.useInsertionEffect=function(t,e){return Kr.current.useInsertionEffect(t,e)};It.useLayoutEffect=function(t,e){return Kr.current.useLayoutEffect(t,e)};It.useMemo=function(t,e){return Kr.current.useMemo(t,e)};It.useReducer=function(t,e,n){return Kr.current.useReducer(t,e,n)};It.useRef=function(t){return Kr.current.useRef(t)};It.useState=function(t){return Kr.current.useState(t)};It.useSyncExternalStore=function(t,e,n){return Kr.current.useSyncExternalStore(t,e,n)};It.useTransition=function(){return Kr.current.useTransition()};It.version="18.3.1";$R.exports=It;var X=$R.exports;const v$=i0(X),g$=Jj({__proto__:null,default:v$},[X]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y$=X,x$=Symbol.for("react.element"),b$=Symbol.for("react.fragment"),w$=Object.prototype.hasOwnProperty,_$=y$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,E$={key:!0,ref:!0,__self:!0,__source:!0};function YR(t,e,n){var r,i={},a=null,o=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)w$.call(e,r)&&!E$.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:x$,type:t,key:a,ref:o,props:i,_owner:_$.current}}a0.Fragment=b$;a0.jsx=YR;a0.jsxs=YR;jR.exports=a0;var S=jR.exports,XR={exports:{}},Fi={},QR={exports:{}},ZR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,R){var j=B.length;B.push(R);e:for(;0<j;){var K=j-1>>>1,V=B[K];if(0<i(V,R))B[K]=R,B[j]=V,j=K;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var R=B[0],j=B.pop();if(j!==R){B[0]=j;e:for(var K=0,V=B.length,L=V>>>1;K<L;){var ne=2*(K+1)-1,fe=B[ne],te=ne+1,oe=B[te];if(0>i(fe,j))te<V&&0>i(oe,fe)?(B[K]=oe,B[te]=j,K=te):(B[K]=fe,B[ne]=j,K=ne);else if(te<V&&0>i(oe,j))B[K]=oe,B[te]=j,K=te;else break e}}return R}function i(B,R){var j=B.sortIndex-R.sortIndex;return j!==0?j:B.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();t.unstable_now=function(){return o.now()-s}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(B){for(var R=n(l);R!==null;){if(R.callback===null)r(l);else if(R.startTime<=B)r(l),R.sortIndex=R.expirationTime,e(u,R);else break;R=n(l)}}function b(B){if(m=!1,y(B),!p)if(n(u)!==null)p=!0,I(w);else{var R=n(l);R!==null&&M(b,R.startTime-B)}}function w(B,R){p=!1,m&&(m=!1,v(C),C=-1),h=!0;var j=d;try{for(y(R),f=n(u);f!==null&&(!(f.expirationTime>R)||B&&!A());){var K=f.callback;if(typeof K=="function"){f.callback=null,d=f.priorityLevel;var V=K(f.expirationTime<=R);R=t.unstable_now(),typeof V=="function"?f.callback=V:f===n(u)&&r(u),y(R)}else r(u);f=n(u)}if(f!==null)var L=!0;else{var ne=n(l);ne!==null&&M(b,ne.startTime-R),L=!1}return L}finally{f=null,d=j,h=!1}}var _=!1,E=null,C=-1,N=5,D=-1;function A(){return!(t.unstable_now()-D<N)}function T(){if(E!==null){var B=t.unstable_now();D=B;var R=!0;try{R=E(!0,B)}finally{R?k():(_=!1,E=null)}}else _=!1}var k;if(typeof x=="function")k=function(){x(T)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,O=F.port2;F.port1.onmessage=T,k=function(){O.postMessage(null)}}else k=function(){g(T,0)};function I(B){E=B,_||(_=!0,k())}function M(B,R){C=g(function(){B(t.unstable_now())},R)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,I(w))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(d){case 1:case 2:case 3:var R=3;break;default:R=d}var j=d;d=R;try{return B()}finally{d=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,R){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var j=d;d=B;try{return R()}finally{d=j}},t.unstable_scheduleCallback=function(B,R,j){var K=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?K+j:K):j=K,B){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=j+V,B={id:c++,callback:R,priorityLevel:B,startTime:j,expirationTime:V,sortIndex:-1},j>K?(B.sortIndex=j,e(l,B),n(u)===null&&B===n(l)&&(m?(v(C),C=-1):m=!0,M(b,j-K))):(B.sortIndex=V,e(u,B),p||h||(p=!0,I(w))),B},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(B){var R=d;return function(){var j=d;d=R;try{return B.apply(this,arguments)}finally{d=j}}}})(ZR);QR.exports=ZR;var C$=QR.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N$=X,Ri=C$;function Re(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var JR=new Set,Yd={};function vl(t,e){zc(t,e),zc(t+"Capture",e)}function zc(t,e){for(Yd[t]=e,t=0;t<e.length;t++)JR.add(e[t])}var Oo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hx=Object.prototype.hasOwnProperty,S$=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,gN={},yN={};function D$(t){return hx.call(yN,t)?!0:hx.call(gN,t)?!1:S$.test(t)?yN[t]=!0:(gN[t]=!0,!1)}function A$(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function T$(t,e,n,r){if(e===null||typeof e>"u"||A$(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Yr(t,e,n,r,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var gr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){gr[t]=new Yr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];gr[e]=new Yr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){gr[t]=new Yr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){gr[t]=new Yr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){gr[t]=new Yr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){gr[t]=new Yr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){gr[t]=new Yr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){gr[t]=new Yr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){gr[t]=new Yr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Kw=/[\-:]([a-z])/g;function Yw(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Kw,Yw);gr[e]=new Yr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Kw,Yw);gr[e]=new Yr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Kw,Yw);gr[e]=new Yr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){gr[t]=new Yr(t,1,!1,t.toLowerCase(),null,!1,!1)});gr.xlinkHref=new Yr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){gr[t]=new Yr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Xw(t,e,n,r){var i=gr.hasOwnProperty(e)?gr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(T$(e,n,i,r)&&(n=null),r||i===null?D$(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Go=N$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,kp=Symbol.for("react.element"),Zl=Symbol.for("react.portal"),Jl=Symbol.for("react.fragment"),Qw=Symbol.for("react.strict_mode"),px=Symbol.for("react.profiler"),ek=Symbol.for("react.provider"),tk=Symbol.for("react.context"),Zw=Symbol.for("react.forward_ref"),mx=Symbol.for("react.suspense"),vx=Symbol.for("react.suspense_list"),Jw=Symbol.for("react.memo"),cs=Symbol.for("react.lazy"),nk=Symbol.for("react.offscreen"),xN=Symbol.iterator;function Kf(t){return t===null||typeof t!="object"?null:(t=xN&&t[xN]||t["@@iterator"],typeof t=="function"?t:null)}var wn=Object.assign,My;function pd(t){if(My===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);My=e&&e[1]||""}return`
`+My+t}var Iy=!1;function Ry(t,e){if(!t||Iy)return"";Iy=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),a=r.stack.split(`
`),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(o!==1||s!==1)do if(o--,s--,0>s||i[o]!==a[s]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=s);break}}}finally{Iy=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?pd(t):""}function M$(t){switch(t.tag){case 5:return pd(t.type);case 16:return pd("Lazy");case 13:return pd("Suspense");case 19:return pd("SuspenseList");case 0:case 2:case 15:return t=Ry(t.type,!1),t;case 11:return t=Ry(t.type.render,!1),t;case 1:return t=Ry(t.type,!0),t;default:return""}}function gx(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Jl:return"Fragment";case Zl:return"Portal";case px:return"Profiler";case Qw:return"StrictMode";case mx:return"Suspense";case vx:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case tk:return(t.displayName||"Context")+".Consumer";case ek:return(t._context.displayName||"Context")+".Provider";case Zw:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Jw:return e=t.displayName||null,e!==null?e:gx(t.type)||"Memo";case cs:e=t._payload,t=t._init;try{return gx(t(e))}catch{}}return null}function I$(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gx(e);case 8:return e===Qw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ws(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function rk(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function R$(t){var e=rk(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Fp(t){t._valueTracker||(t._valueTracker=R$(t))}function ik(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=rk(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function av(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function yx(t,e){var n=e.checked;return wn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function bN(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ws(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ak(t,e){e=e.checked,e!=null&&Xw(t,"checked",e,!1)}function xx(t,e){ak(t,e);var n=Ws(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?bx(t,e.type,n):e.hasOwnProperty("defaultValue")&&bx(t,e.type,Ws(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function wN(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function bx(t,e,n){(e!=="number"||av(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var md=Array.isArray;function yc(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ws(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function wx(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Re(91));return wn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function _N(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Re(92));if(md(n)){if(1<n.length)throw Error(Re(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ws(n)}}function ok(t,e){var n=Ws(e.value),r=Ws(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function EN(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function sk(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _x(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?sk(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Pp,uk=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Pp=Pp||document.createElement("div"),Pp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Pp.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Xd(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Nd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},k$=["Webkit","ms","Moz","O"];Object.keys(Nd).forEach(function(t){k$.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Nd[e]=Nd[t]})});function lk(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Nd.hasOwnProperty(t)&&Nd[t]?(""+e).trim():e+"px"}function ck(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=lk(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var F$=wn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ex(t,e){if(e){if(F$[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Re(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Re(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Re(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Re(62))}}function Cx(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nx=null;function e2(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Sx=null,xc=null,bc=null;function CN(t){if(t=Gh(t)){if(typeof Sx!="function")throw Error(Re(280));var e=t.stateNode;e&&(e=c0(e),Sx(t.stateNode,t.type,e))}}function fk(t){xc?bc?bc.push(t):bc=[t]:xc=t}function dk(){if(xc){var t=xc,e=bc;if(bc=xc=null,CN(t),e)for(t=0;t<e.length;t++)CN(e[t])}}function hk(t,e){return t(e)}function pk(){}var ky=!1;function mk(t,e,n){if(ky)return t(e,n);ky=!0;try{return hk(t,e,n)}finally{ky=!1,(xc!==null||bc!==null)&&(pk(),dk())}}function Qd(t,e){var n=t.stateNode;if(n===null)return null;var r=c0(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Re(231,e,typeof n));return n}var Dx=!1;if(Oo)try{var Yf={};Object.defineProperty(Yf,"passive",{get:function(){Dx=!0}}),window.addEventListener("test",Yf,Yf),window.removeEventListener("test",Yf,Yf)}catch{Dx=!1}function P$(t,e,n,r,i,a,o,s,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(c){this.onError(c)}}var Sd=!1,ov=null,sv=!1,Ax=null,O$={onError:function(t){Sd=!0,ov=t}};function B$(t,e,n,r,i,a,o,s,u){Sd=!1,ov=null,P$.apply(O$,arguments)}function L$(t,e,n,r,i,a,o,s,u){if(B$.apply(this,arguments),Sd){if(Sd){var l=ov;Sd=!1,ov=null}else throw Error(Re(198));sv||(sv=!0,Ax=l)}}function gl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function vk(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function NN(t){if(gl(t)!==t)throw Error(Re(188))}function j$(t){var e=t.alternate;if(!e){if(e=gl(t),e===null)throw Error(Re(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return NN(i),t;if(a===r)return NN(i),e;a=a.sibling}throw Error(Re(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,s=i.child;s;){if(s===n){o=!0,n=i,r=a;break}if(s===r){o=!0,r=i,n=a;break}s=s.sibling}if(!o){for(s=a.child;s;){if(s===n){o=!0,n=a,r=i;break}if(s===r){o=!0,r=a,n=i;break}s=s.sibling}if(!o)throw Error(Re(189))}}if(n.alternate!==r)throw Error(Re(190))}if(n.tag!==3)throw Error(Re(188));return n.stateNode.current===n?t:e}function gk(t){return t=j$(t),t!==null?yk(t):null}function yk(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=yk(t);if(e!==null)return e;t=t.sibling}return null}var xk=Ri.unstable_scheduleCallback,SN=Ri.unstable_cancelCallback,$$=Ri.unstable_shouldYield,z$=Ri.unstable_requestPaint,Mn=Ri.unstable_now,U$=Ri.unstable_getCurrentPriorityLevel,t2=Ri.unstable_ImmediatePriority,bk=Ri.unstable_UserBlockingPriority,uv=Ri.unstable_NormalPriority,W$=Ri.unstable_LowPriority,wk=Ri.unstable_IdlePriority,o0=null,Ka=null;function V$(t){if(Ka&&typeof Ka.onCommitFiberRoot=="function")try{Ka.onCommitFiberRoot(o0,t,void 0,(t.current.flags&128)===128)}catch{}}var _a=Math.clz32?Math.clz32:G$,q$=Math.log,H$=Math.LN2;function G$(t){return t>>>=0,t===0?32:31-(q$(t)/H$|0)|0}var Op=64,Bp=4194304;function vd(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function lv(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,a=t.pingedLanes,o=n&268435455;if(o!==0){var s=o&~i;s!==0?r=vd(s):(a&=o,a!==0&&(r=vd(a)))}else o=n&~i,o!==0?r=vd(o):a!==0&&(r=vd(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-_a(e),i=1<<n,r|=t[n],e&=~i;return r}function K$(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Y$(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-_a(a),s=1<<o,u=i[o];u===-1?(!(s&n)||s&r)&&(i[o]=K$(s,e)):u<=e&&(t.expiredLanes|=s),a&=~s}}function Tx(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function _k(){var t=Op;return Op<<=1,!(Op&4194240)&&(Op=64),t}function Fy(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function qh(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-_a(e),t[e]=n}function X$(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-_a(n),a=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~a}}function n2(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-_a(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Gt=0;function Ek(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ck,r2,Nk,Sk,Dk,Mx=!1,Lp=[],Ss=null,Ds=null,As=null,Zd=new Map,Jd=new Map,ps=[],Q$="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function DN(t,e){switch(t){case"focusin":case"focusout":Ss=null;break;case"dragenter":case"dragleave":Ds=null;break;case"mouseover":case"mouseout":As=null;break;case"pointerover":case"pointerout":Zd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jd.delete(e.pointerId)}}function Xf(t,e,n,r,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},e!==null&&(e=Gh(e),e!==null&&r2(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Z$(t,e,n,r,i){switch(e){case"focusin":return Ss=Xf(Ss,t,e,n,r,i),!0;case"dragenter":return Ds=Xf(Ds,t,e,n,r,i),!0;case"mouseover":return As=Xf(As,t,e,n,r,i),!0;case"pointerover":var a=i.pointerId;return Zd.set(a,Xf(Zd.get(a)||null,t,e,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Jd.set(a,Xf(Jd.get(a)||null,t,e,n,r,i)),!0}return!1}function Ak(t){var e=Ou(t.target);if(e!==null){var n=gl(e);if(n!==null){if(e=n.tag,e===13){if(e=vk(n),e!==null){t.blockedOn=e,Dk(t.priority,function(){Nk(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Lm(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ix(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Nx=r,n.target.dispatchEvent(r),Nx=null}else return e=Gh(n),e!==null&&r2(e),t.blockedOn=n,!1;e.shift()}return!0}function AN(t,e,n){Lm(t)&&n.delete(e)}function J$(){Mx=!1,Ss!==null&&Lm(Ss)&&(Ss=null),Ds!==null&&Lm(Ds)&&(Ds=null),As!==null&&Lm(As)&&(As=null),Zd.forEach(AN),Jd.forEach(AN)}function Qf(t,e){t.blockedOn===e&&(t.blockedOn=null,Mx||(Mx=!0,Ri.unstable_scheduleCallback(Ri.unstable_NormalPriority,J$)))}function eh(t){function e(i){return Qf(i,t)}if(0<Lp.length){Qf(Lp[0],t);for(var n=1;n<Lp.length;n++){var r=Lp[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ss!==null&&Qf(Ss,t),Ds!==null&&Qf(Ds,t),As!==null&&Qf(As,t),Zd.forEach(e),Jd.forEach(e),n=0;n<ps.length;n++)r=ps[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ps.length&&(n=ps[0],n.blockedOn===null);)Ak(n),n.blockedOn===null&&ps.shift()}var wc=Go.ReactCurrentBatchConfig,cv=!0;function ez(t,e,n,r){var i=Gt,a=wc.transition;wc.transition=null;try{Gt=1,i2(t,e,n,r)}finally{Gt=i,wc.transition=a}}function tz(t,e,n,r){var i=Gt,a=wc.transition;wc.transition=null;try{Gt=4,i2(t,e,n,r)}finally{Gt=i,wc.transition=a}}function i2(t,e,n,r){if(cv){var i=Ix(t,e,n,r);if(i===null)Vy(t,e,r,fv,n),DN(t,r);else if(Z$(i,t,e,n,r))r.stopPropagation();else if(DN(t,r),e&4&&-1<Q$.indexOf(t)){for(;i!==null;){var a=Gh(i);if(a!==null&&Ck(a),a=Ix(t,e,n,r),a===null&&Vy(t,e,r,fv,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else Vy(t,e,r,null,n)}}var fv=null;function Ix(t,e,n,r){if(fv=null,t=e2(r),t=Ou(t),t!==null)if(e=gl(t),e===null)t=null;else if(n=e.tag,n===13){if(t=vk(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return fv=t,null}function Tk(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(U$()){case t2:return 1;case bk:return 4;case uv:case W$:return 16;case wk:return 536870912;default:return 16}default:return 16}}var xs=null,a2=null,jm=null;function Mk(){if(jm)return jm;var t,e=a2,n=e.length,r,i="value"in xs?xs.value:xs.textContent,a=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[a-r];r++);return jm=i.slice(t,1<r?1-r:void 0)}function $m(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function jp(){return!0}function TN(){return!1}function Pi(t){function e(n,r,i,a,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(n=t[s],this[s]=n?n(a):a[s]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?jp:TN,this.isPropagationStopped=TN,this}return wn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=jp)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=jp)},persist:function(){},isPersistent:jp}),e}var gf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},o2=Pi(gf),Hh=wn({},gf,{view:0,detail:0}),nz=Pi(Hh),Py,Oy,Zf,s0=wn({},Hh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:s2,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Zf&&(Zf&&t.type==="mousemove"?(Py=t.screenX-Zf.screenX,Oy=t.screenY-Zf.screenY):Oy=Py=0,Zf=t),Py)},movementY:function(t){return"movementY"in t?t.movementY:Oy}}),MN=Pi(s0),rz=wn({},s0,{dataTransfer:0}),iz=Pi(rz),az=wn({},Hh,{relatedTarget:0}),By=Pi(az),oz=wn({},gf,{animationName:0,elapsedTime:0,pseudoElement:0}),sz=Pi(oz),uz=wn({},gf,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),lz=Pi(uz),cz=wn({},gf,{data:0}),IN=Pi(cz),fz={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dz={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hz={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pz(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=hz[t])?!!e[t]:!1}function s2(){return pz}var mz=wn({},Hh,{key:function(t){if(t.key){var e=fz[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=$m(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?dz[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:s2,charCode:function(t){return t.type==="keypress"?$m(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?$m(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),vz=Pi(mz),gz=wn({},s0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),RN=Pi(gz),yz=wn({},Hh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:s2}),xz=Pi(yz),bz=wn({},gf,{propertyName:0,elapsedTime:0,pseudoElement:0}),wz=Pi(bz),_z=wn({},s0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ez=Pi(_z),Cz=[9,13,27,32],u2=Oo&&"CompositionEvent"in window,Dd=null;Oo&&"documentMode"in document&&(Dd=document.documentMode);var Nz=Oo&&"TextEvent"in window&&!Dd,Ik=Oo&&(!u2||Dd&&8<Dd&&11>=Dd),kN=" ",FN=!1;function Rk(t,e){switch(t){case"keyup":return Cz.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kk(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ec=!1;function Sz(t,e){switch(t){case"compositionend":return kk(e);case"keypress":return e.which!==32?null:(FN=!0,kN);case"textInput":return t=e.data,t===kN&&FN?null:t;default:return null}}function Dz(t,e){if(ec)return t==="compositionend"||!u2&&Rk(t,e)?(t=Mk(),jm=a2=xs=null,ec=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ik&&e.locale!=="ko"?null:e.data;default:return null}}var Az={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function PN(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Az[t.type]:e==="textarea"}function Fk(t,e,n,r){fk(r),e=dv(e,"onChange"),0<e.length&&(n=new o2("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ad=null,th=null;function Tz(t){qk(t,0)}function u0(t){var e=rc(t);if(ik(e))return t}function Mz(t,e){if(t==="change")return e}var Pk=!1;if(Oo){var Ly;if(Oo){var jy="oninput"in document;if(!jy){var ON=document.createElement("div");ON.setAttribute("oninput","return;"),jy=typeof ON.oninput=="function"}Ly=jy}else Ly=!1;Pk=Ly&&(!document.documentMode||9<document.documentMode)}function BN(){Ad&&(Ad.detachEvent("onpropertychange",Ok),th=Ad=null)}function Ok(t){if(t.propertyName==="value"&&u0(th)){var e=[];Fk(e,th,t,e2(t)),mk(Tz,e)}}function Iz(t,e,n){t==="focusin"?(BN(),Ad=e,th=n,Ad.attachEvent("onpropertychange",Ok)):t==="focusout"&&BN()}function Rz(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return u0(th)}function kz(t,e){if(t==="click")return u0(e)}function Fz(t,e){if(t==="input"||t==="change")return u0(e)}function Pz(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Aa=typeof Object.is=="function"?Object.is:Pz;function nh(t,e){if(Aa(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!hx.call(e,i)||!Aa(t[i],e[i]))return!1}return!0}function LN(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function jN(t,e){var n=LN(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=LN(n)}}function Bk(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Bk(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Lk(){for(var t=window,e=av();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=av(t.document)}return e}function l2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Oz(t){var e=Lk(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Bk(n.ownerDocument.documentElement,n)){if(r!==null&&l2(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!t.extend&&a>r&&(i=r,r=a,a=i),i=jN(n,a);var o=jN(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Bz=Oo&&"documentMode"in document&&11>=document.documentMode,tc=null,Rx=null,Td=null,kx=!1;function $N(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;kx||tc==null||tc!==av(r)||(r=tc,"selectionStart"in r&&l2(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Td&&nh(Td,r)||(Td=r,r=dv(Rx,"onSelect"),0<r.length&&(e=new o2("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=tc)))}function $p(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var nc={animationend:$p("Animation","AnimationEnd"),animationiteration:$p("Animation","AnimationIteration"),animationstart:$p("Animation","AnimationStart"),transitionend:$p("Transition","TransitionEnd")},$y={},jk={};Oo&&(jk=document.createElement("div").style,"AnimationEvent"in window||(delete nc.animationend.animation,delete nc.animationiteration.animation,delete nc.animationstart.animation),"TransitionEvent"in window||delete nc.transitionend.transition);function l0(t){if($y[t])return $y[t];if(!nc[t])return t;var e=nc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in jk)return $y[t]=e[n];return t}var $k=l0("animationend"),zk=l0("animationiteration"),Uk=l0("animationstart"),Wk=l0("transitionend"),Vk=new Map,zN="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tu(t,e){Vk.set(t,e),vl(e,[t])}for(var zy=0;zy<zN.length;zy++){var Uy=zN[zy],Lz=Uy.toLowerCase(),jz=Uy[0].toUpperCase()+Uy.slice(1);tu(Lz,"on"+jz)}tu($k,"onAnimationEnd");tu(zk,"onAnimationIteration");tu(Uk,"onAnimationStart");tu("dblclick","onDoubleClick");tu("focusin","onFocus");tu("focusout","onBlur");tu(Wk,"onTransitionEnd");zc("onMouseEnter",["mouseout","mouseover"]);zc("onMouseLeave",["mouseout","mouseover"]);zc("onPointerEnter",["pointerout","pointerover"]);zc("onPointerLeave",["pointerout","pointerover"]);vl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vl("onBeforeInput",["compositionend","keypress","textInput","paste"]);vl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$z=new Set("cancel close invalid load scroll toggle".split(" ").concat(gd));function UN(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,L$(r,e,void 0,t),t.currentTarget=null}function qk(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;UN(i,s,l),a=u}else for(o=0;o<r.length;o++){if(s=r[o],u=s.instance,l=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;UN(i,s,l),a=u}}}if(sv)throw t=Ax,sv=!1,Ax=null,t}function on(t,e){var n=e[Lx];n===void 0&&(n=e[Lx]=new Set);var r=t+"__bubble";n.has(r)||(Hk(e,t,2,!1),n.add(r))}function Wy(t,e,n){var r=0;e&&(r|=4),Hk(n,t,r,e)}var zp="_reactListening"+Math.random().toString(36).slice(2);function rh(t){if(!t[zp]){t[zp]=!0,JR.forEach(function(n){n!=="selectionchange"&&($z.has(n)||Wy(n,!1,t),Wy(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[zp]||(e[zp]=!0,Wy("selectionchange",!1,e))}}function Hk(t,e,n,r){switch(Tk(e)){case 1:var i=ez;break;case 4:i=tz;break;default:i=i2}n=i.bind(null,e,n,t),i=void 0,!Dx||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Vy(t,e,n,r,i){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var s=r.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;s!==null;){if(o=Ou(s),o===null)return;if(u=o.tag,u===5||u===6){r=a=o;continue e}s=s.parentNode}}r=r.return}mk(function(){var l=a,c=e2(n),f=[];e:{var d=Vk.get(t);if(d!==void 0){var h=o2,p=t;switch(t){case"keypress":if($m(n)===0)break e;case"keydown":case"keyup":h=vz;break;case"focusin":p="focus",h=By;break;case"focusout":p="blur",h=By;break;case"beforeblur":case"afterblur":h=By;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=MN;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=iz;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=xz;break;case $k:case zk:case Uk:h=sz;break;case Wk:h=wz;break;case"scroll":h=nz;break;case"wheel":h=Ez;break;case"copy":case"cut":case"paste":h=lz;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=RN}var m=(e&4)!==0,g=!m&&t==="scroll",v=m?d!==null?d+"Capture":null:d;m=[];for(var x=l,y;x!==null;){y=x;var b=y.stateNode;if(y.tag===5&&b!==null&&(y=b,v!==null&&(b=Qd(x,v),b!=null&&m.push(ih(x,b,y)))),g)break;x=x.return}0<m.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:m}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",d&&n!==Nx&&(p=n.relatedTarget||n.fromElement)&&(Ou(p)||p[Bo]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?Ou(p):null,p!==null&&(g=gl(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(m=MN,b="onMouseLeave",v="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(m=RN,b="onPointerLeave",v="onPointerEnter",x="pointer"),g=h==null?d:rc(h),y=p==null?d:rc(p),d=new m(b,x+"leave",h,n,c),d.target=g,d.relatedTarget=y,b=null,Ou(c)===l&&(m=new m(v,x+"enter",p,n,c),m.target=y,m.relatedTarget=g,b=m),g=b,h&&p)t:{for(m=h,v=p,x=0,y=m;y;y=Ol(y))x++;for(y=0,b=v;b;b=Ol(b))y++;for(;0<x-y;)m=Ol(m),x--;for(;0<y-x;)v=Ol(v),y--;for(;x--;){if(m===v||v!==null&&m===v.alternate)break t;m=Ol(m),v=Ol(v)}m=null}else m=null;h!==null&&WN(f,d,h,m,!1),p!==null&&g!==null&&WN(f,g,p,m,!0)}}e:{if(d=l?rc(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var w=Mz;else if(PN(d))if(Pk)w=Fz;else{w=Rz;var _=Iz}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(w=kz);if(w&&(w=w(t,l))){Fk(f,w,n,c);break e}_&&_(t,d,l),t==="focusout"&&(_=d._wrapperState)&&_.controlled&&d.type==="number"&&bx(d,"number",d.value)}switch(_=l?rc(l):window,t){case"focusin":(PN(_)||_.contentEditable==="true")&&(tc=_,Rx=l,Td=null);break;case"focusout":Td=Rx=tc=null;break;case"mousedown":kx=!0;break;case"contextmenu":case"mouseup":case"dragend":kx=!1,$N(f,n,c);break;case"selectionchange":if(Bz)break;case"keydown":case"keyup":$N(f,n,c)}var E;if(u2)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else ec?Rk(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(Ik&&n.locale!=="ko"&&(ec||C!=="onCompositionStart"?C==="onCompositionEnd"&&ec&&(E=Mk()):(xs=c,a2="value"in xs?xs.value:xs.textContent,ec=!0)),_=dv(l,C),0<_.length&&(C=new IN(C,t,null,n,c),f.push({event:C,listeners:_}),E?C.data=E:(E=kk(n),E!==null&&(C.data=E)))),(E=Nz?Sz(t,n):Dz(t,n))&&(l=dv(l,"onBeforeInput"),0<l.length&&(c=new IN("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=E))}qk(f,e)})}function ih(t,e,n){return{instance:t,listener:e,currentTarget:n}}function dv(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Qd(t,n),a!=null&&r.unshift(ih(t,a,i)),a=Qd(t,e),a!=null&&r.push(ih(t,a,i))),t=t.return}return r}function Ol(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function WN(t,e,n,r,i){for(var a=e._reactName,o=[];n!==null&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(u!==null&&u===r)break;s.tag===5&&l!==null&&(s=l,i?(u=Qd(n,a),u!=null&&o.unshift(ih(n,u,s))):i||(u=Qd(n,a),u!=null&&o.push(ih(n,u,s)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var zz=/\r\n?/g,Uz=/\u0000|\uFFFD/g;function VN(t){return(typeof t=="string"?t:""+t).replace(zz,`
`).replace(Uz,"")}function Up(t,e,n){if(e=VN(e),VN(t)!==e&&n)throw Error(Re(425))}function hv(){}var Fx=null,Px=null;function Ox(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Bx=typeof setTimeout=="function"?setTimeout:void 0,Wz=typeof clearTimeout=="function"?clearTimeout:void 0,qN=typeof Promise=="function"?Promise:void 0,Vz=typeof queueMicrotask=="function"?queueMicrotask:typeof qN<"u"?function(t){return qN.resolve(null).then(t).catch(qz)}:Bx;function qz(t){setTimeout(function(){throw t})}function qy(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),eh(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);eh(e)}function Ts(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function HN(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var yf=Math.random().toString(36).slice(2),Wa="__reactFiber$"+yf,ah="__reactProps$"+yf,Bo="__reactContainer$"+yf,Lx="__reactEvents$"+yf,Hz="__reactListeners$"+yf,Gz="__reactHandles$"+yf;function Ou(t){var e=t[Wa];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Bo]||n[Wa]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=HN(t);t!==null;){if(n=t[Wa])return n;t=HN(t)}return e}t=n,n=t.parentNode}return null}function Gh(t){return t=t[Wa]||t[Bo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function rc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Re(33))}function c0(t){return t[ah]||null}var jx=[],ic=-1;function nu(t){return{current:t}}function ln(t){0>ic||(t.current=jx[ic],jx[ic]=null,ic--)}function rn(t,e){ic++,jx[ic]=t.current,t.current=e}var Vs={},Pr=nu(Vs),li=nu(!1),Zu=Vs;function Uc(t,e){var n=t.type.contextTypes;if(!n)return Vs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ci(t){return t=t.childContextTypes,t!=null}function pv(){ln(li),ln(Pr)}function GN(t,e,n){if(Pr.current!==Vs)throw Error(Re(168));rn(Pr,e),rn(li,n)}function Gk(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Re(108,I$(t)||"Unknown",i));return wn({},n,r)}function mv(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Vs,Zu=Pr.current,rn(Pr,t),rn(li,li.current),!0}function KN(t,e,n){var r=t.stateNode;if(!r)throw Error(Re(169));n?(t=Gk(t,e,Zu),r.__reactInternalMemoizedMergedChildContext=t,ln(li),ln(Pr),rn(Pr,t)):ln(li),rn(li,n)}var xo=null,f0=!1,Hy=!1;function Kk(t){xo===null?xo=[t]:xo.push(t)}function Kz(t){f0=!0,Kk(t)}function ru(){if(!Hy&&xo!==null){Hy=!0;var t=0,e=Gt;try{var n=xo;for(Gt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}xo=null,f0=!1}catch(i){throw xo!==null&&(xo=xo.slice(t+1)),xk(t2,ru),i}finally{Gt=e,Hy=!1}}return null}var ac=[],oc=0,vv=null,gv=0,Vi=[],qi=0,Ju=null,_o=1,Eo="";function Nu(t,e){ac[oc++]=gv,ac[oc++]=vv,vv=t,gv=e}function Yk(t,e,n){Vi[qi++]=_o,Vi[qi++]=Eo,Vi[qi++]=Ju,Ju=t;var r=_o;t=Eo;var i=32-_a(r)-1;r&=~(1<<i),n+=1;var a=32-_a(e)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,_o=1<<32-_a(e)+i|n<<i|r,Eo=a+t}else _o=1<<a|n<<i|r,Eo=t}function c2(t){t.return!==null&&(Nu(t,1),Yk(t,1,0))}function f2(t){for(;t===vv;)vv=ac[--oc],ac[oc]=null,gv=ac[--oc],ac[oc]=null;for(;t===Ju;)Ju=Vi[--qi],Vi[qi]=null,Eo=Vi[--qi],Vi[qi]=null,_o=Vi[--qi],Vi[qi]=null}var Ti=null,Ci=null,hn=!1,pa=null;function Xk(t,e){var n=Xi(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function YN(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ti=t,Ci=Ts(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ti=t,Ci=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ju!==null?{id:_o,overflow:Eo}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Xi(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ti=t,Ci=null,!0):!1;default:return!1}}function $x(t){return(t.mode&1)!==0&&(t.flags&128)===0}function zx(t){if(hn){var e=Ci;if(e){var n=e;if(!YN(t,e)){if($x(t))throw Error(Re(418));e=Ts(n.nextSibling);var r=Ti;e&&YN(t,e)?Xk(r,n):(t.flags=t.flags&-4097|2,hn=!1,Ti=t)}}else{if($x(t))throw Error(Re(418));t.flags=t.flags&-4097|2,hn=!1,Ti=t}}}function XN(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ti=t}function Wp(t){if(t!==Ti)return!1;if(!hn)return XN(t),hn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ox(t.type,t.memoizedProps)),e&&(e=Ci)){if($x(t))throw Qk(),Error(Re(418));for(;e;)Xk(t,e),e=Ts(e.nextSibling)}if(XN(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Re(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ci=Ts(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ci=null}}else Ci=Ti?Ts(t.stateNode.nextSibling):null;return!0}function Qk(){for(var t=Ci;t;)t=Ts(t.nextSibling)}function Wc(){Ci=Ti=null,hn=!1}function d2(t){pa===null?pa=[t]:pa.push(t)}var Yz=Go.ReactCurrentBatchConfig;function Jf(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Re(309));var r=n.stateNode}if(!r)throw Error(Re(147,t));var i=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var s=i.refs;o===null?delete s[a]:s[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(Re(284));if(!n._owner)throw Error(Re(290,t))}return t}function Vp(t,e){throw t=Object.prototype.toString.call(e),Error(Re(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function QN(t){var e=t._init;return e(t._payload)}function Zk(t){function e(v,x){if(t){var y=v.deletions;y===null?(v.deletions=[x],v.flags|=16):y.push(x)}}function n(v,x){if(!t)return null;for(;x!==null;)e(v,x),x=x.sibling;return null}function r(v,x){for(v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function i(v,x){return v=ks(v,x),v.index=0,v.sibling=null,v}function a(v,x,y){return v.index=y,t?(y=v.alternate,y!==null?(y=y.index,y<x?(v.flags|=2,x):y):(v.flags|=2,x)):(v.flags|=1048576,x)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function s(v,x,y,b){return x===null||x.tag!==6?(x=Jy(y,v.mode,b),x.return=v,x):(x=i(x,y),x.return=v,x)}function u(v,x,y,b){var w=y.type;return w===Jl?c(v,x,y.props.children,b,y.key):x!==null&&(x.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===cs&&QN(w)===x.type)?(b=i(x,y.props),b.ref=Jf(v,x,y),b.return=v,b):(b=Gm(y.type,y.key,y.props,null,v.mode,b),b.ref=Jf(v,x,y),b.return=v,b)}function l(v,x,y,b){return x===null||x.tag!==4||x.stateNode.containerInfo!==y.containerInfo||x.stateNode.implementation!==y.implementation?(x=e1(y,v.mode,b),x.return=v,x):(x=i(x,y.children||[]),x.return=v,x)}function c(v,x,y,b,w){return x===null||x.tag!==7?(x=Ku(y,v.mode,b,w),x.return=v,x):(x=i(x,y),x.return=v,x)}function f(v,x,y){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Jy(""+x,v.mode,y),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case kp:return y=Gm(x.type,x.key,x.props,null,v.mode,y),y.ref=Jf(v,null,x),y.return=v,y;case Zl:return x=e1(x,v.mode,y),x.return=v,x;case cs:var b=x._init;return f(v,b(x._payload),y)}if(md(x)||Kf(x))return x=Ku(x,v.mode,y,null),x.return=v,x;Vp(v,x)}return null}function d(v,x,y,b){var w=x!==null?x.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return w!==null?null:s(v,x,""+y,b);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case kp:return y.key===w?u(v,x,y,b):null;case Zl:return y.key===w?l(v,x,y,b):null;case cs:return w=y._init,d(v,x,w(y._payload),b)}if(md(y)||Kf(y))return w!==null?null:c(v,x,y,b,null);Vp(v,y)}return null}function h(v,x,y,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return v=v.get(y)||null,s(x,v,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case kp:return v=v.get(b.key===null?y:b.key)||null,u(x,v,b,w);case Zl:return v=v.get(b.key===null?y:b.key)||null,l(x,v,b,w);case cs:var _=b._init;return h(v,x,y,_(b._payload),w)}if(md(b)||Kf(b))return v=v.get(y)||null,c(x,v,b,w,null);Vp(x,b)}return null}function p(v,x,y,b){for(var w=null,_=null,E=x,C=x=0,N=null;E!==null&&C<y.length;C++){E.index>C?(N=E,E=null):N=E.sibling;var D=d(v,E,y[C],b);if(D===null){E===null&&(E=N);break}t&&E&&D.alternate===null&&e(v,E),x=a(D,x,C),_===null?w=D:_.sibling=D,_=D,E=N}if(C===y.length)return n(v,E),hn&&Nu(v,C),w;if(E===null){for(;C<y.length;C++)E=f(v,y[C],b),E!==null&&(x=a(E,x,C),_===null?w=E:_.sibling=E,_=E);return hn&&Nu(v,C),w}for(E=r(v,E);C<y.length;C++)N=h(E,v,C,y[C],b),N!==null&&(t&&N.alternate!==null&&E.delete(N.key===null?C:N.key),x=a(N,x,C),_===null?w=N:_.sibling=N,_=N);return t&&E.forEach(function(A){return e(v,A)}),hn&&Nu(v,C),w}function m(v,x,y,b){var w=Kf(y);if(typeof w!="function")throw Error(Re(150));if(y=w.call(y),y==null)throw Error(Re(151));for(var _=w=null,E=x,C=x=0,N=null,D=y.next();E!==null&&!D.done;C++,D=y.next()){E.index>C?(N=E,E=null):N=E.sibling;var A=d(v,E,D.value,b);if(A===null){E===null&&(E=N);break}t&&E&&A.alternate===null&&e(v,E),x=a(A,x,C),_===null?w=A:_.sibling=A,_=A,E=N}if(D.done)return n(v,E),hn&&Nu(v,C),w;if(E===null){for(;!D.done;C++,D=y.next())D=f(v,D.value,b),D!==null&&(x=a(D,x,C),_===null?w=D:_.sibling=D,_=D);return hn&&Nu(v,C),w}for(E=r(v,E);!D.done;C++,D=y.next())D=h(E,v,C,D.value,b),D!==null&&(t&&D.alternate!==null&&E.delete(D.key===null?C:D.key),x=a(D,x,C),_===null?w=D:_.sibling=D,_=D);return t&&E.forEach(function(T){return e(v,T)}),hn&&Nu(v,C),w}function g(v,x,y,b){if(typeof y=="object"&&y!==null&&y.type===Jl&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case kp:e:{for(var w=y.key,_=x;_!==null;){if(_.key===w){if(w=y.type,w===Jl){if(_.tag===7){n(v,_.sibling),x=i(_,y.props.children),x.return=v,v=x;break e}}else if(_.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===cs&&QN(w)===_.type){n(v,_.sibling),x=i(_,y.props),x.ref=Jf(v,_,y),x.return=v,v=x;break e}n(v,_);break}else e(v,_);_=_.sibling}y.type===Jl?(x=Ku(y.props.children,v.mode,b,y.key),x.return=v,v=x):(b=Gm(y.type,y.key,y.props,null,v.mode,b),b.ref=Jf(v,x,y),b.return=v,v=b)}return o(v);case Zl:e:{for(_=y.key;x!==null;){if(x.key===_)if(x.tag===4&&x.stateNode.containerInfo===y.containerInfo&&x.stateNode.implementation===y.implementation){n(v,x.sibling),x=i(x,y.children||[]),x.return=v,v=x;break e}else{n(v,x);break}else e(v,x);x=x.sibling}x=e1(y,v.mode,b),x.return=v,v=x}return o(v);case cs:return _=y._init,g(v,x,_(y._payload),b)}if(md(y))return p(v,x,y,b);if(Kf(y))return m(v,x,y,b);Vp(v,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,x!==null&&x.tag===6?(n(v,x.sibling),x=i(x,y),x.return=v,v=x):(n(v,x),x=Jy(y,v.mode,b),x.return=v,v=x),o(v)):n(v,x)}return g}var Vc=Zk(!0),Jk=Zk(!1),yv=nu(null),xv=null,sc=null,h2=null;function p2(){h2=sc=xv=null}function m2(t){var e=yv.current;ln(yv),t._currentValue=e}function Ux(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function _c(t,e){xv=t,h2=sc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ai=!0),t.firstContext=null)}function ea(t){var e=t._currentValue;if(h2!==t)if(t={context:t,memoizedValue:e,next:null},sc===null){if(xv===null)throw Error(Re(308));sc=t,xv.dependencies={lanes:0,firstContext:t}}else sc=sc.next=t;return e}var Bu=null;function v2(t){Bu===null?Bu=[t]:Bu.push(t)}function eF(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,v2(e)):(n.next=i.next,i.next=n),e.interleaved=n,Lo(t,r)}function Lo(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var fs=!1;function g2(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tF(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function To(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ms(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Bt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Lo(t,n)}return i=r.interleaved,i===null?(e.next=e,v2(r)):(e.next=i.next,i.next=e),r.interleaved=e,Lo(t,n)}function zm(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,n2(t,n)}}function ZN(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=e:a=a.next=e}else i=a=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function bv(t,e,n,r){var i=t.updateQueue;fs=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var u=s,l=u.next;u.next=null,o===null?a=l:o.next=l,o=u;var c=t.alternate;c!==null&&(c=c.updateQueue,s=c.lastBaseUpdate,s!==o&&(s===null?c.firstBaseUpdate=l:s.next=l,c.lastBaseUpdate=u))}if(a!==null){var f=i.baseState;o=0,c=l=u=null,s=a;do{var d=s.lane,h=s.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=t,m=s;switch(d=e,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=wn({},f,d);break e;case 2:fs=!0}}s.callback!==null&&s.lane!==0&&(t.flags|=64,d=i.effects,d===null?i.effects=[s]:d.push(s))}else h={eventTime:h,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},c===null?(l=c=h,u=f):c=c.next=h,o|=d;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;d=s,s=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);tl|=o,t.lanes=o,t.memoizedState=f}}function JN(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Re(191,i));i.call(r)}}}var Kh={},Ya=nu(Kh),oh=nu(Kh),sh=nu(Kh);function Lu(t){if(t===Kh)throw Error(Re(174));return t}function y2(t,e){switch(rn(sh,e),rn(oh,t),rn(Ya,Kh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:_x(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=_x(e,t)}ln(Ya),rn(Ya,e)}function qc(){ln(Ya),ln(oh),ln(sh)}function nF(t){Lu(sh.current);var e=Lu(Ya.current),n=_x(e,t.type);e!==n&&(rn(oh,t),rn(Ya,n))}function x2(t){oh.current===t&&(ln(Ya),ln(oh))}var mn=nu(0);function wv(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Gy=[];function b2(){for(var t=0;t<Gy.length;t++)Gy[t]._workInProgressVersionPrimary=null;Gy.length=0}var Um=Go.ReactCurrentDispatcher,Ky=Go.ReactCurrentBatchConfig,el=0,xn=null,Bn=null,er=null,_v=!1,Md=!1,uh=0,Xz=0;function wr(){throw Error(Re(321))}function w2(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Aa(t[n],e[n]))return!1;return!0}function _2(t,e,n,r,i,a){if(el=a,xn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Um.current=t===null||t.memoizedState===null?eU:tU,t=n(r,i),Md){a=0;do{if(Md=!1,uh=0,25<=a)throw Error(Re(301));a+=1,er=Bn=null,e.updateQueue=null,Um.current=nU,t=n(r,i)}while(Md)}if(Um.current=Ev,e=Bn!==null&&Bn.next!==null,el=0,er=Bn=xn=null,_v=!1,e)throw Error(Re(300));return t}function E2(){var t=uh!==0;return uh=0,t}function $a(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return er===null?xn.memoizedState=er=t:er=er.next=t,er}function ta(){if(Bn===null){var t=xn.alternate;t=t!==null?t.memoizedState:null}else t=Bn.next;var e=er===null?xn.memoizedState:er.next;if(e!==null)er=e,Bn=t;else{if(t===null)throw Error(Re(310));Bn=t,t={memoizedState:Bn.memoizedState,baseState:Bn.baseState,baseQueue:Bn.baseQueue,queue:Bn.queue,next:null},er===null?xn.memoizedState=er=t:er=er.next=t}return er}function lh(t,e){return typeof e=="function"?e(t):e}function Yy(t){var e=ta(),n=e.queue;if(n===null)throw Error(Re(311));n.lastRenderedReducer=t;var r=Bn,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var s=o=null,u=null,l=a;do{var c=l.lane;if((el&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(s=u=f,o=r):u=u.next=f,xn.lanes|=c,tl|=c}l=l.next}while(l!==null&&l!==a);u===null?o=r:u.next=s,Aa(r,e.memoizedState)||(ai=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do a=i.lane,xn.lanes|=a,tl|=a,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Xy(t){var e=ta(),n=e.queue;if(n===null)throw Error(Re(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,a=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do a=t(a,o.action),o=o.next;while(o!==i);Aa(a,e.memoizedState)||(ai=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function rF(){}function iF(t,e){var n=xn,r=ta(),i=e(),a=!Aa(r.memoizedState,i);if(a&&(r.memoizedState=i,ai=!0),r=r.queue,C2(sF.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||er!==null&&er.memoizedState.tag&1){if(n.flags|=2048,ch(9,oF.bind(null,n,r,i,e),void 0,null),ir===null)throw Error(Re(349));el&30||aF(n,e,i)}return i}function aF(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=xn.updateQueue,e===null?(e={lastEffect:null,stores:null},xn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function oF(t,e,n,r){e.value=n,e.getSnapshot=r,uF(e)&&lF(t)}function sF(t,e,n){return n(function(){uF(e)&&lF(t)})}function uF(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Aa(t,n)}catch{return!0}}function lF(t){var e=Lo(t,1);e!==null&&Ea(e,t,1,-1)}function eS(t){var e=$a();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:lh,lastRenderedState:t},e.queue=t,t=t.dispatch=Jz.bind(null,xn,t),[e.memoizedState,t]}function ch(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=xn.updateQueue,e===null?(e={lastEffect:null,stores:null},xn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function cF(){return ta().memoizedState}function Wm(t,e,n,r){var i=$a();xn.flags|=t,i.memoizedState=ch(1|e,n,void 0,r===void 0?null:r)}function d0(t,e,n,r){var i=ta();r=r===void 0?null:r;var a=void 0;if(Bn!==null){var o=Bn.memoizedState;if(a=o.destroy,r!==null&&w2(r,o.deps)){i.memoizedState=ch(e,n,a,r);return}}xn.flags|=t,i.memoizedState=ch(1|e,n,a,r)}function tS(t,e){return Wm(8390656,8,t,e)}function C2(t,e){return d0(2048,8,t,e)}function fF(t,e){return d0(4,2,t,e)}function dF(t,e){return d0(4,4,t,e)}function hF(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function pF(t,e,n){return n=n!=null?n.concat([t]):null,d0(4,4,hF.bind(null,e,t),n)}function N2(){}function mF(t,e){var n=ta();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&w2(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function vF(t,e){var n=ta();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&w2(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function gF(t,e,n){return el&21?(Aa(n,e)||(n=_k(),xn.lanes|=n,tl|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ai=!0),t.memoizedState=n)}function Qz(t,e){var n=Gt;Gt=n!==0&&4>n?n:4,t(!0);var r=Ky.transition;Ky.transition={};try{t(!1),e()}finally{Gt=n,Ky.transition=r}}function yF(){return ta().memoizedState}function Zz(t,e,n){var r=Rs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},xF(t))bF(e,n);else if(n=eF(t,e,n,r),n!==null){var i=Ur();Ea(n,t,r,i),wF(n,e,r)}}function Jz(t,e,n){var r=Rs(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(xF(t))bF(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,Aa(s,o)){var u=e.interleaved;u===null?(i.next=i,v2(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=eF(t,e,i,r),n!==null&&(i=Ur(),Ea(n,t,r,i),wF(n,e,r))}}function xF(t){var e=t.alternate;return t===xn||e!==null&&e===xn}function bF(t,e){Md=_v=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function wF(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,n2(t,n)}}var Ev={readContext:ea,useCallback:wr,useContext:wr,useEffect:wr,useImperativeHandle:wr,useInsertionEffect:wr,useLayoutEffect:wr,useMemo:wr,useReducer:wr,useRef:wr,useState:wr,useDebugValue:wr,useDeferredValue:wr,useTransition:wr,useMutableSource:wr,useSyncExternalStore:wr,useId:wr,unstable_isNewReconciler:!1},eU={readContext:ea,useCallback:function(t,e){return $a().memoizedState=[t,e===void 0?null:e],t},useContext:ea,useEffect:tS,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Wm(4194308,4,hF.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Wm(4194308,4,t,e)},useInsertionEffect:function(t,e){return Wm(4,2,t,e)},useMemo:function(t,e){var n=$a();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=$a();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Zz.bind(null,xn,t),[r.memoizedState,t]},useRef:function(t){var e=$a();return t={current:t},e.memoizedState=t},useState:eS,useDebugValue:N2,useDeferredValue:function(t){return $a().memoizedState=t},useTransition:function(){var t=eS(!1),e=t[0];return t=Qz.bind(null,t[1]),$a().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=xn,i=$a();if(hn){if(n===void 0)throw Error(Re(407));n=n()}else{if(n=e(),ir===null)throw Error(Re(349));el&30||aF(r,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,tS(sF.bind(null,r,a,t),[t]),r.flags|=2048,ch(9,oF.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=$a(),e=ir.identifierPrefix;if(hn){var n=Eo,r=_o;n=(r&~(1<<32-_a(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=uh++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Xz++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},tU={readContext:ea,useCallback:mF,useContext:ea,useEffect:C2,useImperativeHandle:pF,useInsertionEffect:fF,useLayoutEffect:dF,useMemo:vF,useReducer:Yy,useRef:cF,useState:function(){return Yy(lh)},useDebugValue:N2,useDeferredValue:function(t){var e=ta();return gF(e,Bn.memoizedState,t)},useTransition:function(){var t=Yy(lh)[0],e=ta().memoizedState;return[t,e]},useMutableSource:rF,useSyncExternalStore:iF,useId:yF,unstable_isNewReconciler:!1},nU={readContext:ea,useCallback:mF,useContext:ea,useEffect:C2,useImperativeHandle:pF,useInsertionEffect:fF,useLayoutEffect:dF,useMemo:vF,useReducer:Xy,useRef:cF,useState:function(){return Xy(lh)},useDebugValue:N2,useDeferredValue:function(t){var e=ta();return Bn===null?e.memoizedState=t:gF(e,Bn.memoizedState,t)},useTransition:function(){var t=Xy(lh)[0],e=ta().memoizedState;return[t,e]},useMutableSource:rF,useSyncExternalStore:iF,useId:yF,unstable_isNewReconciler:!1};function da(t,e){if(t&&t.defaultProps){e=wn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Wx(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:wn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var h0={isMounted:function(t){return(t=t._reactInternals)?gl(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ur(),i=Rs(t),a=To(r,i);a.payload=e,n!=null&&(a.callback=n),e=Ms(t,a,i),e!==null&&(Ea(e,t,i,r),zm(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ur(),i=Rs(t),a=To(r,i);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=Ms(t,a,i),e!==null&&(Ea(e,t,i,r),zm(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ur(),r=Rs(t),i=To(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ms(t,i,r),e!==null&&(Ea(e,t,r,n),zm(e,t,r))}};function nS(t,e,n,r,i,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,o):e.prototype&&e.prototype.isPureReactComponent?!nh(n,r)||!nh(i,a):!0}function _F(t,e,n){var r=!1,i=Vs,a=e.contextType;return typeof a=="object"&&a!==null?a=ea(a):(i=ci(e)?Zu:Pr.current,r=e.contextTypes,a=(r=r!=null)?Uc(t,i):Vs),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=h0,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function rS(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&h0.enqueueReplaceState(e,e.state,null)}function Vx(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},g2(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=ea(a):(a=ci(e)?Zu:Pr.current,i.context=Uc(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(Wx(t,e,a,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&h0.enqueueReplaceState(i,i.state,null),bv(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Hc(t,e){try{var n="",r=e;do n+=M$(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function Qy(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function qx(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var rU=typeof WeakMap=="function"?WeakMap:Map;function EF(t,e,n){n=To(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Nv||(Nv=!0,tb=r),qx(t,e)},n}function CF(t,e,n){n=To(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){qx(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){qx(t,e),typeof r!="function"&&(Is===null?Is=new Set([this]):Is.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function iS(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new rU;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=gU.bind(null,t,e,n),e.then(t,t))}function aS(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function oS(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=To(-1,1),e.tag=2,Ms(n,e,1))),n.lanes|=1),t)}var iU=Go.ReactCurrentOwner,ai=!1;function zr(t,e,n,r){e.child=t===null?Jk(e,null,n,r):Vc(e,t.child,n,r)}function sS(t,e,n,r,i){n=n.render;var a=e.ref;return _c(e,i),r=_2(t,e,n,r,a,i),n=E2(),t!==null&&!ai?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,jo(t,e,i)):(hn&&n&&c2(e),e.flags|=1,zr(t,e,r,i),e.child)}function uS(t,e,n,r,i){if(t===null){var a=n.type;return typeof a=="function"&&!k2(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,NF(t,e,a,r,i)):(t=Gm(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:nh,n(o,r)&&t.ref===e.ref)return jo(t,e,i)}return e.flags|=1,t=ks(a,r),t.ref=e.ref,t.return=e,e.child=t}function NF(t,e,n,r,i){if(t!==null){var a=t.memoizedProps;if(nh(a,r)&&t.ref===e.ref)if(ai=!1,e.pendingProps=r=a,(t.lanes&i)!==0)t.flags&131072&&(ai=!0);else return e.lanes=t.lanes,jo(t,e,i)}return Hx(t,e,n,r,i)}function SF(t,e,n){var r=e.pendingProps,i=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},rn(lc,bi),bi|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,rn(lc,bi),bi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,rn(lc,bi),bi|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,rn(lc,bi),bi|=r;return zr(t,e,i,n),e.child}function DF(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Hx(t,e,n,r,i){var a=ci(n)?Zu:Pr.current;return a=Uc(e,a),_c(e,i),n=_2(t,e,n,r,a,i),r=E2(),t!==null&&!ai?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,jo(t,e,i)):(hn&&r&&c2(e),e.flags|=1,zr(t,e,n,i),e.child)}function lS(t,e,n,r,i){if(ci(n)){var a=!0;mv(e)}else a=!1;if(_c(e,i),e.stateNode===null)Vm(t,e),_F(e,n,r),Vx(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,s=e.memoizedProps;o.props=s;var u=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=ea(l):(l=ci(n)?Zu:Pr.current,l=Uc(e,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==r||u!==l)&&rS(e,o,r,l),fs=!1;var d=e.memoizedState;o.state=d,bv(e,r,o,i),u=e.memoizedState,s!==r||d!==u||li.current||fs?(typeof c=="function"&&(Wx(e,n,c,r),u=e.memoizedState),(s=fs||nS(e,n,s,r,d,u,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=l,r=s):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,tF(t,e),s=e.memoizedProps,l=e.type===e.elementType?s:da(e.type,s),o.props=l,f=e.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=ea(u):(u=ci(n)?Zu:Pr.current,u=Uc(e,u));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==f||d!==u)&&rS(e,o,r,u),fs=!1,d=e.memoizedState,o.state=d,bv(e,r,o,i);var p=e.memoizedState;s!==f||d!==p||li.current||fs?(typeof h=="function"&&(Wx(e,n,h,r),p=e.memoizedState),(l=fs||nS(e,n,l,r,d,p,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return Gx(t,e,n,r,a,i)}function Gx(t,e,n,r,i,a){DF(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&KN(e,n,!1),jo(t,e,a);r=e.stateNode,iU.current=e;var s=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Vc(e,t.child,null,a),e.child=Vc(e,null,s,a)):zr(t,e,s,a),e.memoizedState=r.state,i&&KN(e,n,!0),e.child}function AF(t){var e=t.stateNode;e.pendingContext?GN(t,e.pendingContext,e.pendingContext!==e.context):e.context&&GN(t,e.context,!1),y2(t,e.containerInfo)}function cS(t,e,n,r,i){return Wc(),d2(i),e.flags|=256,zr(t,e,n,r),e.child}var Kx={dehydrated:null,treeContext:null,retryLane:0};function Yx(t){return{baseLanes:t,cachePool:null,transitions:null}}function TF(t,e,n){var r=e.pendingProps,i=mn.current,a=!1,o=(e.flags&128)!==0,s;if((s=o)||(s=t!==null&&t.memoizedState===null?!1:(i&2)!==0),s?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),rn(mn,i&1),t===null)return zx(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,a?(r=e.mode,a=e.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=v0(o,r,0,null),t=Ku(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Yx(n),e.memoizedState=Kx,t):S2(e,o));if(i=t.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return aU(t,e,o,r,s,i,n);if(a){a=r.fallback,o=e.mode,i=t.child,s=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=ks(i,u),r.subtreeFlags=i.subtreeFlags&14680064),s!==null?a=ks(s,a):(a=Ku(a,o,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,o=t.child.memoizedState,o=o===null?Yx(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~n,e.memoizedState=Kx,r}return a=t.child,t=a.sibling,r=ks(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function S2(t,e){return e=v0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function qp(t,e,n,r){return r!==null&&d2(r),Vc(e,t.child,null,n),t=S2(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function aU(t,e,n,r,i,a,o){if(n)return e.flags&256?(e.flags&=-257,r=Qy(Error(Re(422))),qp(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,i=e.mode,r=v0({mode:"visible",children:r.children},i,0,null),a=Ku(a,i,o,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&Vc(e,t.child,null,o),e.child.memoizedState=Yx(o),e.memoizedState=Kx,a);if(!(e.mode&1))return qp(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var s=r.dgst;return r=s,a=Error(Re(419)),r=Qy(a,r,void 0),qp(t,e,o,r)}if(s=(o&t.childLanes)!==0,ai||s){if(r=ir,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Lo(t,i),Ea(r,t,i,-1))}return R2(),r=Qy(Error(Re(421))),qp(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=yU.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,Ci=Ts(i.nextSibling),Ti=e,hn=!0,pa=null,t!==null&&(Vi[qi++]=_o,Vi[qi++]=Eo,Vi[qi++]=Ju,_o=t.id,Eo=t.overflow,Ju=e),e=S2(e,r.children),e.flags|=4096,e)}function fS(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ux(t.return,e,n)}function Zy(t,e,n,r,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function MF(t,e,n){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(zr(t,e,r.children,n),r=mn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&fS(t,n,e);else if(t.tag===19)fS(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(rn(mn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&wv(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Zy(e,!1,i,n,a);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&wv(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Zy(e,!0,n,null,a);break;case"together":Zy(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Vm(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function jo(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),tl|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Re(153));if(e.child!==null){for(t=e.child,n=ks(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ks(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function oU(t,e,n){switch(e.tag){case 3:AF(e),Wc();break;case 5:nF(e);break;case 1:ci(e.type)&&mv(e);break;case 4:y2(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;rn(yv,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(rn(mn,mn.current&1),e.flags|=128,null):n&e.child.childLanes?TF(t,e,n):(rn(mn,mn.current&1),t=jo(t,e,n),t!==null?t.sibling:null);rn(mn,mn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return MF(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),rn(mn,mn.current),r)break;return null;case 22:case 23:return e.lanes=0,SF(t,e,n)}return jo(t,e,n)}var IF,Xx,RF,kF;IF=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Xx=function(){};RF=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Lu(Ya.current);var a=null;switch(n){case"input":i=yx(t,i),r=yx(t,r),a=[];break;case"select":i=wn({},i,{value:void 0}),r=wn({},r,{value:void 0}),a=[];break;case"textarea":i=wx(t,i),r=wx(t,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=hv)}Ex(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var s=i[l];for(o in s)s.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Yd.hasOwnProperty(l)?a||(a=[]):(a=a||[]).push(l,null));for(l in r){var u=r[l];if(s=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==s&&(u!=null||s!=null))if(l==="style")if(s){for(o in s)!s.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&s[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,s=s?s.__html:void 0,u!=null&&s!==u&&(a=a||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Yd.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&on("scroll",t),a||s===u||(a=[])):(a=a||[]).push(l,u))}n&&(a=a||[]).push("style",n);var l=a;(e.updateQueue=l)&&(e.flags|=4)}};kF=function(t,e,n,r){n!==r&&(e.flags|=4)};function ed(t,e){if(!hn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function _r(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function sU(t,e,n){var r=e.pendingProps;switch(f2(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _r(e),null;case 1:return ci(e.type)&&pv(),_r(e),null;case 3:return r=e.stateNode,qc(),ln(li),ln(Pr),b2(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Wp(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,pa!==null&&(ib(pa),pa=null))),Xx(t,e),_r(e),null;case 5:x2(e);var i=Lu(sh.current);if(n=e.type,t!==null&&e.stateNode!=null)RF(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Re(166));return _r(e),null}if(t=Lu(Ya.current),Wp(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[Wa]=e,r[ah]=a,t=(e.mode&1)!==0,n){case"dialog":on("cancel",r),on("close",r);break;case"iframe":case"object":case"embed":on("load",r);break;case"video":case"audio":for(i=0;i<gd.length;i++)on(gd[i],r);break;case"source":on("error",r);break;case"img":case"image":case"link":on("error",r),on("load",r);break;case"details":on("toggle",r);break;case"input":bN(r,a),on("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},on("invalid",r);break;case"textarea":_N(r,a),on("invalid",r)}Ex(n,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var s=a[o];o==="children"?typeof s=="string"?r.textContent!==s&&(a.suppressHydrationWarning!==!0&&Up(r.textContent,s,t),i=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(a.suppressHydrationWarning!==!0&&Up(r.textContent,s,t),i=["children",""+s]):Yd.hasOwnProperty(o)&&s!=null&&o==="onScroll"&&on("scroll",r)}switch(n){case"input":Fp(r),wN(r,a,!0);break;case"textarea":Fp(r),EN(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=hv)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=sk(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Wa]=e,t[ah]=r,IF(t,e,!1,!1),e.stateNode=t;e:{switch(o=Cx(n,r),n){case"dialog":on("cancel",t),on("close",t),i=r;break;case"iframe":case"object":case"embed":on("load",t),i=r;break;case"video":case"audio":for(i=0;i<gd.length;i++)on(gd[i],t);i=r;break;case"source":on("error",t),i=r;break;case"img":case"image":case"link":on("error",t),on("load",t),i=r;break;case"details":on("toggle",t),i=r;break;case"input":bN(t,r),i=yx(t,r),on("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=wn({},r,{value:void 0}),on("invalid",t);break;case"textarea":_N(t,r),i=wx(t,r),on("invalid",t);break;default:i=r}Ex(n,i),s=i;for(a in s)if(s.hasOwnProperty(a)){var u=s[a];a==="style"?ck(t,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&uk(t,u)):a==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Xd(t,u):typeof u=="number"&&Xd(t,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Yd.hasOwnProperty(a)?u!=null&&a==="onScroll"&&on("scroll",t):u!=null&&Xw(t,a,u,o))}switch(n){case"input":Fp(t),wN(t,r,!1);break;case"textarea":Fp(t),EN(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ws(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?yc(t,!!r.multiple,a,!1):r.defaultValue!=null&&yc(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=hv)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return _r(e),null;case 6:if(t&&e.stateNode!=null)kF(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Re(166));if(n=Lu(sh.current),Lu(Ya.current),Wp(e)){if(r=e.stateNode,n=e.memoizedProps,r[Wa]=e,(a=r.nodeValue!==n)&&(t=Ti,t!==null))switch(t.tag){case 3:Up(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Up(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Wa]=e,e.stateNode=r}return _r(e),null;case 13:if(ln(mn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(hn&&Ci!==null&&e.mode&1&&!(e.flags&128))Qk(),Wc(),e.flags|=98560,a=!1;else if(a=Wp(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(Re(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Re(317));a[Wa]=e}else Wc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;_r(e),a=!1}else pa!==null&&(ib(pa),pa=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||mn.current&1?zn===0&&(zn=3):R2())),e.updateQueue!==null&&(e.flags|=4),_r(e),null);case 4:return qc(),Xx(t,e),t===null&&rh(e.stateNode.containerInfo),_r(e),null;case 10:return m2(e.type._context),_r(e),null;case 17:return ci(e.type)&&pv(),_r(e),null;case 19:if(ln(mn),a=e.memoizedState,a===null)return _r(e),null;if(r=(e.flags&128)!==0,o=a.rendering,o===null)if(r)ed(a,!1);else{if(zn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=wv(t),o!==null){for(e.flags|=128,ed(a,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return rn(mn,mn.current&1|2),e.child}t=t.sibling}a.tail!==null&&Mn()>Gc&&(e.flags|=128,r=!0,ed(a,!1),e.lanes=4194304)}else{if(!r)if(t=wv(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ed(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!hn)return _r(e),null}else 2*Mn()-a.renderingStartTime>Gc&&n!==1073741824&&(e.flags|=128,r=!0,ed(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(n=a.last,n!==null?n.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Mn(),e.sibling=null,n=mn.current,rn(mn,r?n&1|2:n&1),e):(_r(e),null);case 22:case 23:return I2(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?bi&1073741824&&(_r(e),e.subtreeFlags&6&&(e.flags|=8192)):_r(e),null;case 24:return null;case 25:return null}throw Error(Re(156,e.tag))}function uU(t,e){switch(f2(e),e.tag){case 1:return ci(e.type)&&pv(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return qc(),ln(li),ln(Pr),b2(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return x2(e),null;case 13:if(ln(mn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Re(340));Wc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ln(mn),null;case 4:return qc(),null;case 10:return m2(e.type._context),null;case 22:case 23:return I2(),null;case 24:return null;default:return null}}var Hp=!1,Sr=!1,lU=typeof WeakSet=="function"?WeakSet:Set,ze=null;function uc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Nn(t,e,r)}else n.current=null}function Qx(t,e,n){try{n()}catch(r){Nn(t,e,r)}}var dS=!1;function cU(t,e){if(Fx=cv,t=Lk(),l2(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,s=-1,u=-1,l=0,c=0,f=t,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(s=o+i),f!==a||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===t)break t;if(d===n&&++l===i&&(s=o),d===a&&++c===r&&(u=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=s===-1||u===-1?null:{start:s,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Px={focusedElem:t,selectionRange:n},cv=!1,ze=e;ze!==null;)if(e=ze,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ze=t;else for(;ze!==null;){e=ze;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,v=e.stateNode,x=v.getSnapshotBeforeUpdate(e.elementType===e.type?m:da(e.type,m),g);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Re(163))}}catch(b){Nn(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,ze=t;break}ze=e.return}return p=dS,dS=!1,p}function Id(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&Qx(e,n,a)}i=i.next}while(i!==r)}}function p0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Zx(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function FF(t){var e=t.alternate;e!==null&&(t.alternate=null,FF(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Wa],delete e[ah],delete e[Lx],delete e[Hz],delete e[Gz])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function PF(t){return t.tag===5||t.tag===3||t.tag===4}function hS(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||PF(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Jx(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=hv));else if(r!==4&&(t=t.child,t!==null))for(Jx(t,e,n),t=t.sibling;t!==null;)Jx(t,e,n),t=t.sibling}function eb(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(eb(t,e,n),t=t.sibling;t!==null;)eb(t,e,n),t=t.sibling}var sr=null,ha=!1;function is(t,e,n){for(n=n.child;n!==null;)OF(t,e,n),n=n.sibling}function OF(t,e,n){if(Ka&&typeof Ka.onCommitFiberUnmount=="function")try{Ka.onCommitFiberUnmount(o0,n)}catch{}switch(n.tag){case 5:Sr||uc(n,e);case 6:var r=sr,i=ha;sr=null,is(t,e,n),sr=r,ha=i,sr!==null&&(ha?(t=sr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):sr.removeChild(n.stateNode));break;case 18:sr!==null&&(ha?(t=sr,n=n.stateNode,t.nodeType===8?qy(t.parentNode,n):t.nodeType===1&&qy(t,n),eh(t)):qy(sr,n.stateNode));break;case 4:r=sr,i=ha,sr=n.stateNode.containerInfo,ha=!0,is(t,e,n),sr=r,ha=i;break;case 0:case 11:case 14:case 15:if(!Sr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&Qx(n,e,o),i=i.next}while(i!==r)}is(t,e,n);break;case 1:if(!Sr&&(uc(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Nn(n,e,s)}is(t,e,n);break;case 21:is(t,e,n);break;case 22:n.mode&1?(Sr=(r=Sr)||n.memoizedState!==null,is(t,e,n),Sr=r):is(t,e,n);break;default:is(t,e,n)}}function pS(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new lU),e.forEach(function(r){var i=xU.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ua(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=t,o=e,s=o;e:for(;s!==null;){switch(s.tag){case 5:sr=s.stateNode,ha=!1;break e;case 3:sr=s.stateNode.containerInfo,ha=!0;break e;case 4:sr=s.stateNode.containerInfo,ha=!0;break e}s=s.return}if(sr===null)throw Error(Re(160));OF(a,o,i),sr=null,ha=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){Nn(i,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)BF(e,t),e=e.sibling}function BF(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ua(e,t),La(t),r&4){try{Id(3,t,t.return),p0(3,t)}catch(m){Nn(t,t.return,m)}try{Id(5,t,t.return)}catch(m){Nn(t,t.return,m)}}break;case 1:ua(e,t),La(t),r&512&&n!==null&&uc(n,n.return);break;case 5:if(ua(e,t),La(t),r&512&&n!==null&&uc(n,n.return),t.flags&32){var i=t.stateNode;try{Xd(i,"")}catch(m){Nn(t,t.return,m)}}if(r&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,o=n!==null?n.memoizedProps:a,s=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{s==="input"&&a.type==="radio"&&a.name!=null&&ak(i,a),Cx(s,o);var l=Cx(s,a);for(o=0;o<u.length;o+=2){var c=u[o],f=u[o+1];c==="style"?ck(i,f):c==="dangerouslySetInnerHTML"?uk(i,f):c==="children"?Xd(i,f):Xw(i,c,f,l)}switch(s){case"input":xx(i,a);break;case"textarea":ok(i,a);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var h=a.value;h!=null?yc(i,!!a.multiple,h,!1):d!==!!a.multiple&&(a.defaultValue!=null?yc(i,!!a.multiple,a.defaultValue,!0):yc(i,!!a.multiple,a.multiple?[]:"",!1))}i[ah]=a}catch(m){Nn(t,t.return,m)}}break;case 6:if(ua(e,t),La(t),r&4){if(t.stateNode===null)throw Error(Re(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(m){Nn(t,t.return,m)}}break;case 3:if(ua(e,t),La(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{eh(e.containerInfo)}catch(m){Nn(t,t.return,m)}break;case 4:ua(e,t),La(t);break;case 13:ua(e,t),La(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(T2=Mn())),r&4&&pS(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Sr=(l=Sr)||c,ua(e,t),Sr=l):ua(e,t),La(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!c&&t.mode&1)for(ze=t,c=t.child;c!==null;){for(f=ze=c;ze!==null;){switch(d=ze,h=d.child,d.tag){case 0:case 11:case 14:case 15:Id(4,d,d.return);break;case 1:uc(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){Nn(r,n,m)}}break;case 5:uc(d,d.return);break;case 22:if(d.memoizedState!==null){vS(f);continue}}h!==null?(h.return=d,ze=h):vS(f)}c=c.sibling}e:for(c=null,f=t;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(s=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,s.style.display=lk("display",o))}catch(m){Nn(t,t.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){Nn(t,t.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ua(e,t),La(t),r&4&&pS(t);break;case 21:break;default:ua(e,t),La(t)}}function La(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(PF(n)){var r=n;break e}n=n.return}throw Error(Re(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Xd(i,""),r.flags&=-33);var a=hS(t);eb(t,a,i);break;case 3:case 4:var o=r.stateNode.containerInfo,s=hS(t);Jx(t,s,o);break;default:throw Error(Re(161))}}catch(u){Nn(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function fU(t,e,n){ze=t,LF(t)}function LF(t,e,n){for(var r=(t.mode&1)!==0;ze!==null;){var i=ze,a=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Hp;if(!o){var s=i.alternate,u=s!==null&&s.memoizedState!==null||Sr;s=Hp;var l=Sr;if(Hp=o,(Sr=u)&&!l)for(ze=i;ze!==null;)o=ze,u=o.child,o.tag===22&&o.memoizedState!==null?gS(i):u!==null?(u.return=o,ze=u):gS(i);for(;a!==null;)ze=a,LF(a),a=a.sibling;ze=i,Hp=s,Sr=l}mS(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,ze=a):mS(t)}}function mS(t){for(;ze!==null;){var e=ze;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Sr||p0(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Sr)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:da(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&JN(e,a,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}JN(e,o,n)}break;case 5:var s=e.stateNode;if(n===null&&e.flags&4){n=s;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&eh(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Re(163))}Sr||e.flags&512&&Zx(e)}catch(d){Nn(e,e.return,d)}}if(e===t){ze=null;break}if(n=e.sibling,n!==null){n.return=e.return,ze=n;break}ze=e.return}}function vS(t){for(;ze!==null;){var e=ze;if(e===t){ze=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ze=n;break}ze=e.return}}function gS(t){for(;ze!==null;){var e=ze;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{p0(4,e)}catch(u){Nn(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Nn(e,i,u)}}var a=e.return;try{Zx(e)}catch(u){Nn(e,a,u)}break;case 5:var o=e.return;try{Zx(e)}catch(u){Nn(e,o,u)}}}catch(u){Nn(e,e.return,u)}if(e===t){ze=null;break}var s=e.sibling;if(s!==null){s.return=e.return,ze=s;break}ze=e.return}}var dU=Math.ceil,Cv=Go.ReactCurrentDispatcher,D2=Go.ReactCurrentOwner,Zi=Go.ReactCurrentBatchConfig,Bt=0,ir=null,kn=null,mr=0,bi=0,lc=nu(0),zn=0,fh=null,tl=0,m0=0,A2=0,Rd=null,ni=null,T2=0,Gc=1/0,yo=null,Nv=!1,tb=null,Is=null,Gp=!1,bs=null,Sv=0,kd=0,nb=null,qm=-1,Hm=0;function Ur(){return Bt&6?Mn():qm!==-1?qm:qm=Mn()}function Rs(t){return t.mode&1?Bt&2&&mr!==0?mr&-mr:Yz.transition!==null?(Hm===0&&(Hm=_k()),Hm):(t=Gt,t!==0||(t=window.event,t=t===void 0?16:Tk(t.type)),t):1}function Ea(t,e,n,r){if(50<kd)throw kd=0,nb=null,Error(Re(185));qh(t,n,r),(!(Bt&2)||t!==ir)&&(t===ir&&(!(Bt&2)&&(m0|=n),zn===4&&ms(t,mr)),fi(t,r),n===1&&Bt===0&&!(e.mode&1)&&(Gc=Mn()+500,f0&&ru()))}function fi(t,e){var n=t.callbackNode;Y$(t,e);var r=lv(t,t===ir?mr:0);if(r===0)n!==null&&SN(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&SN(n),e===1)t.tag===0?Kz(yS.bind(null,t)):Kk(yS.bind(null,t)),Vz(function(){!(Bt&6)&&ru()}),n=null;else{switch(Ek(r)){case 1:n=t2;break;case 4:n=bk;break;case 16:n=uv;break;case 536870912:n=wk;break;default:n=uv}n=HF(n,jF.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function jF(t,e){if(qm=-1,Hm=0,Bt&6)throw Error(Re(327));var n=t.callbackNode;if(Ec()&&t.callbackNode!==n)return null;var r=lv(t,t===ir?mr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Dv(t,r);else{e=r;var i=Bt;Bt|=2;var a=zF();(ir!==t||mr!==e)&&(yo=null,Gc=Mn()+500,Gu(t,e));do try{mU();break}catch(s){$F(t,s)}while(!0);p2(),Cv.current=a,Bt=i,kn!==null?e=0:(ir=null,mr=0,e=zn)}if(e!==0){if(e===2&&(i=Tx(t),i!==0&&(r=i,e=rb(t,i))),e===1)throw n=fh,Gu(t,0),ms(t,r),fi(t,Mn()),n;if(e===6)ms(t,r);else{if(i=t.current.alternate,!(r&30)&&!hU(i)&&(e=Dv(t,r),e===2&&(a=Tx(t),a!==0&&(r=a,e=rb(t,a))),e===1))throw n=fh,Gu(t,0),ms(t,r),fi(t,Mn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Re(345));case 2:Su(t,ni,yo);break;case 3:if(ms(t,r),(r&130023424)===r&&(e=T2+500-Mn(),10<e)){if(lv(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ur(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Bx(Su.bind(null,t,ni,yo),e);break}Su(t,ni,yo);break;case 4:if(ms(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-_a(r);a=1<<o,o=e[o],o>i&&(i=o),r&=~a}if(r=i,r=Mn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*dU(r/1960))-r,10<r){t.timeoutHandle=Bx(Su.bind(null,t,ni,yo),r);break}Su(t,ni,yo);break;case 5:Su(t,ni,yo);break;default:throw Error(Re(329))}}}return fi(t,Mn()),t.callbackNode===n?jF.bind(null,t):null}function rb(t,e){var n=Rd;return t.current.memoizedState.isDehydrated&&(Gu(t,e).flags|=256),t=Dv(t,e),t!==2&&(e=ni,ni=n,e!==null&&ib(e)),t}function ib(t){ni===null?ni=t:ni.push.apply(ni,t)}function hU(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Aa(a(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ms(t,e){for(e&=~A2,e&=~m0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-_a(e),r=1<<n;t[n]=-1,e&=~r}}function yS(t){if(Bt&6)throw Error(Re(327));Ec();var e=lv(t,0);if(!(e&1))return fi(t,Mn()),null;var n=Dv(t,e);if(t.tag!==0&&n===2){var r=Tx(t);r!==0&&(e=r,n=rb(t,r))}if(n===1)throw n=fh,Gu(t,0),ms(t,e),fi(t,Mn()),n;if(n===6)throw Error(Re(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Su(t,ni,yo),fi(t,Mn()),null}function M2(t,e){var n=Bt;Bt|=1;try{return t(e)}finally{Bt=n,Bt===0&&(Gc=Mn()+500,f0&&ru())}}function nl(t){bs!==null&&bs.tag===0&&!(Bt&6)&&Ec();var e=Bt;Bt|=1;var n=Zi.transition,r=Gt;try{if(Zi.transition=null,Gt=1,t)return t()}finally{Gt=r,Zi.transition=n,Bt=e,!(Bt&6)&&ru()}}function I2(){bi=lc.current,ln(lc)}function Gu(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Wz(n)),kn!==null)for(n=kn.return;n!==null;){var r=n;switch(f2(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&pv();break;case 3:qc(),ln(li),ln(Pr),b2();break;case 5:x2(r);break;case 4:qc();break;case 13:ln(mn);break;case 19:ln(mn);break;case 10:m2(r.type._context);break;case 22:case 23:I2()}n=n.return}if(ir=t,kn=t=ks(t.current,null),mr=bi=e,zn=0,fh=null,A2=m0=tl=0,ni=Rd=null,Bu!==null){for(e=0;e<Bu.length;e++)if(n=Bu[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=i,r.next=o}n.pending=r}Bu=null}return t}function $F(t,e){do{var n=kn;try{if(p2(),Um.current=Ev,_v){for(var r=xn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}_v=!1}if(el=0,er=Bn=xn=null,Md=!1,uh=0,D2.current=null,n===null||n.return===null){zn=1,fh=e,kn=null;break}e:{var a=t,o=n.return,s=n,u=e;if(e=mr,s.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=s,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=aS(o);if(h!==null){h.flags&=-257,oS(h,o,s,a,e),h.mode&1&&iS(a,l,e),e=h,u=l;var p=e.updateQueue;if(p===null){var m=new Set;m.add(u),e.updateQueue=m}else p.add(u);break e}else{if(!(e&1)){iS(a,l,e),R2();break e}u=Error(Re(426))}}else if(hn&&s.mode&1){var g=aS(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),oS(g,o,s,a,e),d2(Hc(u,s));break e}}a=u=Hc(u,s),zn!==4&&(zn=2),Rd===null?Rd=[a]:Rd.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var v=EF(a,u,e);ZN(a,v);break e;case 1:s=u;var x=a.type,y=a.stateNode;if(!(a.flags&128)&&(typeof x.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Is===null||!Is.has(y)))){a.flags|=65536,e&=-e,a.lanes|=e;var b=CF(a,s,e);ZN(a,b);break e}}a=a.return}while(a!==null)}WF(n)}catch(w){e=w,kn===n&&n!==null&&(kn=n=n.return);continue}break}while(!0)}function zF(){var t=Cv.current;return Cv.current=Ev,t===null?Ev:t}function R2(){(zn===0||zn===3||zn===2)&&(zn=4),ir===null||!(tl&268435455)&&!(m0&268435455)||ms(ir,mr)}function Dv(t,e){var n=Bt;Bt|=2;var r=zF();(ir!==t||mr!==e)&&(yo=null,Gu(t,e));do try{pU();break}catch(i){$F(t,i)}while(!0);if(p2(),Bt=n,Cv.current=r,kn!==null)throw Error(Re(261));return ir=null,mr=0,zn}function pU(){for(;kn!==null;)UF(kn)}function mU(){for(;kn!==null&&!$$();)UF(kn)}function UF(t){var e=qF(t.alternate,t,bi);t.memoizedProps=t.pendingProps,e===null?WF(t):kn=e,D2.current=null}function WF(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=uU(n,e),n!==null){n.flags&=32767,kn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{zn=6,kn=null;return}}else if(n=sU(n,e,bi),n!==null){kn=n;return}if(e=e.sibling,e!==null){kn=e;return}kn=e=t}while(e!==null);zn===0&&(zn=5)}function Su(t,e,n){var r=Gt,i=Zi.transition;try{Zi.transition=null,Gt=1,vU(t,e,n,r)}finally{Zi.transition=i,Gt=r}return null}function vU(t,e,n,r){do Ec();while(bs!==null);if(Bt&6)throw Error(Re(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Re(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(X$(t,a),t===ir&&(kn=ir=null,mr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Gp||(Gp=!0,HF(uv,function(){return Ec(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Zi.transition,Zi.transition=null;var o=Gt;Gt=1;var s=Bt;Bt|=4,D2.current=null,cU(t,n),BF(n,t),Oz(Px),cv=!!Fx,Px=Fx=null,t.current=n,fU(n),z$(),Bt=s,Gt=o,Zi.transition=a}else t.current=n;if(Gp&&(Gp=!1,bs=t,Sv=i),a=t.pendingLanes,a===0&&(Is=null),V$(n.stateNode),fi(t,Mn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Nv)throw Nv=!1,t=tb,tb=null,t;return Sv&1&&t.tag!==0&&Ec(),a=t.pendingLanes,a&1?t===nb?kd++:(kd=0,nb=t):kd=0,ru(),null}function Ec(){if(bs!==null){var t=Ek(Sv),e=Zi.transition,n=Gt;try{if(Zi.transition=null,Gt=16>t?16:t,bs===null)var r=!1;else{if(t=bs,bs=null,Sv=0,Bt&6)throw Error(Re(331));var i=Bt;for(Bt|=4,ze=t.current;ze!==null;){var a=ze,o=a.child;if(ze.flags&16){var s=a.deletions;if(s!==null){for(var u=0;u<s.length;u++){var l=s[u];for(ze=l;ze!==null;){var c=ze;switch(c.tag){case 0:case 11:case 15:Id(8,c,a)}var f=c.child;if(f!==null)f.return=c,ze=f;else for(;ze!==null;){c=ze;var d=c.sibling,h=c.return;if(FF(c),c===l){ze=null;break}if(d!==null){d.return=h,ze=d;break}ze=h}}}var p=a.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}ze=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,ze=o;else e:for(;ze!==null;){if(a=ze,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Id(9,a,a.return)}var v=a.sibling;if(v!==null){v.return=a.return,ze=v;break e}ze=a.return}}var x=t.current;for(ze=x;ze!==null;){o=ze;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,ze=y;else e:for(o=x;ze!==null;){if(s=ze,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:p0(9,s)}}catch(w){Nn(s,s.return,w)}if(s===o){ze=null;break e}var b=s.sibling;if(b!==null){b.return=s.return,ze=b;break e}ze=s.return}}if(Bt=i,ru(),Ka&&typeof Ka.onPostCommitFiberRoot=="function")try{Ka.onPostCommitFiberRoot(o0,t)}catch{}r=!0}return r}finally{Gt=n,Zi.transition=e}}return!1}function xS(t,e,n){e=Hc(n,e),e=EF(t,e,1),t=Ms(t,e,1),e=Ur(),t!==null&&(qh(t,1,e),fi(t,e))}function Nn(t,e,n){if(t.tag===3)xS(t,t,n);else for(;e!==null;){if(e.tag===3){xS(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Is===null||!Is.has(r))){t=Hc(n,t),t=CF(e,t,1),e=Ms(e,t,1),t=Ur(),e!==null&&(qh(e,1,t),fi(e,t));break}}e=e.return}}function gU(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ur(),t.pingedLanes|=t.suspendedLanes&n,ir===t&&(mr&n)===n&&(zn===4||zn===3&&(mr&130023424)===mr&&500>Mn()-T2?Gu(t,0):A2|=n),fi(t,e)}function VF(t,e){e===0&&(t.mode&1?(e=Bp,Bp<<=1,!(Bp&130023424)&&(Bp=4194304)):e=1);var n=Ur();t=Lo(t,e),t!==null&&(qh(t,e,n),fi(t,n))}function yU(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),VF(t,n)}function xU(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Re(314))}r!==null&&r.delete(e),VF(t,n)}var qF;qF=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||li.current)ai=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ai=!1,oU(t,e,n);ai=!!(t.flags&131072)}else ai=!1,hn&&e.flags&1048576&&Yk(e,gv,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Vm(t,e),t=e.pendingProps;var i=Uc(e,Pr.current);_c(e,n),i=_2(null,e,r,t,i,n);var a=E2();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ci(r)?(a=!0,mv(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,g2(e),i.updater=h0,e.stateNode=i,i._reactInternals=e,Vx(e,r,t,n),e=Gx(null,e,r,!0,a,n)):(e.tag=0,hn&&a&&c2(e),zr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Vm(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=wU(r),t=da(r,t),i){case 0:e=Hx(null,e,r,t,n);break e;case 1:e=lS(null,e,r,t,n);break e;case 11:e=sS(null,e,r,t,n);break e;case 14:e=uS(null,e,r,da(r.type,t),n);break e}throw Error(Re(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:da(r,i),Hx(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:da(r,i),lS(t,e,r,i,n);case 3:e:{if(AF(e),t===null)throw Error(Re(387));r=e.pendingProps,a=e.memoizedState,i=a.element,tF(t,e),bv(e,r,null,n);var o=e.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=Hc(Error(Re(423)),e),e=cS(t,e,r,n,i);break e}else if(r!==i){i=Hc(Error(Re(424)),e),e=cS(t,e,r,n,i);break e}else for(Ci=Ts(e.stateNode.containerInfo.firstChild),Ti=e,hn=!0,pa=null,n=Jk(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Wc(),r===i){e=jo(t,e,n);break e}zr(t,e,r,n)}e=e.child}return e;case 5:return nF(e),t===null&&zx(e),r=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,o=i.children,Ox(r,i)?o=null:a!==null&&Ox(r,a)&&(e.flags|=32),DF(t,e),zr(t,e,o,n),e.child;case 6:return t===null&&zx(e),null;case 13:return TF(t,e,n);case 4:return y2(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Vc(e,null,r,n):zr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:da(r,i),sS(t,e,r,i,n);case 7:return zr(t,e,e.pendingProps,n),e.child;case 8:return zr(t,e,e.pendingProps.children,n),e.child;case 12:return zr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,rn(yv,r._currentValue),r._currentValue=o,a!==null)if(Aa(a.value,o)){if(a.children===i.children&&!li.current){e=jo(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var s=a.dependencies;if(s!==null){o=a.child;for(var u=s.firstContext;u!==null;){if(u.context===r){if(a.tag===1){u=To(-1,n&-n),u.tag=2;var l=a.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),Ux(a.return,n,e),s.lanes|=n;break}u=u.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(Re(341));o.lanes|=n,s=o.alternate,s!==null&&(s.lanes|=n),Ux(o,n,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}zr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,_c(e,n),i=ea(i),r=r(i),e.flags|=1,zr(t,e,r,n),e.child;case 14:return r=e.type,i=da(r,e.pendingProps),i=da(r.type,i),uS(t,e,r,i,n);case 15:return NF(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:da(r,i),Vm(t,e),e.tag=1,ci(r)?(t=!0,mv(e)):t=!1,_c(e,n),_F(e,r,i),Vx(e,r,i,n),Gx(null,e,r,!0,t,n);case 19:return MF(t,e,n);case 22:return SF(t,e,n)}throw Error(Re(156,e.tag))};function HF(t,e){return xk(t,e)}function bU(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xi(t,e,n,r){return new bU(t,e,n,r)}function k2(t){return t=t.prototype,!(!t||!t.isReactComponent)}function wU(t){if(typeof t=="function")return k2(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Zw)return 11;if(t===Jw)return 14}return 2}function ks(t,e){var n=t.alternate;return n===null?(n=Xi(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Gm(t,e,n,r,i,a){var o=2;if(r=t,typeof t=="function")k2(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Jl:return Ku(n.children,i,a,e);case Qw:o=8,i|=8;break;case px:return t=Xi(12,n,e,i|2),t.elementType=px,t.lanes=a,t;case mx:return t=Xi(13,n,e,i),t.elementType=mx,t.lanes=a,t;case vx:return t=Xi(19,n,e,i),t.elementType=vx,t.lanes=a,t;case nk:return v0(n,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ek:o=10;break e;case tk:o=9;break e;case Zw:o=11;break e;case Jw:o=14;break e;case cs:o=16,r=null;break e}throw Error(Re(130,t==null?t:typeof t,""))}return e=Xi(o,n,e,i),e.elementType=t,e.type=r,e.lanes=a,e}function Ku(t,e,n,r){return t=Xi(7,t,r,e),t.lanes=n,t}function v0(t,e,n,r){return t=Xi(22,t,r,e),t.elementType=nk,t.lanes=n,t.stateNode={isHidden:!1},t}function Jy(t,e,n){return t=Xi(6,t,null,e),t.lanes=n,t}function e1(t,e,n){return e=Xi(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function _U(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fy(0),this.expirationTimes=Fy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fy(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function F2(t,e,n,r,i,a,o,s,u){return t=new _U(t,e,n,s,u),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Xi(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},g2(a),t}function EU(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zl,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function GF(t){if(!t)return Vs;t=t._reactInternals;e:{if(gl(t)!==t||t.tag!==1)throw Error(Re(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ci(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Re(171))}if(t.tag===1){var n=t.type;if(ci(n))return Gk(t,n,e)}return e}function KF(t,e,n,r,i,a,o,s,u){return t=F2(n,r,!0,t,i,a,o,s,u),t.context=GF(null),n=t.current,r=Ur(),i=Rs(n),a=To(r,i),a.callback=e??null,Ms(n,a,i),t.current.lanes=i,qh(t,i,r),fi(t,r),t}function g0(t,e,n,r){var i=e.current,a=Ur(),o=Rs(i);return n=GF(n),e.context===null?e.context=n:e.pendingContext=n,e=To(a,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ms(i,e,o),t!==null&&(Ea(t,i,o,a),zm(t,i,o)),o}function Av(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function bS(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function P2(t,e){bS(t,e),(t=t.alternate)&&bS(t,e)}function CU(){return null}var YF=typeof reportError=="function"?reportError:function(t){console.error(t)};function O2(t){this._internalRoot=t}y0.prototype.render=O2.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Re(409));g0(t,e,null,null)};y0.prototype.unmount=O2.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;nl(function(){g0(null,t,null,null)}),e[Bo]=null}};function y0(t){this._internalRoot=t}y0.prototype.unstable_scheduleHydration=function(t){if(t){var e=Sk();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ps.length&&e!==0&&e<ps[n].priority;n++);ps.splice(n,0,t),n===0&&Ak(t)}};function B2(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function x0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function wS(){}function NU(t,e,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var l=Av(o);a.call(l)}}var o=KF(e,r,t,0,null,!1,!1,"",wS);return t._reactRootContainer=o,t[Bo]=o.current,rh(t.nodeType===8?t.parentNode:t),nl(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var s=r;r=function(){var l=Av(u);s.call(l)}}var u=F2(t,0,!1,null,null,!1,!1,"",wS);return t._reactRootContainer=u,t[Bo]=u.current,rh(t.nodeType===8?t.parentNode:t),nl(function(){g0(e,u,n,r)}),u}function b0(t,e,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var s=i;i=function(){var u=Av(o);s.call(u)}}g0(e,o,t,i)}else o=NU(n,e,t,i,r);return Av(o)}Ck=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=vd(e.pendingLanes);n!==0&&(n2(e,n|1),fi(e,Mn()),!(Bt&6)&&(Gc=Mn()+500,ru()))}break;case 13:nl(function(){var r=Lo(t,1);if(r!==null){var i=Ur();Ea(r,t,1,i)}}),P2(t,1)}};r2=function(t){if(t.tag===13){var e=Lo(t,134217728);if(e!==null){var n=Ur();Ea(e,t,134217728,n)}P2(t,134217728)}};Nk=function(t){if(t.tag===13){var e=Rs(t),n=Lo(t,e);if(n!==null){var r=Ur();Ea(n,t,e,r)}P2(t,e)}};Sk=function(){return Gt};Dk=function(t,e){var n=Gt;try{return Gt=t,e()}finally{Gt=n}};Sx=function(t,e,n){switch(e){case"input":if(xx(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=c0(r);if(!i)throw Error(Re(90));ik(r),xx(r,i)}}}break;case"textarea":ok(t,n);break;case"select":e=n.value,e!=null&&yc(t,!!n.multiple,e,!1)}};hk=M2;pk=nl;var SU={usingClientEntryPoint:!1,Events:[Gh,rc,c0,fk,dk,M2]},td={findFiberByHostInstance:Ou,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},DU={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Go.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=gk(t),t===null?null:t.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||CU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kp.isDisabled&&Kp.supportsFiber)try{o0=Kp.inject(DU),Ka=Kp}catch{}}Fi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SU;Fi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!B2(e))throw Error(Re(200));return EU(t,e,null,n)};Fi.createRoot=function(t,e){if(!B2(t))throw Error(Re(299));var n=!1,r="",i=YF;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=F2(t,1,!1,null,null,n,!1,r,i),t[Bo]=e.current,rh(t.nodeType===8?t.parentNode:t),new O2(e)};Fi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Re(188)):(t=Object.keys(t).join(","),Error(Re(268,t)));return t=gk(e),t=t===null?null:t.stateNode,t};Fi.flushSync=function(t){return nl(t)};Fi.hydrate=function(t,e,n){if(!x0(e))throw Error(Re(200));return b0(null,t,e,!0,n)};Fi.hydrateRoot=function(t,e,n){if(!B2(t))throw Error(Re(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",o=YF;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=KF(e,null,t,1,n??null,i,!1,a,o),t[Bo]=e.current,rh(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new y0(e)};Fi.render=function(t,e,n){if(!x0(e))throw Error(Re(200));return b0(null,t,e,!1,n)};Fi.unmountComponentAtNode=function(t){if(!x0(t))throw Error(Re(40));return t._reactRootContainer?(nl(function(){b0(null,null,t,!1,function(){t._reactRootContainer=null,t[Bo]=null})}),!0):!1};Fi.unstable_batchedUpdates=M2;Fi.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!x0(n))throw Error(Re(200));if(t==null||t._reactInternals===void 0)throw Error(Re(38));return b0(t,e,n,!1,r)};Fi.version="18.3.1-next-f1338f8080-20240426";function XF(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(XF)}catch(t){console.error(t)}}XF(),XR.exports=Fi;var AU=XR.exports,QF,_S=AU;QF=_S.createRoot,_S.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dh(){return dh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dh.apply(this,arguments)}var ws;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ws||(ws={}));const ES="popstate";function TU(t){t===void 0&&(t={});function e(r,i){let{pathname:a,search:o,hash:s}=r.location;return ab("",{pathname:a,search:o,hash:s},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Tv(i)}return IU(e,n,null,t)}function bn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ZF(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function MU(){return Math.random().toString(36).substr(2,8)}function CS(t,e){return{usr:t.state,key:t.key,idx:e}}function ab(t,e,n,r){return n===void 0&&(n=null),dh({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?xf(e):e,{state:n,key:e&&e.key||r||MU()})}function Tv(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function xf(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function IU(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,s=ws.Pop,u=null,l=c();l==null&&(l=0,o.replaceState(dh({},o.state,{idx:l}),""));function c(){return(o.state||{idx:null}).idx}function f(){s=ws.Pop;let g=c(),v=g==null?null:g-l;l=g,u&&u({action:s,location:m.location,delta:v})}function d(g,v){s=ws.Push;let x=ab(m.location,g,v);l=c()+1;let y=CS(x,l),b=m.createHref(x);try{o.pushState(y,"",b)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;i.location.assign(b)}a&&u&&u({action:s,location:m.location,delta:1})}function h(g,v){s=ws.Replace;let x=ab(m.location,g,v);l=c();let y=CS(x,l),b=m.createHref(x);o.replaceState(y,"",b),a&&u&&u({action:s,location:m.location,delta:0})}function p(g){let v=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof g=="string"?g:Tv(g);return x=x.replace(/ $/,"%20"),bn(v,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,v)}let m={get action(){return s},get location(){return t(i,o)},listen(g){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(ES,f),u=g,()=>{i.removeEventListener(ES,f),u=null}},createHref(g){return e(i,g)},createURL:p,encodeLocation(g){let v=p(g);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:d,replace:h,go(g){return o.go(g)}};return m}var NS;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(NS||(NS={}));function RU(t,e,n){return n===void 0&&(n="/"),kU(t,e,n,!1)}function kU(t,e,n,r){let i=typeof e=="string"?xf(e):e,a=Kc(i.pathname||"/",n);if(a==null)return null;let o=JF(t);FU(o);let s=null;for(let u=0;s==null&&u<o.length;++u){let l=qU(a);s=WU(o[u],l,r)}return s}function JF(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(a,o,s)=>{let u={relativePath:s===void 0?a.path||"":s,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};u.relativePath.startsWith("/")&&(bn(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=Fs([r,u.relativePath]),c=n.concat(u);a.children&&a.children.length>0&&(bn(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),JF(a.children,e,c,l)),!(a.path==null&&!a.index)&&e.push({path:l,score:zU(l,a.index),routesMeta:c})};return t.forEach((a,o)=>{var s;if(a.path===""||!((s=a.path)!=null&&s.includes("?")))i(a,o);else for(let u of eP(a.path))i(a,o,u)}),e}function eP(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=eP(r.join("/")),s=[];return s.push(...o.map(u=>u===""?a:[a,u].join("/"))),i&&s.push(...o),s.map(u=>t.startsWith("/")&&u===""?"/":u)}function FU(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:UU(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const PU=/^:[\w-]+$/,OU=3,BU=2,LU=1,jU=10,$U=-2,SS=t=>t==="*";function zU(t,e){let n=t.split("/"),r=n.length;return n.some(SS)&&(r+=$U),e&&(r+=BU),n.filter(i=>!SS(i)).reduce((i,a)=>i+(PU.test(a)?OU:a===""?LU:jU),r)}function UU(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function WU(t,e,n){let{routesMeta:r}=t,i={},a="/",o=[];for(let s=0;s<r.length;++s){let u=r[s],l=s===r.length-1,c=a==="/"?e:e.slice(a.length)||"/",f=Mv({path:u.relativePath,caseSensitive:u.caseSensitive,end:l},c),d=u.route;if(!f&&l&&n&&!r[r.length-1].route.index&&(f=Mv({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},c)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:Fs([a,f.pathname]),pathnameBase:YU(Fs([a,f.pathnameBase])),route:d}),f.pathnameBase!=="/"&&(a=Fs([a,f.pathnameBase]))}return o}function Mv(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=VU(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:r.reduce((l,c,f)=>{let{paramName:d,isOptional:h}=c;if(d==="*"){let m=s[f]||"";o=a.slice(0,a.length-m.length).replace(/(.)\/+$/,"$1")}const p=s[f];return h&&!p?l[d]=void 0:l[d]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:a,pathnameBase:o,pattern:t}}function VU(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),ZF(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,s,u)=>(r.push({paramName:s,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function qU(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ZF(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Kc(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function HU(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?xf(t):t;return{pathname:n?n.startsWith("/")?n:GU(n,e):e,search:XU(r),hash:QU(i)}}function GU(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function t1(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function KU(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function L2(t,e){let n=KU(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function j2(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=xf(t):(i=dh({},t),bn(!i.pathname||!i.pathname.includes("?"),t1("?","pathname","search",i)),bn(!i.pathname||!i.pathname.includes("#"),t1("#","pathname","hash",i)),bn(!i.search||!i.search.includes("#"),t1("#","search","hash",i)));let a=t===""||i.pathname==="",o=a?"/":i.pathname,s;if(o==null)s=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}s=f>=0?e[f]:"/"}let u=HU(i,s),l=o&&o!=="/"&&o.endsWith("/"),c=(a||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const Fs=t=>t.join("/").replace(/\/\/+/g,"/"),YU=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),XU=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,QU=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function ZU(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const tP=["post","put","patch","delete"];new Set(tP);const JU=["get",...tP];new Set(JU);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hh(){return hh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hh.apply(this,arguments)}const w0=X.createContext(null),nP=X.createContext(null),Ko=X.createContext(null),_0=X.createContext(null),iu=X.createContext({outlet:null,matches:[],isDataRoute:!1}),rP=X.createContext(null);function eW(t,e){let{relative:n}=e===void 0?{}:e;bf()||bn(!1);let{basename:r,navigator:i}=X.useContext(Ko),{hash:a,pathname:o,search:s}=C0(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:Fs([r,o])),i.createHref({pathname:u,search:s,hash:a})}function bf(){return X.useContext(_0)!=null}function wf(){return bf()||bn(!1),X.useContext(_0).location}function iP(t){X.useContext(Ko).static||X.useLayoutEffect(t)}function E0(){let{isDataRoute:t}=X.useContext(iu);return t?hW():tW()}function tW(){bf()||bn(!1);let t=X.useContext(w0),{basename:e,future:n,navigator:r}=X.useContext(Ko),{matches:i}=X.useContext(iu),{pathname:a}=wf(),o=JSON.stringify(L2(i,n.v7_relativeSplatPath)),s=X.useRef(!1);return iP(()=>{s.current=!0}),X.useCallback(function(l,c){if(c===void 0&&(c={}),!s.current)return;if(typeof l=="number"){r.go(l);return}let f=j2(l,JSON.parse(o),a,c.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Fs([e,f.pathname])),(c.replace?r.replace:r.push)(f,c.state,c)},[e,r,o,a,t])}function C0(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=X.useContext(Ko),{matches:i}=X.useContext(iu),{pathname:a}=wf(),o=JSON.stringify(L2(i,r.v7_relativeSplatPath));return X.useMemo(()=>j2(t,JSON.parse(o),a,n==="path"),[t,o,a,n])}function nW(t,e){return rW(t,e)}function rW(t,e,n,r){bf()||bn(!1);let{navigator:i,static:a}=X.useContext(Ko),{matches:o}=X.useContext(iu),s=o[o.length-1],u=s?s.params:{};s&&s.pathname;let l=s?s.pathnameBase:"/";s&&s.route;let c=wf(),f;if(e){var d;let v=typeof e=="string"?xf(e):e;l==="/"||(d=v.pathname)!=null&&d.startsWith(l)||bn(!1),f=v}else f=c;let h=f.pathname||"/",p=h;if(l!=="/"){let v=l.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(v.length).join("/")}let m=!a&&n&&n.matches&&n.matches.length>0?n.matches:RU(t,{pathname:p}),g=uW(m&&m.map(v=>Object.assign({},v,{params:Object.assign({},u,v.params),pathname:Fs([l,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:Fs([l,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),o,n,r);return e&&g?X.createElement(_0.Provider,{value:{location:hh({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:ws.Pop}},g):g}function iW(){let t=dW(),e=ZU(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return X.createElement(X.Fragment,null,X.createElement("h2",null,"Unexpected Application Error!"),X.createElement("h3",{style:{fontStyle:"italic"}},e),n?X.createElement("pre",{style:i},n):null,null)}const aW=X.createElement(iW,null);class oW extends X.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?X.createElement(iu.Provider,{value:this.props.routeContext},X.createElement(rP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function sW(t){let{routeContext:e,match:n,children:r}=t,i=X.useContext(w0);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),X.createElement(iu.Provider,{value:e},r)}function uW(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,s=(i=n)==null?void 0:i.errors;if(s!=null){let c=o.findIndex(f=>f.route.id&&(s==null?void 0:s[f.route.id])!==void 0);c>=0||bn(!1),o=o.slice(0,Math.min(o.length,c+1))}let u=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let f=o[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=c),f.route.id){let{loaderData:d,errors:h}=n,p=f.route.loader&&d[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||p){u=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((c,f,d)=>{let h,p=!1,m=null,g=null;n&&(h=s&&f.route.id?s[f.route.id]:void 0,m=f.route.errorElement||aW,u&&(l<0&&d===0?(p=!0,g=null):l===d&&(p=!0,g=f.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,d+1)),x=()=>{let y;return h?y=m:p?y=g:f.route.Component?y=X.createElement(f.route.Component,null):f.route.element?y=f.route.element:y=c,X.createElement(sW,{match:f,routeContext:{outlet:c,matches:v,isDataRoute:n!=null},children:y})};return n&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?X.createElement(oW,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:x(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):x()},null)}var aP=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(aP||{}),Iv=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Iv||{});function lW(t){let e=X.useContext(w0);return e||bn(!1),e}function cW(t){let e=X.useContext(nP);return e||bn(!1),e}function fW(t){let e=X.useContext(iu);return e||bn(!1),e}function oP(t){let e=fW(),n=e.matches[e.matches.length-1];return n.route.id||bn(!1),n.route.id}function dW(){var t;let e=X.useContext(rP),n=cW(Iv.UseRouteError),r=oP(Iv.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function hW(){let{router:t}=lW(aP.UseNavigateStable),e=oP(Iv.UseNavigateStable),n=X.useRef(!1);return iP(()=>{n.current=!0}),X.useCallback(function(i,a){a===void 0&&(a={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,hh({fromRouteId:e},a)))},[t,e])}function pW(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function mW(t){let{to:e,replace:n,state:r,relative:i}=t;bf()||bn(!1);let{future:a,static:o}=X.useContext(Ko),{matches:s}=X.useContext(iu),{pathname:u}=wf(),l=E0(),c=j2(e,L2(s,a.v7_relativeSplatPath),u,i==="path"),f=JSON.stringify(c);return X.useEffect(()=>l(JSON.parse(f),{replace:n,state:r,relative:i}),[l,f,i,n,r]),null}function tn(t){bn(!1)}function vW(t){let{basename:e="/",children:n=null,location:r,navigationType:i=ws.Pop,navigator:a,static:o=!1,future:s}=t;bf()&&bn(!1);let u=e.replace(/^\/*/,"/"),l=X.useMemo(()=>({basename:u,navigator:a,static:o,future:hh({v7_relativeSplatPath:!1},s)}),[u,s,a,o]);typeof r=="string"&&(r=xf(r));let{pathname:c="/",search:f="",hash:d="",state:h=null,key:p="default"}=r,m=X.useMemo(()=>{let g=Kc(c,u);return g==null?null:{location:{pathname:g,search:f,hash:d,state:h,key:p},navigationType:i}},[u,c,f,d,h,p,i]);return m==null?null:X.createElement(Ko.Provider,{value:l},X.createElement(_0.Provider,{children:n,value:m}))}function gW(t){let{children:e,location:n}=t;return nW(ob(e),n)}new Promise(()=>{});function ob(t,e){e===void 0&&(e=[]);let n=[];return X.Children.forEach(t,(r,i)=>{if(!X.isValidElement(r))return;let a=[...e,i];if(r.type===X.Fragment){n.push.apply(n,ob(r.props.children,a));return}r.type!==tn&&bn(!1),!r.props.index||!r.props.children||bn(!1);let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=ob(r.props.children,a)),n.push(o)}),n}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rv(){return Rv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Rv.apply(this,arguments)}function sP(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function yW(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function xW(t,e){return t.button===0&&(!e||e==="_self")&&!yW(t)}const bW=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],wW=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],_W="6";try{window.__reactRouterVersion=_W}catch{}const EW=X.createContext({isTransitioning:!1}),CW="startTransition",DS=g$[CW];function NW(t){let{basename:e,children:n,future:r,window:i}=t,a=X.useRef();a.current==null&&(a.current=TU({window:i,v5Compat:!0}));let o=a.current,[s,u]=X.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},c=X.useCallback(f=>{l&&DS?DS(()=>u(f)):u(f)},[u,l]);return X.useLayoutEffect(()=>o.listen(c),[o,c]),X.useEffect(()=>pW(r),[r]),X.createElement(vW,{basename:e,children:n,location:s.location,navigationType:s.action,navigator:o,future:r})}const SW=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",DW=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ni=X.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:a,replace:o,state:s,target:u,to:l,preventScrollReset:c,viewTransition:f}=e,d=sP(e,bW),{basename:h}=X.useContext(Ko),p,m=!1;if(typeof l=="string"&&DW.test(l)&&(p=l,SW))try{let y=new URL(window.location.href),b=l.startsWith("//")?new URL(y.protocol+l):new URL(l),w=Kc(b.pathname,h);b.origin===y.origin&&w!=null?l=w+b.search+b.hash:m=!0}catch{}let g=eW(l,{relative:i}),v=TW(l,{replace:o,state:s,target:u,preventScrollReset:c,relative:i,viewTransition:f});function x(y){r&&r(y),y.defaultPrevented||v(y)}return X.createElement("a",Rv({},d,{href:p||g,onClick:m||a?r:x,ref:n,target:u}))}),Yp=X.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:a="",end:o=!1,style:s,to:u,viewTransition:l,children:c}=e,f=sP(e,wW),d=C0(u,{relative:f.relative}),h=wf(),p=X.useContext(nP),{navigator:m,basename:g}=X.useContext(Ko),v=p!=null&&MW(d)&&l===!0,x=m.encodeLocation?m.encodeLocation(d).pathname:d.pathname,y=h.pathname,b=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;i||(y=y.toLowerCase(),b=b?b.toLowerCase():null,x=x.toLowerCase()),b&&g&&(b=Kc(b,g)||b);const w=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let _=y===x||!o&&y.startsWith(x)&&y.charAt(w)==="/",E=b!=null&&(b===x||!o&&b.startsWith(x)&&b.charAt(x.length)==="/"),C={isActive:_,isPending:E,isTransitioning:v},N=_?r:void 0,D;typeof a=="function"?D=a(C):D=[a,_?"active":null,E?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let A=typeof s=="function"?s(C):s;return X.createElement(Ni,Rv({},f,{"aria-current":N,className:D,ref:n,style:A,to:u,viewTransition:l}),typeof c=="function"?c(C):c)});var sb;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(sb||(sb={}));var AS;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(AS||(AS={}));function AW(t){let e=X.useContext(w0);return e||bn(!1),e}function TW(t,e){let{target:n,replace:r,state:i,preventScrollReset:a,relative:o,viewTransition:s}=e===void 0?{}:e,u=E0(),l=wf(),c=C0(t,{relative:o});return X.useCallback(f=>{if(xW(f,n)){f.preventDefault();let d=r!==void 0?r:Tv(l)===Tv(c);u(t,{replace:d,state:i,preventScrollReset:a,relative:o,viewTransition:s})}},[l,u,c,r,i,n,t,a,o,s])}function MW(t,e){e===void 0&&(e={});let n=X.useContext(EW);n==null&&bn(!1);let{basename:r}=AW(sb.useViewTransitionState),i=C0(t,{relative:e.relative});if(!n.isTransitioning)return!1;let a=Kc(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Kc(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Mv(i.pathname,o)!=null||Mv(i.pathname,a)!=null}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var IW={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RW=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Pt=(t,e)=>{const n=X.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:o,className:s="",children:u,...l},c)=>X.createElement("svg",{ref:c,...IW,width:i,height:i,stroke:r,strokeWidth:o?Number(a)*24/Number(i):a,className:["lucide",`lucide-${RW(t)}`,s].join(" "),...l},[...e.map(([f,d])=>X.createElement(f,d)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uP=Pt("Apple",[["path",{d:"M12 20.94c1.5 0 2.75 1.06 4 1.06 3 0 6-8 6-12.22A4.91 4.91 0 0 0 17 5c-2.22 0-4 1.44-5 2-1-.56-2.78-2-5-2a4.9 4.9 0 0 0-5 4.78C2 14 5 22 8 22c1.25 0 2.5-1.06 4-1.06Z",key:"3s7exb"}],["path",{d:"M10 2c1 .5 2 2 2 5",key:"fcco2y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lP=Pt("Bird",[["path",{d:"M16 7h.01",key:"1kdx03"}],["path",{d:"M3.4 18H12a8 8 0 0 0 8-8V7a4 4 0 0 0-7.28-2.3L2 20",key:"oj1oa8"}],["path",{d:"m20 7 2 .5-2 .5",key:"12nv4d"}],["path",{d:"M10 18v3",key:"1yea0a"}],["path",{d:"M14 17.75V21",key:"1pymcb"}],["path",{d:"M7 18a6 6 0 0 0 3.84-10.61",key:"1npnn0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kW=Pt("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2=Pt("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TS=Pt("CameraOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16",key:"qmtpty"}],["path",{d:"M9.5 4h5L17 7h3a2 2 0 0 1 2 2v7.5",key:"1ufyfc"}],["path",{d:"M14.121 15.121A3 3 0 1 1 9.88 10.88",key:"11zox6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cP=Pt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FW=Pt("CarTaxiFront",[["path",{d:"M10 2h4",key:"n1abiw"}],["path",{d:"m21 8-2 2-1.5-3.7A2 2 0 0 0 15.646 5H8.4a2 2 0 0 0-1.903 1.257L5 10 3 8",key:"1imjwt"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 14h.01",key:"7oqj8z"}],["rect",{width:"18",height:"8",x:"3",y:"10",rx:"2",key:"a7itu8"}],["path",{d:"M5 18v2",key:"ppbyun"}],["path",{d:"M19 18v2",key:"gy7782"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PW=Pt("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fP=Pt("Carrot",[["path",{d:"M2.27 21.7s9.87-3.5 12.73-6.36a4.5 4.5 0 0 0-6.36-6.37C5.77 11.84 2.27 21.7 2.27 21.7zM8.64 14l-2.05-2.04M15.34 15l-2.46-2.46",key:"rfqxbe"}],["path",{d:"M22 9s-1.33-2-3.5-2C16.86 7 15 9 15 9s1.33 2 3.5 2S22 9 22 9z",key:"6b25w4"}],["path",{d:"M15 2s-2 1.33-2 3.5S15 9 15 9s2-1.84 2-3.5C17 3.33 15 2 15 2z",key:"fn65lo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ub=Pt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OW=Pt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dP=Pt("Fish",[["path",{d:"M6.5 12c.94-3.46 4.94-6 8.5-6 3.56 0 6.06 2.54 7 6-.94 3.47-3.44 6-7 6s-7.56-2.53-8.5-6Z",key:"15baut"}],["path",{d:"M18 12v.5",key:"18hhni"}],["path",{d:"M16 17.93a9.77 9.77 0 0 1 0-11.86",key:"16dt7o"}],["path",{d:"M7 10.67C7 8 5.58 5.97 2.73 5.5c-1 1.5-1 5 .23 6.5-1.24 1.5-1.24 5-.23 6.5C5.58 18.03 7 16 7 13.33",key:"l9di03"}],["path",{d:"M10.46 7.26C10.2 5.88 9.17 4.24 8 3h5.8a2 2 0 0 1 1.98 1.67l.23 1.4",key:"1kjonw"}],["path",{d:"m16.01 17.93-.23 1.4A2 2 0 0 1 13.8 21H9.5a5.96 5.96 0 0 0 1.49-3.98",key:"1zlm23"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hP=Pt("Flower2",[["path",{d:"M12 5a3 3 0 1 1 3 3m-3-3a3 3 0 1 0-3 3m3-3v1M9 8a3 3 0 1 0 3 3M9 8h1m5 0a3 3 0 1 1-3 3m3-3h-1m-2 3v-1",key:"3pnvol"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["path",{d:"M12 10v12",key:"6ubwww"}],["path",{d:"M12 22c4.2 0 7-1.667 7-5-4.2 0-7 1.667-7 5Z",key:"9hd38g"}],["path",{d:"M12 22c-4.2 0-7-1.667-7-5 4.2 0 7 1.667 7 5Z",key:"ufn41s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BW=Pt("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LW=Pt("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jW=Pt("Hammer",[["path",{d:"m15 12-8.373 8.373a1 1 0 1 1-3-3L12 9",key:"eefl8a"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172V7l-2.26-2.26a6 6 0 0 0-4.202-1.756L9 2.96l.92.82A6.18 6.18 0 0 1 12 8.4V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"b7pghm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lb=Pt("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MS=Pt("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pP=Pt("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $W=Pt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zW=Pt("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cb=Pt("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IS=Pt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UW=Pt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WW=Pt("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VW=Pt("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qW=Pt("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HW=Pt("PawPrint",[["circle",{cx:"11",cy:"4",r:"2",key:"vol9p0"}],["circle",{cx:"18",cy:"8",r:"2",key:"17gozi"}],["circle",{cx:"20",cy:"16",r:"2",key:"1v9bxh"}],["path",{d:"M9 10a5 5 0 0 1 5 5v3.5a3.5 3.5 0 0 1-6.84 1.045Q6.52 17.48 4.46 16.84A3.5 3.5 0 0 1 5.5 10Z",key:"1ydw1z"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GW=Pt("Puzzle",[["path",{d:"M19.439 7.85c-.049.322.059.648.289.878l1.568 1.568c.47.47.706 1.087.706 1.704s-.235 1.233-.706 1.704l-1.611 1.611a.98.98 0 0 1-.837.276c-.47-.07-.802-.48-.968-.925a2.501 2.501 0 1 0-3.214 3.214c.446.166.855.497.925.968a.979.979 0 0 1-.276.837l-1.61 1.61a2.404 2.404 0 0 1-1.705.707 2.402 2.402 0 0 1-1.704-.706l-1.568-1.568a1.026 1.026 0 0 0-.877-.29c-.493.074-.84.504-1.02.968a2.5 2.5 0 1 1-3.237-3.237c.464-.18.894-.527.967-1.02a1.026 1.026 0 0 0-.289-.877l-1.568-1.568A2.402 2.402 0 0 1 1.998 12c0-.617.236-1.234.706-1.704L4.23 8.77c.24-.24.581-.353.917-.303.515.077.877.528 1.073 1.01a2.5 2.5 0 1 0 3.259-3.259c-.482-.196-.933-.558-1.01-1.073-.05-.336.062-.676.303-.917l1.525-1.525A2.402 2.402 0 0 1 12 1.998c.617 0 1.234.236 1.704.706l1.568 1.568c.23.23.556.338.877.29.493-.074.84-.504 1.02-.968a2.5 2.5 0 1 1 3.237 3.237c-.464.18-.894.527-.967 1.02Z",key:"i0oyt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KW=Pt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YW=Pt("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fb=Pt("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ph=Pt("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kv=Pt("Triangle",[["path",{d:"M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"14u9p9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XW=Pt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function QW(){return S.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-12",children:[S.jsx("h1",{className:"text-4xl font-bold text-center mb-12",children:"Welcome to Nature's Encyclopedia"}),S.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:ZW.map(t=>S.jsxs(Ni,{to:t.path,className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow p-6",children:[S.jsxs("div",{className:"flex items-center mb-4",children:[t.icon,S.jsx("h2",{className:"text-2xl font-semibold ml-3",children:t.title})]}),S.jsx("p",{className:"text-gray-600",children:t.description})]},t.path))})]})}const ZW=[{title:"Animals",path:"/animals",icon:S.jsx(HW,{className:"w-8 h-8 text-green-600"}),description:"Discover the diverse world of land animals, from majestic mammals to fascinating reptiles."},{title:"Aquatic Life",path:"/aquatic",icon:S.jsx(dP,{className:"w-8 h-8 text-blue-600"}),description:"Explore the mysterious depths of oceans and learn about marine life."},{title:"Birds",path:"/birds",icon:S.jsx(lP,{className:"w-8 h-8 text-yellow-600"}),description:"Learn about various bird species, their habitats, and behaviors."},{title:"Fruits",path:"/fruits",icon:S.jsx(uP,{className:"w-8 h-8 text-red-600"}),description:"Explore nutritious and delicious fruits from around the world."},{title:"Vegetables",path:"/vegetables",icon:S.jsx(fP,{className:"w-8 h-8 text-orange-600"}),description:"Discover healthy vegetables and their benefits for your well-being."},{title:"Flowers",path:"/flowers",icon:S.jsx(hP,{className:"w-8 h-8 text-pink-500"}),description:"Get to know beautiful flowers and their significance in culture and nature."},{title:"Vehicles",path:"/vehicles",icon:S.jsx(PW,{className:"w-8 h-8 text-gray-600"}),description:"Learn about different types of vehicles and how they help us in daily life."},{title:"Math",path:"/math",icon:S.jsx($2,{className:"w-8 h-8 text-purple-600"}),description:"Explore the world of mathematics, from basic concepts to advanced theories and practical applications."}];function JW(){return S.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-12 bg-white",children:[S.jsx("h1",{className:"text-4xl font-bold mb-8",children:"Land Animals"}),S.jsxs("section",{className:"mb-12",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Lions"}),S.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[S.jsxs("div",{children:[S.jsx("img",{src:"https://plus.unsplash.com/premium_photo-1669725687221-6fe12c2da6b1?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8TGlvbnN8ZW58MHx8MHx8fDA%3D",alt:"Lion",className:"rounded-lg mb-4 w-full h-64 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Lions"}),S.jsx("p",{className:"text-gray-700",children:'Lions are one of the most iconic big cats, known as the "King of the Jungle". They live in prides and are excellent hunters, working together to catch their prey. Adult males are easily recognizable by their impressive manes, which can vary in color from blonde to black.'})]}),S.jsxs("div",{children:[S.jsx("iframe",{className:"w-full h-64 rounded-lg mb-4",src:"https://www.youtube.com/embed/IPiyo332Gks",title:"Lion Documentary",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Lion Behavior"}),S.jsx("p",{className:"text-gray-700",children:"Watch this fascinating documentary about lion behavior in the wild, their social structure, and hunting techniques. Lions are the only truly social cats, living in groups called prides that typically consist of related females, their cubs, and a small number of adult males."})]})]})]}),S.jsxs("section",{className:"mb-12",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Endangered Species"}),S.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[S.jsx("img",{src:"https://images.unsplash.com/flagged/photo-1557650454-65194af63bf9?w=300&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8Umhpbm98ZW58MHx8MHx8fDA%3D",alt:"Rhino",className:"rounded-lg mb-4 w-full h-48 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"White Rhinoceros"}),S.jsx("p",{className:"text-gray-700",children:"The white rhinoceros is one of the largest land mammals. Despite their name, they are actually gray in color. They are heavily threatened by poaching for their horns."})]}),S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[S.jsx("img",{src:"https://images.unsplash.com/photo-1581281863883-2469417a1668?w=300&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8R29yaWxsYXxlbnwwfHwwfHx8MA%3D%3D",alt:"Gorilla",className:"rounded-lg mb-4 w-full h-48 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Mountain Gorilla"}),S.jsx("p",{className:"text-gray-700",children:"Mountain gorillas are gentle giants that share 98% of their DNA with humans. They live in the mountain forests of central Africa and are endangered due to habitat loss."})]}),S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[S.jsx("img",{src:"https://images.unsplash.com/photo-1615824996195-f780bba7cfab?w=300&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Nnx8VGlnZXJ8ZW58MHx8MHx8fDA%3D",alt:"Tiger",className:"rounded-lg mb-4 w-full h-48 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Bengal Tiger"}),S.jsx("p",{className:"text-gray-700",children:"The Bengal tiger is one of the most magnificent big cats, known for its distinctive orange coat with black stripes. Each tiger's stripe pattern is unique, like human fingerprints."})]})]})]}),S.jsxs("section",{className:"mb-12",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Reptiles"}),S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[S.jsx("img",{src:"https://plus.unsplash.com/premium_photo-1661843714194-62e7bc511d8b?q=80&w=1211&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Komodo Dragon",className:"rounded-lg mb-4 w-full h-72 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Komodo Dragons"}),S.jsx("p",{className:"text-gray-700 mb-4",children:"Komodo dragons are the largest living species of lizard in the world. These powerful predators can grow up to 10 feet in length and weigh up to 150 pounds. They are found exclusively on several islands in Indonesia."}),S.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[S.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg",children:[S.jsx("h4",{className:"font-semibold mb-2",children:"Habitat"}),S.jsx("p",{children:"Indonesian islands"})]}),S.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg",children:[S.jsx("h4",{className:"font-semibold mb-2",children:"Diet"}),S.jsx("p",{children:"Carnivorous - They hunt deer, pigs, and even water buffalo"})]})]})]})]}),S.jsxs("section",{className:"mb-12",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Cheethah"}),S.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[S.jsxs("div",{children:[S.jsx("img",{src:"https://plus.unsplash.com/premium_photo-1664304362237-8040f0ecac98?w=300&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8Q0hFRVRBSFN8ZW58MHx8MHx8fDA%3D",alt:"Cheethah",className:"rounded-lg mb-4 w-full h-64 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Cheethah"}),S.jsx("p",{className:"text-gray-700",children:"The cheetah (Acinonyx jubatus) is renowned as the fastest land animal, capable of accelerating from 0 to 70 km/h in just two seconds. This incredible speed is facilitated by its lightweight frame, long legs, and semi-retractable claws that provide excellent traction. Unlike other big cats, cheetahs are diurnal hunters, primarily active during the day."})]}),S.jsxs("div",{children:[S.jsx("iframe",{className:"w-full h-64 rounded-lg mb-4",src:"https://www.youtube.com/embed/k-Me1T9Pz40",title:"Cheethah Documentary",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Cheethah Behavior"}),S.jsx("p",{className:"text-gray-700",children:"You should watch this video because it shows a cheetah running in slow motion, letting you see every powerful movement as it sprints. Its short, super clear, and beautifully filmed by BBC Earth. Youll get to understand why cheetahs are the fastest animals on land, and its just really cool to watch how their bodies work in such an amazing way."})]})]})]}),S.jsxs("section",{className:"mb-12",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Monkey"}),S.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[S.jsxs("div",{children:[S.jsx("img",{src:"https://images.unsplash.com/photo-1531989417401-0f85f7e673f8?w=300&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8OHx8TW9ua2V5fGVufDB8fDB8fHww",alt:"Monkey",className:"rounded-lg mb-4 w-full h-64 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Monkey"}),S.jsx("p",{className:"text-gray-700",children:"Monkeys are intelligent, playful animals known for their agility and curiosity. They belong to the primate family and are closely related to humans. There are two main types: Old World monkeys (like baboons and macaques, found in Africa and Asia) and New World monkeys (like capuchins and howler monkeys, found in Central and South America). Monkeys use their hands and tails to climb, grab food, and interact with each other."})]}),S.jsxs("div",{children:[S.jsx("iframe",{className:"w-full h-64 rounded-lg mb-4",src:"https://www.youtube.com/embed/icd_ob8UWgQ?si=c18JTtPp7nxMeUia",title:"Monkey Documentary",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Monkey Behavior"}),S.jsx("p",{className:"text-gray-700",children:"You should watch this video if you want to learn faster and understand complex topics better. It explains the Feynman Technique, a proven method to boost comprehension by simplifying concepts, teaching them to others, and refining your knowledge. Its short, practical, and offers clear examples, making it useful for students, professionals, or anyone tackling new subjects. If youre struggling with retention or clarity, this could help you study smarter."})]})]})]})]})}function eV(){return S.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-12 bg-white",children:[S.jsx("h1",{className:"text-4xl font-bold mb-8",children:"Aquatic Life"}),S.jsx("section",{className:"mb-12 ",children:S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 ",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Ocean Ecosystems"}),S.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[S.jsxs("div",{children:[S.jsx("img",{src:"https://plus.unsplash.com/premium_photo-1661841439995-1706237c83dc?q=80&w=1170&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Coral Reef",className:"rounded-lg mb-4 w-full h-64 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Coral Reefs"}),S.jsx("p",{className:"text-gray-700",children:'Coral reefs are diverse underwater ecosystems that provide habitat for countless marine species. They are often called the "rainforests of the sea" due to their rich biodiversity.'})]}),S.jsxs("div",{children:[S.jsx("iframe",{className:"w-full h-64 rounded-lg mb-4",src:"https://www.youtube.com/embed/J2BKd5e15Jc",title:"Coral Reef Documentary",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Life on the Reef"}),S.jsx("p",{className:"text-gray-700",children:"Explore the fascinating world of coral reefs and learn about the incredible variety of life they support."})]})]})]})}),S.jsxs("section",{className:"grid md:grid-cols-2 gap-8 mb-12",children:[S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Marine Mammals"}),S.jsx("img",{src:"https://plus.unsplash.com/premium_photo-1661847613093-bbb6d1c0f73a?q=80&w=1085&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Humpback Whale",className:"rounded-lg mb-4 w-full h-64 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Whales"}),S.jsx("p",{className:"text-gray-700",children:"Whales are the largest animals on Earth. These magnificent creatures are known for their intelligence, complex social structures, and haunting songs that can travel for miles underwater."})]}),S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Deep Sea Creatures"}),S.jsx("img",{src:"https://images.unsplash.com/photo-1545671913-b89ac1b4ac10",alt:"Deep Sea Creature",className:"rounded-lg mb-4 w-full h-64 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Mysterious Depths"}),S.jsx("p",{className:"text-gray-700",children:"The deep ocean remains one of Earth's last frontiers. New species are discovered regularly in these dark waters, where creatures have evolved fascinating adaptations to survive."})]})]}),S.jsxs("section",{className:"grid md:grid-cols-2 gap-8 mb-12",children:[S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Amphibians"}),S.jsx("img",{src:"https://images.unsplash.com/photo-1682097548906-88eff998ae17?q=80&w=1074&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Frogs",className:"rounded-lg mb-4 w-full h-64 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Frogs"}),S.jsx("p",{className:"text-gray-700",children:"Frogs are small, tailless amphibians known for their powerful hind legs, bulging eyes, and croaky calls. Found in a variety of habitats ranging from tropical rainforests to temperate ponds, frogs play a vital role in maintaining ecological balance by feeding on insects and serving as prey for many animals. Their permeable skin allows them to absorb water and oxygen, making them highly sensitive to environmental changes. Frogs undergo a fascinating transformation from tadpoles to adults through metamorphosis, symbolizing growth and adaptability."})]}),S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Mollusks"}),S.jsx("img",{src:"https://plus.unsplash.com/premium_photo-1723733104322-827186b5eb9e?q=80&w=1032&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Octopus",className:"rounded-lg mb-4 w-full h-64 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Octopus"}),S.jsx("p",{className:"text-gray-700",children:"Octopuses are highly intelligent, soft-bodied marine animals known for their eight flexible arms lined with suction cups. Belonging to the class Cephalopoda, they possess incredible problem-solving skills, excellent eyesight, and the ability to change color and texture to blend into their surroundings. This camouflage helps them evade predators and sneak up on prey. Octopuses are also escape artists, often slipping through tiny openings thanks to their boneless bodies. Found in oceans around the world, they play a key role in marine ecosystems. Their fascinating behavior and alien-like appearance make them one of the most intriguing creatures of the sea."})]})]}),S.jsx("section",{className:"mb-12",children:S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Echinoderms"}),S.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[S.jsxs("div",{children:[S.jsx("img",{src:"https://images.unsplash.com/photo-1721330271062-b78de2227fa3?q=80&w=1170&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Sea urchins",className:"rounded-lg mb-4 w-full h-64 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Sea urchins"}),S.jsx("p",{className:"text-gray-700",children:"Sea urchins are small, spiny marine animals found on the ocean floor, often in rocky or coral reef environments. They have round, hard shells called tests, which are covered in movable spines used for protection and movement. Despite their slow pace, sea urchins play a vital role in marine ecosystems by grazing on algae, helping maintain the balance of coral reefs. They move using tube feet and spines, and some species have specialized jaws called Aristotles lantern to scrape food off rocks. While some sea urchins are edible and considered a delicacy in many cultures, others can be venomous and should be handled with care."})]}),S.jsxs("div",{children:[S.jsx("iframe",{className:"w-full h-64 rounded-lg mb-4",src:"https://www.youtube.com/embed/ihvKwVDw8Pc?si=QapxBZDB-vWwTwjf",title:"Sea urchins Documentary",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Life of the Sea urchins"}),S.jsx("p",{className:"text-gray-700",children:"Explore the fascinating world, Sea urchins gather in large enough numbers to form an army. sea urchins moving together in massive numbers, almost like an army. It's a surprising sight, especially since we often think of sea urchins as slow, solitary creatures."})]})]})]})})]})}function tV(){return S.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-12",children:[S.jsx("h1",{className:"text-4xl font-bold mb-8",children:"Birds of the World"}),S.jsxs("section",{className:"mb-12",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Birds of Prey"}),S.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[S.jsxs("div",{children:[S.jsx("img",{src:"https://images.unsplash.com/photo-1611689342806-0863700ce1e4",alt:"Eagle",className:"rounded-lg mb-4 w-full h-64 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Eagles"}),S.jsx("p",{className:"text-gray-700",children:"Eagles are powerful birds of prey known for their excellent eyesight, strong talons, and impressive wingspan. They are skilled hunters and represent freedom in many cultures."})]}),S.jsxs("div",{children:[S.jsx("iframe",{className:"w-full h-64 rounded-lg mb-4",src:"https://www.youtube.com/embed/2P0VCMYZenw?si=CSGly36THTf06aqR",title:"Eagle Documentary",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Eagle Behavior"}),S.jsx("p",{className:"text-gray-700",children:"Watch these majestic birds in action as they soar through the skies and demonstrate their hunting prowess."})]})]})]}),S.jsxs("section",{className:"mb-12",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Exotic Birds"}),S.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[S.jsx("img",{src:"https://images.unsplash.com/photo-1623607631063-bf81caffcaa9?q=80&w=1170&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Macaws",className:"rounded-lg mb-4 w-full h-48 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Macaws"}),S.jsx("p",{className:"text-gray-700",children:"Known for their vibrant colors and intelligence, macaws are among the most striking parrots in the world."})]}),S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[S.jsx("img",{src:"https://images.unsplash.com/photo-1572877183903-f6f33bbfa7c5?q=80&w=985&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Peacock",className:"rounded-lg mb-4 w-full h-48 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Peacocks"}),S.jsx("p",{className:"text-gray-700",children:"Male peacocks are famous for their spectacular tail displays used to attract mates."})]}),S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[S.jsx("img",{src:"https://images.unsplash.com/photo-1591198936750-16d8e15edb9e",alt:"Hummingbird",className:"rounded-lg mb-4 w-full h-48 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Hummingbirds"}),S.jsx("p",{className:"text-gray-700",children:"These tiny birds can hover in place and are the only birds that can fly backwards."})]})]})]}),S.jsxs("section",{className:"mb-12",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Forest Birds"}),S.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[S.jsx("img",{src:"https://images.unsplash.com/photo-1552727131-5fc6af16796d?q=80&w=1949&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Toucan",className:"rounded-lg mb-4 w-full h-48 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Toucan"}),S.jsx("p",{className:"text-gray-700",children:"Toucans are colorful, tropical birds best known for their large, vibrant bills that can be almost as long as their bodies."})]}),S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[S.jsx("img",{src:"https://images.unsplash.com/photo-1683090565588-2cc392f0148d?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Woodpecker",className:"rounded-lg mb-4 w-full h-48 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Woodpecker"}),S.jsx("p",{className:"text-gray-700",children:"Woodpeckers are fascinating birds known for their unique habit of pecking at tree trunks with their strong, chisel-like beaks."})]}),S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[S.jsx("img",{src:"https://images.unsplash.com/photo-1662867146017-7df454f67f08?q=80&w=2127&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Hornbill",className:"rounded-lg mb-4 w-full h-48 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Hornbill"}),S.jsx("p",{className:"text-gray-700",children:"Hornbills are striking birds known for their large, curved bills and the distinctive casque (a helmet-like structure) on top of their beaks."})]})]})]}),S.jsxs("section",{className:"mb-12",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6",children:" Wetland & Water Birds"}),S.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[S.jsx("img",{src:"https://images.unsplash.com/photo-1595344253433-6baa8e8798f9?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Flamingo",className:"rounded-lg mb-4 w-full h-48 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Flamingo"}),S.jsx("p",{className:"text-gray-700",children:"Flamingos are elegant wading birds known for their long, slender legs, graceful necks, and distinctive pink or reddish feathers."})]}),S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[S.jsx("img",{src:"https://images.unsplash.com/photo-1617344300322-516f431ff532?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Heron",className:"rounded-lg mb-4 w-full h-48 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Heron"}),S.jsx("p",{className:"text-gray-700",children:"Herons are large, long-legged wading birds commonly found near freshwater habitats like lakes, rivers, and marshes."})]}),S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[S.jsx("img",{src:"https://images.unsplash.com/photo-1521730365094-d6978fa2ac8d?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Duck",className:"rounded-lg mb-4 w-full h-48 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Duck"}),S.jsx("p",{className:"text-gray-700",children:"Ducks are versatile, water-loving birds found in a variety of environments, including ponds, lakes, rivers, and marshes."})]})]})]}),S.jsxs("section",{className:"mb-12",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Polar Birds"}),S.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[S.jsxs("div",{children:[S.jsx("img",{src:"https://images.unsplash.com/photo-1551415923-a2297c7fda79?q=80&w=1932&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Penguin",className:"rounded-lg mb-4 w-full h-64 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Penguin"}),S.jsx("p",{className:"text-gray-700",children:"Penguins are flightless birds that are uniquely adapted to life in the water. Found mostly in the Southern Hemisphere, especially in Antarctica, penguins are excellent swimmers, using their wings like flippers to propel themselves through the water at impressive speeds."})]}),S.jsxs("div",{children:[S.jsx("iframe",{className:"w-full h-64 rounded-lg mb-4",src:"https://www.youtube.com/embed/855Al0-VMEo?si=eAcRPMwJxV4VHFdb",title:"Penguin Documentary",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Penguin Behavior"}),S.jsx("p",{className:"text-gray-700",children:"Learn about the environmental threats penguins face, including climate change and habitat loss. The documentary explores how these adorable birds adapt and survive in some of the harshest conditions on Earth."})]})]})]})]})}const nV=[{name:"Blueberries",image:"https://images.unsplash.com/photo-1498557850523-fd3d118b962e",description:"Small but mighty, blueberries are packed with antioxidants.",benefits:["High in antioxidants","Improves memory","Heart healthy"]},{name:"Oranges",image:"https://images.unsplash.com/photo-1557800636-894a64c1696f",description:"Citrus fruits known for their immune-boosting properties.",benefits:["Rich in Vitamin C","Boosts immunity","Aids digestion"]},{name:"Pomegranate",image:"https://plus.unsplash.com/premium_photo-1668076515507-c5bc223c99a4?q=80&w=1074&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"Ancient fruit with modern super-food status.",benefits:["Anti-inflammatory","Heart healthy","Rich in antioxidants"]}],rV=[{name:"Strawberry",image:"https://images.unsplash.com/photo-1587393855524-087f83d95bc9?q=80&w=1060&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"Strawberries are sweet, juicy fruits that are not only delicious but also packed with health benefits",benefits:["High in antioxidants","Improves memory","Heart healthy"]},{name:"Raspberry",image:"https://plus.unsplash.com/premium_photo-1675731118509-ab902002dbac?q=80&w=1032&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"Raspberries are small, red, juicy berries known for their sweet-tart flavor. They are aggregate fruits made up of tiny drupelets and are often eaten fresh, added to desserts, or blended into smoothies. ",benefits:["Rich in fiber","High in antioxidants","Supports healthy digestion","Boosts immune system"]},{name:"Blackberry",image:"https://images.unsplash.com/photo-1669562064740-e7d35af4cdb3?q=80&w=1074&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"Blackberries are dark, juicy berries that have a sweet-tart flavor. They grow on thorny bushes and are commonly used in jams, desserts, and smoothies. Rich in vitamins and minerals, blackberries are known for their high nutritional value and versatility in the kitchen.",benefits:["Rich in vitamins C and K","High in antioxidants","Supports brain health","Promotes healthy skin"]}];function iV(){return S.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-12",children:[S.jsx("h1",{className:"text-4xl font-bold mb-8",children:"Fruits Around the World"}),S.jsxs("section",{className:"mb-12",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Tropical Fruits"}),S.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[S.jsxs("div",{children:[S.jsx("img",{src:"https://images.unsplash.com/photo-1487376480913-24046456a727?q=80&w=1170&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Tropical Fruits",className:"rounded-lg mb-4 w-full h-64 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Exotic Varieties"}),S.jsx("p",{className:"text-gray-700",children:"Tropical fruits offer unique flavors and essential nutrients. From sweet mangoes to creamy avocados, these fruits are both delicious and nutritious."})]}),S.jsxs("div",{children:[S.jsx("iframe",{className:"w-full h-64 rounded-lg mb-4",src:"https://www.youtube.com/embed/zT-dbgVoA48?si=8a86tA3ihNSRyl-x",title:"Tropical Fruits Documentary",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Growing Tropical Fruits"}),S.jsx("p",{className:"text-gray-700",children:"Learn about how tropical fruits are grown and harvested in different parts of the world."})]})]})]}),S.jsxs("section",{className:"mb-12",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Nutritional Benefits"}),S.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:nV.map(t=>S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[S.jsx("img",{src:t.image,alt:t.name,className:"rounded-lg mb-4 w-full h-48 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:t.name}),S.jsx("p",{className:"text-gray-700 mb-4",children:t.description}),S.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg",children:[S.jsx("h4",{className:"font-semibold mb-2",children:"Key Benefits"}),S.jsx("ul",{className:"list-disc list-inside",children:t.benefits.map((e,n)=>S.jsx("li",{className:"text-gray-700",children:e},n))})]})]},t.name))})]}),S.jsxs("section",{className:"mb-12",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Aggregate Fruits"}),S.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[S.jsxs("div",{children:[S.jsx("img",{src:"https://images.unsplash.com/photo-1595456040477-fabe3bb71455?q=80&w=1170&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Aggregate Fruits",className:"rounded-lg mb-4 w-full h-64 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Exotic Varieties"}),S.jsx("p",{className:"text-gray-700",children:"Aggregate fruits are formed from multiple ovaries of a single flower. Each ovary develops into a small fruit, and together they form a cluster."})]}),S.jsxs("div",{children:[S.jsx("iframe",{className:"w-full h-64 rounded-lg mb-4",src:"https://www.youtube.com/embed/33rolSsj7cA?si=89Yx2mz3GVDku33S",title:"Tropical Fruits Documentary",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Growing Aggregate fruits"}),S.jsx("p",{className:"text-gray-700",children:"Tropical fruits grow best in warm, humid, and frost-free climates with plenty of sunlight and well-drained, nutrient-rich soil. They usually need a lot of rain throughout the year. Farmers often grow them using methods like intercropping, where different crops like bananas and coffee are planted together, or agroforestry, which combines fruit trees with other trees for a more natural environment."})]})]})]}),S.jsxs("section",{className:"mb-12",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Nutritional Benefits"}),S.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:rV.map(t=>S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[S.jsx("img",{src:t.image,alt:t.name,className:"rounded-lg mb-4 w-full h-48 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:t.name}),S.jsx("p",{className:"text-gray-700 mb-4",children:t.description}),S.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg",children:[S.jsx("h4",{className:"font-semibold mb-2",children:"Key Benefits"}),S.jsx("ul",{className:"list-disc list-inside",children:t.benefits.map((e,n)=>S.jsx("li",{className:"text-gray-700",children:e},n))})]})]},t.name))})]})]})}function aV(){return S.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-12",children:[S.jsx("h1",{className:"text-4xl font-bold mb-8",children:"Vegetables: Nature's Powerhouse"}),S.jsxs("section",{className:"mb-12",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Leafy Greens"}),S.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[S.jsxs("div",{children:[S.jsx("img",{src:"https://images.unsplash.com/photo-1540420773420-3366772f4999",alt:"Leafy Greens",className:"rounded-lg mb-4 w-full h-64 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"The Power of Greens"}),S.jsx("p",{className:"text-gray-700",children:"Leafy greens are among the most nutritious foods on the planet. They're packed with vitamins, minerals, and fiber while being low in calories."})]}),S.jsxs("div",{children:[S.jsx("iframe",{className:"w-full h-64 rounded-lg mb-4",src:"https://www.youtube.com/embed/KM1FP8Avutk?si=mBGMOHDNc_E-5fof",title:"Growing Vegetables",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Growing Your Own Greens"}),S.jsx("p",{className:"text-gray-700",children:"Learn how to grow your own nutritious leafy greens at home, from seed to harvest."})]})]})]}),S.jsxs("section",{className:"mb-12",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Vegetable Guide"}),S.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:oV.map(t=>S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[S.jsx("img",{src:t.image,alt:t.name,className:"rounded-lg mb-4 w-full h-48 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:t.name}),S.jsx("p",{className:"text-gray-700 mb-4",children:t.description}),S.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg",children:[S.jsx("h4",{className:"font-semibold mb-2",children:"Nutrition Facts"}),S.jsx("ul",{className:"list-disc list-inside",children:t.nutrients.map((e,n)=>S.jsx("li",{className:"text-gray-700",children:e},n))})]})]},t.name))})]}),S.jsxs("section",{className:"mb-12",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Flower Vegetables"}),S.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[S.jsxs("div",{children:[S.jsx("img",{src:"https://assets.grok.com/users/2d929318-21db-41d0-b951-1c2297d96d3f/generated/DJbbVH0BkuDx5k6r/image.jpg",alt:"Flower Vegetables",className:"rounded-lg mb-4 w-full h-64 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"The Power of Flower Vegetables"}),S.jsx("p",{className:"text-gray-700",children:"Flower vegetables are the edible flowering parts of certain plants. These vegetables are harvested before the flowers fully bloom."})]}),S.jsxs("div",{children:[S.jsx("iframe",{className:"w-full h-64 rounded-lg mb-4",src:"https://www.youtube.com/embed/taYY0L33ajg?si=QAKDRuTIAr5fUqsP",title:"Growing Vegetables",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Growing Your Own Greens"}),S.jsx("p",{className:"text-gray-700",children:"Learn how to grow your own nutritious Flower Vegetables at home, from seed to harvest."})]})]})]}),S.jsxs("section",{className:"mb-12",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Vegetable Guide"}),S.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:sV.map(t=>S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[S.jsx("img",{src:t.image,alt:t.name,className:"rounded-lg mb-4 w-full h-48 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:t.name}),S.jsx("p",{className:"text-gray-700 mb-4",children:t.description}),S.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg",children:[S.jsx("h4",{className:"font-semibold mb-2",children:"Nutrition Facts"}),S.jsx("ul",{className:"list-disc list-inside",children:t.nutrients.map((e,n)=>S.jsx("li",{className:"text-gray-700",children:e},n))})]})]},t.name))})]}),S.jsxs("section",{className:"bg-white rounded-lg shadow-md p-6",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Seasonal Growing Guide"}),S.jsx("div",{className:"grid md:grid-cols-4 gap-4",children:uV.map(t=>S.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg",children:[S.jsx("h3",{className:"text-xl font-semibold mb-2",children:t.name}),S.jsx("ul",{className:"list-disc list-inside",children:t.vegetables.map((e,n)=>S.jsx("li",{className:"text-gray-700",children:e},n))})]},t.name))})]})]})}const oV=[{name:"Spinach",image:"https://images.unsplash.com/photo-1576045057995-568f588f82fb?q=80&w=1160&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"Spinach is a leafy green vegetable thats widely used in salads, soups, and smoothies. It has a mild, slightly earthy flavor and is packed with essential vitamins and minerals. ",nutrients:["High in iron","Boosts immunity","Supports eye health","Rich in fiber"]},{name:"Swiss Chard",image:"https://images.unsplash.com/photo-1679595044391-3c42b0f351b5?q=80&w=1173&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"Swiss Chard is a leafy green vegetable with large, colorful stems and dark green leaves. ",nutrients:["High in iron","Boosts immunity","Supports bone health","Rich in fiber"]},{name:"Arugula",image:"https://plus.unsplash.com/premium_photo-1673469223112-235e51d1dfb0?q=80&w=1035&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"Arugula is a leafy green with a peppery, mustard-like flavor. Its commonly used in salads, sandwiches, and as a garnish.",nutrients:["High in vitamin K","Rich in antioxidants","Supports bone health","Good source of folate"]}],sV=[{name:"Broccoli",image:"https://images.unsplash.com/photo-1459411621453-7b03977f4bfc",description:"A nutrient-dense cruciferous vegetable with cancer-fighting properties.",nutrients:["Vitamin C","Vitamin K","Fiber","Antioxidants"]},{name:"Cauliflower",image:"https://images.unsplash.com/photo-1692956706779-576c151ec712?q=80&w=1074&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"It can be roasted, steamed, mashed, or even used as a low-carb substitute for rice or pizza crust.",nutrients:["Vitamin C","Vitamin K","Fiber","B vitamins"]},{name:"Zucchini",image:"https://images.unsplash.com/photo-1580294672675-91afc00ee7b3?q=80&w=1170&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"Zucchini is a summer squash with smooth green skin and a mild, slightly sweet flavor. It technically a fruit but is commonly treated as a vegetable in cooking. ",nutrients:["Vitamin A","Potassium","Fiber","Vitamin C"]}],uV=[{name:"Spring",vegetables:["Peas","Lettuce","Radishes","Spinach"]},{name:"Summer",vegetables:["Tomatoes","Cucumbers","Peppers","Eggplant"]},{name:"Fall",vegetables:["Pumpkins","Carrots","Brussels Sprouts","Kale"]},{name:"Winter",vegetables:["Cabbage","Turnips","Winter Squash","Leeks"]}],lV=[{name:"Rose",image:"https://images.unsplash.com/photo-1559563362-c667ba5f5480?q=80&w=1001&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"Classic symbol of love and beauty, widely used in celebrations.",symbolism:["Love","Romance","Passion"]},{name:"Lotus",image:"https://plus.unsplash.com/premium_photo-1664303754150-7a776a1f28bd?q=80&w=987&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"Sacred flower often associated with purity and rebirth in Eastern cultures.",symbolism:["Purity","Spiritual awakening","Rebirth"]},{name:"Sunflower",image:"https://images.unsplash.com/photo-1552160793-cbaf3ebcba72?q=80&w=1170&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"Bright and cheerful, sunflowers represent positivity and admiration.",symbolism:["Happiness","Loyalty","Warmth"]},{name:"Lily",image:"https://images.unsplash.com/photo-1561897519-6e4fbd1fbc41?q=80&w=987&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"Lilies are elegant flowers often associated with purity and renewal.",symbolism:["Purity","Rebirth","Grace"]},{name:"Tulip",image:"https://images.unsplash.com/photo-1524386416438-98b9b2d4b433?q=80&w=1170&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"Tulips are spring blooms that come in many colors, each symbolizing different emotions.",symbolism:["Perfect love","Hope","Charity"]},{name:"Marigold",image:"https://images.unsplash.com/photo-1695301737779-abb0802bf47c?q=80&w=1035&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"Marigolds are bright orange and yellow flowers often used in celebrations and rituals.",symbolism:["Creativity","Passion","Remembrance"]},{name:"Lavender",image:"https://images.unsplash.com/photo-1498998754966-9f72acbc85b2?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"Lavender is known for its calming scent and soft purple blooms.",symbolism:["Calm","Devotion","Serenity"]},{name:"Hydrangea",image:"https://images.unsplash.com/photo-1621518856558-9b2ce2d0660d?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"Hydrangeas are full, bushy flowers with layered petals, symbolizing gratitude and understanding.",symbolism:["Gratitude","Grace","Apology"]},{name:"Cherry Blossom",image:"https://images.unsplash.com/photo-1538943186303-104afadcbb16?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"Cherry blossoms bloom briefly in spring, representing the beauty and fragility of life.",symbolism:["Renewal","Beauty","Impermanence"]}],cV=()=>S.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-12",children:[S.jsx("h1",{className:"text-4xl font-bold mb-8",children:"Flowers Around the World"}),S.jsxs("section",{className:"mb-12",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Popular Flower Types"}),S.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[S.jsxs("div",{children:[S.jsx("img",{src:"https://images.unsplash.com/photo-1490750967868-88aa4486c946?q=80&w=1170&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Flowers",className:"rounded-lg mb-4 w-full h-64 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Global Blooms"}),S.jsx("p",{className:"text-gray-700",children:"From the romantic rose to the cheerful sunflower, flowers have been a symbol of emotion and beauty across cultures."})]}),S.jsxs("div",{children:[S.jsx("iframe",{className:"w-full h-64 rounded-lg mb-4",src:"https://www.youtube.com/embed/i810CxN5Q6Q?si=AVhMFNADW_35Ruy",title:"Flowers Documentary",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"How Flowers Grow"}),S.jsx("p",{className:"text-gray-700",children:"Discover the fascinating growth cycle of different types of flowers and how they thrive in diverse environments."})]})]})]}),S.jsxs("section",{className:"mb-12",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Symbolism & Benefits"}),S.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:lV.map(t=>S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[S.jsx("img",{src:t.image,alt:t.name,className:"rounded-lg mb-4 w-full h-48 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:t.name}),S.jsx("p",{className:"text-gray-700 mb-4",children:t.description}),S.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg",children:[S.jsx("h4",{className:"font-semibold mb-2",children:"Key Symbolism"}),S.jsx("ul",{className:"list-disc list-inside",children:t.symbolism.map((e,n)=>S.jsx("li",{className:"text-gray-700",children:e},n))})]})]},t.name))})]})]}),fV=[{name:"Electric Car",image:"https://images.unsplash.com/photo-1615829386703-e2bb66a7cb7d?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"Electric cars are eco-friendly, quiet, and efficient for modern-day commuting.",features:["Zero emissions","Low maintenance","Cost-efficient"]},{name:"Motorcycle",image:"https://images.unsplash.com/photo-1558980664-2cd663cf8dde?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"Motorcycles are ideal for quick city rides and provide a thrilling experience.",features:["Fuel efficient","Compact design","Easy parking"]},{name:"SUV",image:"https://images.unsplash.com/photo-1622893288761-823ba60f17a6?q=80&w=2128&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"SUVs offer space, power, and safety for family road trips and adventures.",features:["Spacious interior","All-terrain capability","Strong build"]},{name:"Pickup Truck",image:"https://images.unsplash.com/photo-1605504835488-e8c6d37beb43?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"Pickup trucks are robust, versatile, and perfect for hauling cargo or off-road driving.",features:["High payload capacity","Rugged design","Towing power"]},{name:"Bicycle",image:"https://images.unsplash.com/photo-1532298229144-0ec0c57515c7?q=80&w=2022&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"Bicycles are eco-friendly, great for fitness, and perfect for short commutes.",features:["No fuel required","Health benefits","Lightweight and portable"]},{name:"Bus",image:"https://images.unsplash.com/photo-1564694202883-46e7448c1b26?q=80&w=1964&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"Buses are used for public transport, offering affordable and efficient mass transit.",features:["Large passenger capacity","Cost-effective travel","Scheduled routes"]},{name:"Helicopter",image:"https://images.unsplash.com/photo-1563561686990-f0ef5b3e0b7c?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"Helicopters offer vertical take-off and landing, ideal for quick aerial transport and rescue missions.",features:["Vertical mobility","Ideal for remote access","Versatile usage"]},{name:"Sailboat",image:"https://images.unsplash.com/photo-1501771924607-209f42a6e7e4?q=80&w=2071&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"Sailboats harness the power of wind for eco-friendly and leisurely travel on water.",features:["Wind-powered","Great for leisure","Low environmental impact"]},{name:"Airplane",image:"https://images.unsplash.com/photo-1483375801503-374c5f660610?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"Airplanes are fast, long-distance vehicles used for transporting people and goods across the globe.",features:["High-speed travel","Long-distance capability","Global connectivity"]}],dV=()=>S.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-12",children:[S.jsx("h1",{className:"text-4xl font-bold mb-8",children:"Vehicles Around the World"}),S.jsxs("section",{className:"mb-12",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Modern Transportation"}),S.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[S.jsxs("div",{children:[S.jsx("img",{src:"https://images.unsplash.com/photo-1508798179027-a00aa5326443?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Vehicles",className:"rounded-lg mb-4 w-full h-64 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Diverse Vehicle Types"}),S.jsx("p",{className:"text-gray-700",children:"Vehicles have revolutionized the way we travel. From two-wheelers to electric cars, the world of transportation is vast and evolving."})]}),S.jsxs("div",{children:[S.jsx("iframe",{className:"w-full h-64 rounded-lg mb-4",src:"https://www.youtube.com/embed/IFVJKx8J9hs?si=8WcAC2xr94bWNPt0",title:"Vehicles Documentary",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Evolution of Vehicles"}),S.jsx("p",{className:"text-gray-700",children:"Watch how vehicles have evolved over time, from steam engines to self-driving electric vehicles."})]})]})]}),S.jsxs("section",{className:"mb-12",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Vehicle Features"}),S.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:fV.map(t=>S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[S.jsx("img",{src:t.image,alt:t.name,className:"rounded-lg mb-4 w-full h-48 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:t.name}),S.jsx("p",{className:"text-gray-700 mb-4",children:t.description}),S.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg",children:[S.jsx("h4",{className:"font-semibold mb-2",children:"Key Features"}),S.jsx("ul",{className:"list-disc list-inside",children:t.features.map((e,n)=>S.jsx("li",{className:"text-gray-700",children:e},n))})]})]},t.name))})]})]});function jn(){return jn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jn.apply(null,arguments)}var mP={relTol:1e-12,absTol:1e-15,matrix:"Matrix",number:"number",numberFallback:"number",precision:64,predictable:!1,randomSeed:null};function Wr(t,e){if(Fv(t,e))return t[e];throw typeof t[e]=="function"&&z2(t,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function Yc(t,e,n){if(Fv(t,e))return t[e]=n,n;throw new Error('No access to property "'+e+'"')}function Fv(t,e){return!pV(t)&&!Array.isArray(t)?!1:Ue(mV,e)?!0:!(e in Object.prototype||e in Function.prototype)}function hV(t,e){if(!z2(t,e))throw new Error('No access to method "'+e+'"');return t[e]}function z2(t,e){return t==null||typeof t[e]!="function"||Ue(t,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(t)?!1:Ue(vV,e)?!0:!(e in Object.prototype||e in Function.prototype)}function pV(t){return typeof t=="object"&&t&&t.constructor===Object}var mV={length:!0,name:!0},vV={toString:!0,valueOf:!0,toLocaleString:!0};class N0{constructor(e){this.wrappedObject=e,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).filter(e=>this.has(e)).values()}get(e){return Wr(this.wrappedObject,e)}set(e,n){return Yc(this.wrappedObject,e,n),this}has(e){return Fv(this.wrappedObject,e)&&e in this.wrappedObject}entries(){return gP(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var n of this.keys())e(this.get(n),n,this)}delete(e){Fv(this.wrappedObject,e)&&delete this.wrappedObject[e]}clear(){for(var e of this.keys())this.delete(e)}get size(){return Object.keys(this.wrappedObject).length}}class vP{constructor(e,n,r){this.a=e,this.b=n,this.bKeys=r,this[Symbol.iterator]=this.entries}get(e){return this.bKeys.has(e)?this.b.get(e):this.a.get(e)}set(e,n){return this.bKeys.has(e)?this.b.set(e,n):this.a.set(e,n),this}has(e){return this.b.has(e)||this.a.has(e)}keys(){return new Set([...this.a.keys(),...this.b.keys()])[Symbol.iterator]()}entries(){return gP(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var n of this.keys())e(this.get(n),n,this)}delete(e){return this.bKeys.has(e)?this.b.delete(e):this.a.delete(e)}clear(){this.a.clear(),this.b.clear()}get size(){return[...this.keys()].length}}function gP(t,e){return{next:()=>{var n=t.next();return n.done?n:{value:e(n.value),done:!1}}}}function mh(){return new Map}function Cc(t){if(!t)return mh();if(xP(t))return t;if(D0(t))return new N0(t);throw new Error("createMap can create maps from objects or Maps")}function gV(t){if(t instanceof N0)return t.wrappedObject;var e={};for(var n of t.keys()){var r=t.get(n);Yc(e,n,r)}return e}function dt(t){return typeof t=="number"}function ht(t){return!t||typeof t!="object"||typeof t.constructor!="function"?!1:t.isBigNumber===!0&&typeof t.constructor.prototype=="object"&&t.constructor.prototype.isBigNumber===!0||typeof t.constructor.isDecimal=="function"&&t.constructor.isDecimal(t)===!0}function Fd(t){return typeof t=="bigint"}function Mo(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isComplex===!0||!1}function Yh(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isFraction===!0||!1}function Hi(t){return t&&t.constructor.prototype.isUnit===!0||!1}function Dr(t){return typeof t=="string"}var qt=Array.isArray;function Je(t){return t&&t.constructor.prototype.isMatrix===!0||!1}function na(t){return Array.isArray(t)||Je(t)}function Pv(t){return t&&t.isDenseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function ju(t){return t&&t.isSparseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function U2(t){return t&&t.constructor.prototype.isRange===!0||!1}function S0(t){return t&&t.constructor.prototype.isIndex===!0||!1}function yV(t){return typeof t=="boolean"}function xV(t){return t&&t.constructor.prototype.isResultSet===!0||!1}function yP(t){return t&&t.constructor.prototype.isHelp===!0||!1}function bV(t){return typeof t=="function"}function wV(t){return t instanceof Date}function _V(t){return t instanceof RegExp}function D0(t){return!!(t&&typeof t=="object"&&t.constructor===Object&&!Mo(t)&&!Yh(t))}function xP(t){return t?t instanceof Map||t instanceof N0||typeof t.set=="function"&&typeof t.get=="function"&&typeof t.keys=="function"&&typeof t.has=="function":!1}function EV(t){return t===null}function CV(t){return t===void 0}function rl(t){return t&&t.isAccessorNode===!0&&t.constructor.prototype.isNode===!0||!1}function Wi(t){return t&&t.isArrayNode===!0&&t.constructor.prototype.isNode===!0||!1}function NV(t){return t&&t.isAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function SV(t){return t&&t.isBlockNode===!0&&t.constructor.prototype.isNode===!0||!1}function DV(t){return t&&t.isConditionalNode===!0&&t.constructor.prototype.isNode===!0||!1}function At(t){return t&&t.isConstantNode===!0&&t.constructor.prototype.isNode===!0||!1}function db(t){return At(t)||Tn(t)&&t.args.length===1&&At(t.args[0])&&"-+~".includes(t.op)}function Xh(t){return t&&t.isFunctionAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function qs(t){return t&&t.isFunctionNode===!0&&t.constructor.prototype.isNode===!0||!1}function _f(t){return t&&t.isIndexNode===!0&&t.constructor.prototype.isNode===!0||!1}function Ut(t){return t&&t.isNode===!0&&t.constructor.prototype.isNode===!0||!1}function A0(t){return t&&t.isObjectNode===!0&&t.constructor.prototype.isNode===!0||!1}function Tn(t){return t&&t.isOperatorNode===!0&&t.constructor.prototype.isNode===!0||!1}function $o(t){return t&&t.isParenthesisNode===!0&&t.constructor.prototype.isNode===!0||!1}function AV(t){return t&&t.isRangeNode===!0&&t.constructor.prototype.isNode===!0||!1}function TV(t){return t&&t.isRelationalNode===!0&&t.constructor.prototype.isNode===!0||!1}function rr(t){return t&&t.isSymbolNode===!0&&t.constructor.prototype.isNode===!0||!1}function bP(t){return t&&t.constructor.prototype.isChain===!0||!1}function Qt(t){var e=typeof t;return e==="object"?t===null?"null":ht(t)?"BigNumber":t.constructor&&t.constructor.name?t.constructor.name:"Object":e}function ut(t){var e=typeof t;if(e==="number"||e==="bigint"||e==="string"||e==="boolean"||t===null||t===void 0)return t;if(typeof t.clone=="function")return t.clone();if(Array.isArray(t))return t.map(function(n){return ut(n)});if(t instanceof Date)return new Date(t.valueOf());if(ht(t))return t;if(D0(t))return MV(t,ut);if(e==="function")return t;throw new TypeError("Cannot clone: unknown type of value (value: ".concat(t,")"))}function MV(t,e){var n={};for(var r in t)Ue(t,r)&&(n[r]=e(t[r]));return n}function wP(t,e){for(var n in e)Ue(e,n)&&(t[n]=e[n]);return t}function zo(t,e){var n,r,i;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(r=0,i=t.length;r<i;r++)if(!zo(t[r],e[r]))return!1;return!0}else{if(typeof t=="function")return t===e;if(t instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(n in t)if(!(n in e)||!zo(t[n],e[n]))return!1;for(n in e)if(!(n in t))return!1;return!0}else return t===e}}function IV(t,e,n){var r=!0,i;Object.defineProperty(t,e,{get:function(){return r&&(i=n(),r=!1),i},set:function(o){i=o,r=!1},configurable:!0,enumerable:!0})}function Ue(t,e){return t&&Object.hasOwnProperty.call(t,e)}function RV(t,e){for(var n={},r=0;r<e.length;r++){var i=e[r],a=t[i];a!==void 0&&(n[i]=a)}return n}var kV=["Matrix","Array"],FV=["number","BigNumber","Fraction"],Ee=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(mP)};jn(Ee,mP,{MATRIX_OPTIONS:kV,NUMBER_OPTIONS:FV});function RS(){return!0}function Li(){return!1}function Bl(){}const kS="Argument is not a typed-function.";function _P(){function t(q){return typeof q=="object"&&q!==null&&q.constructor===Object}const e=[{name:"number",test:function(q){return typeof q=="number"}},{name:"string",test:function(q){return typeof q=="string"}},{name:"boolean",test:function(q){return typeof q=="boolean"}},{name:"Function",test:function(q){return typeof q=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(q){return q instanceof Date}},{name:"RegExp",test:function(q){return q instanceof RegExp}},{name:"Object",test:t},{name:"null",test:function(q){return q===null}},{name:"undefined",test:function(q){return q===void 0}}],n={name:"any",test:RS,isAny:!0};let r,i,a=0,o={createCount:0};function s(q){const ee=r.get(q);if(ee)return ee;let le='Unknown type "'+q+'"';const pe=q.toLowerCase();let be;for(be of i)if(be.toLowerCase()===pe){le+='. Did you mean "'+be+'" ?';break}throw new TypeError(le)}function u(q){let ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const le=ee?s(ee).index:i.length,pe=[];for(let xe=0;xe<q.length;++xe){if(!q[xe]||typeof q[xe].name!="string"||typeof q[xe].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const Fe=q[xe].name;if(r.has(Fe))throw new TypeError('Duplicate type name "'+Fe+'"');pe.push(Fe),r.set(Fe,{name:Fe,test:q[xe].test,isAny:q[xe].isAny,index:le+xe,conversionsTo:[]})}const be=i.slice(le);i=i.slice(0,le).concat(pe).concat(be);for(let xe=le+pe.length;xe<i.length;++xe)r.get(i[xe]).index=xe}function l(){r=new Map,i=[],a=0,u([n],!1)}l(),u(e);function c(){let q;for(q of i)r.get(q).conversionsTo=[];a=0}function f(q){const ee=i.filter(le=>{const pe=r.get(le);return!pe.isAny&&pe.test(q)});return ee.length?ee:["any"]}function d(q){return q&&typeof q=="function"&&"_typedFunctionData"in q}function h(q,ee,le){if(!d(q))throw new TypeError(kS);const pe=le&&le.exact,be=Array.isArray(ee)?ee.join(","):ee,xe=b(be),Fe=g(xe);if(!pe||Fe in q.signatures){const Et=q._typedFunctionData.signatureMap.get(Fe);if(Et)return Et}const Te=xe.length;let Oe;if(pe){Oe=[];let Et;for(Et in q.signatures)Oe.push(q._typedFunctionData.signatureMap.get(Et))}else Oe=q._typedFunctionData.signatures;for(let Et=0;Et<Te;++Et){const Xe=xe[Et],Lt=[];let P;for(P of Oe){const J=C(P.params,Et);if(!(!J||Xe.restParam&&!J.restParam)){if(!J.hasAny){const me=y(J);if(Xe.types.some(Se=>!me.has(Se.name)))continue}Lt.push(P)}}if(Oe=Lt,Oe.length===0)break}let Me;for(Me of Oe)if(Me.params.length<=Te)return Me;throw new TypeError("Signature not found (signature: "+(q.name||"unnamed")+"("+g(xe,", ")+"))")}function p(q,ee,le){return h(q,ee,le).implementation}function m(q,ee){const le=s(ee);if(le.test(q))return q;const pe=le.conversionsTo;if(pe.length===0)throw new Error("There are no conversions to "+ee+" defined.");for(let be=0;be<pe.length;be++)if(s(pe[be].from).test(q))return pe[be].convert(q);throw new Error("Cannot convert "+q+" to "+ee)}function g(q){let ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return q.map(le=>le.name).join(ee)}function v(q){const ee=q.indexOf("...")===0,pe=(ee?q.length>3?q.slice(3):"any":q).split("|").map(Te=>s(Te.trim()));let be=!1,xe=ee?"...":"";return{types:pe.map(function(Te){return be=Te.isAny||be,xe+=Te.name+"|",{name:Te.name,typeIndex:Te.index,test:Te.test,isAny:Te.isAny,conversion:null,conversionIndex:-1}}),name:xe.slice(0,-1),hasAny:be,hasConversion:!1,restParam:ee}}function x(q){const ee=q.types.map(Fe=>Fe.name),le=M(ee);let pe=q.hasAny,be=q.name;const xe=le.map(function(Fe){const Te=s(Fe.from);return pe=Te.isAny||pe,be+="|"+Fe.from,{name:Fe.from,typeIndex:Te.index,test:Te.test,isAny:Te.isAny,conversion:Fe,conversionIndex:Fe.index}});return{types:q.types.concat(xe),name:be,hasAny:pe,hasConversion:xe.length>0,restParam:q.restParam}}function y(q){return q.typeSet||(q.typeSet=new Set,q.types.forEach(ee=>q.typeSet.add(ee.name))),q.typeSet}function b(q){const ee=[];if(typeof q!="string")throw new TypeError("Signatures must be strings");const le=q.trim();if(le==="")return ee;const pe=le.split(",");for(let be=0;be<pe.length;++be){const xe=v(pe[be].trim());if(xe.restParam&&be!==pe.length-1)throw new SyntaxError('Unexpected rest parameter "'+pe[be]+'": only allowed for the last parameter');if(xe.types.length===0)return null;ee.push(xe)}return ee}function w(q){const ee=U(q);return ee?ee.restParam:!1}function _(q){if(!q||q.types.length===0)return RS;if(q.types.length===1)return s(q.types[0].name).test;if(q.types.length===2){const ee=s(q.types[0].name).test,le=s(q.types[1].name).test;return function(be){return ee(be)||le(be)}}else{const ee=q.types.map(function(le){return s(le.name).test});return function(pe){for(let be=0;be<ee.length;be++)if(ee[be](pe))return!0;return!1}}}function E(q){let ee,le,pe;if(w(q)){ee=H(q).map(_);const be=ee.length,xe=_(U(q)),Fe=function(Te){for(let Oe=be;Oe<Te.length;Oe++)if(!xe(Te[Oe]))return!1;return!0};return function(Oe){for(let Me=0;Me<ee.length;Me++)if(!ee[Me](Oe[Me]))return!1;return Fe(Oe)&&Oe.length>=be+1}}else return q.length===0?function(xe){return xe.length===0}:q.length===1?(le=_(q[0]),function(xe){return le(xe[0])&&xe.length===1}):q.length===2?(le=_(q[0]),pe=_(q[1]),function(xe){return le(xe[0])&&pe(xe[1])&&xe.length===2}):(ee=q.map(_),function(xe){for(let Fe=0;Fe<ee.length;Fe++)if(!ee[Fe](xe[Fe]))return!1;return xe.length===ee.length})}function C(q,ee){return ee<q.length?q[ee]:w(q)?U(q):null}function N(q,ee){const le=C(q,ee);return le?y(le):new Set}function D(q){return q.conversion===null||q.conversion===void 0}function A(q,ee){const le=new Set;return q.forEach(pe=>{const be=N(pe.params,ee);let xe;for(xe of be)le.add(xe)}),le.has("any")?["any"]:Array.from(le)}function T(q,ee,le){let pe,be;const xe=q||"unnamed";let Fe=le,Te;for(Te=0;Te<ee.length;Te++){const Xe=[];if(Fe.forEach(Lt=>{const P=C(Lt.params,Te),J=_(P);(Te<Lt.params.length||w(Lt.params))&&J(ee[Te])&&Xe.push(Lt)}),Xe.length===0){if(be=A(Fe,Te),be.length>0){const Lt=f(ee[Te]);return pe=new TypeError("Unexpected type of argument in function "+xe+" (expected: "+be.join(" or ")+", actual: "+Lt.join(" | ")+", index: "+Te+")"),pe.data={category:"wrongType",fn:xe,index:Te,actual:Lt,expected:be},pe}}else Fe=Xe}const Oe=Fe.map(function(Xe){return w(Xe.params)?1/0:Xe.params.length});if(ee.length<Math.min.apply(null,Oe))return be=A(Fe,Te),pe=new TypeError("Too few arguments in function "+xe+" (expected: "+be.join(" or ")+", index: "+ee.length+")"),pe.data={category:"tooFewArgs",fn:xe,index:ee.length,expected:be},pe;const Me=Math.max.apply(null,Oe);if(ee.length>Me)return pe=new TypeError("Too many arguments in function "+xe+" (expected: "+Me+", actual: "+ee.length+")"),pe.data={category:"tooManyArgs",fn:xe,index:ee.length,expectedLength:Me},pe;const Et=[];for(let Xe=0;Xe<ee.length;++Xe)Et.push(f(ee[Xe]).join("|"));return pe=new TypeError('Arguments of type "'+Et.join(", ")+'" do not match any of the defined signatures of function '+xe+"."),pe.data={category:"mismatch",actual:Et},pe}function k(q){let ee=i.length+1;for(let le=0;le<q.types.length;le++)D(q.types[le])&&(ee=Math.min(ee,q.types[le].typeIndex));return ee}function F(q){let ee=a+1;for(let le=0;le<q.types.length;le++)D(q.types[le])||(ee=Math.min(ee,q.types[le].conversionIndex));return ee}function O(q,ee){if(q.hasAny){if(!ee.hasAny)return 1}else if(ee.hasAny)return-1;if(q.restParam){if(!ee.restParam)return 1}else if(ee.restParam)return-1;if(q.hasConversion){if(!ee.hasConversion)return 1}else if(ee.hasConversion)return-1;const le=k(q)-k(ee);if(le<0)return-1;if(le>0)return 1;const pe=F(q)-F(ee);return pe<0?-1:pe>0?1:0}function I(q,ee){const le=q.params,pe=ee.params,be=U(le),xe=U(pe),Fe=w(le),Te=w(pe);if(Fe&&be.hasAny){if(!Te||!xe.hasAny)return 1}else if(Te&&xe.hasAny)return-1;let Oe=0,Me=0,Et;for(Et of le)Et.hasAny&&++Oe,Et.hasConversion&&++Me;let Xe=0,Lt=0;for(Et of pe)Et.hasAny&&++Xe,Et.hasConversion&&++Lt;if(Oe!==Xe)return Oe-Xe;if(Fe&&be.hasConversion){if(!Te||!xe.hasConversion)return 1}else if(Te&&xe.hasConversion)return-1;if(Me!==Lt)return Me-Lt;if(Fe){if(!Te)return 1}else if(Te)return-1;const P=(le.length-pe.length)*(Fe?-1:1);if(P!==0)return P;const J=[];let me=0;for(let et=0;et<le.length;++et){const ft=O(le[et],pe[et]);J.push(ft),me+=ft}if(me!==0)return me;let Se;for(Se of J)if(Se!==0)return Se;return 0}function M(q){if(q.length===0)return[];const ee=q.map(s);q.length>1&&ee.sort((be,xe)=>be.index-xe.index);let le=ee[0].conversionsTo;if(q.length===1)return le;le=le.concat([]);const pe=new Set(q);for(let be=1;be<ee.length;++be){let xe;for(xe of ee[be].conversionsTo)pe.has(xe.from)||(le.push(xe),pe.add(xe.from))}return le}function B(q,ee){let le=ee;if(q.some(be=>be.hasConversion)){const be=w(q),xe=q.map(R);le=function(){const Te=[],Oe=be?arguments.length-1:arguments.length;for(let Me=0;Me<Oe;Me++)Te[Me]=xe[Me](arguments[Me]);return be&&(Te[Oe]=arguments[Oe].map(xe[Oe])),ee.apply(this,Te)}}let pe=le;if(w(q)){const be=q.length-1;pe=function(){return le.apply(this,Q(arguments,0,be).concat([Q(arguments,be)]))}}return pe}function R(q){let ee,le,pe,be;const xe=[],Fe=[];switch(q.types.forEach(function(Te){Te.conversion&&(xe.push(s(Te.conversion.from).test),Fe.push(Te.conversion.convert))}),Fe.length){case 0:return function(Oe){return Oe};case 1:return ee=xe[0],pe=Fe[0],function(Oe){return ee(Oe)?pe(Oe):Oe};case 2:return ee=xe[0],le=xe[1],pe=Fe[0],be=Fe[1],function(Oe){return ee(Oe)?pe(Oe):le(Oe)?be(Oe):Oe};default:return function(Oe){for(let Me=0;Me<Fe.length;Me++)if(xe[Me](Oe))return Fe[Me](Oe);return Oe}}}function j(q){function ee(le,pe,be){if(pe<le.length){const xe=le[pe];let Fe=[];if(xe.restParam){const Te=xe.types.filter(D);Te.length<xe.types.length&&Fe.push({types:Te,name:"..."+Te.map(Oe=>Oe.name).join("|"),hasAny:Te.some(Oe=>Oe.isAny),hasConversion:!1,restParam:!0}),Fe.push(xe)}else Fe=xe.types.map(function(Te){return{types:[Te],name:Te.name,hasAny:Te.isAny,hasConversion:Te.conversion,restParam:!1}});return ie(Fe,function(Te){return ee(le,pe+1,be.concat([Te]))})}else return[be]}return ee(q,0,[])}function K(q,ee){const le=Math.max(q.length,ee.length);for(let Te=0;Te<le;Te++){const Oe=N(q,Te),Me=N(ee,Te);let Et=!1,Xe;for(Xe of Me)if(Oe.has(Xe)){Et=!0;break}if(!Et)return!1}const pe=q.length,be=ee.length,xe=w(q),Fe=w(ee);return xe?Fe?pe===be:be>=pe:Fe?pe>=be:pe===be}function V(q){return q.map(ee=>ue(ee)?$(ee.referToSelf.callback):G(ee)?he(ee.referTo.references,ee.referTo.callback):ee)}function L(q,ee,le){const pe=[];let be;for(be of q){let xe=le[be];if(typeof xe!="number")throw new TypeError('No definition for referenced signature "'+be+'"');if(xe=ee[xe],typeof xe!="function")return!1;pe.push(xe)}return pe}function ne(q,ee,le){const pe=V(q),be=new Array(pe.length).fill(!1);let xe=!0;for(;xe;){xe=!1;let Fe=!0;for(let Te=0;Te<pe.length;++Te){if(be[Te])continue;const Oe=pe[Te];if(ue(Oe))pe[Te]=Oe.referToSelf.callback(le),pe[Te].referToSelf=Oe.referToSelf,be[Te]=!0,Fe=!1;else if(G(Oe)){const Me=L(Oe.referTo.references,pe,ee);Me?(pe[Te]=Oe.referTo.callback.apply(this,Me),pe[Te].referTo=Oe.referTo,be[Te]=!0,Fe=!1):xe=!0}}if(Fe&&xe)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return pe}function fe(q){const ee=/\bthis(\(|\.signatures\b)/;Object.keys(q).forEach(le=>{const pe=q[le];if(ee.test(pe.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function te(q,ee){if(o.createCount++,Object.keys(ee).length===0)throw new SyntaxError("No signatures provided");o.warnAgainstDeprecatedThis&&fe(ee);const le=[],pe=[],be={},xe=[];let Fe;for(Fe in ee){if(!Object.prototype.hasOwnProperty.call(ee,Fe))continue;const Vt=b(Fe);if(!Vt)continue;le.forEach(function(Gf){if(K(Gf,Vt))throw new TypeError('Conflicting signatures "'+g(Gf)+'" and "'+g(Vt)+'".')}),le.push(Vt);const ei=pe.length;pe.push(ee[Fe]);const Xj=Vt.map(x);let Ip;for(Ip of j(Xj)){const Gf=g(Ip);xe.push({params:Ip,name:Gf,fn:ei}),Ip.every(Qj=>!Qj.hasConversion)&&(be[Gf]=ei)}}xe.sort(I);const Te=ne(pe,be,Hf);let Oe;for(Oe in be)Object.prototype.hasOwnProperty.call(be,Oe)&&(be[Oe]=Te[be[Oe]]);const Me=[],Et=new Map;for(Oe of xe)Et.has(Oe.name)||(Oe.fn=Te[Oe.fn],Me.push(Oe),Et.set(Oe.name,Oe));const Xe=Me[0]&&Me[0].params.length<=2&&!w(Me[0].params),Lt=Me[1]&&Me[1].params.length<=2&&!w(Me[1].params),P=Me[2]&&Me[2].params.length<=2&&!w(Me[2].params),J=Me[3]&&Me[3].params.length<=2&&!w(Me[3].params),me=Me[4]&&Me[4].params.length<=2&&!w(Me[4].params),Se=Me[5]&&Me[5].params.length<=2&&!w(Me[5].params),et=Xe&&Lt&&P&&J&&me&&Se;for(let Vt=0;Vt<Me.length;++Vt)Me[Vt].test=E(Me[Vt].params);const ft=Xe?_(Me[0].params[0]):Li,$r=Lt?_(Me[1].params[0]):Li,Ay=P?_(Me[2].params[0]):Li,Cj=J?_(Me[3].params[0]):Li,Nj=me?_(Me[4].params[0]):Li,Sj=Se?_(Me[5].params[0]):Li,Dj=Xe?_(Me[0].params[1]):Li,Aj=Lt?_(Me[1].params[1]):Li,Tj=P?_(Me[2].params[1]):Li,Mj=J?_(Me[3].params[1]):Li,Ij=me?_(Me[4].params[1]):Li,Rj=Se?_(Me[5].params[1]):Li;for(let Vt=0;Vt<Me.length;++Vt)Me[Vt].implementation=B(Me[Vt].params,Me[Vt].fn);const kj=Xe?Me[0].implementation:Bl,Fj=Lt?Me[1].implementation:Bl,Pj=P?Me[2].implementation:Bl,Oj=J?Me[3].implementation:Bl,Bj=me?Me[4].implementation:Bl,Lj=Se?Me[5].implementation:Bl,jj=Xe?Me[0].params.length:-1,$j=Lt?Me[1].params.length:-1,zj=P?Me[2].params.length:-1,Uj=J?Me[3].params.length:-1,Wj=me?Me[4].params.length:-1,Vj=Se?Me[5].params.length:-1,qj=et?6:0,Hj=Me.length,Gj=Me.map(Vt=>Vt.test),Kj=Me.map(Vt=>Vt.implementation),Yj=function(){for(let ei=qj;ei<Hj;ei++)if(Gj[ei](arguments))return Kj[ei].apply(this,arguments);return o.onMismatch(q,arguments,Me)};function Hf(Vt,ei){return arguments.length===jj&&ft(Vt)&&Dj(ei)?kj.apply(this,arguments):arguments.length===$j&&$r(Vt)&&Aj(ei)?Fj.apply(this,arguments):arguments.length===zj&&Ay(Vt)&&Tj(ei)?Pj.apply(this,arguments):arguments.length===Uj&&Cj(Vt)&&Mj(ei)?Oj.apply(this,arguments):arguments.length===Wj&&Nj(Vt)&&Ij(ei)?Bj.apply(this,arguments):arguments.length===Vj&&Sj(Vt)&&Rj(ei)?Lj.apply(this,arguments):Yj.apply(this,arguments)}try{Object.defineProperty(Hf,"name",{value:q})}catch{}return Hf.signatures=be,Hf._typedFunctionData={signatures:Me,signatureMap:Et},Hf}function oe(q,ee,le){throw T(q,ee,le)}function H(q){return Q(q,0,q.length-1)}function U(q){return q[q.length-1]}function Q(q,ee,le){return Array.prototype.slice.call(q,ee,le)}function re(q,ee){for(let le=0;le<q.length;le++)if(ee(q[le]))return q[le]}function ie(q,ee){return Array.prototype.concat.apply([],q.map(ee))}function de(){const q=H(arguments).map(le=>g(b(le))),ee=U(arguments);if(typeof ee!="function")throw new TypeError("Callback function expected as last argument");return he(q,ee)}function he(q,ee){return{referTo:{references:q,callback:ee}}}function $(q){if(typeof q!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:q}}}function G(q){return q&&typeof q.referTo=="object"&&Array.isArray(q.referTo.references)&&typeof q.referTo.callback=="function"}function ue(q){return q&&typeof q.referToSelf=="object"&&typeof q.referToSelf.callback=="function"}function ce(q,ee){if(!q)return ee;if(ee&&ee!==q){const le=new Error("Function names do not match (expected: "+q+", actual: "+ee+")");throw le.data={actual:ee,expected:q},le}return q}function ge(q){let ee;for(const le in q)Object.prototype.hasOwnProperty.call(q,le)&&(d(q[le])||typeof q[le].signature=="string")&&(ee=ce(ee,q[le].name));return ee}function Ce(q,ee){let le;for(le in ee)if(Object.prototype.hasOwnProperty.call(ee,le)){if(le in q&&ee[le]!==q[le]){const pe=new Error('Signature "'+le+'" is defined twice');throw pe.data={signature:le,sourceFunction:ee[le],destFunction:q[le]},pe}q[le]=ee[le]}}const Ae=o;o=function(q){const ee=typeof q=="string",le=ee?1:0;let pe=ee?q:"";const be={};for(let xe=le;xe<arguments.length;++xe){const Fe=arguments[xe];let Te={},Oe;if(typeof Fe=="function"?(Oe=Fe.name,typeof Fe.signature=="string"?Te[Fe.signature]=Fe:d(Fe)&&(Te=Fe.signatures)):t(Fe)&&(Te=Fe,ee||(Oe=ge(Fe))),Object.keys(Te).length===0){const Me=new TypeError("Argument to 'typed' at index "+xe+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw Me.data={index:xe,argument:Fe},Me}ee||(pe=ce(pe,Oe)),Ce(be,Te)}return te(pe||"",be)},o.create=_P,o.createCount=Ae.createCount,o.onMismatch=oe,o.throwMismatchError=oe,o.createError=T,o.clear=l,o.clearConversions=c,o.addTypes=u,o._findType=s,o.referTo=de,o.referToSelf=$,o.convert=m,o.findSignature=h,o.find=p,o.isTypedFunction=d,o.warnAgainstDeprecatedThis=!0,o.addType=function(q,ee){let le="any";ee!==!1&&r.has("Object")&&(le="Object"),o.addTypes([q],le)};function Pe(q){if(!q||typeof q.from!="string"||typeof q.to!="string"||typeof q.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(q.to===q.from)throw new SyntaxError('Illegal to define conversion from "'+q.from+'" to itself.')}return o.addConversion=function(q){let ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};Pe(q);const le=s(q.to),pe=le.conversionsTo.find(be=>be.from===q.from);if(pe)if(ee&&ee.override)o.removeConversion({from:pe.from,to:q.to,convert:pe.convert});else throw new Error('There is already a conversion from "'+q.from+'" to "'+le.name+'"');le.conversionsTo.push({from:q.from,convert:q.convert,index:a++})},o.addConversions=function(q,ee){q.forEach(le=>o.addConversion(le,ee))},o.removeConversion=function(q){Pe(q);const ee=s(q.to),le=re(ee.conversionsTo,be=>be.from===q.from);if(!le)throw new Error("Attempt to remove nonexistent conversion from "+q.from+" to "+q.to);if(le.convert!==q.convert)throw new Error("Conversion to remove does not match existing conversion");const pe=ee.conversionsTo.indexOf(le);ee.conversionsTo.splice(pe,1)},o.resolve=function(q,ee){if(!d(q))throw new TypeError(kS);const le=q._typedFunctionData.signatures;for(let pe=0;pe<le.length;++pe)if(le[pe].test(ee))return le[pe];return null},o}const Ov=_P();function z(t,e,n,r){function i(a){var o=RV(a,e.map(BV));return PV(t,e,a),n(o)}return i.isFactory=!0,i.fn=t,i.dependencies=e.slice().sort(),r&&(i.meta=r),i}function PV(t,e,n){var r=e.filter(a=>!OV(a)).every(a=>n[a]!==void 0);if(!r){var i=e.filter(a=>n[a]===void 0);throw new Error('Cannot create function "'.concat(t,'", ')+"some dependencies are missing: ".concat(i.map(a=>'"'.concat(a,'"')).join(", "),"."))}}function OV(t){return t&&t[0]==="?"}function BV(t){return t&&t[0]==="?"?t.slice(1):t}function qe(t){return typeof t=="boolean"?!0:isFinite(t)?t===Math.round(t):!1}function au(t,e){if(e.number==="bigint")try{BigInt(t)}catch{return e.numberFallback}return e.number}var _s=Math.sign||function(t){return t>0?1:t<0?-1:0},LV=Math.log2||function(e){return Math.log(e)/Math.LN2},jV=Math.log10||function(e){return Math.log(e)/Math.LN10},$V=Math.log1p||function(t){return Math.log(t+1)},zV=Math.cbrt||function(e){if(e===0)return e;var n=e<0,r;return n&&(e=-e),isFinite(e)?(r=Math.exp(Math.log(e)/3),r=(e/(r*r)+2*r)/3):r=e,n?-r:r},UV=Math.expm1||function(e){return e>=2e-4||e<=-2e-4?Math.exp(e)-1:e+e*e/2+e*e*e/6};function n1(t,e,n){var r={2:"0b",8:"0o",16:"0x"},i=r[e],a="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!qe(n))throw new Error("size must be an integer");if(t>2**(n-1)-1||t<-(2**(n-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!qe(t))throw new Error("Value must be an integer");t<0&&(t=t+2**n),a="i".concat(n)}var o="";return t<0&&(t=-t,o="-"),"".concat(o).concat(i).concat(t.toString(e)).concat(a)}function Yu(t,e){if(typeof e=="function")return e(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var{notation:n,precision:r,wordSize:i}=EP(e);switch(n){case"fixed":return CP(t,r);case"exponential":return NP(t,r);case"engineering":return WV(t,r);case"bin":return n1(t,2,i);case"oct":return n1(t,8,i);case"hex":return n1(t,16,i);case"auto":return VV(t,r,e).replace(/((\.\d*?)(0+))($|e)/,function(){var a=arguments[2],o=arguments[4];return a!=="."?a+o:o});default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function EP(t){var e="auto",n,r;if(t!==void 0)if(dt(t))n=t;else if(ht(t))n=t.toNumber();else if(D0(t))t.precision!==void 0&&(n=FS(t.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),t.wordSize!==void 0&&(r=FS(t.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),t.notation&&(e=t.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:e,precision:n,wordSize:r}}function Qh(t){var e=String(t).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var n=e[1],r=e[2],i=parseFloat(e[4]||"0"),a=r.indexOf(".");i+=a!==-1?a-1:r.length-1;var o=r.replace(".","").replace(/^0*/,function(s){return i-=s.length,""}).replace(/0*$/,"").split("").map(function(s){return parseInt(s)});return o.length===0&&(o.push(0),i++),{sign:n,coefficients:o,exponent:i}}function WV(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=Qh(t),r=T0(n,e),i=r.exponent,a=r.coefficients,o=i%3===0?i:i<0?i-3-i%3:i-i%3;if(dt(e))for(;e>a.length||i-o+1>a.length;)a.push(0);else for(var s=Math.abs(i-o)-(a.length-1),u=0;u<s;u++)a.push(0);for(var l=Math.abs(i-o),c=1;l>0;)c++,l--;var f=a.slice(c).join(""),d=dt(e)&&f.length||f.match(/[1-9]/)?"."+f:"",h=a.slice(0,c).join("")+d+"e"+(i>=0?"+":"")+o.toString();return r.sign+h}function CP(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=Qh(t),r=typeof e=="number"?T0(n,n.exponent+1+e):n,i=r.coefficients,a=r.exponent+1,o=a+(e||0);return i.length<o&&(i=i.concat(Nc(o-i.length))),a<0&&(i=Nc(-a+1).concat(i),a=1),a<i.length&&i.splice(a,0,a===0?"0.":"."),r.sign+i.join("")}function NP(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=Qh(t),r=e?T0(n,e):n,i=r.coefficients,a=r.exponent;i.length<e&&(i=i.concat(Nc(e-i.length)));var o=i.shift();return r.sign+o+(i.length>0?"."+i.join(""):"")+"e"+(a>=0?"+":"")+a}function VV(t,e,n){if(isNaN(t)||!isFinite(t))return String(t);var r=PS(n==null?void 0:n.lowerExp,-3),i=PS(n==null?void 0:n.upperExp,5),a=Qh(t),o=e?T0(a,e):a;if(o.exponent<r||o.exponent>=i)return NP(t,e);var s=o.coefficients,u=o.exponent;s.length<e&&(s=s.concat(Nc(e-s.length))),s=s.concat(Nc(u-s.length+1+(s.length<e?e-s.length:0))),s=Nc(-u).concat(s);var l=u>0?u:0;return l<s.length-1&&s.splice(l+1,0,"."),o.sign+s.join("")}function T0(t,e){for(var n={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},r=n.coefficients;e<=0;)r.unshift(0),n.exponent++,e++;if(r.length>e){var i=r.splice(e,r.length-e);if(i[0]>=5){var a=e-1;for(r[a]++;r[a]===10;)r.pop(),a===0&&(r.unshift(0),n.exponent++,a++),a--,r[a]++}}return n}function Nc(t){for(var e=[],n=0;n<t;n++)e.push(0);return e}function qV(t){return t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}function yr(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-8,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(n<=0)throw new Error("Relative tolerance must be greater than 0");if(r<0)throw new Error("Absolute tolerance must be at least 0");return isNaN(t)||isNaN(e)?!1:!isFinite(t)||!isFinite(e)?t===e:t===e?!0:Math.abs(t-e)<=Math.max(n*Math.max(Math.abs(t),Math.abs(e)),r)}var HV=Math.acosh||function(t){return Math.log(Math.sqrt(t*t-1)+t)},GV=Math.asinh||function(t){return Math.log(Math.sqrt(t*t+1)+t)},KV=Math.atanh||function(t){return Math.log((1+t)/(1-t))/2},YV=Math.cosh||function(t){return(Math.exp(t)+Math.exp(-t))/2},XV=Math.sinh||function(t){return(Math.exp(t)-Math.exp(-t))/2},QV=Math.tanh||function(t){var e=Math.exp(2*t);return(e-1)/(e+1)};function ZV(t,e){var n=!0,r=e>0?!0:e<0?!1:1/e===1/0;return n^r?-t:t}function FS(t,e){if(dt(t))return t;if(ht(t))return t.toNumber();e()}function PS(t,e){return dt(t)?t:ht(t)?t.toNumber():e}var SP=function(){return SP=Ov.create,Ov},JV=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],eq=z("typed",JV,function(e){var{BigNumber:n,Complex:r,DenseMatrix:i,Fraction:a}=e,o=SP();return o.clear(),o.addTypes([{name:"number",test:dt},{name:"Complex",test:Mo},{name:"BigNumber",test:ht},{name:"bigint",test:Fd},{name:"Fraction",test:Yh},{name:"Unit",test:Hi},{name:"identifier",test:s=>Dr&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(s)},{name:"string",test:Dr},{name:"Chain",test:bP},{name:"Array",test:qt},{name:"Matrix",test:Je},{name:"DenseMatrix",test:Pv},{name:"SparseMatrix",test:ju},{name:"Range",test:U2},{name:"Index",test:S0},{name:"boolean",test:yV},{name:"ResultSet",test:xV},{name:"Help",test:yP},{name:"function",test:bV},{name:"Date",test:wV},{name:"RegExp",test:_V},{name:"null",test:EV},{name:"undefined",test:CV},{name:"AccessorNode",test:rl},{name:"ArrayNode",test:Wi},{name:"AssignmentNode",test:NV},{name:"BlockNode",test:SV},{name:"ConditionalNode",test:DV},{name:"ConstantNode",test:At},{name:"FunctionNode",test:qs},{name:"FunctionAssignmentNode",test:Xh},{name:"IndexNode",test:_f},{name:"Node",test:Ut},{name:"ObjectNode",test:A0},{name:"OperatorNode",test:Tn},{name:"ParenthesisNode",test:$o},{name:"RangeNode",test:AV},{name:"RelationalNode",test:TV},{name:"SymbolNode",test:rr},{name:"Map",test:xP},{name:"Object",test:D0}]),o.addConversions([{from:"number",to:"BigNumber",convert:function(u){if(n||Xp(u),qV(u)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+u+"). Use function bignumber(x) to convert to BigNumber.");return new n(u)}},{from:"number",to:"Complex",convert:function(u){return r||Qp(u),new r(u,0)}},{from:"BigNumber",to:"Complex",convert:function(u){return r||Qp(u),new r(u.toNumber(),0)}},{from:"bigint",to:"number",convert:function(u){if(u>Number.MAX_SAFE_INTEGER)throw new TypeError("Cannot implicitly convert bigint to number: value exceeds the max safe integer value (value: "+u+")");return Number(u)}},{from:"bigint",to:"BigNumber",convert:function(u){return n||Xp(u),new n(u.toString())}},{from:"bigint",to:"Fraction",convert:function(u){return a||Zp(u),new a(u)}},{from:"Fraction",to:"BigNumber",convert:function(u){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(u){return r||Qp(u),new r(u.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(u){a||Zp(u);var l=new a(u);if(l.valueOf()!==u)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+u+"). Use function fraction(x) to convert to Fraction.");return l}},{from:"string",to:"number",convert:function(u){var l=Number(u);if(isNaN(l))throw new Error('Cannot convert "'+u+'" to a number');return l}},{from:"string",to:"BigNumber",convert:function(u){n||Xp(u);try{return new n(u)}catch{throw new Error('Cannot convert "'+u+'" to BigNumber')}}},{from:"string",to:"bigint",convert:function(u){try{return BigInt(u)}catch{throw new Error('Cannot convert "'+u+'" to BigInt')}}},{from:"string",to:"Fraction",convert:function(u){a||Zp(u);try{return new a(u)}catch{throw new Error('Cannot convert "'+u+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(u){r||Qp(u);try{return new r(u)}catch{throw new Error('Cannot convert "'+u+'" to Complex')}}},{from:"boolean",to:"number",convert:function(u){return+u}},{from:"boolean",to:"BigNumber",convert:function(u){return n||Xp(u),new n(+u)}},{from:"boolean",to:"bigint",convert:function(u){return BigInt(+u)}},{from:"boolean",to:"Fraction",convert:function(u){return a||Zp(u),new a(+u)}},{from:"boolean",to:"string",convert:function(u){return String(u)}},{from:"Array",to:"Matrix",convert:function(u){return i||tq(),new i(u)}},{from:"Matrix",to:"Array",convert:function(u){return u.valueOf()}}]),o.onMismatch=(s,u,l)=>{var c=o.createError(s,u,l);if(["wrongType","mismatch"].includes(c.data.category)&&u.length===1&&na(u[0])&&l.some(d=>!d.params.includes(","))){var f=new TypeError("Function '".concat(s,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(s,")'."));throw f.data=c.data,f}throw c},o.onMismatch=(s,u,l)=>{var c=o.createError(s,u,l);if(["wrongType","mismatch"].includes(c.data.category)&&u.length===1&&na(u[0])&&l.some(d=>!d.params.includes(","))){var f=new TypeError("Function '".concat(s,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(s,")'."));throw f.data=c.data,f}throw c},o});function Xp(t){throw new Error("Cannot convert value ".concat(t," into a BigNumber: no class 'BigNumber' provided"))}function Qp(t){throw new Error("Cannot convert value ".concat(t," into a Complex number: no class 'Complex' provided"))}function tq(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function Zp(t){throw new Error("Cannot convert value ".concat(t," into a Fraction, no class 'Fraction' provided."))}var nq="ResultSet",rq=[],iq=z(nq,rq,()=>{function t(e){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");this.entries=e||[]}return t.prototype.type="ResultSet",t.prototype.isResultSet=!0,t.prototype.valueOf=function(){return this.entries},t.prototype.toString=function(){return"["+this.entries.map(String).join(", ")+"]"},t.prototype.toJSON=function(){return{mathjs:"ResultSet",entries:this.entries}},t.fromJSON=function(e){return new t(e.entries)},t},{isClass:!0});/*!
 *  decimal.js v10.5.0
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var cc=9e15,ou=1e9,hb="0123456789abcdef",Bv="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Lv="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",pb={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-cc,maxE:cc,crypto:!1},DP,Co,lt=!0,M0="[DecimalError] ",Hs=M0+"Invalid argument: ",AP=M0+"Precision limit exceeded",TP=M0+"crypto unavailable",MP="[object Decimal]",Or=Math.floor,Ln=Math.pow,aq=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,oq=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,sq=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,IP=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ca=1e7,tt=7,uq=9007199254740991,lq=Bv.length-1,mb=Lv.length-1,De={toStringTag:MP};De.absoluteValue=De.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),Ze(t)};De.ceil=function(){return Ze(new this.constructor(this),this.e+1,2)};De.clampedTo=De.clamp=function(t,e){var n,r=this,i=r.constructor;if(t=new i(t),e=new i(e),!t.s||!e.s)return new i(NaN);if(t.gt(e))throw Error(Hs+e);return n=r.cmp(t),n<0?t:r.cmp(e)>0?e:new i(r)};De.comparedTo=De.cmp=function(t){var e,n,r,i,a=this,o=a.d,s=(t=new a.constructor(t)).d,u=a.s,l=t.s;if(!o||!s)return!u||!l?NaN:u!==l?u:o===s?0:!o^u<0?1:-1;if(!o[0]||!s[0])return o[0]?u:s[0]?-l:0;if(u!==l)return u;if(a.e!==t.e)return a.e>t.e^u<0?1:-1;for(r=o.length,i=s.length,e=0,n=r<i?r:i;e<n;++e)if(o[e]!==s[e])return o[e]>s[e]^u<0?1:-1;return r===i?0:r>i^u<0?1:-1};De.cosine=De.cos=function(){var t,e,n=this,r=n.constructor;return n.d?n.d[0]?(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+tt,r.rounding=1,n=cq(r,OP(r,n)),r.precision=t,r.rounding=e,Ze(Co==2||Co==3?n.neg():n,t,e,!0)):new r(1):new r(NaN)};De.cubeRoot=De.cbrt=function(){var t,e,n,r,i,a,o,s,u,l,c=this,f=c.constructor;if(!c.isFinite()||c.isZero())return new f(c);for(lt=!1,a=c.s*Ln(c.s*c,1/3),!a||Math.abs(a)==1/0?(n=hr(c.d),t=c.e,(a=(t-n.length+1)%3)&&(n+=a==1||a==-2?"0":"00"),a=Ln(n,1/3),t=Or((t+1)/3)-(t%3==(t<0?-1:2)),a==1/0?n="5e"+t:(n=a.toExponential(),n=n.slice(0,n.indexOf("e")+1)+t),r=new f(n),r.s=c.s):r=new f(a.toString()),o=(t=f.precision)+3;;)if(s=r,u=s.times(s).times(s),l=u.plus(c),r=Jt(l.plus(c).times(s),l.plus(u),o+2,1),hr(s.d).slice(0,o)===(n=hr(r.d)).slice(0,o))if(n=n.slice(o-3,o+1),n=="9999"||!i&&n=="4999"){if(!i&&(Ze(s,t+1,0),s.times(s).times(s).eq(c))){r=s;break}o+=4,i=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(Ze(r,t+1,1),e=!r.times(r).times(r).eq(c));break}return lt=!0,Ze(r,t,f.rounding,e)};De.decimalPlaces=De.dp=function(){var t,e=this.d,n=NaN;if(e){if(t=e.length-1,n=(t-Or(this.e/tt))*tt,t=e[t],t)for(;t%10==0;t/=10)n--;n<0&&(n=0)}return n};De.dividedBy=De.div=function(t){return Jt(this,new this.constructor(t))};De.dividedToIntegerBy=De.divToInt=function(t){var e=this,n=e.constructor;return Ze(Jt(e,new n(t),0,1,1),n.precision,n.rounding)};De.equals=De.eq=function(t){return this.cmp(t)===0};De.floor=function(){return Ze(new this.constructor(this),this.e+1,3)};De.greaterThan=De.gt=function(t){return this.cmp(t)>0};De.greaterThanOrEqualTo=De.gte=function(t){var e=this.cmp(t);return e==1||e===0};De.hyperbolicCosine=De.cosh=function(){var t,e,n,r,i,a=this,o=a.constructor,s=new o(1);if(!a.isFinite())return new o(a.s?1/0:NaN);if(a.isZero())return s;n=o.precision,r=o.rounding,o.precision=n+Math.max(a.e,a.sd())+4,o.rounding=1,i=a.d.length,i<32?(t=Math.ceil(i/3),e=(1/R0(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),a=Xc(o,1,a.times(e),new o(1),!0);for(var u,l=t,c=new o(8);l--;)u=a.times(a),a=s.minus(u.times(c.minus(u.times(c))));return Ze(a,o.precision=n,o.rounding=r,!0)};De.hyperbolicSine=De.sinh=function(){var t,e,n,r,i=this,a=i.constructor;if(!i.isFinite()||i.isZero())return new a(i);if(e=a.precision,n=a.rounding,a.precision=e+Math.max(i.e,i.sd())+4,a.rounding=1,r=i.d.length,r<3)i=Xc(a,2,i,i,!0);else{t=1.4*Math.sqrt(r),t=t>16?16:t|0,i=i.times(1/R0(5,t)),i=Xc(a,2,i,i,!0);for(var o,s=new a(5),u=new a(16),l=new a(20);t--;)o=i.times(i),i=i.times(s.plus(o.times(u.times(o).plus(l))))}return a.precision=e,a.rounding=n,Ze(i,e,n,!0)};De.hyperbolicTangent=De.tanh=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+7,r.rounding=1,Jt(n.sinh(),n.cosh(),r.precision=t,r.rounding=e)):new r(n.s)};De.inverseCosine=De.acos=function(){var t=this,e=t.constructor,n=t.abs().cmp(1),r=e.precision,i=e.rounding;return n!==-1?n===0?t.isNeg()?Ha(e,r,i):new e(0):new e(NaN):t.isZero()?Ha(e,r+4,i).times(.5):(e.precision=r+6,e.rounding=1,t=new e(1).minus(t).div(t.plus(1)).sqrt().atan(),e.precision=r,e.rounding=i,t.times(2))};De.inverseHyperbolicCosine=De.acosh=function(){var t,e,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(t=r.precision,e=r.rounding,r.precision=t+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,lt=!1,n=n.times(n).minus(1).sqrt().plus(n),lt=!0,r.precision=t,r.rounding=e,n.ln()):new r(n)};De.inverseHyperbolicSine=De.asinh=function(){var t,e,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,lt=!1,n=n.times(n).plus(1).sqrt().plus(n),lt=!0,r.precision=t,r.rounding=e,n.ln())};De.inverseHyperbolicTangent=De.atanh=function(){var t,e,n,r,i=this,a=i.constructor;return i.isFinite()?i.e>=0?new a(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=a.precision,e=a.rounding,r=i.sd(),Math.max(r,t)<2*-i.e-1?Ze(new a(i),t,e,!0):(a.precision=n=r-i.e,i=Jt(i.plus(1),new a(1).minus(i),n+t,1),a.precision=t+4,a.rounding=1,i=i.ln(),a.precision=t,a.rounding=e,i.times(.5))):new a(NaN)};De.inverseSine=De.asin=function(){var t,e,n,r,i=this,a=i.constructor;return i.isZero()?new a(i):(e=i.abs().cmp(1),n=a.precision,r=a.rounding,e!==-1?e===0?(t=Ha(a,n+4,r).times(.5),t.s=i.s,t):new a(NaN):(a.precision=n+6,a.rounding=1,i=i.div(new a(1).minus(i.times(i)).sqrt().plus(1)).atan(),a.precision=n,a.rounding=r,i.times(2)))};De.inverseTangent=De.atan=function(){var t,e,n,r,i,a,o,s,u,l=this,c=l.constructor,f=c.precision,d=c.rounding;if(l.isFinite()){if(l.isZero())return new c(l);if(l.abs().eq(1)&&f+4<=mb)return o=Ha(c,f+4,d).times(.25),o.s=l.s,o}else{if(!l.s)return new c(NaN);if(f+4<=mb)return o=Ha(c,f+4,d).times(.5),o.s=l.s,o}for(c.precision=s=f+10,c.rounding=1,n=Math.min(28,s/tt+2|0),t=n;t;--t)l=l.div(l.times(l).plus(1).sqrt().plus(1));for(lt=!1,e=Math.ceil(s/tt),r=1,u=l.times(l),o=new c(l),i=l;t!==-1;)if(i=i.times(u),a=o.minus(i.div(r+=2)),i=i.times(u),o=a.plus(i.div(r+=2)),o.d[e]!==void 0)for(t=e;o.d[t]===a.d[t]&&t--;);return n&&(o=o.times(2<<n-1)),lt=!0,Ze(o,c.precision=f,c.rounding=d,!0)};De.isFinite=function(){return!!this.d};De.isInteger=De.isInt=function(){return!!this.d&&Or(this.e/tt)>this.d.length-2};De.isNaN=function(){return!this.s};De.isNegative=De.isNeg=function(){return this.s<0};De.isPositive=De.isPos=function(){return this.s>0};De.isZero=function(){return!!this.d&&this.d[0]===0};De.lessThan=De.lt=function(t){return this.cmp(t)<0};De.lessThanOrEqualTo=De.lte=function(t){return this.cmp(t)<1};De.logarithm=De.log=function(t){var e,n,r,i,a,o,s,u,l=this,c=l.constructor,f=c.precision,d=c.rounding,h=5;if(t==null)t=new c(10),e=!0;else{if(t=new c(t),n=t.d,t.s<0||!n||!n[0]||t.eq(1))return new c(NaN);e=t.eq(10)}if(n=l.d,l.s<0||!n||!n[0]||l.eq(1))return new c(n&&!n[0]?-1/0:l.s!=1?NaN:n?0:1/0);if(e)if(n.length>1)a=!0;else{for(i=n[0];i%10===0;)i/=10;a=i!==1}if(lt=!1,s=f+h,o=Es(l,s),r=e?jv(c,s+10):Es(t,s),u=Jt(o,r,s,1),vh(u.d,i=f,d))do if(s+=10,o=Es(l,s),r=e?jv(c,s+10):Es(t,s),u=Jt(o,r,s,1),!a){+hr(u.d).slice(i+1,i+15)+1==1e14&&(u=Ze(u,f+1,0));break}while(vh(u.d,i+=10,d));return lt=!0,Ze(u,f,d)};De.minus=De.sub=function(t){var e,n,r,i,a,o,s,u,l,c,f,d,h=this,p=h.constructor;if(t=new p(t),!h.d||!t.d)return!h.s||!t.s?t=new p(NaN):h.d?t.s=-t.s:t=new p(t.d||h.s!==t.s?h:NaN),t;if(h.s!=t.s)return t.s=-t.s,h.plus(t);if(l=h.d,d=t.d,s=p.precision,u=p.rounding,!l[0]||!d[0]){if(d[0])t.s=-t.s;else if(l[0])t=new p(h);else return new p(u===3?-0:0);return lt?Ze(t,s,u):t}if(n=Or(t.e/tt),c=Or(h.e/tt),l=l.slice(),a=c-n,a){for(f=a<0,f?(e=l,a=-a,o=d.length):(e=d,n=c,o=l.length),r=Math.max(Math.ceil(s/tt),o)+2,a>r&&(a=r,e.length=1),e.reverse(),r=a;r--;)e.push(0);e.reverse()}else{for(r=l.length,o=d.length,f=r<o,f&&(o=r),r=0;r<o;r++)if(l[r]!=d[r]){f=l[r]<d[r];break}a=0}for(f&&(e=l,l=d,d=e,t.s=-t.s),o=l.length,r=d.length-o;r>0;--r)l[o++]=0;for(r=d.length;r>a;){if(l[--r]<d[r]){for(i=r;i&&l[--i]===0;)l[i]=Ca-1;--l[i],l[r]+=Ca}l[r]-=d[r]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(t.d=l,t.e=I0(l,n),lt?Ze(t,s,u):t):new p(u===3?-0:0)};De.modulo=De.mod=function(t){var e,n=this,r=n.constructor;return t=new r(t),!n.d||!t.s||t.d&&!t.d[0]?new r(NaN):!t.d||n.d&&!n.d[0]?Ze(new r(n),r.precision,r.rounding):(lt=!1,r.modulo==9?(e=Jt(n,t.abs(),0,3,1),e.s*=t.s):e=Jt(n,t,0,r.modulo,1),e=e.times(t),lt=!0,n.minus(e))};De.naturalExponential=De.exp=function(){return vb(this)};De.naturalLogarithm=De.ln=function(){return Es(this)};De.negated=De.neg=function(){var t=new this.constructor(this);return t.s=-t.s,Ze(t)};De.plus=De.add=function(t){var e,n,r,i,a,o,s,u,l,c,f=this,d=f.constructor;if(t=new d(t),!f.d||!t.d)return!f.s||!t.s?t=new d(NaN):f.d||(t=new d(t.d||f.s===t.s?f:NaN)),t;if(f.s!=t.s)return t.s=-t.s,f.minus(t);if(l=f.d,c=t.d,s=d.precision,u=d.rounding,!l[0]||!c[0])return c[0]||(t=new d(f)),lt?Ze(t,s,u):t;if(a=Or(f.e/tt),r=Or(t.e/tt),l=l.slice(),i=a-r,i){for(i<0?(n=l,i=-i,o=c.length):(n=c,r=a,o=l.length),a=Math.ceil(s/tt),o=a>o?a+1:o+1,i>o&&(i=o,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(o=l.length,i=c.length,o-i<0&&(i=o,n=c,c=l,l=n),e=0;i;)e=(l[--i]=l[i]+c[i]+e)/Ca|0,l[i]%=Ca;for(e&&(l.unshift(e),++r),o=l.length;l[--o]==0;)l.pop();return t.d=l,t.e=I0(l,r),lt?Ze(t,s,u):t};De.precision=De.sd=function(t){var e,n=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Hs+t);return n.d?(e=RP(n.d),t&&n.e+1>e&&(e=n.e+1)):e=NaN,e};De.round=function(){var t=this,e=t.constructor;return Ze(new e(t),t.e+1,e.rounding)};De.sine=De.sin=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+tt,r.rounding=1,n=dq(r,OP(r,n)),r.precision=t,r.rounding=e,Ze(Co>2?n.neg():n,t,e,!0)):new r(NaN)};De.squareRoot=De.sqrt=function(){var t,e,n,r,i,a,o=this,s=o.d,u=o.e,l=o.s,c=o.constructor;if(l!==1||!s||!s[0])return new c(!l||l<0&&(!s||s[0])?NaN:s?o:1/0);for(lt=!1,l=Math.sqrt(+o),l==0||l==1/0?(e=hr(s),(e.length+u)%2==0&&(e+="0"),l=Math.sqrt(e),u=Or((u+1)/2)-(u<0||u%2),l==1/0?e="5e"+u:(e=l.toExponential(),e=e.slice(0,e.indexOf("e")+1)+u),r=new c(e)):r=new c(l.toString()),n=(u=c.precision)+3;;)if(a=r,r=a.plus(Jt(o,a,n+2,1)).times(.5),hr(a.d).slice(0,n)===(e=hr(r.d)).slice(0,n))if(e=e.slice(n-3,n+1),e=="9999"||!i&&e=="4999"){if(!i&&(Ze(a,u+1,0),a.times(a).eq(o))){r=a;break}n+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Ze(r,u+1,1),t=!r.times(r).eq(o));break}return lt=!0,Ze(r,u,c.rounding,t)};De.tangent=De.tan=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+10,r.rounding=1,n=n.sin(),n.s=1,n=Jt(n,new r(1).minus(n.times(n)).sqrt(),t+10,0),r.precision=t,r.rounding=e,Ze(Co==2||Co==4?n.neg():n,t,e,!0)):new r(NaN)};De.times=De.mul=function(t){var e,n,r,i,a,o,s,u,l,c=this,f=c.constructor,d=c.d,h=(t=new f(t)).d;if(t.s*=c.s,!d||!d[0]||!h||!h[0])return new f(!t.s||d&&!d[0]&&!h||h&&!h[0]&&!d?NaN:!d||!h?t.s/0:t.s*0);for(n=Or(c.e/tt)+Or(t.e/tt),u=d.length,l=h.length,u<l&&(a=d,d=h,h=a,o=u,u=l,l=o),a=[],o=u+l,r=o;r--;)a.push(0);for(r=l;--r>=0;){for(e=0,i=u+r;i>r;)s=a[i]+h[r]*d[i-r-1]+e,a[i--]=s%Ca|0,e=s/Ca|0;a[i]=(a[i]+e)%Ca|0}for(;!a[--o];)a.pop();return e?++n:a.shift(),t.d=a,t.e=I0(a,n),lt?Ze(t,f.precision,f.rounding):t};De.toBinary=function(t,e){return W2(this,2,t,e)};De.toDecimalPlaces=De.toDP=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(vi(t,0,ou),e===void 0?e=r.rounding:vi(e,0,8),Ze(n,t+n.e+1,e))};De.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=no(r,!0):(vi(t,0,ou),e===void 0?e=i.rounding:vi(e,0,8),r=Ze(new i(r),t+1,e),n=no(r,!0,t+1)),r.isNeg()&&!r.isZero()?"-"+n:n};De.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?n=no(i):(vi(t,0,ou),e===void 0?e=a.rounding:vi(e,0,8),r=Ze(new a(i),t+i.e+1,e),n=no(r,!1,t+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n};De.toFraction=function(t){var e,n,r,i,a,o,s,u,l,c,f,d,h=this,p=h.d,m=h.constructor;if(!p)return new m(h);if(l=n=new m(1),r=u=new m(0),e=new m(r),a=e.e=RP(p)-h.e-1,o=a%tt,e.d[0]=Ln(10,o<0?tt+o:o),t==null)t=a>0?e:l;else{if(s=new m(t),!s.isInt()||s.lt(l))throw Error(Hs+s);t=s.gt(e)?a>0?e:l:s}for(lt=!1,s=new m(hr(p)),c=m.precision,m.precision=a=p.length*tt*2;f=Jt(s,e,0,1,1),i=n.plus(f.times(r)),i.cmp(t)!=1;)n=r,r=i,i=l,l=u.plus(f.times(i)),u=i,i=e,e=s.minus(f.times(i)),s=i;return i=Jt(t.minus(n),r,0,1,1),u=u.plus(i.times(l)),n=n.plus(i.times(r)),u.s=l.s=h.s,d=Jt(l,r,a,1).minus(h).abs().cmp(Jt(u,n,a,1).minus(h).abs())<1?[l,r]:[u,n],m.precision=c,lt=!0,d};De.toHexadecimal=De.toHex=function(t,e){return W2(this,16,t,e)};De.toNearest=function(t,e){var n=this,r=n.constructor;if(n=new r(n),t==null){if(!n.d)return n;t=new r(1),e=r.rounding}else{if(t=new r(t),e===void 0?e=r.rounding:vi(e,0,8),!n.d)return t.s?n:t;if(!t.d)return t.s&&(t.s=n.s),t}return t.d[0]?(lt=!1,n=Jt(n,t,0,e,1).times(t),lt=!0,Ze(n)):(t.s=n.s,n=t),n};De.toNumber=function(){return+this};De.toOctal=function(t,e){return W2(this,8,t,e)};De.toPower=De.pow=function(t){var e,n,r,i,a,o,s=this,u=s.constructor,l=+(t=new u(t));if(!s.d||!t.d||!s.d[0]||!t.d[0])return new u(Ln(+s,l));if(s=new u(s),s.eq(1))return s;if(r=u.precision,a=u.rounding,t.eq(1))return Ze(s,r,a);if(e=Or(t.e/tt),e>=t.d.length-1&&(n=l<0?-l:l)<=uq)return i=kP(u,s,n,r),t.s<0?new u(1).div(i):Ze(i,r,a);if(o=s.s,o<0){if(e<t.d.length-1)return new u(NaN);if(t.d[e]&1||(o=1),s.e==0&&s.d[0]==1&&s.d.length==1)return s.s=o,s}return n=Ln(+s,l),e=n==0||!isFinite(n)?Or(l*(Math.log("0."+hr(s.d))/Math.LN10+s.e+1)):new u(n+"").e,e>u.maxE+1||e<u.minE-1?new u(e>0?o/0:0):(lt=!1,u.rounding=s.s=1,n=Math.min(12,(e+"").length),i=vb(t.times(Es(s,r+n)),r),i.d&&(i=Ze(i,r+5,1),vh(i.d,r,a)&&(e=r+10,i=Ze(vb(t.times(Es(s,e+n)),e),e+5,1),+hr(i.d).slice(r+1,r+15)+1==1e14&&(i=Ze(i,r+1,0)))),i.s=o,lt=!0,u.rounding=a,Ze(i,r,a))};De.toPrecision=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=no(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(vi(t,1,ou),e===void 0?e=i.rounding:vi(e,0,8),r=Ze(new i(r),t,e),n=no(r,t<=r.e||r.e<=i.toExpNeg,t)),r.isNeg()&&!r.isZero()?"-"+n:n};De.toSignificantDigits=De.toSD=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(vi(t,1,ou),e===void 0?e=r.rounding:vi(e,0,8)),Ze(new r(n),t,e)};De.toString=function(){var t=this,e=t.constructor,n=no(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+n:n};De.truncated=De.trunc=function(){return Ze(new this.constructor(this),this.e+1,1)};De.valueOf=De.toJSON=function(){var t=this,e=t.constructor,n=no(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+n:n};function hr(t){var e,n,r,i=t.length-1,a="",o=t[0];if(i>0){for(a+=o,e=1;e<i;e++)r=t[e]+"",n=tt-r.length,n&&(a+=ds(n)),a+=r;o=t[e],r=o+"",n=tt-r.length,n&&(a+=ds(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}function vi(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Hs+t)}function vh(t,e,n,r){var i,a,o,s;for(a=t[0];a>=10;a/=10)--e;return--e<0?(e+=tt,i=0):(i=Math.ceil((e+1)/tt),e%=tt),a=Ln(10,tt-e),s=t[i]%a|0,r==null?e<3?(e==0?s=s/100|0:e==1&&(s=s/10|0),o=n<4&&s==99999||n>3&&s==49999||s==5e4||s==0):o=(n<4&&s+1==a||n>3&&s+1==a/2)&&(t[i+1]/a/100|0)==Ln(10,e-2)-1||(s==a/2||s==0)&&(t[i+1]/a/100|0)==0:e<4?(e==0?s=s/1e3|0:e==1?s=s/100|0:e==2&&(s=s/10|0),o=(r||n<4)&&s==9999||!r&&n>3&&s==4999):o=((r||n<4)&&s+1==a||!r&&n>3&&s+1==a/2)&&(t[i+1]/a/1e3|0)==Ln(10,e-3)-1,o}function Km(t,e,n){for(var r,i=[0],a,o=0,s=t.length;o<s;){for(a=i.length;a--;)i[a]*=e;for(i[0]+=hb.indexOf(t.charAt(o++)),r=0;r<i.length;r++)i[r]>n-1&&(i[r+1]===void 0&&(i[r+1]=0),i[r+1]+=i[r]/n|0,i[r]%=n)}return i.reverse()}function cq(t,e){var n,r,i;if(e.isZero())return e;r=e.d.length,r<32?(n=Math.ceil(r/3),i=(1/R0(4,n)).toString()):(n=16,i="2.3283064365386962890625e-10"),t.precision+=n,e=Xc(t,1,e.times(i),new t(1));for(var a=n;a--;){var o=e.times(e);e=o.times(o).minus(o).times(8).plus(1)}return t.precision-=n,e}var Jt=function(){function t(r,i,a){var o,s=0,u=r.length;for(r=r.slice();u--;)o=r[u]*i+s,r[u]=o%a|0,s=o/a|0;return s&&r.unshift(s),r}function e(r,i,a,o){var s,u;if(a!=o)u=a>o?1:-1;else for(s=u=0;s<a;s++)if(r[s]!=i[s]){u=r[s]>i[s]?1:-1;break}return u}function n(r,i,a,o){for(var s=0;a--;)r[a]-=s,s=r[a]<i[a]?1:0,r[a]=s*o+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,o,s,u){var l,c,f,d,h,p,m,g,v,x,y,b,w,_,E,C,N,D,A,T,k=r.constructor,F=r.s==i.s?1:-1,O=r.d,I=i.d;if(!O||!O[0]||!I||!I[0])return new k(!r.s||!i.s||(O?I&&O[0]==I[0]:!I)?NaN:O&&O[0]==0||!I?F*0:F/0);for(u?(h=1,c=r.e-i.e):(u=Ca,h=tt,c=Or(r.e/h)-Or(i.e/h)),A=I.length,N=O.length,v=new k(F),x=v.d=[],f=0;I[f]==(O[f]||0);f++);if(I[f]>(O[f]||0)&&c--,a==null?(_=a=k.precision,o=k.rounding):s?_=a+(r.e-i.e)+1:_=a,_<0)x.push(1),p=!0;else{if(_=_/h+2|0,f=0,A==1){for(d=0,I=I[0],_++;(f<N||d)&&_--;f++)E=d*u+(O[f]||0),x[f]=E/I|0,d=E%I|0;p=d||f<N}else{for(d=u/(I[0]+1)|0,d>1&&(I=t(I,d,u),O=t(O,d,u),A=I.length,N=O.length),C=A,y=O.slice(0,A),b=y.length;b<A;)y[b++]=0;T=I.slice(),T.unshift(0),D=I[0],I[1]>=u/2&&++D;do d=0,l=e(I,y,A,b),l<0?(w=y[0],A!=b&&(w=w*u+(y[1]||0)),d=w/D|0,d>1?(d>=u&&(d=u-1),m=t(I,d,u),g=m.length,b=y.length,l=e(m,y,g,b),l==1&&(d--,n(m,A<g?T:I,g,u))):(d==0&&(l=d=1),m=I.slice()),g=m.length,g<b&&m.unshift(0),n(y,m,b,u),l==-1&&(b=y.length,l=e(I,y,A,b),l<1&&(d++,n(y,A<b?T:I,b,u))),b=y.length):l===0&&(d++,y=[0]),x[f++]=d,l&&y[0]?y[b++]=O[C]||0:(y=[O[C]],b=1);while((C++<N||y[0]!==void 0)&&_--);p=y[0]!==void 0}x[0]||x.shift()}if(h==1)v.e=c,DP=p;else{for(f=1,d=x[0];d>=10;d/=10)f++;v.e=f+c*h-1,Ze(v,s?a+v.e+1:a,o,p)}return v}}();function Ze(t,e,n,r){var i,a,o,s,u,l,c,f,d,h=t.constructor;e:if(e!=null){if(f=t.d,!f)return t;for(i=1,s=f[0];s>=10;s/=10)i++;if(a=e-i,a<0)a+=tt,o=e,c=f[d=0],u=c/Ln(10,i-o-1)%10|0;else if(d=Math.ceil((a+1)/tt),s=f.length,d>=s)if(r){for(;s++<=d;)f.push(0);c=u=0,i=1,a%=tt,o=a-tt+1}else break e;else{for(c=s=f[d],i=1;s>=10;s/=10)i++;a%=tt,o=a-tt+i,u=o<0?0:c/Ln(10,i-o-1)%10|0}if(r=r||e<0||f[d+1]!==void 0||(o<0?c:c%Ln(10,i-o-1)),l=n<4?(u||r)&&(n==0||n==(t.s<0?3:2)):u>5||u==5&&(n==4||r||n==6&&(a>0?o>0?c/Ln(10,i-o):0:f[d-1])%10&1||n==(t.s<0?8:7)),e<1||!f[0])return f.length=0,l?(e-=t.e+1,f[0]=Ln(10,(tt-e%tt)%tt),t.e=-e||0):f[0]=t.e=0,t;if(a==0?(f.length=d,s=1,d--):(f.length=d+1,s=Ln(10,tt-a),f[d]=o>0?(c/Ln(10,i-o)%Ln(10,o)|0)*s:0),l)for(;;)if(d==0){for(a=1,o=f[0];o>=10;o/=10)a++;for(o=f[0]+=s,s=1;o>=10;o/=10)s++;a!=s&&(t.e++,f[0]==Ca&&(f[0]=1));break}else{if(f[d]+=s,f[d]!=Ca)break;f[d--]=0,s=1}for(a=f.length;f[--a]===0;)f.pop()}return lt&&(t.e>h.maxE?(t.d=null,t.e=NaN):t.e<h.minE&&(t.e=0,t.d=[0])),t}function no(t,e,n){if(!t.isFinite())return PP(t);var r,i=t.e,a=hr(t.d),o=a.length;return e?(n&&(r=n-o)>0?a=a.charAt(0)+"."+a.slice(1)+ds(r):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(t.e<0?"e":"e+")+t.e):i<0?(a="0."+ds(-i-1)+a,n&&(r=n-o)>0&&(a+=ds(r))):i>=o?(a+=ds(i+1-o),n&&(r=n-i-1)>0&&(a=a+"."+ds(r))):((r=i+1)<o&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(a+="."),a+=ds(r))),a}function I0(t,e){var n=t[0];for(e*=tt;n>=10;n/=10)e++;return e}function jv(t,e,n){if(e>lq)throw lt=!0,n&&(t.precision=n),Error(AP);return Ze(new t(Bv),e,1,!0)}function Ha(t,e,n){if(e>mb)throw Error(AP);return Ze(new t(Lv),e,n,!0)}function RP(t){var e=t.length-1,n=e*tt+1;if(e=t[e],e){for(;e%10==0;e/=10)n--;for(e=t[0];e>=10;e/=10)n++}return n}function ds(t){for(var e="";t--;)e+="0";return e}function kP(t,e,n,r){var i,a=new t(1),o=Math.ceil(r/tt+4);for(lt=!1;;){if(n%2&&(a=a.times(e),BS(a.d,o)&&(i=!0)),n=Or(n/2),n===0){n=a.d.length-1,i&&a.d[n]===0&&++a.d[n];break}e=e.times(e),BS(e.d,o)}return lt=!0,a}function OS(t){return t.d[t.d.length-1]&1}function FP(t,e,n){for(var r,i,a=new t(e[0]),o=0;++o<e.length;){if(i=new t(e[o]),!i.s){a=i;break}r=a.cmp(i),(r===n||r===0&&a.s===n)&&(a=i)}return a}function vb(t,e){var n,r,i,a,o,s,u,l=0,c=0,f=0,d=t.constructor,h=d.rounding,p=d.precision;if(!t.d||!t.d[0]||t.e>17)return new d(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(e==null?(lt=!1,u=p):u=e,s=new d(.03125);t.e>-2;)t=t.times(s),f+=5;for(r=Math.log(Ln(2,f))/Math.LN10*2+5|0,u+=r,n=a=o=new d(1),d.precision=u;;){if(a=Ze(a.times(t),u,1),n=n.times(++c),s=o.plus(Jt(a,n,u,1)),hr(s.d).slice(0,u)===hr(o.d).slice(0,u)){for(i=f;i--;)o=Ze(o.times(o),u,1);if(e==null)if(l<3&&vh(o.d,u-r,h,l))d.precision=u+=10,n=a=s=new d(1),c=0,l++;else return Ze(o,d.precision=p,h,lt=!0);else return d.precision=p,o}o=s}}function Es(t,e){var n,r,i,a,o,s,u,l,c,f,d,h=1,p=10,m=t,g=m.d,v=m.constructor,x=v.rounding,y=v.precision;if(m.s<0||!g||!g[0]||!m.e&&g[0]==1&&g.length==1)return new v(g&&!g[0]?-1/0:m.s!=1?NaN:g?0:m);if(e==null?(lt=!1,c=y):c=e,v.precision=c+=p,n=hr(g),r=n.charAt(0),Math.abs(a=m.e)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)m=m.times(t),n=hr(m.d),r=n.charAt(0),h++;a=m.e,r>1?(m=new v("0."+n),a++):m=new v(r+"."+n.slice(1))}else return l=jv(v,c+2,y).times(a+""),m=Es(new v(r+"."+n.slice(1)),c-p).plus(l),v.precision=y,e==null?Ze(m,y,x,lt=!0):m;for(f=m,u=o=m=Jt(m.minus(1),m.plus(1),c,1),d=Ze(m.times(m),c,1),i=3;;){if(o=Ze(o.times(d),c,1),l=u.plus(Jt(o,new v(i),c,1)),hr(l.d).slice(0,c)===hr(u.d).slice(0,c))if(u=u.times(2),a!==0&&(u=u.plus(jv(v,c+2,y).times(a+""))),u=Jt(u,new v(h),c,1),e==null)if(vh(u.d,c-p,x,s))v.precision=c+=p,l=o=m=Jt(f.minus(1),f.plus(1),c,1),d=Ze(m.times(m),c,1),i=s=1;else return Ze(u,v.precision=y,x,lt=!0);else return v.precision=y,u;u=l,i+=2}}function PP(t){return String(t.s*t.s/0)}function Ym(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;r++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(r,i),e){if(i-=r,t.e=n=n-r-1,t.d=[],r=(n+1)%tt,n<0&&(r+=tt),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=tt;r<i;)t.d.push(+e.slice(r,r+=tt));e=e.slice(r),r=tt-e.length}else r-=i;for(;r--;)e+="0";t.d.push(+e),lt&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function fq(t,e){var n,r,i,a,o,s,u,l,c;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),IP.test(e))return Ym(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(oq.test(e))n=16,e=e.toLowerCase();else if(aq.test(e))n=2;else if(sq.test(e))n=8;else throw Error(Hs+e);for(a=e.search(/p/i),a>0?(u=+e.slice(a+1),e=e.substring(2,a)):e=e.slice(2),a=e.indexOf("."),o=a>=0,r=t.constructor,o&&(e=e.replace(".",""),s=e.length,a=s-a,i=kP(r,new r(n),a,a*2)),l=Km(e,n,Ca),c=l.length-1,a=c;l[a]===0;--a)l.pop();return a<0?new r(t.s*0):(t.e=I0(l,c),t.d=l,lt=!1,o&&(t=Jt(t,i,s*4)),u&&(t=t.times(Math.abs(u)<54?Ln(2,u):Gs.pow(2,u))),lt=!0,t)}function dq(t,e){var n,r=e.d.length;if(r<3)return e.isZero()?e:Xc(t,2,e,e);n=1.4*Math.sqrt(r),n=n>16?16:n|0,e=e.times(1/R0(5,n)),e=Xc(t,2,e,e);for(var i,a=new t(5),o=new t(16),s=new t(20);n--;)i=e.times(e),e=e.times(a.plus(i.times(o.times(i).minus(s))));return e}function Xc(t,e,n,r,i){var a,o,s,u,l=t.precision,c=Math.ceil(l/tt);for(lt=!1,u=n.times(n),s=new t(r);;){if(o=Jt(s.times(u),new t(e++*e++),l,1),s=i?r.plus(o):r.minus(o),r=Jt(o.times(u),new t(e++*e++),l,1),o=s.plus(r),o.d[c]!==void 0){for(a=c;o.d[a]===s.d[a]&&a--;);if(a==-1)break}a=s,s=r,r=o,o=a}return lt=!0,o.d.length=c+1,o}function R0(t,e){for(var n=t;--e;)n*=t;return n}function OP(t,e){var n,r=e.s<0,i=Ha(t,t.precision,1),a=i.times(.5);if(e=e.abs(),e.lte(a))return Co=r?4:1,e;if(n=e.divToInt(i),n.isZero())Co=r?3:2;else{if(e=e.minus(n.times(i)),e.lte(a))return Co=OS(n)?r?2:3:r?4:1,e;Co=OS(n)?r?1:4:r?3:2}return e.minus(i).abs()}function W2(t,e,n,r){var i,a,o,s,u,l,c,f,d,h=t.constructor,p=n!==void 0;if(p?(vi(n,1,ou),r===void 0?r=h.rounding:vi(r,0,8)):(n=h.precision,r=h.rounding),!t.isFinite())c=PP(t);else{for(c=no(t),o=c.indexOf("."),p?(i=2,e==16?n=n*4-3:e==8&&(n=n*3-2)):i=e,o>=0&&(c=c.replace(".",""),d=new h(1),d.e=c.length-o,d.d=Km(no(d),10,i),d.e=d.d.length),f=Km(c,10,i),a=u=f.length;f[--u]==0;)f.pop();if(!f[0])c=p?"0p+0":"0";else{if(o<0?a--:(t=new h(t),t.d=f,t.e=a,t=Jt(t,d,n,r,0,i),f=t.d,a=t.e,l=DP),o=f[n],s=i/2,l=l||f[n+1]!==void 0,l=r<4?(o!==void 0||l)&&(r===0||r===(t.s<0?3:2)):o>s||o===s&&(r===4||l||r===6&&f[n-1]&1||r===(t.s<0?8:7)),f.length=n,l)for(;++f[--n]>i-1;)f[n]=0,n||(++a,f.unshift(1));for(u=f.length;!f[u-1];--u);for(o=0,c="";o<u;o++)c+=hb.charAt(f[o]);if(p){if(u>1)if(e==16||e==8){for(o=e==16?4:3,--u;u%o;u++)c+="0";for(f=Km(c,i,e),u=f.length;!f[u-1];--u);for(o=1,c="1.";o<u;o++)c+=hb.charAt(f[o])}else c=c.charAt(0)+"."+c.slice(1);c=c+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)c="0"+c;c="0."+c}else if(++a>u)for(a-=u;a--;)c+="0";else a<u&&(c=c.slice(0,a)+"."+c.slice(a))}c=(e==16?"0x":e==2?"0b":e==8?"0o":"")+c}return t.s<0?"-"+c:c}function BS(t,e){if(t.length>e)return t.length=e,!0}function hq(t){return new this(t).abs()}function pq(t){return new this(t).acos()}function mq(t){return new this(t).acosh()}function vq(t,e){return new this(t).plus(e)}function gq(t){return new this(t).asin()}function yq(t){return new this(t).asinh()}function xq(t){return new this(t).atan()}function bq(t){return new this(t).atanh()}function wq(t,e){t=new this(t),e=new this(e);var n,r=this.precision,i=this.rounding,a=r+4;return!t.s||!e.s?n=new this(NaN):!t.d&&!e.d?(n=Ha(this,a,1).times(e.s>0?.25:.75),n.s=t.s):!e.d||t.isZero()?(n=e.s<0?Ha(this,r,i):new this(0),n.s=t.s):!t.d||e.isZero()?(n=Ha(this,a,1).times(.5),n.s=t.s):e.s<0?(this.precision=a,this.rounding=1,n=this.atan(Jt(t,e,a,1)),e=Ha(this,a,1),this.precision=r,this.rounding=i,n=t.s<0?n.minus(e):n.plus(e)):n=this.atan(Jt(t,e,a,1)),n}function _q(t){return new this(t).cbrt()}function Eq(t){return Ze(t=new this(t),t.e+1,2)}function Cq(t,e,n){return new this(t).clamp(e,n)}function Nq(t){if(!t||typeof t!="object")throw Error(M0+"Object expected");var e,n,r,i=t.defaults===!0,a=["precision",1,ou,"rounding",0,8,"toExpNeg",-cc,0,"toExpPos",0,cc,"maxE",0,cc,"minE",-cc,0,"modulo",0,9];for(e=0;e<a.length;e+=3)if(n=a[e],i&&(this[n]=pb[n]),(r=t[n])!==void 0)if(Or(r)===r&&r>=a[e+1]&&r<=a[e+2])this[n]=r;else throw Error(Hs+n+": "+r);if(n="crypto",i&&(this[n]=pb[n]),(r=t[n])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(TP);else this[n]=!1;else throw Error(Hs+n+": "+r);return this}function Sq(t){return new this(t).cos()}function Dq(t){return new this(t).cosh()}function BP(t){var e,n,r;function i(a){var o,s,u,l=this;if(!(l instanceof i))return new i(a);if(l.constructor=i,LS(a)){l.s=a.s,lt?!a.d||a.e>i.maxE?(l.e=NaN,l.d=null):a.e<i.minE?(l.e=0,l.d=[0]):(l.e=a.e,l.d=a.d.slice()):(l.e=a.e,l.d=a.d?a.d.slice():a.d);return}if(u=typeof a,u==="number"){if(a===0){l.s=1/a<0?-1:1,l.e=0,l.d=[0];return}if(a<0?(a=-a,l.s=-1):l.s=1,a===~~a&&a<1e7){for(o=0,s=a;s>=10;s/=10)o++;lt?o>i.maxE?(l.e=NaN,l.d=null):o<i.minE?(l.e=0,l.d=[0]):(l.e=o,l.d=[a]):(l.e=o,l.d=[a]);return}if(a*0!==0){a||(l.s=NaN),l.e=NaN,l.d=null;return}return Ym(l,a.toString())}if(u==="string")return(s=a.charCodeAt(0))===45?(a=a.slice(1),l.s=-1):(s===43&&(a=a.slice(1)),l.s=1),IP.test(a)?Ym(l,a):fq(l,a);if(u==="bigint")return a<0?(a=-a,l.s=-1):l.s=1,Ym(l,a.toString());throw Error(Hs+a)}if(i.prototype=De,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=Nq,i.clone=BP,i.isDecimal=LS,i.abs=hq,i.acos=pq,i.acosh=mq,i.add=vq,i.asin=gq,i.asinh=yq,i.atan=xq,i.atanh=bq,i.atan2=wq,i.cbrt=_q,i.ceil=Eq,i.clamp=Cq,i.cos=Sq,i.cosh=Dq,i.div=Aq,i.exp=Tq,i.floor=Mq,i.hypot=Iq,i.ln=Rq,i.log=kq,i.log10=Pq,i.log2=Fq,i.max=Oq,i.min=Bq,i.mod=Lq,i.mul=jq,i.pow=$q,i.random=zq,i.round=Uq,i.sign=Wq,i.sin=Vq,i.sinh=qq,i.sqrt=Hq,i.sub=Gq,i.sum=Kq,i.tan=Yq,i.tanh=Xq,i.trunc=Qq,t===void 0&&(t={}),t&&t.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function Aq(t,e){return new this(t).div(e)}function Tq(t){return new this(t).exp()}function Mq(t){return Ze(t=new this(t),t.e+1,3)}function Iq(){var t,e,n=new this(0);for(lt=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return lt=!0,new this(1/0);n=e}return lt=!0,n.sqrt()}function LS(t){return t instanceof Gs||t&&t.toStringTag===MP||!1}function Rq(t){return new this(t).ln()}function kq(t,e){return new this(t).log(e)}function Fq(t){return new this(t).log(2)}function Pq(t){return new this(t).log(10)}function Oq(){return FP(this,arguments,-1)}function Bq(){return FP(this,arguments,1)}function Lq(t,e){return new this(t).mod(e)}function jq(t,e){return new this(t).mul(e)}function $q(t,e){return new this(t).pow(e)}function zq(t){var e,n,r,i,a=0,o=new this(1),s=[];if(t===void 0?t=this.precision:vi(t,1,ou),r=Math.ceil(t/tt),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(r));a<r;)i=e[a],i>=429e7?e[a]=crypto.getRandomValues(new Uint32Array(1))[0]:s[a++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(r*=4);a<r;)i=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+((e[a+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,a):(s.push(i%1e7),a+=4);a=r/4}else throw Error(TP);else for(;a<r;)s[a++]=Math.random()*1e7|0;for(r=s[--a],t%=tt,r&&t&&(i=Ln(10,tt-t),s[a]=(r/i|0)*i);s[a]===0;a--)s.pop();if(a<0)n=0,s=[0];else{for(n=-1;s[0]===0;n-=tt)s.shift();for(r=1,i=s[0];i>=10;i/=10)r++;r<tt&&(n-=tt-r)}return o.e=n,o.d=s,o}function Uq(t){return Ze(t=new this(t),t.e+1,this.rounding)}function Wq(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function Vq(t){return new this(t).sin()}function qq(t){return new this(t).sinh()}function Hq(t){return new this(t).sqrt()}function Gq(t,e){return new this(t).sub(e)}function Kq(){var t=0,e=arguments,n=new this(e[t]);for(lt=!1;n.s&&++t<e.length;)n=n.plus(e[t]);return lt=!0,Ze(n,this.precision,this.rounding)}function Yq(t){return new this(t).tan()}function Xq(t){return new this(t).tanh()}function Qq(t){return Ze(t=new this(t),t.e+1,1)}De[Symbol.for("nodejs.util.inspect.custom")]=De.toString;De[Symbol.toStringTag]="Decimal";var Gs=De.constructor=BP(pb);Bv=new Gs(Bv);Lv=new Gs(Lv);var Zq="BigNumber",Jq=["?on","config"],eH=z(Zq,Jq,t=>{var{on:e,config:n}=t,r=Gs.clone({precision:n.precision,modulo:Gs.EUCLID});return r.prototype=Object.create(r.prototype),r.prototype.type="BigNumber",r.prototype.isBigNumber=!0,r.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},r.fromJSON=function(i){return new r(i.value)},e&&e("config",function(i,a){i.precision!==a.precision&&r.config({precision:i.precision})}),r},{isClass:!0});const Er=Math.cosh||function(t){return Math.abs(t)<1e-9?1-t:(Math.exp(t)+Math.exp(-t))*.5},ji=Math.sinh||function(t){return Math.abs(t)<1e-9?t:(Math.exp(t)-Math.exp(-t))*.5},tH=function(t){const e=Math.PI/4;if(-e>t||t>e)return Math.cos(t)-1;const n=t*t;return n*(n*(n*(n*(n*(n*(n*(n/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},r1=function(t,e){return t=Math.abs(t),e=Math.abs(e),t<e&&([t,e]=[e,t]),t<1e8?Math.sqrt(t*t+e*e):(e/=t,t*Math.sqrt(1+e*e))},Ll=function(){throw SyntaxError("Invalid Param")};function i1(t,e){const n=Math.abs(t),r=Math.abs(e);return t===0?Math.log(r):e===0?Math.log(n):n<3e3&&r<3e3?Math.log(t*t+e*e)*.5:(t=t*.5,e=e*.5,.5*Math.log(t*t+e*e)+Math.LN2)}const nH={re:0,im:0},Du=function(t,e){const n=nH;if(t==null)n.re=n.im=0;else if(e!==void 0)n.re=t,n.im=e;else switch(typeof t){case"object":if("im"in t&&"re"in t)n.re=t.re,n.im=t.im;else if("abs"in t&&"arg"in t){if(!isFinite(t.abs)&&isFinite(t.arg))return we.INFINITY;n.re=t.abs*Math.cos(t.arg),n.im=t.abs*Math.sin(t.arg)}else if("r"in t&&"phi"in t){if(!isFinite(t.r)&&isFinite(t.phi))return we.INFINITY;n.re=t.r*Math.cos(t.phi),n.im=t.r*Math.sin(t.phi)}else t.length===2?(n.re=t[0],n.im=t[1]):Ll();break;case"string":n.im=n.re=0;const r=t.replace(/_/g,"").match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g);let i=1,a=0;r===null&&Ll();for(let o=0;o<r.length;o++){const s=r[o];s===" "||s==="	"||s===`
`||(s==="+"?i++:s==="-"?a++:s==="i"||s==="I"?(i+a===0&&Ll(),r[o+1]!==" "&&!isNaN(r[o+1])?(n.im+=parseFloat((a%2?"-":"")+r[o+1]),o++):n.im+=parseFloat((a%2?"-":"")+"1"),i=a=0):((i+a===0||isNaN(s))&&Ll(),r[o+1]==="i"||r[o+1]==="I"?(n.im+=parseFloat((a%2?"-":"")+s),o++):n.re+=parseFloat((a%2?"-":"")+s),i=a=0))}i+a>0&&Ll();break;case"number":n.im=0,n.re=t;break;default:Ll()}return isNaN(n.re)||isNaN(n.im),n};function we(t,e){if(!(this instanceof we))return new we(t,e);const n=Du(t,e);this.re=n.re,this.im=n.im}we.prototype={re:0,im:0,sign:function(){const t=r1(this.re,this.im);return new we(this.re/t,this.im/t)},add:function(t,e){const n=Du(t,e),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im));return r||i?r&&i?we.NAN:we.INFINITY:new we(this.re+n.re,this.im+n.im)},sub:function(t,e){const n=Du(t,e),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im));return r||i?r&&i?we.NAN:we.INFINITY:new we(this.re-n.re,this.im-n.im)},mul:function(t,e){const n=Du(t,e),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im)),a=this.re===0&&this.im===0,o=n.re===0&&n.im===0;return r&&o||i&&a?we.NAN:r||i?we.INFINITY:n.im===0&&this.im===0?new we(this.re*n.re,0):new we(this.re*n.re-this.im*n.im,this.re*n.im+this.im*n.re)},div:function(t,e){const n=Du(t,e),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im)),a=this.re===0&&this.im===0,o=n.re===0&&n.im===0;if(a&&o||r&&i)return we.NAN;if(o||r)return we.INFINITY;if(a||i)return we.ZERO;if(n.im===0)return new we(this.re/n.re,this.im/n.re);if(Math.abs(n.re)<Math.abs(n.im)){const s=n.re/n.im,u=n.re*s+n.im;return new we((this.re*s+this.im)/u,(this.im*s-this.re)/u)}else{const s=n.im/n.re,u=n.im*s+n.re;return new we((this.re+this.im*s)/u,(this.im-this.re*s)/u)}},pow:function(t,e){const n=Du(t,e),r=this.re===0&&this.im===0;if(n.re===0&&n.im===0)return we.ONE;if(n.im===0){if(this.im===0&&this.re>0)return new we(Math.pow(this.re,n.re),0);if(this.re===0)switch((n.re%4+4)%4){case 0:return new we(Math.pow(this.im,n.re),0);case 1:return new we(0,Math.pow(this.im,n.re));case 2:return new we(-Math.pow(this.im,n.re),0);case 3:return new we(0,-Math.pow(this.im,n.re))}}if(r&&n.re>0)return we.ZERO;const a=Math.atan2(this.im,this.re),o=i1(this.re,this.im);let s=Math.exp(n.re*o-n.im*a),u=n.im*o+n.re*a;return new we(s*Math.cos(u),s*Math.sin(u))},sqrt:function(){const t=this.re,e=this.im;if(e===0)return t>=0?new we(Math.sqrt(t),0):new we(0,Math.sqrt(-t));const n=r1(t,e);let r=Math.sqrt(.5*(n+Math.abs(t))),i=Math.abs(e)/(2*r);return t>=0?new we(r,e<0?-i:i):new we(i,e<0?-r:r)},exp:function(){const t=Math.exp(this.re);return this.im===0?new we(t,0):new we(t*Math.cos(this.im),t*Math.sin(this.im))},expm1:function(){const t=this.re,e=this.im;return new we(Math.expm1(t)*Math.cos(e)+tH(e),Math.exp(t)*Math.sin(e))},log:function(){const t=this.re,e=this.im;return e===0&&t>0?new we(Math.log(t),0):new we(i1(t,e),Math.atan2(e,t))},abs:function(){return r1(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){const t=this.re,e=this.im;return new we(Math.sin(t)*Er(e),Math.cos(t)*ji(e))},cos:function(){const t=this.re,e=this.im;return new we(Math.cos(t)*Er(e),-Math.sin(t)*ji(e))},tan:function(){const t=2*this.re,e=2*this.im,n=Math.cos(t)+Er(e);return new we(Math.sin(t)/n,ji(e)/n)},cot:function(){const t=2*this.re,e=2*this.im,n=Math.cos(t)-Er(e);return new we(-Math.sin(t)/n,ji(e)/n)},sec:function(){const t=this.re,e=this.im,n=.5*Er(2*e)+.5*Math.cos(2*t);return new we(Math.cos(t)*Er(e)/n,Math.sin(t)*ji(e)/n)},csc:function(){const t=this.re,e=this.im,n=.5*Er(2*e)-.5*Math.cos(2*t);return new we(Math.sin(t)*Er(e)/n,-Math.cos(t)*ji(e)/n)},asin:function(){const t=this.re,e=this.im,n=new we(e*e-t*t+1,-2*t*e).sqrt(),r=new we(n.re-e,n.im+t).log();return new we(r.im,-r.re)},acos:function(){const t=this.re,e=this.im,n=new we(e*e-t*t+1,-2*t*e).sqrt(),r=new we(n.re-e,n.im+t).log();return new we(Math.PI/2-r.im,r.re)},atan:function(){const t=this.re,e=this.im;if(t===0){if(e===1)return new we(0,1/0);if(e===-1)return new we(0,-1/0)}const n=t*t+(1-e)*(1-e),r=new we((1-e*e-t*t)/n,-2*t/n).log();return new we(-.5*r.im,.5*r.re)},acot:function(){const t=this.re,e=this.im;if(e===0)return new we(Math.atan2(1,t),0);const n=t*t+e*e;return n!==0?new we(t/n,-e/n).atan():new we(t!==0?t/0:0,e!==0?-e/0:0).atan()},asec:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new we(0,1/0);const n=t*t+e*e;return n!==0?new we(t/n,-e/n).acos():new we(t!==0?t/0:0,e!==0?-e/0:0).acos()},acsc:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new we(Math.PI/2,1/0);const n=t*t+e*e;return n!==0?new we(t/n,-e/n).asin():new we(t!==0?t/0:0,e!==0?-e/0:0).asin()},sinh:function(){const t=this.re,e=this.im;return new we(ji(t)*Math.cos(e),Er(t)*Math.sin(e))},cosh:function(){const t=this.re,e=this.im;return new we(Er(t)*Math.cos(e),ji(t)*Math.sin(e))},tanh:function(){const t=2*this.re,e=2*this.im,n=Er(t)+Math.cos(e);return new we(ji(t)/n,Math.sin(e)/n)},coth:function(){const t=2*this.re,e=2*this.im,n=Er(t)-Math.cos(e);return new we(ji(t)/n,-Math.sin(e)/n)},csch:function(){const t=this.re,e=this.im,n=Math.cos(2*e)-Er(2*t);return new we(-2*ji(t)*Math.cos(e)/n,2*Er(t)*Math.sin(e)/n)},sech:function(){const t=this.re,e=this.im,n=Math.cos(2*e)+Er(2*t);return new we(2*Er(t)*Math.cos(e)/n,-2*ji(t)*Math.sin(e)/n)},asinh:function(){let t=this.im;this.im=-this.re,this.re=t;const e=this.asin();return this.re=-this.im,this.im=t,t=e.re,e.re=-e.im,e.im=t,e},acosh:function(){const t=this.acos();if(t.im<=0){const e=t.re;t.re=-t.im,t.im=e}else{const e=t.im;t.im=-t.re,t.re=e}return t},atanh:function(){const t=this.re,e=this.im,n=t>1&&e===0,r=1-t,i=1+t,a=r*r+e*e,o=a!==0?new we((i*r-e*e)/a,(e*r+i*e)/a):new we(t!==-1?t/0:0,e!==0?e/0:0),s=o.re;return o.re=i1(o.re,o.im)/2,o.im=Math.atan2(o.im,s)/2,n&&(o.im=-o.im),o},acoth:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new we(0,Math.PI/2);const n=t*t+e*e;return n!==0?new we(t/n,-e/n).atanh():new we(t!==0?t/0:0,e!==0?-e/0:0).atanh()},acsch:function(){const t=this.re,e=this.im;if(e===0)return new we(t!==0?Math.log(t+Math.sqrt(t*t+1)):1/0,0);const n=t*t+e*e;return n!==0?new we(t/n,-e/n).asinh():new we(t!==0?t/0:0,e!==0?-e/0:0).asinh()},asech:function(){const t=this.re,e=this.im;if(this.isZero())return we.INFINITY;const n=t*t+e*e;return n!==0?new we(t/n,-e/n).acosh():new we(t!==0?t/0:0,e!==0?-e/0:0).acosh()},inverse:function(){if(this.isZero())return we.INFINITY;if(this.isInfinite())return we.ZERO;const t=this.re,e=this.im,n=t*t+e*e;return new we(t/n,-e/n)},conjugate:function(){return new we(this.re,-this.im)},neg:function(){return new we(-this.re,-this.im)},ceil:function(t){return t=Math.pow(10,t||0),new we(Math.ceil(this.re*t)/t,Math.ceil(this.im*t)/t)},floor:function(t){return t=Math.pow(10,t||0),new we(Math.floor(this.re*t)/t,Math.floor(this.im*t)/t)},round:function(t){return t=Math.pow(10,t||0),new we(Math.round(this.re*t)/t,Math.round(this.im*t)/t)},equals:function(t,e){const n=Du(t,e);return Math.abs(n.re-this.re)<=we.EPSILON&&Math.abs(n.im-this.im)<=we.EPSILON},clone:function(){return new we(this.re,this.im)},toString:function(){let t=this.re,e=this.im,n="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(t)<we.EPSILON&&(t=0),Math.abs(e)<we.EPSILON&&(e=0),e===0?n+t:(t!==0?(n+=t,n+=" ",e<0?(e=-e,n+="-"):n+="+",n+=" "):e<0&&(e=-e,n+="-"),e!==1&&(n+=e),n+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!this.isFinite()}};we.ZERO=new we(0,0);we.ONE=new we(1,0);we.I=new we(0,1);we.PI=new we(Math.PI,0);we.E=new we(Math.E,0);we.INFINITY=new we(1/0,1/0);we.NAN=new we(NaN,NaN);we.EPSILON=1e-15;var rH="Complex",iH=[],aH=z(rH,iH,()=>(Object.defineProperty(we,"name",{value:"Complex"}),we.prototype.constructor=we,we.prototype.type="Complex",we.prototype.isComplex=!0,we.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},we.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},we.prototype.format=function(t){var e="",n=this.im,r=this.re,i=Yu(this.re,t),a=Yu(this.im,t),o=dt(t)?t:t?t.precision:null;if(o!==null){var s=Math.pow(10,-o);Math.abs(r/n)<s&&(r=0),Math.abs(n/r)<s&&(n=0)}return n===0?e=i:r===0?n===1?e="i":n===-1?e="-i":e=a+"i":n<0?n===-1?e=i+" - i":e=i+" - "+a.substring(1)+"i":n===1?e=i+" + i":e=i+" + "+a+"i",e},we.fromPolar=function(t){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return we(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var n=arguments[0],r=arguments[1];if(dt(n)){if(Hi(r)&&r.hasBase("ANGLE")&&(r=r.toNumber("rad")),dt(r))return new we({r:n,phi:r});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},we.prototype.valueOf=we.prototype.toString,we.fromJSON=function(t){return new we(t)},we.compare=function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0},we),{isClass:!0});typeof BigInt>"u"&&(BigInt=function(t){if(isNaN(t))throw new Error("");return t});const Qe=BigInt(0),yt=BigInt(1),gh=BigInt(2),gb=BigInt(5),ti=BigInt(10),oH=2e3,Le={s:yt,n:Qe,d:yt};function po(t,e){try{t=BigInt(t)}catch{throw us()}return t*e}function la(t){return typeof t=="bigint"?t:Math.floor(t)}function dn(t,e){if(e===Qe)throw V2();const n=Object.create(Ui.prototype);n.s=t<Qe?-yt:yt,t=t<Qe?-t:t;const r=Fu(t,e);return n.n=t/r,n.d=e/r,n}function jl(t){const e={};let n=t,r=gh,i=gb-yt;for(;i<=n;){for(;n%r===Qe;)n/=r,e[r]=(e[r]||Qe)+yt;i+=yt+gh*r++}return n!==t?n>1&&(e[n]=(e[n]||Qe)+yt):e[t]=(e[t]||Qe)+yt,e}const Qn=function(t,e){let n=Qe,r=yt,i=yt;if(t!=null)if(e!==void 0){if(typeof t=="bigint")n=t;else{if(isNaN(t))throw us();if(t%1!==0)throw jS();n=BigInt(t)}if(typeof e=="bigint")r=e;else{if(isNaN(e))throw us();if(e%1!==0)throw jS();r=BigInt(e)}i=n*r}else if(typeof t=="object"){if("d"in t&&"n"in t)n=BigInt(t.n),r=BigInt(t.d),"s"in t&&(n*=BigInt(t.s));else if(0 in t)n=BigInt(t[0]),1 in t&&(r=BigInt(t[1]));else if(typeof t=="bigint")n=t;else throw us();i=n*r}else if(typeof t=="number"){if(isNaN(t))throw us();if(t<0&&(i=-yt,t=-t),t%1===0)n=BigInt(t);else{let a=1,o=0,s=1,u=1,l=1,c=1e7;for(t>=1&&(a=10**Math.floor(1+Math.log10(t)),t/=a);s<=c&&l<=c;){let f=(o+u)/(s+l);if(t===f){s+l<=c?(n=o+u,r=s+l):l>s?(n=u,r=l):(n=o,r=s);break}else t>f?(o+=u,s+=l):(u+=o,l+=s),s>c?(n=u,r=l):(n=o,r=s)}n=BigInt(n)*BigInt(a),r=BigInt(r)}}else if(typeof t=="string"){let a=0,o=Qe,s=Qe,u=Qe,l=yt,c=yt,f=t.replace(/_/g,"").match(/\d+|./g);if(f===null)throw us();if(f[a]==="-"?(i=-yt,a++):f[a]==="+"&&a++,f.length===a+1?s=po(f[a++],i):f[a+1]==="."||f[a]==="."?(f[a]!=="."&&(o=po(f[a++],i)),a++,(a+1===f.length||f[a+1]==="("&&f[a+3]===")"||f[a+1]==="'"&&f[a+3]==="'")&&(s=po(f[a],i),l=ti**BigInt(f[a].length),a++),(f[a]==="("&&f[a+2]===")"||f[a]==="'"&&f[a+2]==="'")&&(u=po(f[a+1],i),c=ti**BigInt(f[a+1].length)-yt,a+=3)):f[a+1]==="/"||f[a+1]===":"?(s=po(f[a],i),l=po(f[a+2],yt),a+=3):f[a+3]==="/"&&f[a+1]===" "&&(o=po(f[a],i),s=po(f[a+2],i),l=po(f[a+4],yt),a+=5),f.length<=a)r=l*c,i=n=u+r*o+c*s;else throw us()}else if(typeof t=="bigint")n=t,i=t,r=yt;else throw us();if(r===Qe)throw V2();Le.s=i<Qe?-yt:yt,Le.n=n<Qe?-n:n,Le.d=r<Qe?-r:r};function sH(t,e,n){let r=yt;for(;e>Qe;t=t*t%n,e>>=yt)e&yt&&(r=r*t%n);return r}function uH(t,e){for(;e%gh===Qe;e/=gh);for(;e%gb===Qe;e/=gb);if(e===yt)return Qe;let n=ti%e,r=1;for(;n!==yt;r++)if(n=n*ti%e,r>oH)return Qe;return BigInt(r)}function lH(t,e,n){let r=yt,i=sH(ti,n,e);for(let a=0;a<300;a++){if(r===i)return BigInt(a);r=r*ti%e,i=i*ti%e}return 0}function Fu(t,e){if(!t)return e;if(!e)return t;for(;;){if(t%=e,!t)return e;if(e%=t,!e)return t}}function Ui(t,e){if(Qn(t,e),this instanceof Ui)t=Fu(Le.d,Le.n),this.s=Le.s,this.n=Le.n/t,this.d=Le.d/t;else return dn(Le.s*Le.n,Le.d)}var V2=function(){return new Error("Division by Zero")},us=function(){return new Error("Invalid argument")},jS=function(){return new Error("Parameters must be integer")};Ui.prototype={s:yt,n:Qe,d:yt,abs:function(){return dn(this.n,this.d)},neg:function(){return dn(-this.s*this.n,this.d)},add:function(t,e){return Qn(t,e),dn(this.s*this.n*Le.d+Le.s*this.d*Le.n,this.d*Le.d)},sub:function(t,e){return Qn(t,e),dn(this.s*this.n*Le.d-Le.s*this.d*Le.n,this.d*Le.d)},mul:function(t,e){return Qn(t,e),dn(this.s*Le.s*this.n*Le.n,this.d*Le.d)},div:function(t,e){return Qn(t,e),dn(this.s*Le.s*this.n*Le.d,this.d*Le.n)},clone:function(){return dn(this.s*this.n,this.d)},mod:function(t,e){if(t===void 0)return dn(this.s*this.n%this.d,yt);if(Qn(t,e),Qe===Le.n*this.d)throw V2();return dn(this.s*(Le.d*this.n)%(Le.n*this.d),Le.d*this.d)},gcd:function(t,e){return Qn(t,e),dn(Fu(Le.n,this.n)*Fu(Le.d,this.d),Le.d*this.d)},lcm:function(t,e){return Qn(t,e),Le.n===Qe&&this.n===Qe?dn(Qe,yt):dn(Le.n*this.n,Fu(Le.n,this.n)*Fu(Le.d,this.d))},inverse:function(){return dn(this.s*this.d,this.n)},pow:function(t,e){if(Qn(t,e),Le.d===yt)return Le.s<Qe?dn((this.s*this.d)**Le.n,this.n**Le.n):dn((this.s*this.n)**Le.n,this.d**Le.n);if(this.s<Qe)return null;let n=jl(this.n),r=jl(this.d),i=yt,a=yt;for(let o in n)if(o!=="1"){if(o==="0"){i=Qe;break}if(n[o]*=Le.n,n[o]%Le.d===Qe)n[o]/=Le.d;else return null;i*=BigInt(o)**n[o]}for(let o in r)if(o!=="1"){if(r[o]*=Le.n,r[o]%Le.d===Qe)r[o]/=Le.d;else return null;a*=BigInt(o)**r[o]}return Le.s<Qe?dn(a,i):dn(i,a)},log:function(t,e){if(Qn(t,e),this.s<=Qe||Le.s<=Qe)return null;const n={},r=jl(Le.n),i=jl(Le.d),a=jl(this.n),o=jl(this.d);for(const l in i)r[l]=(r[l]||Qe)-i[l];for(const l in o)a[l]=(a[l]||Qe)-o[l];for(const l in r)l!=="1"&&(n[l]=!0);for(const l in a)l!=="1"&&(n[l]=!0);let s=null,u=null;for(const l in n){const c=r[l]||Qe,f=a[l]||Qe;if(c===Qe){if(f!==Qe)return null;continue}let d=f,h=c;const p=Fu(d,h);if(d/=p,h/=p,s===null&&u===null)s=d,u=h;else if(d*u!==s*h)return null}return s!==null&&u!==null?dn(s,u):null},equals:function(t,e){return Qn(t,e),this.s*this.n*Le.d===Le.s*Le.n*this.d},lt:function(t,e){return Qn(t,e),this.s*this.n*Le.d<Le.s*Le.n*this.d},lte:function(t,e){return Qn(t,e),this.s*this.n*Le.d<=Le.s*Le.n*this.d},gt:function(t,e){return Qn(t,e),this.s*this.n*Le.d>Le.s*Le.n*this.d},gte:function(t,e){return Qn(t,e),this.s*this.n*Le.d>=Le.s*Le.n*this.d},compare:function(t,e){Qn(t,e);let n=this.s*this.n*Le.d-Le.s*Le.n*this.d;return(Qe<n)-(n<Qe)},ceil:function(t){return t=ti**BigInt(t||0),dn(la(this.s*t*this.n/this.d)+(t*this.n%this.d>Qe&&this.s>=Qe?yt:Qe),t)},floor:function(t){return t=ti**BigInt(t||0),dn(la(this.s*t*this.n/this.d)-(t*this.n%this.d>Qe&&this.s<Qe?yt:Qe),t)},round:function(t){return t=ti**BigInt(t||0),dn(la(this.s*t*this.n/this.d)+this.s*((this.s>=Qe?yt:Qe)+gh*(t*this.n%this.d)>this.d?yt:Qe),t)},roundTo:function(t,e){Qn(t,e);const n=this.n*Le.d,r=this.d*Le.n,i=n%r;let a=la(n/r);return i+i>=r&&a++,dn(this.s*a*Le.n,Le.d)},divisible:function(t,e){return Qn(t,e),!(!(Le.n*this.d)||this.n*Le.d%(Le.n*this.d))},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(t){let e=this.n,n=this.d;t=t||15;let r=uH(e,n),i=lH(e,n,r),a=this.s<Qe?"-":"";if(a+=la(e/n),e%=n,e*=ti,e&&(a+="."),r){for(let o=i;o--;)a+=la(e/n),e%=n,e*=ti;a+="(";for(let o=r;o--;)a+=la(e/n),e%=n,e*=ti;a+=")"}else for(let o=t;e&&o--;)a+=la(e/n),e%=n,e*=ti;return a},toFraction:function(t){let e=this.n,n=this.d,r=this.s<Qe?"-":"";if(n===yt)r+=e;else{let i=la(e/n);t&&i>Qe&&(r+=i,r+=" ",e%=n),r+=e,r+="/",r+=n}return r},toLatex:function(t){let e=this.n,n=this.d,r=this.s<Qe?"-":"";if(n===yt)r+=e;else{let i=la(e/n);t&&i>Qe&&(r+=i,e%=n),r+="\\frac{",r+=e,r+="}{",r+=n,r+="}"}return r},toContinued:function(){let t=this.n,e=this.d,n=[];do{n.push(la(t/e));let r=t%e;t=e,e=r}while(t!==yt);return n},simplify:function(t){const e=BigInt(1/(t||.001)|0),n=this.abs(),r=n.toContinued();for(let i=1;i<r.length;i++){let a=dn(r[i-1],yt);for(let s=i-2;s>=0;s--)a=a.inverse().add(r[s]);let o=a.sub(n);if(o.n*e<o.d)return a.mul(this.s)}return this}};var cH="Fraction",fH=[],dH=z(cH,fH,()=>(Object.defineProperty(Ui,"name",{value:"Fraction"}),Ui.prototype.constructor=Ui,Ui.prototype.type="Fraction",Ui.prototype.isFraction=!0,Ui.prototype.toJSON=function(){return{mathjs:"Fraction",n:String(this.s*this.n),d:String(this.d)}},Ui.fromJSON=function(t){return new Ui(t)},Ui),{isClass:!0}),hH="Range",pH=[],mH=z(hH,pH,()=>{function t(e,n,r){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");var i=e!=null,a=n!=null,o=r!=null;if(i){if(ht(e))e=e.toNumber();else if(typeof e!="number"&&!Fd(e))throw new TypeError("Parameter start must be a number or bigint")}if(a){if(ht(n))n=n.toNumber();else if(typeof n!="number"&&!Fd(n))throw new TypeError("Parameter end must be a number or bigint")}if(o){if(ht(r))r=r.toNumber();else if(typeof r!="number"&&!Fd(r))throw new TypeError("Parameter step must be a number or bigint")}this.start=i?parseFloat(e):0,this.end=a?parseFloat(n):0,this.step=o?parseFloat(r):1}return t.prototype.type="Range",t.prototype.isRange=!0,t.parse=function(e){if(typeof e!="string")return null;var n=e.split(":"),r=n.map(function(a){return parseFloat(a)}),i=r.some(function(a){return isNaN(a)});if(i)return null;switch(r.length){case 2:return new t(r[0],r[1]);case 3:return new t(r[0],r[2],r[1]);default:return null}},t.prototype.clone=function(){return new t(this.start,this.end,this.step)},t.prototype.size=function(){var e=0,n=this.start,r=this.step,i=this.end,a=i-n;return _s(r)===_s(a)?e=Math.ceil(a/r):a===0&&(e=0),isNaN(e)&&(e=0),[e]},t.prototype.min=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start:this.start+(e-1)*this.step},t.prototype.max=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start+(e-1)*this.step:this.start},t.prototype.forEach=function(e){var n=this.start,r=this.step,i=this.end,a=0;if(r>0)for(;n<i;)e(n,[a],this),n+=r,a++;else if(r<0)for(;n>i;)e(n,[a],this),n+=r,a++},t.prototype.map=function(e){var n=[];return this.forEach(function(r,i,a){n[i[0]]=e(r,i,a)}),n},t.prototype.toArray=function(){var e=[];return this.forEach(function(n,r){e[r[0]]=n}),e},t.prototype.valueOf=function(){return this.toArray()},t.prototype.format=function(e){var n=Yu(this.start,e);return this.step!==1&&(n+=":"+Yu(this.step,e)),n+=":"+Yu(this.end,e),n},t.prototype.toString=function(){return this.format()},t.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},t.fromJSON=function(e){return new t(e.start,e.end,e.step)},t},{isClass:!0}),vH="Matrix",gH=[],yH=z(vH,gH,()=>{function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator")}return t.prototype.type="Matrix",t.prototype.isMatrix=!0,t.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},t.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},t.prototype.create=function(e,n){throw new Error("Cannot invoke create on a Matrix interface")},t.prototype.subset=function(e,n,r){throw new Error("Cannot invoke subset on a Matrix interface")},t.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},t.prototype.set=function(e,n,r){throw new Error("Cannot invoke set on a Matrix interface")},t.prototype.resize=function(e,n){throw new Error("Cannot invoke resize on a Matrix interface")},t.prototype.reshape=function(e,n){throw new Error("Cannot invoke reshape on a Matrix interface")},t.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},t.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},t.prototype.map=function(e,n){throw new Error("Cannot invoke map on a Matrix interface")},t.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},t.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},t.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},t.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},t.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},t.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},t},{isClass:!0});function a1(t,e,n){var r=t.constructor,i=new r(2),a="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!qe(n))throw new Error("size must be an integer");if(t.greaterThan(i.pow(n-1).sub(1))||t.lessThan(i.pow(n-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!t.isInteger())throw new Error("Value must be an integer");t.lessThan(0)&&(t=t.add(i.pow(n))),a="i".concat(n)}switch(e){case 2:return"".concat(t.toBinary()).concat(a);case 8:return"".concat(t.toOctal()).concat(a);case 16:return"".concat(t.toHexadecimal()).concat(a);default:throw new Error("Base ".concat(e," not supported "))}}function xH(t,e){if(typeof e=="function")return e(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var{notation:n,precision:r,wordSize:i}=EP(e);switch(n){case"fixed":return wH(t,r);case"exponential":return $S(t,r);case"engineering":return bH(t,r);case"bin":return a1(t,2,i);case"oct":return a1(t,8,i);case"hex":return a1(t,16,i);case"auto":{var a=zS(e==null?void 0:e.lowerExp,-3),o=zS(e==null?void 0:e.upperExp,5);if(t.isZero())return"0";var s,u=t.toSignificantDigits(r),l=u.e;return l>=a&&l<o?s=u.toFixed():s=$S(t,r),s.replace(/((\.\d*?)(0+))($|e)/,function(){var c=arguments[2],f=arguments[4];return c!=="."?c+f:f})}default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function bH(t,e){var n=t.e,r=n%3===0?n:n<0?n-3-n%3:n-n%3,i=t.mul(Math.pow(10,-r)),a=i.toPrecision(e);if(a.includes("e")){var o=t.constructor;a=new o(a).toFixed()}return a+"e"+(n>=0?"+":"")+r.toString()}function $S(t,e){return e!==void 0?t.toExponential(e-1):t.toExponential()}function wH(t,e){return t.toFixed(e)}function zS(t,e){return dt(t)?t:ht(t)?t.toNumber():e}function _H(t,e){var n=t.length-e.length,r=t.length;return t.substring(n,r)===e}function xt(t,e){var n=EH(t,e);return e&&typeof e=="object"&&"truncate"in e&&n.length>e.truncate?n.substring(0,e.truncate-3)+"...":n}function EH(t,e){if(typeof t=="number")return Yu(t,e);if(ht(t))return xH(t,e);if(CH(t))return!e||e.fraction!=="decimal"?"".concat(t.s*t.n,"/").concat(t.d):t.toString();if(Array.isArray(t))return LP(t,e);if(Dr(t))return fc(t);if(typeof t=="function")return t.syntax?String(t.syntax):"function";if(t&&typeof t=="object"){if(typeof t.format=="function")return t.format(e);if(t&&t.toString(e)!=={}.toString())return t.toString(e);var n=Object.keys(t).map(r=>fc(r)+": "+xt(t[r],e));return"{"+n.join(", ")+"}"}return String(t)}function fc(t){for(var e=String(t),n="",r=0;r<e.length;){var i=e.charAt(r);n+=i in US?US[i]:i,r++}return'"'+n+'"'}var US={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function Ki(t){var e=String(t);return e=e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e}function LP(t,e){if(Array.isArray(t)){for(var n="[",r=t.length,i=0;i<r;i++)i!==0&&(n+=", "),n+=LP(t[i],e);return n+="]",n}else return xt(t,e)}function CH(t){return t&&typeof t=="object"&&typeof t.s=="bigint"&&typeof t.n=="bigint"&&typeof t.d=="bigint"||!1}function yb(t,e){if(!Dr(t))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+Qt(t)+", index: 0)");if(!Dr(e))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+Qt(e)+", index: 1)");return t===e?0:t>e?1:-1}function bt(t,e,n){if(!(this instanceof bt))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=n,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}bt.prototype=new RangeError;bt.prototype.constructor=RangeError;bt.prototype.name="DimensionError";bt.prototype.isDimensionError=!0;function Ta(t,e,n){if(!(this instanceof Ta))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=n),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}Ta.prototype=new RangeError;Ta.prototype.constructor=RangeError;Ta.prototype.name="IndexError";Ta.prototype.isIndexError=!0;function ot(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e}function jP(t,e,n){var r,i=t.length;if(i!==e[n])throw new bt(i,e[n]);if(n<e.length-1){var a=n+1;for(r=0;r<i;r++){var o=t[r];if(!Array.isArray(o))throw new bt(e.length-1,e.length,"<");jP(t[r],e,a)}}else for(r=0;r<i;r++)if(Array.isArray(t[r]))throw new bt(e.length+1,e.length,">")}function WS(t,e){var n=e.length===0;if(n){if(Array.isArray(t))throw new bt(t.length,0)}else jP(t,e,0)}function $v(t,e){var n=t.isMatrix?t._size:ot(t),r=e._sourceSize;r.forEach((i,a)=>{if(i!==null&&i!==n[a])throw new bt(i,n[a])})}function Yt(t,e){if(t!==void 0){if(!dt(t)||!qe(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||typeof e=="number"&&t>=e)throw new Ta(t,e)}}function Qc(t){for(var e=0;e<t._dimensions.length;++e){var n=t._dimensions[e];if(n._data&&qt(n._data)){if(n._size[0]===0)return!0}else if(n.isRange){if(n.start===n.end)return!0}else if(Dr(n)&&n.length===0)return!0}return!1}function Zc(t,e,n){if(!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(i){if(!dt(i)||!qe(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+xt(e)+")")}),(dt(t)||ht(t))&&(t=[t]);var r=n!==void 0?n:0;return xb(t,e,0,r),t}function xb(t,e,n,r){var i,a,o=t.length,s=e[n],u=Math.min(o,s);if(t.length=s,n<e.length-1){var l=n+1;for(i=0;i<u;i++)a=t[i],Array.isArray(a)||(a=[a],t[i]=a),xb(a,e,l,r);for(i=u;i<s;i++)a=[],t[i]=a,xb(a,e,l,r)}else{for(i=0;i<u;i++)for(;Array.isArray(t[i]);)t[i]=t[i][0];for(i=u;i<s;i++)t[i]=r}}function q2(t,e){var n=Ft(t,!0),r=n.length;if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new bt(0,r,"!=");e=H2(e,r);var i=$P(e);if(r!==i)throw new bt(i,r,"!=");try{return NH(n,e)}catch(a){throw a instanceof bt?new bt(i,r,"!="):a}}function H2(t,e){var n=$P(t),r=t.slice(),i=-1,a=t.indexOf(i),o=t.indexOf(i,a+1)>=0;if(o)throw new Error("More than one wildcard in sizes");var s=a>=0,u=e%n===0;if(s)if(u)r[a]=-e/n;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-n);return r}function $P(t){return t.reduce((e,n)=>e*n,1)}function NH(t,e){for(var n=t,r,i=e.length-1;i>0;i--){var a=e[i];r=[];for(var o=n.length/a,s=0;s<o;s++)r.push(n.slice(s*a,(s+1)*a));n=r}return n}function zv(t,e){for(var n=ot(t);Array.isArray(t)&&t.length===1;)t=t[0],n.shift();for(var r=n.length;n[r-1]===1;)r--;return r<n.length&&(t=zP(t,r,0),n.length=r),t}function zP(t,e,n){var r,i;if(n<e){var a=n+1;for(r=0,i=t.length;r<i;r++)t[r]=zP(t[r],e,a)}else for(;Array.isArray(t);)t=t[0];return t}function UP(t,e,n,r){var i=r||ot(t);if(n)for(var a=0;a<n;a++)t=[t],i.unshift(1);for(t=WP(t,e,0);i.length<e;)i.push(1);return t}function WP(t,e,n){var r,i;if(Array.isArray(t)){var a=n+1;for(r=0,i=t.length;r<i;r++)t[r]=WP(t[r],e,a)}else for(var o=n;o<e;o++)t=[t];return t}function Ft(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!Array.isArray(t))return t;if(typeof e!="boolean")throw new TypeError("Boolean expected for second argument of flatten");var n=[];return e?i(t):r(t),n;function r(a){for(var o=0;o<a.length;o++){var s=a[o];Array.isArray(s)?r(s):n.push(s)}}function i(a){if(Array.isArray(a[0]))for(var o=0;o<a.length;o++)i(a[o]);else for(var s=0;s<a.length;s++)n.push(a[s])}}function Ps(t,e){return Array.prototype.map.call(t,e)}function VP(t,e){Array.prototype.forEach.call(t,e)}function VS(t,e){if(ot(t).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(t,e)}function qS(t,e){if(ot(t).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(t,n=>e.test(n))}function HS(t,e){return Array.prototype.join.call(t,e)}function Jc(t){if(!Array.isArray(t))throw new TypeError("Array input expected");if(t.length===0)return t;var e=[],n=0;e[0]={value:t[0],identifier:0};for(var r=1;r<t.length;r++)t[r]===t[r-1]?n++:n=0,e.push({value:t[r],identifier:n});return e}function Uv(t){if(!Array.isArray(t))throw new TypeError("Array input expected");if(t.length===0)return t;for(var e=[],n=0;n<t.length;n++)e.push(t[n].value);return e}function k0(t,e){for(var n,r=0,i=0;i<t.length;i++){var a=t[i],o=Array.isArray(a);if(i===0&&o&&(r=a.length),o&&a.length!==r)return;var s=o?k0(a,e):e(a);if(n===void 0)n=s;else if(n!==s)return"mixed"}return n}function qP(t,e,n,r){if(r<n){if(t.length!==e.length)throw new bt(t.length,e.length);for(var i=[],a=0;a<t.length;a++)i[a]=qP(t[a],e[a],n,r+1);return i}else return t.concat(e)}function HP(){var t=Array.prototype.slice.call(arguments,0,-1),e=Array.prototype.slice.call(arguments,-1);if(t.length===1)return t[0];if(t.length>1)return t.slice(1).reduce(function(n,r){return qP(n,r,e,0)},t[0]);throw new Error("Wrong number of arguments in function concat")}function G2(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=e.map(d=>d.length),i=Math.max(...r),a=new Array(i).fill(null),o=0;o<e.length;o++)for(var s=e[o],u=r[o],l=0;l<u;l++){var c=i-u+l;s[l]>a[c]&&(a[c]=s[l])}for(var f=0;f<e.length;f++)GP(e[f],a);return a}function GP(t,e){for(var n=e.length,r=t.length,i=0;i<r;i++){var a=n-r+i;if(t[i]<e[a]&&t[i]>1||t[i]>e[a])throw new Error("shape mismatch: mismatch is found in arg with shape (".concat(t,") not possible to broadcast dimension ").concat(r," with size ").concat(t[i]," to size ").concat(e[a]))}}function $u(t,e){var n=ot(t);if(zo(n,e))return t;GP(n,e);var r=G2(n,e),i=r.length,a=[...Array(i-n.length).fill(1),...n],o=DH(t);n.length<i&&(o=q2(o,a),n=ot(o));for(var s=0;s<i;s++)n[s]<r[s]&&(o=SH(o,r[s],s),n=ot(o));return o}function SH(t,e,n){return HP(...Array(e).fill(t),n)}function K2(t,e){if(!Array.isArray(t))throw new Error("Array expected");var n=ot(t);if(e.length!==n.length)throw new bt(e.length,n.length);for(var r=0;r<e.length;r++)Yt(e[r],n[r]);return e.reduce((i,a)=>i[a],t)}function bb(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(t.length===0)return[];if(n)return a(t);var r=[];return i(t,0);function i(o,s){if(Array.isArray(o)){for(var u=o.length,l=Array(u),c=0;c<u;c++)r[s]=c,l[c]=i(o[c],s+1);return l}else return e(o,r.slice(0,s),t)}function a(o){if(Array.isArray(o)){for(var s=o.length,u=Array(s),l=0;l<s;l++)u[l]=a(o[l]);return u}else return e(o)}}function KP(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(t.length===0)return;if(n){a(t);return}var r=[];i(t,0);function i(o,s){if(Array.isArray(o))for(var u=o.length,l=0;l<u;l++)r[s]=l,i(o[l],s+1);else e(o,r.slice(0,s),t)}function a(o){if(Array.isArray(o))for(var s=o.length,u=0;u<s;u++)a(o[u]);else e(o)}}function DH(t){return jn([],t)}function il(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(Ov.isTypedFunction(t)){var i;if(r)i=1;else{var a=(e.isMatrix?e.size():ot(e)).map(()=>0),o=e.isMatrix?e.get(a):K2(e,a);i=MH(t,o,a,e)}var s;if(e.isMatrix&&e.dataType!=="mixed"&&e.dataType!==void 0){var u=AH(t,i);s=u!==void 0?u:t}else s=t;return i>=1&&i<=3?{isUnary:i===1,fn:function(){for(var c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];return GS(s,f.slice(0,i),n,t.name)}}:{isUnary:!1,fn:function(){for(var c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];return GS(s,f,n,t.name)}}}return r===void 0?{isUnary:TH(t),fn:t}:{isUnary:r,fn:t}}function AH(t,e){var n=[];if(Object.entries(t.signatures).forEach(r=>{var[i,a]=r;i.split(",").length===e&&n.push(a)}),n.length===1)return n[0]}function TH(t){if(t.length!==1)return!1;var e=t.toString();if(/arguments/.test(e))return!1;var n=e.match(/\(.*?\)/);return!/\.\.\./.test(n)}function MH(t,e,n,r){for(var i=[e,n,r],a=3;a>0;a--){var o=i.slice(0,a);if(Ov.resolve(t,o)!==null)return a}}function GS(t,e,n,r){try{return t(...e)}catch(i){IH(i,e,n,r)}}function IH(t,e,n,r){var i;if(t instanceof TypeError&&((i=t.data)===null||i===void 0?void 0:i.category)==="wrongType"){var a=[];throw a.push("value: ".concat(Qt(e[0]))),e.length>=2&&a.push("index: ".concat(Qt(e[1]))),e.length>=3&&a.push("array: ".concat(Qt(e[2]))),new TypeError("Function ".concat(n," cannot apply callback arguments ")+"".concat(r,"(").concat(a.join(", "),") at index ").concat(JSON.stringify(e[1])))}else throw new TypeError("Function ".concat(n," cannot apply callback arguments ")+"to function ".concat(r,": ").concat(t.message))}var RH="DenseMatrix",kH=["Matrix"],FH=z(RH,kH,t=>{var{Matrix:e}=t;function n(c,f){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(f&&!Dr(f))throw new Error("Invalid datatype: "+f);if(Je(c))c.type==="DenseMatrix"?(this._data=ut(c._data),this._size=ut(c._size),this._datatype=f||c._datatype):(this._data=c.toArray(),this._size=c.size(),this._datatype=f||c._datatype);else if(c&&qt(c.data)&&qt(c.size))this._data=c.data,this._size=c.size,WS(this._data,this._size),this._datatype=f||c.datatype;else if(qt(c))this._data=l(c),this._size=ot(this._data),WS(this._data,this._size),this._datatype=f;else{if(c)throw new TypeError("Unsupported type of data ("+Qt(c)+")");this._data=[],this._size=[0],this._datatype=f}}n.prototype=new e,n.prototype.createDenseMatrix=function(c,f){return new n(c,f)},Object.defineProperty(n,"name",{value:"DenseMatrix"}),n.prototype.constructor=n,n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return k0(this._data,Qt)},n.prototype.storage=function(){return"dense"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(c,f){return new n(c,f)},n.prototype.subset=function(c,f,d){switch(arguments.length){case 1:return r(this,c);case 2:case 3:return a(this,c,f,d);default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.get=function(c){return K2(this._data,c)},n.prototype.set=function(c,f,d){if(!qt(c))throw new TypeError("Array expected");if(c.length<this._size.length)throw new bt(c.length,this._size.length,"<");var h,p,m,g=c.map(function(x){return x+1});u(this,g,d);var v=this._data;for(h=0,p=c.length-1;h<p;h++)m=c[h],Yt(m,v.length),v=v[m];return m=c[c.length-1],Yt(m,v.length),v[m]=f,this};function r(c,f){if(!S0(f))throw new TypeError("Invalid index");var d=f.isScalar();if(d)return c.get(f.min());var h=f.size();if(h.length!==c._size.length)throw new bt(h.length,c._size.length);for(var p=f.min(),m=f.max(),g=0,v=c._size.length;g<v;g++)Yt(p[g],c._size[g]),Yt(m[g],c._size[g]);return new n(i(c._data,f,h.length,0),c._datatype)}function i(c,f,d,h){var p=h===d-1,m=f.dimension(h);return p?m.map(function(g){return Yt(g,c.length),c[g]}).valueOf():m.map(function(g){Yt(g,c.length);var v=c[g];return i(v,f,d,h+1)}).valueOf()}function a(c,f,d,h){if(!f||f.isIndex!==!0)throw new TypeError("Invalid index");var p=f.size(),m=f.isScalar(),g;if(Je(d)?(g=d.size(),d=d.valueOf()):g=ot(d),m){if(g.length!==0)throw new TypeError("Scalar expected");c.set(f.min(),d,h)}else{if(!zo(g,p))try{g.length===0?d=$u([d],p):d=$u(d,p),g=ot(d)}catch{}if(p.length<c._size.length)throw new bt(p.length,c._size.length,"<");if(g.length<p.length){for(var v=0,x=0;p[v]===1&&g[v]===1;)v++;for(;p[v]===1;)x++,v++;d=UP(d,p.length,x,g)}if(!zo(p,g))throw new bt(p,g,">");var y=f.max().map(function(_){return _+1});u(c,y,h);var b=p.length,w=0;o(c._data,f,d,b,w)}return c}function o(c,f,d,h,p){var m=p===h-1,g=f.dimension(p);m?g.forEach(function(v,x){Yt(v),c[v]=d[x[0]]}):g.forEach(function(v,x){Yt(v),o(c[v],f,d[x[0]],h,p+1)})}n.prototype.resize=function(c,f,d){if(!na(c))throw new TypeError("Array or Matrix expected");var h=c.valueOf().map(m=>Array.isArray(m)&&m.length===1?m[0]:m),p=d?this.clone():this;return s(p,h,f)};function s(c,f,d){if(f.length===0){for(var h=c._data;qt(h);)h=h[0];return h}return c._size=f.slice(0),c._data=Zc(c._data,c._size,d),c}n.prototype.reshape=function(c,f){var d=f?this.clone():this;d._data=q2(d._data,c);var h=d._size.reduce((p,m)=>p*m);return d._size=H2(c,h),d};function u(c,f,d){for(var h=c._size.slice(0),p=!1;h.length<f.length;)h.push(0),p=!0;for(var m=0,g=f.length;m<g;m++)f[m]>h[m]&&(h[m]=f[m],p=!0);p&&s(c,h,d)}n.prototype.clone=function(){var c=new n({data:ut(this._data),size:ut(this._size),datatype:this._datatype});return c},n.prototype.size=function(){return this._size.slice(0)},n.prototype._forEach=function(c){var f=c.length===2,d=this._size.length-1;if(d<0)return;if(f){g(this._data);return}if(d===0){for(var h=0;h<this._data.length;h++)c(this._data,h,[h]);return}var p=new Array(d+1);m(this._data);function m(v){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(x<d)for(var y=0;y<v.length;y++)p[x]=y,m(v[y],x+1);else for(var b=0;b<v.length;b++)p[x]=b,c(v,b,p.slice())}function g(v){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(x<d)for(var y=0;y<v.length;y++)g(v[y],x+1);else for(var b=0;b<v.length;b++)c(v,b)}},n.prototype.map=function(c){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,d=this,h=new n(d),p=il(c,d._data,"map",f),m=f||p.isUnary?(g,v)=>{g[v]=p.fn(g[v])}:(g,v,x)=>{g[v]=p.fn(g[v],x,d)};return h._forEach(m),h},n.prototype.forEach=function(c){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,d=this,h=il(c,d._data,"map",f),p=f||h.isUnary?(m,g)=>{h.fn(m[g])}:(m,g,v)=>{h.fn(m[g],v,d)};d._forEach(p)},n.prototype[Symbol.iterator]=function*(){var c=this._size.length-1;if(!(c<0)){if(c===0){for(var f=0;f<this._data.length;f++)yield{value:this._data[f],index:[f]};return}var d=[],h=function*(m,g){if(g<c)for(var v=0;v<m.length;v++)d[g]=v,yield*h(m[v],g+1);else for(var x=0;x<m.length;x++)d[g]=x,yield{value:m[x],index:d.slice()}};yield*h(this._data,0)}},n.prototype.rows=function(){var c=[],f=this.size();if(f.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var d=this._data;for(var h of d)c.push(new n([h],this._datatype));return c},n.prototype.columns=function(){var c=this,f=[],d=this.size();if(d.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var h=this._data,p=function(v){var x=h.map(y=>[y[v]]);f.push(new n(x,c._datatype))},m=0;m<d[1];m++)p(m);return f},n.prototype.toArray=function(){return ut(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.format=function(c){return xt(this._data,c)},n.prototype.toString=function(){return xt(this._data)},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(c){if(c){if(ht(c)&&(c=c.toNumber()),!dt(c)||!qe(c))throw new TypeError("The parameter k must be an integer number")}else c=0;for(var f=c>0?c:0,d=c<0?-c:0,h=this._size[0],p=this._size[1],m=Math.min(h-d,p-f),g=[],v=0;v<m;v++)g[v]=this._data[v+d][v+f];return new n({data:g,size:[m],datatype:this._datatype})},n.diagonal=function(c,f,d,h){if(!qt(c))throw new TypeError("Array expected, size parameter");if(c.length!==2)throw new Error("Only two dimensions matrix are supported");if(c=c.map(function(E){if(ht(E)&&(E=E.toNumber()),!dt(E)||!qe(E)||E<1)throw new Error("Size values must be positive integers");return E}),d){if(ht(d)&&(d=d.toNumber()),!dt(d)||!qe(d))throw new TypeError("The parameter k must be an integer number")}else d=0;var p=d>0?d:0,m=d<0?-d:0,g=c[0],v=c[1],x=Math.min(g-m,v-p),y;if(qt(f)){if(f.length!==x)throw new Error("Invalid value array length");y=function(C){return f[C]}}else if(Je(f)){var b=f.size();if(b.length!==1||b[0]!==x)throw new Error("Invalid matrix length");y=function(C){return f.get([C])}}else y=function(){return f};h||(h=ht(y(0))?y(0).mul(0):0);var w=[];if(c.length>0){w=Zc(w,c,h);for(var _=0;_<x;_++)w[_+m][_+p]=y(_)}return new n({data:w,size:[g,v]})},n.fromJSON=function(c){return new n(c)},n.prototype.swapRows=function(c,f){if(!dt(c)||!qe(c)||!dt(f)||!qe(f))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Yt(c,this._size[0]),Yt(f,this._size[0]),n._swapRows(c,f,this._data),this},n._swapRows=function(c,f,d){var h=d[c];d[c]=d[f],d[f]=h};function l(c){return Je(c)?l(c.valueOf()):qt(c)?c.map(l):c}return n},{isClass:!0}),KS="clone",PH=["typed"],OH=z(KS,PH,t=>{var{typed:e}=t;return e(KS,{any:ut})});function YP(t){var e=t.length,n=t[0].length,r,i,a=[];for(i=0;i<n;i++){var o=[];for(r=0;r<e;r++)o.push(t[r][i]);a.push(o)}return a}function Ef(t){for(var e=0;e<t.length;e++)if(na(t[e]))return!0;return!1}function Ks(t,e){Je(t)?t.forEach(n=>e(n),!1,!0):KP(t,e,!0)}function pt(t,e,n){if(!n)return Je(t)?t.map(i=>e(i),!1,!0):bb(t,e,!0);var r=i=>i===0?i:e(i);return Je(t)?t.map(i=>r(i),!1,!0):bb(t,r,!0)}function F0(t,e,n){var r=Array.isArray(t)?ot(t):t.size();if(e<0||e>=r.length)throw new Ta(e,r.length);return Je(t)?t.create(Wv(t.valueOf(),e,n),t.datatype()):Wv(t,e,n)}function Wv(t,e,n){var r,i,a,o;if(e<=0)if(Array.isArray(t[0])){for(o=YP(t),i=[],r=0;r<o.length;r++)i[r]=Wv(o[r],e-1,n);return i}else{for(a=t[0],r=1;r<t.length;r++)a=n(a,t[r]);return a}else{for(i=[],r=0;r<t.length;r++)i[r]=Wv(t[r],e-1,n);return i}}function YS(t,e,n,r,i,a,o,s,u,l,c){var f=t._values,d=t._index,h=t._ptr,p,m,g,v;if(r)for(m=h[e],g=h[e+1],p=m;p<g;p++)v=d[p],n[v]!==a?(n[v]=a,o.push(v),r[v]=f[p]):(r[v]=s(r[v],f[p]),i[v]=a);else for(m=h[e],g=h[e+1],p=m;p<g;p++)v=d[p],n[v]!==a?(n[v]=a,o.push(v)):i[v]=a}var XS="isInteger",BH=["typed"],LH=z(XS,BH,t=>{var{typed:e}=t;return e(XS,{number:qe,BigNumber:function(r){return r.isInt()},bigint:function(r){return!0},Fraction:function(r){return r.d===1n},"Array | Matrix":e.referToSelf(n=>r=>pt(r,n))})}),Ma="number",Cf="number, number";function XP(t){return Math.abs(t)}XP.signature=Ma;function QP(t,e){return t+e}QP.signature=Cf;function ZP(t,e){return t-e}ZP.signature=Cf;function JP(t,e){return t*e}JP.signature=Cf;function eO(t){return-t}eO.signature=Ma;function tO(t){return t}tO.signature=Ma;function yd(t){return zV(t)}yd.signature=Ma;function nO(t){return t*t*t}nO.signature=Ma;function rO(t){return Math.exp(t)}rO.signature=Ma;function iO(t){return UV(t)}iO.signature=Ma;function aO(t,e){if(!qe(t)||!qe(e))throw new Error("Parameters in function lcm must be integer numbers");if(t===0||e===0)return 0;for(var n,r=t*e;e!==0;)n=e,e=t%n,t=n;return Math.abs(r/t)}aO.signature=Cf;function QS(t,e){return e?Math.log(t)/Math.log(e):Math.log(t)}function Vv(t){return jV(t)}Vv.signature=Ma;function wb(t){return LV(t)}wb.signature=Ma;function ZS(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,n=e<0;if(n&&(e=-e),e===0)throw new Error("Root must be non-zero");if(t<0&&Math.abs(e)%2!==1)throw new Error("Root must be odd when a is negative.");if(t===0)return n?1/0:0;if(!isFinite(t))return n?0:t;var r=Math.pow(Math.abs(t),1/e);return r=t<0?-r:r,n?1/r:r}function _b(t){return _s(t)}_b.signature=Ma;function oO(t){return t*t}oO.signature=Ma;function sO(t,e){var n,r,i,a=0,o=1,s=1,u=0;if(!qe(t)||!qe(e))throw new Error("Parameters in function xgcd must be integer numbers");for(;e;)r=Math.floor(t/e),i=t-r*e,n=a,a=o-r*a,o=n,n=s,s=u-r*s,u=n,t=e,e=i;var l;return t<0?l=[-t,-o,-u]:l=[t,t?o:0,u],l}sO.signature=Cf;function uO(t,e){return t*t<1&&e===1/0||t*t>1&&e===-1/0?0:Math.pow(t,e)}uO.signature=Cf;function nd(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!qe(e)||e<0||e>15)throw new Error("Number of decimals in function round must be an integer from 0 to 15 inclusive");return parseFloat(CP(t,e))}var jH="number",Nf="number, number";function lO(t,e){if(!qe(t)||!qe(e))throw new Error("Integers expected in function bitAnd");return t&e}lO.signature=Nf;function cO(t){if(!qe(t))throw new Error("Integer expected in function bitNot");return~t}cO.signature=jH;function fO(t,e){if(!qe(t)||!qe(e))throw new Error("Integers expected in function bitOr");return t|e}fO.signature=Nf;function dO(t,e){if(!qe(t)||!qe(e))throw new Error("Integers expected in function bitXor");return t^e}dO.signature=Nf;function hO(t,e){if(!qe(t)||!qe(e))throw new Error("Integers expected in function leftShift");return t<<e}hO.signature=Nf;function pO(t,e){if(!qe(t)||!qe(e))throw new Error("Integers expected in function rightArithShift");return t>>e}pO.signature=Nf;function mO(t,e){if(!qe(t)||!qe(e))throw new Error("Integers expected in function rightLogShift");return t>>>e}mO.signature=Nf;function No(t,e){if(e<t)return 1;if(e===t)return e;var n=e+t>>1;return No(t,n)*No(n+1,e)}function vO(t,e){if(!qe(t)||t<0)throw new TypeError("Positive integer value expected in function combinations");if(!qe(e)||e<0)throw new TypeError("Positive integer value expected in function combinations");if(e>t)throw new TypeError("k must be less than or equal to n");for(var n=t-e,r=1,i=e<n?n+1:e+1,a=2,o=e<n?e:n,s=i;s<=t;++s)for(r*=s;a<=o&&r%a===0;)r/=a,++a;return a<=o&&(r/=No(a,o)),r}vO.signature="number, number";var $H=Math.PI,zH=2*Math.PI,UH=Math.E,WH=1.618033988749895,VH="number",Y2="number, number";function gO(t){return!t}gO.signature=VH;function Eb(t,e){return!!(t||e)}Eb.signature=Y2;function Cb(t,e){return!!t!=!!e}Cb.signature=Y2;function Nb(t,e){return!!(t&&e)}Nb.signature=Y2;function qv(t){var e;if(qe(t))return t<=0?isFinite(t)?1/0:NaN:t>171?1/0:No(1,t-1);if(t<.5)return Math.PI/(Math.sin(Math.PI*t)*qv(1-t));if(t>=171.35)return 1/0;if(t>85){var n=t*t,r=n*t,i=r*t,a=i*t;return Math.sqrt(2*Math.PI/t)*Math.pow(t/Math.E,t)*(1+1/(12*t)+1/(288*n)-139/(51840*r)-571/(2488320*i)+163879/(209018880*a)+5246819/(75246796800*a*t))}--t,e=Sc[0];for(var o=1;o<Sc.length;++o)e+=Sc[o]/(t+o);var s=t+yO+.5;return Math.sqrt(2*Math.PI)*Math.pow(s,t+.5)*Math.exp(-s)*e}qv.signature="number";var yO=4.7421875,Sc=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],xO=.9189385332046728,qH=5,HH=7,JS=[1.000000000190015,76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18];function Hv(t){if(t<0)return NaN;if(t===0)return 1/0;if(!isFinite(t))return t;if(t<.5)return Math.log(Math.PI/Math.sin(Math.PI*t))-Hv(1-t);t=t-1;for(var e=t+qH+.5,n=JS[0],r=HH-1;r>=1;r--)n+=JS[r]/(t+r);return xO+(t+.5)*Math.log(e)-e+Math.log(n)}Hv.signature="number";var Lr="number";function bO(t){return HV(t)}bO.signature=Lr;function wO(t){return Math.atan(1/t)}wO.signature=Lr;function _O(t){return isFinite(t)?(Math.log((t+1)/t)+Math.log(t/(t-1)))/2:0}_O.signature=Lr;function EO(t){return Math.asin(1/t)}EO.signature=Lr;function CO(t){var e=1/t;return Math.log(e+Math.sqrt(e*e+1))}CO.signature=Lr;function NO(t){return Math.acos(1/t)}NO.signature=Lr;function SO(t){var e=1/t,n=Math.sqrt(e*e-1);return Math.log(n+e)}SO.signature=Lr;function DO(t){return GV(t)}DO.signature=Lr;function AO(t){return KV(t)}AO.signature=Lr;function TO(t){return 1/Math.tan(t)}TO.signature=Lr;function MO(t){var e=Math.exp(2*t);return(e+1)/(e-1)}MO.signature=Lr;function IO(t){return 1/Math.sin(t)}IO.signature=Lr;function RO(t){return t===0?Number.POSITIVE_INFINITY:Math.abs(2/(Math.exp(t)-Math.exp(-t)))*_s(t)}RO.signature=Lr;function kO(t){return 1/Math.cos(t)}kO.signature=Lr;function FO(t){return 2/(Math.exp(t)+Math.exp(-t))}FO.signature=Lr;function PO(t){return XV(t)}PO.signature=Lr;var X2="number";function OO(t){return t<0}OO.signature=X2;function BO(t){return t>0}BO.signature=X2;function LO(t){return Number.isNaN(t)}LO.signature=X2;function ra(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-9,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(n<=0)throw new Error("Relative tolerance must be greater than 0");if(r<0)throw new Error("Absolute tolerance must be at least 0");return t.isNaN()||e.isNaN()?!1:!t.isFinite()||!e.isFinite()?t.eq(e):t.eq(e)?!0:t.minus(e).abs().lte(t.constructor.max(t.constructor.max(t.abs(),e.abs()).mul(n),r))}var eD="isNegative",GH=["typed","config"],KH=z(eD,GH,t=>{var{typed:e,config:n}=t;return e(eD,{number:r=>yr(r,0,n.relTol,n.absTol)?!1:OO(r),BigNumber:r=>ra(r,new r.constructor(0),n.relTol,n.absTol)?!1:r.isNeg()&&!r.isZero()&&!r.isNaN(),bigint:r=>r<0n,Fraction:r=>r.s<0n,Unit:e.referToSelf(r=>i=>e.find(r,i.valueType())(i.value)),"Array | Matrix":e.referToSelf(r=>i=>pt(i,r))})}),tD="isNumeric",YH=["typed"],XH=z(tD,YH,t=>{var{typed:e}=t;return e(tD,{"number | BigNumber | bigint | Fraction | boolean":()=>!0,"Complex | Unit | string | null | undefined | Node":()=>!1,"Array | Matrix":e.referToSelf(n=>r=>pt(r,n))})}),nD="hasNumericValue",QH=["typed","isNumeric"],ZH=z(nD,QH,t=>{var{typed:e,isNumeric:n}=t;return e(nD,{boolean:()=>!0,string:function(i){return i.trim().length>0&&!isNaN(Number(i))},any:function(i){return n(i)}})}),rD="isPositive",JH=["typed","config"],eG=z(rD,JH,t=>{var{typed:e,config:n}=t;return e(rD,{number:r=>yr(r,0,n.relTol,n.absTol)?!1:BO(r),BigNumber:r=>ra(r,new r.constructor(0),n.relTol,n.absTol)?!1:!r.isNeg()&&!r.isZero()&&!r.isNaN(),bigint:r=>r>0n,Fraction:r=>r.s>0n&&r.n>0n,Unit:e.referToSelf(r=>i=>e.find(r,i.valueType())(i.value)),"Array | Matrix":e.referToSelf(r=>i=>pt(i,r))})}),iD="isZero",tG=["typed","equalScalar"],nG=z(iD,tG,t=>{var{typed:e,equalScalar:n}=t;return e(iD,{"number | BigNumber | Complex | Fraction":r=>n(r,0),bigint:r=>r===0n,Unit:e.referToSelf(r=>i=>e.find(r,i.valueType())(i.value)),"Array | Matrix":e.referToSelf(r=>i=>pt(i,r))})}),aD="isNaN",rG=["typed"],iG=z(aD,rG,t=>{var{typed:e}=t;return e(aD,{number:LO,BigNumber:function(r){return r.isNaN()},bigint:function(r){return!1},Fraction:function(r){return!1},Complex:function(r){return r.isNaN()},Unit:function(r){return Number.isNaN(r.value)},"Array | Matrix":e.referToSelf(n=>r=>pt(r,n))})}),oD="typeOf",aG=["typed"],oG=z(oD,aG,t=>{var{typed:e}=t;return e(oD,{any:Qt})});function sG(t,e,n,r){return yr(t.re,e.re,n,r)&&yr(t.im,e.im,n,r)}var Sf=z("compareUnits",["typed"],t=>{var{typed:e}=t;return{"Unit, Unit":e.referToSelf(n=>(r,i)=>{if(!r.equalBase(i))throw new Error("Cannot compare units with different base");return e.find(n,[r.valueType(),i.valueType()])(r.value,i.value)})}}),Gv="equalScalar",uG=["typed","config"],lG=z(Gv,uG,t=>{var{typed:e,config:n}=t,r=Sf({typed:e});return e(Gv,{"boolean, boolean":function(a,o){return a===o},"number, number":function(a,o){return yr(a,o,n.relTol,n.absTol)},"BigNumber, BigNumber":function(a,o){return a.eq(o)||ra(a,o,n.relTol,n.absTol)},"bigint, bigint":function(a,o){return a===o},"Fraction, Fraction":function(a,o){return a.equals(o)},"Complex, Complex":function(a,o){return sG(a,o,n.relTol,n.absTol)}},r)});z(Gv,["typed","config"],t=>{var{typed:e,config:n}=t;return e(Gv,{"number, number":function(i,a){return yr(i,a,n.relTol,n.absTol)}})});var cG="SparseMatrix",fG=["typed","equalScalar","Matrix"],dG=z(cG,fG,t=>{var{typed:e,equalScalar:n,Matrix:r}=t;function i(m,g){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(g&&!Dr(g))throw new Error("Invalid datatype: "+g);if(Je(m))a(this,m,g);else if(m&&qt(m.index)&&qt(m.ptr)&&qt(m.size))this._values=m.values,this._index=m.index,this._ptr=m.ptr,this._size=m.size,this._datatype=g||m.datatype;else if(qt(m))o(this,m,g);else{if(m)throw new TypeError("Unsupported type of data ("+Qt(m)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=g}}function a(m,g,v){g.type==="SparseMatrix"?(m._values=g._values?ut(g._values):void 0,m._index=ut(g._index),m._ptr=ut(g._ptr),m._size=ut(g._size),m._datatype=v||g._datatype):o(m,g.valueOf(),v||g._datatype)}function o(m,g,v){m._values=[],m._index=[],m._ptr=[],m._datatype=v;var x=g.length,y=0,b=n,w=0;if(Dr(v)&&(b=e.find(n,[v,v])||n,w=e.convert(0,v)),x>0){var _=0;do{m._ptr.push(m._index.length);for(var E=0;E<x;E++){var C=g[E];if(qt(C)){if(_===0&&y<C.length&&(y=C.length),_<C.length){var N=C[_];b(N,w)||(m._values.push(N),m._index.push(E))}}else _===0&&y<1&&(y=1),b(C,w)||(m._values.push(C),m._index.push(E))}_++}while(_<y)}m._ptr.push(m._index.length),m._size=[x,y]}i.prototype=new r,i.prototype.createSparseMatrix=function(m,g){return new i(m,g)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return k0(this._values,Qt)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(m,g){return new i(m,g)},i.prototype.density=function(){var m=this._size[0],g=this._size[1];return m!==0&&g!==0?this._index.length/(m*g):0},i.prototype.subset=function(m,g,v){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return s(this,m);case 2:case 3:return u(this,m,g,v);default:throw new SyntaxError("Wrong number of arguments")}};function s(m,g){if(!S0(g))throw new TypeError("Invalid index");var v=g.isScalar();if(v)return m.get(g.min());var x=g.size();if(x.length!==m._size.length)throw new bt(x.length,m._size.length);var y,b,w,_,E=g.min(),C=g.max();for(y=0,b=m._size.length;y<b;y++)Yt(E[y],m._size[y]),Yt(C[y],m._size[y]);var N=m._values,D=m._index,A=m._ptr,T=g.dimension(0),k=g.dimension(1),F=[],O=[];T.forEach(function(R,j){O[R]=j[0],F[R]=!0});var I=N?[]:void 0,M=[],B=[];return k.forEach(function(R){for(B.push(M.length),w=A[R],_=A[R+1];w<_;w++)y=D[w],F[y]===!0&&(M.push(O[y]),I&&I.push(N[w]))}),B.push(M.length),new i({values:I,index:M,ptr:B,size:x,datatype:m._datatype})}function u(m,g,v,x){if(!g||g.isIndex!==!0)throw new TypeError("Invalid index");var y=g.size(),b=g.isScalar(),w;if(Je(v)?(w=v.size(),v=v.toArray()):w=ot(v),b){if(w.length!==0)throw new TypeError("Scalar expected");m.set(g.min(),v,x)}else{if(y.length!==1&&y.length!==2)throw new bt(y.length,m._size.length,"<");if(w.length<y.length){for(var _=0,E=0;y[_]===1&&w[_]===1;)_++;for(;y[_]===1;)E++,_++;v=UP(v,y.length,E,w)}if(!zo(y,w))throw new bt(y,w,">");if(y.length===1){var C=g.dimension(0);C.forEach(function(A,T){Yt(A),m.set([A,0],v[T[0]],x)})}else{var N=g.dimension(0),D=g.dimension(1);N.forEach(function(A,T){Yt(A),D.forEach(function(k,F){Yt(k),m.set([A,k],v[T[0]][F[0]],x)})})}}return m}i.prototype.get=function(m){if(!qt(m))throw new TypeError("Array expected");if(m.length!==this._size.length)throw new bt(m.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var g=m[0],v=m[1];Yt(g,this._size[0]),Yt(v,this._size[1]);var x=l(g,this._ptr[v],this._ptr[v+1],this._index);return x<this._ptr[v+1]&&this._index[x]===g?this._values[x]:0},i.prototype.set=function(m,g,v){if(!qt(m))throw new TypeError("Array expected");if(m.length!==this._size.length)throw new bt(m.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var x=m[0],y=m[1],b=this._size[0],w=this._size[1],_=n,E=0;Dr(this._datatype)&&(_=e.find(n,[this._datatype,this._datatype])||n,E=e.convert(0,this._datatype)),(x>b-1||y>w-1)&&(d(this,Math.max(x+1,b),Math.max(y+1,w),v),b=this._size[0],w=this._size[1]),Yt(x,b),Yt(y,w);var C=l(x,this._ptr[y],this._ptr[y+1],this._index);return C<this._ptr[y+1]&&this._index[C]===x?_(g,E)?c(C,y,this._values,this._index,this._ptr):this._values[C]=g:_(g,E)||f(C,x,y,g,this._values,this._index,this._ptr),this};function l(m,g,v,x){if(v-g===0)return v;for(var y=g;y<v;y++)if(x[y]===m)return y;return g}function c(m,g,v,x,y){v.splice(m,1),x.splice(m,1);for(var b=g+1;b<y.length;b++)y[b]--}function f(m,g,v,x,y,b,w){y.splice(m,0,x),b.splice(m,0,g);for(var _=v+1;_<w.length;_++)w[_]++}i.prototype.resize=function(m,g,v){if(!na(m))throw new TypeError("Array or Matrix expected");var x=m.valueOf().map(b=>Array.isArray(b)&&b.length===1?b[0]:b);if(x.length!==2)throw new Error("Only two dimensions matrix are supported");x.forEach(function(b){if(!dt(b)||!qe(b)||b<0)throw new TypeError("Invalid size, must contain positive integers (size: "+xt(x)+")")});var y=v?this.clone():this;return d(y,x[0],x[1],g)};function d(m,g,v,x){var y=x||0,b=n,w=0;Dr(m._datatype)&&(b=e.find(n,[m._datatype,m._datatype])||n,w=e.convert(0,m._datatype),y=e.convert(y,m._datatype));var _=!b(y,w),E=m._size[0],C=m._size[1],N,D,A;if(v>C){for(D=C;D<v;D++)if(m._ptr[D]=m._values.length,_)for(N=0;N<E;N++)m._values.push(y),m._index.push(N);m._ptr[v]=m._values.length}else v<C&&(m._ptr.splice(v+1,C-v),m._values.splice(m._ptr[v],m._values.length),m._index.splice(m._ptr[v],m._index.length));if(C=v,g>E){if(_){var T=0;for(D=0;D<C;D++){m._ptr[D]=m._ptr[D]+T,A=m._ptr[D+1]+T;var k=0;for(N=E;N<g;N++,k++)m._values.splice(A+k,0,y),m._index.splice(A+k,0,N),T++}m._ptr[C]=m._values.length}}else if(g<E){var F=0;for(D=0;D<C;D++){m._ptr[D]=m._ptr[D]-F;var O=m._ptr[D],I=m._ptr[D+1]-F;for(A=O;A<I;A++)N=m._index[A],N>g-1&&(m._values.splice(A,1),m._index.splice(A,1),F++)}m._ptr[D]=m._values.length}return m._size[0]=g,m._size[1]=v,m}i.prototype.reshape=function(m,g){if(!qt(m))throw new TypeError("Array expected");if(m.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");m.forEach(function(R){if(!dt(R)||!qe(R)||R<=-2||R===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+xt(m)+")")});var v=this._size[0]*this._size[1];m=H2(m,v);var x=m[0]*m[1];if(v!==x)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var y=g?this.clone():this;if(this._size[0]===m[0]&&this._size[1]===m[1])return y;for(var b=[],w=0;w<y._ptr.length;w++)for(var _=0;_<y._ptr[w+1]-y._ptr[w];_++)b.push(w);for(var E=y._values.slice(),C=y._index.slice(),N=0;N<y._index.length;N++){var D=C[N],A=b[N],T=D*y._size[1]+A;b[N]=T%m[1],C[N]=Math.floor(T/m[1])}y._values.length=0,y._index.length=0,y._ptr.length=m[1]+1,y._size=m.slice();for(var k=0;k<y._ptr.length;k++)y._ptr[k]=0;for(var F=0;F<E.length;F++){var O=C[F],I=b[F],M=E[F],B=l(O,y._ptr[I],y._ptr[I+1],y._index);f(B,O,I,M,y._values,y._index,y._ptr)}return y},i.prototype.clone=function(){var m=new i({values:this._values?ut(this._values):void 0,index:ut(this._index),ptr:ut(this._ptr),size:ut(this._size),datatype:this._datatype});return m},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(m,g){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var v=this,x=this._size[0],y=this._size[1],b=il(m,v,"map"),w=function(E,C,N){return b.fn(E,[C,N],v)};return h(this,0,x-1,0,y-1,w,g)};function h(m,g,v,x,y,b,w){var _=[],E=[],C=[],N=n,D=0;Dr(m._datatype)&&(N=e.find(n,[m._datatype,m._datatype])||n,D=e.convert(0,m._datatype));for(var A=function(L,ne,fe){var te=b(L,ne,fe);N(te,D)||(_.push(te),E.push(ne))},T=x;T<=y;T++){C.push(_.length);var k=m._ptr[T],F=m._ptr[T+1];if(w)for(var O=k;O<F;O++){var I=m._index[O];I>=g&&I<=v&&A(m._values[O],I-g,T-x)}else{for(var M={},B=k;B<F;B++){var R=m._index[B];M[R]=m._values[B]}for(var j=g;j<=v;j++){var K=j in M?M[j]:0;A(K,j-g,T-x)}}}return C.push(_.length),new i({values:_,index:E,ptr:C,size:[v-g+1,y-x+1]})}i.prototype.forEach=function(m,g){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var v=this,x=this._size[0],y=this._size[1],b=il(m,v,"forEach"),w=0;w<y;w++){var _=this._ptr[w],E=this._ptr[w+1];if(g)for(var C=_;C<E;C++){var N=this._index[C];b.fn(this._values[C],[N,w],v)}else{for(var D={},A=_;A<E;A++){var T=this._index[A];D[T]=this._values[A]}for(var k=0;k<x;k++){var F=k in D?D[k]:0;b.fn(F,[k,w],v)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var m=this._size[1],g=0;g<m;g++)for(var v=this._ptr[g],x=this._ptr[g+1],y=v;y<x;y++){var b=this._index[y];yield{value:this._values[y],index:[b,g]}}},i.prototype.toArray=function(){return p(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return p(this._values,this._index,this._ptr,this._size,!1)};function p(m,g,v,x,y){var b=x[0],w=x[1],_=[],E,C;for(E=0;E<b;E++)for(_[E]=[],C=0;C<w;C++)_[E][C]=0;for(C=0;C<w;C++)for(var N=v[C],D=v[C+1],A=N;A<D;A++)E=g[A],_[E][C]=m?y?ut(m[A]):m[A]:1;return _}return i.prototype.format=function(m){for(var g=this._size[0],v=this._size[1],x=this.density(),y="Sparse Matrix ["+xt(g,m)+" x "+xt(v,m)+"] density: "+xt(x,m)+`
`,b=0;b<v;b++)for(var w=this._ptr[b],_=this._ptr[b+1],E=w;E<_;E++){var C=this._index[E];y+=`
    (`+xt(C,m)+", "+xt(b,m)+") ==> "+(this._values?xt(this._values[E],m):"X")}return y},i.prototype.toString=function(){return xt(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(m){if(m){if(ht(m)&&(m=m.toNumber()),!dt(m)||!qe(m))throw new TypeError("The parameter k must be an integer number")}else m=0;var g=m>0?m:0,v=m<0?-m:0,x=this._size[0],y=this._size[1],b=Math.min(x-v,y-g),w=[],_=[],E=[];E[0]=0;for(var C=g;C<y&&w.length<b;C++)for(var N=this._ptr[C],D=this._ptr[C+1],A=N;A<D;A++){var T=this._index[A];if(T===C-g+v){w.push(this._values[A]),_[w.length-1]=T-v;break}}return E.push(w.length),new i({values:w,index:_,ptr:E,size:[b,1]})},i.fromJSON=function(m){return new i(m)},i.diagonal=function(m,g,v,x,y){if(!qt(m))throw new TypeError("Array expected, size parameter");if(m.length!==2)throw new Error("Only two dimensions matrix are supported");if(m=m.map(function(R){if(ht(R)&&(R=R.toNumber()),!dt(R)||!qe(R)||R<1)throw new Error("Size values must be positive integers");return R}),v){if(ht(v)&&(v=v.toNumber()),!dt(v)||!qe(v))throw new TypeError("The parameter k must be an integer number")}else v=0;var b=n,w=0;Dr(y)&&(b=e.find(n,[y,y])||n,w=e.convert(0,y));var _=v>0?v:0,E=v<0?-v:0,C=m[0],N=m[1],D=Math.min(C-E,N-_),A;if(qt(g)){if(g.length!==D)throw new Error("Invalid value array length");A=function(j){return g[j]}}else if(Je(g)){var T=g.size();if(T.length!==1||T[0]!==D)throw new Error("Invalid matrix length");A=function(j){return g.get([j])}}else A=function(){return g};for(var k=[],F=[],O=[],I=0;I<N;I++){O.push(k.length);var M=I-_;if(M>=0&&M<D){var B=A(M);b(B,w)||(F.push(M+E),k.push(B))}}return O.push(k.length),new i({values:k,index:F,ptr:O,size:[C,N]})},i.prototype.swapRows=function(m,g){if(!dt(m)||!qe(m)||!dt(g)||!qe(g))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Yt(m,this._size[0]),Yt(g,this._size[0]),i._swapRows(m,g,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(m,g,v,x,y){for(var b=x[m],w=x[m+1],_=b;_<w;_++)y(v[_],g[_])},i._swapRows=function(m,g,v,x,y,b){for(var w=0;w<v;w++){var _=b[w],E=b[w+1],C=l(m,_,E,y),N=l(g,_,E,y);if(C<E&&N<E&&y[C]===m&&y[N]===g){if(x){var D=x[C];x[C]=x[N],x[N]=D}continue}if(C<E&&y[C]===m&&(N>=E||y[N]!==g)){var A=x?x[C]:void 0;y.splice(N,0,g),x&&x.splice(N,0,A),y.splice(N<=C?C+1:C,1),x&&x.splice(N<=C?C+1:C,1);continue}if(N<E&&y[N]===g&&(C>=E||y[C]!==m)){var T=x?x[N]:void 0;y.splice(C,0,m),x&&x.splice(C,0,T),y.splice(C<=N?N+1:N,1),x&&x.splice(C<=N?N+1:N,1)}}},i},{isClass:!0}),hG="number",pG=["typed"];function mG(t){var e=t.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(e){var n={"0b":2,"0o":8,"0x":16}[e[1]],r=e[2],i=e[3];return{input:t,radix:n,integerPart:r,fractionalPart:i}}else return null}function vG(t){for(var e=parseInt(t.integerPart,t.radix),n=0,r=0;r<t.fractionalPart.length;r++){var i=parseInt(t.fractionalPart[r],t.radix);n+=i/Math.pow(t.radix,r+1)}var a=e+n;if(isNaN(a))throw new SyntaxError('String "'+t.input+'" is not a valid number');return a}var gG=z(hG,pG,t=>{var{typed:e}=t,n=e("number",{"":function(){return 0},number:function(i){return i},string:function(i){if(i==="NaN")return NaN;var a=mG(i);if(a)return vG(a);var o=0,s=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);s&&(o=Number(s[2]),i=s[1]);var u=Number(i);if(isNaN(u))throw new SyntaxError('String "'+i+'" is not a valid number');if(s){if(u>2**o-1)throw new SyntaxError('String "'.concat(i,'" is out of range'));u>=2**(o-1)&&(u=u-2**o)}return u},BigNumber:function(i){return i.toNumber()},bigint:function(i){return Number(i)},Fraction:function(i){return i.valueOf()},Unit:e.referToSelf(r=>i=>{var a=i.clone();return a.value=r(i.value),a}),null:function(i){return 0},"Unit, string | Unit":function(i,a){return i.toNumber(a)},"Array | Matrix":e.referToSelf(r=>i=>pt(i,r))});return n.fromJSON=function(r){return parseFloat(r.value)},n}),yG="bigint",xG=["typed"],bG=z(yG,xG,t=>{var{typed:e}=t,n=e("bigint",{"":function(){return 0n},bigint:function(i){return i},number:function(i){return BigInt(i.toFixed())},BigNumber:function(i){return BigInt(i.round().toString())},Fraction:function(i){return BigInt(i.valueOf().toFixed())},"string | boolean":function(i){return BigInt(i)},null:function(i){return 0n},"Array | Matrix":e.referToSelf(r=>i=>pt(i,r))});return n.fromJSON=function(r){return BigInt(r.value)},n}),sD="string",wG=["typed"],_G=z(sD,wG,t=>{var{typed:e}=t;return e(sD,{"":function(){return""},number:Yu,null:function(r){return"null"},boolean:function(r){return r+""},string:function(r){return r},"Array | Matrix":e.referToSelf(n=>r=>pt(r,n)),any:function(r){return String(r)}})}),uD="boolean",EG=["typed"],CG=z(uD,EG,t=>{var{typed:e}=t;return e(uD,{"":function(){return!1},boolean:function(r){return r},number:function(r){return!!r},null:function(r){return!1},BigNumber:function(r){return!r.isZero()},string:function(r){var i=r.toLowerCase();if(i==="true")return!0;if(i==="false")return!1;var a=Number(r);if(r!==""&&!isNaN(a))return!!a;throw new Error('Cannot convert "'+r+'" to a boolean')},"Array | Matrix":e.referToSelf(n=>r=>pt(r,n))})}),NG="bignumber",SG=["typed","BigNumber"],DG=z(NG,SG,t=>{var{typed:e,BigNumber:n}=t;return e("bignumber",{"":function(){return new n(0)},number:function(i){return new n(i+"")},string:function(i){var a=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(a){var o=a[2],s=n(a[1]),u=new n(2).pow(Number(o));if(s.gt(u.sub(1)))throw new SyntaxError('String "'.concat(i,'" is out of range'));var l=new n(2).pow(Number(o)-1);return s.gte(l)?s.sub(u):s}return new n(i)},BigNumber:function(i){return i},bigint:function(i){return new n(i.toString())},Unit:e.referToSelf(r=>i=>{var a=i.clone();return a.value=r(i.value),a}),Fraction:function(i){return new n(String(i.n)).div(String(i.d)).times(String(i.s))},null:function(i){return new n(0)},"Array | Matrix":e.referToSelf(r=>i=>pt(i,r))})}),AG="complex",TG=["typed","Complex"],MG=z(AG,TG,t=>{var{typed:e,Complex:n}=t;return e("complex",{"":function(){return n.ZERO},number:function(i){return new n(i,0)},"number, number":function(i,a){return new n(i,a)},"BigNumber, BigNumber":function(i,a){return new n(i.toNumber(),a.toNumber())},Fraction:function(i){return new n(i.valueOf(),0)},Complex:function(i){return i.clone()},string:function(i){return n(i)},null:function(i){return n(0)},Object:function(i){if("re"in i&&"im"in i)return new n(i.re,i.im);if("r"in i&&"phi"in i||"abs"in i&&"arg"in i)return new n(i);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":e.referToSelf(r=>i=>pt(i,r))})}),IG="fraction",RG=["typed","Fraction"],kG=z(IG,RG,t=>{var{typed:e,Fraction:n}=t;return e("fraction",{number:function(i){if(!isFinite(i)||isNaN(i))throw new Error(i+" cannot be represented as a fraction");return new n(i)},string:function(i){return new n(i)},"number, number":function(i,a){return new n(i,a)},"bigint, bigint":function(i,a){return new n(i,a)},null:function(i){return new n(0)},BigNumber:function(i){return new n(i.toString())},bigint:function(i){return new n(i.toString())},Fraction:function(i){return i},Unit:e.referToSelf(r=>i=>{var a=i.clone();return a.value=r(i.value),a}),Object:function(i){return new n(i)},"Array | Matrix":e.referToSelf(r=>i=>pt(i,r))})}),lD="matrix",FG=["typed","Matrix","DenseMatrix","SparseMatrix"],PG=z(lD,FG,t=>{var{typed:e,Matrix:n,DenseMatrix:r,SparseMatrix:i}=t;return e(lD,{"":function(){return a([])},string:function(s){return a([],s)},"string, string":function(s,u){return a([],s,u)},Array:function(s){return a(s)},Matrix:function(s){return a(s,s.storage())},"Array | Matrix, string":a,"Array | Matrix, string, string":a});function a(o,s,u){if(s==="dense"||s==="default"||s===void 0)return new r(o,u);if(s==="sparse")return new i(o,u);throw new TypeError("Unknown matrix type "+JSON.stringify(s)+".")}}),cD="matrixFromFunction",OG=["typed","matrix","isZero"],BG=z(cD,OG,t=>{var{typed:e,matrix:n,isZero:r}=t;return e(cD,{"Array | Matrix, function, string, string":function(o,s,u,l){return i(o,s,u,l)},"Array | Matrix, function, string":function(o,s,u){return i(o,s,u)},"Matrix, function":function(o,s){return i(o,s,"dense")},"Array, function":function(o,s){return i(o,s,"dense").toArray()},"Array | Matrix, string, function":function(o,s,u){return i(o,u,s)},"Array | Matrix, string, string, function":function(o,s,u,l){return i(o,l,s,u)}});function i(a,o,s,u){var l;return u!==void 0?l=n(s,u):l=n(s),l.resize(a),l.forEach(function(c,f){var d=o(f);r(d)||l.set(f,d)}),l}}),fD="matrixFromRows",LG=["typed","matrix","flatten","size"],jG=z(fD,LG,t=>{var{typed:e,matrix:n,flatten:r,size:i}=t;return e(fD,{"...Array":function(u){return a(u)},"...Matrix":function(u){return n(a(u.map(l=>l.toArray())))}});function a(s){if(s.length===0)throw new TypeError("At least one row is needed to construct a matrix.");var u=o(s[0]),l=[];for(var c of s){var f=o(c);if(f!==u)throw new TypeError("The vectors had different length: "+(u|0)+"  "+(f|0));l.push(r(c))}return l}function o(s){var u=i(s);if(u.length===1)return u[0];if(u.length===2){if(u[0]===1)return u[1];if(u[1]===1)return u[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),dD="matrixFromColumns",$G=["typed","matrix","flatten","size"],zG=z(dD,$G,t=>{var{typed:e,matrix:n,flatten:r,size:i}=t;return e(dD,{"...Array":function(u){return a(u)},"...Matrix":function(u){return n(a(u.map(l=>l.toArray())))}});function a(s){if(s.length===0)throw new TypeError("At least one column is needed to construct a matrix.");for(var u=o(s[0]),l=[],c=0;c<u;c++)l[c]=[];for(var f of s){var d=o(f);if(d!==u)throw new TypeError("The vectors had different length: "+(u|0)+"  "+(d|0));for(var h=r(f),p=0;p<u;p++)l[p].push(h[p])}return l}function o(s){var u=i(s);if(u.length===1)return u[0];if(u.length===2){if(u[0]===1)return u[1];if(u[1]===1)return u[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),hD="splitUnit",UG=["typed"],WG=z(hD,UG,t=>{var{typed:e}=t;return e(hD,{"Unit, Array":function(r,i){return r.splitUnit(i)}})}),pD="unaryMinus",VG=["typed"],qG=z(pD,VG,t=>{var{typed:e}=t;return e(pD,{number:eO,"Complex | BigNumber | Fraction":n=>n.neg(),bigint:n=>-n,Unit:e.referToSelf(n=>r=>{var i=r.clone();return i.value=e.find(n,i.valueType())(r.value),i}),"Array | Matrix":e.referToSelf(n=>r=>pt(r,n,!0))})}),mD="unaryPlus",HG=["typed","config","numeric"],GG=z(mD,HG,t=>{var{typed:e,config:n,numeric:r}=t;return e(mD,{number:tO,Complex:function(a){return a},BigNumber:function(a){return a},bigint:function(a){return a},Fraction:function(a){return a},Unit:function(a){return a.clone()},"Array | Matrix":e.referToSelf(i=>a=>pt(a,i,!0)),boolean:function(a){return r(a?1:0,n.number)},string:function(a){return r(a,au(a,n))}})}),vD="abs",KG=["typed"],YG=z(vD,KG,t=>{var{typed:e}=t;return e(vD,{number:XP,"Complex | BigNumber | Fraction | Unit":n=>n.abs(),bigint:n=>n<0n?-n:n,"Array | Matrix":e.referToSelf(n=>r=>pt(r,n,!0))})}),gD="mapSlices",XG=["typed","isInteger"],Sb=z(gD,XG,t=>{var{typed:e,isInteger:n}=t;return e(gD,{"Array | Matrix, number | BigNumber, function":function(i,a,o){if(!n(a))throw new TypeError("Integer number expected for dimension");var s=Array.isArray(i)?ot(i):i.size();if(a<0||a>=s.length)throw new Ta(a,s.length);return Je(i)?i.create(Kv(i.valueOf(),a,o),i.datatype()):Kv(i,a,o)}})},{formerly:"apply"});function Kv(t,e,n){var r,i,a;if(e<=0)if(Array.isArray(t[0])){for(a=QG(t),i=[],r=0;r<a.length;r++)i[r]=Kv(a[r],e-1,n);return i}else return n(t);else{for(i=[],r=0;r<t.length;r++)i[r]=Kv(t[r],e-1,n);return i}}function QG(t){var e=t.length,n=t[0].length,r,i,a=[];for(i=0;i<n;i++){var o=[];for(r=0;r<e;r++)o.push(t[r][i]);a.push(o)}return a}var yD="addScalar",ZG=["typed"],JG=z(yD,ZG,t=>{var{typed:e}=t;return e(yD,{"number, number":QP,"Complex, Complex":function(r,i){return r.add(i)},"BigNumber, BigNumber":function(r,i){return r.plus(i)},"bigint, bigint":function(r,i){return r+i},"Fraction, Fraction":function(r,i){return r.add(i)},"Unit, Unit":e.referToSelf(n=>(r,i)=>{if(r.value===null||r.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!r.equalBase(i))throw new Error("Units do not match");var a=r.clone();return a.value=e.find(n,[a.valueType(),i.valueType()])(a.value,i.value),a.fixPrefix=!1,a})})}),xD="subtractScalar",eK=["typed"],tK=z(xD,eK,t=>{var{typed:e}=t;return e(xD,{"number, number":ZP,"Complex, Complex":function(r,i){return r.sub(i)},"BigNumber, BigNumber":function(r,i){return r.minus(i)},"bigint, bigint":function(r,i){return r-i},"Fraction, Fraction":function(r,i){return r.sub(i)},"Unit, Unit":e.referToSelf(n=>(r,i)=>{if(r.value===null||r.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!r.equalBase(i))throw new Error("Units do not match");var a=r.clone();return a.value=e.find(n,[a.valueType(),i.valueType()])(a.value,i.value),a.fixPrefix=!1,a})})}),bD="cbrt",nK=["config","typed","isNegative","unaryMinus","matrix","Complex","BigNumber","Fraction"],rK=z(bD,nK,t=>{var{config:e,typed:n,isNegative:r,unaryMinus:i,matrix:a,Complex:o,BigNumber:s,Fraction:u}=t;return n(bD,{number:yd,Complex:l,"Complex, boolean":l,BigNumber:function(d){return d.cbrt()},Unit:c});function l(f,d){var h=f.arg()/3,p=f.abs(),m=new o(yd(p),0).mul(new o(0,h).exp());if(d){var g=[m,new o(yd(p),0).mul(new o(0,h+Math.PI*2/3).exp()),new o(yd(p),0).mul(new o(0,h-Math.PI*2/3).exp())];return e.matrix==="Array"?g:a(g)}else return m}function c(f){if(f.value&&Mo(f.value)){var d=f.clone();return d.value=1,d=d.pow(1/3),d.value=l(f.value),d}else{var h=r(f.value);h&&(f.value=i(f.value));var p;ht(f.value)?p=new s(1).div(3):Yh(f.value)?p=new u(1,3):p=1/3;var m=f.pow(p);return h&&(m.value=i(m.value)),m}}}),iK="matAlgo11xS0s",aK=["typed","equalScalar"],xr=z(iK,aK,t=>{var{typed:e,equalScalar:n}=t;return function(i,a,o,s){var u=i._values,l=i._index,c=i._ptr,f=i._size,d=i._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=f[0],p=f[1],m,g=n,v=0,x=o;typeof d=="string"&&(m=d,g=e.find(n,[m,m]),v=e.convert(0,m),a=e.convert(a,m),x=e.find(o,[m,m]));for(var y=[],b=[],w=[],_=0;_<p;_++){w[_]=b.length;for(var E=c[_],C=c[_+1],N=E;N<C;N++){var D=l[N],A=s?x(a,u[N]):x(u[N],a);g(A,v)||(b.push(D),y.push(A))}}return w[p]=b.length,i.createSparseMatrix({values:y,index:b,ptr:w,size:[h,p],datatype:m})}}),oK="matAlgo12xSfs",sK=["typed","DenseMatrix"],Hn=z(oK,sK,t=>{var{typed:e,DenseMatrix:n}=t;return function(i,a,o,s){var u=i._values,l=i._index,c=i._ptr,f=i._size,d=i._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=f[0],p=f[1],m,g=o;typeof d=="string"&&(m=d,a=e.convert(a,m),g=e.find(o,[m,m]));for(var v=[],x=[],y=[],b=0;b<p;b++){for(var w=b+1,_=c[b],E=c[b+1],C=_;C<E;C++){var N=l[C];x[N]=u[C],y[N]=w}for(var D=0;D<h;D++)b===0&&(v[D]=[]),y[D]===w?v[D][b]=s?g(a,x[D]):g(x[D],a):v[D][b]=s?g(a,0):g(0,a)}return new n({data:v,size:[h,p],datatype:m})}}),uK="matAlgo14xDs",lK=["typed"],Ia=z(uK,lK,t=>{var{typed:e}=t;return function(i,a,o,s){var u=i._data,l=i._size,c=i._datatype,f,d=o;typeof c=="string"&&(f=c,a=e.convert(a,f),d=e.find(o,[f,f]));var h=l.length>0?n(d,0,l,l[0],u,a,s):[];return i.createDenseMatrix({data:h,size:ut(l),datatype:f})};function n(r,i,a,o,s,u,l){var c=[];if(i===a.length-1)for(var f=0;f<o;f++)c[f]=l?r(u,s[f]):r(s[f],u);else for(var d=0;d<o;d++)c[d]=n(r,i+1,a,a[i+1],s[d],u,l);return c}}),Db="ceil",cK=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],fK=new Gs(10),dK=z(Db,["typed","config","round"],t=>{var{typed:e,config:n,round:r}=t;function i(a){var o=Math.ceil(a),s=r(a);return o===s?o:yr(a,s,n.relTol,n.absTol)&&!yr(a,o,n.relTol,n.absTol)?s:o}return e(Db,{number:i,"number, number":function(o,s){if(!qe(s))throw new RangeError("number of decimals in function ceil must be an integer");if(s<0||s>15)throw new RangeError("number of decimals in ceil number must be in range 0-15");var u=10**s;return i(o*u)/u}})}),hK=z(Db,cK,t=>{var{typed:e,config:n,round:r,matrix:i,equalScalar:a,zeros:o,DenseMatrix:s}=t,u=xr({typed:e,equalScalar:a}),l=Hn({typed:e,DenseMatrix:s}),c=Ia({typed:e}),f=dK({typed:e,config:n,round:r});function d(h){var p=(v,x)=>ra(v,x,n.relTol,n.absTol),m=h.ceil(),g=r(h);return m.eq(g)?m:p(h,g)&&!p(h,m)?g:m}return e("ceil",{number:f.signatures.number,"number,number":f.signatures["number,number"],Complex:function(p){return p.ceil()},"Complex, number":function(p,m){return p.ceil(m)},"Complex, BigNumber":function(p,m){return p.ceil(m.toNumber())},BigNumber:d,"BigNumber, BigNumber":function(p,m){var g=fK.pow(m);return d(p.mul(g)).div(g)},bigint:h=>h,"bigint, number":(h,p)=>h,"bigint, BigNumber":(h,p)=>h,Fraction:function(p){return p.ceil()},"Fraction, number":function(p,m){return p.ceil(m)},"Fraction, BigNumber":function(p,m){return p.ceil(m.toNumber())},"Unit, number, Unit":e.referToSelf(h=>function(p,m,g){var v=p.toNumeric(g);return g.multiply(h(v,m))}),"Unit, BigNumber, Unit":e.referToSelf(h=>(p,m,g)=>h(p,m.toNumber(),g)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(h=>(p,m,g)=>pt(p,v=>h(v,m,g),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(h=>(p,m)=>h(p,0,m)),"Array | Matrix":e.referToSelf(h=>p=>pt(p,h,!0)),"Array, number | BigNumber":e.referToSelf(h=>(p,m)=>pt(p,g=>h(g,m),!0)),"SparseMatrix, number | BigNumber":e.referToSelf(h=>(p,m)=>u(p,m,h,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(h=>(p,m)=>c(p,m,h,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(h=>(p,m)=>c(i(m),p,h,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(h=>(p,m)=>a(p,0)?o(m.size(),m.storage()):m.storage()==="dense"?c(m,p,h,!0):l(m,p,h,!0))})}),wD="cube",pK=["typed"],mK=z(wD,pK,t=>{var{typed:e}=t;return e(wD,{number:nO,Complex:function(r){return r.mul(r).mul(r)},BigNumber:function(r){return r.times(r).times(r)},bigint:function(r){return r*r*r},Fraction:function(r){return r.pow(3)},Unit:function(r){return r.pow(3)}})}),_D="exp",vK=["typed"],gK=z(_D,vK,t=>{var{typed:e}=t;return e(_D,{number:rO,Complex:function(r){return r.exp()},BigNumber:function(r){return r.exp()}})}),ED="expm1",yK=["typed","Complex"],xK=z(ED,yK,t=>{var{typed:e,Complex:n}=t;return e(ED,{number:iO,Complex:function(i){var a=Math.exp(i.re);return new n(a*Math.cos(i.im)-1,a*Math.sin(i.im))},BigNumber:function(i){return i.exp().minus(1)}})}),Ab="fix",bK=["typed","Complex","matrix","ceil","floor","equalScalar","zeros","DenseMatrix"],wK=z(Ab,["typed","ceil","floor"],t=>{var{typed:e,ceil:n,floor:r}=t;return e(Ab,{number:function(a){return a>0?r(a):n(a)},"number, number":function(a,o){return a>0?r(a,o):n(a,o)}})}),_K=z(Ab,bK,t=>{var{typed:e,Complex:n,matrix:r,ceil:i,floor:a,equalScalar:o,zeros:s,DenseMatrix:u}=t,l=Hn({typed:e,DenseMatrix:u}),c=Ia({typed:e}),f=wK({typed:e,ceil:i,floor:a});return e("fix",{number:f.signatures.number,"number, number | BigNumber":f.signatures["number,number"],Complex:function(h){return new n(h.re>0?Math.floor(h.re):Math.ceil(h.re),h.im>0?Math.floor(h.im):Math.ceil(h.im))},"Complex, number":function(h,p){return new n(h.re>0?a(h.re,p):i(h.re,p),h.im>0?a(h.im,p):i(h.im,p))},"Complex, BigNumber":function(h,p){var m=p.toNumber();return new n(h.re>0?a(h.re,m):i(h.re,m),h.im>0?a(h.im,m):i(h.im,m))},BigNumber:function(h){return h.isNegative()?i(h):a(h)},"BigNumber, number | BigNumber":function(h,p){return h.isNegative()?i(h,p):a(h,p)},bigint:d=>d,"bigint, number":(d,h)=>d,"bigint, BigNumber":(d,h)=>d,Fraction:function(h){return h.s<0n?h.ceil():h.floor()},"Fraction, number | BigNumber":function(h,p){return h.s<0n?i(h,p):a(h,p)},"Unit, number, Unit":e.referToSelf(d=>function(h,p,m){var g=h.toNumeric(m);return m.multiply(d(g,p))}),"Unit, BigNumber, Unit":e.referToSelf(d=>(h,p,m)=>d(h,p.toNumber(),m)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(d=>(h,p,m)=>pt(h,g=>d(g,p,m),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(d=>(h,p)=>d(h,0,p)),"Array | Matrix":e.referToSelf(d=>h=>pt(h,d,!0)),"Array | Matrix, number | BigNumber":e.referToSelf(d=>(h,p)=>pt(h,m=>d(m,p),!0)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(d=>(h,p)=>c(r(p),h,d,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(d=>(h,p)=>o(h,0)?s(p.size(),p.storage()):p.storage()==="dense"?c(p,h,d,!0):l(p,h,d,!0))})}),Tb="floor",EK=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],CK=new Gs(10),NK=z(Tb,["typed","config","round"],t=>{var{typed:e,config:n,round:r}=t;function i(a){var o=Math.floor(a),s=r(a);return o===s?o:yr(a,s,n.relTol,n.absTol)&&!yr(a,o,n.relTol,n.absTol)?s:o}return e(Tb,{number:i,"number, number":function(o,s){if(!qe(s))throw new RangeError("number of decimals in function floor must be an integer");if(s<0||s>15)throw new RangeError("number of decimals in floor number must be in range 0 - 15");var u=10**s;return i(o*u)/u}})}),jO=z(Tb,EK,t=>{var{typed:e,config:n,round:r,matrix:i,equalScalar:a,zeros:o,DenseMatrix:s}=t,u=xr({typed:e,equalScalar:a}),l=Hn({typed:e,DenseMatrix:s}),c=Ia({typed:e}),f=NK({typed:e,config:n,round:r});function d(h){var p=(v,x)=>ra(v,x,n.relTol,n.absTol),m=h.floor(),g=r(h);return m.eq(g)?m:p(h,g)&&!p(h,m)?g:m}return e("floor",{number:f.signatures.number,"number,number":f.signatures["number,number"],Complex:function(p){return p.floor()},"Complex, number":function(p,m){return p.floor(m)},"Complex, BigNumber":function(p,m){return p.floor(m.toNumber())},BigNumber:d,"BigNumber, BigNumber":function(p,m){var g=CK.pow(m);return d(p.mul(g)).div(g)},bigint:h=>h,"bigint, number":(h,p)=>h,"bigint, BigNumber":(h,p)=>h,Fraction:function(p){return p.floor()},"Fraction, number":function(p,m){return p.floor(m)},"Fraction, BigNumber":function(p,m){return p.floor(m.toNumber())},"Unit, number, Unit":e.referToSelf(h=>function(p,m,g){var v=p.toNumeric(g);return g.multiply(h(v,m))}),"Unit, BigNumber, Unit":e.referToSelf(h=>(p,m,g)=>h(p,m.toNumber(),g)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(h=>(p,m,g)=>pt(p,v=>h(v,m,g),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(h=>(p,m)=>h(p,0,m)),"Array | Matrix":e.referToSelf(h=>p=>pt(p,h,!0)),"Array, number | BigNumber":e.referToSelf(h=>(p,m)=>pt(p,g=>h(g,m),!0)),"SparseMatrix, number | BigNumber":e.referToSelf(h=>(p,m)=>u(p,m,h,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(h=>(p,m)=>c(p,m,h,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(h=>(p,m)=>c(i(m),p,h,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(h=>(p,m)=>a(p,0)?o(m.size(),m.storage()):m.storage()==="dense"?c(m,p,h,!0):l(m,p,h,!0))})}),SK="matAlgo02xDS0",DK=["typed","equalScalar"],Ra=z(SK,DK,t=>{var{typed:e,equalScalar:n}=t;return function(i,a,o,s){var u=i._data,l=i._size,c=i._datatype||i.getDataType(),f=a._values,d=a._index,h=a._ptr,p=a._size,m=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(l.length!==p.length)throw new bt(l.length,p.length);if(l[0]!==p[0]||l[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+p+")");if(!f)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var g=l[0],v=l[1],x,y=n,b=0,w=o;typeof c=="string"&&c===m&&c!=="mixed"&&(x=c,y=e.find(n,[x,x]),b=e.convert(0,x),w=e.find(o,[x,x]));for(var _=[],E=[],C=[],N=0;N<v;N++){C[N]=E.length;for(var D=h[N],A=h[N+1],T=D;T<A;T++){var k=d[T],F=s?w(f[T],u[k][N]):w(u[k][N],f[T]);y(F,b)||(E.push(k),_.push(F))}}return C[v]=E.length,a.createSparseMatrix({values:_,index:E,ptr:C,size:[g,v],datatype:c===i._datatype&&m===a._datatype?x:void 0})}}),AK="matAlgo03xDSf",TK=["typed"],Xr=z(AK,TK,t=>{var{typed:e}=t;return function(r,i,a,o){var s=r._data,u=r._size,l=r._datatype||r.getDataType(),c=i._values,f=i._index,d=i._ptr,h=i._size,p=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(u.length!==h.length)throw new bt(u.length,h.length);if(u[0]!==h[0]||u[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+h+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var m=u[0],g=u[1],v,x=0,y=a;typeof l=="string"&&l===p&&l!=="mixed"&&(v=l,x=e.convert(0,v),y=e.find(a,[v,v]));for(var b=[],w=0;w<m;w++)b[w]=[];for(var _=[],E=[],C=0;C<g;C++){for(var N=C+1,D=d[C],A=d[C+1],T=D;T<A;T++){var k=f[T];_[k]=o?y(c[T],s[k][C]):y(s[k][C],c[T]),E[k]=N}for(var F=0;F<m;F++)E[F]===N?b[F][C]=_[F]:b[F][C]=o?y(x,s[F][C]):y(s[F][C],x)}return r.createDenseMatrix({data:b,size:[m,g],datatype:l===r._datatype&&p===i._datatype?v:void 0})}}),MK="matAlgo05xSfSf",IK=["typed","equalScalar"],P0=z(MK,IK,t=>{var{typed:e,equalScalar:n}=t;return function(i,a,o){var s=i._values,u=i._index,l=i._ptr,c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=a._values,h=a._index,p=a._ptr,m=a._size,g=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(c.length!==m.length)throw new bt(c.length,m.length);if(c[0]!==m[0]||c[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+m+")");var v=c[0],x=c[1],y,b=n,w=0,_=o;typeof f=="string"&&f===g&&f!=="mixed"&&(y=f,b=e.find(n,[y,y]),w=e.convert(0,y),_=e.find(o,[y,y]));var E=s&&d?[]:void 0,C=[],N=[],D=E?[]:void 0,A=E?[]:void 0,T=[],k=[],F,O,I,M;for(O=0;O<x;O++){N[O]=C.length;var B=O+1;for(I=l[O],M=l[O+1];I<M;I++)F=u[I],C.push(F),T[F]=B,D&&(D[F]=s[I]);for(I=p[O],M=p[O+1];I<M;I++)F=h[I],T[F]!==B&&C.push(F),k[F]=B,A&&(A[F]=d[I]);if(E)for(I=N[O];I<C.length;){F=C[I];var R=T[F],j=k[F];if(R===B||j===B){var K=R===B?D[F]:w,V=j===B?A[F]:w,L=_(K,V);b(L,w)?C.splice(I,1):(E.push(L),I++)}}}return N[x]=C.length,i.createSparseMatrix({values:E,index:C,ptr:N,size:[v,x],datatype:f===i._datatype&&g===a._datatype?y:void 0})}}),RK="matAlgo13xDD",kK=["typed"],FK=z(RK,kK,t=>{var{typed:e}=t;return function(i,a,o){var s=i._data,u=i._size,l=i._datatype,c=a._data,f=a._size,d=a._datatype,h=[];if(u.length!==f.length)throw new bt(u.length,f.length);for(var p=0;p<u.length;p++){if(u[p]!==f[p])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+f+")");h[p]=u[p]}var m,g=o;typeof l=="string"&&l===d&&(m=l,g=e.find(o,[m,m]));var v=h.length>0?n(g,0,h,h[0],s,c):[];return i.createDenseMatrix({data:v,size:h,datatype:m})};function n(r,i,a,o,s,u){var l=[];if(i===a.length-1)for(var c=0;c<o;c++)l[c]=r(s[c],u[c]);else for(var f=0;f<o;f++)l[f]=n(r,i+1,a,a[i+1],s[f],u[f]);return l}});function Xn(t,e){if(zo(t.size(),e.size()))return[t,e];var n=G2(t.size(),e.size());return[t,e].map(r=>PK(r,n))}function PK(t,e){return zo(t.size(),e)?t:t.create($u(t.valueOf(),e),t.datatype())}var OK="matrixAlgorithmSuite",BK=["typed","matrix"],Zt=z(OK,BK,t=>{var{typed:e,matrix:n}=t,r=FK({typed:e}),i=Ia({typed:e});return function(o){var s=o.elop,u=o.SD||o.DS,l;s?(l={"DenseMatrix, DenseMatrix":(h,p)=>r(...Xn(h,p),s),"Array, Array":(h,p)=>r(...Xn(n(h),n(p)),s).valueOf(),"Array, DenseMatrix":(h,p)=>r(...Xn(n(h),p),s),"DenseMatrix, Array":(h,p)=>r(...Xn(h,n(p)),s)},o.SS&&(l["SparseMatrix, SparseMatrix"]=(h,p)=>o.SS(...Xn(h,p),s,!1)),o.DS&&(l["DenseMatrix, SparseMatrix"]=(h,p)=>o.DS(...Xn(h,p),s,!1),l["Array, SparseMatrix"]=(h,p)=>o.DS(...Xn(n(h),p),s,!1)),u&&(l["SparseMatrix, DenseMatrix"]=(h,p)=>u(...Xn(p,h),s,!0),l["SparseMatrix, Array"]=(h,p)=>u(...Xn(n(p),h),s,!0))):(l={"DenseMatrix, DenseMatrix":e.referToSelf(h=>(p,m)=>r(...Xn(p,m),h)),"Array, Array":e.referToSelf(h=>(p,m)=>r(...Xn(n(p),n(m)),h).valueOf()),"Array, DenseMatrix":e.referToSelf(h=>(p,m)=>r(...Xn(n(p),m),h)),"DenseMatrix, Array":e.referToSelf(h=>(p,m)=>r(...Xn(p,n(m)),h))},o.SS&&(l["SparseMatrix, SparseMatrix"]=e.referToSelf(h=>(p,m)=>o.SS(...Xn(p,m),h,!1))),o.DS&&(l["DenseMatrix, SparseMatrix"]=e.referToSelf(h=>(p,m)=>o.DS(...Xn(p,m),h,!1)),l["Array, SparseMatrix"]=e.referToSelf(h=>(p,m)=>o.DS(...Xn(n(p),m),h,!1))),u&&(l["SparseMatrix, DenseMatrix"]=e.referToSelf(h=>(p,m)=>u(...Xn(m,p),h,!0)),l["SparseMatrix, Array"]=e.referToSelf(h=>(p,m)=>u(...Xn(n(m),p),h,!0))));var c=o.scalar||"any",f=o.Ds||o.Ss;f&&(s?(l["DenseMatrix,"+c]=(h,p)=>i(h,p,s,!1),l[c+", DenseMatrix"]=(h,p)=>i(p,h,s,!0),l["Array,"+c]=(h,p)=>i(n(h),p,s,!1).valueOf(),l[c+", Array"]=(h,p)=>i(n(p),h,s,!0).valueOf()):(l["DenseMatrix,"+c]=e.referToSelf(h=>(p,m)=>i(p,m,h,!1)),l[c+", DenseMatrix"]=e.referToSelf(h=>(p,m)=>i(m,p,h,!0)),l["Array,"+c]=e.referToSelf(h=>(p,m)=>i(n(p),m,h,!1).valueOf()),l[c+", Array"]=e.referToSelf(h=>(p,m)=>i(n(m),p,h,!0).valueOf())));var d=o.sS!==void 0?o.sS:o.Ss;return s?(o.Ss&&(l["SparseMatrix,"+c]=(h,p)=>o.Ss(h,p,s,!1)),d&&(l[c+", SparseMatrix"]=(h,p)=>d(p,h,s,!0))):(o.Ss&&(l["SparseMatrix,"+c]=e.referToSelf(h=>(p,m)=>o.Ss(p,m,h,!1))),d&&(l[c+", SparseMatrix"]=e.referToSelf(h=>(p,m)=>d(m,p,h,!0)))),s&&s.signatures&&wP(l,s.signatures),l}}),CD="mod",LK=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix","concat"],$O=z(CD,LK,t=>{var{typed:e,config:n,round:r,matrix:i,equalScalar:a,zeros:o,DenseMatrix:s,concat:u}=t,l=jO({typed:e,config:n,round:r,matrix:i,equalScalar:a,zeros:o,DenseMatrix:s}),c=Ra({typed:e,equalScalar:a}),f=Xr({typed:e}),d=P0({typed:e,equalScalar:a}),h=xr({typed:e,equalScalar:a}),p=Hn({typed:e,DenseMatrix:s}),m=Zt({typed:e,matrix:i,concat:u});return e(CD,{"number, number":g,"BigNumber, BigNumber":function(x,y){return y.isZero()?x:x.sub(y.mul(l(x.div(y))))},"bigint, bigint":function(x,y){if(y===0n)return x;if(x<0){var b=x%y;return b===0n?b:b+y}return x%y},"Fraction, Fraction":function(x,y){return y.equals(0)?x:x.sub(y.mul(l(x.div(y))))}},m({SS:d,DS:f,SD:c,Ss:h,sS:p}));function g(v,x){return x===0?v:v-x*l(v/x)}}),jK="matAlgo01xDSid",$K=["typed"],su=z(jK,$K,t=>{var{typed:e}=t;return function(r,i,a,o){var s=r._data,u=r._size,l=r._datatype||r.getDataType(),c=i._values,f=i._index,d=i._ptr,h=i._size,p=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(u.length!==h.length)throw new bt(u.length,h.length);if(u[0]!==h[0]||u[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+h+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var m=u[0],g=u[1],v=typeof l=="string"&&l!=="mixed"&&l===p?l:void 0,x=v?e.find(a,[v,v]):a,y,b,w=[];for(y=0;y<m;y++)w[y]=[];var _=[],E=[];for(b=0;b<g;b++){for(var C=b+1,N=d[b],D=d[b+1],A=N;A<D;A++)y=f[A],_[y]=o?x(c[A],s[y][b]):x(s[y][b],c[A]),E[y]=C;for(y=0;y<m;y++)E[y]===C?w[y][b]=_[y]:w[y][b]=s[y][b]}return r.createDenseMatrix({data:w,size:[m,g],datatype:l===r._datatype&&p===i._datatype?v:void 0})}}),zK="matAlgo04xSidSid",UK=["typed","equalScalar"],Q2=z(zK,UK,t=>{var{typed:e,equalScalar:n}=t;return function(i,a,o){var s=i._values,u=i._index,l=i._ptr,c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=a._values,h=a._index,p=a._ptr,m=a._size,g=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(c.length!==m.length)throw new bt(c.length,m.length);if(c[0]!==m[0]||c[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+m+")");var v=c[0],x=c[1],y,b=n,w=0,_=o;typeof f=="string"&&f===g&&f!=="mixed"&&(y=f,b=e.find(n,[y,y]),w=e.convert(0,y),_=e.find(o,[y,y]));var E=s&&d?[]:void 0,C=[],N=[],D=s&&d?[]:void 0,A=s&&d?[]:void 0,T=[],k=[],F,O,I,M,B;for(O=0;O<x;O++){N[O]=C.length;var R=O+1;for(M=l[O],B=l[O+1],I=M;I<B;I++)F=u[I],C.push(F),T[F]=R,D&&(D[F]=s[I]);for(M=p[O],B=p[O+1],I=M;I<B;I++)if(F=h[I],T[F]===R){if(D){var j=_(D[F],d[I]);b(j,w)?T[F]=null:D[F]=j}}else C.push(F),k[F]=R,A&&(A[F]=d[I]);if(D&&A)for(I=N[O];I<C.length;)F=C[I],T[F]===R?(E[I]=D[F],I++):k[F]===R?(E[I]=A[F],I++):C.splice(I,1)}return N[x]=C.length,i.createSparseMatrix({values:E,index:C,ptr:N,size:[v,x],datatype:f===i._datatype&&g===a._datatype?y:void 0})}}),WK="matAlgo10xSids",VK=["typed","DenseMatrix"],yl=z(WK,VK,t=>{var{typed:e,DenseMatrix:n}=t;return function(i,a,o,s){var u=i._values,l=i._index,c=i._ptr,f=i._size,d=i._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=f[0],p=f[1],m,g=o;typeof d=="string"&&(m=d,a=e.convert(a,m),g=e.find(o,[m,m]));for(var v=[],x=[],y=[],b=0;b<p;b++){for(var w=b+1,_=c[b],E=c[b+1],C=_;C<E;C++){var N=l[C];x[N]=u[C],y[N]=w}for(var D=0;D<h;D++)b===0&&(v[D]=[]),y[D]===w?v[D][b]=s?g(a,x[D]):g(x[D],a):v[D][b]=a}return new n({data:v,size:[h,p],datatype:m})}});function xl(t,e,n,r){if(!(this instanceof xl))throw new SyntaxError("Constructor must be called with the new operator");this.fn=t,this.count=e,this.min=n,this.max=r,this.message="Wrong number of arguments in function "+t+" ("+e+" provided, "+n+(r!=null?"-"+r:"")+" expected)",this.stack=new Error().stack}xl.prototype=new Error;xl.prototype.constructor=Error;xl.prototype.name="ArgumentsError";xl.prototype.isArgumentsError=!0;var ND="gcd",qK=["typed","config","round","matrix","equalScalar","zeros","BigNumber","DenseMatrix","concat"],o1="number | BigNumber | Fraction | Matrix | Array",HK="".concat(o1,", ").concat(o1,", ...").concat(o1);function SD(t){return!t.some(e=>Array.isArray(e))}var GK=z(ND,qK,t=>{var{typed:e,matrix:n,config:r,round:i,equalScalar:a,zeros:o,BigNumber:s,DenseMatrix:u,concat:l}=t,c=$O({typed:e,config:r,round:i,matrix:n,equalScalar:a,zeros:o,DenseMatrix:u,concat:l}),f=su({typed:e}),d=Q2({typed:e,equalScalar:a}),h=yl({typed:e,DenseMatrix:u}),p=Zt({typed:e,matrix:n,concat:l});return e(ND,{"number, number":m,"BigNumber, BigNumber":g,"Fraction, Fraction":(v,x)=>v.gcd(x)},p({SS:d,DS:f,Ss:h}),{[HK]:e.referToSelf(v=>(x,y,b)=>{for(var w=v(x,y),_=0;_<b.length;_++)w=v(w,b[_]);return w}),Array:e.referToSelf(v=>x=>{if(x.length===1&&Array.isArray(x[0])&&SD(x[0]))return v(...x[0]);if(SD(x))return v(...x);throw new xl("gcd() supports only 1d matrices!")}),Matrix:e.referToSelf(v=>x=>v(x.toArray()))});function m(v,x){if(!qe(v)||!qe(x))throw new Error("Parameters in function gcd must be integer numbers");for(var y;x!==0;)y=c(v,x),v=x,x=y;return v<0?-v:v}function g(v,x){if(!v.isInt()||!x.isInt())throw new Error("Parameters in function gcd must be integer numbers");for(var y=new s(0);!x.isZero();){var b=c(v,x);v=x,x=b}return v.lt(y)?v.neg():v}}),KK="matAlgo06xS0S0",YK=["typed","equalScalar"],O0=z(KK,YK,t=>{var{typed:e,equalScalar:n}=t;return function(i,a,o){var s=i._values,u=i._size,l=i._datatype||i._data===void 0?i._datatype:i.getDataType(),c=a._values,f=a._size,d=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(u.length!==f.length)throw new bt(u.length,f.length);if(u[0]!==f[0]||u[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+f+")");var h=u[0],p=u[1],m,g=n,v=0,x=o;typeof l=="string"&&l===d&&l!=="mixed"&&(m=l,g=e.find(n,[m,m]),v=e.convert(0,m),x=e.find(o,[m,m]));for(var y=s&&c?[]:void 0,b=[],w=[],_=y?[]:void 0,E=[],C=[],N=0;N<p;N++){w[N]=b.length;var D=N+1;if(YS(i,N,E,_,C,D,b,x),YS(a,N,E,_,C,D,b,x),_)for(var A=w[N];A<b.length;){var T=b[A];if(C[T]===D){var k=_[T];g(k,v)?b.splice(A,1):(y.push(k),A++)}else b.splice(A,1)}else for(var F=w[N];F<b.length;){var O=b[F];C[O]!==D?b.splice(F,1):F++}}return w[p]=b.length,i.createSparseMatrix({values:y,index:b,ptr:w,size:[h,p],datatype:l===i._datatype&&d===a._datatype?m:void 0})}}),DD="lcm",XK=["typed","matrix","equalScalar","concat"],QK=z(DD,XK,t=>{var{typed:e,matrix:n,equalScalar:r,concat:i}=t,a=Ra({typed:e,equalScalar:r}),o=O0({typed:e,equalScalar:r}),s=xr({typed:e,equalScalar:r}),u=Zt({typed:e,matrix:n,concat:i}),l="number | BigNumber | Fraction | Matrix | Array",c={};return c["".concat(l,", ").concat(l,", ...").concat(l)]=e.referToSelf(d=>(h,p,m)=>{for(var g=d(h,p),v=0;v<m.length;v++)g=d(g,m[v]);return g}),e(DD,{"number, number":aO,"BigNumber, BigNumber":f,"Fraction, Fraction":(d,h)=>d.lcm(h)},u({SS:o,DS:a,Ss:s}),c);function f(d,h){if(!d.isInt()||!h.isInt())throw new Error("Parameters in function lcm must be integer numbers");if(d.isZero())return d;if(h.isZero())return h;for(var p=d.times(h);!h.isZero();){var m=h;h=d.mod(m),d=m}return p.div(d).abs()}});function Z2(t,e,n,r){return function(i){if(i>0||n.predictable){if(i<=0)return NaN;var a=i.toString(16),o=a.substring(0,15);return t*(a.length-o.length)+e(+("0x"+o))}return r(i.toNumber())}}var AD="log10",ZK=["typed","config","Complex"],JK=Vv(16),eY=z(AD,ZK,t=>{var{typed:e,config:n,Complex:r}=t;function i(o){return o.log().div(Math.LN10)}function a(o){return i(new r(o,0))}return e(AD,{number:function(s){return s>=0||n.predictable?Vv(s):a(s)},bigint:Z2(JK,Vv,n,a),Complex:i,BigNumber:function(s){return!s.isNegative()||n.predictable?s.log():a(s.toNumber())},"Array | Matrix":e.referToSelf(o=>s=>pt(s,o))})}),TD="log2",tY=["typed","config","Complex"],nY=z(TD,tY,t=>{var{typed:e,config:n,Complex:r}=t;function i(o){return a(new r(o,0))}return e(TD,{number:function(s){return s>=0||n.predictable?wb(s):i(s)},bigint:Z2(4,wb,n,i),Complex:a,BigNumber:function(s){return!s.isNegative()||n.predictable?s.log(2):i(s.toNumber())},"Array | Matrix":e.referToSelf(o=>s=>pt(s,o))});function a(o){var s=Math.sqrt(o.re*o.re+o.im*o.im);return new r(Math.log2?Math.log2(s):Math.log(s)/Math.LN2,Math.atan2(o.im,o.re)/Math.LN2)}}),rY="multiplyScalar",iY=["typed"],aY=z(rY,iY,t=>{var{typed:e}=t;return e("multiplyScalar",{"number, number":JP,"Complex, Complex":function(r,i){return r.mul(i)},"BigNumber, BigNumber":function(r,i){return r.times(i)},"bigint, bigint":function(r,i){return r*i},"Fraction, Fraction":function(r,i){return r.mul(i)},"number | Fraction | BigNumber | Complex, Unit":(n,r)=>r.multiply(n),"Unit, number | Fraction | BigNumber | Complex | Unit":(n,r)=>n.multiply(r)})}),MD="multiply",oY=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],sY=z(MD,oY,t=>{var{typed:e,matrix:n,addScalar:r,multiplyScalar:i,equalScalar:a,dot:o}=t,s=xr({typed:e,equalScalar:a}),u=Ia({typed:e});function l(w,_){switch(w.length){case 1:switch(_.length){case 1:if(w[0]!==_[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(w[0]!==_[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+w[0]+") must match Matrix rows ("+_[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+_.length+" dimensions)")}break;case 2:switch(_.length){case 1:if(w[1]!==_[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+w[1]+") must match Vector length ("+_[0]+")");break;case 2:if(w[1]!==_[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+w[1]+") must match Matrix B rows ("+_[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+_.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+w.length+" dimensions)")}}function c(w,_,E){if(E===0)throw new Error("Cannot multiply two empty vectors");return o(w,_)}function f(w,_){if(_.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return d(w,_)}function d(w,_){var E=w._data,C=w._size,N=w._datatype||w.getDataType(),D=_._data,A=_._size,T=_._datatype||_.getDataType(),k=C[0],F=A[1],O,I=r,M=i;N&&T&&N===T&&typeof N=="string"&&N!=="mixed"&&(O=N,I=e.find(r,[O,O]),M=e.find(i,[O,O]));for(var B=[],R=0;R<F;R++){for(var j=M(E[0],D[0][R]),K=1;K<k;K++)j=I(j,M(E[K],D[K][R]));B[R]=j}return w.createDenseMatrix({data:B,size:[F],datatype:N===w._datatype&&T===_._datatype?O:void 0})}var h=e("_multiplyMatrixVector",{"DenseMatrix, any":m,"SparseMatrix, any":x}),p=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":g,"DenseMatrix, SparseMatrix":v,"SparseMatrix, DenseMatrix":y,"SparseMatrix, SparseMatrix":b});function m(w,_){var E=w._data,C=w._size,N=w._datatype||w.getDataType(),D=_._data,A=_._datatype||_.getDataType(),T=C[0],k=C[1],F,O=r,I=i;N&&A&&N===A&&typeof N=="string"&&N!=="mixed"&&(F=N,O=e.find(r,[F,F]),I=e.find(i,[F,F]));for(var M=[],B=0;B<T;B++){for(var R=E[B],j=I(R[0],D[0]),K=1;K<k;K++)j=O(j,I(R[K],D[K]));M[B]=j}return w.createDenseMatrix({data:M,size:[T],datatype:N===w._datatype&&A===_._datatype?F:void 0})}function g(w,_){var E=w._data,C=w._size,N=w._datatype||w.getDataType(),D=_._data,A=_._size,T=_._datatype||_.getDataType(),k=C[0],F=C[1],O=A[1],I,M=r,B=i;N&&T&&N===T&&typeof N=="string"&&N!=="mixed"&&N!=="mixed"&&(I=N,M=e.find(r,[I,I]),B=e.find(i,[I,I]));for(var R=[],j=0;j<k;j++){var K=E[j];R[j]=[];for(var V=0;V<O;V++){for(var L=B(K[0],D[0][V]),ne=1;ne<F;ne++)L=M(L,B(K[ne],D[ne][V]));R[j][V]=L}}return w.createDenseMatrix({data:R,size:[k,O],datatype:N===w._datatype&&T===_._datatype?I:void 0})}function v(w,_){var E=w._data,C=w._size,N=w._datatype||w.getDataType(),D=_._values,A=_._index,T=_._ptr,k=_._size,F=_._datatype||_._data===void 0?_._datatype:_.getDataType();if(!D)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var O=C[0],I=k[1],M,B=r,R=i,j=a,K=0;N&&F&&N===F&&typeof N=="string"&&N!=="mixed"&&(M=N,B=e.find(r,[M,M]),R=e.find(i,[M,M]),j=e.find(a,[M,M]),K=e.convert(0,M));for(var V=[],L=[],ne=[],fe=_.createSparseMatrix({values:V,index:L,ptr:ne,size:[O,I],datatype:N===w._datatype&&F===_._datatype?M:void 0}),te=0;te<I;te++){ne[te]=L.length;var oe=T[te],H=T[te+1];if(H>oe)for(var U=0,Q=0;Q<O;Q++){for(var re=Q+1,ie=void 0,de=oe;de<H;de++){var he=A[de];U!==re?(ie=R(E[Q][he],D[de]),U=re):ie=B(ie,R(E[Q][he],D[de]))}U===re&&!j(ie,K)&&(L.push(Q),V.push(ie))}}return ne[I]=L.length,fe}function x(w,_){var E=w._values,C=w._index,N=w._ptr,D=w._datatype||w._data===void 0?w._datatype:w.getDataType();if(!E)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var A=_._data,T=_._datatype||_.getDataType(),k=w._size[0],F=_._size[0],O=[],I=[],M=[],B,R=r,j=i,K=a,V=0;D&&T&&D===T&&typeof D=="string"&&D!=="mixed"&&(B=D,R=e.find(r,[B,B]),j=e.find(i,[B,B]),K=e.find(a,[B,B]),V=e.convert(0,B));var L=[],ne=[];M[0]=0;for(var fe=0;fe<F;fe++){var te=A[fe];if(!K(te,V))for(var oe=N[fe],H=N[fe+1],U=oe;U<H;U++){var Q=C[U];ne[Q]?L[Q]=R(L[Q],j(te,E[U])):(ne[Q]=!0,I.push(Q),L[Q]=j(te,E[U]))}}for(var re=I.length,ie=0;ie<re;ie++){var de=I[ie];O[ie]=L[de]}return M[1]=I.length,w.createSparseMatrix({values:O,index:I,ptr:M,size:[k,1],datatype:D===w._datatype&&T===_._datatype?B:void 0})}function y(w,_){var E=w._values,C=w._index,N=w._ptr,D=w._datatype||w._data===void 0?w._datatype:w.getDataType();if(!E)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var A=_._data,T=_._datatype||_.getDataType(),k=w._size[0],F=_._size[0],O=_._size[1],I,M=r,B=i,R=a,j=0;D&&T&&D===T&&typeof D=="string"&&D!=="mixed"&&(I=D,M=e.find(r,[I,I]),B=e.find(i,[I,I]),R=e.find(a,[I,I]),j=e.convert(0,I));for(var K=[],V=[],L=[],ne=w.createSparseMatrix({values:K,index:V,ptr:L,size:[k,O],datatype:D===w._datatype&&T===_._datatype?I:void 0}),fe=[],te=[],oe=0;oe<O;oe++){L[oe]=V.length;for(var H=oe+1,U=0;U<F;U++){var Q=A[U][oe];if(!R(Q,j))for(var re=N[U],ie=N[U+1],de=re;de<ie;de++){var he=C[de];te[he]!==H?(te[he]=H,V.push(he),fe[he]=B(Q,E[de])):fe[he]=M(fe[he],B(Q,E[de]))}}for(var $=L[oe],G=V.length,ue=$;ue<G;ue++){var ce=V[ue];K[ue]=fe[ce]}}return L[O]=V.length,ne}function b(w,_){var E=w._values,C=w._index,N=w._ptr,D=w._datatype||w._data===void 0?w._datatype:w.getDataType(),A=_._values,T=_._index,k=_._ptr,F=_._datatype||_._data===void 0?_._datatype:_.getDataType(),O=w._size[0],I=_._size[1],M=E&&A,B,R=r,j=i;D&&F&&D===F&&typeof D=="string"&&D!=="mixed"&&(B=D,R=e.find(r,[B,B]),j=e.find(i,[B,B]));for(var K=M?[]:void 0,V=[],L=[],ne=w.createSparseMatrix({values:K,index:V,ptr:L,size:[O,I],datatype:D===w._datatype&&F===_._datatype?B:void 0}),fe=M?[]:void 0,te=[],oe,H,U,Q,re,ie,de,he,$=0;$<I;$++){L[$]=V.length;var G=$+1;for(re=k[$],ie=k[$+1],Q=re;Q<ie;Q++)if(he=T[Q],M)for(H=N[he],U=N[he+1],oe=H;oe<U;oe++)de=C[oe],te[de]!==G?(te[de]=G,V.push(de),fe[de]=j(A[Q],E[oe])):fe[de]=R(fe[de],j(A[Q],E[oe]));else for(H=N[he],U=N[he+1],oe=H;oe<U;oe++)de=C[oe],te[de]!==G&&(te[de]=G,V.push(de));if(M)for(var ue=L[$],ce=V.length,ge=ue;ge<ce;ge++){var Ce=V[ge];K[ge]=fe[Ce]}}return L[I]=V.length,ne}return e(MD,i,{"Array, Array":e.referTo("Matrix, Matrix",w=>(_,E)=>{l(ot(_),ot(E));var C=w(n(_),n(E));return Je(C)?C.valueOf():C}),"Matrix, Matrix":function(_,E){var C=_.size(),N=E.size();return l(C,N),C.length===1?N.length===1?c(_,E,C[0]):f(_,E):N.length===1?h(_,E):p(_,E)},"Matrix, Array":e.referTo("Matrix,Matrix",w=>(_,E)=>w(_,n(E))),"Array, Matrix":e.referToSelf(w=>(_,E)=>w(n(_,E.storage()),E)),"SparseMatrix, any":function(_,E){return s(_,E,i,!1)},"DenseMatrix, any":function(_,E){return u(_,E,i,!1)},"any, SparseMatrix":function(_,E){return s(E,_,i,!0)},"any, DenseMatrix":function(_,E){return u(E,_,i,!0)},"Array, any":function(_,E){return u(n(_),E,i,!1).valueOf()},"any, Array":function(_,E){return u(n(E),_,i,!0).valueOf()},"any, any":i,"any, any, ...any":e.referToSelf(w=>(_,E,C)=>{for(var N=w(_,E),D=0;D<C.length;D++)N=w(N,C[D]);return N})})}),ID="nthRoot",uY=["typed","matrix","equalScalar","BigNumber","concat"],lY=z(ID,uY,t=>{var{typed:e,matrix:n,equalScalar:r,BigNumber:i,concat:a}=t,o=su({typed:e}),s=Ra({typed:e,equalScalar:r}),u=O0({typed:e,equalScalar:r}),l=xr({typed:e,equalScalar:r}),c=Zt({typed:e,matrix:n,concat:a});function f(){throw new Error("Complex number not supported in function nthRoot. Use nthRoots instead.")}return e(ID,{number:ZS,"number, number":ZS,BigNumber:h=>d(h,new i(2)),"BigNumber, BigNumber":d,Complex:f,"Complex, number":f,Array:e.referTo("DenseMatrix,number",h=>p=>h(n(p),2).valueOf()),DenseMatrix:e.referTo("DenseMatrix,number",h=>p=>h(p,2)),SparseMatrix:e.referTo("SparseMatrix,number",h=>p=>h(p,2)),"SparseMatrix, SparseMatrix":e.referToSelf(h=>(p,m)=>{if(m.density()===1)return u(p,m,h);throw new Error("Root must be non-zero")}),"DenseMatrix, SparseMatrix":e.referToSelf(h=>(p,m)=>{if(m.density()===1)return o(p,m,h,!1);throw new Error("Root must be non-zero")}),"Array, SparseMatrix":e.referTo("DenseMatrix,SparseMatrix",h=>(p,m)=>h(n(p),m)),"number | BigNumber, SparseMatrix":e.referToSelf(h=>(p,m)=>{if(m.density()===1)return l(m,p,h,!0);throw new Error("Root must be non-zero")})},c({scalar:"number | BigNumber",SD:s,Ss:l,sS:!1}));function d(h,p){var m=i.precision,g=i.clone({precision:m+2}),v=new i(0),x=new g(1),y=p.isNegative();if(y&&(p=p.neg()),p.isZero())throw new Error("Root must be non-zero");if(h.isNegative()&&!p.abs().mod(2).equals(1))throw new Error("Root must be odd when a is negative.");if(h.isZero())return y?new g(1/0):0;if(!h.isFinite())return y?v:h;var b=h.abs().pow(x.div(p));return b=h.isNeg()?b.neg():b,new i((y?x.div(b):b).toPrecision(m))}}),RD="sign",cY=["typed","BigNumber","Fraction","complex"],fY=z(RD,cY,t=>{var{typed:e,BigNumber:n,complex:r,Fraction:i}=t;return e(RD,{number:_b,Complex:function(o){return o.im===0?r(_b(o.re)):o.sign()},BigNumber:function(o){return new n(o.cmp(0))},bigint:function(o){return o>0n?1n:o<0n?-1n:0n},Fraction:function(o){return new i(o.s)},"Array | Matrix":e.referToSelf(a=>o=>pt(o,a,!0)),Unit:e.referToSelf(a=>o=>{if(!o._isDerived()&&o.units[0].unit.offset!==0)throw new TypeError("sign is ambiguous for units with offset");return e.find(a,o.valueType())(o.value)})})}),dY="sqrt",hY=["config","typed","Complex"],pY=z(dY,hY,t=>{var{config:e,typed:n,Complex:r}=t;return n("sqrt",{number:i,Complex:function(o){return o.sqrt()},BigNumber:function(o){return!o.isNegative()||e.predictable?o.sqrt():i(o.toNumber())},Unit:function(o){return o.pow(.5)}});function i(a){return isNaN(a)?NaN:a>=0||e.predictable?Math.sqrt(a):new r(a,0).sqrt()}}),kD="square",mY=["typed"],vY=z(kD,mY,t=>{var{typed:e}=t;return e(kD,{number:oO,Complex:function(r){return r.mul(r)},BigNumber:function(r){return r.times(r)},bigint:function(r){return r*r},Fraction:function(r){return r.mul(r)},Unit:function(r){return r.pow(2)}})}),FD="subtract",gY=["typed","matrix","equalScalar","subtractScalar","unaryMinus","DenseMatrix","concat"],yY=z(FD,gY,t=>{var{typed:e,matrix:n,equalScalar:r,subtractScalar:i,unaryMinus:a,DenseMatrix:o,concat:s}=t,u=su({typed:e}),l=Xr({typed:e}),c=P0({typed:e,equalScalar:r}),f=yl({typed:e,DenseMatrix:o}),d=Hn({typed:e,DenseMatrix:o}),h=Zt({typed:e,matrix:n,concat:s});return e(FD,{"any, any":i},h({elop:i,SS:c,DS:u,SD:l,Ss:d,sS:f}))}),PD="xgcd",xY=["typed","config","matrix","BigNumber"],bY=z(PD,xY,t=>{var{typed:e,config:n,matrix:r,BigNumber:i}=t;return e(PD,{"number, number":function(s,u){var l=sO(s,u);return n.matrix==="Array"?l:r(l)},"BigNumber, BigNumber":a});function a(o,s){var u,l,c,f=new i(0),d=new i(1),h=f,p=d,m=d,g=f;if(!o.isInt()||!s.isInt())throw new Error("Parameters in function xgcd must be integer numbers");for(;!s.isZero();)l=o.div(s).floor(),c=o.mod(s),u=h,h=p.minus(l.times(h)),p=u,u=m,m=g.minus(l.times(m)),g=u,o=s,s=c;var v;return o.lt(f)?v=[o.neg(),p.neg(),g.neg()]:v=[o,o.isZero()?0:p,g],n.matrix==="Array"?v:r(v)}}),OD="invmod",wY=["typed","config","BigNumber","xgcd","equal","smaller","mod","add","isInteger"],_Y=z(OD,wY,t=>{var{typed:e,config:n,BigNumber:r,xgcd:i,equal:a,smaller:o,mod:s,add:u,isInteger:l}=t;return e(OD,{"number, number":c,"BigNumber, BigNumber":c});function c(f,d){if(!l(f)||!l(d))throw new Error("Parameters in function invmod must be integer numbers");if(f=s(f,d),a(d,0))throw new Error("Divisor must be non zero");var h=i(f,d);h=h.valueOf();var[p,m]=h;return a(p,r(1))?(m=s(m,d),o(m,r(0))&&(m=u(m,d)),m):NaN}}),EY="matAlgo09xS0Sf",CY=["typed","equalScalar"],zO=z(EY,CY,t=>{var{typed:e,equalScalar:n}=t;return function(i,a,o){var s=i._values,u=i._index,l=i._ptr,c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=a._values,h=a._index,p=a._ptr,m=a._size,g=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(c.length!==m.length)throw new bt(c.length,m.length);if(c[0]!==m[0]||c[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+m+")");var v=c[0],x=c[1],y,b=n,w=0,_=o;typeof f=="string"&&f===g&&f!=="mixed"&&(y=f,b=e.find(n,[y,y]),w=e.convert(0,y),_=e.find(o,[y,y]));var E=s&&d?[]:void 0,C=[],N=[],D=E?[]:void 0,A=[],T,k,F,O,I;for(k=0;k<x;k++){N[k]=C.length;var M=k+1;if(D)for(O=p[k],I=p[k+1],F=O;F<I;F++)T=h[F],A[T]=M,D[T]=d[F];for(O=l[k],I=l[k+1],F=O;F<I;F++)if(T=u[F],D){var B=A[T]===M?D[T]:w,R=_(s[F],B);b(R,w)||(C.push(T),E.push(R))}else C.push(T)}return N[x]=C.length,i.createSparseMatrix({values:E,index:C,ptr:N,size:[v,x],datatype:f===i._datatype&&g===a._datatype?y:void 0})}}),BD="dotMultiply",NY=["typed","matrix","equalScalar","multiplyScalar","concat"],SY=z(BD,NY,t=>{var{typed:e,matrix:n,equalScalar:r,multiplyScalar:i,concat:a}=t,o=Ra({typed:e,equalScalar:r}),s=zO({typed:e,equalScalar:r}),u=xr({typed:e,equalScalar:r}),l=Zt({typed:e,matrix:n,concat:a});return e(BD,l({elop:i,SS:s,DS:o,Ss:u}))});function DY(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitAnd");var n=t.constructor;if(t.isNaN()||e.isNaN())return new n(NaN);if(t.isZero()||e.eq(-1)||t.eq(e))return t;if(e.isZero()||t.eq(-1))return e;if(!t.isFinite()||!e.isFinite()){if(!t.isFinite()&&!e.isFinite())return t.isNegative()===e.isNegative()?t:new n(0);if(!t.isFinite())return e.isNegative()?t:t.isNegative()?new n(0):e;if(!e.isFinite())return t.isNegative()?e:e.isNegative()?new n(0):t}return J2(t,e,function(r,i){return r&i})}function yh(t){if(t.isFinite()&&!t.isInteger())throw new Error("Integer expected in function bitNot");var e=t.constructor,n=e.precision;e.config({precision:1e9});var r=t.plus(new e(1));return r.s=-r.s||null,e.config({precision:n}),r}function AY(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitOr");var n=t.constructor;if(t.isNaN()||e.isNaN())return new n(NaN);var r=new n(-1);return t.isZero()||e.eq(r)||t.eq(e)?e:e.isZero()||t.eq(r)?t:!t.isFinite()||!e.isFinite()?!t.isFinite()&&!t.isNegative()&&e.isNegative()||t.isNegative()&&!e.isNegative()&&!e.isFinite()?r:t.isNegative()&&e.isNegative()?t.isFinite()?t:e:t.isFinite()?e:t:J2(t,e,function(i,a){return i|a})}function J2(t,e,n){var r=t.constructor,i,a,o=+(t.s<0),s=+(e.s<0);if(o){i=Jp(yh(t));for(var u=0;u<i.length;++u)i[u]^=1}else i=Jp(t);if(s){a=Jp(yh(e));for(var l=0;l<a.length;++l)a[l]^=1}else a=Jp(e);var c,f,d;i.length<=a.length?(c=i,f=a,d=o):(c=a,f=i,d=s);var h=c.length,p=f.length,m=n(o,s)^1,g=new r(m^1),v=new r(1),x=new r(2),y=r.precision;for(r.config({precision:1e9});h>0;)n(c[--h],f[--p])===m&&(g=g.plus(v)),v=v.times(x);for(;p>0;)n(d,f[--p])===m&&(g=g.plus(v)),v=v.times(x);return r.config({precision:y}),m===0&&(g.s=-g.s),g}function Jp(t){for(var e=t.d,n=e[0]+"",r=1;r<e.length;++r){for(var i=e[r]+"",a=7-i.length;a--;)i="0"+i;n+=i}for(var o=n.length;n.charAt(o)==="0";)o--;var s=t.e,u=n.slice(0,o+1||1),l=u.length;if(s>0)if(++s>l)for(s-=l;s--;)u+="0";else s<l&&(u=u.slice(0,s)+"."+u.slice(s));for(var c=[0],f=0;f<u.length;){for(var d=c.length;d--;)c[d]*=10;c[0]+=parseInt(u.charAt(f++));for(var h=0;h<c.length;++h)c[h]>1&&((c[h+1]===null||c[h+1]===void 0)&&(c[h+1]=0),c[h+1]+=c[h]>>1,c[h]&=1)}return c.reverse()}function TY(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitXor");var n=t.constructor;if(t.isNaN()||e.isNaN())return new n(NaN);if(t.isZero())return e;if(e.isZero())return t;if(t.eq(e))return new n(0);var r=new n(-1);return t.eq(r)?yh(e):e.eq(r)?yh(t):!t.isFinite()||!e.isFinite()?!t.isFinite()&&!e.isFinite()?r:new n(t.isNegative()===e.isNegative()?1/0:-1/0):J2(t,e,function(i,a){return i^a})}function MY(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function leftShift");var n=t.constructor;return t.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new n(NaN):t.isZero()||e.isZero()?t:!t.isFinite()&&!e.isFinite()?new n(NaN):e.lt(55)?t.times(Math.pow(2,e.toNumber())+""):t.times(new n(2).pow(e))}function IY(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function rightArithShift");var n=t.constructor;return t.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new n(NaN):t.isZero()||e.isZero()?t:e.isFinite()?e.lt(55)?t.div(Math.pow(2,e.toNumber())+"").floor():t.div(new n(2).pow(e)).floor():t.isNegative()?new n(-1):t.isFinite()?new n(0):new n(NaN)}var LD="bitAnd",RY=["typed","matrix","equalScalar","concat"],UO=z(LD,RY,t=>{var{typed:e,matrix:n,equalScalar:r,concat:i}=t,a=Ra({typed:e,equalScalar:r}),o=O0({typed:e,equalScalar:r}),s=xr({typed:e,equalScalar:r}),u=Zt({typed:e,matrix:n,concat:i});return e(LD,{"number, number":lO,"BigNumber, BigNumber":DY,"bigint, bigint":(l,c)=>l&c},u({SS:o,DS:a,Ss:s}))}),jD="bitNot",kY=["typed"],FY=z(jD,kY,t=>{var{typed:e}=t;return e(jD,{number:cO,BigNumber:yh,bigint:n=>~n,"Array | Matrix":e.referToSelf(n=>r=>pt(r,n))})}),$D="bitOr",PY=["typed","matrix","equalScalar","DenseMatrix","concat"],WO=z($D,PY,t=>{var{typed:e,matrix:n,equalScalar:r,DenseMatrix:i,concat:a}=t,o=su({typed:e}),s=Q2({typed:e,equalScalar:r}),u=yl({typed:e,DenseMatrix:i}),l=Zt({typed:e,matrix:n,concat:a});return e($D,{"number, number":fO,"BigNumber, BigNumber":AY,"bigint, bigint":(c,f)=>c|f},l({SS:s,DS:o,Ss:u}))}),OY="matAlgo07xSSf",BY=["typed","SparseMatrix"],io=z(OY,BY,t=>{var{typed:e,SparseMatrix:n}=t;return function(a,o,s){var u=a._size,l=a._datatype||a._data===void 0?a._datatype:a.getDataType(),c=o._size,f=o._datatype||o._data===void 0?o._datatype:o.getDataType();if(u.length!==c.length)throw new bt(u.length,c.length);if(u[0]!==c[0]||u[1]!==c[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+c+")");var d=u[0],h=u[1],p,m=0,g=s;typeof l=="string"&&l===f&&l!=="mixed"&&(p=l,m=e.convert(0,p),g=e.find(s,[p,p]));for(var v=[],x=[],y=new Array(h+1).fill(0),b=[],w=[],_=[],E=[],C=0;C<h;C++){var N=C+1,D=0;r(a,C,_,b,N),r(o,C,E,w,N);for(var A=0;A<d;A++){var T=_[A]===N?b[A]:m,k=E[A]===N?w[A]:m,F=g(T,k);F!==0&&F!==!1&&(x.push(A),v.push(F),D++)}y[C+1]=y[C]+D}return new n({values:v,index:x,ptr:y,size:[d,h],datatype:l===a._datatype&&f===o._datatype?p:void 0})};function r(i,a,o,s,u){for(var l=i._values,c=i._index,f=i._ptr,d=f[a],h=f[a+1];d<h;d++){var p=c[d];o[p]=u,s[p]=l[d]}}}),zD="bitXor",LY=["typed","matrix","DenseMatrix","concat","SparseMatrix"],jY=z(zD,LY,t=>{var{typed:e,matrix:n,DenseMatrix:r,concat:i,SparseMatrix:a}=t,o=Xr({typed:e}),s=io({typed:e,SparseMatrix:a}),u=Hn({typed:e,DenseMatrix:r}),l=Zt({typed:e,matrix:n,concat:i});return e(zD,{"number, number":dO,"BigNumber, BigNumber":TY,"bigint, bigint":(c,f)=>c^f},l({SS:s,DS:o,Ss:u}))}),UD="arg",$Y=["typed"],zY=z(UD,$Y,t=>{var{typed:e}=t;return e(UD,{number:function(r){return Math.atan2(0,r)},BigNumber:function(r){return r.constructor.atan2(0,r)},Complex:function(r){return r.arg()},"Array | Matrix":e.referToSelf(n=>r=>pt(r,n))})}),WD="conj",UY=["typed"],WY=z(WD,UY,t=>{var{typed:e}=t;return e(WD,{"number | BigNumber | Fraction":n=>n,Complex:n=>n.conjugate(),"Array | Matrix":e.referToSelf(n=>r=>pt(r,n))})}),VD="im",VY=["typed"],qY=z(VD,VY,t=>{var{typed:e}=t;return e(VD,{number:()=>0,"BigNumber | Fraction":n=>n.mul(0),Complex:n=>n.im,"Array | Matrix":e.referToSelf(n=>r=>pt(r,n))})}),qD="re",HY=["typed"],GY=z(qD,HY,t=>{var{typed:e}=t;return e(qD,{"number | BigNumber | Fraction":n=>n,Complex:n=>n.re,"Array | Matrix":e.referToSelf(n=>r=>pt(r,n))})}),HD="not",KY=["typed"],YY=z(HD,KY,t=>{var{typed:e}=t;return e(HD,{"null | undefined":()=>!0,number:gO,Complex:function(r){return r.re===0&&r.im===0},BigNumber:function(r){return r.isZero()||r.isNaN()},bigint:n=>!n,Unit:e.referToSelf(n=>r=>e.find(n,r.valueType())(r.value)),"Array | Matrix":e.referToSelf(n=>r=>pt(r,n))})}),GD="or",XY=["typed","matrix","equalScalar","DenseMatrix","concat"],VO=z(GD,XY,t=>{var{typed:e,matrix:n,equalScalar:r,DenseMatrix:i,concat:a}=t,o=Xr({typed:e}),s=P0({typed:e,equalScalar:r}),u=Hn({typed:e,DenseMatrix:i}),l=Zt({typed:e,matrix:n,concat:a});return e(GD,{"number, number":Eb,"Complex, Complex":function(f,d){return f.re!==0||f.im!==0||d.re!==0||d.im!==0},"BigNumber, BigNumber":function(f,d){return!f.isZero()&&!f.isNaN()||!d.isZero()&&!d.isNaN()},"bigint, bigint":Eb,"Unit, Unit":e.referToSelf(c=>(f,d)=>c(f.value||0,d.value||0))},l({SS:s,DS:o,Ss:u}))}),KD="xor",QY=["typed","matrix","DenseMatrix","concat","SparseMatrix"],ZY=z(KD,QY,t=>{var{typed:e,matrix:n,DenseMatrix:r,concat:i,SparseMatrix:a}=t,o=Xr({typed:e}),s=io({typed:e,SparseMatrix:a}),u=Hn({typed:e,DenseMatrix:r}),l=Zt({typed:e,matrix:n,concat:i});return e(KD,{"number, number":Cb,"Complex, Complex":function(f,d){return(f.re!==0||f.im!==0)!=(d.re!==0||d.im!==0)},"bigint, bigint":Cb,"BigNumber, BigNumber":function(f,d){return(!f.isZero()&&!f.isNaN())!=(!d.isZero()&&!d.isNaN())},"Unit, Unit":e.referToSelf(c=>(f,d)=>c(f.value||0,d.value||0))},l({SS:s,DS:o,Ss:u}))}),YD="concat",JY=["typed","matrix","isInteger"],qO=z(YD,JY,t=>{var{typed:e,matrix:n,isInteger:r}=t;return e(YD,{"...Array | Matrix | number | BigNumber":function(a){var o,s=a.length,u=-1,l,c=!1,f=[];for(o=0;o<s;o++){var d=a[o];if(Je(d)&&(c=!0),dt(d)||ht(d)){if(o!==s-1)throw new Error("Dimension must be specified as last argument");if(l=u,u=d.valueOf(),!r(u))throw new TypeError("Integer number expected for dimension");if(u<0||o>0&&u>l)throw new Ta(u,l+1)}else{var h=ut(d).valueOf(),p=ot(h);if(f[o]=h,l=u,u=p.length-1,o>0&&u!==l)throw new bt(l+1,u+1)}}if(f.length===0)throw new SyntaxError("At least one matrix expected");for(var m=f.shift();f.length;)m=HP(m,f.shift(),u);return c?n(m):m},"...string":function(a){return a.join("")}})}),XD="column",eX=["typed","Index","matrix","range"],HO=z(XD,eX,t=>{var{typed:e,Index:n,matrix:r,range:i}=t;return e(XD,{"Matrix, number":a,"Array, number":function(s,u){return a(r(ut(s)),u).valueOf()}});function a(o,s){if(o.size().length!==2)throw new Error("Only two dimensional matrix is supported");Yt(s,o.size()[1]);var u=i(0,o.size()[0]),l=new n(u,s),c=o.subset(l);return Je(c)?c:r([[c]])}}),QD="count",tX=["typed","size","prod"],nX=z(QD,tX,t=>{var{typed:e,size:n,prod:r}=t;return e(QD,{string:function(a){return a.length},"Matrix | Array":function(a){return r(n(a))}})}),ZD="cross",rX=["typed","matrix","subtract","multiply"],iX=z(ZD,rX,t=>{var{typed:e,matrix:n,subtract:r,multiply:i}=t;return e(ZD,{"Matrix, Matrix":function(s,u){return n(a(s.toArray(),u.toArray()))},"Matrix, Array":function(s,u){return n(a(s.toArray(),u))},"Array, Matrix":function(s,u){return n(a(s,u.toArray()))},"Array, Array":a});function a(o,s){var u=Math.max(ot(o).length,ot(s).length);o=zv(o),s=zv(s);var l=ot(o),c=ot(s);if(l.length!==1||c.length!==1||l[0]!==3||c[0]!==3)throw new RangeError("Vectors with length 3 expected (Size A = ["+l.join(", ")+"], B = ["+c.join(", ")+"])");var f=[r(i(o[1],s[2]),i(o[2],s[1])),r(i(o[2],s[0]),i(o[0],s[2])),r(i(o[0],s[1]),i(o[1],s[0]))];return u>1?[f]:f}}),JD="diag",aX=["typed","matrix","DenseMatrix","SparseMatrix"],oX=z(JD,aX,t=>{var{typed:e,matrix:n,DenseMatrix:r,SparseMatrix:i}=t;return e(JD,{Array:function(l){return a(l,0,ot(l),null)},"Array, number":function(l,c){return a(l,c,ot(l),null)},"Array, BigNumber":function(l,c){return a(l,c.toNumber(),ot(l),null)},"Array, string":function(l,c){return a(l,0,ot(l),c)},"Array, number, string":function(l,c,f){return a(l,c,ot(l),f)},"Array, BigNumber, string":function(l,c,f){return a(l,c.toNumber(),ot(l),f)},Matrix:function(l){return a(l,0,l.size(),l.storage())},"Matrix, number":function(l,c){return a(l,c,l.size(),l.storage())},"Matrix, BigNumber":function(l,c){return a(l,c.toNumber(),l.size(),l.storage())},"Matrix, string":function(l,c){return a(l,0,l.size(),c)},"Matrix, number, string":function(l,c,f){return a(l,c,l.size(),f)},"Matrix, BigNumber, string":function(l,c,f){return a(l,c.toNumber(),l.size(),f)}});function a(u,l,c,f){if(!qe(l))throw new TypeError("Second parameter in function diag must be an integer");var d=l>0?l:0,h=l<0?-l:0;switch(c.length){case 1:return o(u,l,f,c[0],h,d);case 2:return s(u,l,f,c,h,d)}throw new RangeError("Matrix for function diag must be 2 dimensional")}function o(u,l,c,f,d,h){var p=[f+d,f+h];if(c&&c!=="sparse"&&c!=="dense")throw new TypeError("Unknown matrix type ".concat(c,'"'));var m=c==="sparse"?i.diagonal(p,u,l):r.diagonal(p,u,l);return c!==null?m:m.valueOf()}function s(u,l,c,f,d,h){if(Je(u)){var p=u.diagonal(l);return c!==null?c!==p.storage()?n(p,c):p:p.valueOf()}for(var m=Math.min(f[0]-d,f[1]-h),g=[],v=0;v<m;v++)g[v]=u[v+d][v+h];return c!==null?n(g):g}}),sX="filter",uX=["typed"],GO=z(sX,uX,t=>{var{typed:e}=t;return e("filter",{"Array, function":eA,"Matrix, function":function(r,i){return r.create(eA(r.valueOf(),i),r.datatype())},"Array, RegExp":qS,"Matrix, RegExp":function(r,i){return r.create(qS(r.valueOf(),i),r.datatype())}})});function eA(t,e){var n=il(e,t,"filter");return n.isUnary?VS(t,n.fn):VS(t,function(r,i,a){return n.fn(r,[i],a)})}var tA="flatten",lX=["typed"],cX=z(tA,lX,t=>{var{typed:e}=t;return e(tA,{Array:function(r){return Ft(r)},Matrix:function(r){return r.create(Ft(r.valueOf(),!0),r.datatype())}})}),Mb="forEach",fX=["typed"],KO=z(Mb,fX,t=>{var{typed:e}=t;return e(Mb,{"Array, function":dX,"Matrix, function":function(r,i){r.forEach(i)}})});function dX(t,e){var n=il(e,t,Mb);KP(t,n.fn,n.isUnary)}var nA="getMatrixDataType",hX=["typed"],pX=z(nA,hX,t=>{var{typed:e}=t;return e(nA,{Array:function(r){return k0(r,Qt)},Matrix:function(r){return r.getDataType()}})}),rA="identity",mX=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],vX=z(rA,mX,t=>{var{typed:e,config:n,matrix:r,BigNumber:i,DenseMatrix:a,SparseMatrix:o}=t;return e(rA,{"":function(){return n.matrix==="Matrix"?r([]):[]},string:function(c){return r(c)},"number | BigNumber":function(c){return u(c,c,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(c,f){return u(c,c,f)},"number | BigNumber, number | BigNumber":function(c,f){return u(c,f,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(c,f,d){return u(c,f,d)},Array:function(c){return s(c)},"Array, string":function(c,f){return s(c,f)},Matrix:function(c){return s(c.valueOf(),c.storage())},"Matrix, string":function(c,f){return s(c.valueOf(),f)}});function s(l,c){switch(l.length){case 0:return c?r(c):[];case 1:return u(l[0],l[0],c);case 2:return u(l[0],l[1],c);default:throw new Error("Vector containing two values expected")}}function u(l,c,f){var d=ht(l)||ht(c)?i:null;if(ht(l)&&(l=l.toNumber()),ht(c)&&(c=c.toNumber()),!qe(l)||l<1)throw new Error("Parameters in function identity must be positive integers");if(!qe(c)||c<1)throw new Error("Parameters in function identity must be positive integers");var h=d?new i(1):1,p=d?new d(0):0,m=[l,c];if(f){if(f==="sparse")return o.diagonal(m,h,0,p);if(f==="dense")return a.diagonal(m,h,0,p);throw new TypeError('Unknown matrix type "'.concat(f,'"'))}for(var g=Zc([],m,p),v=l<c?l:c,x=0;x<v;x++)g[x][x]=h;return g}}),iA="kron",gX=["typed","matrix","multiplyScalar"],yX=z(iA,gX,t=>{var{typed:e,matrix:n,multiplyScalar:r}=t;return e(iA,{"Matrix, Matrix":function(o,s){return n(i(o.toArray(),s.toArray()))},"Matrix, Array":function(o,s){return n(i(o.toArray(),s))},"Array, Matrix":function(o,s){return n(i(o,s.toArray()))},"Array, Array":i});function i(a,o){if(ot(a).length===1&&(a=[a]),ot(o).length===1&&(o=[o]),ot(a).length>2||ot(o).length>2)throw new RangeError("Vectors with dimensions greater then 2 are not supported expected (Size x = "+JSON.stringify(a.length)+", y = "+JSON.stringify(o.length)+")");var s=[],u=[];return a.map(function(l){return o.map(function(c){return u=[],s.push(u),l.map(function(f){return c.map(function(d){return u.push(r(f,d))})})})})&&s}}),s1="map",xX=["typed"],YO=z(s1,xX,t=>{var{typed:e}=t;return e(s1,{"Array, function":r,"Matrix, function":function(a,o){return a.map(o)},"Array|Matrix, Array|Matrix, ...Array|Matrix|function":(i,a,o)=>n([i,a,...o.slice(0,o.length-1)],o[o.length-1])});function n(i,a){if(typeof a!="function")throw new Error("Last argument must be a callback function");var o=i[0].isMatrix,s=G2(...i.map(b=>b.isMatrix?b.size():ot(b))),u=o?(b,w)=>b.get(w):K2,l=o?i.map(b=>b.isMatrix?b.create($u(b.toArray(),s),b.datatype()):i[0].create($u(b.valueOf(),s))):i.map(b=>b.isMatrix?$u(b.toArray(),s):$u(b,s)),c;if(e.isTypedFunction(a)){var f=s.map(()=>0),d=l.map(b=>u(b,f)),h=y(a,d,f,l);c=v(h)}else{var p=i.length,m=x(a,p);c=v(m)}var g=(b,w)=>c([b,...l.slice(1).map(_=>u(_,w))],w);if(o)return l[0].map(g);return r(l[0],g);function v(b){switch(b){case 0:return w=>a(...w);case 1:return(w,_)=>a(...w,_);case 2:return(w,_)=>a(...w,_,...l)}}function x(b,w){return b.length>w+1?2:b.length===w+1?1:0}function y(b,w,_,E){return e.resolve(b,[...w,_,...E])!==null?2:e.resolve(b,[...w,_])!==null?1:(e.resolve(b,w)!==null,0)}}function r(i,a){var o=il(a,i,s1);return bb(i,o.fn,o.isUnary)}}),aA="diff",bX=["typed","matrix","subtract","number"],XO=z(aA,bX,t=>{var{typed:e,matrix:n,subtract:r,number:i}=t;return e(aA,{"Array | Matrix":function(c){return Je(c)?n(o(c.toArray())):o(c)},"Array | Matrix, number":function(c,f){if(!qe(f))throw new RangeError("Dimension must be a whole number");return Je(c)?n(a(c.toArray(),f)):a(c,f)},"Array, BigNumber":e.referTo("Array,number",l=>(c,f)=>l(c,i(f))),"Matrix, BigNumber":e.referTo("Matrix,number",l=>(c,f)=>l(c,i(f)))});function a(l,c){if(Je(l)&&(l=l.toArray()),!Array.isArray(l))throw RangeError("Array/Matrix does not have that many dimensions");if(c>0){var f=[];return l.forEach(d=>{f.push(a(d,c-1))}),f}else{if(c===0)return o(l);throw RangeError("Cannot have negative dimension")}}function o(l){for(var c=[],f=l.length,d=1;d<f;d++)c.push(s(l[d-1],l[d]));return c}function s(l,c){Je(l)&&(l=l.toArray()),Je(c)&&(c=c.toArray());var f=Array.isArray(l),d=Array.isArray(c);if(f&&d)return u(l,c);if(!f&&!d)return r(c,l);throw TypeError("Cannot calculate difference between 1 array and 1 non-array")}function u(l,c){if(l.length!==c.length)throw RangeError("Not all sub-arrays have the same length");for(var f=[],d=l.length,h=0;h<d;h++)f.push(s(l[h],c[h]));return f}}),wX="ones",_X=["typed","config","matrix","BigNumber"],EX=z(wX,_X,t=>{var{typed:e,config:n,matrix:r,BigNumber:i}=t;return e("ones",{"":function(){return n.matrix==="Array"?a([]):a([],"default")},"...number | BigNumber | string":function(l){var c=l[l.length-1];if(typeof c=="string"){var f=l.pop();return a(l,f)}else return n.matrix==="Array"?a(l):a(l,"default")},Array:a,Matrix:function(l){var c=l.storage();return a(l.valueOf(),c)},"Array | Matrix, string":function(l,c){return a(l.valueOf(),c)}});function a(u,l){var c=o(u),f=c?new i(1):1;if(s(u),l){var d=r(l);return u.length>0?d.resize(u,f):d}else{var h=[];return u.length>0?Zc(h,u,f):h}}function o(u){var l=!1;return u.forEach(function(c,f,d){ht(c)&&(l=!0,d[f]=c.toNumber())}),l}function s(u){u.forEach(function(l){if(typeof l!="number"||!qe(l)||l<0)throw new Error("Parameters in function ones must be positive integers")})}});function e_(){throw new Error('No "bignumber" implementation available')}function QO(){throw new Error('No "fraction" implementation available')}function ZO(){throw new Error('No "matrix" implementation available')}var oA="range",CX=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq","add","isPositive"],JO=z(oA,CX,t=>{var{typed:e,config:n,matrix:r,bignumber:i,smaller:a,smallerEq:o,larger:s,largerEq:u,add:l,isPositive:c}=t;return e(oA,{string:d,"string, boolean":d,number:function(g){throw new TypeError("Too few arguments to function range(): ".concat(g))},boolean:function(g){throw new TypeError("Unexpected type of argument 1 to function range(): ".concat(g,", number|bigint|BigNumber|Fraction"))},"number, number":function(g,v){return f(h(g,v,1,!1))},"number, number, number":function(g,v,x){return f(h(g,v,x,!1))},"number, number, boolean":function(g,v,x){return f(h(g,v,1,x))},"number, number, number, boolean":function(g,v,x,y){return f(h(g,v,x,y))},"bigint, bigint|number":function(g,v){return f(h(g,v,1n,!1))},"number, bigint":function(g,v){return f(h(BigInt(g),v,1n,!1))},"bigint, bigint|number, bigint|number":function(g,v,x){return f(h(g,v,BigInt(x),!1))},"number, bigint, bigint|number":function(g,v,x){return f(h(BigInt(g),v,BigInt(x),!1))},"bigint, bigint|number, boolean":function(g,v,x){return f(h(g,v,1n,x))},"number, bigint, boolean":function(g,v,x){return f(h(BigInt(g),v,1n,x))},"bigint, bigint|number, bigint|number, boolean":function(g,v,x,y){return f(h(g,v,BigInt(x),y))},"number, bigint, bigint|number, boolean":function(g,v,x,y){return f(h(BigInt(g),v,BigInt(x),y))},"BigNumber, BigNumber":function(g,v){var x=g.constructor;return f(h(g,v,new x(1),!1))},"BigNumber, BigNumber, BigNumber":function(g,v,x){return f(h(g,v,x,!1))},"BigNumber, BigNumber, boolean":function(g,v,x){var y=g.constructor;return f(h(g,v,new y(1),x))},"BigNumber, BigNumber, BigNumber, boolean":function(g,v,x,y){return f(h(g,v,x,y))},"Fraction, Fraction":function(g,v){return f(h(g,v,1,!1))},"Fraction, Fraction, Fraction":function(g,v,x){return f(h(g,v,x,!1))},"Fraction, Fraction, boolean":function(g,v,x){return f(h(g,v,1,x))},"Fraction, Fraction, Fraction, boolean":function(g,v,x,y){return f(h(g,v,x,y))},"Unit, Unit, Unit":function(g,v,x){return f(h(g,v,x,!1))},"Unit, Unit, Unit, boolean":function(g,v,x,y){return f(h(g,v,x,y))}});function f(m){return n.matrix==="Matrix"?r?r(m):ZO():m}function d(m,g){var v=p(m);if(!v)throw new SyntaxError('String "'+m+'" is no valid range');return n.number==="BigNumber"?(i===void 0&&e_(),f(h(i(v.start),i(v.end),i(v.step)))):f(h(v.start,v.end,v.step,g))}function h(m,g,v,x){for(var y=[],b=c(v)?x?o:a:x?u:s,w=m;b(w,g);)y.push(w),w=l(w,v);return y}function p(m){var g=m.split(":"),v=g.map(function(y){return Number(y)}),x=v.some(function(y){return isNaN(y)});if(x)return null;switch(v.length){case 2:return{start:v[0],end:v[1],step:1};case 3:return{start:v[0],end:v[2],step:v[1]};default:return null}}}),sA="reshape",NX=["typed","isInteger","matrix"],SX=z(sA,NX,t=>{var{typed:e,isInteger:n}=t;return e(sA,{"Matrix, Array":function(i,a){return i.reshape(a,!0)},"Array, Array":function(i,a){return a.forEach(function(o){if(!n(o))throw new TypeError("Invalid size for dimension: "+o)}),q2(i,a)}})}),DX="resize",AX=["config","matrix"],TX=z(DX,AX,t=>{var{config:e,matrix:n}=t;return function(a,o,s){if(arguments.length!==2&&arguments.length!==3)throw new xl("resize",arguments.length,2,3);if(Je(o)&&(o=o.valueOf()),ht(o[0])&&(o=o.map(function(c){return ht(c)?c.toNumber():c})),Je(a))return a.resize(o,s,!0);if(typeof a=="string")return r(a,o,s);var u=Array.isArray(a)?!1:e.matrix!=="Array";if(o.length===0){for(;Array.isArray(a);)a=a[0];return ut(a)}else{Array.isArray(a)||(a=[a]),a=ut(a);var l=Zc(a,o,s);return u?n(l):l}};function r(i,a,o){if(o!==void 0){if(typeof o!="string"||o.length!==1)throw new TypeError("Single character expected as defaultValue")}else o=" ";if(a.length!==1)throw new bt(a.length,1);var s=a[0];if(typeof s!="number"||!qe(s))throw new TypeError("Invalid size, must contain positive integers (size: "+xt(a)+")");if(i.length>s)return i.substring(0,s);if(i.length<s){for(var u=i,l=0,c=s-i.length;l<c;l++)u+=o;return u}else return i}}),uA="rotate",MX=["typed","multiply","rotationMatrix"],IX=z(uA,MX,t=>{var{typed:e,multiply:n,rotationMatrix:r}=t;return e(uA,{"Array , number | BigNumber | Complex | Unit":function(o,s){i(o,2);var u=n(r(s),o);return u.toArray()},"Matrix , number | BigNumber | Complex | Unit":function(o,s){return i(o,2),n(r(s),o)},"Array, number | BigNumber | Complex | Unit, Array | Matrix":function(o,s,u){i(o,3);var l=n(r(s,u),o);return l},"Matrix, number | BigNumber | Complex | Unit, Array | Matrix":function(o,s,u){return i(o,3),n(r(s,u),o)}});function i(a,o){var s=Array.isArray(a)?ot(a):a.size();if(s.length>2)throw new RangeError("Vector must be of dimensions 1x".concat(o));if(s.length===2&&s[1]!==1)throw new RangeError("Vector must be of dimensions 1x".concat(o));if(s[0]!==o)throw new RangeError("Vector must be of dimensions 1x".concat(o))}}),lA="rotationMatrix",RX=["typed","config","multiplyScalar","addScalar","unaryMinus","norm","matrix","BigNumber","DenseMatrix","SparseMatrix","cos","sin"],kX=z(lA,RX,t=>{var{typed:e,config:n,multiplyScalar:r,addScalar:i,unaryMinus:a,norm:o,BigNumber:s,matrix:u,DenseMatrix:l,SparseMatrix:c,cos:f,sin:d}=t;return e(lA,{"":function(){return n.matrix==="Matrix"?u([]):[]},string:function(y){return u(y)},"number | BigNumber | Complex | Unit":function(y){return h(y,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber | Complex | Unit, string":function(y,b){return h(y,b)},"number | BigNumber | Complex | Unit, Array":function(y,b){var w=u(b);return p(w),v(y,w,void 0)},"number | BigNumber | Complex | Unit, Matrix":function(y,b){p(b);var w=b.storage()||(n.matrix==="Matrix"?"dense":void 0);return v(y,b,w)},"number | BigNumber | Complex | Unit, Array, string":function(y,b,w){var _=u(b);return p(_),v(y,_,w)},"number | BigNumber | Complex | Unit, Matrix, string":function(y,b,w){return p(b),v(y,b,w)}});function h(x,y){var b=ht(x),w=b?new s(-1):-1,_=f(x),E=d(x),C=[[_,r(w,E)],[E,_]];return g(C,y)}function p(x){var y=x.size();if(y.length<1||y[0]!==3)throw new RangeError("Vector must be of dimensions 1x3")}function m(x){return x.reduce((y,b)=>r(y,b))}function g(x,y){if(y){if(y==="sparse")return new c(x);if(y==="dense")return new l(x);throw new TypeError('Unknown matrix type "'.concat(y,'"'))}return x}function v(x,y,b){var w=o(y);if(w===0)throw new RangeError("Rotation around zero vector");var _=ht(x)?s:null,E=_?new _(1):1,C=_?new _(-1):-1,N=_?new _(y.get([0])/w):y.get([0])/w,D=_?new _(y.get([1])/w):y.get([1])/w,A=_?new _(y.get([2])/w):y.get([2])/w,T=f(x),k=i(E,a(T)),F=d(x),O=i(T,m([N,N,k])),I=i(m([N,D,k]),m([C,A,F])),M=i(m([N,A,k]),m([D,F])),B=i(m([N,D,k]),m([A,F])),R=i(T,m([D,D,k])),j=i(m([D,A,k]),m([C,N,F])),K=i(m([N,A,k]),m([C,D,F])),V=i(m([D,A,k]),m([N,F])),L=i(T,m([A,A,k])),ne=[[O,I,M],[B,R,j],[K,V,L]];return g(ne,b)}}),cA="row",FX=["typed","Index","matrix","range"],eB=z(cA,FX,t=>{var{typed:e,Index:n,matrix:r,range:i}=t;return e(cA,{"Matrix, number":a,"Array, number":function(s,u){return a(r(ut(s)),u).valueOf()}});function a(o,s){if(o.size().length!==2)throw new Error("Only two dimensional matrix is supported");Yt(s,o.size()[0]);var u=i(0,o.size()[1]),l=new n(s,u),c=o.subset(l);return Je(c)?c:r([[c]])}}),fA="size",PX=["typed","config","?matrix"],OX=z(fA,PX,t=>{var{typed:e,config:n,matrix:r}=t;return e(fA,{Matrix:function(a){return a.create(a.size(),"number")},Array:ot,string:function(a){return n.matrix==="Array"?[a.length]:r([a.length],"dense","number")},"number | Complex | BigNumber | Unit | boolean | null":function(a){return n.matrix==="Array"?[]:r?r([],"dense","number"):ZO()}})}),dA="squeeze",BX=["typed"],LX=z(dA,BX,t=>{var{typed:e}=t;return e(dA,{Array:function(r){return zv(ut(r))},Matrix:function(r){var i=zv(r.toArray());return Array.isArray(i)?r.create(i,r.datatype()):i},any:function(r){return ut(r)}})}),hA="subset",jX=["typed","matrix","zeros","add"],tB=z(hA,jX,t=>{var{typed:e,matrix:n,zeros:r,add:i}=t;return e(hA,{"Matrix, Index":function(s,u){return Qc(u)?n():($v(s,u),s.subset(u))},"Array, Index":e.referTo("Matrix, Index",function(o){return function(s,u){var l=o(n(s),u);return u.isScalar()?l:l.valueOf()}}),"Object, Index":zX,"string, Index":$X,"Matrix, Index, any, any":function(s,u,l,c){return Qc(u)?s:($v(s,u),s.clone().subset(u,a(l,u),c))},"Array, Index, any, any":e.referTo("Matrix, Index, any, any",function(o){return function(s,u,l,c){var f=o(n(s),u,l,c);return f.isMatrix?f.valueOf():f}}),"Array, Index, any":e.referTo("Matrix, Index, any, any",function(o){return function(s,u,l){return o(n(s),u,l,void 0).valueOf()}}),"Matrix, Index, any":e.referTo("Matrix, Index, any, any",function(o){return function(s,u,l){return o(s,u,l,void 0)}}),"string, Index, string":pA,"string, Index, string, string":pA,"Object, Index, any":UX});function a(o,s){if(typeof o=="string")throw new Error("can't boradcast a string");if(s._isScalar)return o;var u=s.size();if(u.every(l=>l>0))try{return i(o,r(u))}catch{return o}else return o}});function $X(t,e){if(!S0(e))throw new TypeError("Index expected");if(Qc(e))return"";if($v(Array.from(t),e),e.size().length!==1)throw new bt(e.size().length,1);var n=t.length;Yt(e.min()[0],n),Yt(e.max()[0],n);var r=e.dimension(0),i="";return r.forEach(function(a){i+=t.charAt(a)}),i}function pA(t,e,n,r){if(!e||e.isIndex!==!0)throw new TypeError("Index expected");if(Qc(e))return t;if($v(Array.from(t),e),e.size().length!==1)throw new bt(e.size().length,1);if(r!==void 0){if(typeof r!="string"||r.length!==1)throw new TypeError("Single character expected as defaultValue")}else r=" ";var i=e.dimension(0),a=i.size()[0];if(a!==n.length)throw new bt(i.size()[0],n.length);var o=t.length;Yt(e.min()[0]),Yt(e.max()[0]);for(var s=[],u=0;u<o;u++)s[u]=t.charAt(u);if(i.forEach(function(f,d){s[f]=n.charAt(d[0])}),s.length>o)for(var l=o-1,c=s.length;l<c;l++)s[l]||(s[l]=r);return s.join("")}function zX(t,e){if(!Qc(e)){if(e.size().length!==1)throw new bt(e.size(),1);var n=e.dimension(0);if(typeof n!="string")throw new TypeError("String expected as index to retrieve an object property");return Wr(t,n)}}function UX(t,e,n){if(Qc(e))return t;if(e.size().length!==1)throw new bt(e.size(),1);var r=e.dimension(0);if(typeof r!="string")throw new TypeError("String expected as index to retrieve an object property");var i=ut(t);return Yc(i,r,n),i}var mA="transpose",WX=["typed","matrix"],VX=z(mA,WX,t=>{var{typed:e,matrix:n}=t;return e(mA,{Array:o=>r(n(o)).valueOf(),Matrix:r,any:ut});function r(o){var s=o.size(),u;switch(s.length){case 1:u=o.clone();break;case 2:{var l=s[0],c=s[1];if(c===0)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+xt(s)+")");switch(o.storage()){case"dense":u=i(o,l,c);break;case"sparse":u=a(o,l,c);break}}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+xt(s)+")")}return u}function i(o,s,u){for(var l=o._data,c=[],f,d=0;d<u;d++){f=c[d]=[];for(var h=0;h<s;h++)f[h]=ut(l[h][d])}return o.createDenseMatrix({data:c,size:[u,s],datatype:o._datatype})}function a(o,s,u){for(var l=o._values,c=o._index,f=o._ptr,d=l?[]:void 0,h=[],p=[],m=[],g=0;g<s;g++)m[g]=0;var v,x,y;for(v=0,x=c.length;v<x;v++)m[c[v]]++;for(var b=0,w=0;w<s;w++)p.push(b),b+=m[w],m[w]=p[w];for(p.push(b),y=0;y<u;y++)for(var _=f[y],E=f[y+1],C=_;C<E;C++){var N=m[c[C]]++;h[N]=y,l&&(d[N]=ut(l[C]))}return o.createSparseMatrix({values:d,index:h,ptr:p,size:[u,s],datatype:o._datatype})}}),vA="ctranspose",qX=["typed","transpose","conj"],HX=z(vA,qX,t=>{var{typed:e,transpose:n,conj:r}=t;return e(vA,{any:function(a){return r(n(a))}})}),gA="zeros",GX=["typed","config","matrix","BigNumber"],KX=z(gA,GX,t=>{var{typed:e,config:n,matrix:r,BigNumber:i}=t;return e(gA,{"":function(){return n.matrix==="Array"?a([]):a([],"default")},"...number | BigNumber | string":function(l){var c=l[l.length-1];if(typeof c=="string"){var f=l.pop();return a(l,f)}else return n.matrix==="Array"?a(l):a(l,"default")},Array:a,Matrix:function(l){var c=l.storage();return a(l.valueOf(),c)},"Array | Matrix, string":function(l,c){return a(l.valueOf(),c)}});function a(u,l){var c=o(u),f=c?new i(0):0;if(s(u),l){var d=r(l);return u.length>0?d.resize(u,f):d}else{var h=[];return u.length>0?Zc(h,u,f):h}}function o(u){var l=!1;return u.forEach(function(c,f,d){ht(c)&&(l=!0,d[f]=c.toNumber())}),l}function s(u){u.forEach(function(l){if(typeof l!="number"||!qe(l)||l<0)throw new Error("Parameters in function zeros must be positive integers")})}}),yA="fft",YX=["typed","matrix","addScalar","multiplyScalar","divideScalar","exp","tau","i","dotDivide","conj","pow","ceil","log2"],XX=z(yA,YX,t=>{var{typed:e,matrix:n,addScalar:r,multiplyScalar:i,divideScalar:a,exp:o,tau:s,i:u,dotDivide:l,conj:c,pow:f,ceil:d,log2:h}=t;return e(yA,{Array:p,Matrix:function(y){return y.create(p(y.valueOf()),y.datatype())}});function p(x){var y=ot(x);return y.length===1?v(x,y[0]):m(x.map(b=>p(b,y.slice(1))),0)}function m(x,y){var b=ot(x);if(y!==0)return new Array(b[0]).fill(0).map((_,E)=>m(x[E],y-1));if(b.length===1)return v(x);function w(_){var E=ot(_);return new Array(E[1]).fill(0).map((C,N)=>new Array(E[0]).fill(0).map((D,A)=>_[A][N]))}return w(m(w(x),1))}function g(x){for(var y=x.length,b=o(a(i(-1,i(u,s)),y)),w=[],_=1-y;_<y;_++)w.push(f(b,a(f(_,2),2)));for(var E=f(2,d(h(y+y-1))),C=[...new Array(y).fill(0).map((I,M)=>i(x[M],w[y-1+M])),...new Array(E-y).fill(0)],N=[...new Array(y+y-1).fill(0).map((I,M)=>a(1,w[M])),...new Array(E-(y+y-1)).fill(0)],D=v(C),A=v(N),T=new Array(E).fill(0).map((I,M)=>i(D[M],A[M])),k=l(c(p(c(T))),E),F=[],O=y-1;O<y+y-1;O++)F.push(i(k[O],w[O]));return F}function v(x){var y=x.length;if(y===1)return[x[0]];if(y%2===0){for(var b=[...v(x.filter((C,N)=>N%2===0)),...v(x.filter((C,N)=>N%2===1))],w=0;w<y/2;w++){var _=b[w],E=i(b[w+y/2],o(i(i(s,u),a(-w,y))));b[w]=r(_,E),b[w+y/2]=r(_,i(-1,E))}return b}else return g(x)}}),xA="ifft",QX=["typed","fft","dotDivide","conj"],ZX=z(xA,QX,t=>{var{typed:e,fft:n,dotDivide:r,conj:i}=t;return e(xA,{"Array | Matrix":function(o){var s=Je(o)?o.size():ot(o);return r(i(n(i(o))),s.reduce((u,l)=>u*l,1))}})});function xh(t){"@babel/helpers - typeof";return xh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xh(t)}function JX(t,e){if(xh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(xh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function eQ(t){var e=JX(t,"string");return xh(e)=="symbol"?e:e+""}function Pn(t,e,n){return(e=eQ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tQ(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bA(Object(n),!0).forEach(function(r){Pn(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var nQ="solveODE",rQ=["typed","add","subtract","multiply","divide","max","map","abs","isPositive","isNegative","larger","smaller","matrix","bignumber","unaryMinus"],iQ=z(nQ,rQ,t=>{var{typed:e,add:n,subtract:r,multiply:i,divide:a,max:o,map:s,abs:u,isPositive:l,isNegative:c,larger:f,smaller:d,matrix:h,bignumber:p,unaryMinus:m}=t;function g(C){return function(N,D,A,T){var k=!(D.length===2&&(D.every(_)||D.every(Hi)));if(k)throw new Error('"tspan" must be an Array of two numeric values or two units [tStart, tEnd]');var F=D[0],O=D[1],I=f(O,F),M=T.firstStep;if(M!==void 0&&!l(M))throw new Error('"firstStep" must be positive');var B=T.maxStep;if(B!==void 0&&!l(B))throw new Error('"maxStep" must be positive');var R=T.minStep;if(R&&c(R))throw new Error('"minStep" must be positive or zero');var j=[F,O,M,R,B].filter(q=>q!==void 0);if(!(j.every(_)||j.every(Hi)))throw new Error('Inconsistent type of "t" dependant variables');for(var K=1,V=T.tol?T.tol:1e-4,L=T.minDelta?T.minDelta:.2,ne=T.maxDelta?T.maxDelta:5,fe=T.maxIter?T.maxIter:1e4,te=[F,O,...A,B,R].some(ht),[oe,H,U,Q]=te?[p(C.a),p(C.c),p(C.b),p(C.bp)]:[C.a,C.c,C.b,C.bp],re=M?I?M:m(M):a(r(O,F),K),ie=[F],de=[A],he=r(U,Q),$=0,G=0,ue=b(I),ce=w(I);ue(ie[$],O);){var ge=[];re=ce(ie[$],O,re),ge.push(N(ie[$],de[$]));for(var Ce=1;Ce<H.length;++Ce)ge.push(N(n(ie[$],i(H[Ce],re)),n(de[$],i(re,oe[Ce],ge))));var Ae=o(u(s(i(he,ge),q=>Hi(q)?q.value:q)));Ae<V&&V/Ae>1/4&&(ie.push(n(ie[$],re)),de.push(n(de[$],i(re,U,ge))),$++);var Pe=.84*(V/Ae)**(1/5);if(d(Pe,L)?Pe=L:f(Pe,ne)&&(Pe=ne),Pe=te?p(Pe):Pe,re=i(re,Pe),B&&f(u(re),B)?re=I?B:m(B):R&&d(u(re),R)&&(re=I?R:m(R)),G++,G>fe)throw new Error("Maximum number of iterations reached, try changing options")}return{t:ie,y:de}}}function v(C,N,D,A){var T=[[],[.5],[0,.75],[.2222222222222222,.3333333333333333,.4444444444444444]],k=[null,1/2,3/4,1],F=[2/9,1/3,4/9,0],O=[7/24,1/4,1/3,1/8],I={a:T,c:k,b:F,bp:O};return g(I)(C,N,D,A)}function x(C,N,D,A){var T=[[],[.2],[.075,.225],[.9777777777777777,-3.7333333333333334,3.5555555555555554],[2.9525986892242035,-11.595793324188385,9.822892851699436,-.2908093278463649],[2.8462752525252526,-10.757575757575758,8.906422717743473,.2784090909090909,-.2735313036020583],[.09114583333333333,0,.44923629829290207,.6510416666666666,-.322376179245283,.13095238095238096]],k=[null,1/5,3/10,4/5,8/9,1,1],F=[35/384,0,500/1113,125/192,-2187/6784,11/84,0],O=[5179/57600,0,7571/16695,393/640,-92097/339200,187/2100,1/40],I={a:T,c:k,b:F,bp:O};return g(I)(C,N,D,A)}function y(C,N,D,A){var T=A.method?A.method:"RK45",k={RK23:v,RK45:x};if(T.toUpperCase()in k){var F=tQ({},A);return delete F.method,k[T.toUpperCase()](C,N,D,F)}else{var O=Object.keys(k).map(M=>'"'.concat(M,'"')),I="".concat(O.slice(0,-1).join(", ")," and ").concat(O.slice(-1));throw new Error('Unavailable method "'.concat(T,'". Available methods are ').concat(I))}}function b(C){return C?d:f}function w(C){var N=C?f:d;return function(D,A,T){var k=n(D,T);return N(k,A)?r(A,D):T}}function _(C){return ht(C)||dt(C)}function E(C,N,D,A){var T=y(C,N.toArray(),D.toArray(),A);return{t:h(T.t),y:h(T.y)}}return e("solveODE",{"function, Array, Array, Object":y,"function, Matrix, Matrix, Object":E,"function, Array, Array":(C,N,D)=>y(C,N,D,{}),"function, Matrix, Matrix":(C,N,D)=>E(C,N,D,{}),"function, Array, number | BigNumber | Unit":(C,N,D)=>{var A=y(C,N,[D],{});return{t:A.t,y:A.y.map(T=>T[0])}},"function, Matrix, number | BigNumber | Unit":(C,N,D)=>{var A=y(C,N.toArray(),[D],{});return{t:h(A.t),y:h(A.y.map(T=>T[0]))}},"function, Array, number | BigNumber | Unit, Object":(C,N,D,A)=>{var T=y(C,N,[D],A);return{t:T.t,y:T.y.map(k=>k[0])}},"function, Matrix, number | BigNumber | Unit, Object":(C,N,D,A)=>{var T=y(C,N.toArray(),[D],A);return{t:h(T.t),y:h(T.y.map(k=>k[0]))}}})}),aQ="erf",oQ=["typed"],sQ=z(aQ,oQ,t=>{var{typed:e}=t;return e("name",{number:function(o){var s=Math.abs(o);return s>=cQ?_s(o):s<=uQ?_s(o)*n(s):s<=4?_s(o)*(1-r(s)):_s(o)*(1-i(s))},"Array | Matrix":e.referToSelf(a=>o=>pt(o,a))});function n(a){var o=a*a,s=mo[0][4]*o,u=o,l;for(l=0;l<3;l+=1)s=(s+mo[0][l])*o,u=(u+$l[0][l])*o;return a*(s+mo[0][3])/(u+$l[0][3])}function r(a){var o=mo[1][8]*a,s=a,u;for(u=0;u<7;u+=1)o=(o+mo[1][u])*a,s=(s+$l[1][u])*a;var l=(o+mo[1][7])/(s+$l[1][7]),c=parseInt(a*16)/16,f=(a-c)*(a+c);return Math.exp(-c*c)*Math.exp(-f)*l}function i(a){var o=1/(a*a),s=mo[2][5]*o,u=o,l;for(l=0;l<4;l+=1)s=(s+mo[2][l])*o,u=(u+$l[2][l])*o;var c=o*(s+mo[2][4])/(u+$l[2][4]);c=(lQ-c)/a,o=parseInt(a*16)/16;var f=(a-o)*(a+o);return Math.exp(-o*o)*Math.exp(-f)*c}}),uQ=.46875,lQ=.5641895835477563,mo=[[3.1611237438705655,113.86415415105016,377.485237685302,3209.3775891384694,.18577770618460315],[.5641884969886701,8.883149794388377,66.11919063714163,298.6351381974001,881.952221241769,1712.0476126340707,2051.0783778260716,1230.3393547979972,21531153547440383e-24],[.30532663496123236,.36034489994980445,.12578172611122926,.016083785148742275,.0006587491615298378,.016315387137302097]],$l=[[23.601290952344122,244.02463793444417,1282.6165260773723,2844.236833439171],[15.744926110709835,117.6939508913125,537.1811018620099,1621.3895745666903,3290.7992357334597,4362.619090143247,3439.3676741437216,1230.3393548037495],[2.568520192289822,1.8729528499234604,.5279051029514285,.06051834131244132,.0023352049762686918]],cQ=Math.pow(2,53),wA="zeta",fQ=["typed","config","multiply","pow","divide","factorial","equal","smallerEq","isNegative","gamma","sin","subtract","add","?Complex","?BigNumber","pi"],dQ=z(wA,fQ,t=>{var{typed:e,config:n,multiply:r,pow:i,divide:a,factorial:o,equal:s,smallerEq:u,isNegative:l,gamma:c,sin:f,subtract:d,add:h,Complex:p,BigNumber:m,pi:g}=t;return e(wA,{number:_=>v(_,E=>E,()=>20),BigNumber:_=>v(_,E=>new m(E),()=>Math.abs(Math.log10(n.relTol))),Complex:x});function v(_,E,C){return s(_,0)?E(-.5):s(_,1)?E(NaN):isFinite(_)?y(_,E,C,N=>N):l(_)?E(NaN):E(1)}function x(_){return _.re===0&&_.im===0?new p(-.5):_.re===1?new p(NaN,NaN):_.re===1/0&&_.im===0?new p(1):_.im===1/0||_.re===-1/0?new p(NaN,NaN):y(_,E=>E,E=>Math.round(1.3*15+.9*Math.abs(E.im)),E=>E.re)}function y(_,E,C,N){var D=C(_);if(N(_)>-(D-1)/2)return w(_,E(D),E);var A=r(i(2,_),i(E(g),d(_,1)));return A=r(A,f(r(a(E(g),2),_))),A=r(A,c(d(1,_))),r(A,y(d(1,_),E,C,N))}function b(_,E){for(var C=_,N=_;u(N,E);N=h(N,1)){var D=a(r(o(h(E,d(N,1))),i(4,N)),r(o(d(E,N)),o(r(2,N))));C=h(C,D)}return r(E,C)}function w(_,E,C){for(var N=a(1,r(b(C(0),E),d(1,i(2,d(1,_))))),D=C(0),A=C(1);u(A,E);A=h(A,1))D=h(D,a(r((-1)**(A-1),b(A,E)),i(A,_)));return r(N,D)}}),_A="mode",hQ=["typed","isNaN","isNumeric"],pQ=z(_A,hQ,t=>{var{typed:e,isNaN:n,isNumeric:r}=t;return e(_A,{"Array | Matrix":i,"...":function(o){return i(o)}});function i(a){a=Ft(a.valueOf());var o=a.length;if(o===0)throw new Error("Cannot calculate mode of an empty array");for(var s={},u=[],l=0,c=0;c<a.length;c++){var f=a[c];if(r(f)&&n(f))throw new Error("Cannot calculate mode of an array containing NaN values");f in s||(s[f]=0),s[f]++,s[f]===l?u.push(f):s[f]>l&&(l=s[f],u=[f])}return u}});function Hr(t,e,n){var r;return String(t).includes("Unexpected type")?(r=arguments.length>2?" (type: "+Qt(n)+", value: "+JSON.stringify(n)+")":" (type: "+t.data.actual+")",new TypeError("Cannot calculate "+e+", unexpected type of argument"+r)):String(t).includes("complex numbers")?(r=arguments.length>2?" (type: "+Qt(n)+", value: "+JSON.stringify(n)+")":"",new TypeError("Cannot calculate "+e+", no ordering relation is defined for complex numbers"+r)):t}var EA="prod",mQ=["typed","config","multiplyScalar","numeric"],vQ=z(EA,mQ,t=>{var{typed:e,config:n,multiplyScalar:r,numeric:i}=t;return e(EA,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":function(s,u){throw new Error("prod(A, dim) is not yet supported")},"...":function(s){return a(s)}});function a(o){var s;if(Ks(o,function(u){try{s=s===void 0?u:r(s,u)}catch(l){throw Hr(l,"prod",u)}}),typeof s=="string"&&(s=i(s,au(s,n))),s===void 0)throw new Error("Cannot calculate prod of an empty array");return s}}),CA="format",gQ=["typed"],yQ=z(CA,gQ,t=>{var{typed:e}=t;return e(CA,{any:xt,"any, Object | function | number | BigNumber":xt})}),NA="bin",xQ=["typed","format"],bQ=z(NA,xQ,t=>{var{typed:e,format:n}=t;return e(NA,{"number | BigNumber":function(i){return n(i,{notation:"bin"})},"number | BigNumber, number | BigNumber":function(i,a){return n(i,{notation:"bin",wordSize:a})}})}),SA="oct",wQ=["typed","format"],_Q=z(SA,wQ,t=>{var{typed:e,format:n}=t;return e(SA,{"number | BigNumber":function(i){return n(i,{notation:"oct"})},"number | BigNumber, number | BigNumber":function(i,a){return n(i,{notation:"oct",wordSize:a})}})}),DA="hex",EQ=["typed","format"],CQ=z(DA,EQ,t=>{var{typed:e,format:n}=t;return e(DA,{"number | BigNumber":function(i){return n(i,{notation:"hex"})},"number | BigNumber, number | BigNumber":function(i,a){return n(i,{notation:"hex",wordSize:a})}})}),nB=/\$([\w.]+)/g,AA="print",NQ=["typed"],rB=z(AA,NQ,t=>{var{typed:e}=t;return e(AA,{"string, Object | Array":TA,"string, Object | Array, number | Object":TA})});function TA(t,e,n){return t.replace(nB,function(r,i){var a=i.split("."),o=e[a.shift()];for(o!==void 0&&o.isMatrix&&(o=o.toArray());a.length&&o!==void 0;){var s=a.shift();o=s?o[s]:o+"."}return o!==void 0?Dr(o)?o:xt(o,n):r})}var MA="to",SQ=["typed","matrix","concat"],DQ=z(MA,SQ,t=>{var{typed:e,matrix:n,concat:r}=t,i=Zt({typed:e,matrix:n,concat:r});return e(MA,{"Unit, Unit | string":(a,o)=>a.to(o)},i({Ds:!0}))}),IA="isPrime",AQ=["typed"],TQ=z(IA,AQ,t=>{var{typed:e}=t;return e(IA,{number:function(r){if(r<=3)return r>1;if(r%2===0||r%3===0)return!1;for(var i=5;i*i<=r;i+=6)if(r%i===0||r%(i+2)===0)return!1;return!0},bigint:function(r){if(r<=3n)return r>1n;if(r%2n===0n||r%3n===0n)return!1;for(var i=5n;i*i<=r;i+=6n)if(r%i===0n||r%(i+2n)===0n)return!1;return!0},BigNumber:function(r){if(r.lte(3))return r.gt(1);if(r.mod(2).eq(0)||r.mod(3).eq(0))return!1;if(r.lt(Math.pow(2,32))){for(var i=r.toNumber(),a=5;a*a<=i;a+=6)if(i%a===0||i%(a+2)===0)return!1;return!0}function o(x,y,b){for(var w=1;!y.eq(0);)y.mod(2).eq(0)?(y=y.div(2),x=x.mul(x).mod(b)):(y=y.sub(1),w=x.mul(w).mod(b));return w}var s=r.constructor.clone({precision:r.toFixed(0).length*2});r=new s(r);for(var u=0,l=r.sub(1);l.mod(2).eq(0);)l=l.div(2),u+=1;var c=null;if(r.lt("3317044064679887385961981"))c=[2,3,5,7,11,13,17,19,23,29,31,37,41].filter(x=>x<r);else{var f=Math.min(r.toNumber()-2,Math.floor(2*Math.pow(r.toFixed(0).length*Math.log(10),2)));c=[];for(var d=2;d<=f;d+=1)c.push(f)}for(var h=0;h<c.length;h+=1){var p=c[h],m=o(r.sub(r).add(p),l,r);if(!m.eq(1)){for(var g=0,v=m;!v.eq(r.sub(1));g+=1,v=v.mul(v).mod(r))if(g===u-1)return!1}}return!0},"Array | Matrix":e.referToSelf(n=>r=>pt(r,n))})}),MQ="numeric",IQ=["number","?bignumber","?fraction"],RQ=z(MQ,IQ,t=>{var{number:e,bignumber:n,fraction:r}=t,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},a={number:o=>e(o),BigNumber:n?o=>n(o):e_,bigint:o=>BigInt(o),Fraction:r?o=>r(o):QO};return function(s){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",l=arguments.length>2?arguments[2]:void 0;if(l!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var c=Qt(s);if(!(c in i))throw new TypeError("Cannot convert "+s+' of type "'+c+'"; valid input types are '+Object.keys(i).join(", "));if(!(u in a))throw new TypeError("Cannot convert "+s+' to type "'+u+'"; valid output types are '+Object.keys(a).join(", "));return u===c?s:a[u](s)}}),RA="divideScalar",kQ=["typed","numeric"],FQ=z(RA,kQ,t=>{var{typed:e,numeric:n}=t;return e(RA,{"number, number":function(i,a){return i/a},"Complex, Complex":function(i,a){return i.div(a)},"BigNumber, BigNumber":function(i,a){return i.div(a)},"bigint, bigint":function(i,a){return i/a},"Fraction, Fraction":function(i,a){return i.div(a)},"Unit, number | Complex | Fraction | BigNumber | Unit":(r,i)=>r.divide(i),"number | Fraction | Complex | BigNumber, Unit":(r,i)=>i.divideInto(r)})}),kA="pow",PQ=["typed","config","identity","multiply","matrix","inv","fraction","number","Complex"],OQ=z(kA,PQ,t=>{var{typed:e,config:n,identity:r,multiply:i,matrix:a,inv:o,number:s,fraction:u,Complex:l}=t;return e(kA,{"number, number":c,"Complex, Complex":function(p,m){return p.pow(m)},"BigNumber, BigNumber":function(p,m){return m.isInteger()||p>=0||n.predictable?p.pow(m):new l(p.toNumber(),0).pow(m.toNumber(),0)},"bigint, bigint":(h,p)=>h**p,"Fraction, Fraction":function(p,m){var g=p.pow(m);if(g!=null)return g;if(n.predictable)throw new Error("Result of pow is non-rational and cannot be expressed as a fraction");return c(p.valueOf(),m.valueOf())},"Array, number":f,"Array, BigNumber":function(p,m){return f(p,m.toNumber())},"Matrix, number":d,"Matrix, BigNumber":function(p,m){return d(p,m.toNumber())},"Unit, number | BigNumber":function(p,m){return p.pow(m)}});function c(h,p){if(n.predictable&&!qe(p)&&h<0)try{var m=u(p),g=s(m);if((p===g||Math.abs((p-g)/p)<1e-14)&&m.d%2n===1n)return(m.n%2n===0n?1:-1)*Math.pow(-h,p)}catch{}return n.predictable&&(h<-1&&p===1/0||h>-1&&h<0&&p===-1/0)?NaN:qe(p)||h>=0||n.predictable?uO(h,p):h*h<1&&p===1/0||h*h>1&&p===-1/0?0:new l(h,0).pow(p,0)}function f(h,p){if(!qe(p))throw new TypeError("For A^b, b must be an integer (value is "+p+")");var m=ot(h);if(m.length!==2)throw new Error("For A^b, A must be 2 dimensional (A has "+m.length+" dimensions)");if(m[0]!==m[1])throw new Error("For A^b, A must be square (size is "+m[0]+"x"+m[1]+")");if(p<0)try{return f(o(h),-p)}catch(x){throw x.message==="Cannot calculate inverse, determinant is zero"?new TypeError("For A^b, when A is not invertible, b must be a positive integer (value is "+p+")"):x}for(var g=r(m[0]).valueOf(),v=h;p>=1;)(p&1)===1&&(g=i(v,g)),p>>=1,v=i(v,v);return g}function d(h,p){return a(f(h.valueOf(),p))}}),zl="Number of decimals in function round must be an integer",FA="round",BQ=["typed","config","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],LQ=z(FA,BQ,t=>{var{typed:e,config:n,matrix:r,equalScalar:i,zeros:a,BigNumber:o,DenseMatrix:s}=t,u=xr({typed:e,equalScalar:i}),l=Hn({typed:e,DenseMatrix:s}),c=Ia({typed:e});function f(d){return Math.abs(Qh(d).exponent)}return e(FA,{number:function(h){var p=nd(h,f(n.relTol)),m=yr(h,p,n.relTol,n.absTol)?p:h;return nd(m)},"number, number":function(h,p){var m=f(n.relTol);if(p>=m)return nd(h,p);var g=nd(h,m),v=yr(h,g,n.relTol,n.absTol)?g:h;return nd(v,p)},"number, BigNumber":function(h,p){if(!p.isInteger())throw new TypeError(zl);return new o(h).toDecimalPlaces(p.toNumber())},Complex:function(h){return h.round()},"Complex, number":function(h,p){if(p%1)throw new TypeError(zl);return h.round(p)},"Complex, BigNumber":function(h,p){if(!p.isInteger())throw new TypeError(zl);var m=p.toNumber();return h.round(m)},BigNumber:function(h){var p=new o(h).toDecimalPlaces(f(n.relTol)),m=ra(h,p,n.relTol,n.absTol)?p:h;return m.toDecimalPlaces(0)},"BigNumber, BigNumber":function(h,p){if(!p.isInteger())throw new TypeError(zl);var m=f(n.relTol);if(p>=m)return h.toDecimalPlaces(p.toNumber());var g=h.toDecimalPlaces(m),v=ra(h,g,n.relTol,n.absTol)?g:h;return v.toDecimalPlaces(p.toNumber())},bigint:d=>d,"bigint, number":(d,h)=>d,"bigint, BigNumber":(d,h)=>d,Fraction:function(h){return h.round()},"Fraction, number":function(h,p){if(p%1)throw new TypeError(zl);return h.round(p)},"Fraction, BigNumber":function(h,p){if(!p.isInteger())throw new TypeError(zl);return h.round(p.toNumber())},"Unit, number, Unit":e.referToSelf(d=>function(h,p,m){var g=h.toNumeric(m);return m.multiply(d(g,p))}),"Unit, BigNumber, Unit":e.referToSelf(d=>(h,p,m)=>d(h,p.toNumber(),m)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(d=>(h,p,m)=>pt(h,g=>d(g,p,m),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(d=>(h,p)=>d(h,0,p)),"Array | Matrix":e.referToSelf(d=>h=>pt(h,d,!0)),"SparseMatrix, number | BigNumber":e.referToSelf(d=>(h,p)=>u(h,p,d,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(d=>(h,p)=>c(h,p,d,!1)),"Array, number | BigNumber":e.referToSelf(d=>(h,p)=>c(r(h),p,d,!1).valueOf()),"number | Complex | BigNumber | Fraction, SparseMatrix":e.referToSelf(d=>(h,p)=>i(h,0)?a(p.size(),p.storage()):l(p,h,d,!0)),"number | Complex | BigNumber | Fraction, DenseMatrix":e.referToSelf(d=>(h,p)=>i(h,0)?a(p.size(),p.storage()):c(p,h,d,!0)),"number | Complex | BigNumber | Fraction, Array":e.referToSelf(d=>(h,p)=>c(r(p),h,d,!0).valueOf())})}),PA="log",jQ=["config","typed","typeOf","divideScalar","Complex"],$Q=Math.log(16),zQ=z(PA,jQ,t=>{var{typed:e,typeOf:n,config:r,divideScalar:i,Complex:a}=t;function o(u){return u.log()}function s(u){return o(new a(u,0))}return e(PA,{number:function(l){return l>=0||r.predictable?QS(l):s(l)},bigint:Z2($Q,QS,r,s),Complex:o,BigNumber:function(l){return!l.isNegative()||r.predictable?l.ln():s(l.toNumber())},"any, any":e.referToSelf(u=>(l,c)=>{if(n(l)==="Fraction"&&n(c)==="Fraction"){var f=l.log(c);if(f!==null)return f}return i(u(l),u(c))})})}),OA="log1p",UQ=["typed","config","divideScalar","log","Complex"],WQ=z(OA,UQ,t=>{var{typed:e,config:n,divideScalar:r,log:i,Complex:a}=t;return e(OA,{number:function(u){return u>=-1||n.predictable?$V(u):o(new a(u,0))},Complex:o,BigNumber:function(u){var l=u.plus(1);return!l.isNegative()||n.predictable?l.ln():o(new a(u.toNumber(),0))},"Array | Matrix":e.referToSelf(s=>u=>pt(u,s)),"any, any":e.referToSelf(s=>(u,l)=>r(s(u),i(l)))});function o(s){var u=s.re+1;return new a(Math.log(Math.sqrt(u*u+s.im*s.im)),Math.atan2(s.im,u))}}),BA="nthRoots",VQ=["config","typed","divideScalar","Complex"],qQ=z(BA,VQ,t=>{var{typed:e,config:n,divideScalar:r,Complex:i}=t,a=[function(u){return new i(u,0)},function(u){return new i(0,u)},function(u){return new i(-u,0)},function(u){return new i(0,-u)}];function o(s,u){if(u<0)throw new Error("Root must be greater than zero");if(u===0)throw new Error("Root must be non-zero");if(u%1!==0)throw new Error("Root must be an integer");if(s===0||s.abs()===0)return[new i(0,0)];var l=typeof s=="number",c;(l||s.re===0||s.im===0)&&(l?c=2*+(s<0):s.im===0?c=2*+(s.re<0):c=2*+(s.im<0)+1);for(var f=s.arg(),d=s.abs(),h=[],p=Math.pow(d,1/u),m=0;m<u;m++){var g=(c+4*m)/u;if(g===Math.round(g)){h.push(a[g%4](p));continue}h.push(new i({r:p,phi:(f+2*Math.PI*m)/u}))}return h}return e(BA,{Complex:function(u){return o(u,2)},"Complex, number":o})}),LA="dotPow",HQ=["typed","equalScalar","matrix","pow","DenseMatrix","concat","SparseMatrix"],GQ=z(LA,HQ,t=>{var{typed:e,equalScalar:n,matrix:r,pow:i,DenseMatrix:a,concat:o,SparseMatrix:s}=t,u=Xr({typed:e}),l=io({typed:e,SparseMatrix:s}),c=xr({typed:e,equalScalar:n}),f=Hn({typed:e,DenseMatrix:a}),d=Zt({typed:e,matrix:r,concat:o}),h={};for(var p in i.signatures)Object.prototype.hasOwnProperty.call(i.signatures,p)&&!p.includes("Matrix")&&!p.includes("Array")&&(h[p]=i.signatures[p]);var m=e(h);return e(LA,d({elop:m,SS:l,DS:u,Ss:c,sS:f}))}),jA="dotDivide",KQ=["typed","matrix","equalScalar","divideScalar","DenseMatrix","concat","SparseMatrix"],YQ=z(jA,KQ,t=>{var{typed:e,matrix:n,equalScalar:r,divideScalar:i,DenseMatrix:a,concat:o,SparseMatrix:s}=t,u=Ra({typed:e,equalScalar:r}),l=Xr({typed:e}),c=io({typed:e,SparseMatrix:s}),f=xr({typed:e,equalScalar:r}),d=Hn({typed:e,DenseMatrix:a}),h=Zt({typed:e,matrix:n,concat:o});return e(jA,h({elop:i,SS:c,DS:l,SD:u,Ss:f,sS:d}))});function Zh(t){var{DenseMatrix:e}=t;return function(r,i,a){var o=r.size();if(o.length!==2)throw new RangeError("Matrix must be two dimensional (size: "+xt(o)+")");var s=o[0],u=o[1];if(s!==u)throw new RangeError("Matrix must be square (size: "+xt(o)+")");var l=[];if(Je(i)){var c=i.size(),f=i._data;if(c.length===1){if(c[0]!==s)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var d=0;d<s;d++)l[d]=[f[d]];return new e({data:l,size:[s,1],datatype:i._datatype})}if(c.length===2){if(c[0]!==s||c[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(Pv(i)){if(a){l=[];for(var h=0;h<s;h++)l[h]=[f[h][0]];return new e({data:l,size:[s,1],datatype:i._datatype})}return i}if(ju(i)){for(var p=0;p<s;p++)l[p]=[0];for(var m=i._values,g=i._index,v=i._ptr,x=v[1],y=v[0];y<x;y++){var b=g[y];l[b][0]=m[y]}return new e({data:l,size:[s,1],datatype:i._datatype})}}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}if(qt(i)){var w=ot(i);if(w.length===1){if(w[0]!==s)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var _=0;_<s;_++)l[_]=[i[_]];return new e({data:l,size:[s,1]})}if(w.length===2){if(w[0]!==s||w[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var E=0;E<s;E++)l[E]=[i[E][0]];return new e({data:l,size:[s,1]})}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}}}var $A="lsolve",XQ=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],QQ=z($A,XQ,t=>{var{typed:e,matrix:n,divideScalar:r,multiplyScalar:i,subtractScalar:a,equalScalar:o,DenseMatrix:s}=t,u=Zh({DenseMatrix:s});return e($A,{"SparseMatrix, Array | Matrix":function(d,h){return c(d,h)},"DenseMatrix, Array | Matrix":function(d,h){return l(d,h)},"Array, Array | Matrix":function(d,h){var p=n(d),m=l(p,h);return m.valueOf()}});function l(f,d){d=u(f,d,!0);for(var h=d._data,p=f._size[0],m=f._size[1],g=[],v=f._data,x=0;x<m;x++){var y=h[x][0]||0,b=void 0;if(o(y,0))b=0;else{var w=v[x][x];if(o(w,0))throw new Error("Linear system cannot be solved since matrix is singular");b=r(y,w);for(var _=x+1;_<p;_++)h[_]=[a(h[_][0]||0,i(b,v[_][x]))]}g[x]=[b]}return new s({data:g,size:[p,1]})}function c(f,d){d=u(f,d,!0);for(var h=d._data,p=f._size[0],m=f._size[1],g=f._values,v=f._index,x=f._ptr,y=[],b=0;b<m;b++){var w=h[b][0]||0;if(o(w,0))y[b]=[0];else{for(var _=0,E=[],C=[],N=x[b],D=x[b+1],A=N;A<D;A++){var T=v[A];T===b?_=g[A]:T>b&&(E.push(g[A]),C.push(T))}if(o(_,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var k=r(w,_),F=0,O=C.length;F<O;F++){var I=C[F];h[I]=[a(h[I][0]||0,i(k,E[F]))]}y[b]=[k]}}return new s({data:y,size:[p,1]})}}),zA="usolve",ZQ=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],JQ=z(zA,ZQ,t=>{var{typed:e,matrix:n,divideScalar:r,multiplyScalar:i,subtractScalar:a,equalScalar:o,DenseMatrix:s}=t,u=Zh({DenseMatrix:s});return e(zA,{"SparseMatrix, Array | Matrix":function(d,h){return c(d,h)},"DenseMatrix, Array | Matrix":function(d,h){return l(d,h)},"Array, Array | Matrix":function(d,h){var p=n(d),m=l(p,h);return m.valueOf()}});function l(f,d){d=u(f,d,!0);for(var h=d._data,p=f._size[0],m=f._size[1],g=[],v=f._data,x=m-1;x>=0;x--){var y=h[x][0]||0,b=void 0;if(o(y,0))b=0;else{var w=v[x][x];if(o(w,0))throw new Error("Linear system cannot be solved since matrix is singular");b=r(y,w);for(var _=x-1;_>=0;_--)h[_]=[a(h[_][0]||0,i(b,v[_][x]))]}g[x]=[b]}return new s({data:g,size:[p,1]})}function c(f,d){d=u(f,d,!0);for(var h=d._data,p=f._size[0],m=f._size[1],g=f._values,v=f._index,x=f._ptr,y=[],b=m-1;b>=0;b--){var w=h[b][0]||0;if(o(w,0))y[b]=[0];else{for(var _=0,E=[],C=[],N=x[b],D=x[b+1],A=D-1;A>=N;A--){var T=v[A];T===b?_=g[A]:T<b&&(E.push(g[A]),C.push(T))}if(o(_,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var k=r(w,_),F=0,O=C.length;F<O;F++){var I=C[F];h[I]=[a(h[I][0],i(k,E[F]))]}y[b]=[k]}}return new s({data:y,size:[p,1]})}}),UA="lsolveAll",eZ=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],tZ=z(UA,eZ,t=>{var{typed:e,matrix:n,divideScalar:r,multiplyScalar:i,subtractScalar:a,equalScalar:o,DenseMatrix:s}=t,u=Zh({DenseMatrix:s});return e(UA,{"SparseMatrix, Array | Matrix":function(d,h){return c(d,h)},"DenseMatrix, Array | Matrix":function(d,h){return l(d,h)},"Array, Array | Matrix":function(d,h){var p=n(d),m=l(p,h);return m.map(g=>g.valueOf())}});function l(f,d){for(var h=[u(f,d,!0)._data.map(C=>C[0])],p=f._data,m=f._size[0],g=f._size[1],v=0;v<g;v++)for(var x=h.length,y=0;y<x;y++){var b=h[y];if(o(p[v][v],0))if(o(b[v],0)){if(y===0){var _=[...b];_[v]=1;for(var E=v+1;E<g;E++)_[E]=a(_[E],p[E][v]);h.push(_)}}else{if(y===0)return[];h.splice(y,1),y-=1,x-=1}else{b[v]=r(b[v],p[v][v]);for(var w=v+1;w<g;w++)b[w]=a(b[w],i(b[v],p[w][v]))}}return h.map(C=>new s({data:C.map(N=>[N]),size:[m,1]}))}function c(f,d){for(var h=[u(f,d,!0)._data.map(K=>K[0])],p=f._size[0],m=f._size[1],g=f._values,v=f._index,x=f._ptr,y=0;y<m;y++)for(var b=h.length,w=0;w<b;w++){for(var _=h[w],E=[],C=[],N=x[y],D=x[y+1],A=0,T=N;T<D;T++){var k=v[T];k===y?A=g[T]:k>y&&(E.push(g[T]),C.push(k))}if(o(A,0))if(o(_[y],0)){if(w===0){var M=[..._];M[y]=1;for(var B=0,R=C.length;B<R;B++){var j=C[B];M[j]=a(M[j],E[B])}h.push(M)}}else{if(w===0)return[];h.splice(w,1),w-=1,b-=1}else{_[y]=r(_[y],A);for(var F=0,O=C.length;F<O;F++){var I=C[F];_[I]=a(_[I],i(_[y],E[F]))}}}return h.map(K=>new s({data:K.map(V=>[V]),size:[p,1]}))}}),WA="usolveAll",nZ=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],rZ=z(WA,nZ,t=>{var{typed:e,matrix:n,divideScalar:r,multiplyScalar:i,subtractScalar:a,equalScalar:o,DenseMatrix:s}=t,u=Zh({DenseMatrix:s});return e(WA,{"SparseMatrix, Array | Matrix":function(d,h){return c(d,h)},"DenseMatrix, Array | Matrix":function(d,h){return l(d,h)},"Array, Array | Matrix":function(d,h){var p=n(d),m=l(p,h);return m.map(g=>g.valueOf())}});function l(f,d){for(var h=[u(f,d,!0)._data.map(C=>C[0])],p=f._data,m=f._size[0],g=f._size[1],v=g-1;v>=0;v--)for(var x=h.length,y=0;y<x;y++){var b=h[y];if(o(p[v][v],0))if(o(b[v],0)){if(y===0){var _=[...b];_[v]=1;for(var E=v-1;E>=0;E--)_[E]=a(_[E],p[E][v]);h.push(_)}}else{if(y===0)return[];h.splice(y,1),y-=1,x-=1}else{b[v]=r(b[v],p[v][v]);for(var w=v-1;w>=0;w--)b[w]=a(b[w],i(b[v],p[w][v]))}}return h.map(C=>new s({data:C.map(N=>[N]),size:[m,1]}))}function c(f,d){for(var h=[u(f,d,!0)._data.map(K=>K[0])],p=f._size[0],m=f._size[1],g=f._values,v=f._index,x=f._ptr,y=m-1;y>=0;y--)for(var b=h.length,w=0;w<b;w++){for(var _=h[w],E=[],C=[],N=x[y],D=x[y+1],A=0,T=D-1;T>=N;T--){var k=v[T];k===y?A=g[T]:k<y&&(E.push(g[T]),C.push(k))}if(o(A,0))if(o(_[y],0)){if(w===0){var M=[..._];M[y]=1;for(var B=0,R=C.length;B<R;B++){var j=C[B];M[j]=a(M[j],E[B])}h.push(M)}}else{if(w===0)return[];h.splice(w,1),w-=1,b-=1}else{_[y]=r(_[y],A);for(var F=0,O=C.length;F<O;F++){var I=C[F];_[I]=a(_[I],i(_[y],E[F]))}}}return h.map(K=>new s({data:K.map(V=>[V]),size:[p,1]}))}}),iZ="matAlgo08xS0Sid",aZ=["typed","equalScalar"],t_=z(iZ,aZ,t=>{var{typed:e,equalScalar:n}=t;return function(i,a,o){var s=i._values,u=i._index,l=i._ptr,c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=a._values,h=a._index,p=a._ptr,m=a._size,g=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(c.length!==m.length)throw new bt(c.length,m.length);if(c[0]!==m[0]||c[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+m+")");if(!s||!d)throw new Error("Cannot perform operation on Pattern Sparse Matrices");var v=c[0],x=c[1],y,b=n,w=0,_=o;typeof f=="string"&&f===g&&f!=="mixed"&&(y=f,b=e.find(n,[y,y]),w=e.convert(0,y),_=e.find(o,[y,y]));for(var E=[],C=[],N=[],D=[],A=[],T,k,F,O,I=0;I<x;I++){N[I]=C.length;var M=I+1;for(k=l[I],F=l[I+1],T=k;T<F;T++)O=u[T],A[O]=M,D[O]=s[T],C.push(O);for(k=p[I],F=p[I+1],T=k;T<F;T++)O=h[T],A[O]===M&&(D[O]=_(D[O],d[T]));for(T=N[I];T<C.length;){O=C[T];var B=D[O];b(B,w)?C.splice(T,1):(E.push(B),T++)}}return N[x]=C.length,i.createSparseMatrix({values:E,index:C,ptr:N,size:[v,x],datatype:f===i._datatype&&g===a._datatype?y:void 0})}}),n_=z("useMatrixForArrayScalar",["typed","matrix"],t=>{var{typed:e,matrix:n}=t;return{"Array, number":e.referTo("DenseMatrix, number",r=>(i,a)=>r(n(i),a).valueOf()),"Array, BigNumber":e.referTo("DenseMatrix, BigNumber",r=>(i,a)=>r(n(i),a).valueOf()),"number, Array":e.referTo("number, DenseMatrix",r=>(i,a)=>r(i,n(a)).valueOf()),"BigNumber, Array":e.referTo("BigNumber, DenseMatrix",r=>(i,a)=>r(i,n(a)).valueOf())}}),VA="leftShift",oZ=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],sZ=z(VA,oZ,t=>{var{typed:e,matrix:n,equalScalar:r,zeros:i,DenseMatrix:a,concat:o}=t,s=su({typed:e}),u=Ra({typed:e,equalScalar:r}),l=t_({typed:e,equalScalar:r}),c=yl({typed:e,DenseMatrix:a}),f=xr({typed:e,equalScalar:r}),d=Ia({typed:e}),h=Zt({typed:e,matrix:n,concat:o}),p=n_({typed:e,matrix:n});return e(VA,{"number, number":hO,"BigNumber, BigNumber":MY,"bigint, bigint":(m,g)=>m<<g,"SparseMatrix, number | BigNumber":e.referToSelf(m=>(g,v)=>r(v,0)?g.clone():f(g,v,m,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(m=>(g,v)=>r(v,0)?g.clone():d(g,v,m,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(m=>(g,v)=>r(g,0)?i(v.size(),v.storage()):c(v,g,m,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(m=>(g,v)=>r(g,0)?i(v.size(),v.storage()):d(v,g,m,!0))},p,h({SS:l,DS:s,SD:u}))}),qA="rightArithShift",uZ=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],lZ=z(qA,uZ,t=>{var{typed:e,matrix:n,equalScalar:r,zeros:i,DenseMatrix:a,concat:o}=t,s=su({typed:e}),u=Ra({typed:e,equalScalar:r}),l=t_({typed:e,equalScalar:r}),c=yl({typed:e,DenseMatrix:a}),f=xr({typed:e,equalScalar:r}),d=Ia({typed:e}),h=Zt({typed:e,matrix:n,concat:o}),p=n_({typed:e,matrix:n});return e(qA,{"number, number":pO,"BigNumber, BigNumber":IY,"bigint, bigint":(m,g)=>m>>g,"SparseMatrix, number | BigNumber":e.referToSelf(m=>(g,v)=>r(v,0)?g.clone():f(g,v,m,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(m=>(g,v)=>r(v,0)?g.clone():d(g,v,m,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(m=>(g,v)=>r(g,0)?i(v.size(),v.storage()):c(v,g,m,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(m=>(g,v)=>r(g,0)?i(v.size(),v.storage()):d(v,g,m,!0))},p,h({SS:l,DS:s,SD:u}))}),HA="rightLogShift",cZ=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],fZ=z(HA,cZ,t=>{var{typed:e,matrix:n,equalScalar:r,zeros:i,DenseMatrix:a,concat:o}=t,s=su({typed:e}),u=Ra({typed:e,equalScalar:r}),l=t_({typed:e,equalScalar:r}),c=yl({typed:e,DenseMatrix:a}),f=xr({typed:e,equalScalar:r}),d=Ia({typed:e}),h=Zt({typed:e,matrix:n,concat:o}),p=n_({typed:e,matrix:n});return e(HA,{"number, number":mO,"SparseMatrix, number | BigNumber":e.referToSelf(m=>(g,v)=>r(v,0)?g.clone():f(g,v,m,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(m=>(g,v)=>r(v,0)?g.clone():d(g,v,m,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(m=>(g,v)=>r(g,0)?i(v.size(),v.storage()):c(v,g,m,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(m=>(g,v)=>r(g,0)?i(v.size(),v.storage()):d(v,g,m,!0))},p,h({SS:l,DS:s,SD:u}))}),GA="and",dZ=["typed","matrix","equalScalar","zeros","not","concat"],iB=z(GA,dZ,t=>{var{typed:e,matrix:n,equalScalar:r,zeros:i,not:a,concat:o}=t,s=Ra({typed:e,equalScalar:r}),u=O0({typed:e,equalScalar:r}),l=xr({typed:e,equalScalar:r}),c=Ia({typed:e}),f=Zt({typed:e,matrix:n,concat:o});return e(GA,{"number, number":Nb,"Complex, Complex":function(h,p){return(h.re!==0||h.im!==0)&&(p.re!==0||p.im!==0)},"BigNumber, BigNumber":function(h,p){return!h.isZero()&&!p.isZero()&&!h.isNaN()&&!p.isNaN()},"bigint, bigint":Nb,"Unit, Unit":e.referToSelf(d=>(h,p)=>d(h.value||0,p.value||0)),"SparseMatrix, any":e.referToSelf(d=>(h,p)=>a(p)?i(h.size(),h.storage()):l(h,p,d,!1)),"DenseMatrix, any":e.referToSelf(d=>(h,p)=>a(p)?i(h.size(),h.storage()):c(h,p,d,!1)),"any, SparseMatrix":e.referToSelf(d=>(h,p)=>a(h)?i(h.size(),h.storage()):l(p,h,d,!0)),"any, DenseMatrix":e.referToSelf(d=>(h,p)=>a(h)?i(h.size(),h.storage()):c(p,h,d,!0)),"Array, any":e.referToSelf(d=>(h,p)=>d(n(h),p).valueOf()),"any, Array":e.referToSelf(d=>(h,p)=>d(h,n(p)).valueOf())},f({SS:u,DS:s}))}),Yv="compare",hZ=["typed","config","matrix","equalScalar","BigNumber","Fraction","DenseMatrix","concat"],pZ=z(Yv,hZ,t=>{var{typed:e,config:n,equalScalar:r,matrix:i,BigNumber:a,Fraction:o,DenseMatrix:s,concat:u}=t,l=Xr({typed:e}),c=P0({typed:e,equalScalar:r}),f=Hn({typed:e,DenseMatrix:s}),d=Zt({typed:e,matrix:i,concat:u}),h=Sf({typed:e});return e(Yv,mZ({typed:e,config:n}),{"boolean, boolean":function(m,g){return m===g?0:m>g?1:-1},"BigNumber, BigNumber":function(m,g){return ra(m,g,n.relTol,n.absTol)?new a(0):new a(m.cmp(g))},"bigint, bigint":function(m,g){return m===g?0n:m>g?1n:-1n},"Fraction, Fraction":function(m,g){return new o(m.compare(g))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},h,d({SS:c,DS:l,Ss:f}))}),mZ=z(Yv,["typed","config"],t=>{var{typed:e,config:n}=t;return e(Yv,{"number, number":function(i,a){return yr(i,a,n.relTol,n.absTol)?0:i>a?1:-1}})}),vZ=function t(e,n){var r=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,i=/(^[ ]*|[ ]*$)/g,a=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,o=/^0x[0-9a-f]+$/i,s=/^0/,u=function(y){return t.insensitive&&(""+y).toLowerCase()||""+y},l=u(e).replace(i,"")||"",c=u(n).replace(i,"")||"",f=l.replace(r,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),d=c.replace(r,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),h=parseInt(l.match(o),16)||f.length!==1&&l.match(a)&&Date.parse(l),p=parseInt(c.match(o),16)||h&&c.match(a)&&Date.parse(c)||null,m,g;if(p){if(h<p)return-1;if(h>p)return 1}for(var v=0,x=Math.max(f.length,d.length);v<x;v++){if(m=!(f[v]||"").match(s)&&parseFloat(f[v])||f[v]||0,g=!(d[v]||"").match(s)&&parseFloat(d[v])||d[v]||0,isNaN(m)!==isNaN(g))return isNaN(m)?1:-1;if(typeof m!=typeof g&&(m+="",g+=""),m<g)return-1;if(m>g)return 1}return 0};const Ul=i0(vZ);var KA="compareNatural",gZ=["typed","compare"],yZ=z(KA,gZ,t=>{var{typed:e,compare:n}=t,r=n.signatures["boolean,boolean"];return e(KA,{"any, any":i});function i(u,l){var c=Qt(u),f=Qt(l),d;if((c==="number"||c==="BigNumber"||c==="Fraction")&&(f==="number"||f==="BigNumber"||f==="Fraction"))return d=n(u,l),d.toString()!=="0"?d>0?1:-1:Ul(c,f);var h=["Array","DenseMatrix","SparseMatrix"];if(h.includes(c)||h.includes(f))return d=a(i,u,l),d!==0?d:Ul(c,f);if(c!==f)return Ul(c,f);if(c==="Complex")return xZ(u,l);if(c==="Unit")return u.equalBase(l)?i(u.value,l.value):o(i,u.formatUnits(),l.formatUnits());if(c==="boolean")return r(u,l);if(c==="string")return Ul(u,l);if(c==="Object")return s(i,u,l);if(c==="null"||c==="undefined")return 0;throw new TypeError('Unsupported type of value "'+c+'"')}function a(u,l,c){return ju(l)&&ju(c)?o(u,l.toJSON().values,c.toJSON().values):ju(l)?a(u,l.toArray(),c):ju(c)?a(u,l,c.toArray()):Pv(l)?a(u,l.toJSON().data,c):Pv(c)?a(u,l,c.toJSON().data):Array.isArray(l)?Array.isArray(c)?o(u,l,c):a(u,l,[c]):a(u,[l],c)}function o(u,l,c){for(var f=0,d=Math.min(l.length,c.length);f<d;f++){var h=u(l[f],c[f]);if(h!==0)return h}return l.length>c.length?1:l.length<c.length?-1:0}function s(u,l,c){var f=Object.keys(l),d=Object.keys(c);f.sort(Ul),d.sort(Ul);var h=o(u,f,d);if(h!==0)return h;for(var p=0;p<f.length;p++){var m=u(l[f[p]],c[d[p]]);if(m!==0)return m}return 0}});function xZ(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0}var YA="compareText",bZ=["typed","matrix","concat"];yb.signature="any, any";var wZ=z(YA,bZ,t=>{var{typed:e,matrix:n,concat:r}=t,i=Zt({typed:e,matrix:n,concat:r});return e(YA,yb,i({elop:yb,Ds:!0}))}),Xv="equal",_Z=["typed","matrix","equalScalar","DenseMatrix","concat","SparseMatrix"],EZ=z(Xv,_Z,t=>{var{typed:e,matrix:n,equalScalar:r,DenseMatrix:i,concat:a,SparseMatrix:o}=t,s=Xr({typed:e}),u=io({typed:e,SparseMatrix:o}),l=Hn({typed:e,DenseMatrix:i}),c=Zt({typed:e,matrix:n,concat:a});return e(Xv,CZ({typed:e,equalScalar:r}),c({elop:r,SS:u,DS:s,Ss:l}))}),CZ=z(Xv,["typed","equalScalar"],t=>{var{typed:e,equalScalar:n}=t;return e(Xv,{"any, any":function(i,a){return i===null?a===null:a===null?i===null:i===void 0?a===void 0:a===void 0?i===void 0:n(i,a)}})}),XA="equalText",NZ=["typed","compareText","isZero"],SZ=z(XA,NZ,t=>{var{typed:e,compareText:n,isZero:r}=t;return e(XA,{"any, any":function(a,o){return r(n(a,o))}})}),Qv="smaller",DZ=["typed","config","bignumber","matrix","DenseMatrix","concat","SparseMatrix"],AZ=z(Qv,DZ,t=>{var{typed:e,config:n,bignumber:r,matrix:i,DenseMatrix:a,concat:o,SparseMatrix:s}=t,u=Xr({typed:e}),l=io({typed:e,SparseMatrix:s}),c=Hn({typed:e,DenseMatrix:a}),f=Zt({typed:e,matrix:i,concat:o}),d=Sf({typed:e});function h(p,m){return p.lt(m)&&!ra(p,m,n.relTol,n.absTol)}return e(Qv,TZ({typed:e,config:n}),{"boolean, boolean":(p,m)=>p<m,"BigNumber, BigNumber":h,"bigint, bigint":(p,m)=>p<m,"Fraction, Fraction":(p,m)=>p.compare(m)===-1,"Fraction, BigNumber":function(m,g){return h(r(m),g)},"BigNumber, Fraction":function(m,g){return h(m,r(g))},"Complex, Complex":function(m,g){throw new TypeError("No ordering relation is defined for complex numbers")}},d,f({SS:l,DS:u,Ss:c}))}),TZ=z(Qv,["typed","config"],t=>{var{typed:e,config:n}=t;return e(Qv,{"number, number":function(i,a){return i<a&&!yr(i,a,n.relTol,n.absTol)}})}),Zv="smallerEq",MZ=["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],IZ=z(Zv,MZ,t=>{var{typed:e,config:n,matrix:r,DenseMatrix:i,concat:a,SparseMatrix:o}=t,s=Xr({typed:e}),u=io({typed:e,SparseMatrix:o}),l=Hn({typed:e,DenseMatrix:i}),c=Zt({typed:e,matrix:r,concat:a}),f=Sf({typed:e});return e(Zv,RZ({typed:e,config:n}),{"boolean, boolean":(d,h)=>d<=h,"BigNumber, BigNumber":function(h,p){return h.lte(p)||ra(h,p,n.relTol,n.absTol)},"bigint, bigint":(d,h)=>d<=h,"Fraction, Fraction":(d,h)=>d.compare(h)!==1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},f,c({SS:u,DS:s,Ss:l}))}),RZ=z(Zv,["typed","config"],t=>{var{typed:e,config:n}=t;return e(Zv,{"number, number":function(i,a){return i<=a||yr(i,a,n.relTol,n.absTol)}})}),Jv="larger",kZ=["typed","config","bignumber","matrix","DenseMatrix","concat","SparseMatrix"],FZ=z(Jv,kZ,t=>{var{typed:e,config:n,bignumber:r,matrix:i,DenseMatrix:a,concat:o,SparseMatrix:s}=t,u=Xr({typed:e}),l=io({typed:e,SparseMatrix:s}),c=Hn({typed:e,DenseMatrix:a}),f=Zt({typed:e,matrix:i,concat:o}),d=Sf({typed:e});function h(p,m){return p.gt(m)&&!ra(p,m,n.relTol,n.absTol)}return e(Jv,PZ({typed:e,config:n}),{"boolean, boolean":(p,m)=>p>m,"BigNumber, BigNumber":h,"bigint, bigint":(p,m)=>p>m,"Fraction, Fraction":(p,m)=>p.compare(m)===1,"Fraction, BigNumber":function(m,g){return h(r(m),g)},"BigNumber, Fraction":function(m,g){return h(m,r(g))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},d,f({SS:l,DS:u,Ss:c}))}),PZ=z(Jv,["typed","config"],t=>{var{typed:e,config:n}=t;return e(Jv,{"number, number":function(i,a){return i>a&&!yr(i,a,n.relTol,n.absTol)}})}),eg="largerEq",OZ=["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],BZ=z(eg,OZ,t=>{var{typed:e,config:n,matrix:r,DenseMatrix:i,concat:a,SparseMatrix:o}=t,s=Xr({typed:e}),u=io({typed:e,SparseMatrix:o}),l=Hn({typed:e,DenseMatrix:i}),c=Zt({typed:e,matrix:r,concat:a}),f=Sf({typed:e});return e(eg,LZ({typed:e,config:n}),{"boolean, boolean":(d,h)=>d>=h,"BigNumber, BigNumber":function(h,p){return h.gte(p)||ra(h,p,n.relTol,n.absTol)},"bigint, bigint":function(h,p){return h>=p},"Fraction, Fraction":(d,h)=>d.compare(h)!==-1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},f,c({SS:u,DS:s,Ss:l}))}),LZ=z(eg,["typed","config"],t=>{var{typed:e,config:n}=t;return e(eg,{"number, number":function(i,a){return i>=a||yr(i,a,n.relTol,n.absTol)}})}),QA="deepEqual",jZ=["typed","equal"],$Z=z(QA,jZ,t=>{var{typed:e,equal:n}=t;return e(QA,{"any, any":function(a,o){return r(a.valueOf(),o.valueOf())}});function r(i,a){if(Array.isArray(i))if(Array.isArray(a)){var o=i.length;if(o!==a.length)return!1;for(var s=0;s<o;s++)if(!r(i[s],a[s]))return!1;return!0}else return!1;else return Array.isArray(a)?!1:n(i,a)}}),tg="unequal",zZ=["typed","config","equalScalar","matrix","DenseMatrix","concat","SparseMatrix"],UZ=z(tg,zZ,t=>{var{typed:e,config:n,equalScalar:r,matrix:i,DenseMatrix:a,concat:o,SparseMatrix:s}=t,u=Xr({typed:e}),l=io({typed:e,SparseMatrix:s}),c=Hn({typed:e,DenseMatrix:a}),f=Zt({typed:e,matrix:i,concat:o});return e(tg,WZ({typed:e,equalScalar:r}),f({elop:d,SS:l,DS:u,Ss:c}));function d(h,p){return!r(h,p)}}),WZ=z(tg,["typed","equalScalar"],t=>{var{typed:e,equalScalar:n}=t;return e(tg,{"any, any":function(i,a){return i===null?a!==null:a===null?i!==null:i===void 0?a!==void 0:a===void 0?i!==void 0:!n(i,a)}})}),ZA="partitionSelect",VZ=["typed","isNumeric","isNaN","compare"],qZ=z(ZA,VZ,t=>{var{typed:e,isNumeric:n,isNaN:r,compare:i}=t,a=i,o=(l,c)=>-i(l,c);return e(ZA,{"Array | Matrix, number":function(c,f){return s(c,f,a)},"Array | Matrix, number, string":function(c,f,d){if(d==="asc")return s(c,f,a);if(d==="desc")return s(c,f,o);throw new Error('Compare string must be "asc" or "desc"')},"Array | Matrix, number, function":s});function s(l,c,f){if(!qe(c)||c<0)throw new Error("k must be a non-negative integer");if(Je(l)){var d=l.size();if(d.length>1)throw new Error("Only one dimensional matrices supported");return u(l.valueOf(),c,f)}if(Array.isArray(l))return u(l,c,f)}function u(l,c,f){if(c>=l.length)throw new Error("k out of bounds");for(var d=0;d<l.length;d++)if(n(l[d])&&r(l[d]))return l[d];for(var h=0,p=l.length-1;h<p;){for(var m=h,g=p,v=l[Math.floor(Math.random()*(p-h+1))+h];m<g;)if(f(l[m],v)>=0){var x=l[g];l[g]=l[m],l[m]=x,--g}else++m;f(l[m],v)>0&&--m,c<=m?p=m:h=m+1}return l[c]}}),JA="sort",HZ=["typed","matrix","compare","compareNatural"],GZ=z(JA,HZ,t=>{var{typed:e,matrix:n,compare:r,compareNatural:i}=t,a=r,o=(c,f)=>-r(c,f);return e(JA,{Array:function(f){return u(f),f.sort(a)},Matrix:function(f){return l(f),n(f.toArray().sort(a),f.storage())},"Array, function":function(f,d){return u(f),f.sort(d)},"Matrix, function":function(f,d){return l(f),n(f.toArray().sort(d),f.storage())},"Array, string":function(f,d){return u(f),f.sort(s(d))},"Matrix, string":function(f,d){return l(f),n(f.toArray().sort(s(d)),f.storage())}});function s(c){if(c==="asc")return a;if(c==="desc")return o;if(c==="natural")return i;throw new Error('String "asc", "desc", or "natural" expected')}function u(c){if(ot(c).length!==1)throw new Error("One dimensional array expected")}function l(c){if(c.size().length!==1)throw new Error("One dimensional matrix expected")}}),e3="max",KZ=["typed","config","numeric","larger","isNaN"],aB=z(e3,KZ,t=>{var{typed:e,config:n,numeric:r,larger:i,isNaN:a}=t;return e(e3,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":function(l,c){return F0(l,c.valueOf(),o)},"...":function(l){if(Ef(l))throw new TypeError("Scalar values expected in function max");return s(l)}});function o(u,l){try{return i(u,l)?u:l}catch(c){throw Hr(c,"max",l)}}function s(u){var l;if(Ks(u,function(c){try{(a(c)||l===void 0||i(c,l))&&(l=c)}catch(f){throw Hr(f,"max",c)}}),l===void 0)throw new Error("Cannot calculate max of an empty array");return typeof l=="string"&&(l=r(l,au(l,n))),l}}),t3="min",YZ=["typed","config","numeric","smaller","isNaN"],oB=z(t3,YZ,t=>{var{typed:e,config:n,numeric:r,smaller:i,isNaN:a}=t;return e(t3,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":function(l,c){return F0(l,c.valueOf(),o)},"...":function(l){if(Ef(l))throw new TypeError("Scalar values expected in function min");return s(l)}});function o(u,l){try{return i(u,l)?u:l}catch(c){throw Hr(c,"min",l)}}function s(u){var l;if(Ks(u,function(c){try{(a(c)||l===void 0||i(c,l))&&(l=c)}catch(f){throw Hr(f,"min",c)}}),l===void 0)throw new Error("Cannot calculate min of an empty array");return typeof l=="string"&&(l=r(l,au(l,n))),l}}),XZ="ImmutableDenseMatrix",QZ=["smaller","DenseMatrix"],ZZ=z(XZ,QZ,t=>{var{smaller:e,DenseMatrix:n}=t;function r(i,a){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(a&&!Dr(a))throw new Error("Invalid datatype: "+a);if(Je(i)||qt(i)){var o=new n(i,a);this._data=o._data,this._size=o._size,this._datatype=o._datatype,this._min=null,this._max=null}else if(i&&qt(i.data)&&qt(i.size))this._data=i.data,this._size=i.size,this._datatype=i.datatype,this._min=typeof i.min<"u"?i.min:null,this._max=typeof i.max<"u"?i.max:null;else{if(i)throw new TypeError("Unsupported type of data ("+Qt(i)+")");this._data=[],this._size=[0],this._datatype=a,this._min=null,this._max=null}}return r.prototype=new n,r.prototype.type="ImmutableDenseMatrix",r.prototype.isImmutableDenseMatrix=!0,r.prototype.subset=function(i){switch(arguments.length){case 1:{var a=n.prototype.subset.call(this,i);return Je(a)?new r({data:a._data,size:a._size,datatype:a._datatype}):a}case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},r.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},r.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},r.prototype.clone=function(){return new r({data:ut(this._data),size:ut(this._size),datatype:this._datatype})},r.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.fromJSON=function(i){return new r(i)},r.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},r.prototype.min=function(){if(this._min===null){var i=null;this.forEach(function(a){(i===null||e(a,i))&&(i=a)}),this._min=i!==null?i:void 0}return this._min},r.prototype.max=function(){if(this._max===null){var i=null;this.forEach(function(a){(i===null||e(i,a))&&(i=a)}),this._max=i!==null?i:void 0}return this._max},r},{isClass:!0}),JZ="Index",eJ=["ImmutableDenseMatrix","getMatrixDataType"],tJ=z(JZ,eJ,t=>{var{ImmutableDenseMatrix:e,getMatrixDataType:n}=t;function r(a){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._sourceSize=[],this._isScalar=!0;for(var o=0,s=arguments.length;o<s;o++){var u=arguments[o],l=qt(u),c=Je(u),f=typeof u,d=null;if(U2(u))this._dimensions.push(u),this._isScalar=!1;else if(l||c){var h=void 0;n(u)==="boolean"?(l&&(h=i(n3(u).valueOf())),c&&(h=i(n3(u._data).valueOf())),d=u.valueOf().length):h=i(u.valueOf()),this._dimensions.push(h);var p=h.size();(p.length!==1||p[0]!==1||d!==null)&&(this._isScalar=!1)}else if(f==="number")this._dimensions.push(i([u]));else if(f==="bigint")this._dimensions.push(i([Number(u)]));else if(f==="string")this._dimensions.push(u);else throw new TypeError("Dimension must be an Array, Matrix, number, bigint, string, or Range");this._sourceSize.push(d)}}r.prototype.type="Index",r.prototype.isIndex=!0;function i(a){for(var o=0,s=a.length;o<s;o++)if(typeof a[o]!="number"||!qe(a[o]))throw new TypeError("Index parameters must be positive integer numbers");return new e(a)}return r.prototype.clone=function(){var a=new r;return a._dimensions=ut(this._dimensions),a._isScalar=this._isScalar,a._sourceSize=this._sourceSize,a},r.create=function(a){var o=new r;return r.apply(o,a),o},r.prototype.size=function(){for(var a=[],o=0,s=this._dimensions.length;o<s;o++){var u=this._dimensions[o];a[o]=typeof u=="string"?1:u.size()[0]}return a},r.prototype.max=function(){for(var a=[],o=0,s=this._dimensions.length;o<s;o++){var u=this._dimensions[o];a[o]=typeof u=="string"?u:u.max()}return a},r.prototype.min=function(){for(var a=[],o=0,s=this._dimensions.length;o<s;o++){var u=this._dimensions[o];a[o]=typeof u=="string"?u:u.min()}return a},r.prototype.forEach=function(a){for(var o=0,s=this._dimensions.length;o<s;o++)a(this._dimensions[o],o,this)},r.prototype.dimension=function(a){return typeof a!="number"?null:this._dimensions[a]||null},r.prototype.isObjectProperty=function(){return this._dimensions.length===1&&typeof this._dimensions[0]=="string"},r.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},r.prototype.isScalar=function(){return this._isScalar},r.prototype.toArray=function(){for(var a=[],o=0,s=this._dimensions.length;o<s;o++){var u=this._dimensions[o];a.push(typeof u=="string"?u:u.toArray())}return a},r.prototype.valueOf=r.prototype.toArray,r.prototype.toString=function(){for(var a=[],o=0,s=this._dimensions.length;o<s;o++){var u=this._dimensions[o];typeof u=="string"?a.push(JSON.stringify(u)):a.push(u.toString())}return"["+a.join(", ")+"]"},r.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},r.fromJSON=function(a){return r.create(a.dimensions)},r},{isClass:!0});function n3(t){var e=[];return t.forEach((n,r)=>{n&&e.push(r)}),e}var nJ="FibonacciHeap",rJ=["smaller","larger"],iJ=z(nJ,rJ,t=>{var{smaller:e,larger:n}=t,r=1/Math.log((1+Math.sqrt(5))/2);function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}i.prototype.type="FibonacciHeap",i.prototype.isFibonacciHeap=!0,i.prototype.insert=function(c,f){var d={key:c,value:f,degree:0};if(this._minimum){var h=this._minimum;d.left=h,d.right=h.right,h.right=d,d.right.left=d,e(c,h.key)&&(this._minimum=d)}else d.left=d,d.right=d,this._minimum=d;return this._size++,d},i.prototype.size=function(){return this._size},i.prototype.clear=function(){this._minimum=null,this._size=0},i.prototype.isEmpty=function(){return this._size===0},i.prototype.extractMinimum=function(){var c=this._minimum;if(c===null)return c;for(var f=this._minimum,d=c.degree,h=c.child;d>0;){var p=h.right;h.left.right=h.right,h.right.left=h.left,h.left=f,h.right=f.right,f.right=h,h.right.left=h,h.parent=null,h=p,d--}return c.left.right=c.right,c.right.left=c.left,c===c.right?f=null:(f=c.right,f=l(f,this._size)),this._size--,this._minimum=f,c},i.prototype.remove=function(c){this._minimum=a(this._minimum,c,-1),this.extractMinimum()};function a(c,f,d){f.key=d;var h=f.parent;return h&&e(f.key,h.key)&&(o(c,f,h),s(c,h)),e(f.key,c.key)&&(c=f),c}function o(c,f,d){f.left.right=f.right,f.right.left=f.left,d.degree--,d.child===f&&(d.child=f.right),d.degree===0&&(d.child=null),f.left=c,f.right=c.right,c.right=f,f.right.left=f,f.parent=null,f.mark=!1}function s(c,f){var d=f.parent;d&&(f.mark?(o(c,f,d),s(d)):f.mark=!0)}var u=function(f,d){f.left.right=f.right,f.right.left=f.left,f.parent=d,d.child?(f.left=d.child,f.right=d.child.right,d.child.right=f,f.right.left=f):(d.child=f,f.right=f,f.left=f),d.degree++,f.mark=!1};function l(c,f){var d=Math.floor(Math.log(f)*r)+1,h=new Array(d),p=0,m=c;if(m)for(p++,m=m.right;m!==c;)p++,m=m.right;for(var g;p>0;){for(var v=m.degree,x=m.right;g=h[v],!!g;){if(n(m.key,g.key)){var y=g;g=m,m=y}u(g,m),h[v]=null,v++}h[v]=m,m=x,p--}c=null;for(var b=0;b<d;b++)g=h[b],g&&(c?(g.left.right=g.right,g.right.left=g.left,g.left=c,g.right=c.right,c.right=g,g.right.left=g,e(g.key,c.key)&&(c=g)):c=g);return c}return i},{isClass:!0}),aJ="Spa",oJ=["addScalar","equalScalar","FibonacciHeap"],sJ=z(aJ,oJ,t=>{var{addScalar:e,equalScalar:n,FibonacciHeap:r}=t;function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new r}return i.prototype.type="Spa",i.prototype.isSpa=!0,i.prototype.set=function(a,o){if(this._values[a])this._values[a].value=o;else{var s=this._heap.insert(a,o);this._values[a]=s}},i.prototype.get=function(a){var o=this._values[a];return o?o.value:0},i.prototype.accumulate=function(a,o){var s=this._values[a];s?s.value=e(s.value,o):(s=this._heap.insert(a,o),this._values[a]=s)},i.prototype.forEach=function(a,o,s){var u=this._heap,l=this._values,c=[],f=u.extractMinimum();for(f&&c.push(f);f&&f.key<=o;)f.key>=a&&(n(f.value,0)||s(f.key,f.value,this)),f=u.extractMinimum(),f&&c.push(f);for(var d=0;d<c.length;d++){var h=c[d];f=u.insert(h.key,h.value),l[f.key]=f}},i.prototype.swap=function(a,o){var s=this._values[a],u=this._values[o];if(!s&&u)s=this._heap.insert(a,u.value),this._heap.remove(u),this._values[a]=s,this._values[o]=void 0;else if(s&&!u)u=this._heap.insert(o,s.value),this._heap.remove(s),this._values[o]=u,this._values[a]=void 0;else if(s&&u){var l=s.value;s.value=u.value,u.value=l}},i},{isClass:!0});function uJ(t){var e=0,n=1,r=Object.create(null),i=Object.create(null),a=0,o=function(u){var l=i[u];if(l&&(delete r[l],delete i[u],--e,n===l)){if(!e){a=0,n=1;return}for(;!Object.prototype.hasOwnProperty.call(r,++n););}};return t=Math.abs(t),{hit:function(u){var l=i[u],c=++a;if(r[c]=u,i[u]=c,!l)return++e,e<=t?void 0:(u=r[n],o(u),u);if(delete r[l],n===l)for(;!Object.prototype.hasOwnProperty.call(r,++n););},delete:o,clear:function(){e=a=0,n=1,r=Object.create(null),i=Object.create(null)}}}function Jh(t){var{hasher:e,limit:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return n=n??Number.POSITIVE_INFINITY,e=e??JSON.stringify,function r(){typeof r.cache!="object"&&(r.cache={values:new Map,lru:uJ(n||Number.POSITIVE_INFINITY)});for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var o=e(i);if(r.cache.values.has(o))return r.cache.lru.hit(o),r.cache.values.get(o);var s=t.apply(t,i);return r.cache.values.set(o,s),r.cache.values.delete(r.cache.lru.hit(o)),s}}var lJ=Jh(function(t){return new t(1).exp()},{hasher:B0}),cJ=Jh(function(t){return new t(1).plus(new t(5).sqrt()).div(2)},{hasher:B0}),r_=Jh(function(t){return t.acos(-1)},{hasher:B0}),fJ=Jh(function(t){return r_(t).times(2)},{hasher:B0});function B0(t){return t[0].precision}function r3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function u1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?r3(Object(n),!0).forEach(function(r){Pn(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var dJ="Unit",hJ=["?on","config","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","abs","fix","round","equal","isNumeric","format","number","Complex","BigNumber","Fraction"],pJ=z(dJ,hJ,t=>{var{on:e,config:n,addScalar:r,subtractScalar:i,multiplyScalar:a,divideScalar:o,pow:s,abs:u,fix:l,round:c,equal:f,isNumeric:d,format:h,number:p,Complex:m,BigNumber:g,Fraction:v}=t,x=p;function y($,G){if(!(this instanceof y))throw new Error("Constructor must be called with the new operator");if(!($==null||d($)||Mo($)))throw new TypeError("First parameter in Unit constructor must be number, BigNumber, Fraction, Complex, or undefined");if(this.fixPrefix=!1,this.skipAutomaticSimplification=!0,G===void 0)this.units=[],this.dimensions=B.map(ce=>0);else if(typeof G=="string"){var ue=y.parse(G);this.units=ue.units,this.dimensions=ue.dimensions}else if(Hi(G)&&G.value===null)this.fixPrefix=G.fixPrefix,this.skipAutomaticSimplification=G.skipAutomaticSimplification,this.dimensions=G.dimensions.slice(0),this.units=G.units.map(ce=>jn({},ce));else throw new TypeError("Second parameter in Unit constructor must be a string or valueless Unit");this.value=this._normalize($)}Object.defineProperty(y,"name",{value:"Unit"}),y.prototype.constructor=y,y.prototype.type="Unit",y.prototype.isUnit=!0;var b,w,_;function E(){for(;_===" "||_==="	";)D()}function C($){return $>="0"&&$<="9"||$==="."}function N($){return $>="0"&&$<="9"}function D(){w++,_=b.charAt(w)}function A($){w=$,_=b.charAt(w)}function T(){var $="",G=w;if(_==="+"?D():_==="-"&&($+=_,D()),!C(_))return A(G),null;if(_==="."){if($+=_,D(),!N(_))return A(G),null}else{for(;N(_);)$+=_,D();_==="."&&($+=_,D())}for(;N(_);)$+=_,D();if(_==="E"||_==="e"){var ue="",ce=w;if(ue+=_,D(),(_==="+"||_==="-")&&(ue+=_,D()),!N(_))return A(ce),$;for($=$+ue;N(_);)$+=_,D()}return $}function k(){for(var $="";N(_)||y.isValidAlpha(_);)$+=_,D();var G=$.charAt(0);return y.isValidAlpha(G)?$:null}function F($){return _===$?(D(),$):null}y.parse=function($,G){if(G=G||{},b=$,w=-1,_="",typeof b!="string")throw new TypeError("Invalid argument in Unit.parse, string expected");var ue=new y;ue.units=[];var ce=1,ge=!1;D(),E();var Ce=T(),Ae=null;if(Ce){if(n.number==="BigNumber")Ae=new g(Ce);else if(n.number==="Fraction")try{Ae=new v(Ce)}catch{Ae=parseFloat(Ce)}else Ae=parseFloat(Ce);E(),F("*")?(ce=1,ge=!0):F("/")&&(ce=-1,ge=!0)}for(var Pe=[],q=1;;){for(E();_==="(";)Pe.push(ce),q*=ce,ce=1,D(),E();var ee=void 0;if(_){var le=_;if(ee=k(),ee===null)throw new SyntaxError('Unexpected "'+le+'" in "'+b+'" at index '+w.toString())}else break;var pe=O(ee);if(pe===null)throw new SyntaxError('Unit "'+ee+'" not found.');var be=ce*q;if(E(),F("^")){E();var xe=T();if(xe===null)throw new SyntaxError('In "'+$+'", "^" must be followed by a floating-point number');be*=xe}ue.units.push({unit:pe.unit,prefix:pe.prefix,power:be});for(var Fe=0;Fe<B.length;Fe++)ue.dimensions[Fe]+=(pe.unit.dimensions[Fe]||0)*be;for(E();_===")";){if(Pe.length===0)throw new SyntaxError('Unmatched ")" in "'+b+'" at index '+w.toString());q/=Pe.pop(),D(),E()}if(ge=!1,F("*")?(ce=1,ge=!0):F("/")?(ce=-1,ge=!0):ce=1,pe.unit.base){var Te=pe.unit.base.key;te.auto[Te]={unit:pe.unit,prefix:pe.prefix}}}if(E(),_)throw new SyntaxError('Could not parse: "'+$+'"');if(ge)throw new SyntaxError('Trailing characters: "'+$+'"');if(Pe.length!==0)throw new SyntaxError('Unmatched "(" in "'+b+'"');if(ue.units.length===0&&!G.allowNoUnits)throw new SyntaxError('"'+$+'" contains no units');return ue.value=Ae!==void 0?ue._normalize(Ae):null,ue},y.prototype.clone=function(){var $=new y;$.fixPrefix=this.fixPrefix,$.skipAutomaticSimplification=this.skipAutomaticSimplification,$.value=ut(this.value),$.dimensions=this.dimensions.slice(0),$.units=[];for(var G=0;G<this.units.length;G++){$.units[G]={};for(var ue in this.units[G])Ue(this.units[G],ue)&&($.units[G][ue]=this.units[G][ue])}return $},y.prototype.valueType=function(){return Qt(this.value)},y.prototype._isDerived=function(){return this.units.length===0?!1:this.units.length>1||Math.abs(this.units[0].power-1)>1e-15},y.prototype._normalize=function($){if($==null||this.units.length===0)return $;for(var G=$,ue=y._getNumberConverter(Qt($)),ce=0;ce<this.units.length;ce++){var ge=ue(this.units[ce].unit.value),Ce=ue(this.units[ce].prefix.value),Ae=ue(this.units[ce].power);G=a(G,s(a(ge,Ce),Ae))}return G},y.prototype._denormalize=function($,G){if($==null||this.units.length===0)return $;for(var ue=$,ce=y._getNumberConverter(Qt($)),ge=0;ge<this.units.length;ge++){var Ce=ce(this.units[ge].unit.value),Ae=ce(this.units[ge].prefix.value),Pe=ce(this.units[ge].power);ue=o(ue,s(a(Ce,Ae),Pe))}return ue};var O=Jh($=>{if(Ue(L,$)){var G=L[$],ue=G.prefixes[""];return{unit:G,prefix:ue}}for(var ce in L)if(Ue(L,ce)&&_H($,ce)){var ge=L[ce],Ce=$.length-ce.length,Ae=$.substring(0,Ce),Pe=Ue(ge.prefixes,Ae)?ge.prefixes[Ae]:void 0;if(Pe!==void 0)return{unit:ge,prefix:Pe}}return null},{hasher:$=>$[0],limit:100});y.isValuelessUnit=function($){return O($)!==null},y.prototype.hasBase=function($){if(typeof $=="string"&&($=R[$]),!$)return!1;for(var G=0;G<B.length;G++)if(Math.abs((this.dimensions[G]||0)-($.dimensions[G]||0))>1e-12)return!1;return!0},y.prototype.equalBase=function($){for(var G=0;G<B.length;G++)if(Math.abs((this.dimensions[G]||0)-($.dimensions[G]||0))>1e-12)return!1;return!0},y.prototype.equals=function($){return this.equalBase($)&&f(this.value,$.value)},y.prototype.multiply=function($){for(var G=this.clone(),ue=Hi($)?$:new y($),ce=0;ce<B.length;ce++)G.dimensions[ce]=(this.dimensions[ce]||0)+(ue.dimensions[ce]||0);for(var ge=0;ge<ue.units.length;ge++){var Ce=u1({},ue.units[ge]);G.units.push(Ce)}if(this.value!==null||ue.value!==null){var Ae=this.value===null?this._normalize(1):this.value,Pe=ue.value===null?ue._normalize(1):ue.value;G.value=a(Ae,Pe)}else G.value=null;return Hi($)&&(G.skipAutomaticSimplification=!1),I(G)},y.prototype.divideInto=function($){return new y($).divide(this)},y.prototype.divide=function($){for(var G=this.clone(),ue=Hi($)?$:new y($),ce=0;ce<B.length;ce++)G.dimensions[ce]=(this.dimensions[ce]||0)-(ue.dimensions[ce]||0);for(var ge=0;ge<ue.units.length;ge++){var Ce=u1(u1({},ue.units[ge]),{},{power:-ue.units[ge].power});G.units.push(Ce)}if(this.value!==null||ue.value!==null){var Ae=this.value===null?this._normalize(1):this.value,Pe=ue.value===null?ue._normalize(1):ue.value;G.value=o(Ae,Pe)}else G.value=null;return Hi($)&&(G.skipAutomaticSimplification=!1),I(G)},y.prototype.pow=function($){for(var G=this.clone(),ue=0;ue<B.length;ue++)G.dimensions[ue]=(this.dimensions[ue]||0)*$;for(var ce=0;ce<G.units.length;ce++)G.units[ce].power*=$;return G.value!==null?G.value=s(G.value,$):G.value=null,G.skipAutomaticSimplification=!1,I(G)};function I($){return $.equalBase(R.NONE)&&$.value!==null&&!n.predictable?$.value:$}y.prototype.abs=function(){var $=this.clone();if($.value!==null)if($._isDerived()||$.units.length===0||$.units[0].unit.offset===0)$.value=u($.value);else{var G=$._numberConverter(),ue=G($.units[0].unit.value),ce=G($.units[0].unit.offset),ge=a(ue,ce);$.value=i(u(r($.value,ge)),ge)}for(var Ce in $.units)($.units[Ce].unit.name==="VA"||$.units[Ce].unit.name==="VAR")&&($.units[Ce].unit=L.W);return $},y.prototype.to=function($){var G=this.value===null?this._normalize(1):this.value,ue;if(typeof $=="string")ue=y.parse($);else if(Hi($))ue=$.clone();else throw new Error("String or Unit expected as parameter");if(!this.equalBase(ue))throw new Error("Units do not match ('".concat(ue.toString(),"' != '").concat(this.toString(),"')"));if(ue.value!==null)throw new Error("Cannot convert to a unit with a value");if(this.value===null||this._isDerived()||this.units.length===0||ue.units.length===0||this.units[0].unit.offset===ue.units[0].unit.offset)ue.value=ut(G);else{var ce=y._getNumberConverter(Qt(G)),ge=this.units[0].unit.value,Ce=this.units[0].unit.offset,Ae=a(ge,Ce),Pe=ue.units[0].unit.value,q=ue.units[0].unit.offset,ee=a(Pe,q);ue.value=r(G,ce(i(Ae,ee)))}return ue.fixPrefix=!0,ue.skipAutomaticSimplification=!0,ue},y.prototype.toNumber=function($){return x(this.toNumeric($))},y.prototype.toNumeric=function($){var G;return $?G=this.to($):G=this.clone(),G._isDerived()||G.units.length===0?G._denormalize(G.value):G._denormalize(G.value,G.units[0].prefix.value)},y.prototype.toString=function(){return this.format()},y.prototype.toJSON=function(){return{mathjs:"Unit",value:this._denormalize(this.value),unit:this.units.length>0?this.formatUnits():null,fixPrefix:this.fixPrefix}},y.fromJSON=function($){var G,ue=new y($.value,(G=$.unit)!==null&&G!==void 0?G:void 0);return ue.fixPrefix=$.fixPrefix||!1,ue},y.prototype.valueOf=y.prototype.toString,y.prototype.simplify=function(){var $=this.clone(),G=[],ue;for(var ce in oe)if(Ue(oe,ce)&&$.hasBase(R[ce])){ue=ce;break}if(ue==="NONE")$.units=[];else{var ge;if(ue&&Ue(oe,ue)&&(ge=oe[ue]),ge)$.units=[{unit:ge.unit,prefix:ge.prefix,power:1}];else{for(var Ce=!1,Ae=0;Ae<B.length;Ae++){var Pe=B[Ae];Math.abs($.dimensions[Ae]||0)>1e-12&&(Ue(oe,Pe)?G.push({unit:oe[Pe].unit,prefix:oe[Pe].prefix,power:$.dimensions[Ae]||0}):Ce=!0)}G.length<$.units.length&&!Ce&&($.units=G)}}return $},y.prototype.toSI=function(){for(var $=this.clone(),G=[],ue=0;ue<B.length;ue++){var ce=B[ue];if(Math.abs($.dimensions[ue]||0)>1e-12)if(Ue(te.si,ce))G.push({unit:te.si[ce].unit,prefix:te.si[ce].prefix,power:$.dimensions[ue]||0});else throw new Error("Cannot express custom unit "+ce+" in SI units")}return $.units=G,$.fixPrefix=!0,$.skipAutomaticSimplification=!0,this.value!==null?($.value=null,this.to($)):$},y.prototype.formatUnits=function(){for(var $="",G="",ue=0,ce=0,ge=0;ge<this.units.length;ge++)this.units[ge].power>0?(ue++,$+=" "+this.units[ge].prefix.name+this.units[ge].unit.name,Math.abs(this.units[ge].power-1)>1e-15&&($+="^"+this.units[ge].power)):this.units[ge].power<0&&ce++;if(ce>0)for(var Ce=0;Ce<this.units.length;Ce++)this.units[Ce].power<0&&(ue>0?(G+=" "+this.units[Ce].prefix.name+this.units[Ce].unit.name,Math.abs(this.units[Ce].power+1)>1e-15&&(G+="^"+-this.units[Ce].power)):(G+=" "+this.units[Ce].prefix.name+this.units[Ce].unit.name,G+="^"+this.units[Ce].power));$=$.substr(1),G=G.substr(1),ue>1&&ce>0&&($="("+$+")"),ce>1&&ue>0&&(G="("+G+")");var Ae=$;return ue>0&&ce>0&&(Ae+=" / "),Ae+=G,Ae},y.prototype.format=function($){var G=this.skipAutomaticSimplification||this.value===null?this.clone():this.simplify(),ue=!1;typeof G.value<"u"&&G.value!==null&&Mo(G.value)&&(ue=Math.abs(G.value.re)<1e-14);for(var ce in G.units)Ue(G.units,ce)&&G.units[ce].unit&&(G.units[ce].unit.name==="VA"&&ue?G.units[ce].unit=L.VAR:G.units[ce].unit.name==="VAR"&&!ue&&(G.units[ce].unit=L.VA));G.units.length===1&&!G.fixPrefix&&Math.abs(G.units[0].power-Math.round(G.units[0].power))<1e-14&&(G.units[0].prefix=G._bestPrefix());var ge=G._denormalize(G.value),Ce=G.value!==null?h(ge,$||{}):"",Ae=G.formatUnits();return G.value&&Mo(G.value)&&(Ce="("+Ce+")"),Ae.length>0&&Ce.length>0&&(Ce+=" "),Ce+=Ae,Ce},y.prototype._bestPrefix=function(){if(this.units.length!==1)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");if(Math.abs(this.units[0].power-Math.round(this.units[0].power))>=1e-14)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");var $=this.value!==null?u(this.value):0,G=u(this.units[0].unit.value),ue=this.units[0].prefix;if($===0)return ue;var ce=this.units[0].power,ge=Math.log($/Math.pow(ue.value*G,ce))/Math.LN10-1.2;if(ge>-2.200001&&ge<1.800001)return ue;ge=Math.abs(ge);var Ce=this.units[0].unit.prefixes;for(var Ae in Ce)if(Ue(Ce,Ae)){var Pe=Ce[Ae];if(Pe.scientific){var q=Math.abs(Math.log($/Math.pow(Pe.value*G,ce))/Math.LN10-1.2);(q<ge||q===ge&&Pe.name.length<ue.name.length)&&(ue=Pe,ge=q)}}return ue},y.prototype.splitUnit=function($){for(var G=this.clone(),ue=[],ce=0;ce<$.length&&(G=G.to($[ce]),ce!==$.length-1);ce++){var ge=G.toNumeric(),Ce=c(ge),Ae=void 0,Pe=f(Ce,ge);Pe?Ae=Ce:Ae=l(G.toNumeric());var q=new y(Ae,$[ce].toString());ue.push(q),G=i(G,q)}for(var ee=0,le=0;le<ue.length;le++)ee=r(ee,ue[le].value);return f(ee,this.value)&&(G.value=0),ue.push(G),ue};var M={NONE:{"":{name:"",value:1,scientific:!0}},SHORT:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:10,scientific:!1},h:{name:"h",value:100,scientific:!1},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},R:{name:"R",value:1e27,scientific:!0},Q:{name:"Q",value:1e30,scientific:!0},d:{name:"d",value:.1,scientific:!1},c:{name:"c",value:.01,scientific:!1},m:{name:"m",value:.001,scientific:!0},u:{name:"u",value:1e-6,scientific:!0},n:{name:"n",value:1e-9,scientific:!0},p:{name:"p",value:1e-12,scientific:!0},f:{name:"f",value:1e-15,scientific:!0},a:{name:"a",value:1e-18,scientific:!0},z:{name:"z",value:1e-21,scientific:!0},y:{name:"y",value:1e-24,scientific:!0},r:{name:"r",value:1e-27,scientific:!0},q:{name:"q",value:1e-30,scientific:!0}},LONG:{"":{name:"",value:1,scientific:!0},deca:{name:"deca",value:10,scientific:!1},hecto:{name:"hecto",value:100,scientific:!1},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},ronna:{name:"ronna",value:1e27,scientific:!0},quetta:{name:"quetta",value:1e30,scientific:!0},deci:{name:"deci",value:.1,scientific:!1},centi:{name:"centi",value:.01,scientific:!1},milli:{name:"milli",value:.001,scientific:!0},micro:{name:"micro",value:1e-6,scientific:!0},nano:{name:"nano",value:1e-9,scientific:!0},pico:{name:"pico",value:1e-12,scientific:!0},femto:{name:"femto",value:1e-15,scientific:!0},atto:{name:"atto",value:1e-18,scientific:!0},zepto:{name:"zepto",value:1e-21,scientific:!0},yocto:{name:"yocto",value:1e-24,scientific:!0},ronto:{name:"ronto",value:1e-27,scientific:!0},quecto:{name:"quecto",value:1e-30,scientific:!0}},SQUARED:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:100,scientific:!1},h:{name:"h",value:1e4,scientific:!1},k:{name:"k",value:1e6,scientific:!0},M:{name:"M",value:1e12,scientific:!0},G:{name:"G",value:1e18,scientific:!0},T:{name:"T",value:1e24,scientific:!0},P:{name:"P",value:1e30,scientific:!0},E:{name:"E",value:1e36,scientific:!0},Z:{name:"Z",value:1e42,scientific:!0},Y:{name:"Y",value:1e48,scientific:!0},R:{name:"R",value:1e54,scientific:!0},Q:{name:"Q",value:1e60,scientific:!0},d:{name:"d",value:.01,scientific:!1},c:{name:"c",value:1e-4,scientific:!1},m:{name:"m",value:1e-6,scientific:!0},u:{name:"u",value:1e-12,scientific:!0},n:{name:"n",value:1e-18,scientific:!0},p:{name:"p",value:1e-24,scientific:!0},f:{name:"f",value:1e-30,scientific:!0},a:{name:"a",value:1e-36,scientific:!0},z:{name:"z",value:1e-42,scientific:!0},y:{name:"y",value:1e-48,scientific:!0},r:{name:"r",value:1e-54,scientific:!0},q:{name:"q",value:1e-60,scientific:!0}},CUBIC:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:1e3,scientific:!1},h:{name:"h",value:1e6,scientific:!1},k:{name:"k",value:1e9,scientific:!0},M:{name:"M",value:1e18,scientific:!0},G:{name:"G",value:1e27,scientific:!0},T:{name:"T",value:1e36,scientific:!0},P:{name:"P",value:1e45,scientific:!0},E:{name:"E",value:1e54,scientific:!0},Z:{name:"Z",value:1e63,scientific:!0},Y:{name:"Y",value:1e72,scientific:!0},R:{name:"R",value:1e81,scientific:!0},Q:{name:"Q",value:1e90,scientific:!0},d:{name:"d",value:.001,scientific:!1},c:{name:"c",value:1e-6,scientific:!1},m:{name:"m",value:1e-9,scientific:!0},u:{name:"u",value:1e-18,scientific:!0},n:{name:"n",value:1e-27,scientific:!0},p:{name:"p",value:1e-36,scientific:!0},f:{name:"f",value:1e-45,scientific:!0},a:{name:"a",value:1e-54,scientific:!0},z:{name:"z",value:1e-63,scientific:!0},y:{name:"y",value:1e-72,scientific:!0},r:{name:"r",value:1e-81,scientific:!0},q:{name:"q",value:1e-90,scientific:!0}},BINARY_SHORT_SI:{"":{name:"",value:1,scientific:!0},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0}},BINARY_SHORT_IEC:{"":{name:"",value:1,scientific:!0},Ki:{name:"Ki",value:1024,scientific:!0},Mi:{name:"Mi",value:Math.pow(1024,2),scientific:!0},Gi:{name:"Gi",value:Math.pow(1024,3),scientific:!0},Ti:{name:"Ti",value:Math.pow(1024,4),scientific:!0},Pi:{name:"Pi",value:Math.pow(1024,5),scientific:!0},Ei:{name:"Ei",value:Math.pow(1024,6),scientific:!0},Zi:{name:"Zi",value:Math.pow(1024,7),scientific:!0},Yi:{name:"Yi",value:Math.pow(1024,8),scientific:!0}},BINARY_LONG_SI:{"":{name:"",value:1,scientific:!0},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0}},BINARY_LONG_IEC:{"":{name:"",value:1,scientific:!0},kibi:{name:"kibi",value:1024,scientific:!0},mebi:{name:"mebi",value:Math.pow(1024,2),scientific:!0},gibi:{name:"gibi",value:Math.pow(1024,3),scientific:!0},tebi:{name:"tebi",value:Math.pow(1024,4),scientific:!0},pebi:{name:"pebi",value:Math.pow(1024,5),scientific:!0},exi:{name:"exi",value:Math.pow(1024,6),scientific:!0},zebi:{name:"zebi",value:Math.pow(1024,7),scientific:!0},yobi:{name:"yobi",value:Math.pow(1024,8),scientific:!0}},BTU:{"":{name:"",value:1,scientific:!0},MM:{name:"MM",value:1e6,scientific:!0}}};M.SHORTLONG=jn({},M.SHORT,M.LONG),M.BINARY_SHORT=jn({},M.BINARY_SHORT_SI,M.BINARY_SHORT_IEC),M.BINARY_LONG=jn({},M.BINARY_LONG_SI,M.BINARY_LONG_IEC);var B=["MASS","LENGTH","TIME","CURRENT","TEMPERATURE","LUMINOUS_INTENSITY","AMOUNT_OF_SUBSTANCE","ANGLE","BIT"],R={NONE:{dimensions:[0,0,0,0,0,0,0,0,0]},MASS:{dimensions:[1,0,0,0,0,0,0,0,0]},LENGTH:{dimensions:[0,1,0,0,0,0,0,0,0]},TIME:{dimensions:[0,0,1,0,0,0,0,0,0]},CURRENT:{dimensions:[0,0,0,1,0,0,0,0,0]},TEMPERATURE:{dimensions:[0,0,0,0,1,0,0,0,0]},LUMINOUS_INTENSITY:{dimensions:[0,0,0,0,0,1,0,0,0]},AMOUNT_OF_SUBSTANCE:{dimensions:[0,0,0,0,0,0,1,0,0]},FORCE:{dimensions:[1,1,-2,0,0,0,0,0,0]},SURFACE:{dimensions:[0,2,0,0,0,0,0,0,0]},VOLUME:{dimensions:[0,3,0,0,0,0,0,0,0]},ENERGY:{dimensions:[1,2,-2,0,0,0,0,0,0]},POWER:{dimensions:[1,2,-3,0,0,0,0,0,0]},PRESSURE:{dimensions:[1,-1,-2,0,0,0,0,0,0]},ELECTRIC_CHARGE:{dimensions:[0,0,1,1,0,0,0,0,0]},ELECTRIC_CAPACITANCE:{dimensions:[-1,-2,4,2,0,0,0,0,0]},ELECTRIC_POTENTIAL:{dimensions:[1,2,-3,-1,0,0,0,0,0]},ELECTRIC_RESISTANCE:{dimensions:[1,2,-3,-2,0,0,0,0,0]},ELECTRIC_INDUCTANCE:{dimensions:[1,2,-2,-2,0,0,0,0,0]},ELECTRIC_CONDUCTANCE:{dimensions:[-1,-2,3,2,0,0,0,0,0]},MAGNETIC_FLUX:{dimensions:[1,2,-2,-1,0,0,0,0,0]},MAGNETIC_FLUX_DENSITY:{dimensions:[1,0,-2,-1,0,0,0,0,0]},FREQUENCY:{dimensions:[0,0,-1,0,0,0,0,0,0]},ANGLE:{dimensions:[0,0,0,0,0,0,0,1,0]},BIT:{dimensions:[0,0,0,0,0,0,0,0,1]}};for(var j in R)Ue(R,j)&&(R[j].key=j);var K={},V={name:"",base:K,value:1,offset:0,dimensions:B.map($=>0)},L={meter:{name:"meter",base:R.LENGTH,prefixes:M.LONG,value:1,offset:0},inch:{name:"inch",base:R.LENGTH,prefixes:M.NONE,value:.0254,offset:0},foot:{name:"foot",base:R.LENGTH,prefixes:M.NONE,value:.3048,offset:0},yard:{name:"yard",base:R.LENGTH,prefixes:M.NONE,value:.9144,offset:0},mile:{name:"mile",base:R.LENGTH,prefixes:M.NONE,value:1609.344,offset:0},link:{name:"link",base:R.LENGTH,prefixes:M.NONE,value:.201168,offset:0},rod:{name:"rod",base:R.LENGTH,prefixes:M.NONE,value:5.0292,offset:0},chain:{name:"chain",base:R.LENGTH,prefixes:M.NONE,value:20.1168,offset:0},angstrom:{name:"angstrom",base:R.LENGTH,prefixes:M.NONE,value:1e-10,offset:0},m:{name:"m",base:R.LENGTH,prefixes:M.SHORT,value:1,offset:0},in:{name:"in",base:R.LENGTH,prefixes:M.NONE,value:.0254,offset:0},ft:{name:"ft",base:R.LENGTH,prefixes:M.NONE,value:.3048,offset:0},yd:{name:"yd",base:R.LENGTH,prefixes:M.NONE,value:.9144,offset:0},mi:{name:"mi",base:R.LENGTH,prefixes:M.NONE,value:1609.344,offset:0},li:{name:"li",base:R.LENGTH,prefixes:M.NONE,value:.201168,offset:0},rd:{name:"rd",base:R.LENGTH,prefixes:M.NONE,value:5.02921,offset:0},ch:{name:"ch",base:R.LENGTH,prefixes:M.NONE,value:20.1168,offset:0},mil:{name:"mil",base:R.LENGTH,prefixes:M.NONE,value:254e-7,offset:0},m2:{name:"m2",base:R.SURFACE,prefixes:M.SQUARED,value:1,offset:0},sqin:{name:"sqin",base:R.SURFACE,prefixes:M.NONE,value:64516e-8,offset:0},sqft:{name:"sqft",base:R.SURFACE,prefixes:M.NONE,value:.09290304,offset:0},sqyd:{name:"sqyd",base:R.SURFACE,prefixes:M.NONE,value:.83612736,offset:0},sqmi:{name:"sqmi",base:R.SURFACE,prefixes:M.NONE,value:2589988110336e-6,offset:0},sqrd:{name:"sqrd",base:R.SURFACE,prefixes:M.NONE,value:25.29295,offset:0},sqch:{name:"sqch",base:R.SURFACE,prefixes:M.NONE,value:404.6873,offset:0},sqmil:{name:"sqmil",base:R.SURFACE,prefixes:M.NONE,value:64516e-14,offset:0},acre:{name:"acre",base:R.SURFACE,prefixes:M.NONE,value:4046.86,offset:0},hectare:{name:"hectare",base:R.SURFACE,prefixes:M.NONE,value:1e4,offset:0},m3:{name:"m3",base:R.VOLUME,prefixes:M.CUBIC,value:1,offset:0},L:{name:"L",base:R.VOLUME,prefixes:M.SHORT,value:.001,offset:0},l:{name:"l",base:R.VOLUME,prefixes:M.SHORT,value:.001,offset:0},litre:{name:"litre",base:R.VOLUME,prefixes:M.LONG,value:.001,offset:0},cuin:{name:"cuin",base:R.VOLUME,prefixes:M.NONE,value:16387064e-12,offset:0},cuft:{name:"cuft",base:R.VOLUME,prefixes:M.NONE,value:.028316846592,offset:0},cuyd:{name:"cuyd",base:R.VOLUME,prefixes:M.NONE,value:.764554857984,offset:0},teaspoon:{name:"teaspoon",base:R.VOLUME,prefixes:M.NONE,value:5e-6,offset:0},tablespoon:{name:"tablespoon",base:R.VOLUME,prefixes:M.NONE,value:15e-6,offset:0},drop:{name:"drop",base:R.VOLUME,prefixes:M.NONE,value:5e-8,offset:0},gtt:{name:"gtt",base:R.VOLUME,prefixes:M.NONE,value:5e-8,offset:0},minim:{name:"minim",base:R.VOLUME,prefixes:M.NONE,value:61611519921875e-21,offset:0},fluiddram:{name:"fluiddram",base:R.VOLUME,prefixes:M.NONE,value:36966911953125e-19,offset:0},fluidounce:{name:"fluidounce",base:R.VOLUME,prefixes:M.NONE,value:295735295625e-16,offset:0},gill:{name:"gill",base:R.VOLUME,prefixes:M.NONE,value:.00011829411825,offset:0},cc:{name:"cc",base:R.VOLUME,prefixes:M.NONE,value:1e-6,offset:0},cup:{name:"cup",base:R.VOLUME,prefixes:M.NONE,value:.0002365882365,offset:0},pint:{name:"pint",base:R.VOLUME,prefixes:M.NONE,value:.000473176473,offset:0},quart:{name:"quart",base:R.VOLUME,prefixes:M.NONE,value:.000946352946,offset:0},gallon:{name:"gallon",base:R.VOLUME,prefixes:M.NONE,value:.003785411784,offset:0},beerbarrel:{name:"beerbarrel",base:R.VOLUME,prefixes:M.NONE,value:.117347765304,offset:0},oilbarrel:{name:"oilbarrel",base:R.VOLUME,prefixes:M.NONE,value:.158987294928,offset:0},hogshead:{name:"hogshead",base:R.VOLUME,prefixes:M.NONE,value:.238480942392,offset:0},g:{name:"g",base:R.MASS,prefixes:M.SHORT,value:.001,offset:0},gram:{name:"gram",base:R.MASS,prefixes:M.LONG,value:.001,offset:0},ton:{name:"ton",base:R.MASS,prefixes:M.SHORT,value:907.18474,offset:0},t:{name:"t",base:R.MASS,prefixes:M.SHORT,value:1e3,offset:0},tonne:{name:"tonne",base:R.MASS,prefixes:M.LONG,value:1e3,offset:0},grain:{name:"grain",base:R.MASS,prefixes:M.NONE,value:6479891e-11,offset:0},dram:{name:"dram",base:R.MASS,prefixes:M.NONE,value:.0017718451953125,offset:0},ounce:{name:"ounce",base:R.MASS,prefixes:M.NONE,value:.028349523125,offset:0},poundmass:{name:"poundmass",base:R.MASS,prefixes:M.NONE,value:.45359237,offset:0},hundredweight:{name:"hundredweight",base:R.MASS,prefixes:M.NONE,value:45.359237,offset:0},stick:{name:"stick",base:R.MASS,prefixes:M.NONE,value:.115,offset:0},stone:{name:"stone",base:R.MASS,prefixes:M.NONE,value:6.35029318,offset:0},gr:{name:"gr",base:R.MASS,prefixes:M.NONE,value:6479891e-11,offset:0},dr:{name:"dr",base:R.MASS,prefixes:M.NONE,value:.0017718451953125,offset:0},oz:{name:"oz",base:R.MASS,prefixes:M.NONE,value:.028349523125,offset:0},lbm:{name:"lbm",base:R.MASS,prefixes:M.NONE,value:.45359237,offset:0},cwt:{name:"cwt",base:R.MASS,prefixes:M.NONE,value:45.359237,offset:0},s:{name:"s",base:R.TIME,prefixes:M.SHORT,value:1,offset:0},min:{name:"min",base:R.TIME,prefixes:M.NONE,value:60,offset:0},h:{name:"h",base:R.TIME,prefixes:M.NONE,value:3600,offset:0},second:{name:"second",base:R.TIME,prefixes:M.LONG,value:1,offset:0},sec:{name:"sec",base:R.TIME,prefixes:M.LONG,value:1,offset:0},minute:{name:"minute",base:R.TIME,prefixes:M.NONE,value:60,offset:0},hour:{name:"hour",base:R.TIME,prefixes:M.NONE,value:3600,offset:0},day:{name:"day",base:R.TIME,prefixes:M.NONE,value:86400,offset:0},week:{name:"week",base:R.TIME,prefixes:M.NONE,value:7*86400,offset:0},month:{name:"month",base:R.TIME,prefixes:M.NONE,value:2629800,offset:0},year:{name:"year",base:R.TIME,prefixes:M.NONE,value:31557600,offset:0},decade:{name:"decade",base:R.TIME,prefixes:M.NONE,value:315576e3,offset:0},century:{name:"century",base:R.TIME,prefixes:M.NONE,value:315576e4,offset:0},millennium:{name:"millennium",base:R.TIME,prefixes:M.NONE,value:315576e5,offset:0},hertz:{name:"Hertz",base:R.FREQUENCY,prefixes:M.LONG,value:1,offset:0,reciprocal:!0},Hz:{name:"Hz",base:R.FREQUENCY,prefixes:M.SHORT,value:1,offset:0,reciprocal:!0},rad:{name:"rad",base:R.ANGLE,prefixes:M.SHORT,value:1,offset:0},radian:{name:"radian",base:R.ANGLE,prefixes:M.LONG,value:1,offset:0},deg:{name:"deg",base:R.ANGLE,prefixes:M.SHORT,value:null,offset:0},degree:{name:"degree",base:R.ANGLE,prefixes:M.LONG,value:null,offset:0},grad:{name:"grad",base:R.ANGLE,prefixes:M.SHORT,value:null,offset:0},gradian:{name:"gradian",base:R.ANGLE,prefixes:M.LONG,value:null,offset:0},cycle:{name:"cycle",base:R.ANGLE,prefixes:M.NONE,value:null,offset:0},arcsec:{name:"arcsec",base:R.ANGLE,prefixes:M.NONE,value:null,offset:0},arcmin:{name:"arcmin",base:R.ANGLE,prefixes:M.NONE,value:null,offset:0},A:{name:"A",base:R.CURRENT,prefixes:M.SHORT,value:1,offset:0},ampere:{name:"ampere",base:R.CURRENT,prefixes:M.LONG,value:1,offset:0},K:{name:"K",base:R.TEMPERATURE,prefixes:M.SHORT,value:1,offset:0},degC:{name:"degC",base:R.TEMPERATURE,prefixes:M.SHORT,value:1,offset:273.15},degF:{name:"degF",base:R.TEMPERATURE,prefixes:M.SHORT,value:new v(5,9),offset:459.67},degR:{name:"degR",base:R.TEMPERATURE,prefixes:M.SHORT,value:new v(5,9),offset:0},kelvin:{name:"kelvin",base:R.TEMPERATURE,prefixes:M.LONG,value:1,offset:0},celsius:{name:"celsius",base:R.TEMPERATURE,prefixes:M.LONG,value:1,offset:273.15},fahrenheit:{name:"fahrenheit",base:R.TEMPERATURE,prefixes:M.LONG,value:new v(5,9),offset:459.67},rankine:{name:"rankine",base:R.TEMPERATURE,prefixes:M.LONG,value:new v(5,9),offset:0},mol:{name:"mol",base:R.AMOUNT_OF_SUBSTANCE,prefixes:M.SHORT,value:1,offset:0},mole:{name:"mole",base:R.AMOUNT_OF_SUBSTANCE,prefixes:M.LONG,value:1,offset:0},cd:{name:"cd",base:R.LUMINOUS_INTENSITY,prefixes:M.SHORT,value:1,offset:0},candela:{name:"candela",base:R.LUMINOUS_INTENSITY,prefixes:M.LONG,value:1,offset:0},N:{name:"N",base:R.FORCE,prefixes:M.SHORT,value:1,offset:0},newton:{name:"newton",base:R.FORCE,prefixes:M.LONG,value:1,offset:0},dyn:{name:"dyn",base:R.FORCE,prefixes:M.SHORT,value:1e-5,offset:0},dyne:{name:"dyne",base:R.FORCE,prefixes:M.LONG,value:1e-5,offset:0},lbf:{name:"lbf",base:R.FORCE,prefixes:M.NONE,value:4.4482216152605,offset:0},poundforce:{name:"poundforce",base:R.FORCE,prefixes:M.NONE,value:4.4482216152605,offset:0},kip:{name:"kip",base:R.FORCE,prefixes:M.LONG,value:4448.2216,offset:0},kilogramforce:{name:"kilogramforce",base:R.FORCE,prefixes:M.NONE,value:9.80665,offset:0},J:{name:"J",base:R.ENERGY,prefixes:M.SHORT,value:1,offset:0},joule:{name:"joule",base:R.ENERGY,prefixes:M.LONG,value:1,offset:0},erg:{name:"erg",base:R.ENERGY,prefixes:M.SHORTLONG,value:1e-7,offset:0},Wh:{name:"Wh",base:R.ENERGY,prefixes:M.SHORT,value:3600,offset:0},BTU:{name:"BTU",base:R.ENERGY,prefixes:M.BTU,value:1055.05585262,offset:0},eV:{name:"eV",base:R.ENERGY,prefixes:M.SHORT,value:1602176565e-28,offset:0},electronvolt:{name:"electronvolt",base:R.ENERGY,prefixes:M.LONG,value:1602176565e-28,offset:0},W:{name:"W",base:R.POWER,prefixes:M.SHORT,value:1,offset:0},watt:{name:"watt",base:R.POWER,prefixes:M.LONG,value:1,offset:0},hp:{name:"hp",base:R.POWER,prefixes:M.NONE,value:745.6998715386,offset:0},VAR:{name:"VAR",base:R.POWER,prefixes:M.SHORT,value:m.I,offset:0},VA:{name:"VA",base:R.POWER,prefixes:M.SHORT,value:1,offset:0},Pa:{name:"Pa",base:R.PRESSURE,prefixes:M.SHORT,value:1,offset:0},psi:{name:"psi",base:R.PRESSURE,prefixes:M.NONE,value:6894.75729276459,offset:0},atm:{name:"atm",base:R.PRESSURE,prefixes:M.NONE,value:101325,offset:0},bar:{name:"bar",base:R.PRESSURE,prefixes:M.SHORTLONG,value:1e5,offset:0},torr:{name:"torr",base:R.PRESSURE,prefixes:M.NONE,value:133.322,offset:0},mmHg:{name:"mmHg",base:R.PRESSURE,prefixes:M.NONE,value:133.322,offset:0},mmH2O:{name:"mmH2O",base:R.PRESSURE,prefixes:M.NONE,value:9.80665,offset:0},cmH2O:{name:"cmH2O",base:R.PRESSURE,prefixes:M.NONE,value:98.0665,offset:0},coulomb:{name:"coulomb",base:R.ELECTRIC_CHARGE,prefixes:M.LONG,value:1,offset:0},C:{name:"C",base:R.ELECTRIC_CHARGE,prefixes:M.SHORT,value:1,offset:0},farad:{name:"farad",base:R.ELECTRIC_CAPACITANCE,prefixes:M.LONG,value:1,offset:0},F:{name:"F",base:R.ELECTRIC_CAPACITANCE,prefixes:M.SHORT,value:1,offset:0},volt:{name:"volt",base:R.ELECTRIC_POTENTIAL,prefixes:M.LONG,value:1,offset:0},V:{name:"V",base:R.ELECTRIC_POTENTIAL,prefixes:M.SHORT,value:1,offset:0},ohm:{name:"ohm",base:R.ELECTRIC_RESISTANCE,prefixes:M.SHORTLONG,value:1,offset:0},henry:{name:"henry",base:R.ELECTRIC_INDUCTANCE,prefixes:M.LONG,value:1,offset:0},H:{name:"H",base:R.ELECTRIC_INDUCTANCE,prefixes:M.SHORT,value:1,offset:0},siemens:{name:"siemens",base:R.ELECTRIC_CONDUCTANCE,prefixes:M.LONG,value:1,offset:0},S:{name:"S",base:R.ELECTRIC_CONDUCTANCE,prefixes:M.SHORT,value:1,offset:0},weber:{name:"weber",base:R.MAGNETIC_FLUX,prefixes:M.LONG,value:1,offset:0},Wb:{name:"Wb",base:R.MAGNETIC_FLUX,prefixes:M.SHORT,value:1,offset:0},tesla:{name:"tesla",base:R.MAGNETIC_FLUX_DENSITY,prefixes:M.LONG,value:1,offset:0},T:{name:"T",base:R.MAGNETIC_FLUX_DENSITY,prefixes:M.SHORT,value:1,offset:0},b:{name:"b",base:R.BIT,prefixes:M.BINARY_SHORT,value:1,offset:0},bits:{name:"bits",base:R.BIT,prefixes:M.BINARY_LONG,value:1,offset:0},B:{name:"B",base:R.BIT,prefixes:M.BINARY_SHORT,value:8,offset:0},bytes:{name:"bytes",base:R.BIT,prefixes:M.BINARY_LONG,value:8,offset:0}},ne={meters:"meter",inches:"inch",feet:"foot",yards:"yard",miles:"mile",links:"link",rods:"rod",chains:"chain",angstroms:"angstrom",lt:"l",litres:"litre",liter:"litre",liters:"litre",teaspoons:"teaspoon",tablespoons:"tablespoon",minims:"minim",fldr:"fluiddram",fluiddrams:"fluiddram",floz:"fluidounce",fluidounces:"fluidounce",gi:"gill",gills:"gill",cp:"cup",cups:"cup",pt:"pint",pints:"pint",qt:"quart",quarts:"quart",gal:"gallon",gallons:"gallon",bbl:"beerbarrel",beerbarrels:"beerbarrel",obl:"oilbarrel",oilbarrels:"oilbarrel",hogsheads:"hogshead",gtts:"gtt",grams:"gram",tons:"ton",tonnes:"tonne",grains:"grain",drams:"dram",ounces:"ounce",poundmasses:"poundmass",hundredweights:"hundredweight",sticks:"stick",lb:"lbm",lbs:"lbm",kips:"kip",kgf:"kilogramforce",acres:"acre",hectares:"hectare",sqfeet:"sqft",sqyard:"sqyd",sqmile:"sqmi",sqmiles:"sqmi",mmhg:"mmHg",mmh2o:"mmH2O",cmh2o:"cmH2O",seconds:"second",secs:"second",minutes:"minute",mins:"minute",hours:"hour",hr:"hour",hrs:"hour",days:"day",weeks:"week",months:"month",years:"year",decades:"decade",centuries:"century",millennia:"millennium",hertz:"hertz",radians:"radian",degrees:"degree",gradians:"gradian",cycles:"cycle",arcsecond:"arcsec",arcseconds:"arcsec",arcminute:"arcmin",arcminutes:"arcmin",BTUs:"BTU",watts:"watt",joules:"joule",amperes:"ampere",amps:"ampere",amp:"ampere",coulombs:"coulomb",volts:"volt",ohms:"ohm",farads:"farad",webers:"weber",teslas:"tesla",electronvolts:"electronvolt",moles:"mole",bit:"bits",byte:"bytes"};function fe($){if($.number==="BigNumber"){var G=r_(g);L.rad.value=new g(1),L.deg.value=G.div(180),L.grad.value=G.div(200),L.cycle.value=G.times(2),L.arcsec.value=G.div(648e3),L.arcmin.value=G.div(10800)}else L.rad.value=1,L.deg.value=Math.PI/180,L.grad.value=Math.PI/200,L.cycle.value=Math.PI*2,L.arcsec.value=Math.PI/648e3,L.arcmin.value=Math.PI/10800;L.radian.value=L.rad.value,L.degree.value=L.deg.value,L.gradian.value=L.grad.value}fe(n),e&&e("config",function($,G){$.number!==G.number&&fe($)});var te={si:{NONE:{unit:V,prefix:M.NONE[""]},LENGTH:{unit:L.m,prefix:M.SHORT[""]},MASS:{unit:L.g,prefix:M.SHORT.k},TIME:{unit:L.s,prefix:M.SHORT[""]},CURRENT:{unit:L.A,prefix:M.SHORT[""]},TEMPERATURE:{unit:L.K,prefix:M.SHORT[""]},LUMINOUS_INTENSITY:{unit:L.cd,prefix:M.SHORT[""]},AMOUNT_OF_SUBSTANCE:{unit:L.mol,prefix:M.SHORT[""]},ANGLE:{unit:L.rad,prefix:M.SHORT[""]},BIT:{unit:L.bits,prefix:M.SHORT[""]},FORCE:{unit:L.N,prefix:M.SHORT[""]},ENERGY:{unit:L.J,prefix:M.SHORT[""]},POWER:{unit:L.W,prefix:M.SHORT[""]},PRESSURE:{unit:L.Pa,prefix:M.SHORT[""]},ELECTRIC_CHARGE:{unit:L.C,prefix:M.SHORT[""]},ELECTRIC_CAPACITANCE:{unit:L.F,prefix:M.SHORT[""]},ELECTRIC_POTENTIAL:{unit:L.V,prefix:M.SHORT[""]},ELECTRIC_RESISTANCE:{unit:L.ohm,prefix:M.SHORT[""]},ELECTRIC_INDUCTANCE:{unit:L.H,prefix:M.SHORT[""]},ELECTRIC_CONDUCTANCE:{unit:L.S,prefix:M.SHORT[""]},MAGNETIC_FLUX:{unit:L.Wb,prefix:M.SHORT[""]},MAGNETIC_FLUX_DENSITY:{unit:L.T,prefix:M.SHORT[""]},FREQUENCY:{unit:L.Hz,prefix:M.SHORT[""]}}};te.cgs=JSON.parse(JSON.stringify(te.si)),te.cgs.LENGTH={unit:L.m,prefix:M.SHORT.c},te.cgs.MASS={unit:L.g,prefix:M.SHORT[""]},te.cgs.FORCE={unit:L.dyn,prefix:M.SHORT[""]},te.cgs.ENERGY={unit:L.erg,prefix:M.NONE[""]},te.us=JSON.parse(JSON.stringify(te.si)),te.us.LENGTH={unit:L.ft,prefix:M.NONE[""]},te.us.MASS={unit:L.lbm,prefix:M.NONE[""]},te.us.TEMPERATURE={unit:L.degF,prefix:M.NONE[""]},te.us.FORCE={unit:L.lbf,prefix:M.NONE[""]},te.us.ENERGY={unit:L.BTU,prefix:M.BTU[""]},te.us.POWER={unit:L.hp,prefix:M.NONE[""]},te.us.PRESSURE={unit:L.psi,prefix:M.NONE[""]},te.auto=JSON.parse(JSON.stringify(te.si));var oe=te.auto;y.setUnitSystem=function($){if(Ue(te,$))oe=te[$];else throw new Error("Unit system "+$+" does not exist. Choices are: "+Object.keys(te).join(", "))},y.getUnitSystem=function(){for(var $ in te)if(Ue(te,$)&&te[$]===oe)return $},y.typeConverters={BigNumber:function(G){return G!=null&&G.isFraction?new g(String(G.n)).div(String(G.d)).times(String(G.s)):new g(G+"")},Fraction:function(G){return new v(G)},Complex:function(G){return G},number:function(G){return G!=null&&G.isFraction?p(G):G}},y.prototype._numberConverter=function(){var $=y.typeConverters[this.valueType()];if($)return $;throw new TypeError('Unsupported Unit value type "'+this.valueType()+'"')},y._getNumberConverter=function($){if(!y.typeConverters[$])throw new TypeError('Unsupported type "'+$+'"');return y.typeConverters[$]};for(var H in L)if(Ue(L,H)){var U=L[H];U.dimensions=U.base.dimensions}for(var Q in ne)if(Ue(ne,Q)){var re=L[ne[Q]],ie={};for(var de in re)Ue(re,de)&&(ie[de]=re[de]);ie.name=Q,L[Q]=ie}y.isValidAlpha=function(G){return/^[a-zA-Z]$/.test(G)};function he($){for(var G=0;G<$.length;G++){if(_=$.charAt(G),G===0&&!y.isValidAlpha(_))throw new Error('Invalid unit name (must begin with alpha character): "'+$+'"');if(G>0&&!(y.isValidAlpha(_)||N(_)))throw new Error('Invalid unit name (only alphanumeric characters are allowed): "'+$+'"')}}return y.createUnit=function($,G){if(typeof $!="object")throw new TypeError("createUnit expects first parameter to be of type 'Object'");if(G&&G.override){for(var ue in $)if(Ue($,ue)&&y.deleteUnit(ue),$[ue].aliases)for(var ce=0;ce<$[ue].aliases.length;ce++)y.deleteUnit($[ue].aliases[ce])}var ge;for(var Ce in $)Ue($,Ce)&&(ge=y.createUnitSingle(Ce,$[Ce]));return ge},y.createUnitSingle=function($,G){if((typeof G>"u"||G===null)&&(G={}),typeof $!="string")throw new TypeError("createUnitSingle expects first parameter to be of type 'string'");if(Ue(L,$))throw new Error('Cannot create unit "'+$+'": a unit with that name already exists');he($);var ue=null,ce=[],ge=0,Ce,Ae,Pe;if(G&&G.type==="Unit")ue=G.clone();else if(typeof G=="string")G!==""&&(Ce=G);else if(typeof G=="object")Ce=G.definition,Ae=G.prefixes,ge=G.offset,Pe=G.baseName,G.aliases&&(ce=G.aliases.valueOf());else throw new TypeError('Cannot create unit "'+$+'" from "'+G.toString()+'": expecting "string" or "Unit" or "Object"');if(ce){for(var q=0;q<ce.length;q++)if(Ue(L,ce[q]))throw new Error('Cannot create alias "'+ce[q]+'": a unit with that name already exists')}if(Ce&&typeof Ce=="string"&&!ue)try{ue=y.parse(Ce,{allowNoUnits:!0})}catch(J){throw J.message='Could not create unit "'+$+'" from "'+Ce+'": '+J.message,J}else Ce&&Ce.type==="Unit"&&(ue=Ce.clone());ce=ce||[],ge=ge||0,Ae&&Ae.toUpperCase?Ae=M[Ae.toUpperCase()]||M.NONE:Ae=M.NONE;var ee={};if(ue){ee={name:$,value:ue.value,dimensions:ue.dimensions.slice(0),prefixes:Ae,offset:ge};var xe=!1;for(var Fe in R)if(Ue(R,Fe)){for(var Te=!0,Oe=0;Oe<B.length;Oe++)if(Math.abs((ee.dimensions[Oe]||0)-(R[Fe].dimensions[Oe]||0))>1e-12){Te=!1;break}if(Te){xe=!0,ee.base=R[Fe];break}}if(!xe){Pe=Pe||$+"_STUFF";var Me={dimensions:ue.dimensions.slice(0)};Me.key=Pe,R[Pe]=Me,oe[Pe]={unit:ee,prefix:M.NONE[""]},ee.base=R[Pe]}}else{if(Pe=Pe||$+"_STUFF",B.indexOf(Pe)>=0)throw new Error('Cannot create new base unit "'+$+'": a base unit with that name already exists (and cannot be overridden)');B.push(Pe);for(var le in R)Ue(R,le)&&(R[le].dimensions[B.length-1]=0);for(var pe={dimensions:[]},be=0;be<B.length;be++)pe.dimensions[be]=0;pe.dimensions[B.length-1]=1,pe.key=Pe,R[Pe]=pe,ee={name:$,value:1,dimensions:R[Pe].dimensions.slice(0),prefixes:Ae,offset:ge,base:R[Pe]},oe[Pe]={unit:ee,prefix:M.NONE[""]}}y.UNITS[$]=ee;for(var Et=0;Et<ce.length;Et++){var Xe=ce[Et],Lt={};for(var P in ee)Ue(ee,P)&&(Lt[P]=ee[P]);Lt.name=Xe,y.UNITS[Xe]=Lt}return delete O.cache,new y(null,$)},y.deleteUnit=function($){delete y.UNITS[$],delete O.cache},y.PREFIXES=M,y.BASE_DIMENSIONS=B,y.BASE_UNITS=R,y.UNIT_SYSTEMS=te,y.UNITS=L,y},{isClass:!0}),i3="unit",mJ=["typed","Unit"],vJ=z(i3,mJ,t=>{var{typed:e,Unit:n}=t;return e(i3,{Unit:function(i){return i.clone()},string:function(i){return n.isValuelessUnit(i)?new n(null,i):n.parse(i,{allowNoUnits:!0})},"number | BigNumber | Fraction | Complex, string | Unit":function(i,a){return new n(i,a)},"number | BigNumber | Fraction":function(i){return new n(i)},"Array | Matrix":e.referToSelf(r=>i=>pt(i,r))})}),a3="sparse",gJ=["typed","SparseMatrix"],yJ=z(a3,gJ,t=>{var{typed:e,SparseMatrix:n}=t;return e(a3,{"":function(){return new n([])},string:function(i){return new n([],i)},"Array | Matrix":function(i){return new n(i)},"Array | Matrix, string":function(i,a){return new n(i,a)}})}),o3="createUnit",xJ=["typed","Unit"],bJ=z(o3,xJ,t=>{var{typed:e,Unit:n}=t;return e(o3,{"Object, Object":function(i,a){return n.createUnit(i,a)},Object:function(i){return n.createUnit(i,{})},"string, Unit | string | Object, Object":function(i,a,o){var s={};return s[i]=a,n.createUnit(s,o)},"string, Unit | string | Object":function(i,a){var o={};return o[i]=a,n.createUnit(o,{})},string:function(i){var a={};return a[i]={},n.createUnit(a,{})}})}),s3="acos",wJ=["typed","config","Complex"],_J=z(s3,wJ,t=>{var{typed:e,config:n,Complex:r}=t;return e(s3,{number:function(a){return a>=-1&&a<=1||n.predictable?Math.acos(a):new r(a,0).acos()},Complex:function(a){return a.acos()},BigNumber:function(a){return a.acos()}})}),u3="acosh",EJ=["typed","config","Complex"],CJ=z(u3,EJ,t=>{var{typed:e,config:n,Complex:r}=t;return e(u3,{number:function(a){return a>=1||n.predictable?bO(a):a<=-1?new r(Math.log(Math.sqrt(a*a-1)-a),Math.PI):new r(a,0).acosh()},Complex:function(a){return a.acosh()},BigNumber:function(a){return a.acosh()}})}),l3="acot",NJ=["typed","BigNumber"],SJ=z(l3,NJ,t=>{var{typed:e,BigNumber:n}=t;return e(l3,{number:wO,Complex:function(i){return i.acot()},BigNumber:function(i){return new n(1).div(i).atan()}})}),c3="acoth",DJ=["typed","config","Complex","BigNumber"],AJ=z(c3,DJ,t=>{var{typed:e,config:n,Complex:r,BigNumber:i}=t;return e(c3,{number:function(o){return o>=1||o<=-1||n.predictable?_O(o):new r(o,0).acoth()},Complex:function(o){return o.acoth()},BigNumber:function(o){return new i(1).div(o).atanh()}})}),f3="acsc",TJ=["typed","config","Complex","BigNumber"],MJ=z(f3,TJ,t=>{var{typed:e,config:n,Complex:r,BigNumber:i}=t;return e(f3,{number:function(o){return o<=-1||o>=1||n.predictable?EO(o):new r(o,0).acsc()},Complex:function(o){return o.acsc()},BigNumber:function(o){return new i(1).div(o).asin()}})}),d3="acsch",IJ=["typed","BigNumber"],RJ=z(d3,IJ,t=>{var{typed:e,BigNumber:n}=t;return e(d3,{number:CO,Complex:function(i){return i.acsch()},BigNumber:function(i){return new n(1).div(i).asinh()}})}),h3="asec",kJ=["typed","config","Complex","BigNumber"],FJ=z(h3,kJ,t=>{var{typed:e,config:n,Complex:r,BigNumber:i}=t;return e(h3,{number:function(o){return o<=-1||o>=1||n.predictable?NO(o):new r(o,0).asec()},Complex:function(o){return o.asec()},BigNumber:function(o){return new i(1).div(o).acos()}})}),p3="asech",PJ=["typed","config","Complex","BigNumber"],OJ=z(p3,PJ,t=>{var{typed:e,config:n,Complex:r,BigNumber:i}=t;return e(p3,{number:function(o){if(o<=1&&o>=-1||n.predictable){var s=1/o;if(s>0||n.predictable)return SO(o);var u=Math.sqrt(s*s-1);return new r(Math.log(u-s),Math.PI)}return new r(o,0).asech()},Complex:function(o){return o.asech()},BigNumber:function(o){return new i(1).div(o).acosh()}})}),m3="asin",BJ=["typed","config","Complex"],LJ=z(m3,BJ,t=>{var{typed:e,config:n,Complex:r}=t;return e(m3,{number:function(a){return a>=-1&&a<=1||n.predictable?Math.asin(a):new r(a,0).asin()},Complex:function(a){return a.asin()},BigNumber:function(a){return a.asin()}})}),jJ="asinh",$J=["typed"],zJ=z(jJ,$J,t=>{var{typed:e}=t;return e("asinh",{number:DO,Complex:function(r){return r.asinh()},BigNumber:function(r){return r.asinh()}})}),UJ="atan",WJ=["typed"],VJ=z(UJ,WJ,t=>{var{typed:e}=t;return e("atan",{number:function(r){return Math.atan(r)},Complex:function(r){return r.atan()},BigNumber:function(r){return r.atan()}})}),v3="atan2",qJ=["typed","matrix","equalScalar","BigNumber","DenseMatrix","concat"],HJ=z(v3,qJ,t=>{var{typed:e,matrix:n,equalScalar:r,BigNumber:i,DenseMatrix:a,concat:o}=t,s=Ra({typed:e,equalScalar:r}),u=Xr({typed:e}),l=zO({typed:e,equalScalar:r}),c=xr({typed:e,equalScalar:r}),f=Hn({typed:e,DenseMatrix:a}),d=Zt({typed:e,matrix:n,concat:o});return e(v3,{"number, number":Math.atan2,"BigNumber, BigNumber":(h,p)=>i.atan2(h,p)},d({scalar:"number | BigNumber",SS:l,DS:u,SD:s,Ss:c,sS:f}))}),g3="atanh",GJ=["typed","config","Complex"],KJ=z(g3,GJ,t=>{var{typed:e,config:n,Complex:r}=t;return e(g3,{number:function(a){return a<=1&&a>=-1||n.predictable?AO(a):new r(a,0).atanh()},Complex:function(a){return a.atanh()},BigNumber:function(a){return a.atanh()}})}),Df=z("trigUnit",["typed"],t=>{var{typed:e}=t;return{Unit:e.referToSelf(n=>r=>{if(!r.hasBase(r.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return e.find(n,r.valueType())(r.value)})}}),y3="cos",YJ=["typed"],XJ=z(y3,YJ,t=>{var{typed:e}=t,n=Df({typed:e});return e(y3,{number:Math.cos,"Complex | BigNumber":r=>r.cos()},n)}),x3="cosh",QJ=["typed"],ZJ=z(x3,QJ,t=>{var{typed:e}=t;return e(x3,{number:YV,"Complex | BigNumber":n=>n.cosh()})}),b3="cot",JJ=["typed","BigNumber"],eee=z(b3,JJ,t=>{var{typed:e,BigNumber:n}=t,r=Df({typed:e});return e(b3,{number:TO,Complex:i=>i.cot(),BigNumber:i=>new n(1).div(i.tan())},r)}),w3="coth",tee=["typed","BigNumber"],nee=z(w3,tee,t=>{var{typed:e,BigNumber:n}=t;return e(w3,{number:MO,Complex:r=>r.coth(),BigNumber:r=>new n(1).div(r.tanh())})}),_3="csc",ree=["typed","BigNumber"],iee=z(_3,ree,t=>{var{typed:e,BigNumber:n}=t,r=Df({typed:e});return e(_3,{number:IO,Complex:i=>i.csc(),BigNumber:i=>new n(1).div(i.sin())},r)}),E3="csch",aee=["typed","BigNumber"],oee=z(E3,aee,t=>{var{typed:e,BigNumber:n}=t;return e(E3,{number:RO,Complex:r=>r.csch(),BigNumber:r=>new n(1).div(r.sinh())})}),C3="sec",see=["typed","BigNumber"],uee=z(C3,see,t=>{var{typed:e,BigNumber:n}=t,r=Df({typed:e});return e(C3,{number:kO,Complex:i=>i.sec(),BigNumber:i=>new n(1).div(i.cos())},r)}),N3="sech",lee=["typed","BigNumber"],cee=z(N3,lee,t=>{var{typed:e,BigNumber:n}=t;return e(N3,{number:FO,Complex:r=>r.sech(),BigNumber:r=>new n(1).div(r.cosh())})}),S3="sin",fee=["typed"],dee=z(S3,fee,t=>{var{typed:e}=t,n=Df({typed:e});return e(S3,{number:Math.sin,"Complex | BigNumber":r=>r.sin()},n)}),D3="sinh",hee=["typed"],pee=z(D3,hee,t=>{var{typed:e}=t;return e(D3,{number:PO,"Complex | BigNumber":n=>n.sinh()})}),A3="tan",mee=["typed"],vee=z(A3,mee,t=>{var{typed:e}=t,n=Df({typed:e});return e(A3,{number:Math.tan,"Complex | BigNumber":r=>r.tan()},n)}),gee="tanh",yee=["typed"],xee=z(gee,yee,t=>{var{typed:e}=t;return e("tanh",{number:QV,"Complex | BigNumber":n=>n.tanh()})}),T3="setCartesian",bee=["typed","size","subset","compareNatural","Index","DenseMatrix"],wee=z(T3,bee,t=>{var{typed:e,size:n,subset:r,compareNatural:i,Index:a,DenseMatrix:o}=t;return e(T3,{"Array | Matrix, Array | Matrix":function(u,l){var c=[];if(r(n(u),new a(0))!==0&&r(n(l),new a(0))!==0){var f=Ft(Array.isArray(u)?u:u.toArray()).sort(i),d=Ft(Array.isArray(l)?l:l.toArray()).sort(i);c=[];for(var h=0;h<f.length;h++)for(var p=0;p<d.length;p++)c.push([f[h],d[p]])}return Array.isArray(u)&&Array.isArray(l)?c:new o(c)}})}),M3="setDifference",_ee=["typed","size","subset","compareNatural","Index","DenseMatrix"],Eee=z(M3,_ee,t=>{var{typed:e,size:n,subset:r,compareNatural:i,Index:a,DenseMatrix:o}=t;return e(M3,{"Array | Matrix, Array | Matrix":function(u,l){var c;if(r(n(u),new a(0))===0)c=[];else{if(r(n(l),new a(0))===0)return Ft(u.toArray());var f=Jc(Ft(Array.isArray(u)?u:u.toArray()).sort(i)),d=Jc(Ft(Array.isArray(l)?l:l.toArray()).sort(i));c=[];for(var h,p=0;p<f.length;p++){h=!1;for(var m=0;m<d.length;m++)if(i(f[p].value,d[m].value)===0&&f[p].identifier===d[m].identifier){h=!0;break}h||c.push(f[p])}}return Array.isArray(u)&&Array.isArray(l)?Uv(c):new o(Uv(c))}})}),I3="setDistinct",Cee=["typed","size","subset","compareNatural","Index","DenseMatrix"],Nee=z(I3,Cee,t=>{var{typed:e,size:n,subset:r,compareNatural:i,Index:a,DenseMatrix:o}=t;return e(I3,{"Array | Matrix":function(u){var l;if(r(n(u),new a(0))===0)l=[];else{var c=Ft(Array.isArray(u)?u:u.toArray()).sort(i);l=[],l.push(c[0]);for(var f=1;f<c.length;f++)i(c[f],c[f-1])!==0&&l.push(c[f])}return Array.isArray(u)?l:new o(l)}})}),R3="setIntersect",See=["typed","size","subset","compareNatural","Index","DenseMatrix"],Dee=z(R3,See,t=>{var{typed:e,size:n,subset:r,compareNatural:i,Index:a,DenseMatrix:o}=t;return e(R3,{"Array | Matrix, Array | Matrix":function(u,l){var c;if(r(n(u),new a(0))===0||r(n(l),new a(0))===0)c=[];else{var f=Jc(Ft(Array.isArray(u)?u:u.toArray()).sort(i)),d=Jc(Ft(Array.isArray(l)?l:l.toArray()).sort(i));c=[];for(var h=0;h<f.length;h++)for(var p=0;p<d.length;p++)if(i(f[h].value,d[p].value)===0&&f[h].identifier===d[p].identifier){c.push(f[h]);break}}return Array.isArray(u)&&Array.isArray(l)?Uv(c):new o(Uv(c))}})}),k3="setIsSubset",Aee=["typed","size","subset","compareNatural","Index"],Tee=z(k3,Aee,t=>{var{typed:e,size:n,subset:r,compareNatural:i,Index:a}=t;return e(k3,{"Array | Matrix, Array | Matrix":function(s,u){if(r(n(s),new a(0))===0)return!0;if(r(n(u),new a(0))===0)return!1;for(var l=Jc(Ft(Array.isArray(s)?s:s.toArray()).sort(i)),c=Jc(Ft(Array.isArray(u)?u:u.toArray()).sort(i)),f,d=0;d<l.length;d++){f=!1;for(var h=0;h<c.length;h++)if(i(l[d].value,c[h].value)===0&&l[d].identifier===c[h].identifier){f=!0;break}if(f===!1)return!1}return!0}})}),F3="setMultiplicity",Mee=["typed","size","subset","compareNatural","Index"],Iee=z(F3,Mee,t=>{var{typed:e,size:n,subset:r,compareNatural:i,Index:a}=t;return e(F3,{"number | BigNumber | Fraction | Complex, Array | Matrix":function(s,u){if(r(n(u),new a(0))===0)return 0;for(var l=Ft(Array.isArray(u)?u:u.toArray()),c=0,f=0;f<l.length;f++)i(l[f],s)===0&&c++;return c}})}),P3="setPowerset",Ree=["typed","size","subset","compareNatural","Index"],kee=z(P3,Ree,t=>{var{typed:e,size:n,subset:r,compareNatural:i,Index:a}=t;return e(P3,{"Array | Matrix":function(l){if(r(n(l),new a(0))===0)return[];for(var c=Ft(Array.isArray(l)?l:l.toArray()).sort(i),f=[],d=0;d.toString(2).length<=c.length;)f.push(o(c,d.toString(2).split("").reverse())),d++;return s(f)}});function o(u,l){for(var c=[],f=0;f<l.length;f++)l[f]==="1"&&c.push(u[f]);return c}function s(u){for(var l=[],c=u.length-1;c>0;c--)for(var f=0;f<c;f++)u[f].length>u[f+1].length&&(l=u[f],u[f]=u[f+1],u[f+1]=l);return u}}),O3="setSize",Fee=["typed","compareNatural"],Pee=z(O3,Fee,t=>{var{typed:e,compareNatural:n}=t;return e(O3,{"Array | Matrix":function(i){return Array.isArray(i)?Ft(i).length:Ft(i.toArray()).length},"Array | Matrix, boolean":function(i,a){if(a===!1||i.length===0)return Array.isArray(i)?Ft(i).length:Ft(i.toArray()).length;for(var o=Ft(Array.isArray(i)?i:i.toArray()).sort(n),s=1,u=1;u<o.length;u++)n(o[u],o[u-1])!==0&&s++;return s}})}),B3="setSymDifference",Oee=["typed","size","concat","subset","setDifference","Index"],Bee=z(B3,Oee,t=>{var{typed:e,size:n,concat:r,subset:i,setDifference:a,Index:o}=t;return e(B3,{"Array | Matrix, Array | Matrix":function(u,l){if(i(n(u),new o(0))===0)return Ft(l);if(i(n(l),new o(0))===0)return Ft(u);var c=Ft(u),f=Ft(l);return r(a(c,f),a(f,c))}})}),L3="setUnion",Lee=["typed","size","concat","subset","setIntersect","setSymDifference","Index"],jee=z(L3,Lee,t=>{var{typed:e,size:n,concat:r,subset:i,setIntersect:a,setSymDifference:o,Index:s}=t;return e(L3,{"Array | Matrix, Array | Matrix":function(l,c){if(i(n(l),new s(0))===0)return Ft(c);if(i(n(c),new s(0))===0)return Ft(l);var f=Ft(l),d=Ft(c);return r(o(f,d),a(f,d))}})}),j3="add",$ee=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],zee=z(j3,$ee,t=>{var{typed:e,matrix:n,addScalar:r,equalScalar:i,DenseMatrix:a,SparseMatrix:o,concat:s}=t,u=su({typed:e}),l=Q2({typed:e,equalScalar:i}),c=yl({typed:e,DenseMatrix:a}),f=Zt({typed:e,matrix:n,concat:s});return e(j3,{"any, any":r,"any, any, ...any":e.referToSelf(d=>(h,p,m)=>{for(var g=d(h,p),v=0;v<m.length;v++)g=d(g,m[v]);return g})},f({elop:r,DS:u,SS:l,Ss:c}))}),$3="hypot",Uee=["typed","abs","addScalar","divideScalar","multiplyScalar","sqrt","smaller","isPositive"],Wee=z($3,Uee,t=>{var{typed:e,abs:n,addScalar:r,divideScalar:i,multiplyScalar:a,sqrt:o,smaller:s,isPositive:u}=t;return e($3,{"... number | BigNumber":l,Array:l,Matrix:c=>l(Ft(c.toArray(),!0))});function l(c){for(var f=0,d=0,h=0;h<c.length;h++){if(Mo(c[h]))throw new TypeError("Unexpected type of argument to hypot");var p=n(c[h]);s(d,p)?(f=a(f,a(i(d,p),i(d,p))),f=r(f,1),d=p):f=r(f,u(p)?a(i(p,d),i(p,d)):p)}return a(d,o(f))}}),z3="norm",Vee=["typed","abs","add","pow","conj","sqrt","multiply","equalScalar","larger","smaller","matrix","ctranspose","eigs"],qee=z(z3,Vee,t=>{var{typed:e,abs:n,add:r,pow:i,conj:a,sqrt:o,multiply:s,equalScalar:u,larger:l,smaller:c,matrix:f,ctranspose:d,eigs:h}=t;return e(z3,{number:Math.abs,Complex:function(C){return C.abs()},BigNumber:function(C){return C.abs()},boolean:function(C){return Math.abs(C)},Array:function(C){return _(f(C),2)},Matrix:function(C){return _(C,2)},"Array, number | BigNumber | string":function(C,N){return _(f(C),N)},"Matrix, number | BigNumber | string":function(C,N){return _(C,N)}});function p(E){var C=0;return E.forEach(function(N){var D=n(N);l(D,C)&&(C=D)},!0),C}function m(E){var C;return E.forEach(function(N){var D=n(N);(!C||c(D,C))&&(C=D)},!0),C||0}function g(E,C){if(C===Number.POSITIVE_INFINITY||C==="inf")return p(E);if(C===Number.NEGATIVE_INFINITY||C==="-inf")return m(E);if(C==="fro")return _(E,2);if(typeof C=="number"&&!isNaN(C)){if(!u(C,0)){var N=0;return E.forEach(function(D){N=r(i(n(D),C),N)},!0),i(N,1/C)}return Number.POSITIVE_INFINITY}throw new Error("Unsupported parameter value")}function v(E){var C=0;return E.forEach(function(N,D){C=r(C,s(N,a(N)))}),n(o(C))}function x(E){var C=[],N=0;return E.forEach(function(D,A){var T=A[1],k=r(C[T]||0,n(D));l(k,N)&&(N=k),C[T]=k},!0),N}function y(E){var C=E.size();if(C[0]!==C[1])throw new RangeError("Invalid matrix dimensions");var N=d(E),D=s(N,E),A=h(D).values.toArray(),T=A[A.length-1];return n(o(T))}function b(E){var C=[],N=0;return E.forEach(function(D,A){var T=A[0],k=r(C[T]||0,n(D));l(k,N)&&(N=k),C[T]=k},!0),N}function w(E,C){if(C===1)return x(E);if(C===Number.POSITIVE_INFINITY||C==="inf")return b(E);if(C==="fro")return v(E);if(C===2)return y(E);throw new Error("Unsupported parameter value "+C)}function _(E,C){var N=E.size();if(N.length===1)return g(E,C);if(N.length===2){if(N[0]&&N[1])return w(E,C);throw new RangeError("Invalid matrix dimensions")}}}),U3="dot",Hee=["typed","addScalar","multiplyScalar","conj","size"],Gee=z(U3,Hee,t=>{var{typed:e,addScalar:n,multiplyScalar:r,conj:i,size:a}=t;return e(U3,{"Array | DenseMatrix, Array | DenseMatrix":s,"SparseMatrix, SparseMatrix":u});function o(c,f){var d=l(c),h=l(f),p,m;if(d.length===1)p=d[0];else if(d.length===2&&d[1]===1)p=d[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+d.join(", ")+")");if(h.length===1)m=h[0];else if(h.length===2&&h[1]===1)m=h[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+h.join(", ")+")");if(p!==m)throw new RangeError("Vectors must have equal length ("+p+" != "+m+")");if(p===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return p}function s(c,f){var d=o(c,f),h=Je(c)?c._data:c,p=Je(c)?c._datatype||c.getDataType():void 0,m=Je(f)?f._data:f,g=Je(f)?f._datatype||f.getDataType():void 0,v=l(c).length===2,x=l(f).length===2,y=n,b=r;if(p&&g&&p===g&&typeof p=="string"&&p!=="mixed"){var w=p;y=e.find(n,[w,w]),b=e.find(r,[w,w])}if(!v&&!x){for(var _=b(i(h[0]),m[0]),E=1;E<d;E++)_=y(_,b(i(h[E]),m[E]));return _}if(!v&&x){for(var C=b(i(h[0]),m[0][0]),N=1;N<d;N++)C=y(C,b(i(h[N]),m[N][0]));return C}if(v&&!x){for(var D=b(i(h[0][0]),m[0]),A=1;A<d;A++)D=y(D,b(i(h[A][0]),m[A]));return D}if(v&&x){for(var T=b(i(h[0][0]),m[0][0]),k=1;k<d;k++)T=y(T,b(i(h[k][0]),m[k][0]));return T}}function u(c,f){o(c,f);for(var d=c._index,h=c._values,p=f._index,m=f._values,g=0,v=n,x=r,y=0,b=0;y<d.length&&b<p.length;){var w=d[y],_=p[b];if(w<_){y++;continue}if(w>_){b++;continue}w===_&&(g=v(g,x(h[y],m[b])),y++,b++)}return g}function l(c){return Je(c)?c.size():a(c)}}),Kee="trace",Yee=["typed","matrix","add"],Xee=z(Kee,Yee,t=>{var{typed:e,matrix:n,add:r}=t;return e("trace",{Array:function(s){return i(n(s))},SparseMatrix:a,DenseMatrix:i,any:ut});function i(o){var s=o._size,u=o._data;switch(s.length){case 1:if(s[0]===1)return ut(u[0]);throw new RangeError("Matrix must be square (size: "+xt(s)+")");case 2:{var l=s[0],c=s[1];if(l===c){for(var f=0,d=0;d<l;d++)f=r(f,u[d][d]);return f}else throw new RangeError("Matrix must be square (size: "+xt(s)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+xt(s)+")")}}function a(o){var s=o._values,u=o._index,l=o._ptr,c=o._size,f=c[0],d=c[1];if(f===d){var h=0;if(s.length>0)for(var p=0;p<d;p++)for(var m=l[p],g=l[p+1],v=m;v<g;v++){var x=u[v];if(x===p){h=r(h,s[v]);break}if(x>p)break}return h}throw new RangeError("Matrix must be square (size: "+xt(c)+")")}}),W3="index",Qee=["typed","Index"],Zee=z(W3,Qee,t=>{var{typed:e,Index:n}=t;return e(W3,{"...number | string | BigNumber | Range | Array | Matrix":function(i){var a=i.map(function(s){return ht(s)?s.toNumber():qt(s)||Je(s)?s.map(function(u){return ht(u)?u.toNumber():u}):s}),o=new n;return n.apply(o,a),o}})}),sB=new Set(["end"]),Jee="Node",ete=["mathWithTransform"],tte=z(Jee,ete,t=>{var{mathWithTransform:e}=t;function n(i){for(var a of[...sB])if(i.has(a))throw new Error('Scope contains an illegal symbol, "'+a+'" is a reserved keyword')}class r{get type(){return"Node"}get isNode(){return!0}evaluate(a){return this.compile().evaluate(a)}compile(){var a=this._compile(e,{}),o={},s=null;function u(l){var c=Cc(l);return n(c),a(c,o,s)}return{evaluate:u}}_compile(a,o){throw new Error("Method _compile must be implemented by type "+this.type)}forEach(a){throw new Error("Cannot run forEach on a Node interface")}map(a){throw new Error("Cannot run map on a Node interface")}_ifNode(a){if(!Ut(a))throw new TypeError("Callback function must return a Node");return a}traverse(a){a(this,null,null);function o(s,u){s.forEach(function(l,c,f){u(l,c,f),o(l,u)})}o(this,a)}transform(a){function o(s,u,l){var c=a(s,u,l);return c!==s?c:s.map(o)}return o(this,null,null)}filter(a){var o=[];return this.traverse(function(s,u,l){a(s,u,l)&&o.push(s)}),o}clone(){throw new Error("Cannot clone a Node interface")}cloneDeep(){return this.map(function(a){return a.cloneDeep()})}equals(a){return a?this.type===a.type&&zo(this,a):!1}toString(a){var o=this._getCustomString(a);return typeof o<"u"?o:this._toString(a)}_toString(){throw new Error("_toString not implemented for "+this.type)}toJSON(){throw new Error("Cannot serialize object: toJSON not implemented by "+this.type)}toHTML(a){var o=this._getCustomString(a);return typeof o<"u"?o:this._toHTML(a)}_toHTML(){throw new Error("_toHTML not implemented for "+this.type)}toTex(a){var o=this._getCustomString(a);return typeof o<"u"?o:this._toTex(a)}_toTex(a){throw new Error("_toTex not implemented for "+this.type)}_getCustomString(a){if(a&&typeof a=="object")switch(typeof a.handler){case"object":case"undefined":return;case"function":return a.handler(this,a);default:throw new TypeError("Object or function expected as callback")}}getIdentifier(){return this.type}getContent(){return this}}return r},{isClass:!0,isNode:!0});function Qr(t){return t&&t.isIndexError?new Ta(t.index+1,t.min+1,t.max!==void 0?t.max+1:void 0):t}function uB(t){var{subset:e}=t;return function(r,i){try{if(Array.isArray(r))return e(r,i);if(r&&typeof r.subset=="function")return r.subset(i);if(typeof r=="string")return e(r,i);if(typeof r=="object"){if(!i.isObjectProperty())throw new TypeError("Cannot apply a numeric index as object property");return Wr(r,i.getObjectProperty())}else throw new TypeError("Cannot apply index: unsupported type of object")}catch(a){throw Qr(a)}}}var em="AccessorNode",nte=["subset","Node"],rte=z(em,nte,t=>{var{subset:e,Node:n}=t,r=uB({subset:e});function i(o){return!(rl(o)||Wi(o)||At(o)||qs(o)||A0(o)||$o(o)||rr(o))}class a extends n{constructor(s,u){if(super(),!Ut(s))throw new TypeError('Node expected for parameter "object"');if(!_f(u))throw new TypeError('IndexNode expected for parameter "index"');this.object=s,this.index=u}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return em}get isAccessorNode(){return!0}_compile(s,u){var l=this.object._compile(s,u),c=this.index._compile(s,u);if(this.index.isObjectProperty()){var f=this.index.getObjectProperty();return function(h,p,m){return Wr(l(h,p,m),f)}}else return function(h,p,m){var g=l(h,p,m),v=c(h,p,g);return r(g,v)}}forEach(s){s(this.object,"object",this),s(this.index,"index",this)}map(s){return new a(this._ifNode(s(this.object,"object",this)),this._ifNode(s(this.index,"index",this)))}clone(){return new a(this.object,this.index)}_toString(s){var u=this.object.toString(s);return i(this.object)&&(u="("+u+")"),u+this.index.toString(s)}_toHTML(s){var u=this.object.toHTML(s);return i(this.object)&&(u='<span class="math-parenthesis math-round-parenthesis">(</span>'+u+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u+this.index.toHTML(s)}_toTex(s){var u=this.object.toTex(s);return i(this.object)&&(u="\\left(' + object + '\\right)"),u+this.index.toTex(s)}toJSON(){return{mathjs:em,object:this.object,index:this.index}}static fromJSON(s){return new a(s.object,s.index)}}return Pn(a,"name",em),a},{isClass:!0,isNode:!0}),tm="ArrayNode",ite=["Node"],ate=z(tm,ite,t=>{var{Node:e}=t;class n extends e{constructor(i){if(super(),this.items=i||[],!Array.isArray(this.items)||!this.items.every(Ut))throw new TypeError("Array containing Nodes expected")}get type(){return tm}get isArrayNode(){return!0}_compile(i,a){var o=Ps(this.items,function(l){return l._compile(i,a)}),s=i.config.matrix!=="Array";if(s){var u=i.matrix;return function(c,f,d){return u(Ps(o,function(h){return h(c,f,d)}))}}else return function(c,f,d){return Ps(o,function(h){return h(c,f,d)})}}forEach(i){for(var a=0;a<this.items.length;a++){var o=this.items[a];i(o,"items["+a+"]",this)}}map(i){for(var a=[],o=0;o<this.items.length;o++)a[o]=this._ifNode(i(this.items[o],"items["+o+"]",this));return new n(a)}clone(){return new n(this.items.slice(0))}_toString(i){var a=this.items.map(function(o){return o.toString(i)});return"["+a.join(", ")+"]"}toJSON(){return{mathjs:tm,items:this.items}}static fromJSON(i){return new n(i.items)}_toHTML(i){var a=this.items.map(function(o){return o.toHTML(i)});return'<span class="math-parenthesis math-square-parenthesis">[</span>'+a.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(i){function a(o,s){var u=o.some(Wi)&&!o.every(Wi),l=s||u,c=l?"&":"\\\\",f=o.map(function(d){return d.items?a(d.items,!s):d.toTex(i)}).join(c);return u||!l||l&&!s?"\\begin{bmatrix}"+f+"\\end{bmatrix}":f}return a(this.items,!1)}}return Pn(n,"name",tm),n},{isClass:!0,isNode:!0});function ote(t){var{subset:e,matrix:n}=t;return function(i,a,o){try{if(Array.isArray(i)){var s=n(i).subset(a,o).valueOf();return s.forEach((u,l)=>{i[l]=u}),i}else{if(i&&typeof i.subset=="function")return i.subset(a,o);if(typeof i=="string")return e(i,a,o);if(typeof i=="object"){if(!a.isObjectProperty())throw TypeError("Cannot apply a numeric index as object property");return Yc(i,a.getObjectProperty(),o),i}else throw new TypeError("Cannot apply index: unsupported type of object")}}catch(u){throw Qr(u)}}}var ma=[{AssignmentNode:{},FunctionAssignmentNode:{}},{ConditionalNode:{latexLeftParens:!1,latexRightParens:!1,latexParens:!1}},{"OperatorNode:or":{op:"or",associativity:"left",associativeWith:[]}},{"OperatorNode:xor":{op:"xor",associativity:"left",associativeWith:[]}},{"OperatorNode:and":{op:"and",associativity:"left",associativeWith:[]}},{"OperatorNode:bitOr":{op:"|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitXor":{op:"^|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitAnd":{op:"&",associativity:"left",associativeWith:[]}},{"OperatorNode:equal":{op:"==",associativity:"left",associativeWith:[]},"OperatorNode:unequal":{op:"!=",associativity:"left",associativeWith:[]},"OperatorNode:smaller":{op:"<",associativity:"left",associativeWith:[]},"OperatorNode:larger":{op:">",associativity:"left",associativeWith:[]},"OperatorNode:smallerEq":{op:"<=",associativity:"left",associativeWith:[]},"OperatorNode:largerEq":{op:">=",associativity:"left",associativeWith:[]},RelationalNode:{associativity:"left",associativeWith:[]}},{"OperatorNode:leftShift":{op:"<<",associativity:"left",associativeWith:[]},"OperatorNode:rightArithShift":{op:">>",associativity:"left",associativeWith:[]},"OperatorNode:rightLogShift":{op:">>>",associativity:"left",associativeWith:[]}},{"OperatorNode:to":{op:"to",associativity:"left",associativeWith:[]}},{RangeNode:{}},{"OperatorNode:add":{op:"+",associativity:"left",associativeWith:["OperatorNode:add","OperatorNode:subtract"]},"OperatorNode:subtract":{op:"-",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{op:"*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]},"OperatorNode:divide":{op:"/",associativity:"left",associativeWith:[],latexLeftParens:!1,latexRightParens:!1,latexParens:!1},"OperatorNode:dotMultiply":{op:".*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","OperatorNode:dotMultiply","OperatorNode:doDivide"]},"OperatorNode:dotDivide":{op:"./",associativity:"left",associativeWith:[]},"OperatorNode:mod":{op:"mod",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]}},{"OperatorNode:unaryPlus":{op:"+",associativity:"right"},"OperatorNode:unaryMinus":{op:"-",associativity:"right"},"OperatorNode:bitNot":{op:"~",associativity:"right"},"OperatorNode:not":{op:"not",associativity:"right"}},{"OperatorNode:pow":{op:"^",associativity:"right",associativeWith:[],latexRightParens:!1},"OperatorNode:dotPow":{op:".^",associativity:"right",associativeWith:[]}},{"OperatorNode:factorial":{op:"!",associativity:"left"}},{"OperatorNode:ctranspose":{op:"'",associativity:"left"}}];function nm(t,e){if(!e||e!=="auto")return t;for(var n=t;$o(n);)n=n.content;return n}function Ht(t,e,n,r){var i=t;e!=="keep"&&(i=t.getContent());for(var a=i.getIdentifier(),o=null,s=0;s<ma.length;s++)if(a in ma[s]){o=s;break}if(a==="OperatorNode:multiply"&&i.implicit&&n!=="show"){var u=nm(i.args[0],e);!(At(u)&&r&&r.getIdentifier()==="OperatorNode:divide"&&db(nm(r.args[0],e)))&&!(u.getIdentifier()==="OperatorNode:divide"&&db(nm(u.args[0],e))&&At(nm(u.args[1])))&&(o+=1)}return o}function rd(t,e){var n=t;e!=="keep"&&(n=t.getContent());var r=n.getIdentifier(),i=Ht(n,e);if(i===null)return null;var a=ma[i][r];if(Ue(a,"associativity")){if(a.associativity==="left")return"left";if(a.associativity==="right")return"right";throw Error("'"+r+"' has the invalid associativity '"+a.associativity+"'.")}return null}function l1(t,e,n){var r=n!=="keep"?t.getContent():t,i=n!=="keep"?t.getContent():e,a=r.getIdentifier(),o=i.getIdentifier(),s=Ht(r,n);if(s===null)return null;var u=ma[s][a];if(Ue(u,"associativeWith")&&u.associativeWith instanceof Array){for(var l=0;l<u.associativeWith.length;l++)if(u.associativeWith[l]===o)return!0;return!1}return null}function ste(t){var e="OperatorNode:"+t;for(var n of ma)if(e in n)return n[e].op;return null}var rm="AssignmentNode",ute=["subset","?matrix","Node"],lte=z(rm,ute,t=>{var{subset:e,matrix:n,Node:r}=t,i=uB({subset:e}),a=ote({subset:e,matrix:n});function o(u,l,c){l||(l="keep");var f=Ht(u,l,c),d=Ht(u.value,l,c);return l==="all"||d!==null&&d<=f}class s extends r{constructor(l,c,f){if(super(),this.object=l,this.index=f?c:null,this.value=f||c,!rr(l)&&!rl(l))throw new TypeError('SymbolNode or AccessorNode expected as "object"');if(rr(l)&&l.name==="end")throw new Error('Cannot assign to symbol "end"');if(this.index&&!_f(this.index))throw new TypeError('IndexNode expected as "index"');if(!Ut(this.value))throw new TypeError('Node expected as "value"')}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return rm}get isAssignmentNode(){return!0}_compile(l,c){var f=this.object._compile(l,c),d=this.index?this.index._compile(l,c):null,h=this.value._compile(l,c),p=this.object.name;if(this.index)if(this.index.isObjectProperty()){var m=this.index.getObjectProperty();return function(b,w,_){var E=f(b,w,_),C=h(b,w,_);return Yc(E,m,C),C}}else{if(rr(this.object))return function(b,w,_){var E=f(b,w,_),C=h(b,w,_),N=d(b,w,E);return b.set(p,a(E,N,C)),C};var g=this.object.object._compile(l,c);if(this.object.index.isObjectProperty()){var v=this.object.index.getObjectProperty();return function(b,w,_){var E=g(b,w,_),C=Wr(E,v),N=d(b,w,C),D=h(b,w,_);return Yc(E,v,a(C,N,D)),D}}else{var x=this.object.index._compile(l,c);return function(b,w,_){var E=g(b,w,_),C=x(b,w,E),N=i(E,C),D=d(b,w,N),A=h(b,w,_);return a(E,C,a(N,D,A)),A}}}else{if(!rr(this.object))throw new TypeError("SymbolNode expected as object");return function(b,w,_){var E=h(b,w,_);return b.set(p,E),E}}}forEach(l){l(this.object,"object",this),this.index&&l(this.index,"index",this),l(this.value,"value",this)}map(l){var c=this._ifNode(l(this.object,"object",this)),f=this.index?this._ifNode(l(this.index,"index",this)):null,d=this._ifNode(l(this.value,"value",this));return new s(c,f,d)}clone(){return new s(this.object,this.index,this.value)}_toString(l){var c=this.object.toString(l),f=this.index?this.index.toString(l):"",d=this.value.toString(l);return o(this,l&&l.parenthesis,l&&l.implicit)&&(d="("+d+")"),c+f+" = "+d}toJSON(){return{mathjs:rm,object:this.object,index:this.index,value:this.value}}static fromJSON(l){return new s(l.object,l.index,l.value)}_toHTML(l){var c=this.object.toHTML(l),f=this.index?this.index.toHTML(l):"",d=this.value.toHTML(l);return o(this,l&&l.parenthesis,l&&l.implicit)&&(d='<span class="math-paranthesis math-round-parenthesis">(</span>'+d+'<span class="math-paranthesis math-round-parenthesis">)</span>'),c+f+'<span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+d}_toTex(l){var c=this.object.toTex(l),f=this.index?this.index.toTex(l):"",d=this.value.toTex(l);return o(this,l&&l.parenthesis,l&&l.implicit)&&(d="\\left(".concat(d,"\\right)")),c+f+"="+d}}return Pn(s,"name",rm),s},{isClass:!0,isNode:!0}),im="BlockNode",cte=["ResultSet","Node"],fte=z(im,cte,t=>{var{ResultSet:e,Node:n}=t;class r extends n{constructor(a){if(super(),!Array.isArray(a))throw new Error("Array expected");this.blocks=a.map(function(o){var s=o&&o.node,u=o&&o.visible!==void 0?o.visible:!0;if(!Ut(s))throw new TypeError('Property "node" must be a Node');if(typeof u!="boolean")throw new TypeError('Property "visible" must be a boolean');return{node:s,visible:u}})}get type(){return im}get isBlockNode(){return!0}_compile(a,o){var s=Ps(this.blocks,function(u){return{evaluate:u.node._compile(a,o),visible:u.visible}});return function(l,c,f){var d=[];return VP(s,function(p){var m=p.evaluate(l,c,f);p.visible&&d.push(m)}),new e(d)}}forEach(a){for(var o=0;o<this.blocks.length;o++)a(this.blocks[o].node,"blocks["+o+"].node",this)}map(a){for(var o=[],s=0;s<this.blocks.length;s++){var u=this.blocks[s],l=this._ifNode(a(u.node,"blocks["+s+"].node",this));o[s]={node:l,visible:u.visible}}return new r(o)}clone(){var a=this.blocks.map(function(o){return{node:o.node,visible:o.visible}});return new r(a)}_toString(a){return this.blocks.map(function(o){return o.node.toString(a)+(o.visible?"":";")}).join(`
`)}toJSON(){return{mathjs:im,blocks:this.blocks}}static fromJSON(a){return new r(a.blocks)}_toHTML(a){return this.blocks.map(function(o){return o.node.toHTML(a)+(o.visible?"":'<span class="math-separator">;</span>')}).join('<span class="math-separator"><br /></span>')}_toTex(a){return this.blocks.map(function(o){return o.node.toTex(a)+(o.visible?"":";")}).join(`\\;\\;
`)}}return Pn(r,"name",im),r},{isClass:!0,isNode:!0}),am="ConditionalNode",dte=["Node"],hte=z(am,dte,t=>{var{Node:e}=t;function n(i){if(typeof i=="number"||typeof i=="boolean"||typeof i=="string")return!!i;if(i){if(ht(i))return!i.isZero();if(Mo(i))return!!(i.re||i.im);if(Hi(i))return!!i.value}if(i==null)return!1;throw new TypeError('Unsupported type of condition "'+Qt(i)+'"')}class r extends e{constructor(a,o,s){if(super(),!Ut(a))throw new TypeError("Parameter condition must be a Node");if(!Ut(o))throw new TypeError("Parameter trueExpr must be a Node");if(!Ut(s))throw new TypeError("Parameter falseExpr must be a Node");this.condition=a,this.trueExpr=o,this.falseExpr=s}get type(){return am}get isConditionalNode(){return!0}_compile(a,o){var s=this.condition._compile(a,o),u=this.trueExpr._compile(a,o),l=this.falseExpr._compile(a,o);return function(f,d,h){return n(s(f,d,h))?u(f,d,h):l(f,d,h)}}forEach(a){a(this.condition,"condition",this),a(this.trueExpr,"trueExpr",this),a(this.falseExpr,"falseExpr",this)}map(a){return new r(this._ifNode(a(this.condition,"condition",this)),this._ifNode(a(this.trueExpr,"trueExpr",this)),this._ifNode(a(this.falseExpr,"falseExpr",this)))}clone(){return new r(this.condition,this.trueExpr,this.falseExpr)}_toString(a){var o=a&&a.parenthesis?a.parenthesis:"keep",s=Ht(this,o,a&&a.implicit),u=this.condition.toString(a),l=Ht(this.condition,o,a&&a.implicit);(o==="all"||this.condition.type==="OperatorNode"||l!==null&&l<=s)&&(u="("+u+")");var c=this.trueExpr.toString(a),f=Ht(this.trueExpr,o,a&&a.implicit);(o==="all"||this.trueExpr.type==="OperatorNode"||f!==null&&f<=s)&&(c="("+c+")");var d=this.falseExpr.toString(a),h=Ht(this.falseExpr,o,a&&a.implicit);return(o==="all"||this.falseExpr.type==="OperatorNode"||h!==null&&h<=s)&&(d="("+d+")"),u+" ? "+c+" : "+d}toJSON(){return{mathjs:am,condition:this.condition,trueExpr:this.trueExpr,falseExpr:this.falseExpr}}static fromJSON(a){return new r(a.condition,a.trueExpr,a.falseExpr)}_toHTML(a){var o=a&&a.parenthesis?a.parenthesis:"keep",s=Ht(this,o,a&&a.implicit),u=this.condition.toHTML(a),l=Ht(this.condition,o,a&&a.implicit);(o==="all"||this.condition.type==="OperatorNode"||l!==null&&l<=s)&&(u='<span class="math-parenthesis math-round-parenthesis">(</span>'+u+'<span class="math-parenthesis math-round-parenthesis">)</span>');var c=this.trueExpr.toHTML(a),f=Ht(this.trueExpr,o,a&&a.implicit);(o==="all"||this.trueExpr.type==="OperatorNode"||f!==null&&f<=s)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>');var d=this.falseExpr.toHTML(a),h=Ht(this.falseExpr,o,a&&a.implicit);return(o==="all"||this.falseExpr.type==="OperatorNode"||h!==null&&h<=s)&&(d='<span class="math-parenthesis math-round-parenthesis">(</span>'+d+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u+'<span class="math-operator math-conditional-operator">?</span>'+c+'<span class="math-operator math-conditional-operator">:</span>'+d}_toTex(a){return"\\begin{cases} {"+this.trueExpr.toTex(a)+"}, &\\quad{\\text{if }\\;"+this.condition.toTex(a)+"}\\\\{"+this.falseExpr.toTex(a)+"}, &\\quad{\\text{otherwise}}\\end{cases}"}}return Pn(r,"name",am),r},{isClass:!0,isNode:!0}),Ib=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pte={"{":"\\{","}":"\\}","\\":"\\textbackslash{}","#":"\\#",$:"\\$","%":"\\%","&":"\\&","^":"\\textasciicircum{}",_:"\\_","~":"\\textasciitilde{}"},mte={"":"\\--","":"\\---"," ":"~","	":"\\qquad{}","\r\n":"\\newline{}","\n":"\\newline{}"},vte=function(e,n){return Ib({},e,n)},gte=function(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.preserveFormatting,r=n===void 0?!1:n,i=e.escapeMapFn,a=i===void 0?vte:i,o=String(t),s="",u=a(Ib({},pte),r?Ib({},mte):{}),l=Object.keys(u),c=function(){var d=!1;l.forEach(function(h,p){d||o.length>=h.length&&o.slice(0,h.length)===h&&(s+=u[l[p]],o=o.slice(h.length,o.length),d=!0)}),d||(s+=o.slice(0,1),o=o.slice(1,o.length))};o;)c();return s};const yte=i0(gte);var Rb={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega",true:"\\mathrm{True}",false:"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},kt={transpose:"^\\top",ctranspose:"^H",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"\\~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},V3={abs:{1:"\\left|${args[0]}\\right|"},add:{2:"\\left(${args[0]}".concat(kt.add,"${args[1]}\\right)")},cbrt:{1:"\\sqrt[3]{${args[0]}}"},ceil:{1:"\\left\\lceil${args[0]}\\right\\rceil"},cube:{1:"\\left(${args[0]}\\right)^3"},divide:{2:"\\frac{${args[0]}}{${args[1]}}"},dotDivide:{2:"\\left(${args[0]}".concat(kt.dotDivide,"${args[1]}\\right)")},dotMultiply:{2:"\\left(${args[0]}".concat(kt.dotMultiply,"${args[1]}\\right)")},dotPow:{2:"\\left(${args[0]}".concat(kt.dotPow,"${args[1]}\\right)")},exp:{1:"\\exp\\left(${args[0]}\\right)"},expm1:"\\left(e".concat(kt.pow,"{${args[0]}}-1\\right)"),fix:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},floor:{1:"\\left\\lfloor${args[0]}\\right\\rfloor"},fraction:{2:"\\frac{${args[0]}}{${args[1]}}"},gcd:"\\gcd\\left(${args}\\right)",hypot:"\\hypot\\left(${args}\\right)",log:{1:"\\ln\\left(${args[0]}\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}\\right)"},log10:{1:"\\log_{10}\\left(${args[0]}\\right)"},log1p:{1:"\\ln\\left(${args[0]}+1\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}+1\\right)"},log2:"\\log_{2}\\left(${args[0]}\\right)",mod:{2:"\\left(${args[0]}".concat(kt.mod,"${args[1]}\\right)")},multiply:{2:"\\left(${args[0]}".concat(kt.multiply,"${args[1]}\\right)")},norm:{1:"\\left\\|${args[0]}\\right\\|",2:void 0},nthRoot:{2:"\\sqrt[${args[1]}]{${args[0]}}"},nthRoots:{2:"\\{y : y^${args[1]} = {${args[0]}}\\}"},pow:{2:"\\left(${args[0]}\\right)".concat(kt.pow,"{${args[1]}}")},round:{1:"\\left\\lfloor${args[0]}\\right\\rceil",2:void 0},sign:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},sqrt:{1:"\\sqrt{${args[0]}}"},square:{1:"\\left(${args[0]}\\right)^2"},subtract:{2:"\\left(${args[0]}".concat(kt.subtract,"${args[1]}\\right)")},unaryMinus:{1:"".concat(kt.unaryMinus,"\\left(${args[0]}\\right)")},unaryPlus:{1:"".concat(kt.unaryPlus,"\\left(${args[0]}\\right)")},bitAnd:{2:"\\left(${args[0]}".concat(kt.bitAnd,"${args[1]}\\right)")},bitNot:{1:kt.bitNot+"\\left(${args[0]}\\right)"},bitOr:{2:"\\left(${args[0]}".concat(kt.bitOr,"${args[1]}\\right)")},bitXor:{2:"\\left(${args[0]}".concat(kt.bitXor,"${args[1]}\\right)")},leftShift:{2:"\\left(${args[0]}".concat(kt.leftShift,"${args[1]}\\right)")},rightArithShift:{2:"\\left(${args[0]}".concat(kt.rightArithShift,"${args[1]}\\right)")},rightLogShift:{2:"\\left(${args[0]}".concat(kt.rightLogShift,"${args[1]}\\right)")},bellNumbers:{1:"\\mathrm{B}_{${args[0]}}"},catalan:{1:"\\mathrm{C}_{${args[0]}}"},stirlingS2:{2:"\\mathrm{S}\\left(${args}\\right)"},arg:{1:"\\arg\\left(${args[0]}\\right)"},conj:{1:"\\left(${args[0]}\\right)^*"},im:{1:"\\Im\\left\\lbrace${args[0]}\\right\\rbrace"},re:{1:"\\Re\\left\\lbrace${args[0]}\\right\\rbrace"},and:{2:"\\left(${args[0]}".concat(kt.and,"${args[1]}\\right)")},not:{1:kt.not+"\\left(${args[0]}\\right)"},or:{2:"\\left(${args[0]}".concat(kt.or,"${args[1]}\\right)")},xor:{2:"\\left(${args[0]}".concat(kt.xor,"${args[1]}\\right)")},cross:{2:"\\left(${args[0]}\\right)\\times\\left(${args[1]}\\right)"},ctranspose:{1:"\\left(${args[0]}\\right)".concat(kt.ctranspose)},det:{1:"\\det\\left(${args[0]}\\right)"},dot:{2:"\\left(${args[0]}\\cdot${args[1]}\\right)"},expm:{1:"\\exp\\left(${args[0]}\\right)"},inv:{1:"\\left(${args[0]}\\right)^{-1}"},pinv:{1:"\\left(${args[0]}\\right)^{+}"},sqrtm:{1:"{${args[0]}}".concat(kt.pow,"{\\frac{1}{2}}")},trace:{1:"\\mathrm{tr}\\left(${args[0]}\\right)"},transpose:{1:"\\left(${args[0]}\\right)".concat(kt.transpose)},combinations:{2:"\\binom{${args[0]}}{${args[1]}}"},combinationsWithRep:{2:"\\left(\\!\\!{\\binom{${args[0]}}{${args[1]}}}\\!\\!\\right)"},factorial:{1:"\\left(${args[0]}\\right)".concat(kt.factorial)},gamma:{1:"\\Gamma\\left(${args[0]}\\right)"},lgamma:{1:"\\ln\\Gamma\\left(${args[0]}\\right)"},equal:{2:"\\left(${args[0]}".concat(kt.equal,"${args[1]}\\right)")},larger:{2:"\\left(${args[0]}".concat(kt.larger,"${args[1]}\\right)")},largerEq:{2:"\\left(${args[0]}".concat(kt.largerEq,"${args[1]}\\right)")},smaller:{2:"\\left(${args[0]}".concat(kt.smaller,"${args[1]}\\right)")},smallerEq:{2:"\\left(${args[0]}".concat(kt.smallerEq,"${args[1]}\\right)")},unequal:{2:"\\left(${args[0]}".concat(kt.unequal,"${args[1]}\\right)")},erf:{1:"erf\\left(${args[0]}\\right)"},max:"\\max\\left(${args}\\right)",min:"\\min\\left(${args}\\right)",variance:"\\mathrm{Var}\\left(${args}\\right)",acos:{1:"\\cos^{-1}\\left(${args[0]}\\right)"},acosh:{1:"\\cosh^{-1}\\left(${args[0]}\\right)"},acot:{1:"\\cot^{-1}\\left(${args[0]}\\right)"},acoth:{1:"\\coth^{-1}\\left(${args[0]}\\right)"},acsc:{1:"\\csc^{-1}\\left(${args[0]}\\right)"},acsch:{1:"\\mathrm{csch}^{-1}\\left(${args[0]}\\right)"},asec:{1:"\\sec^{-1}\\left(${args[0]}\\right)"},asech:{1:"\\mathrm{sech}^{-1}\\left(${args[0]}\\right)"},asin:{1:"\\sin^{-1}\\left(${args[0]}\\right)"},asinh:{1:"\\sinh^{-1}\\left(${args[0]}\\right)"},atan:{1:"\\tan^{-1}\\left(${args[0]}\\right)"},atan2:{2:"\\mathrm{atan2}\\left(${args}\\right)"},atanh:{1:"\\tanh^{-1}\\left(${args[0]}\\right)"},cos:{1:"\\cos\\left(${args[0]}\\right)"},cosh:{1:"\\cosh\\left(${args[0]}\\right)"},cot:{1:"\\cot\\left(${args[0]}\\right)"},coth:{1:"\\coth\\left(${args[0]}\\right)"},csc:{1:"\\csc\\left(${args[0]}\\right)"},csch:{1:"\\mathrm{csch}\\left(${args[0]}\\right)"},sec:{1:"\\sec\\left(${args[0]}\\right)"},sech:{1:"\\mathrm{sech}\\left(${args[0]}\\right)"},sin:{1:"\\sin\\left(${args[0]}\\right)"},sinh:{1:"\\sinh\\left(${args[0]}\\right)"},tan:{1:"\\tan\\left(${args[0]}\\right)"},tanh:{1:"\\tanh\\left(${args[0]}\\right)"},to:{2:"\\left(${args[0]}".concat(kt.to,"${args[1]}\\right)")},numeric:function(e,n){return e.args[0].toTex()},number:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},string:{0:'\\mathtt{""}',1:"\\mathrm{string}\\left(${args[0]}\\right)"},bignumber:{0:"0",1:"\\left(${args[0]}\\right)"},bigint:{0:"0",1:"\\left(${args[0]}\\right)"},complex:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)+".concat(Rb.i,"\\cdot\\left(${args[1]}\\right)\\right)")},matrix:{0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},sparse:{0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},unit:{1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"}},xte="\\mathrm{${name}}\\left(${args}\\right)",q3={deg:"^\\circ"};function kb(t){return yte(t,{preserveFormatting:!0})}function lB(t,e){return e=typeof e>"u"?!1:e,e?Ue(q3,t)?q3[t]:"\\mathrm{"+kb(t)+"}":Ue(Rb,t)?Rb[t]:kb(t)}var om="ConstantNode",bte=["Node"],wte=z(om,bte,t=>{var{Node:e}=t;class n extends e{constructor(i){super(),this.value=i}get type(){return om}get isConstantNode(){return!0}_compile(i,a){var o=this.value;return function(){return o}}forEach(i){}map(i){return this.clone()}clone(){return new n(this.value)}_toString(i){return xt(this.value,i)}_toHTML(i){var a=this._toString(i);switch(Qt(this.value)){case"number":case"bigint":case"BigNumber":case"Fraction":return'<span class="math-number">'+a+"</span>";case"string":return'<span class="math-string">'+a+"</span>";case"boolean":return'<span class="math-boolean">'+a+"</span>";case"null":return'<span class="math-null-symbol">'+a+"</span>";case"undefined":return'<span class="math-undefined">'+a+"</span>";default:return'<span class="math-symbol">'+a+"</span>"}}toJSON(){return{mathjs:om,value:this.value}}static fromJSON(i){return new n(i.value)}_toTex(i){var a=this._toString(i),o=Qt(this.value);switch(o){case"string":return"\\mathtt{"+kb(a)+"}";case"number":case"BigNumber":{var s=o==="BigNumber"?this.value.isFinite():isFinite(this.value);if(!s)return this.value.valueOf()<0?"-\\infty":"\\infty";var u=a.toLowerCase().indexOf("e");return u!==-1?a.substring(0,u)+"\\cdot10^{"+a.substring(u+1)+"}":a}case"bigint":return a.toString();case"Fraction":return this.value.toLatex();default:return a}}}return Pn(n,"name",om),n},{isClass:!0,isNode:!0}),sm="FunctionAssignmentNode",_te=["typed","Node"],Ete=z(sm,_te,t=>{var{typed:e,Node:n}=t;function r(a,o,s){var u=Ht(a,o,s),l=Ht(a.expr,o,s);return o==="all"||l!==null&&l<=u}class i extends n{constructor(o,s,u){if(super(),typeof o!="string")throw new TypeError('String expected for parameter "name"');if(!Array.isArray(s))throw new TypeError('Array containing strings or objects expected for parameter "params"');if(!Ut(u))throw new TypeError('Node expected for parameter "expr"');if(sB.has(o))throw new Error('Illegal function name, "'+o+'" is a reserved keyword');var l=new Set;for(var c of s){var f=typeof c=="string"?c:c.name;if(l.has(f))throw new Error('Duplicate parameter name "'.concat(f,'"'));l.add(f)}this.name=o,this.params=s.map(function(d){return d&&d.name||d}),this.types=s.map(function(d){return d&&d.type||"any"}),this.expr=u}get type(){return sm}get isFunctionAssignmentNode(){return!0}_compile(o,s){var u=Object.create(s);VP(this.params,function(p){u[p]=!0});var l=this.expr._compile(o,u),c=this.name,f=this.params,d=HS(this.types,","),h=c+"("+HS(this.params,", ")+")";return function(m,g,v){var x={};x[d]=function(){for(var b=Object.create(g),w=0;w<f.length;w++)b[f[w]]=arguments[w];return l(m,b,v)};var y=e(c,x);return y.syntax=h,m.set(c,y),y}}forEach(o){o(this.expr,"expr",this)}map(o){var s=this._ifNode(o(this.expr,"expr",this));return new i(this.name,this.params.slice(0),s)}clone(){return new i(this.name,this.params.slice(0),this.expr)}_toString(o){var s=o&&o.parenthesis?o.parenthesis:"keep",u=this.expr.toString(o);return r(this,s,o&&o.implicit)&&(u="("+u+")"),this.name+"("+this.params.join(", ")+") = "+u}toJSON(){var o=this.types;return{mathjs:sm,name:this.name,params:this.params.map(function(s,u){return{name:s,type:o[u]}}),expr:this.expr}}static fromJSON(o){return new i(o.name,o.params,o.expr)}_toHTML(o){for(var s=o&&o.parenthesis?o.parenthesis:"keep",u=[],l=0;l<this.params.length;l++)u.push('<span class="math-symbol math-parameter">'+Ki(this.params[l])+"</span>");var c=this.expr.toHTML(o);return r(this,s,o&&o.implicit)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),'<span class="math-function">'+Ki(this.name)+'</span><span class="math-parenthesis math-round-parenthesis">(</span>'+u.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-round-parenthesis">)</span><span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+c}_toTex(o){var s=o&&o.parenthesis?o.parenthesis:"keep",u=this.expr.toTex(o);return r(this,s,o&&o.implicit)&&(u="\\left(".concat(u,"\\right)")),"\\mathrm{"+this.name+"}\\left("+this.params.map(lB).join(",")+"\\right)="+u}}return Pn(i,"name",sm),i},{isClass:!0,isNode:!0}),um="IndexNode",Cte=["Node","size"],Nte=z(um,Cte,t=>{var{Node:e,size:n}=t;class r extends e{constructor(a,o){if(super(),this.dimensions=a,this.dotNotation=o||!1,!Array.isArray(a)||!a.every(Ut))throw new TypeError('Array containing Nodes expected for parameter "dimensions"');if(this.dotNotation&&!this.isObjectProperty())throw new Error("dotNotation only applicable for object properties")}get type(){return um}get isIndexNode(){return!0}_compile(a,o){var s=Ps(this.dimensions,function(l,c){var f=l.filter(p=>p.isSymbolNode&&p.name==="end").length>0;if(f){var d=Object.create(o);d.end=!0;var h=l._compile(a,d);return function(m,g,v){if(!Je(v)&&!qt(v)&&!Dr(v))throw new TypeError('Cannot resolve "end": context must be a Matrix, Array, or string but is '+Qt(v));var x=n(v).valueOf(),y=Object.create(g);return y.end=x[c],h(m,y,v)}}else return l._compile(a,o)}),u=Wr(a,"index");return function(c,f,d){var h=Ps(s,function(p){return p(c,f,d)});return u(...h)}}forEach(a){for(var o=0;o<this.dimensions.length;o++)a(this.dimensions[o],"dimensions["+o+"]",this)}map(a){for(var o=[],s=0;s<this.dimensions.length;s++)o[s]=this._ifNode(a(this.dimensions[s],"dimensions["+s+"]",this));return new r(o,this.dotNotation)}clone(){return new r(this.dimensions.slice(0),this.dotNotation)}isObjectProperty(){return this.dimensions.length===1&&At(this.dimensions[0])&&typeof this.dimensions[0].value=="string"}getObjectProperty(){return this.isObjectProperty()?this.dimensions[0].value:null}_toString(a){return this.dotNotation?"."+this.getObjectProperty():"["+this.dimensions.join(", ")+"]"}toJSON(){return{mathjs:um,dimensions:this.dimensions,dotNotation:this.dotNotation}}static fromJSON(a){return new r(a.dimensions,a.dotNotation)}_toHTML(a){for(var o=[],s=0;s<this.dimensions.length;s++)o[s]=this.dimensions[s].toHTML();return this.dotNotation?'<span class="math-operator math-accessor-operator">.</span><span class="math-symbol math-property">'+Ki(this.getObjectProperty())+"</span>":'<span class="math-parenthesis math-square-parenthesis">[</span>'+o.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(a){var o=this.dimensions.map(function(s){return s.toTex(a)});return this.dotNotation?"."+this.getObjectProperty():"_{"+o.join(",")+"}"}}return Pn(r,"name",um),r},{isClass:!0,isNode:!0}),lm="ObjectNode",Ste=["Node"],Dte=z(lm,Ste,t=>{var{Node:e}=t;class n extends e{constructor(i){if(super(),this.properties=i||{},i&&(typeof i!="object"||!Object.keys(i).every(function(a){return Ut(i[a])})))throw new TypeError("Object containing Nodes expected")}get type(){return lm}get isObjectNode(){return!0}_compile(i,a){var o={};for(var s in this.properties)if(Ue(this.properties,s)){var u=fc(s),l=JSON.parse(u),c=Wr(this.properties,s);o[l]=c._compile(i,a)}return function(d,h,p){var m={};for(var g in o)Ue(o,g)&&(m[g]=o[g](d,h,p));return m}}forEach(i){for(var a in this.properties)Ue(this.properties,a)&&i(this.properties[a],"properties["+fc(a)+"]",this)}map(i){var a={};for(var o in this.properties)Ue(this.properties,o)&&(a[o]=this._ifNode(i(this.properties[o],"properties["+fc(o)+"]",this)));return new n(a)}clone(){var i={};for(var a in this.properties)Ue(this.properties,a)&&(i[a]=this.properties[a]);return new n(i)}_toString(i){var a=[];for(var o in this.properties)Ue(this.properties,o)&&a.push(fc(o)+": "+this.properties[o].toString(i));return"{"+a.join(", ")+"}"}toJSON(){return{mathjs:lm,properties:this.properties}}static fromJSON(i){return new n(i.properties)}_toHTML(i){var a=[];for(var o in this.properties)Ue(this.properties,o)&&a.push('<span class="math-symbol math-property">'+Ki(o)+'</span><span class="math-operator math-assignment-operator math-property-assignment-operator math-binary-operator">:</span>'+this.properties[o].toHTML(i));return'<span class="math-parenthesis math-curly-parenthesis">{</span>'+a.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-curly-parenthesis">}</span>'}_toTex(i){var a=[];for(var o in this.properties)Ue(this.properties,o)&&a.push("\\mathbf{"+o+":} & "+this.properties[o].toTex(i)+"\\\\");var s="\\left\\{\\begin{array}{ll}"+a.join(`
`)+"\\end{array}\\right\\}";return s}}return Pn(n,"name",lm),n},{isClass:!0,isNode:!0});function xd(t,e){return new vP(t,new N0(e),new Set(Object.keys(e)))}var cm="OperatorNode",Ate=["Node"],Tte=z(cm,Ate,t=>{var{Node:e}=t;function n(a,o){var s=a;if(o==="auto")for(;$o(s);)s=s.content;return At(s)?!0:Tn(s)?n(s.args[0],o):!1}function r(a,o,s,u,l){var c=Ht(a,o,s),f=rd(a,o);if(o==="all"||u.length>2&&a.getIdentifier()!=="OperatorNode:add"&&a.getIdentifier()!=="OperatorNode:multiply")return u.map(function(D){switch(D.getContent().type){case"ArrayNode":case"ConstantNode":case"SymbolNode":case"ParenthesisNode":return!1;default:return!0}});var d;switch(u.length){case 0:d=[];break;case 1:{var h=Ht(u[0],o,s,a);if(l&&h!==null){var p,m;if(o==="keep"?(p=u[0].getIdentifier(),m=a.getIdentifier()):(p=u[0].getContent().getIdentifier(),m=a.getContent().getIdentifier()),ma[c][m].latexLeftParens===!1){d=[!1];break}if(ma[h][p].latexParens===!1){d=[!1];break}}if(h===null){d=[!1];break}if(h<=c){d=[!0];break}d=[!1]}break;case 2:{var g,v=Ht(u[0],o,s,a),x=l1(a,u[0],o);v===null?g=!1:v===c&&f==="right"&&!x||v<c?g=!0:g=!1;var y,b=Ht(u[1],o,s,a),w=l1(a,u[1],o);if(b===null?y=!1:b===c&&f==="left"&&!w||b<c?y=!0:y=!1,l){var _,E,C;o==="keep"?(_=a.getIdentifier(),E=a.args[0].getIdentifier(),C=a.args[1].getIdentifier()):(_=a.getContent().getIdentifier(),E=a.args[0].getContent().getIdentifier(),C=a.args[1].getContent().getIdentifier()),v!==null&&(ma[c][_].latexLeftParens===!1&&(g=!1),ma[v][E].latexParens===!1&&(g=!1)),b!==null&&(ma[c][_].latexRightParens===!1&&(y=!1),ma[b][C].latexParens===!1&&(y=!1))}d=[g,y]}break;default:(a.getIdentifier()==="OperatorNode:add"||a.getIdentifier()==="OperatorNode:multiply")&&(d=u.map(function(D){var A=Ht(D,o,s,a),T=l1(a,D,o),k=rd(D,o);return A===null?!1:c===A&&f===k&&!T?!0:A<c}));break}if(u.length>=2&&a.getIdentifier()==="OperatorNode:multiply"&&a.implicit&&o!=="all"&&s==="hide")for(var N=1;N<d.length;++N)n(u[N],o)&&!d[N-1]&&(o!=="keep"||!$o(u[N-1]))&&(d[N]=!0);return d}class i extends e{constructor(o,s,u,l,c){if(super(),typeof o!="string")throw new TypeError('string expected for parameter "op"');if(typeof s!="string")throw new TypeError('string expected for parameter "fn"');if(!Array.isArray(u)||!u.every(Ut))throw new TypeError('Array containing Nodes expected for parameter "args"');this.implicit=l===!0,this.isPercentage=c===!0,this.op=o,this.fn=s,this.args=u||[]}get type(){return cm}get isOperatorNode(){return!0}_compile(o,s){if(typeof this.fn!="string"||!z2(o,this.fn))throw o[this.fn]?new Error('No access to function "'+this.fn+'"'):new Error("Function "+this.fn+' missing in provided namespace "math"');var u=Wr(o,this.fn),l=Ps(this.args,function(p){return p._compile(o,s)});if(typeof u=="function"&&u.rawArgs===!0){var c=this.args;return function(m,g,v){return u(c,o,xd(m,g))}}else if(l.length===1){var f=l[0];return function(m,g,v){return u(f(m,g,v))}}else if(l.length===2){var d=l[0],h=l[1];return function(m,g,v){return u(d(m,g,v),h(m,g,v))}}else return function(m,g,v){return u.apply(null,Ps(l,function(x){return x(m,g,v)}))}}forEach(o){for(var s=0;s<this.args.length;s++)o(this.args[s],"args["+s+"]",this)}map(o){for(var s=[],u=0;u<this.args.length;u++)s[u]=this._ifNode(o(this.args[u],"args["+u+"]",this));return new i(this.op,this.fn,s,this.implicit,this.isPercentage)}clone(){return new i(this.op,this.fn,this.args.slice(0),this.implicit,this.isPercentage)}isUnary(){return this.args.length===1}isBinary(){return this.args.length===2}_toString(o){var s=o&&o.parenthesis?o.parenthesis:"keep",u=o&&o.implicit?o.implicit:"hide",l=this.args,c=r(this,s,u,l,!1);if(l.length===1){var f=rd(this,s),d=l[0].toString(o);c[0]&&(d="("+d+")");var h=/[a-zA-Z]+/.test(this.op);return f==="right"?this.op+(h?" ":"")+d:f==="left"?d+(h?" ":"")+this.op:d+this.op}else if(l.length===2){var p=l[0].toString(o),m=l[1].toString(o);return c[0]&&(p="("+p+")"),c[1]&&(m="("+m+")"),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&u==="hide"?p+" "+m:p+" "+this.op+" "+m}else if(l.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var g=l.map(function(v,x){return v=v.toString(o),c[x]&&(v="("+v+")"),v});return this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&u==="hide"?g.join(" "):g.join(" "+this.op+" ")}else return this.fn+"("+this.args.join(", ")+")"}toJSON(){return{mathjs:cm,op:this.op,fn:this.fn,args:this.args,implicit:this.implicit,isPercentage:this.isPercentage}}static fromJSON(o){return new i(o.op,o.fn,o.args,o.implicit,o.isPercentage)}_toHTML(o){var s=o&&o.parenthesis?o.parenthesis:"keep",u=o&&o.implicit?o.implicit:"hide",l=this.args,c=r(this,s,u,l,!1);if(l.length===1){var f=rd(this,s),d=l[0].toHTML(o);return c[0]&&(d='<span class="math-parenthesis math-round-parenthesis">(</span>'+d+'<span class="math-parenthesis math-round-parenthesis">)</span>'),f==="right"?'<span class="math-operator math-unary-operator math-lefthand-unary-operator">'+Ki(this.op)+"</span>"+d:d+'<span class="math-operator math-unary-operator math-righthand-unary-operator">'+Ki(this.op)+"</span>"}else if(l.length===2){var h=l[0].toHTML(o),p=l[1].toHTML(o);return c[0]&&(h='<span class="math-parenthesis math-round-parenthesis">(</span>'+h+'<span class="math-parenthesis math-round-parenthesis">)</span>'),c[1]&&(p='<span class="math-parenthesis math-round-parenthesis">(</span>'+p+'<span class="math-parenthesis math-round-parenthesis">)</span>'),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&u==="hide"?h+'<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'+p:h+'<span class="math-operator math-binary-operator math-explicit-binary-operator">'+Ki(this.op)+"</span>"+p}else{var m=l.map(function(g,v){return g=g.toHTML(o),c[v]&&(g='<span class="math-parenthesis math-round-parenthesis">(</span>'+g+'<span class="math-parenthesis math-round-parenthesis">)</span>'),g});return l.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")?this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&u==="hide"?m.join('<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'):m.join('<span class="math-operator math-binary-operator math-explicit-binary-operator">'+Ki(this.op)+"</span>"):'<span class="math-function">'+Ki(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+m.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}}_toTex(o){var s=o&&o.parenthesis?o.parenthesis:"keep",u=o&&o.implicit?o.implicit:"hide",l=this.args,c=r(this,s,u,l,!0),f=kt[this.fn];if(f=typeof f>"u"?this.op:f,l.length===1){var d=rd(this,s),h=l[0].toTex(o);return c[0]&&(h="\\left(".concat(h,"\\right)")),d==="right"?f+h:h+f}else if(l.length===2){var p=l[0],m=p.toTex(o);c[0]&&(m="\\left(".concat(m,"\\right)"));var g=l[1],v=g.toTex(o);c[1]&&(v="\\left(".concat(v,"\\right)"));var x;switch(s==="keep"?x=p.getIdentifier():x=p.getContent().getIdentifier(),this.getIdentifier()){case"OperatorNode:divide":return f+"{"+m+"}{"+v+"}";case"OperatorNode:pow":switch(m="{"+m+"}",v="{"+v+"}",x){case"ConditionalNode":case"OperatorNode:divide":m="\\left(".concat(m,"\\right)")}break;case"OperatorNode:multiply":if(this.implicit&&u==="hide")return m+"~"+v}return m+f+v}else if(l.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var y=l.map(function(b,w){return b=b.toTex(o),c[w]&&(b="\\left(".concat(b,"\\right)")),b});return this.getIdentifier()==="OperatorNode:multiply"&&this.implicit&&u==="hide"?y.join("~"):y.join(f)}else return"\\mathrm{"+this.fn+"}\\left("+l.map(function(b){return b.toTex(o)}).join(",")+"\\right)"}getIdentifier(){return this.type+":"+this.fn}}return Pn(i,"name",cm),i},{isClass:!0,isNode:!0}),fm="ParenthesisNode",Mte=["Node"],Ite=z(fm,Mte,t=>{var{Node:e}=t;class n extends e{constructor(i){if(super(),!Ut(i))throw new TypeError('Node expected for parameter "content"');this.content=i}get type(){return fm}get isParenthesisNode(){return!0}_compile(i,a){return this.content._compile(i,a)}getContent(){return this.content.getContent()}forEach(i){i(this.content,"content",this)}map(i){var a=i(this.content,"content",this);return new n(a)}clone(){return new n(this.content)}_toString(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?"("+this.content.toString(i)+")":this.content.toString(i)}toJSON(){return{mathjs:fm,content:this.content}}static fromJSON(i){return new n(i.content)}_toHTML(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?'<span class="math-parenthesis math-round-parenthesis">(</span>'+this.content.toHTML(i)+'<span class="math-parenthesis math-round-parenthesis">)</span>':this.content.toHTML(i)}_toTex(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?"\\left(".concat(this.content.toTex(i),"\\right)"):this.content.toTex(i)}}return Pn(n,"name",fm),n},{isClass:!0,isNode:!0}),dm="RangeNode",Rte=["Node"],kte=z(dm,Rte,t=>{var{Node:e}=t;function n(i,a,o){var s=Ht(i,a,o),u={},l=Ht(i.start,a,o);if(u.start=l!==null&&l<=s||a==="all",i.step){var c=Ht(i.step,a,o);u.step=c!==null&&c<=s||a==="all"}var f=Ht(i.end,a,o);return u.end=f!==null&&f<=s||a==="all",u}class r extends e{constructor(a,o,s){if(super(),!Ut(a))throw new TypeError("Node expected");if(!Ut(o))throw new TypeError("Node expected");if(s&&!Ut(s))throw new TypeError("Node expected");if(arguments.length>3)throw new Error("Too many arguments");this.start=a,this.end=o,this.step=s||null}get type(){return dm}get isRangeNode(){return!0}needsEnd(){var a=this.filter(function(o){return rr(o)&&o.name==="end"});return a.length>0}_compile(a,o){var s=a.range,u=this.start._compile(a,o),l=this.end._compile(a,o);if(this.step){var c=this.step._compile(a,o);return function(d,h,p){return s(u(d,h,p),l(d,h,p),c(d,h,p))}}else return function(d,h,p){return s(u(d,h,p),l(d,h,p))}}forEach(a){a(this.start,"start",this),a(this.end,"end",this),this.step&&a(this.step,"step",this)}map(a){return new r(this._ifNode(a(this.start,"start",this)),this._ifNode(a(this.end,"end",this)),this.step&&this._ifNode(a(this.step,"step",this)))}clone(){return new r(this.start,this.end,this.step&&this.step)}_toString(a){var o=a&&a.parenthesis?a.parenthesis:"keep",s=n(this,o,a&&a.implicit),u,l=this.start.toString(a);if(s.start&&(l="("+l+")"),u=l,this.step){var c=this.step.toString(a);s.step&&(c="("+c+")"),u+=":"+c}var f=this.end.toString(a);return s.end&&(f="("+f+")"),u+=":"+f,u}toJSON(){return{mathjs:dm,start:this.start,end:this.end,step:this.step}}static fromJSON(a){return new r(a.start,a.end,a.step)}_toHTML(a){var o=a&&a.parenthesis?a.parenthesis:"keep",s=n(this,o,a&&a.implicit),u,l=this.start.toHTML(a);if(s.start&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u=l,this.step){var c=this.step.toHTML(a);s.step&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u+='<span class="math-operator math-range-operator">:</span>'+c}var f=this.end.toHTML(a);return s.end&&(f='<span class="math-parenthesis math-round-parenthesis">(</span>'+f+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u+='<span class="math-operator math-range-operator">:</span>'+f,u}_toTex(a){var o=a&&a.parenthesis?a.parenthesis:"keep",s=n(this,o,a&&a.implicit),u=this.start.toTex(a);if(s.start&&(u="\\left(".concat(u,"\\right)")),this.step){var l=this.step.toTex(a);s.step&&(l="\\left(".concat(l,"\\right)")),u+=":"+l}var c=this.end.toTex(a);return s.end&&(c="\\left(".concat(c,"\\right)")),u+=":"+c,u}}return Pn(r,"name",dm),r},{isClass:!0,isNode:!0}),hm="RelationalNode",Fte=["Node"],Pte=z(hm,Fte,t=>{var{Node:e}=t,n={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="};class r extends e{constructor(a,o){if(super(),!Array.isArray(a))throw new TypeError("Parameter conditionals must be an array");if(!Array.isArray(o))throw new TypeError("Parameter params must be an array");if(a.length!==o.length-1)throw new TypeError("Parameter params must contain exactly one more element than parameter conditionals");this.conditionals=a,this.params=o}get type(){return hm}get isRelationalNode(){return!0}_compile(a,o){var s=this,u=this.params.map(l=>l._compile(a,o));return function(c,f,d){for(var h,p=u[0](c,f,d),m=0;m<s.conditionals.length;m++){h=p,p=u[m+1](c,f,d);var g=Wr(a,s.conditionals[m]);if(!g(h,p))return!1}return!0}}forEach(a){this.params.forEach((o,s)=>a(o,"params["+s+"]",this),this)}map(a){return new r(this.conditionals.slice(),this.params.map((o,s)=>this._ifNode(a(o,"params["+s+"]",this)),this))}clone(){return new r(this.conditionals,this.params)}_toString(a){for(var o=a&&a.parenthesis?a.parenthesis:"keep",s=Ht(this,o,a&&a.implicit),u=this.params.map(function(f,d){var h=Ht(f,o,a&&a.implicit);return o==="all"||h!==null&&h<=s?"("+f.toString(a)+")":f.toString(a)}),l=u[0],c=0;c<this.conditionals.length;c++)l+=" "+n[this.conditionals[c]],l+=" "+u[c+1];return l}toJSON(){return{mathjs:hm,conditionals:this.conditionals,params:this.params}}static fromJSON(a){return new r(a.conditionals,a.params)}_toHTML(a){for(var o=a&&a.parenthesis?a.parenthesis:"keep",s=Ht(this,o,a&&a.implicit),u=this.params.map(function(f,d){var h=Ht(f,o,a&&a.implicit);return o==="all"||h!==null&&h<=s?'<span class="math-parenthesis math-round-parenthesis">(</span>'+f.toHTML(a)+'<span class="math-parenthesis math-round-parenthesis">)</span>':f.toHTML(a)}),l=u[0],c=0;c<this.conditionals.length;c++)l+='<span class="math-operator math-binary-operator math-explicit-binary-operator">'+Ki(n[this.conditionals[c]])+"</span>"+u[c+1];return l}_toTex(a){for(var o=a&&a.parenthesis?a.parenthesis:"keep",s=Ht(this,o,a&&a.implicit),u=this.params.map(function(f,d){var h=Ht(f,o,a&&a.implicit);return o==="all"||h!==null&&h<=s?"\\left("+f.toTex(a)+"\right)":f.toTex(a)}),l=u[0],c=0;c<this.conditionals.length;c++)l+=kt[this.conditionals[c]]+u[c+1];return l}}return Pn(r,"name",hm),r},{isClass:!0,isNode:!0}),Ote="SymbolNode",Bte=["math","?Unit","Node"],Lte=z(Ote,Bte,t=>{var{math:e,Unit:n,Node:r}=t;function i(o){return n?n.isValuelessUnit(o):!1}class a extends r{constructor(s){if(super(),typeof s!="string")throw new TypeError('String expected for parameter "name"');this.name=s}get type(){return"SymbolNode"}get isSymbolNode(){return!0}_compile(s,u){var l=this.name;if(u[l]===!0)return function(f,d,h){return Wr(d,l)};if(l in s)return function(f,d,h){return f.has(l)?f.get(l):Wr(s,l)};var c=i(l);return function(f,d,h){return f.has(l)?f.get(l):c?new n(null,l):a.onUndefinedSymbol(l)}}forEach(s){}map(s){return this.clone()}static onUndefinedSymbol(s){throw new Error("Undefined symbol "+s)}clone(){return new a(this.name)}_toString(s){return this.name}_toHTML(s){var u=Ki(this.name);return u==="true"||u==="false"?'<span class="math-symbol math-boolean">'+u+"</span>":u==="i"?'<span class="math-symbol math-imaginary-symbol">'+u+"</span>":u==="Infinity"?'<span class="math-symbol math-infinity-symbol">'+u+"</span>":u==="NaN"?'<span class="math-symbol math-nan-symbol">'+u+"</span>":u==="null"?'<span class="math-symbol math-null-symbol">'+u+"</span>":u==="undefined"?'<span class="math-symbol math-undefined-symbol">'+u+"</span>":'<span class="math-symbol">'+u+"</span>"}toJSON(){return{mathjs:"SymbolNode",name:this.name}}static fromJSON(s){return new a(s.name)}_toTex(s){var u=!1;typeof e[this.name]>"u"&&i(this.name)&&(u=!0);var l=lB(this.name,u);return l[0]==="\\"?l:" "+l}}return a},{isClass:!0,isNode:!0}),pm="FunctionNode",jte=["math","Node","SymbolNode"],$te=z(pm,jte,t=>{var e,{math:n,Node:r,SymbolNode:i}=t,a=u=>xt(u,{truncate:78});function o(u,l,c){for(var f="",d=/\$(?:\{([a-z_][a-z_0-9]*)(?:\[([0-9]+)\])?\}|\$)/gi,h=0,p;(p=d.exec(u))!==null;)if(f+=u.substring(h,p.index),h=p.index,p[0]==="$$")f+="$",h++;else{h+=p[0].length;var m=l[p[1]];if(!m)throw new ReferenceError("Template: Property "+p[1]+" does not exist.");if(p[2]===void 0)switch(typeof m){case"string":f+=m;break;case"object":if(Ut(m))f+=m.toTex(c);else if(Array.isArray(m))f+=m.map(function(g,v){if(Ut(g))return g.toTex(c);throw new TypeError("Template: "+p[1]+"["+v+"] is not a Node.")}).join(",");else throw new TypeError("Template: "+p[1]+" has to be a Node, String or array of Nodes");break;default:throw new TypeError("Template: "+p[1]+" has to be a Node, String or array of Nodes")}else if(Ut(m[p[2]]&&m[p[2]]))f+=m[p[2]].toTex(c);else throw new TypeError("Template: "+p[1]+"["+p[2]+"] is not a Node.")}return f+=u.slice(h),f}class s extends r{constructor(l,c){if(super(),typeof l=="string"&&(l=new i(l)),!Ut(l))throw new TypeError('Node expected as parameter "fn"');if(!Array.isArray(c)||!c.every(Ut))throw new TypeError('Array containing Nodes expected for parameter "args"');this.fn=l,this.args=c||[]}get name(){return this.fn.name||""}get type(){return pm}get isFunctionNode(){return!0}_compile(l,c){var f=this.args.map(C=>C._compile(l,c));if(rr(this.fn)){var d=this.fn.name;if(c[d]){var v=this.args;return function(N,D,A){var T=Wr(D,d);if(typeof T!="function")throw new TypeError("Argument '".concat(d,"' was not a function; received: ").concat(a(T)));if(T.rawArgs)return T(v,l,xd(N,D));var k=f.map(F=>F(N,D,A));return T.apply(T,k)}}else{var h=d in l?Wr(l,d):void 0,p=typeof h=="function"&&h.rawArgs===!0,m=C=>{var N;if(C.has(d))N=C.get(d);else if(d in l)N=Wr(l,d);else return s.onUndefinedFunction(d);if(typeof N=="function")return N;throw new TypeError("'".concat(d,`' is not a function; its value is:
  `).concat(a(N)))};if(p){var g=this.args;return function(N,D,A){var T=m(N);if(T.rawArgs===!0)return T(g,l,xd(N,D));var k=f.map(F=>F(N,D,A));return T(...k)}}else switch(f.length){case 0:return function(N,D,A){var T=m(N);return T()};case 1:return function(N,D,A){var T=m(N),k=f[0];return T(k(N,D,A))};case 2:return function(N,D,A){var T=m(N),k=f[0],F=f[1];return T(k(N,D,A),F(N,D,A))};default:return function(N,D,A){var T=m(N),k=f.map(F=>F(N,D,A));return T(...k)}}}}else if(rl(this.fn)&&_f(this.fn.index)&&this.fn.index.isObjectProperty()){var x=this.fn.object._compile(l,c),y=this.fn.index.getObjectProperty(),b=this.args;return function(N,D,A){var T=x(N,D,A),k=hV(T,y);if(k!=null&&k.rawArgs)return k(b,l,xd(N,D));var F=f.map(O=>O(N,D,A));return k.apply(T,F)}}else{var w=this.fn.toString(),_=this.fn._compile(l,c),E=this.args;return function(N,D,A){var T=_(N,D,A);if(typeof T!="function")throw new TypeError("Expression '".concat(w,"' did not evaluate to a function; value is:")+`
  `.concat(a(T)));if(T.rawArgs)return T(E,l,xd(N,D));var k=f.map(F=>F(N,D,A));return T.apply(T,k)}}}forEach(l){l(this.fn,"fn",this);for(var c=0;c<this.args.length;c++)l(this.args[c],"args["+c+"]",this)}map(l){for(var c=this._ifNode(l(this.fn,"fn",this)),f=[],d=0;d<this.args.length;d++)f[d]=this._ifNode(l(this.args[d],"args["+d+"]",this));return new s(c,f)}clone(){return new s(this.fn,this.args.slice(0))}toString(l){var c,f=this.fn.toString(l);return l&&typeof l.handler=="object"&&Ue(l.handler,f)&&(c=l.handler[f](this,l)),typeof c<"u"?c:super.toString(l)}_toString(l){var c=this.args.map(function(d){return d.toString(l)}),f=Xh(this.fn)?"("+this.fn.toString(l)+")":this.fn.toString(l);return f+"("+c.join(", ")+")"}toJSON(){return{mathjs:pm,fn:this.fn,args:this.args}}_toHTML(l){var c=this.args.map(function(f){return f.toHTML(l)});return'<span class="math-function">'+Ki(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+c.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}toTex(l){var c;return l&&typeof l.handler=="object"&&Ue(l.handler,this.name)&&(c=l.handler[this.name](this,l)),typeof c<"u"?c:super.toTex(l)}_toTex(l){var c=this.args.map(function(h){return h.toTex(l)}),f;V3[this.name]&&(f=V3[this.name]),n[this.name]&&(typeof n[this.name].toTex=="function"||typeof n[this.name].toTex=="object"||typeof n[this.name].toTex=="string")&&(f=n[this.name].toTex);var d;switch(typeof f){case"function":d=f(this,l);break;case"string":d=o(f,this,l);break;case"object":switch(typeof f[c.length]){case"function":d=f[c.length](this,l);break;case"string":d=o(f[c.length],this,l);break}}return typeof d<"u"?d:o(xte,this,l)}getIdentifier(){return this.type+":"+this.name}}return e=s,Pn(s,"name",pm),Pn(s,"onUndefinedFunction",function(u){throw new Error("Undefined function "+u)}),Pn(s,"fromJSON",function(u){return new e(u.fn,u.args)}),s},{isClass:!0,isNode:!0}),H3="parse",zte=["typed","numeric","config","AccessorNode","ArrayNode","AssignmentNode","BlockNode","ConditionalNode","ConstantNode","FunctionAssignmentNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","RangeNode","RelationalNode","SymbolNode"],Ute=z(H3,zte,t=>{var{typed:e,numeric:n,config:r,AccessorNode:i,ArrayNode:a,AssignmentNode:o,BlockNode:s,ConditionalNode:u,ConstantNode:l,FunctionAssignmentNode:c,FunctionNode:f,IndexNode:d,ObjectNode:h,OperatorNode:p,ParenthesisNode:m,RangeNode:g,RelationalNode:v,SymbolNode:x}=t,y=e(H3,{string:function(J){return K(J,{})},"Array | Matrix":function(J){return b(J,{})},"string, Object":function(J,me){var Se=me.nodes!==void 0?me.nodes:{};return K(J,Se)},"Array | Matrix, Object":b});function b(P){var J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},me=J.nodes!==void 0?J.nodes:{};return pt(P,function(Se){if(typeof Se!="string")throw new TypeError("String expected");return K(Se,me)})}var w={NULL:0,DELIMITER:1,NUMBER:2,SYMBOL:3,UNKNOWN:4},_={",":!0,"(":!0,")":!0,"[":!0,"]":!0,"{":!0,"}":!0,'"':!0,"'":!0,";":!0,"+":!0,"-":!0,"*":!0,".*":!0,"/":!0,"./":!0,"%":!0,"^":!0,".^":!0,"~":!0,"!":!0,"&":!0,"|":!0,"^|":!0,"=":!0,":":!0,"?":!0,"==":!0,"!=":!0,"<":!0,">":!0,"<=":!0,">=":!0,"<<":!0,">>":!0,">>>":!0},E={mod:!0,to:!0,in:!0,and:!0,xor:!0,or:!0,not:!0},C={true:!0,false:!1,null:null,undefined:void 0},N=["NaN","Infinity"],D={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function A(){return{extraNodes:{},expression:"",comment:"",index:0,token:"",tokenType:w.NULL,nestingLevel:0,conditionalLevel:null}}function T(P,J){return P.expression.substr(P.index,J)}function k(P){return T(P,1)}function F(P){P.index++}function O(P){return P.expression.charAt(P.index-1)}function I(P){return P.expression.charAt(P.index+1)}function M(P){for(P.tokenType=w.NULL,P.token="",P.comment="";;){if(k(P)==="#")for(;k(P)!==`
`&&k(P)!=="";)P.comment+=k(P),F(P);if(y.isWhitespace(k(P),P.nestingLevel))F(P);else break}if(k(P)===""){P.tokenType=w.DELIMITER;return}if(k(P)===`
`&&!P.nestingLevel){P.tokenType=w.DELIMITER,P.token=k(P),F(P);return}var J=k(P),me=T(P,2),Se=T(P,3);if(Se.length===3&&_[Se]){P.tokenType=w.DELIMITER,P.token=Se,F(P),F(P),F(P);return}if(me.length===2&&_[me]){P.tokenType=w.DELIMITER,P.token=me,F(P),F(P);return}if(_[J]){P.tokenType=w.DELIMITER,P.token=J,F(P);return}if(y.isDigitDot(J)){P.tokenType=w.NUMBER;var et=T(P,2);if(et==="0b"||et==="0o"||et==="0x"){for(P.token+=k(P),F(P),P.token+=k(P),F(P);y.isHexDigit(k(P));)P.token+=k(P),F(P);if(k(P)===".")for(P.token+=".",F(P);y.isHexDigit(k(P));)P.token+=k(P),F(P);else if(k(P)==="i")for(P.token+="i",F(P);y.isDigit(k(P));)P.token+=k(P),F(P);return}if(k(P)==="."){if(P.token+=k(P),F(P),!y.isDigit(k(P))){P.tokenType=w.DELIMITER;return}}else{for(;y.isDigit(k(P));)P.token+=k(P),F(P);y.isDecimalMark(k(P),I(P))&&(P.token+=k(P),F(P))}for(;y.isDigit(k(P));)P.token+=k(P),F(P);if(k(P)==="E"||k(P)==="e"){if(y.isDigit(I(P))||I(P)==="-"||I(P)==="+"){if(P.token+=k(P),F(P),(k(P)==="+"||k(P)==="-")&&(P.token+=k(P),F(P)),!y.isDigit(k(P)))throw Xe(P,'Digit expected, got "'+k(P)+'"');for(;y.isDigit(k(P));)P.token+=k(P),F(P);if(y.isDecimalMark(k(P),I(P)))throw Xe(P,'Digit expected, got "'+k(P)+'"')}else if(y.isDecimalMark(I(P),P.expression.charAt(P.index+2)))throw F(P),Xe(P,'Digit expected, got "'+k(P)+'"')}return}if(y.isAlpha(k(P),O(P),I(P))){for(;y.isAlpha(k(P),O(P),I(P))||y.isDigit(k(P));)P.token+=k(P),F(P);Ue(E,P.token)?P.tokenType=w.DELIMITER:P.tokenType=w.SYMBOL;return}for(P.tokenType=w.UNKNOWN;k(P)!=="";)P.token+=k(P),F(P);throw Xe(P,'Syntax error in part "'+P.token+'"')}function B(P){do M(P);while(P.token===`
`)}function R(P){P.nestingLevel++}function j(P){P.nestingLevel--}y.isAlpha=function(J,me,Se){return y.isValidLatinOrGreek(J)||y.isValidMathSymbol(J,Se)||y.isValidMathSymbol(me,J)},y.isValidLatinOrGreek=function(J){return/^[a-zA-Z_$\u00C0-\u02AF\u0370-\u03FF\u2100-\u214F]$/.test(J)},y.isValidMathSymbol=function(J,me){return/^[\uD835]$/.test(J)&&/^[\uDC00-\uDFFF]$/.test(me)&&/^[^\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]$/.test(me)},y.isWhitespace=function(J,me){return J===" "||J==="	"||J===`
`&&me>0},y.isDecimalMark=function(J,me){return J==="."&&me!=="/"&&me!=="*"&&me!=="^"},y.isDigitDot=function(J){return J>="0"&&J<="9"||J==="."},y.isDigit=function(J){return J>="0"&&J<="9"},y.isHexDigit=function(J){return J>="0"&&J<="9"||J>="a"&&J<="f"||J>="A"&&J<="F"};function K(P,J){var me=A();jn(me,{expression:P,extraNodes:J}),M(me);var Se=V(me);if(me.token!=="")throw me.tokenType===w.DELIMITER?Lt(me,"Unexpected operator "+me.token):Xe(me,'Unexpected part "'+me.token+'"');return Se}function V(P){var J,me=[],Se;for(P.token!==""&&P.token!==`
`&&P.token!==";"&&(J=L(P),P.comment&&(J.comment=P.comment));P.token===`
`||P.token===";";)me.length===0&&J&&(Se=P.token!==";",me.push({node:J,visible:Se})),M(P),P.token!==`
`&&P.token!==";"&&P.token!==""&&(J=L(P),P.comment&&(J.comment=P.comment),Se=P.token!==";",me.push({node:J,visible:Se}));return me.length>0?new s(me):(J||(J=new l(void 0),P.comment&&(J.comment=P.comment)),J)}function L(P){var J,me,Se,et,ft=ne(P);if(P.token==="="){if(rr(ft))return J=ft.name,B(P),Se=L(P),new o(new x(J),Se);if(rl(ft))return B(P),Se=L(P),new o(ft.object,ft.index,Se);if(qs(ft)&&rr(ft.fn)&&(et=!0,me=[],J=ft.name,ft.args.forEach(function($r,Ay){rr($r)?me[Ay]=$r.name:et=!1}),et))return B(P),Se=L(P),new c(J,me,Se);throw Xe(P,"Invalid left hand side of assignment operator =")}return ft}function ne(P){for(var J=fe(P);P.token==="?";){var me=P.conditionalLevel;P.conditionalLevel=P.nestingLevel,B(P);var Se=J,et=L(P);if(P.token!==":")throw Xe(P,"False part of conditional expression expected");P.conditionalLevel=null,B(P);var ft=L(P);J=new u(Se,et,ft),P.conditionalLevel=me}return J}function fe(P){for(var J=te(P);P.token==="or";)B(P),J=new p("or","or",[J,te(P)]);return J}function te(P){for(var J=oe(P);P.token==="xor";)B(P),J=new p("xor","xor",[J,oe(P)]);return J}function oe(P){for(var J=H(P);P.token==="and";)B(P),J=new p("and","and",[J,H(P)]);return J}function H(P){for(var J=U(P);P.token==="|";)B(P),J=new p("|","bitOr",[J,U(P)]);return J}function U(P){for(var J=Q(P);P.token==="^|";)B(P),J=new p("^|","bitXor",[J,Q(P)]);return J}function Q(P){for(var J=re(P);P.token==="&";)B(P),J=new p("&","bitAnd",[J,re(P)]);return J}function re(P){for(var J=[ie(P)],me=[],Se={"==":"equal","!=":"unequal","<":"smaller",">":"larger","<=":"smallerEq",">=":"largerEq"};Ue(Se,P.token);){var et={name:P.token,fn:Se[P.token]};me.push(et),B(P),J.push(ie(P))}return J.length===1?J[0]:J.length===2?new p(me[0].name,me[0].fn,J):new v(me.map(ft=>ft.fn),J)}function ie(P){var J,me,Se,et;J=de(P);for(var ft={"<<":"leftShift",">>":"rightArithShift",">>>":"rightLogShift"};Ue(ft,P.token);)me=P.token,Se=ft[me],B(P),et=[J,de(P)],J=new p(me,Se,et);return J}function de(P){var J,me,Se,et;J=he(P);for(var ft={to:"to",in:"to"};Ue(ft,P.token);)me=P.token,Se=ft[me],B(P),me==="in"&&P.token===""?J=new p("*","multiply",[J,new x("in")],!0):(et=[J,he(P)],J=new p(me,Se,et));return J}function he(P){var J,me=[];if(P.token===":"?J=new l(1):J=$(P),P.token===":"&&P.conditionalLevel!==P.nestingLevel){for(me.push(J);P.token===":"&&me.length<3;)B(P),P.token===")"||P.token==="]"||P.token===","||P.token===""?me.push(new x("end")):me.push($(P));me.length===3?J=new g(me[0],me[2],me[1]):J=new g(me[0],me[1])}return J}function $(P){var J,me,Se,et;J=G(P);for(var ft={"+":"add","-":"subtract"};Ue(ft,P.token);){me=P.token,Se=ft[me],B(P);var $r=G(P);$r.isPercentage?et=[J,new p("*","multiply",[J,$r])]:et=[J,$r],J=new p(me,Se,et)}return J}function G(P){var J,me,Se,et;J=ue(P),me=J;for(var ft={"*":"multiply",".*":"dotMultiply","/":"divide","./":"dotDivide","%":"mod",mod:"mod"};Ue(ft,P.token);)if(Se=P.token,et=ft[Se],B(P),Se==="%"&&P.tokenType===w.DELIMITER&&P.token!=="(")if(P.token!==""&&ft[P.token]){var $r=new p("/","divide",[J,new l(100)],!1,!0);Se=P.token,et=ft[Se],B(P),me=ue(P),J=new p(Se,et,[$r,me])}else J=new p("/","divide",[J,new l(100)],!1,!0);else me=ue(P),J=new p(Se,et,[J,me]);return J}function ue(P){var J,me;for(J=ce(P),me=J;P.tokenType===w.SYMBOL||P.token==="in"&&At(J)||P.token==="in"&&Tn(J)&&J.fn==="unaryMinus"&&At(J.args[0])||P.tokenType===w.NUMBER&&!At(me)&&(!Tn(me)||me.op==="!")||P.token==="(";)me=ce(P),J=new p("*","multiply",[J,me],!0);return J}function ce(P){for(var J=ge(P),me=J,Se=[];P.token==="/"&&db(me);)if(Se.push(jn({},P)),B(P),P.tokenType===w.NUMBER)if(Se.push(jn({},P)),B(P),P.tokenType===w.SYMBOL||P.token==="("||P.token==="in")jn(P,Se.pop()),Se.pop(),me=ge(P),J=new p("/","divide",[J,me]);else{Se.pop(),jn(P,Se.pop());break}else{jn(P,Se.pop());break}return J}function ge(P){var J,me,Se,et={"-":"unaryMinus","+":"unaryPlus","~":"bitNot",not:"not"};return Ue(et,P.token)?(Se=et[P.token],J=P.token,B(P),me=[ge(P)],new p(J,Se,me)):Ce(P)}function Ce(P){var J,me,Se,et;return J=Ae(P),(P.token==="^"||P.token===".^")&&(me=P.token,Se=me==="^"?"pow":"dotPow",B(P),et=[J,ge(P)],J=new p(me,Se,et)),J}function Ae(P){var J,me,Se,et;J=Pe(P);for(var ft={"!":"factorial","'":"ctranspose"};Ue(ft,P.token);)me=P.token,Se=ft[me],M(P),et=[J],J=new p(me,Se,et),J=ee(P,J);return J}function Pe(P){var J=[];if(P.tokenType===w.SYMBOL&&Ue(P.extraNodes,P.token)){var me=P.extraNodes[P.token];if(M(P),P.token==="("){if(J=[],R(P),M(P),P.token!==")")for(J.push(L(P));P.token===",";)M(P),J.push(L(P));if(P.token!==")")throw Xe(P,"Parenthesis ) expected");j(P),M(P)}return new me(J)}return q(P)}function q(P){var J,me;return P.tokenType===w.SYMBOL||P.tokenType===w.DELIMITER&&P.token in E?(me=P.token,M(P),Ue(C,me)?J=new l(C[me]):N.includes(me)?J=new l(n(me,"number")):J=new x(me),J=ee(P,J),J):le(P)}function ee(P,J,me){for(var Se;(P.token==="("||P.token==="["||P.token===".")&&!me;)if(Se=[],P.token==="(")if(rr(J)||rl(J)){if(R(P),M(P),P.token!==")")for(Se.push(L(P));P.token===",";)M(P),Se.push(L(P));if(P.token!==")")throw Xe(P,"Parenthesis ) expected");j(P),M(P),J=new f(J,Se)}else return J;else if(P.token==="["){if(R(P),M(P),P.token!=="]")for(Se.push(L(P));P.token===",";)M(P),Se.push(L(P));if(P.token!=="]")throw Xe(P,"Parenthesis ] expected");j(P),M(P),J=new i(J,new d(Se))}else{M(P);var et=P.tokenType===w.SYMBOL||P.tokenType===w.DELIMITER&&P.token in E;if(!et)throw Xe(P,"Property name expected after dot");Se.push(new l(P.token)),M(P);var ft=!0;J=new i(J,new d(Se,ft))}return J}function le(P){var J,me;return P.token==='"'||P.token==="'"?(me=pe(P,P.token),J=new l(me),J=ee(P,J),J):be(P)}function pe(P,J){for(var me="";k(P)!==""&&k(P)!==J;)if(k(P)==="\\"){F(P);var Se=k(P),et=D[Se];if(et!==void 0)me+=et,P.index+=1;else if(Se==="u"){var ft=P.expression.slice(P.index+1,P.index+5);if(/^[0-9A-Fa-f]{4}$/.test(ft))me+=String.fromCharCode(parseInt(ft,16)),P.index+=5;else throw Xe(P,"Invalid unicode character \\u".concat(ft))}else throw Xe(P,"Bad escape character \\".concat(Se))}else me+=k(P),F(P);if(M(P),P.token!==J)throw Xe(P,"End of string ".concat(J," expected"));return M(P),me}function be(P){var J,me,Se,et;if(P.token==="["){if(R(P),M(P),P.token!=="]"){var ft=xe(P);if(P.token===";"){for(Se=1,me=[ft];P.token===";";)M(P),P.token!=="]"&&(me[Se]=xe(P),Se++);if(P.token!=="]")throw Xe(P,"End of matrix ] expected");j(P),M(P),et=me[0].items.length;for(var $r=1;$r<Se;$r++)if(me[$r].items.length!==et)throw Lt(P,"Column dimensions mismatch ("+me[$r].items.length+" !== "+et+")");J=new a(me)}else{if(P.token!=="]")throw Xe(P,"End of matrix ] expected");j(P),M(P),J=ft}}else j(P),M(P),J=new a([]);return ee(P,J)}return Fe(P)}function xe(P){for(var J=[L(P)],me=1;P.token===",";)M(P),P.token!=="]"&&P.token!==";"&&(J[me]=L(P),me++);return new a(J)}function Fe(P){if(P.token==="{"){R(P);var J,me={};do if(M(P),P.token!=="}"){if(P.token==='"'||P.token==="'")J=pe(P,P.token);else if(P.tokenType===w.SYMBOL||P.tokenType===w.DELIMITER&&P.token in E)J=P.token,M(P);else throw Xe(P,"Symbol or string expected as object key");if(P.token!==":")throw Xe(P,"Colon : expected after object key");M(P),me[J]=L(P)}while(P.token===",");if(P.token!=="}")throw Xe(P,"Comma , or bracket } expected after object value");j(P),M(P);var Se=new h(me);return Se=ee(P,Se),Se}return Te(P)}function Te(P){var J;if(P.tokenType===w.NUMBER){J=P.token,M(P);var me=au(J,r),Se=n(J,me);return new l(Se)}return Oe(P)}function Oe(P){var J;if(P.token==="("){if(R(P),M(P),J=L(P),P.token!==")")throw Xe(P,"Parenthesis ) expected");return j(P),M(P),J=new m(J),J=ee(P,J),J}return Me(P)}function Me(P){throw P.token===""?Xe(P,"Unexpected end of expression"):Xe(P,"Value expected")}function Et(P){return P.index-P.token.length+1}function Xe(P,J){var me=Et(P),Se=new SyntaxError(J+" (char "+me+")");return Se.char=me,Se}function Lt(P,J){var me=Et(P),Se=new SyntaxError(J+" (char "+me+")");return Se.char=me,Se}return e.addConversion({from:"string",to:"Node",convert:y}),y}),G3="compile",Wte=["typed","parse"],Vte=z(G3,Wte,t=>{var{typed:e,parse:n}=t;return e(G3,{string:function(i){return n(i).compile()},"Array | Matrix":function(i){return pt(i,function(a){return n(a).compile()})}})}),K3="evaluate",qte=["typed","parse"],Hte=z(K3,qte,t=>{var{typed:e,parse:n}=t;return e(K3,{string:function(i){var a=mh();return n(i).compile().evaluate(a)},"string, Map | Object":function(i,a){return n(i).compile().evaluate(a)},"Array | Matrix":function(i){var a=mh();return pt(i,function(o){return n(o).compile().evaluate(a)})},"Array | Matrix, Map | Object":function(i,a){return pt(i,function(o){return n(o).compile().evaluate(a)})}})}),Gte="Parser",Kte=["evaluate","parse"],Yte=z(Gte,Kte,t=>{var{evaluate:e,parse:n}=t;function r(){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");Object.defineProperty(this,"scope",{value:mh(),writable:!1})}r.prototype.type="Parser",r.prototype.isParser=!0,r.prototype.evaluate=function(a){return e(a,this.scope)},r.prototype.get=function(a){if(this.scope.has(a))return this.scope.get(a)},r.prototype.getAll=function(){return gV(this.scope)},r.prototype.getAllAsMap=function(){return this.scope};function i(a){if(a.length===0)return!1;for(var o=0;o<a.length;o++){var s=a.charAt(o-1),u=a.charAt(o),l=a.charAt(o+1),c=n.isAlpha(u,s,l)||o>0&&n.isDigit(u);if(!c)return!1}return!0}return r.prototype.set=function(a,o){if(!i(a))throw new Error("Invalid variable name: '".concat(a,"'. Variable names must follow the specified rules."));return this.scope.set(a,o),o},r.prototype.remove=function(a){this.scope.delete(a)},r.prototype.clear=function(){this.scope.clear()},r},{isClass:!0}),Y3="parser",Xte=["typed","Parser"],Qte=z(Y3,Xte,t=>{var{typed:e,Parser:n}=t;return e(Y3,{"":function(){return new n}})}),X3="lup",Zte=["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtractScalar","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],Jte=z(X3,Zte,t=>{var{typed:e,matrix:n,abs:r,addScalar:i,divideScalar:a,multiplyScalar:o,subtractScalar:s,larger:u,equalScalar:l,unaryMinus:c,DenseMatrix:f,SparseMatrix:d,Spa:h}=t;return e(X3,{DenseMatrix:function(v){return p(v)},SparseMatrix:function(v){return m(v)},Array:function(v){var x=n(v),y=p(x);return{L:y.L.valueOf(),U:y.U.valueOf(),p:y.p}}});function p(g){var v=g._size[0],x=g._size[1],y=Math.min(v,x),b=ut(g._data),w=[],_=[v,y],E=[],C=[y,x],N,D,A,T=[];for(N=0;N<v;N++)T[N]=N;for(D=0;D<x;D++){if(D>0)for(N=0;N<v;N++){var k=Math.min(N,D),F=0;for(A=0;A<k;A++)F=i(F,o(b[N][A],b[A][D]));b[N][D]=s(b[N][D],F)}var O=D,I=0,M=0;for(N=D;N<v;N++){var B=b[N][D],R=r(B);u(R,I)&&(O=N,I=R,M=B)}if(D!==O&&(T[D]=[T[O],T[O]=T[D]][0],f._swapRows(D,O,b)),D<v)for(N=D+1;N<v;N++){var j=b[N][D];l(j,0)||(b[N][D]=a(b[N][D],M))}}for(D=0;D<x;D++)for(N=0;N<v;N++){if(D===0&&(N<x&&(E[N]=[]),w[N]=[]),N<D){N<x&&(E[N][D]=b[N][D]),D<v&&(w[N][D]=0);continue}if(N===D){N<x&&(E[N][D]=b[N][D]),D<v&&(w[N][D]=1);continue}N<x&&(E[N][D]=0),D<v&&(w[N][D]=b[N][D])}var K=new f({data:w,size:_}),V=new f({data:E,size:C}),L=[];for(N=0,y=T.length;N<y;N++)L[T[N]]=N;return{L:K,U:V,p:L,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}function m(g){var v=g._size[0],x=g._size[1],y=Math.min(v,x),b=g._values,w=g._index,_=g._ptr,E=[],C=[],N=[],D=[v,y],A=[],T=[],k=[],F=[y,x],O,I,M,B=[],R=[];for(O=0;O<v;O++)B[O]=O,R[O]=O;var j=function(L,ne){var fe=R[L],te=R[ne];B[fe]=ne,B[te]=L,R[L]=te,R[ne]=fe},K=function(){var L=new h;I<v&&(N.push(E.length),E.push(1),C.push(I)),k.push(A.length);var ne=_[I],fe=_[I+1];for(M=ne;M<fe;M++)O=w[M],L.set(B[O],b[M]);I>0&&L.forEach(0,I-1,function(U,Q){d._forEachRow(U,E,C,N,function(re,ie){re>U&&L.accumulate(re,c(o(ie,Q)))})});var te=I,oe=L.get(I),H=r(oe);L.forEach(I+1,v-1,function(U,Q){var re=r(Q);u(re,H)&&(te=U,H=re,oe=Q)}),I!==te&&(d._swapRows(I,te,D[1],E,C,N),d._swapRows(I,te,F[1],A,T,k),L.swap(I,te),j(I,te)),L.forEach(0,v-1,function(U,Q){U<=I?(A.push(Q),T.push(U)):(Q=a(Q,oe),l(Q,0)||(E.push(Q),C.push(U)))})};for(I=0;I<x;I++)K();return k.push(A.length),N.push(E.length),{L:new d({values:E,index:C,ptr:N,size:D}),U:new d({values:A,index:T,ptr:k,size:F}),p:B,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}}),Q3="qr",ene=["typed","matrix","zeros","identity","isZero","equal","sign","sqrt","conj","unaryMinus","addScalar","divideScalar","multiplyScalar","subtractScalar","complex"],tne=z(Q3,ene,t=>{var{typed:e,matrix:n,zeros:r,identity:i,isZero:a,equal:o,sign:s,sqrt:u,conj:l,unaryMinus:c,addScalar:f,divideScalar:d,multiplyScalar:h,subtractScalar:p,complex:m}=t;return jn(e(Q3,{DenseMatrix:function(b){return v(b)},SparseMatrix:function(b){return x()},Array:function(b){var w=n(b),_=v(w);return{Q:_.Q.valueOf(),R:_.R.valueOf()}}}),{_denseQRimpl:g});function g(y){var b=y._size[0],w=y._size[1],_=i([b],"dense"),E=_._data,C=y.clone(),N=C._data,D,A,T,k=r([b],"");for(T=0;T<Math.min(w,b);++T){var F=N[T][T],O=c(o(F,0)?1:s(F)),I=l(O),M=0;for(D=T;D<b;D++)M=f(M,h(N[D][T],l(N[D][T])));var B=h(O,u(M));if(!a(B)){var R=p(F,B);for(k[T]=1,D=T+1;D<b;D++)k[D]=d(N[D][T],R);var j=c(l(d(R,B))),K=void 0;for(A=T;A<w;A++){for(K=0,D=T;D<b;D++)K=f(K,h(l(k[D]),N[D][A]));for(K=h(K,j),D=T;D<b;D++)N[D][A]=h(p(N[D][A],h(k[D],K)),I)}for(D=0;D<b;D++){for(K=0,A=T;A<b;A++)K=f(K,h(E[D][A],k[A]));for(K=h(K,j),A=T;A<b;++A)E[D][A]=d(p(E[D][A],h(K,l(k[A]))),I)}}}return{Q:_,R:C,toString:function(){return"Q: "+this.Q.toString()+`
R: `+this.R.toString()}}}function v(y){var b=g(y),w=b.R._data;if(y._data.length>0)for(var _=w[0][0].type==="Complex"?m(0):0,E=0;E<w.length;++E)for(var C=0;C<E&&C<(w[0]||[]).length;++C)w[E][C]=_;return b}function x(y){throw new Error("qr not implemented for sparse matrices yet")}});function nne(t,e,n,r){t._values;for(var i=t._index,a=t._ptr,o=t._size,s=t._datatype,u=o[0],l=o[1],c=null,f=[],d=[],h=0,p=0;p<l;p++){d[p]=h;for(var m=n?n[p]:p,g=a[m],v=a[m+1],x=g;x<v;x++){var y=i[x];f[h]=y,h++}}return d[l]=h,t.createSparseMatrix({values:c,index:f,ptr:d,size:[u,l],datatype:s})}function cB(t,e,n,r,i,a,o){var s=0;for(n[o]=t;s>=0;){var u=n[o+s],l=n[r+u];l===-1?(s--,a[e++]=u):(n[r+u]=n[i+l],++s,n[o+s]=l)}return e}function rne(t,e){if(!t)return null;var n=0,r,i=[],a=[],o=0,s=e,u=2*e;for(r=0;r<e;r++)a[o+r]=-1;for(r=e-1;r>=0;r--)t[r]!==-1&&(a[s+r]=a[o+t[r]],a[o+t[r]]=r);for(r=0;r<e;r++)t[r]===-1&&(n=cB(r,n,a,o,s,i,u));return i}function ine(t,e){if(!t)return null;var n=t._index,r=t._ptr,i=t._size,a=i[0],o=i[1],s=[],u=[],l=0,c=o,f,d;for(f=0;f<a;f++)u[c+f]=-1;for(var h=0;h<o;h++){s[h]=-1,u[l+h]=-1;for(var p=r[h],m=r[h+1],g=p;g<m;g++){var v=n[g];for(f=u[c+v];f!==-1&&f<h;f=d)d=u[l+f],u[l+f]=h,d===-1&&(s[f]=h);u[c+v]=h}}return s}function ane(t,e,n){for(var r=t._values,i=t._index,a=t._ptr,o=t._size,s=o[1],u=0,l=0;l<s;l++){var c=a[l];for(a[l]=u;c<a[l+1];c++)e(i[c],l,r?r[c]:1,n)&&(i[u]=i[c],r&&(r[u]=r[c]),u++)}return a[s]=u,i.splice(u,i.length-u),r&&r.splice(u,r.length-u),u}function hs(t){return-t-2}var one="csAmd",sne=["add","multiply","transpose"],une=z(one,sne,t=>{var{add:e,multiply:n,transpose:r}=t;return function(c,f){if(!f||c<=0||c>3)return null;var d=f._size,h=d[0],p=d[1],m=0,g=Math.max(16,10*Math.sqrt(p));g=Math.min(p-2,g);var v=i(c,f,h,p,g);ane(v,u,null);for(var x=v._index,y=v._ptr,b=y[p],w=[],_=[],E=0,C=p+1,N=2*(p+1),D=3*(p+1),A=4*(p+1),T=5*(p+1),k=6*(p+1),F=7*(p+1),O=w,I=a(p,y,_,E,D,O,N,F,C,k,A,T),M=o(p,y,_,T,A,k,g,C,D,O,N),B=0,R,j,K,V,L,ne,fe,te,oe,H,U,Q,re,ie,de,he;M<p;){for(K=-1;B<p&&(K=_[D+B])===-1;B++);_[N+K]!==-1&&(O[_[N+K]]=-1),_[D+B]=_[N+K];var $=_[A+K],G=_[C+K];M+=G;var ue=0;_[C+K]=-G;var ce=y[K],ge=$===0?ce:b,Ce=ge;for(V=1;V<=$+1;V++){for(V>$?(ne=K,fe=ce,te=_[E+K]-$):(ne=x[ce++],fe=y[ne],te=_[E+ne]),L=1;L<=te;L++)R=x[fe++],!((oe=_[C+R])<=0)&&(ue+=oe,_[C+R]=-oe,x[Ce++]=R,_[N+R]!==-1&&(O[_[N+R]]=O[R]),O[R]!==-1?_[N+O[R]]=_[N+R]:_[D+_[T+R]]=_[N+R]);ne!==K&&(y[ne]=hs(K),_[k+ne]=0)}for($!==0&&(b=Ce),_[T+K]=ue,y[K]=ge,_[E+K]=Ce-ge,_[A+K]=-2,I=s(I,m,_,k,p),H=ge;H<Ce;H++)if(R=x[H],!((U=_[A+R])<=0)){oe=-_[C+R];var Ae=I-oe;for(ce=y[R],Q=y[R]+U-1;ce<=Q;ce++)ne=x[ce],_[k+ne]>=I?_[k+ne]-=oe:_[k+ne]!==0&&(_[k+ne]=_[T+ne]+Ae)}for(H=ge;H<Ce;H++){for(R=x[H],Q=y[R],re=Q+_[A+R]-1,ie=Q,de=0,he=0,ce=Q;ce<=re;ce++)if(ne=x[ce],_[k+ne]!==0){var Pe=_[k+ne]-I;Pe>0?(he+=Pe,x[ie++]=ne,de+=ne):(y[ne]=hs(K),_[k+ne]=0)}_[A+R]=ie-Q+1;var q=ie,ee=Q+_[E+R];for(ce=re+1;ce<ee;ce++){j=x[ce];var le=_[C+j];le<=0||(he+=le,x[ie++]=j,de+=j)}he===0?(y[R]=hs(K),oe=-_[C+R],ue-=oe,G+=oe,M+=oe,_[C+R]=0,_[A+R]=-1):(_[T+R]=Math.min(_[T+R],he),x[ie]=x[q],x[q]=x[Q],x[Q]=K,_[E+R]=ie-Q+1,de=(de<0?-de:de)%p,_[N+R]=_[F+de],_[F+de]=R,O[R]=de)}for(_[T+K]=ue,m=Math.max(m,ue),I=s(I+m,m,_,k,p),H=ge;H<Ce;H++)if(R=x[H],!(_[C+R]>=0))for(de=O[R],R=_[F+de],_[F+de]=-1;R!==-1&&_[N+R]!==-1;R=_[N+R],I++){for(te=_[E+R],U=_[A+R],ce=y[R]+1;ce<=y[R]+te-1;ce++)_[k+x[ce]]=I;var pe=R;for(j=_[N+R];j!==-1;){var be=_[E+j]===te&&_[A+j]===U;for(ce=y[j]+1;be&&ce<=y[j]+te-1;ce++)_[k+x[ce]]!==I&&(be=0);be?(y[j]=hs(R),_[C+R]+=_[C+j],_[C+j]=0,_[A+j]=-1,j=_[N+j],_[N+pe]=j):(pe=j,j=_[N+j])}}for(ce=ge,H=ge;H<Ce;H++)R=x[H],!((oe=-_[C+R])<=0)&&(_[C+R]=oe,he=_[T+R]+ue-oe,he=Math.min(he,p-M-oe),_[D+he]!==-1&&(O[_[D+he]]=R),_[N+R]=_[D+he],O[R]=-1,_[D+he]=R,B=Math.min(B,he),_[T+R]=he,x[ce++]=R);_[C+K]=G,(_[E+K]=ce-ge)===0&&(y[K]=-1,_[k+K]=0),$!==0&&(b=ce)}for(R=0;R<p;R++)y[R]=hs(y[R]);for(j=0;j<=p;j++)_[D+j]=-1;for(j=p;j>=0;j--)_[C+j]>0||(_[N+j]=_[D+y[j]],_[D+y[j]]=j);for(ne=p;ne>=0;ne--)_[C+ne]<=0||y[ne]!==-1&&(_[N+ne]=_[D+y[ne]],_[D+y[ne]]=ne);for(K=0,R=0;R<=p;R++)y[R]===-1&&(K=cB(R,K,_,D,N,w,k));return w.splice(w.length-1,1),w};function i(l,c,f,d,h){var p=r(c);if(l===1&&d===f)return e(c,p);if(l===2){for(var m=p._index,g=p._ptr,v=0,x=0;x<f;x++){var y=g[x];if(g[x]=v,!(g[x+1]-y>h))for(var b=g[x+1];y<b;y++)m[v++]=m[y]}return g[f]=v,c=r(p),n(p,c)}return n(p,c)}function a(l,c,f,d,h,p,m,g,v,x,y,b){for(var w=0;w<l;w++)f[d+w]=c[w+1]-c[w];f[d+l]=0;for(var _=0;_<=l;_++)f[h+_]=-1,p[_]=-1,f[m+_]=-1,f[g+_]=-1,f[v+_]=1,f[x+_]=1,f[y+_]=0,f[b+_]=f[d+_];var E=s(0,0,f,x,l);return f[y+l]=-2,c[l]=-1,f[x+l]=0,E}function o(l,c,f,d,h,p,m,g,v,x,y){for(var b=0,w=0;w<l;w++){var _=f[d+w];if(_===0)f[h+w]=-2,b++,c[w]=-1,f[p+w]=0;else if(_>m)f[g+w]=0,f[h+w]=-1,b++,c[w]=hs(l),f[g+l]++;else{var E=f[v+_];E!==-1&&(x[E]=w),f[y+w]=f[v+_],f[v+_]=w}}return b}function s(l,c,f,d,h){if(l<2||l+c<0){for(var p=0;p<h;p++)f[d+p]!==0&&(f[d+p]=1);l=2}return l}function u(l,c){return l!==c}});function lne(t,e,n,r,i,a,o){var s,u,l=0,c;if(t<=e||n[r+e]<=n[i+t])return-1;n[i+t]=n[r+e];var f=n[a+t];if(n[a+t]=e,f===-1)l=1,c=t;else{for(l=2,c=f;c!==n[o+c];c=n[o+c]);for(s=f;s!==c;s=u)u=n[o+s],n[o+s]=c}return{jleaf:l,q:c}}var cne="csCounts",fne=["transpose"],dne=z(cne,fne,t=>{var{transpose:e}=t;return function(n,r,i,a){if(!n||!r||!i)return null;var o=n._size,s=o[0],u=o[1],l,c,f,d,h,p,m,g=4*u+(a?u+s+1:0),v=[],x=0,y=u,b=2*u,w=3*u,_=4*u,E=5*u+1;for(f=0;f<g;f++)v[f]=-1;var C=[],N=e(n),D=N._index,A=N._ptr;for(f=0;f<u;f++)for(c=i[f],C[c]=v[w+c]===-1?1:0;c!==-1&&v[w+c]===-1;c=r[c])v[w+c]=f;if(a){for(f=0;f<u;f++)v[i[f]]=f;for(l=0;l<s;l++){for(f=u,p=A[l],m=A[l+1],h=p;h<m;h++)f=Math.min(f,v[D[h]]);v[E+l]=v[_+f],v[_+f]=l}}for(l=0;l<u;l++)v[x+l]=l;for(f=0;f<u;f++){for(c=i[f],r[c]!==-1&&C[r[c]]--,d=a?v[_+f]:c;d!==-1;d=a?v[E+d]:-1)for(h=A[d];h<A[d+1];h++){l=D[h];var T=lne(l,c,v,w,y,b,x);T.jleaf>=1&&C[c]++,T.jleaf===2&&C[T.q]--}r[c]!==-1&&(v[x+c]=r[c])}for(c=0;c<u;c++)r[c]!==-1&&(C[r[c]]+=C[c]);return C}}),hne="csSqr",pne=["add","multiply","transpose"],mne=z(hne,pne,t=>{var{add:e,multiply:n,transpose:r}=t,i=une({add:e,multiply:n,transpose:r}),a=dne({transpose:r});return function(u,l,c){var f=l._ptr,d=l._size,h=d[1],p,m={};if(m.q=i(u,l),u&&!m.q)return null;if(c){var g=u?nne(l,null,m.q):l;m.parent=ine(g);var v=rne(m.parent,h);if(m.cp=a(g,m.parent,v,1),g&&m.parent&&m.cp&&o(g,m))for(m.unz=0,p=0;p<h;p++)m.unz+=m.cp[p]}else m.unz=4*f[h]+h,m.lnz=m.unz;return m};function o(s,u){var l=s._ptr,c=s._index,f=s._size,d=f[0],h=f[1];u.pinv=[],u.leftmost=[];var p=u.parent,m=u.pinv,g=u.leftmost,v=[],x=0,y=d,b=d+h,w=d+2*h,_,E,C,N,D;for(E=0;E<h;E++)v[y+E]=-1,v[b+E]=-1,v[w+E]=0;for(_=0;_<d;_++)g[_]=-1;for(E=h-1;E>=0;E--)for(N=l[E],D=l[E+1],C=N;C<D;C++)g[c[C]]=E;for(_=d-1;_>=0;_--)m[_]=-1,E=g[_],E!==-1&&(v[w+E]++===0&&(v[b+E]=_),v[x+_]=v[y+E],v[y+E]=_);for(u.lnz=0,u.m2=d,E=0;E<h;E++)if(_=v[y+E],u.lnz++,_<0&&(_=u.m2++),m[_]=E,!(--w[E]<=0)){u.lnz+=v[w+E];var A=p[E];A!==-1&&(v[w+A]===0&&(v[b+A]=v[b+E]),v[x+v[b+E]]=v[y+A],v[y+A]=v[x+_],v[w+A]+=v[w+E])}for(_=0;_<d;_++)m[_]<0&&(m[_]=E++);return!0}});function Fb(t,e){return t[e]<0}function fB(t,e){t[e]=hs(t[e])}function Z3(t){return t<0?hs(t):t}function vne(t,e,n,r,i){var a=e._index,o=e._ptr,s=e._size,u=s[1],l,c,f,d=0;for(r[0]=t;d>=0;){t=r[d];var h=i?i[t]:t;Fb(o,t)||(fB(o,t),r[u+d]=h<0?0:Z3(o[h]));var p=1;for(c=r[u+d],f=h<0?0:Z3(o[h+1]);c<f;c++)if(l=a[c],!Fb(o,l)){r[u+d]=c,r[++d]=l,p=0;break}p&&(d--,r[--n]=t)}return n}function gne(t,e,n,r,i){var a=t._ptr,o=t._size,s=e._index,u=e._ptr,l=o[1],c,f,d,h=l;for(f=u[n],d=u[n+1],c=f;c<d;c++){var p=s[c];Fb(a,p)||(h=vne(p,t,h,r,i))}for(c=h;c<l;c++)fB(a,r[c]);return h}var yne="csSpsolve",xne=["divideScalar","multiply","subtract"],bne=z(yne,xne,t=>{var{divideScalar:e,multiply:n,subtract:r}=t;return function(a,o,s,u,l,c,f){var d=a._values,h=a._index,p=a._ptr,m=a._size,g=m[1],v=o._values,x=o._index,y=o._ptr,b,w,_,E,C=gne(a,o,s,u,c);for(b=C;b<g;b++)l[u[b]]=0;for(w=y[s],_=y[s+1],b=w;b<_;b++)l[x[b]]=v[b];for(var N=C;N<g;N++){var D=u[N],A=c?c[D]:D;if(!(A<0))for(w=p[A],_=p[A+1],l[D]=e(l[D],d[f?w:_-1]),b=f?w+1:w,E=f?_:_-1;b<E;b++){var T=h[b];l[T]=r(l[T],n(d[b],l[D]))}}return C}}),wne="csLu",_ne=["abs","divideScalar","multiply","subtract","larger","largerEq","SparseMatrix"],Ene=z(wne,_ne,t=>{var{abs:e,divideScalar:n,multiply:r,subtract:i,larger:a,largerEq:o,SparseMatrix:s}=t,u=bne({divideScalar:n,multiply:r,subtract:i});return function(c,f,d){if(!c)return null;var h=c._size,p=h[1],m,g=100,v=100;f&&(m=f.q,g=f.lnz||g,v=f.unz||v);var x=[],y=[],b=[],w=new s({values:x,index:y,ptr:b,size:[p,p]}),_=[],E=[],C=[],N=new s({values:_,index:E,ptr:C,size:[p,p]}),D=[],A,T,k=[],F=[];for(A=0;A<p;A++)k[A]=0,D[A]=-1,b[A+1]=0;g=0,v=0;for(var O=0;O<p;O++){b[O]=g,C[O]=v;var I=m?m[O]:O,M=u(w,c,I,F,k,D,1),B=-1,R=-1;for(T=M;T<p;T++)if(A=F[T],D[A]<0){var j=e(k[A]);a(j,R)&&(R=j,B=A)}else E[v]=D[A],_[v++]=k[A];if(B===-1||R<=0)return null;D[I]<0&&o(e(k[I]),r(R,d))&&(B=I);var K=k[B];for(E[v]=O,_[v++]=K,D[B]=O,y[g]=B,x[g++]=1,T=M;T<p;T++)A=F[T],D[A]<0&&(y[g]=A,x[g++]=n(k[A],K)),k[A]=0}for(b[p]=g,C[p]=v,T=0;T<g;T++)y[T]=D[y[T]];return x.splice(g,x.length-g),y.splice(g,y.length-g),_.splice(v,_.length-v),E.splice(v,E.length-v),{L:w,U:N,pinv:D}}}),J3="slu",Cne=["typed","abs","add","multiply","transpose","divideScalar","subtract","larger","largerEq","SparseMatrix"],Nne=z(J3,Cne,t=>{var{typed:e,abs:n,add:r,multiply:i,transpose:a,divideScalar:o,subtract:s,larger:u,largerEq:l,SparseMatrix:c}=t,f=mne({add:r,multiply:i,transpose:a}),d=Ene({abs:n,divideScalar:o,multiply:i,subtract:s,larger:u,largerEq:l,SparseMatrix:c});return e(J3,{"SparseMatrix, number, number":function(p,m,g){if(!qe(m)||m<0||m>3)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(g<0||g>1)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var v=f(m,p,!1),x=d(p,v,g);return{L:x.L,U:x.U,p:x.pinv,q:v.q,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
p: `+this.p.toString()+(this.q?`
q: `+this.q.toString():"")+`
`}}}})});function eT(t,e){var n,r=e.length,i=[];if(t)for(n=0;n<r;n++)i[t[n]]=e[n];else for(n=0;n<r;n++)i[n]=e[n];return i}var tT="lusolve",Sne=["typed","matrix","lup","slu","usolve","lsolve","DenseMatrix"],Dne=z(tT,Sne,t=>{var{typed:e,matrix:n,lup:r,slu:i,usolve:a,lsolve:o,DenseMatrix:s}=t,u=Zh({DenseMatrix:s});return e(tT,{"Array, Array | Matrix":function(d,h){d=n(d);var p=r(d),m=c(p.L,p.U,p.p,null,h);return m.valueOf()},"DenseMatrix, Array | Matrix":function(d,h){var p=r(d);return c(p.L,p.U,p.p,null,h)},"SparseMatrix, Array | Matrix":function(d,h){var p=r(d);return c(p.L,p.U,p.p,null,h)},"SparseMatrix, Array | Matrix, number, number":function(d,h,p,m){var g=i(d,p,m);return c(g.L,g.U,g.p,g.q,h)},"Object, Array | Matrix":function(d,h){return c(d.L,d.U,d.p,d.q,h)}});function l(f){if(Je(f))return f;if(qt(f))return n(f);throw new TypeError("Invalid Matrix LU decomposition")}function c(f,d,h,p,m){f=l(f),d=l(d),h&&(m=u(f,m,!0),m._data=eT(h,m._data));var g=o(f,m),v=a(d,g);return p&&(v._data=eT(p,v._data)),v}}),nT="polynomialRoot",Ane=["typed","isZero","equalScalar","add","subtract","multiply","divide","sqrt","unaryMinus","cbrt","typeOf","im","re"],Tne=z(nT,Ane,t=>{var{typed:e,isZero:n,equalScalar:r,add:i,subtract:a,multiply:o,divide:s,sqrt:u,unaryMinus:l,cbrt:c,typeOf:f,im:d,re:h}=t;return e(nT,{"number|Complex, ...number|Complex":(p,m)=>{for(var g=[p,...m];g.length>0&&n(g[g.length-1]);)g.pop();if(g.length<2)throw new RangeError("Polynomial [".concat(p,", ").concat(m,"] must have a non-zero non-constant coefficient"));switch(g.length){case 2:return[l(s(g[0],g[1]))];case 3:{var[v,x,y]=g,b=o(2,y),w=o(x,x),_=o(4,y,v);if(r(w,_))return[s(l(x),b)];var E=u(a(w,_));return[s(a(E,x),b),s(a(l(E),x),b)]}case 4:{var[C,N,D,A]=g,T=l(o(3,A)),k=o(D,D),F=o(3,A,N),O=i(o(2,D,D,D),o(27,A,A,C)),I=o(9,A,D,N);if(r(k,F)&&r(O,I))return[s(D,T)];var M=a(k,F),B=a(O,I),R=i(o(18,A,D,N,C),o(D,D,N,N)),j=i(o(4,D,D,D,C),o(4,A,N,N,N),o(27,A,A,C,C));if(r(R,j))return[s(a(o(4,A,D,N),i(o(9,A,A,C),o(D,D,D))),o(A,M)),s(a(o(9,A,C),o(D,N)),o(2,M))];var K;r(k,F)?K=B:K=s(i(B,u(a(o(B,B),o(4,M,M,M)))),2);var V=!0,L=c(K,V).toArray().map(ne=>s(i(D,ne,s(M,ne)),T));return L.map(ne=>f(ne)==="Complex"&&r(h(ne),h(ne)+d(ne))?h(ne):ne)}default:throw new RangeError("only implemented for cubic or lower-order polynomials, not ".concat(g))}}})}),Mne="Help",Ine=["evaluate"],Rne=z(Mne,Ine,t=>{var{evaluate:e}=t;function n(r){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(!r)throw new Error('Argument "doc" missing');this.doc=r}return n.prototype.type="Help",n.prototype.isHelp=!0,n.prototype.toString=function(){var r=this.doc||{},i=`
`;if(r.name&&(i+="Name: "+r.name+`

`),r.category&&(i+="Category: "+r.category+`

`),r.description&&(i+=`Description:
    `+r.description+`

`),r.syntax&&(i+=`Syntax:
    `+r.syntax.join(`
    `)+`

`),r.examples){i+=`Examples:
`;for(var a=!1,o=e("config()"),s={config:f=>(a=!0,e("config(newConfig)",{newConfig:f}))},u=0;u<r.examples.length;u++){var l=r.examples[u];i+="    "+l+`
`;var c=void 0;try{c=e(l,s)}catch(f){c=f}c!==void 0&&!yP(c)&&(i+="        "+xt(c,{precision:14})+`
`)}i+=`
`,a&&e("config(originalConfig)",{originalConfig:o})}return r.mayThrow&&r.mayThrow.length&&(i+="Throws: "+r.mayThrow.join(", ")+`

`),r.seealso&&r.seealso.length&&(i+="See also: "+r.seealso.join(", ")+`
`),i},n.prototype.toJSON=function(){var r=ut(this.doc);return r.mathjs="Help",r},n.fromJSON=function(r){var i={};return Object.keys(r).filter(a=>a!=="mathjs").forEach(a=>{i[a]=r[a]}),new n(i)},n.prototype.valueOf=n.prototype.toString,n},{isClass:!0}),kne="Chain",Fne=["?on","math","typed"],Pne=z(kne,Fne,t=>{var{on:e,math:n,typed:r}=t;function i(l){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");bP(l)?this.value=l.value:this.value=l}i.prototype.type="Chain",i.prototype.isChain=!0,i.prototype.done=function(){return this.value},i.prototype.valueOf=function(){return this.value},i.prototype.toString=function(){return xt(this.value)},i.prototype.toJSON=function(){return{mathjs:"Chain",value:this.value}},i.fromJSON=function(l){return new i(l.value)};function a(l,c){typeof c=="function"&&(i.prototype[l]=s(c))}function o(l,c){IV(i.prototype,l,function(){var d=c();if(typeof d=="function")return s(d)})}function s(l){return function(){if(arguments.length===0)return new i(l(this.value));for(var c=[this.value],f=0;f<arguments.length;f++)c[f+1]=arguments[f];if(r.isTypedFunction(l)){var d=r.resolve(l,c);if(d.params.length===1)throw new Error("chain function "+l.name+" cannot match rest parameter between chain value and additional arguments.");return new i(d.implementation.apply(l,c))}return new i(l.apply(l,c))}}i.createProxy=function(l,c){if(typeof l=="string")a(l,c);else{var f=function(p){Ue(l,p)&&u[p]===void 0&&o(p,()=>l[p])};for(var d in l)f(d)}};var u={expression:!0,docs:!0,type:!0,classes:!0,json:!0,error:!0,isChain:!0};return i.createProxy(n),e&&e("import",function(l,c,f){f||o(l,c)}),i},{isClass:!0}),rT={name:"e",category:"Constants",syntax:["e"],description:"Euler's number, the base of the natural logarithm. Approximately equal to 2.71828",examples:["e","e ^ 2","exp(2)","log(e)"],seealso:["exp"]},One={name:"false",category:"Constants",syntax:["false"],description:"Boolean value false",examples:["false"],seealso:["true"]},Bne={name:"i",category:"Constants",syntax:["i"],description:"Imaginary unit, defined as i*i=-1. A complex number is described as a + b*i, where a is the real part, and b is the imaginary part.",examples:["i","i * i","sqrt(-1)"],seealso:[]},Lne={name:"Infinity",category:"Constants",syntax:["Infinity"],description:"Infinity, a number which is larger than the maximum number that can be handled by a floating point number.",examples:["Infinity","1 / 0"],seealso:[]},jne={name:"LN10",category:"Constants",syntax:["LN10"],description:"Returns the natural logarithm of 10, approximately equal to 2.302",examples:["LN10","log(10)"],seealso:[]},$ne={name:"LN2",category:"Constants",syntax:["LN2"],description:"Returns the natural logarithm of 2, approximately equal to 0.693",examples:["LN2","log(2)"],seealso:[]},zne={name:"LOG10E",category:"Constants",syntax:["LOG10E"],description:"Returns the base-10 logarithm of E, approximately equal to 0.434",examples:["LOG10E","log(e, 10)"],seealso:[]},Une={name:"LOG2E",category:"Constants",syntax:["LOG2E"],description:"Returns the base-2 logarithm of E, approximately equal to 1.442",examples:["LOG2E","log(e, 2)"],seealso:[]},Wne={name:"NaN",category:"Constants",syntax:["NaN"],description:"Not a number",examples:["NaN","0 / 0"],seealso:[]},Vne={name:"null",category:"Constants",syntax:["null"],description:"Value null",examples:["null"],seealso:["true","false"]},qne={name:"phi",category:"Constants",syntax:["phi"],description:"Phi is the golden ratio. Two quantities are in the golden ratio if their ratio is the same as the ratio of their sum to the larger of the two quantities. Phi is defined as `(1 + sqrt(5)) / 2` and is approximately 1.618034...",examples:["phi"],seealso:[]},iT={name:"pi",category:"Constants",syntax:["pi"],description:"The number pi is a mathematical constant that is the ratio of a circle's circumference to its diameter, and is approximately equal to 3.14159",examples:["pi","sin(pi/2)"],seealso:["tau"]},Hne={name:"SQRT1_2",category:"Constants",syntax:["SQRT1_2"],description:"Returns the square root of 1/2, approximately equal to 0.707",examples:["SQRT1_2","sqrt(1/2)"],seealso:[]},Gne={name:"SQRT2",category:"Constants",syntax:["SQRT2"],description:"Returns the square root of 2, approximately equal to 1.414",examples:["SQRT2","sqrt(2)"],seealso:[]},Kne={name:"tau",category:"Constants",syntax:["tau"],description:"Tau is the ratio constant of a circle's circumference to radius, equal to 2 * pi, approximately 6.2832.",examples:["tau","2 * pi"],seealso:["pi"]},Yne={name:"true",category:"Constants",syntax:["true"],description:"Boolean value true",examples:["true"],seealso:["false"]},Xne={name:"version",category:"Constants",syntax:["version"],description:"A string with the version number of math.js",examples:["version"],seealso:[]},Qne={name:"bignumber",category:"Construction",syntax:["bignumber(x)"],description:"Create a big number from a number or string.",examples:["0.1 + 0.2","bignumber(0.1) + bignumber(0.2)",'bignumber("7.2")','bignumber("7.2e500")',"bignumber([0.1, 0.2, 0.3])"],seealso:["boolean","bigint","complex","fraction","index","matrix","string","unit"]},Zne={name:"bigint",category:"Construction",syntax:["bigint(x)"],description:"Create a bigint, an integer with an arbitrary number of digits, from a number or string.",examples:["123123123123123123 # a large number will lose digits",'bigint("123123123123123123")','bignumber(["1", "3", "5"])'],seealso:["boolean","bignumber","number","complex","fraction","index","matrix","string","unit"]},Jne={name:"boolean",category:"Construction",syntax:["x","boolean(x)"],description:"Convert a string or number into a boolean.",examples:["boolean(0)","boolean(1)","boolean(3)",'boolean("true")','boolean("false")',"boolean([1, 0, 1, 1])"],seealso:["bignumber","complex","index","matrix","number","string","unit"]},ere={name:"complex",category:"Construction",syntax:["complex()","complex(re, im)","complex(string)"],description:"Create a complex number.",examples:["complex()","complex(2, 3)",'complex("7 - 2i")'],seealso:["bignumber","boolean","index","matrix","number","string","unit"]},tre={name:"createUnit",category:"Construction",syntax:["createUnit(definitions)","createUnit(name, definition)"],description:"Create a user-defined unit and register it with the Unit type.",examples:['createUnit("foo")','createUnit("knot", {definition: "0.514444444 m/s", aliases: ["knots", "kt", "kts"]})','createUnit("mph", "1 mile/hour")'],seealso:["unit","splitUnit"]},nre={name:"fraction",category:"Construction",syntax:["fraction(num)","fraction(matrix)","fraction(num,den)","fraction({n: num, d: den})"],description:"Create a fraction from a number or from integer numerator and denominator.",examples:["fraction(0.125)","fraction(1, 3) + fraction(2, 5)","fraction({n: 333, d: 53})","fraction([sqrt(9), sqrt(10), sqrt(11)])"],seealso:["bignumber","boolean","complex","index","matrix","string","unit"]},rre={name:"index",category:"Construction",syntax:["[start]","[start:end]","[start:step:end]","[start1, start 2, ...]","[start1:end1, start2:end2, ...]","[start1:step1:end1, start2:step2:end2, ...]"],description:"Create an index to get or replace a subset of a matrix",examples:["A = [1, 2, 3; 4, 5, 6]","A[1, :]","A[1, 2] = 50","A[1:2, 1:2] = 1","B = [1, 2, 3]","B[B>1 and B<3]"],seealso:["bignumber","boolean","complex","matrix,","number","range","string","unit"]},ire={name:"matrix",category:"Construction",syntax:["[]","[a1, b1, ...; a2, b2, ...]","matrix()",'matrix("dense")',"matrix([...])"],description:"Create a matrix.",examples:["[]","[1, 2, 3]","[1, 2, 3; 4, 5, 6]","matrix()","matrix([3, 4])",'matrix([3, 4; 5, 6], "sparse")','matrix([3, 4; 5, 6], "sparse", "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","sparse"]},are={name:"number",category:"Construction",syntax:["x","number(x)","number(unit, valuelessUnit)"],description:"Create a number or convert a string or boolean into a number.",examples:["2","2e3","4.05","number(2)",'number("7.2")',"number(true)","number([true, false, true, true])",'number(unit("52cm"), "m")'],seealso:["bignumber","bigint","boolean","complex","fraction","index","matrix","string","unit"]},ore={name:"sparse",category:"Construction",syntax:["sparse()","sparse([a1, b1, ...; a1, b2, ...])",'sparse([a1, b1, ...; a1, b2, ...], "number")'],description:"Create a sparse matrix.",examples:["sparse()","sparse([3, 4; 5, 6])",'sparse([3, 0; 5, 0], "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","matrix"]},sre={name:"splitUnit",category:"Construction",syntax:["splitUnit(unit: Unit, parts: Unit[])"],description:"Split a unit in an array of units whose sum is equal to the original unit.",examples:['splitUnit(1 m, ["feet", "inch"])'],seealso:["unit","createUnit"]},ure={name:"string",category:"Construction",syntax:['"text"',"string(x)"],description:"Create a string or convert a value to a string",examples:['"Hello World!"',"string(4.2)","string(3 + 2i)"],seealso:["bignumber","boolean","complex","index","matrix","number","unit"]},lre={name:"unit",category:"Construction",syntax:["value unit","unit(value, unit)","unit(string)"],description:"Create a unit.",examples:["5.5 mm","3 inch",'unit(7.1, "kilogram")','unit("23 deg")'],seealso:["bignumber","boolean","complex","index","matrix","number","string"]},cre={name:"config",category:"Core",syntax:["config()","config(options)"],description:"Get configuration or change configuration.",examples:["config()","1/3 + 1/4",'config({number: "Fraction"})',"1/3 + 1/4"],seealso:[]},fre={name:"import",category:"Core",syntax:["import(functions)","import(functions, options)"],description:"Import functions or constants from an object.",examples:["import({myFn: f(x)=x^2, myConstant: 32 })","myFn(2)","myConstant"],seealso:[]},dre={name:"typed",category:"Core",syntax:["typed(signatures)","typed(name, signatures)"],description:"Create a typed function.",examples:['double = typed({ "number": f(x)=x+x, "string": f(x)=concat(x,x) })',"double(2)",'double("hello")'],seealso:[]},hre={name:"derivative",category:"Algebra",syntax:["derivative(expr, variable)","derivative(expr, variable, {simplify: boolean})"],description:"Takes the derivative of an expression expressed in parser Nodes. The derivative will be taken over the supplied variable in the second parameter. If there are multiple variables in the expression, it will return a partial derivative.",examples:['derivative("2x^3", "x")','derivative("2x^3", "x", {simplify: false})','derivative("2x^2 + 3x + 4", "x")','derivative("sin(2x)", "x")','f = parse("x^2 + x")','x = parse("x")',"df = derivative(f, x)","df.evaluate({x: 3})"],seealso:["simplify","parse","evaluate"]},pre={name:"leafCount",category:"Algebra",syntax:["leafCount(expr)"],description:"Computes the number of leaves in the parse tree of the given expression",examples:['leafCount("e^(i*pi)-1")','leafCount(parse("{a: 22/7, b: 10^(1/2)}"))'],seealso:["simplify"]},mre={name:"lsolve",category:"Algebra",syntax:["x=lsolve(L, b)"],description:"Finds one solution of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolveAll","lup","lusolve","usolve","matrix","sparse"]},vre={name:"lsolveAll",category:"Algebra",syntax:["x=lsolveAll(L, b)"],description:"Finds all solutions of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolve","lup","lusolve","usolve","matrix","sparse"]},gre={name:"lup",category:"Algebra",syntax:["lup(m)"],description:"Calculate the Matrix LU decomposition with partial pivoting. Matrix A is decomposed in three matrices (L, U, P) where P * A = L * U",examples:["lup([[2, 1], [1, 4]])","lup(matrix([[2, 1], [1, 4]]))","lup(sparse([[2, 1], [1, 4]]))"],seealso:["lusolve","lsolve","usolve","matrix","sparse","slu","qr"]},yre={name:"lusolve",category:"Algebra",syntax:["x=lusolve(A, b)","x=lusolve(lu, b)"],description:"Solves the linear system A * x = b where A is an [n x n] matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lusolve(a, b)"],seealso:["lup","slu","lsolve","usolve","matrix","sparse"]},xre={name:"polynomialRoot",category:"Algebra",syntax:["x=polynomialRoot(-6, 3)","x=polynomialRoot(4, -4, 1)","x=polynomialRoot(-8, 12, -6, 1)"],description:"Finds the roots of a univariate polynomial given by its coefficients starting from constant, linear, and so on, increasing in degree.",examples:["a = polynomialRoot(-6, 11, -6, 1)"],seealso:["cbrt","sqrt"]},bre={name:"qr",category:"Algebra",syntax:["qr(A)"],description:"Calculates the Matrix QR decomposition. Matrix `A` is decomposed in two matrices (`Q`, `R`) where `Q` is an orthogonal matrix and `R` is an upper triangular matrix.",examples:["qr([[1, -1,  4], [1,  4, -2], [1,  4,  2], [1,  -1, 0]])"],seealso:["lup","slu","matrix"]},wre={name:"rationalize",category:"Algebra",syntax:["rationalize(expr)","rationalize(expr, scope)","rationalize(expr, scope, detailed)"],description:"Transform a rationalizable expression in a rational fraction. If rational fraction is one variable polynomial then converts the numerator and denominator in canonical form, with decreasing exponents, returning the coefficients of numerator.",examples:['rationalize("2x/y - y/(x+1)")','rationalize("2x/y - y/(x+1)", true)'],seealso:["simplify"]},_re={name:"resolve",category:"Algebra",syntax:["resolve(node, scope)"],description:"Recursively substitute variables in an expression tree.",examples:['resolve(parse("1 + x"), { x: 7 })','resolve(parse("size(text)"), { text: "Hello World" })','resolve(parse("x + y"), { x: parse("3z") })','resolve(parse("3x"), { x: parse("y+z"), z: parse("w^y") })'],seealso:["simplify","evaluate"],mayThrow:["ReferenceError"]},Ere={name:"simplify",category:"Algebra",syntax:["simplify(expr)","simplify(expr, rules)"],description:"Simplify an expression tree.",examples:['simplify("3 + 2 / 4")','simplify("2x + x")','f = parse("x * (x + 2 + x)")',"simplified = simplify(f)","simplified.evaluate({x: 2})"],seealso:["simplifyCore","derivative","evaluate","parse","rationalize","resolve"]},Cre={name:"simplifyConstant",category:"Algebra",syntax:["simplifyConstant(expr)","simplifyConstant(expr, options)"],description:"Replace constant subexpressions of node with their values.",examples:['simplifyConstant("(3-3)*x")','simplifyConstant(parse("z-cos(tau/8)"))'],seealso:["simplify","simplifyCore","evaluate"]},Nre={name:"simplifyCore",category:"Algebra",syntax:["simplifyCore(node)"],description:"Perform simple one-pass simplifications on an expression tree.",examples:['simplifyCore(parse("0*x"))','simplifyCore(parse("(x+0)*2"))'],seealso:["simplify","simplifyConstant","evaluate"]},Sre={name:"slu",category:"Algebra",syntax:["slu(A, order, threshold)"],description:"Calculate the Matrix LU decomposition with full pivoting. Matrix A is decomposed in two matrices (L, U) and two permutation vectors (pinv, q) where P * A * Q = L * U",examples:["slu(sparse([4.5, 0, 3.2, 0; 3.1, 2.9, 0, 0.9; 0, 1.7, 3, 0; 3.5, 0.4, 0, 1]), 1, 0.001)"],seealso:["lusolve","lsolve","usolve","matrix","sparse","lup","qr"]},Dre={name:"symbolicEqual",category:"Algebra",syntax:["symbolicEqual(expr1, expr2)","symbolicEqual(expr1, expr2, options)"],description:"Returns true if the difference of the expressions simplifies to 0",examples:['symbolicEqual("x*y","y*x")','symbolicEqual("abs(x^2)", "x^2")','symbolicEqual("abs(x)", "x", {context: {abs: {trivial: true}}})'],seealso:["simplify","evaluate"]},Are={name:"usolve",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds one solution of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolveAll","lup","lusolve","lsolve","matrix","sparse"]},Tre={name:"usolveAll",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds all solutions of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolve","lup","lusolve","lsolve","matrix","sparse"]},Mre={name:"abs",category:"Arithmetic",syntax:["abs(x)"],description:"Compute the absolute value.",examples:["abs(3.5)","abs(-4.2)"],seealso:["sign"]},Ire={name:"add",category:"Operators",syntax:["x + y","add(x, y)"],description:"Add two values.",examples:["a = 2.1 + 3.6","a - 3.6","3 + 2i","3 cm + 2 inch",'"2.3" + "4"'],seealso:["subtract"]},Rre={name:"cbrt",category:"Arithmetic",syntax:["cbrt(x)","cbrt(x, allRoots)"],description:"Compute the cubic root value. If x = y * y * y, then y is the cubic root of x. When `x` is a number or complex number, an optional second argument `allRoots` can be provided to return all three cubic roots. If not provided, the principal root is returned",examples:["cbrt(64)","cube(4)","cbrt(-8)","cbrt(2 + 3i)","cbrt(8i)","cbrt(8i, true)","cbrt(27 m^3)"],seealso:["square","sqrt","cube","multiply"]},kre={name:"ceil",category:"Arithmetic",syntax:["ceil(x)","ceil(x, n)","ceil(unit, valuelessUnit)","ceil(unit, n, valuelessUnit)"],description:"Round a value towards plus infinity. If x is complex, both real and imaginary part are rounded towards plus infinity.",examples:["ceil(3.2)","ceil(3.8)","ceil(-4.2)","ceil(3.241cm, cm)","ceil(3.241cm, 2, cm)"],seealso:["floor","fix","round"]},Fre={name:"cube",category:"Arithmetic",syntax:["cube(x)"],description:"Compute the cube of a value. The cube of x is x * x * x.",examples:["cube(2)","2^3","2 * 2 * 2"],seealso:["multiply","square","pow"]},Pre={name:"divide",category:"Operators",syntax:["x / y","divide(x, y)"],description:"Divide two values.",examples:["a = 2 / 3","a * 3","4.5 / 2","3 + 4 / 2","(3 + 4) / 2","18 km / 4.5"],seealso:["multiply"]},Ore={name:"dotDivide",category:"Operators",syntax:["x ./ y","dotDivide(x, y)"],description:"Divide two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a ./ b"],seealso:["multiply","dotMultiply","divide"]},Bre={name:"dotMultiply",category:"Operators",syntax:["x .* y","dotMultiply(x, y)"],description:"Multiply two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a .* b"],seealso:["multiply","divide","dotDivide"]},Lre={name:"dotPow",category:"Operators",syntax:["x .^ y","dotPow(x, y)"],description:"Calculates the power of x to y element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","a .^ 2"],seealso:["pow"]},jre={name:"exp",category:"Arithmetic",syntax:["exp(x)"],description:"Calculate the exponent of a value.",examples:["exp(1.3)","e ^ 1.3","log(exp(1.3))","x = 2.4","(exp(i*x) == cos(x) + i*sin(x))   # Euler's formula"],seealso:["expm","expm1","pow","log"]},$re={name:"expm",category:"Arithmetic",syntax:["exp(x)"],description:"Compute the matrix exponential, expm(A) = e^A. The matrix must be square. Not to be confused with exp(a), which performs element-wise exponentiation.",examples:["expm([[0,2],[0,0]])"],seealso:["exp"]},zre={name:"expm1",category:"Arithmetic",syntax:["expm1(x)"],description:"Calculate the value of subtracting 1 from the exponential value.",examples:["expm1(2)","pow(e, 2) - 1","log(expm1(2) + 1)"],seealso:["exp","pow","log"]},Ure={name:"fix",category:"Arithmetic",syntax:["fix(x)","fix(x, n)","fix(unit, valuelessUnit)","fix(unit, n, valuelessUnit)"],description:"Round a value towards zero. If x is complex, both real and imaginary part are rounded towards zero.",examples:["fix(3.2)","fix(3.8)","fix(-4.2)","fix(-4.8)","fix(3.241cm, cm)","fix(3.241cm, 2, cm)"],seealso:["ceil","floor","round"]},Wre={name:"floor",category:"Arithmetic",syntax:["floor(x)","floor(x, n)","floor(unit, valuelessUnit)","floor(unit, n, valuelessUnit)"],description:"Round a value towards minus infinity.If x is complex, both real and imaginary part are rounded towards minus infinity.",examples:["floor(3.2)","floor(3.8)","floor(-4.2)","floor(3.241cm, cm)","floor(3.241cm, 2, cm)"],seealso:["ceil","fix","round"]},Vre={name:"gcd",category:"Arithmetic",syntax:["gcd(a, b)","gcd(a, b, c, ...)"],description:"Compute the greatest common divisor.",examples:["gcd(8, 12)","gcd(-4, 6)","gcd(25, 15, -10)"],seealso:["lcm","xgcd"]},qre={name:"hypot",category:"Arithmetic",syntax:["hypot(a, b, c, ...)","hypot([a, b, c, ...])"],description:"Calculate the hypotenuse of a list with values.",examples:["hypot(3, 4)","sqrt(3^2 + 4^2)","hypot(-2)","hypot([3, 4, 5])"],seealso:["abs","norm"]},Hre={name:"invmod",category:"Arithmetic",syntax:["invmod(a, b)"],description:"Calculate the (modular) multiplicative inverse of a modulo b. Solution to the equation ax  1 (mod b)",examples:["invmod(8, 12)","invmod(7, 13)","invmod(15151, 15122)"],seealso:["gcd","xgcd"]},Gre={name:"lcm",category:"Arithmetic",syntax:["lcm(x, y)"],description:"Compute the least common multiple.",examples:["lcm(4, 6)","lcm(6, 21)","lcm(6, 21, 5)"],seealso:["gcd"]},Kre={name:"log",category:"Arithmetic",syntax:["log(x)","log(x, base)"],description:"Compute the logarithm of a value. If no base is provided, the natural logarithm of x is calculated. If base if provided, the logarithm is calculated for the specified base. log(x, base) is defined as log(x) / log(base).",examples:["log(3.5)","a = log(2.4)","exp(a)","10 ^ 4","log(10000, 10)","log(10000) / log(10)","b = log(1024, 2)","2 ^ b"],seealso:["exp","log1p","log2","log10"]},Yre={name:"log10",category:"Arithmetic",syntax:["log10(x)"],description:"Compute the 10-base logarithm of a value.",examples:["log10(0.00001)","log10(10000)","10 ^ 4","log(10000) / log(10)","log(10000, 10)"],seealso:["exp","log"]},Xre={name:"log1p",category:"Arithmetic",syntax:["log1p(x)","log1p(x, base)"],description:"Calculate the logarithm of a `value+1`",examples:["log1p(2.5)","exp(log1p(1.4))","pow(10, 4)","log1p(9999, 10)","log1p(9999) / log(10)"],seealso:["exp","log","log2","log10"]},Qre={name:"log2",category:"Arithmetic",syntax:["log2(x)"],description:"Calculate the 2-base of a value. This is the same as calculating `log(x, 2)`.",examples:["log2(0.03125)","log2(16)","log2(16) / log2(2)","pow(2, 4)"],seealso:["exp","log1p","log","log10"]},Zre={name:"mod",category:"Operators",syntax:["x % y","x mod y","mod(x, y)"],description:"Calculates the modulus, the remainder of an integer division.",examples:["7 % 3","11 % 2","10 mod 4","isOdd(x) = x % 2","isOdd(2)","isOdd(3)"],seealso:["divide"]},Jre={name:"multiply",category:"Operators",syntax:["x * y","multiply(x, y)"],description:"multiply two values.",examples:["a = 2.1 * 3.4","a / 3.4","2 * 3 + 4","2 * (3 + 4)","3 * 2.1 km"],seealso:["divide"]},eie={name:"norm",category:"Arithmetic",syntax:["norm(x)","norm(x, p)"],description:"Calculate the norm of a number, vector or matrix.",examples:["abs(-3.5)","norm(-3.5)","norm(3 - 4i)","norm([1, 2, -3], Infinity)","norm([1, 2, -3], -Infinity)","norm([3, 4], 2)","norm([[1, 2], [3, 4]], 1)",'norm([[1, 2], [3, 4]], "inf")','norm([[1, 2], [3, 4]], "fro")']},tie={name:"nthRoot",category:"Arithmetic",syntax:["nthRoot(a)","nthRoot(a, root)"],description:'Calculate the nth root of a value. The principal nth root of a positive real number A, is the positive real solution of the equation "x^root = A".',examples:["4 ^ 3","nthRoot(64, 3)","nthRoot(9, 2)","sqrt(9)"],seealso:["nthRoots","pow","sqrt"]},nie={name:"nthRoots",category:"Arithmetic",syntax:["nthRoots(A)","nthRoots(A, root)"],description:'Calculate the nth roots of a value. An nth root of a positive real number A, is a positive real solution of the equation "x^root = A". This function returns an array of complex values.',examples:["nthRoots(1)","nthRoots(1, 3)"],seealso:["sqrt","pow","nthRoot"]},rie={name:"pow",category:"Operators",syntax:["x ^ y","pow(x, y)"],description:"Calculates the power of x to y, x^y.",examples:["2^3","2*2*2","1 + e ^ (pi * i)","pow([[1, 2], [4, 3]], 2)","pow([[1, 2], [4, 3]], -1)"],seealso:["multiply","nthRoot","nthRoots","sqrt"]},iie={name:"round",category:"Arithmetic",syntax:["round(x)","round(x, n)","round(unit, valuelessUnit)","round(unit, n, valuelessUnit)"],description:"round a value towards the nearest integer.If x is complex, both real and imaginary part are rounded towards the nearest integer. When n is specified, the value is rounded to n decimals.",examples:["round(3.2)","round(3.8)","round(-4.2)","round(-4.8)","round(pi, 3)","round(123.45678, 2)","round(3.241cm, 2, cm)","round([3.2, 3.8, -4.7])"],seealso:["ceil","floor","fix"]},aie={name:"sign",category:"Arithmetic",syntax:["sign(x)"],description:"Compute the sign of a value. The sign of a value x is 1 when x>0, -1 when x<0, and 0 when x=0.",examples:["sign(3.5)","sign(-4.2)","sign(0)"],seealso:["abs"]},oie={name:"sqrt",category:"Arithmetic",syntax:["sqrt(x)"],description:"Compute the square root value. If x = y * y, then y is the square root of x.",examples:["sqrt(25)","5 * 5","sqrt(-1)"],seealso:["square","sqrtm","multiply","nthRoot","nthRoots","pow"]},sie={name:"sqrtm",category:"Arithmetic",syntax:["sqrtm(x)"],description:"Calculate the principal square root of a square matrix. The principal square root matrix `X` of another matrix `A` is such that `X * X = A`.",examples:["sqrtm([[33, 24], [48, 57]])"],seealso:["sqrt","abs","square","multiply"]},uie={name:"sylvester",category:"Algebra",syntax:["sylvester(A,B,C)"],description:"Solves the real-valued Sylvester equation AX+XB=C for X",examples:["sylvester([[-1, -2], [1, 1]], [[-2, 1], [-1, 2]], [[-3, 2], [3, 0]])","A = [[-1, -2], [1, 1]]; B = [[2, -1], [1, -2]]; C = [[-3, 2], [3, 0]]","sylvester(A, B, C)"],seealso:["schur","lyap"]},lie={name:"schur",category:"Algebra",syntax:["schur(A)"],description:"Performs a real Schur decomposition of the real matrix A = UTU'",examples:["schur([[1, 0], [-4, 3]])","A = [[1, 0], [-4, 3]]","schur(A)"],seealso:["lyap","sylvester"]},cie={name:"lyap",category:"Algebra",syntax:["lyap(A,Q)"],description:"Solves the Continuous-time Lyapunov equation AP+PA'+Q=0 for P",examples:["lyap([[-2, 0], [1, -4]], [[3, 1], [1, 3]])","A = [[-2, 0], [1, -4]]","Q = [[3, 1], [1, 3]]","lyap(A,Q)"],seealso:["schur","sylvester"]},fie={name:"square",category:"Arithmetic",syntax:["square(x)"],description:"Compute the square of a value. The square of x is x * x.",examples:["square(3)","sqrt(9)","3^2","3 * 3"],seealso:["multiply","pow","sqrt","cube"]},die={name:"subtract",category:"Operators",syntax:["x - y","subtract(x, y)"],description:"subtract two values.",examples:["a = 5.3 - 2","a + 2","2/3 - 1/6","2 * 3 - 3","2.1 km - 500m"],seealso:["add"]},hie={name:"unaryMinus",category:"Operators",syntax:["-x","unaryMinus(x)"],description:"Inverse the sign of a value. Converts booleans and strings to numbers.",examples:["-4.5","-(-5.6)",'-"22"'],seealso:["add","subtract","unaryPlus"]},pie={name:"unaryPlus",category:"Operators",syntax:["+x","unaryPlus(x)"],description:"Converts booleans and strings to numbers.",examples:["+true",'+"2"'],seealso:["add","subtract","unaryMinus"]},mie={name:"xgcd",category:"Arithmetic",syntax:["xgcd(a, b)"],description:"Calculate the extended greatest common divisor for two values. The result is an array [d, x, y] with 3 entries, where d is the greatest common divisor, and d = x * a + y * b.",examples:["xgcd(8, 12)","gcd(8, 12)","xgcd(36163, 21199)"],seealso:["gcd","lcm"]},vie={name:"bitAnd",category:"Bitwise",syntax:["x & y","bitAnd(x, y)"],description:"Bitwise AND operation. Performs the logical AND operation on each pair of the corresponding bits of the two given values by multiplying them. If both bits in the compared position are 1, the bit in the resulting binary representation is 1, otherwise, the result is 0",examples:["5 & 3","bitAnd(53, 131)","[1, 12, 31] & 42"],seealso:["bitNot","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},gie={name:"bitNot",category:"Bitwise",syntax:["~x","bitNot(x)"],description:"Bitwise NOT operation. Performs a logical negation on each bit of the given value. Bits that are 0 become 1, and those that are 1 become 0.",examples:["~1","~2","bitNot([2, -3, 4])"],seealso:["bitAnd","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},yie={name:"bitOr",category:"Bitwise",syntax:["x | y","bitOr(x, y)"],description:"Bitwise OR operation. Performs the logical inclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if the first bit is 1 or the second bit is 1 or both bits are 1, otherwise, the result is 0.",examples:["5 | 3","bitOr([1, 2, 3], 4)"],seealso:["bitAnd","bitNot","bitXor","leftShift","rightArithShift","rightLogShift"]},xie={name:"bitXor",category:"Bitwise",syntax:["bitXor(x, y)"],description:"Bitwise XOR operation, exclusive OR. Performs the logical exclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if only the first bit is 1 or only the second bit is 1, but will be 0 if both are 0 or both are 1.",examples:["bitOr(1, 2)","bitXor([2, 3, 4], 4)"],seealso:["bitAnd","bitNot","bitOr","leftShift","rightArithShift","rightLogShift"]},bie={name:"leftShift",category:"Bitwise",syntax:["x << y","leftShift(x, y)"],description:"Bitwise left logical shift of a value x by y number of bits.",examples:["4 << 1","8 >> 1"],seealso:["bitAnd","bitNot","bitOr","bitXor","rightArithShift","rightLogShift"]},wie={name:"rightArithShift",category:"Bitwise",syntax:["x >> y","rightArithShift(x, y)"],description:"Bitwise right arithmetic shift of a value x by y number of bits.",examples:["8 >> 1","4 << 1","-12 >> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightLogShift"]},_ie={name:"rightLogShift",category:"Bitwise",syntax:["x >>> y","rightLogShift(x, y)"],description:"Bitwise right logical shift of a value x by y number of bits.",examples:["8 >>> 1","4 << 1","-12 >>> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightArithShift"]},Eie={name:"bellNumbers",category:"Combinatorics",syntax:["bellNumbers(n)"],description:"The Bell Numbers count the number of partitions of a set. A partition is a pairwise disjoint subset of S whose union is S. `bellNumbers` only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["bellNumbers(3)","bellNumbers(8)"],seealso:["stirlingS2"]},Cie={name:"catalan",category:"Combinatorics",syntax:["catalan(n)"],description:"The Catalan Numbers enumerate combinatorial structures of many different types. catalan only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["catalan(3)","catalan(8)"],seealso:["bellNumbers"]},Nie={name:"composition",category:"Combinatorics",syntax:["composition(n, k)"],description:"The composition counts of n into k parts. composition only takes integer arguments. The following condition must be enforced: k <= n.",examples:["composition(5, 3)"],seealso:["combinations"]},Sie={name:"stirlingS2",category:"Combinatorics",syntax:["stirlingS2(n, k)"],description:"he Stirling numbers of the second kind, counts the number of ways to partition a set of n labelled objects into k nonempty unlabelled subsets. `stirlingS2` only takes integer arguments. The following condition must be enforced: k <= n. If n = k or k = 1, then s(n,k) = 1.",examples:["stirlingS2(5, 3)"],seealso:["bellNumbers"]},Die={name:"arg",category:"Complex",syntax:["arg(x)"],description:"Compute the argument of a complex value. If x = a+bi, the argument is computed as atan2(b, a).",examples:["arg(2 + 2i)","atan2(3, 2)","arg(2 + 3i)"],seealso:["re","im","conj","abs"]},Aie={name:"conj",category:"Complex",syntax:["conj(x)"],description:"Compute the complex conjugate of a complex value. If x = a+bi, the complex conjugate is a-bi.",examples:["conj(2 + 3i)","conj(2 - 3i)","conj(-5.2i)"],seealso:["re","im","abs","arg"]},Tie={name:"im",category:"Complex",syntax:["im(x)"],description:"Get the imaginary part of a complex number.",examples:["im(2 + 3i)","re(2 + 3i)","im(-5.2i)","im(2.4)"],seealso:["re","conj","abs","arg"]},Mie={name:"re",category:"Complex",syntax:["re(x)"],description:"Get the real part of a complex number.",examples:["re(2 + 3i)","im(2 + 3i)","re(-5.2i)","re(2.4)"],seealso:["im","conj","abs","arg"]},Iie={name:"evaluate",category:"Expression",syntax:["evaluate(expression)","evaluate(expression, scope)","evaluate([expr1, expr2, expr3, ...])","evaluate([expr1, expr2, expr3, ...], scope)"],description:"Evaluate an expression or an array with expressions.",examples:['evaluate("2 + 3")','evaluate("sqrt(16)")','evaluate("2 inch to cm")','evaluate("sin(x * pi)", { "x": 1/2 })','evaluate(["width=2", "height=4","width*height"])'],seealso:[]},Rie={name:"help",category:"Expression",syntax:["help(object)","help(string)"],description:"Display documentation on a function or data type.",examples:["help(sqrt)",'help("complex")'],seealso:[]},kie={name:"distance",category:"Geometry",syntax:["distance([x1, y1], [x2, y2])","distance([[x1, y1], [x2, y2]])"],description:"Calculates the Euclidean distance between two points.",examples:["distance([0,0], [4,4])","distance([[0,0], [4,4]])"],seealso:[]},Fie={name:"intersect",category:"Geometry",syntax:["intersect(expr1, expr2, expr3, expr4)","intersect(expr1, expr2, expr3)"],description:"Computes the intersection point of lines and/or planes.",examples:["intersect([0, 0], [10, 10], [10, 0], [0, 10])","intersect([1, 0, 1],  [4, -2, 2], [1, 1, 1, 6])"],seealso:[]},Pie={name:"and",category:"Logical",syntax:["x and y","and(x, y)"],description:"Logical and. Test whether two values are both defined with a nonzero/nonempty value.",examples:["true and false","true and true","2 and 4"],seealso:["not","or","xor"]},Oie={name:"not",category:"Logical",syntax:["not x","not(x)"],description:"Logical not. Flips the boolean value of given argument.",examples:["not true","not false","not 2","not 0"],seealso:["and","or","xor"]},Bie={name:"or",category:"Logical",syntax:["x or y","or(x, y)"],description:"Logical or. Test if at least one value is defined with a nonzero/nonempty value.",examples:["true or false","false or false","0 or 4"],seealso:["not","and","xor"]},Lie={name:"xor",category:"Logical",syntax:["x xor y","xor(x, y)"],description:"Logical exclusive or, xor. Test whether one and only one value is defined with a nonzero/nonempty value.",examples:["true xor false","false xor false","true xor true","0 xor 4"],seealso:["not","and","or"]},jie={name:"mapSlices",category:"Matrix",syntax:["mapSlices(A, dim, callback)"],description:"Generate a matrix one dimension less than A by applying callback to each slice of A along dimension dim.",examples:["A = [[1, 2], [3, 4]]","mapSlices(A, 1, sum)","mapSlices(A, 2, prod)"],seealso:["map","forEach"]},$ie={name:"column",category:"Matrix",syntax:["column(x, index)"],description:"Return a column from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","column(A, 1)","column(A, 2)"],seealso:["row","matrixFromColumns"]},zie={name:"concat",category:"Matrix",syntax:["concat(A, B, C, ...)","concat(A, B, C, ..., dim)"],description:"Concatenate matrices. By default, the matrices are concatenated by the last dimension. The dimension on which to concatenate can be provided as last argument.",examples:["A = [1, 2; 5, 6]","B = [3, 4; 7, 8]","concat(A, B)","concat(A, B, 1)","concat(A, B, 2)"],seealso:["det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},Uie={name:"count",category:"Matrix",syntax:["count(x)"],description:"Count the number of elements of a matrix, array or string.",examples:["a = [1, 2; 3, 4; 5, 6]","count(a)","size(a)",'count("hello world")'],seealso:["size"]},Wie={name:"cross",category:"Matrix",syntax:["cross(A, B)"],description:"Calculate the cross product for two vectors in three dimensional space.",examples:["cross([1, 1, 0],  [0, 1, 1])","cross([3, -3, 1], [4, 9, 2])","cross([2, 3, 4],  [5, 6, 7])"],seealso:["multiply","dot"]},Vie={name:"ctranspose",category:"Matrix",syntax:["x'","ctranspose(x)"],description:"Complex Conjugate and Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","ctranspose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},qie={name:"det",category:"Matrix",syntax:["det(x)"],description:"Calculate the determinant of a matrix",examples:["det([1, 2; 3, 4])","det([-2, 2, 3; -1, 1, 3; 2, 0, -1])"],seealso:["concat","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},Hie={name:"diag",category:"Matrix",syntax:["diag(x)","diag(x, k)"],description:"Create a diagonal matrix or retrieve the diagonal of a matrix. When x is a vector, a matrix with the vector values on the diagonal will be returned. When x is a matrix, a vector with the diagonal values of the matrix is returned. When k is provided, the k-th diagonal will be filled in or retrieved, if k is positive, the values are placed on the super diagonal. When k is negative, the values are placed on the sub diagonal.",examples:["diag(1:3)","diag(1:3, 1)","a = [1, 2, 3; 4, 5, 6; 7, 8, 9]","diag(a)"],seealso:["concat","det","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},Gie={name:"diff",category:"Matrix",syntax:["diff(arr)","diff(arr, dim)"],description:["Create a new matrix or array with the difference of the passed matrix or array.","Dim parameter is optional and used to indicate the dimension of the array/matrix to apply the difference","If no dimension parameter is passed it is assumed as dimension 0","Dimension is zero-based in javascript and one-based in the parser","Arrays must be 'rectangular' meaning arrays like [1, 2]","If something is passed as a matrix it will be returned as a matrix but other than that all matrices are converted to arrays"],examples:["A = [1, 2, 4, 7, 0]","diff(A)","diff(A, 1)","B = [[1, 2], [3, 4]]","diff(B)","diff(B, 1)","diff(B, 2)","diff(B, bignumber(2))","diff([[1, 2], matrix([3, 4])], 2)"],seealso:["subtract","partitionSelect"]},Kie={name:"dot",category:"Matrix",syntax:["dot(A, B)","A * B"],description:"Calculate the dot product of two vectors. The dot product of A = [a1, a2, a3, ..., an] and B = [b1, b2, b3, ..., bn] is defined as dot(A, B) = a1 * b1 + a2 * b2 + a3 * b3 + ... + an * bn",examples:["dot([2, 4, 1], [2, 2, 3])","[2, 4, 1] * [2, 2, 3]"],seealso:["multiply","cross"]},Yie={name:"eigs",category:"Matrix",syntax:["eigs(x)"],description:"Calculate the eigenvalues and optionally eigenvectors of a square matrix",examples:["eigs([[5, 2.3], [2.3, 1]])","eigs([[1, 2, 3], [4, 5, 6], [7, 8, 9]], { precision: 1e-6, eigenvectors: false })"],seealso:["inv"]},Xie={name:"filter",category:"Matrix",syntax:["filter(x, test)"],description:"Filter items in a matrix.",examples:["isPositive(x) = x > 0","filter([6, -2, -1, 4, 3], isPositive)","filter([6, -2, 0, 1, 0], x != 0)"],seealso:["sort","map","forEach"]},Qie={name:"flatten",category:"Matrix",syntax:["flatten(x)"],description:"Flatten a multi dimensional matrix into a single dimensional matrix.",examples:["a = [1, 2, 3; 4, 5, 6]","size(a)","b = flatten(a)","size(b)"],seealso:["concat","resize","size","squeeze"]},Zie={name:"forEach",category:"Matrix",syntax:["forEach(x, callback)"],description:"Iterates over all elements of a matrix/array, and executes the given callback function.",examples:["numberOfPets = {}","addPet(n) = numberOfPets[n] = (numberOfPets[n] ? numberOfPets[n]:0 ) + 1;",'forEach(["Dog","Cat","Cat"], addPet)',"numberOfPets"],seealso:["map","sort","filter"]},Jie={name:"getMatrixDataType",category:"Matrix",syntax:["getMatrixDataType(x)"],description:'Find the data type of all elements in a matrix or array, for example "number" if all items are a number and "Complex" if all values are complex numbers. If a matrix contains more than one data type, it will return "mixed".',examples:["getMatrixDataType([1, 2, 3])","getMatrixDataType([[5 cm], [2 inch]])",'getMatrixDataType([1, "text"])',"getMatrixDataType([1, bignumber(4)])"],seealso:["matrix","sparse","typeOf"]},eae={name:"identity",category:"Matrix",syntax:["identity(n)","identity(m, n)","identity([m, n])"],description:"Returns the identity matrix with size m-by-n. The matrix has ones on the diagonal and zeros elsewhere.",examples:["identity(3)","identity(3, 5)","a = [1, 2, 3; 4, 5, 6]","identity(size(a))"],seealso:["concat","det","diag","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},tae={name:"inv",category:"Matrix",syntax:["inv(x)"],description:"Calculate the inverse of a matrix",examples:["inv([1, 2; 3, 4])","inv(4)","1 / 4"],seealso:["concat","det","diag","identity","ones","range","size","squeeze","subset","trace","transpose","zeros"]},nae={name:"pinv",category:"Matrix",syntax:["pinv(x)"],description:"Calculate the MoorePenrose inverse of a matrix",examples:["pinv([1, 2; 3, 4])","pinv([[1, 0], [0, 1], [0, 1]])","pinv(4)"],seealso:["inv"]},rae={name:"kron",category:"Matrix",syntax:["kron(x, y)"],description:"Calculates the Kronecker product of 2 matrices or vectors.",examples:["kron([[1, 0], [0, 1]], [[1, 2], [3, 4]])","kron([1,1], [2,3,4])"],seealso:["multiply","dot","cross"]},iae={name:"map",category:"Matrix",syntax:["map(x, callback)","map(x, y, ..., callback)"],description:"Create a new matrix or array with the results of the callback function executed on each entry of the matrix/array or the matrices/arrays.",examples:["map([1, 2, 3], square)","map([1, 2], [3, 4], f(a,b) = a + b)"],seealso:["filter","forEach"]},aae={name:"matrixFromColumns",category:"Matrix",syntax:["matrixFromColumns(...arr)","matrixFromColumns(row1, row2)","matrixFromColumns(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual columns.",examples:["matrixFromColumns([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromRows","matrixFromFunction","zeros"]},oae={name:"matrixFromFunction",category:"Matrix",syntax:["matrixFromFunction(size, fn)","matrixFromFunction(size, fn, format)","matrixFromFunction(size, fn, format, datatype)","matrixFromFunction(size, format, fn)","matrixFromFunction(size, format, datatype, fn)"],description:"Create a matrix by evaluating a generating function at each index.",examples:["f(I) = I[1] - I[2]","matrixFromFunction([3,3], f)","g(I) = I[1] - I[2] == 1 ? 4 : 0",'matrixFromFunction([100, 100], "sparse", g)',"matrixFromFunction([5], random)"],seealso:["matrix","matrixFromRows","matrixFromColumns","zeros"]},sae={name:"matrixFromRows",category:"Matrix",syntax:["matrixFromRows(...arr)","matrixFromRows(row1, row2)","matrixFromRows(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual rows.",examples:["matrixFromRows([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromColumns","matrixFromFunction","zeros"]},uae={name:"ones",category:"Matrix",syntax:["ones(m)","ones(m, n)","ones(m, n, p, ...)","ones([m])","ones([m, n])","ones([m, n, p, ...])"],description:"Create a matrix containing ones.",examples:["ones(3)","ones(3, 5)","ones([2,3]) * 4.5","a = [1, 2, 3; 4, 5, 6]","ones(size(a))"],seealso:["concat","det","diag","identity","inv","range","size","squeeze","subset","trace","transpose","zeros"]},lae={name:"partitionSelect",category:"Matrix",syntax:["partitionSelect(x, k)","partitionSelect(x, k, compare)"],description:"Partition-based selection of an array or 1D matrix. Will find the kth smallest value, and mutates the input array. Uses Quickselect.",examples:["partitionSelect([5, 10, 1], 2)",'partitionSelect(["C", "B", "A", "D"], 1, compareText)',"arr = [5, 2, 1]","partitionSelect(arr, 0) # returns 1, arr is now: [1, 2, 5]","arr","partitionSelect(arr, 1, 'desc') # returns 2, arr is now: [5, 2, 1]","arr"],seealso:["sort"]},cae={name:"range",category:"Type",syntax:["start:end","start:step:end","range(start, end)","range(start, end, step)","range(string)"],description:"Create a range. Lower bound of the range is included, upper bound is excluded.",examples:["1:5","3:-1:-3","range(3, 7)","range(0, 12, 2)",'range("4:10")',"range(1m, 1m, 3m)","a = [1, 2, 3, 4; 5, 6, 7, 8]","a[1:2, 1:2]"],seealso:["concat","det","diag","identity","inv","ones","size","squeeze","subset","trace","transpose","zeros"]},fae={name:"reshape",category:"Matrix",syntax:["reshape(x, sizes)"],description:"Reshape a multi dimensional array to fit the specified dimensions.",examples:["reshape([1, 2, 3, 4, 5, 6], [2, 3])","reshape([[1, 2], [3, 4]], [1, 4])","reshape([[1, 2], [3, 4]], [4])","reshape([1, 2, 3, 4], [-1, 2])"],seealso:["size","squeeze","resize"]},dae={name:"resize",category:"Matrix",syntax:["resize(x, size)","resize(x, size, defaultValue)"],description:"Resize a matrix.",examples:["resize([1,2,3,4,5], [3])","resize([1,2,3], [5])","resize([1,2,3], [5], -1)","resize(2, [2, 3])",'resize("hello", [8], "!")'],seealso:["size","subset","squeeze","reshape"]},hae={name:"rotate",category:"Matrix",syntax:["rotate(w, theta)","rotate(w, theta, v)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotate([1, 0], pi / 2)",'rotate(matrix([1, 0]), unit("35deg"))','rotate([1, 0, 0], unit("90deg"), [0, 0, 1])','rotate(matrix([1, 0, 0]), unit("90deg"), matrix([0, 0, 1]))'],seealso:["matrix","rotationMatrix"]},pae={name:"rotationMatrix",category:"Matrix",syntax:["rotationMatrix(theta)","rotationMatrix(theta, v)","rotationMatrix(theta, v, format)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotationMatrix(pi / 2)",'rotationMatrix(unit("45deg"), [0, 0, 1])','rotationMatrix(1, matrix([0, 0, 1]), "sparse")'],seealso:["cos","sin"]},mae={name:"row",category:"Matrix",syntax:["row(x, index)"],description:"Return a row from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","row(A, 1)","row(A, 2)"],seealso:["column","matrixFromRows"]},vae={name:"size",category:"Matrix",syntax:["size(x)"],description:"Calculate the size of a matrix.",examples:["size(2.3)",'size("hello world")',"a = [1, 2; 3, 4; 5, 6]","size(a)","size(1:6)"],seealso:["concat","count","det","diag","identity","inv","ones","range","squeeze","subset","trace","transpose","zeros"]},gae={name:"sort",category:"Matrix",syntax:["sort(x)","sort(x, compare)"],description:'Sort the items in a matrix. Compare can be a string "asc", "desc", "natural", or a custom sort function.',examples:["sort([5, 10, 1])",'sort(["C", "B", "A", "D"], "natural")',"sortByLength(a, b) = size(a)[1] - size(b)[1]",'sort(["Langdon", "Tom", "Sara"], sortByLength)','sort(["10", "1", "2"], "natural")'],seealso:["map","filter","forEach"]},yae={name:"squeeze",category:"Matrix",syntax:["squeeze(x)"],description:"Remove inner and outer singleton dimensions from a matrix.",examples:["a = zeros(3,2,1)","size(squeeze(a))","b = zeros(1,1,3)","size(squeeze(b))"],seealso:["concat","det","diag","identity","inv","ones","range","size","subset","trace","transpose","zeros"]},xae={name:"subset",category:"Matrix",syntax:["value(index)","value(index) = replacement","subset(value, [index])","subset(value, [index], replacement)"],description:"Get or set a subset of the entries of a matrix or characters of a string. Indexes are one-based. There should be one index specification for each dimension of the target. Each specification can be a single index, a list of indices, or a range in colon notation `l:u`. In a range, both the lower bound l and upper bound u are included; and if a bound is omitted it defaults to the most extreme valid value. The cartesian product of the indices specified in each dimension determines the target of the operation.",examples:["d = [1, 2; 3, 4]","e = []","e[1, 1:2] = [5, 6]","e[2, :] = [7, 8]","f = d * e","f[2, 1]","f[:, 1]","f[[1,2], [1,3]] = [9, 10; 11, 12]","f"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","trace","transpose","zeros"]},bae={name:"trace",category:"Matrix",syntax:["trace(A)"],description:"Calculate the trace of a matrix: the sum of the elements on the main diagonal of a square matrix.",examples:["A = [1, 2, 3; -1, 2, 3; 2, 0, 3]","trace(A)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","transpose","zeros"]},wae={name:"transpose",category:"Matrix",syntax:["x'","transpose(x)"],description:"Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","transpose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},_ae={name:"zeros",category:"Matrix",syntax:["zeros(m)","zeros(m, n)","zeros(m, n, p, ...)","zeros([m])","zeros([m, n])","zeros([m, n, p, ...])"],description:"Create a matrix containing zeros.",examples:["zeros(3)","zeros(3, 5)","a = [1, 2, 3; 4, 5, 6]","zeros(size(a))"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose"]},Eae={name:"fft",category:"Matrix",syntax:["fft(x)"],description:"Calculate N-dimensional Fourier transform",examples:["fft([[1, 0], [1, 0]])"],seealso:["ifft"]},Cae={name:"ifft",category:"Matrix",syntax:["ifft(x)"],description:"Calculate N-dimensional inverse Fourier transform",examples:["ifft([[2, 2], [0, 0]])"],seealso:["fft"]},Nae={name:"combinations",category:"Probability",syntax:["combinations(n, k)"],description:"Compute the number of combinations of n items taken k at a time",examples:["combinations(7, 5)"],seealso:["combinationsWithRep","permutations","factorial"]},Sae={name:"combinationsWithRep",category:"Probability",syntax:["combinationsWithRep(n, k)"],description:"Compute the number of combinations of n items taken k at a time with replacements.",examples:["combinationsWithRep(7, 5)"],seealso:["combinations","permutations","factorial"]},Dae={name:"factorial",category:"Probability",syntax:["n!","factorial(n)"],description:"Compute the factorial of a value",examples:["5!","5 * 4 * 3 * 2 * 1","3!"],seealso:["combinations","combinationsWithRep","permutations","gamma"]},Aae={name:"gamma",category:"Probability",syntax:["gamma(n)"],description:"Compute the gamma function. For small values, the Lanczos approximation is used, and for large values the extended Stirling approximation.",examples:["gamma(4)","3!","gamma(1/2)","sqrt(pi)"],seealso:["factorial"]},Tae={name:"lgamma",category:"Probability",syntax:["lgamma(n)"],description:"Logarithm of the gamma function for real, positive numbers and complex numbers, using Lanczos approximation for numbers and Stirling series for complex numbers.",examples:["lgamma(4)","lgamma(1/2)","lgamma(i)","lgamma(complex(1.1, 2))"],seealso:["gamma"]},Mae={name:"kldivergence",category:"Probability",syntax:["kldivergence(x, y)"],description:"Calculate the Kullback-Leibler (KL) divergence  between two distributions.",examples:["kldivergence([0.7,0.5,0.4], [0.2,0.9,0.5])"],seealso:[]},Iae={name:"multinomial",category:"Probability",syntax:["multinomial(A)"],description:"Multinomial Coefficients compute the number of ways of picking a1, a2, ..., ai unordered outcomes from `n` possibilities. multinomial takes one array of integers as an argument. The following condition must be enforced: every ai > 0.",examples:["multinomial([1, 2, 1])"],seealso:["combinations","factorial"]},Rae={name:"permutations",category:"Probability",syntax:["permutations(n)","permutations(n, k)"],description:"Compute the number of permutations of n items taken k at a time",examples:["permutations(5)","permutations(5, 3)"],seealso:["combinations","combinationsWithRep","factorial"]},kae={name:"pickRandom",category:"Probability",syntax:["pickRandom(array)","pickRandom(array, number)","pickRandom(array, weights)","pickRandom(array, number, weights)","pickRandom(array, weights, number)"],description:"Pick a random entry from a given array.",examples:["pickRandom(0:10)","pickRandom([1, 3, 1, 6])","pickRandom([1, 3, 1, 6], 2)","pickRandom([1, 3, 1, 6], [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], 2, [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], [2, 3, 2, 1], 2)"],seealso:["random","randomInt"]},Fae={name:"random",category:"Probability",syntax:["random()","random(max)","random(min, max)","random(size)","random(size, max)","random(size, min, max)"],description:"Return a random number.",examples:["random()","random(10, 20)","random([2, 3])"],seealso:["pickRandom","randomInt"]},Pae={name:"randomInt",category:"Probability",syntax:["randomInt(max)","randomInt(min, max)","randomInt(size)","randomInt(size, max)","randomInt(size, min, max)"],description:"Return a random integer number",examples:["randomInt(10, 20)","randomInt([2, 3], 10)"],seealso:["pickRandom","random"]},Oae={name:"compare",category:"Relational",syntax:["compare(x, y)"],description:"Compare two values. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compare(2, 3)","compare(3, 2)","compare(2, 2)","compare(5cm, 40mm)","compare(2, [1, 2, 3])"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compareNatural","compareText"]},Bae={name:"compareNatural",category:"Relational",syntax:["compareNatural(x, y)"],description:"Compare two values of any type in a deterministic, natural way. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compareNatural(2, 3)","compareNatural(3, 2)","compareNatural(2, 2)","compareNatural(5cm, 40mm)",'compareNatural("2", "10")',"compareNatural(2 + 3i, 2 + 4i)","compareNatural([1, 2, 4], [1, 2, 3])","compareNatural([1, 5], [1, 2, 3])","compareNatural([1, 2], [1, 2])","compareNatural({a: 2}, {a: 4})"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare","compareText"]},Lae={name:"compareText",category:"Relational",syntax:["compareText(x, y)"],description:"Compare two strings lexically. Comparison is case sensitive. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:['compareText("B", "A")','compareText("A", "B")','compareText("A", "A")','compareText("2", "10")','compare("2", "10")',"compare(2, 10)",'compareNatural("2", "10")','compareText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural"]},jae={name:"deepEqual",category:"Relational",syntax:["deepEqual(x, y)"],description:"Check equality of two matrices element wise. Returns true if the size of both matrices is equal and when and each of the elements are equal.",examples:["deepEqual([1,3,4], [1,3,4])","deepEqual([1,3,4], [1,3])"],seealso:["equal","unequal","smaller","larger","smallerEq","largerEq","compare"]},$ae={name:"equal",category:"Relational",syntax:["x == y","equal(x, y)"],description:"Check equality of two values. Returns true if the values are equal, and false if not.",examples:["2+2 == 3","2+2 == 4","a = 3.2","b = 6-2.8","a == b","50cm == 0.5m"],seealso:["unequal","smaller","larger","smallerEq","largerEq","compare","deepEqual","equalText"]},zae={name:"equalText",category:"Relational",syntax:["equalText(x, y)"],description:"Check equality of two strings. Comparison is case sensitive. Returns true if the values are equal, and false if not.",examples:['equalText("Hello", "Hello")','equalText("a", "A")','equal("2e3", "2000")','equalText("2e3", "2000")','equalText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural","compareText","equal"]},Uae={name:"larger",category:"Relational",syntax:["x > y","larger(x, y)"],description:"Check if value x is larger than y. Returns true if x is larger than y, and false if not. Comparing a value with NaN returns false.",examples:["2 > 3","5 > 2*2","a = 3.3","b = 6-2.8","(a > b)","(b < a)","5 cm > 2 inch"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare"]},Wae={name:"largerEq",category:"Relational",syntax:["x >= y","largerEq(x, y)"],description:"Check if value x is larger or equal to y. Returns true if x is larger or equal to y, and false if not.",examples:["2 >= 1+1","2 > 1+1","a = 3.2","b = 6-2.8","(a >= b)"],seealso:["equal","unequal","smallerEq","smaller","compare"]},Vae={name:"smaller",category:"Relational",syntax:["x < y","smaller(x, y)"],description:"Check if value x is smaller than value y. Returns true if x is smaller than y, and false if not. Comparing a value with NaN returns false.",examples:["2 < 3","5 < 2*2","a = 3.3","b = 6-2.8","(a < b)","5 cm < 2 inch"],seealso:["equal","unequal","larger","smallerEq","largerEq","compare"]},qae={name:"smallerEq",category:"Relational",syntax:["x <= y","smallerEq(x, y)"],description:"Check if value x is smaller or equal to value y. Returns true if x is smaller than y, and false if not.",examples:["2 <= 1+1","2 < 1+1","a = 3.2","b = 6-2.8","(a <= b)"],seealso:["equal","unequal","larger","smaller","largerEq","compare"]},Hae={name:"unequal",category:"Relational",syntax:["x != y","unequal(x, y)"],description:"Check unequality of two values. Returns true if the values are unequal, and false if they are equal.",examples:["2+2 != 3","2+2 != 4","a = 3.2","b = 6-2.8","a != b","50cm != 0.5m","5 cm != 2 inch"],seealso:["equal","smaller","larger","smallerEq","largerEq","compare","deepEqual"]},Gae={name:"setCartesian",category:"Set",syntax:["setCartesian(set1, set2)"],description:"Create the cartesian product of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays and the values will be sorted in ascending order before the operation.",examples:["setCartesian([1, 2], [3, 4])"],seealso:["setUnion","setIntersect","setDifference","setPowerset"]},Kae={name:"setDifference",category:"Set",syntax:["setDifference(set1, set2)"],description:"Create the difference of two (multi)sets: every element of set1, that is not the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setDifference([1, 2, 3, 4], [3, 4, 5, 6])","setDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setSymDifference"]},Yae={name:"setDistinct",category:"Set",syntax:["setDistinct(set)"],description:"Collect the distinct elements of a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setDistinct([1, 1, 1, 2, 2, 3])"],seealso:["setMultiplicity"]},Xae={name:"setIntersect",category:"Set",syntax:["setIntersect(set1, set2)"],description:"Create the intersection of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIntersect([1, 2, 3, 4], [3, 4, 5, 6])","setIntersect([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setDifference"]},Qae={name:"setIsSubset",category:"Set",syntax:["setIsSubset(set1, set2)"],description:"Check whether a (multi)set is a subset of another (multi)set: every element of set1 is the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIsSubset([1, 2], [3, 4, 5, 6])","setIsSubset([3, 4], [3, 4, 5, 6])"],seealso:["setUnion","setIntersect","setDifference"]},Zae={name:"setMultiplicity",category:"Set",syntax:["setMultiplicity(element, set)"],description:"Count the multiplicity of an element in a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setMultiplicity(1, [1, 2, 2, 4])","setMultiplicity(2, [1, 2, 2, 4])"],seealso:["setDistinct","setSize"]},Jae={name:"setPowerset",category:"Set",syntax:["setPowerset(set)"],description:"Create the powerset of a (multi)set: the powerset contains very possible subsets of a (multi)set. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setPowerset([1, 2, 3])"],seealso:["setCartesian"]},eoe={name:"setSize",category:"Set",syntax:["setSize(set)","setSize(set, unique)"],description:'Count the number of elements of a (multi)set. When the second parameter "unique" is true, count only the unique values. A multi-dimension array will be converted to a single-dimension array before the operation.',examples:["setSize([1, 2, 2, 4])","setSize([1, 2, 2, 4], true)"],seealso:["setUnion","setIntersect","setDifference"]},toe={name:"setSymDifference",category:"Set",syntax:["setSymDifference(set1, set2)"],description:"Create the symmetric difference of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setSymDifference([1, 2, 3, 4], [3, 4, 5, 6])","setSymDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setDifference"]},noe={name:"setUnion",category:"Set",syntax:["setUnion(set1, set2)"],description:"Create the union of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setUnion([1, 2, 3, 4], [3, 4, 5, 6])","setUnion([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setIntersect","setDifference"]},roe={name:"zpk2tf",category:"Signal",syntax:["zpk2tf(z, p, k)"],description:"Compute the transfer function of a zero-pole-gain model.",examples:["zpk2tf([1, 2], [-1, -2], 1)","zpk2tf([1, 2], [-1, -2])","zpk2tf([1 - 3i, 2 + 2i], [-1, -2])"],seealso:[]},ioe={name:"freqz",category:"Signal",syntax:["freqz(b, a)","freqz(b, a, w)"],description:"Calculates the frequency response of a filter given its numerator and denominator coefficients.",examples:["freqz([1, 2], [1, 2, 3])","freqz([1, 2], [1, 2, 3], [0, 1])","freqz([1, 2], [1, 2, 3], 512)"],seealso:[]},aoe={name:"erf",category:"Special",syntax:["erf(x)"],description:"Compute the erf function of a value using a rational Chebyshev approximations for different intervals of x",examples:["erf(0.2)","erf(-0.5)","erf(4)"],seealso:[]},ooe={name:"zeta",category:"Special",syntax:["zeta(s)"],description:"Compute the Riemann Zeta Function using an infinite series and Riemann's Functional Equation for the entire complex plane",examples:["zeta(0.2)","zeta(-0.5)","zeta(4)"],seealso:[]},soe={name:"mad",category:"Statistics",syntax:["mad(a, b, c, ...)","mad(A)"],description:"Compute the median absolute deviation of a matrix or a list with values. The median absolute deviation is defined as the median of the absolute deviations from the median.",examples:["mad(10, 20, 30)","mad([1, 2, 3])"],seealso:["mean","median","std","abs"]},uoe={name:"max",category:"Statistics",syntax:["max(a, b, c, ...)","max(A)","max(A, dimension)"],description:"Compute the maximum value of a list of values. If any NaN values are found, the function yields the last NaN in the input.",examples:["max(2, 3, 4, 1)","max([2, 3, 4, 1])","max([2, 5; 4, 3])","max([2, 5; 4, 3], 1)","max([2, 5; 4, 3], 2)","max(2.7, 7.1, -4.5, 2.0, 4.1)","min(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["mean","median","min","prod","std","sum","variance"]},loe={name:"mean",category:"Statistics",syntax:["mean(a, b, c, ...)","mean(A)","mean(A, dimension)"],description:"Compute the arithmetic mean of a list of values.",examples:["mean(2, 3, 4, 1)","mean([2, 3, 4, 1])","mean([2, 5; 4, 3])","mean([2, 5; 4, 3], 1)","mean([2, 5; 4, 3], 2)","mean([1.0, 2.7, 3.2, 4.0])"],seealso:["max","median","min","prod","std","sum","variance"]},coe={name:"median",category:"Statistics",syntax:["median(a, b, c, ...)","median(A)"],description:"Compute the median of all values. The values are sorted and the middle value is returned. In case of an even number of values, the average of the two middle values is returned.",examples:["median(5, 2, 7)","median([3, -1, 5, 7])"],seealso:["max","mean","min","prod","std","sum","variance","quantileSeq"]},foe={name:"min",category:"Statistics",syntax:["min(a, b, c, ...)","min(A)","min(A, dimension)"],description:"Compute the minimum value of a list of values. If any NaN values are found, the function yields the last NaN in the input.",examples:["min(2, 3, 4, 1)","min([2, 3, 4, 1])","min([2, 5; 4, 3])","min([2, 5; 4, 3], 1)","min([2, 5; 4, 3], 2)","min(2.7, 7.1, -4.5, 2.0, 4.1)","max(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["max","mean","median","prod","std","sum","variance"]},doe={name:"mode",category:"Statistics",syntax:["mode(a, b, c, ...)","mode(A)","mode(A, a, b, B, c, ...)"],description:"Computes the mode of all values as an array. In case mode being more than one, multiple values are returned in an array.",examples:["mode(2, 1, 4, 3, 1)","mode([1, 2.7, 3.2, 4, 2.7])","mode(1, 4, 6, 1, 6)"],seealso:["max","mean","min","median","prod","std","sum","variance"]},hoe={name:"prod",category:"Statistics",syntax:["prod(a, b, c, ...)","prod(A)"],description:"Compute the product of all values.",examples:["prod(2, 3, 4)","prod([2, 3, 4])","prod([2, 5; 4, 3])"],seealso:["max","mean","min","median","min","std","sum","variance"]},poe={name:"quantileSeq",category:"Statistics",syntax:["quantileSeq(A, prob[, sorted])","quantileSeq(A, [prob1, prob2, ...][, sorted])","quantileSeq(A, N[, sorted])"],description:`Compute the prob order quantile of a matrix or a list with values. The sequence is sorted and the middle value is returned. Supported types of sequence values are: Number, BigNumber, Unit Supported types of probability are: Number, BigNumber. 

In case of a (multi dimensional) array or matrix, the prob order quantile of all elements will be calculated.`,examples:["quantileSeq([3, -1, 5, 7], 0.5)","quantileSeq([3, -1, 5, 7], [1/3, 2/3])","quantileSeq([3, -1, 5, 7], 2)","quantileSeq([-1, 3, 5, 7], 0.5, true)"],seealso:["mean","median","min","max","prod","std","sum","variance"]},moe={name:"std",category:"Statistics",syntax:["std(a, b, c, ...)","std(A)","std(A, dimension)","std(A, normalization)","std(A, dimension, normalization)"],description:'Compute the standard deviation of all values, defined as std(A) = sqrt(variance(A)). Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["std(2, 4, 6)","std([2, 4, 6, 8])",'std([2, 4, 6, 8], "uncorrected")','std([2, 4, 6, 8], "biased")',"std([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","prod","sum","variance"]},voe={name:"cumsum",category:"Statistics",syntax:["cumsum(a, b, c, ...)","cumsum(A)"],description:"Compute the cumulative sum of all values.",examples:["cumsum(2, 3, 4, 1)","cumsum([2, 3, 4, 1])","cumsum([1, 2; 3, 4])","cumsum([1, 2; 3, 4], 1)","cumsum([1, 2; 3, 4], 2)"],seealso:["max","mean","median","min","prod","std","sum","variance"]},goe={name:"sum",category:"Statistics",syntax:["sum(a, b, c, ...)","sum(A)","sum(A, dimension)"],description:"Compute the sum of all values.",examples:["sum(2, 3, 4, 1)","sum([2, 3, 4, 1])","sum([2, 5; 4, 3])"],seealso:["max","mean","median","min","prod","std","sum","variance"]},yoe={name:"variance",category:"Statistics",syntax:["variance(a, b, c, ...)","variance(A)","variance(A, dimension)","variance(A, normalization)","variance(A, dimension, normalization)"],description:'Compute the variance of all values. Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["variance(2, 4, 6)","variance([2, 4, 6, 8])",'variance([2, 4, 6, 8], "uncorrected")','variance([2, 4, 6, 8], "biased")',"variance([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","min","prod","std","sum"]},xoe={name:"corr",category:"Statistics",syntax:["corr(A,B)"],description:"Compute the correlation coefficient of a two list with values, For matrices, the matrix correlation coefficient is calculated.",examples:["corr([2, 4, 6, 8],[1, 2, 3, 6])","corr(matrix([[1, 2.2, 3, 4.8, 5], [1, 2, 3, 4, 5]]), matrix([[4, 5.3, 6.6, 7, 8], [1, 2, 3, 4, 5]]))"],seealso:["max","mean","min","median","min","prod","std","sum"]},boe={name:"acos",category:"Trigonometry",syntax:["acos(x)"],description:"Compute the inverse cosine of a value in radians.",examples:["acos(0.5)","acos(cos(2.3))"],seealso:["cos","atan","asin"]},woe={name:"acosh",category:"Trigonometry",syntax:["acosh(x)"],description:"Calculate the hyperbolic arccos of a value, defined as `acosh(x) = ln(sqrt(x^2 - 1) + x)`.",examples:["acosh(1.5)"],seealso:["cosh","asinh","atanh"]},_oe={name:"acot",category:"Trigonometry",syntax:["acot(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acot(0.5)","acot(cot(0.5))","acot(2)"],seealso:["cot","atan"]},Eoe={name:"acoth",category:"Trigonometry",syntax:["acoth(x)"],description:"Calculate the inverse hyperbolic tangent of a value, defined as `acoth(x) = (ln((x+1)/x) + ln(x/(x-1))) / 2`.",examples:["acoth(2)","acoth(0.5)"],seealso:["acsch","asech"]},Coe={name:"acsc",category:"Trigonometry",syntax:["acsc(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acsc(2)","acsc(csc(0.5))","acsc(0.5)"],seealso:["csc","asin","asec"]},Noe={name:"acsch",category:"Trigonometry",syntax:["acsch(x)"],description:"Calculate the inverse hyperbolic cosecant of a value, defined as `acsch(x) = ln(1/x + sqrt(1/x^2 + 1))`.",examples:["acsch(0.5)"],seealso:["asech","acoth"]},Soe={name:"asec",category:"Trigonometry",syntax:["asec(x)"],description:"Calculate the inverse secant of a value.",examples:["asec(0.5)","asec(sec(0.5))","asec(2)"],seealso:["acos","acot","acsc"]},Doe={name:"asech",category:"Trigonometry",syntax:["asech(x)"],description:"Calculate the inverse secant of a value.",examples:["asech(0.5)"],seealso:["acsch","acoth"]},Aoe={name:"asin",category:"Trigonometry",syntax:["asin(x)"],description:"Compute the inverse sine of a value in radians.",examples:["asin(0.5)","asin(sin(0.5))"],seealso:["sin","acos","atan"]},Toe={name:"asinh",category:"Trigonometry",syntax:["asinh(x)"],description:"Calculate the hyperbolic arcsine of a value, defined as `asinh(x) = ln(x + sqrt(x^2 + 1))`.",examples:["asinh(0.5)"],seealso:["acosh","atanh"]},Moe={name:"atan",category:"Trigonometry",syntax:["atan(x)"],description:"Compute the inverse tangent of a value in radians.",examples:["atan(0.5)","atan(tan(0.5))"],seealso:["tan","acos","asin"]},Ioe={name:"atan2",category:"Trigonometry",syntax:["atan2(y, x)"],description:"Computes the principal value of the arc tangent of y/x in radians.",examples:["atan2(2, 2) / pi","angle = 60 deg in rad","x = cos(angle)","y = sin(angle)","atan2(y, x)"],seealso:["sin","cos","tan"]},Roe={name:"atanh",category:"Trigonometry",syntax:["atanh(x)"],description:"Calculate the hyperbolic arctangent of a value, defined as `atanh(x) = ln((1 + x)/(1 - x)) / 2`.",examples:["atanh(0.5)"],seealso:["acosh","asinh"]},koe={name:"cos",category:"Trigonometry",syntax:["cos(x)"],description:"Compute the cosine of x in radians.",examples:["cos(2)","cos(pi / 4) ^ 2","cos(180 deg)","cos(60 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["acos","sin","tan"]},Foe={name:"cosh",category:"Trigonometry",syntax:["cosh(x)"],description:"Compute the hyperbolic cosine of x in radians.",examples:["cosh(0.5)"],seealso:["sinh","tanh","coth"]},Poe={name:"cot",category:"Trigonometry",syntax:["cot(x)"],description:"Compute the cotangent of x in radians. Defined as 1/tan(x)",examples:["cot(2)","1 / tan(2)"],seealso:["sec","csc","tan"]},Ooe={name:"coth",category:"Trigonometry",syntax:["coth(x)"],description:"Compute the hyperbolic cotangent of x in radians.",examples:["coth(2)","1 / tanh(2)"],seealso:["sech","csch","tanh"]},Boe={name:"csc",category:"Trigonometry",syntax:["csc(x)"],description:"Compute the cosecant of x in radians. Defined as 1/sin(x)",examples:["csc(2)","1 / sin(2)"],seealso:["sec","cot","sin"]},Loe={name:"csch",category:"Trigonometry",syntax:["csch(x)"],description:"Compute the hyperbolic cosecant of x in radians. Defined as 1/sinh(x)",examples:["csch(2)","1 / sinh(2)"],seealso:["sech","coth","sinh"]},joe={name:"sec",category:"Trigonometry",syntax:["sec(x)"],description:"Compute the secant of x in radians. Defined as 1/cos(x)",examples:["sec(2)","1 / cos(2)"],seealso:["cot","csc","cos"]},$oe={name:"sech",category:"Trigonometry",syntax:["sech(x)"],description:"Compute the hyperbolic secant of x in radians. Defined as 1/cosh(x)",examples:["sech(2)","1 / cosh(2)"],seealso:["coth","csch","cosh"]},zoe={name:"sin",category:"Trigonometry",syntax:["sin(x)"],description:"Compute the sine of x in radians.",examples:["sin(2)","sin(pi / 4) ^ 2","sin(90 deg)","sin(30 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["asin","cos","tan"]},Uoe={name:"sinh",category:"Trigonometry",syntax:["sinh(x)"],description:"Compute the hyperbolic sine of x in radians.",examples:["sinh(0.5)"],seealso:["cosh","tanh"]},Woe={name:"tan",category:"Trigonometry",syntax:["tan(x)"],description:"Compute the tangent of x in radians.",examples:["tan(0.5)","sin(0.5) / cos(0.5)","tan(pi / 4)","tan(45 deg)"],seealso:["atan","sin","cos"]},Voe={name:"tanh",category:"Trigonometry",syntax:["tanh(x)"],description:"Compute the hyperbolic tangent of x in radians.",examples:["tanh(0.5)","sinh(0.5) / cosh(0.5)"],seealso:["sinh","cosh"]},qoe={name:"to",category:"Units",syntax:["x to unit","to(x, unit)"],description:"Change the unit of a value.",examples:["5 inch to cm","3.2kg to g","16 bytes in bits"],seealso:[]},Hoe={name:"bin",category:"Utils",syntax:["bin(value)"],description:"Format a number as binary",examples:["bin(2)"],seealso:["oct","hex"]},Goe={name:"clone",category:"Utils",syntax:["clone(x)"],description:"Clone a variable. Creates a copy of primitive variables, and a deep copy of matrices",examples:["clone(3.5)","clone(2 - 4i)","clone(45 deg)","clone([1, 2; 3, 4])",'clone("hello world")'],seealso:[]},Koe={name:"format",category:"Utils",syntax:["format(value)","format(value, precision)"],description:"Format a value of any type as string.",examples:["format(2.3)","format(3 - 4i)","format([])","format(pi, 3)"],seealso:["print"]},Yoe={name:"hasNumericValue",category:"Utils",syntax:["hasNumericValue(x)"],description:"Test whether a value is an numeric value. In case of a string, true is returned if the string contains a numeric value.",examples:["hasNumericValue(2)",'hasNumericValue("2")','isNumeric("2")',"hasNumericValue(0)","hasNumericValue(bignumber(500))","hasNumericValue(fraction(0.125))","hasNumericValue(2 + 3i)",'hasNumericValue([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","isNumeric"]},Xoe={name:"hex",category:"Utils",syntax:["hex(value)"],description:"Format a number as hexadecimal",examples:["hex(240)"],seealso:["bin","oct"]},Qoe={name:"isInteger",category:"Utils",syntax:["isInteger(x)"],description:"Test whether a value is an integer number.",examples:["isInteger(2)","isInteger(3.5)","isInteger([3, 0.5, -2])"],seealso:["isNegative","isNumeric","isPositive","isZero"]},Zoe={name:"isNaN",category:"Utils",syntax:["isNaN(x)"],description:"Test whether a value is NaN (not a number)",examples:["isNaN(2)","isNaN(0 / 0)","isNaN(NaN)","isNaN(Infinity)"],seealso:["isNegative","isNumeric","isPositive","isZero"]},Joe={name:"isNegative",category:"Utils",syntax:["isNegative(x)"],description:"Test whether a value is negative: smaller than zero.",examples:["isNegative(2)","isNegative(0)","isNegative(-4)","isNegative([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isPositive","isZero"]},ese={name:"isNumeric",category:"Utils",syntax:["isNumeric(x)"],description:"Test whether a value is a numeric value. Returns true when the input is a number, BigNumber, Fraction, or boolean.",examples:["isNumeric(2)",'isNumeric("2")','hasNumericValue("2")',"isNumeric(0)","isNumeric(bignumber(500))","isNumeric(fraction(0.125))","isNumeric(2 + 3i)",'isNumeric([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","hasNumericValue"]},tse={name:"isPositive",category:"Utils",syntax:["isPositive(x)"],description:"Test whether a value is positive: larger than zero.",examples:["isPositive(2)","isPositive(0)","isPositive(-4)","isPositive([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},nse={name:"isPrime",category:"Utils",syntax:["isPrime(x)"],description:"Test whether a value is prime: has no divisors other than itself and one.",examples:["isPrime(3)","isPrime(-2)","isPrime([2, 17, 100])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},rse={name:"isZero",category:"Utils",syntax:["isZero(x)"],description:"Test whether a value is zero.",examples:["isZero(2)","isZero(0)","isZero(-4)","isZero([3, 0, -2, 0])"],seealso:["isInteger","isNumeric","isNegative","isPositive"]},ise={name:"numeric",category:"Utils",syntax:["numeric(x)"],description:"Convert a numeric input to a specific numeric type: number, BigNumber, bigint, or Fraction.",examples:['numeric("4")','numeric("4", "number")','numeric("4", "bigint")','numeric("4", "BigNumber")','numeric("4", "Fraction")','numeric(4, "Fraction")','numeric(fraction(2, 5), "number")'],seealso:["number","bigint","fraction","bignumber","string","format"]},ase={name:"oct",category:"Utils",syntax:["oct(value)"],description:"Format a number as octal",examples:["oct(56)"],seealso:["bin","hex"]},ose={name:"print",category:"Utils",syntax:["print(template, values)","print(template, values, precision)"],description:"Interpolate values into a string template.",examples:['print("Lucy is $age years old", {age: 5})','print("The value of pi is $pi", {pi: pi}, 3)','print("Hello, $user.name!", {user: {name: "John"}})','print("Values: $1, $2, $3", [6, 9, 4])'],seealso:["format"]},sse={name:"typeOf",category:"Utils",syntax:["typeOf(x)"],description:"Get the type of a variable.",examples:["typeOf(3.5)","typeOf(2 - 4i)","typeOf(45 deg)",'typeOf("hello world")'],seealso:["getMatrixDataType"]},use={name:"solveODE",category:"Numeric",syntax:["solveODE(func, tspan, y0)","solveODE(func, tspan, y0, options)"],description:"Numerical Integration of Ordinary Differential Equations.",examples:["f(t,y) = y","tspan = [0, 4]","solveODE(f, tspan, 1)","solveODE(f, tspan, [1, 2])",'solveODE(f, tspan, 1, { method:"RK23", maxStep:0.1 })'],seealso:["derivative","simplifyCore"]},lse={bignumber:Qne,bigint:Zne,boolean:Jne,complex:ere,createUnit:tre,fraction:nre,index:rre,matrix:ire,number:are,sparse:ore,splitUnit:sre,string:ure,unit:lre,e:rT,E:rT,false:One,i:Bne,Infinity:Lne,LN2:$ne,LN10:jne,LOG2E:Une,LOG10E:zne,NaN:Wne,null:Vne,pi:iT,PI:iT,phi:qne,SQRT1_2:Hne,SQRT2:Gne,tau:Kne,true:Yne,version:Xne,speedOfLight:{description:"Speed of light in vacuum",examples:["speedOfLight"]},gravitationConstant:{description:"Newtonian constant of gravitation",examples:["gravitationConstant"]},planckConstant:{description:"Planck constant",examples:["planckConstant"]},reducedPlanckConstant:{description:"Reduced Planck constant",examples:["reducedPlanckConstant"]},magneticConstant:{description:"Magnetic constant (vacuum permeability)",examples:["magneticConstant"]},electricConstant:{description:"Electric constant (vacuum permeability)",examples:["electricConstant"]},vacuumImpedance:{description:"Characteristic impedance of vacuum",examples:["vacuumImpedance"]},coulomb:{description:"Coulomb's constant",examples:["coulomb"]},elementaryCharge:{description:"Elementary charge",examples:["elementaryCharge"]},bohrMagneton:{description:"Bohr magneton",examples:["bohrMagneton"]},conductanceQuantum:{description:"Conductance quantum",examples:["conductanceQuantum"]},inverseConductanceQuantum:{description:"Inverse conductance quantum",examples:["inverseConductanceQuantum"]},magneticFluxQuantum:{description:"Magnetic flux quantum",examples:["magneticFluxQuantum"]},nuclearMagneton:{description:"Nuclear magneton",examples:["nuclearMagneton"]},klitzing:{description:"Von Klitzing constant",examples:["klitzing"]},bohrRadius:{description:"Bohr radius",examples:["bohrRadius"]},classicalElectronRadius:{description:"Classical electron radius",examples:["classicalElectronRadius"]},electronMass:{description:"Electron mass",examples:["electronMass"]},fermiCoupling:{description:"Fermi coupling constant",examples:["fermiCoupling"]},fineStructure:{description:"Fine-structure constant",examples:["fineStructure"]},hartreeEnergy:{description:"Hartree energy",examples:["hartreeEnergy"]},protonMass:{description:"Proton mass",examples:["protonMass"]},deuteronMass:{description:"Deuteron Mass",examples:["deuteronMass"]},neutronMass:{description:"Neutron mass",examples:["neutronMass"]},quantumOfCirculation:{description:"Quantum of circulation",examples:["quantumOfCirculation"]},rydberg:{description:"Rydberg constant",examples:["rydberg"]},thomsonCrossSection:{description:"Thomson cross section",examples:["thomsonCrossSection"]},weakMixingAngle:{description:"Weak mixing angle",examples:["weakMixingAngle"]},efimovFactor:{description:"Efimov factor",examples:["efimovFactor"]},atomicMass:{description:"Atomic mass constant",examples:["atomicMass"]},avogadro:{description:"Avogadro's number",examples:["avogadro"]},boltzmann:{description:"Boltzmann constant",examples:["boltzmann"]},faraday:{description:"Faraday constant",examples:["faraday"]},firstRadiation:{description:"First radiation constant",examples:["firstRadiation"]},loschmidt:{description:"Loschmidt constant at T=273.15 K and p=101.325 kPa",examples:["loschmidt"]},gasConstant:{description:"Gas constant",examples:["gasConstant"]},molarPlanckConstant:{description:"Molar Planck constant",examples:["molarPlanckConstant"]},molarVolume:{description:"Molar volume of an ideal gas at T=273.15 K and p=101.325 kPa",examples:["molarVolume"]},sackurTetrode:{description:"Sackur-Tetrode constant at T=1 K and p=101.325 kPa",examples:["sackurTetrode"]},secondRadiation:{description:"Second radiation constant",examples:["secondRadiation"]},stefanBoltzmann:{description:"Stefan-Boltzmann constant",examples:["stefanBoltzmann"]},wienDisplacement:{description:"Wien displacement law constant",examples:["wienDisplacement"]},molarMass:{description:"Molar mass constant",examples:["molarMass"]},molarMassC12:{description:"Molar mass constant of carbon-12",examples:["molarMassC12"]},gravity:{description:"Standard acceleration of gravity (standard acceleration of free-fall on Earth)",examples:["gravity"]},planckLength:{description:"Planck length",examples:["planckLength"]},planckMass:{description:"Planck mass",examples:["planckMass"]},planckTime:{description:"Planck time",examples:["planckTime"]},planckCharge:{description:"Planck charge",examples:["planckCharge"]},planckTemperature:{description:"Planck temperature",examples:["planckTemperature"]},derivative:hre,lsolve:mre,lsolveAll:vre,lup:gre,lusolve:yre,leafCount:pre,polynomialRoot:xre,resolve:_re,simplify:Ere,simplifyConstant:Cre,simplifyCore:Nre,symbolicEqual:Dre,rationalize:wre,slu:Sre,usolve:Are,usolveAll:Tre,qr:bre,abs:Mre,add:Ire,cbrt:Rre,ceil:kre,cube:Fre,divide:Pre,dotDivide:Ore,dotMultiply:Bre,dotPow:Lre,exp:jre,expm:$re,expm1:zre,fix:Ure,floor:Wre,gcd:Vre,hypot:qre,lcm:Gre,log:Kre,log2:Qre,log1p:Xre,log10:Yre,mod:Zre,multiply:Jre,norm:eie,nthRoot:tie,nthRoots:nie,pow:rie,round:iie,sign:aie,sqrt:oie,sqrtm:sie,square:fie,subtract:die,unaryMinus:hie,unaryPlus:pie,xgcd:mie,invmod:Hre,bitAnd:vie,bitNot:gie,bitOr:yie,bitXor:xie,leftShift:bie,rightArithShift:wie,rightLogShift:_ie,bellNumbers:Eie,catalan:Cie,composition:Nie,stirlingS2:Sie,config:cre,import:fre,typed:dre,arg:Die,conj:Aie,re:Mie,im:Tie,evaluate:Iie,help:Rie,distance:kie,intersect:Fie,and:Pie,not:Oie,or:Bie,xor:Lie,mapSlices:jie,concat:zie,count:Uie,cross:Wie,column:$ie,ctranspose:Vie,det:qie,diag:Hie,diff:Gie,dot:Kie,getMatrixDataType:Jie,identity:eae,filter:Xie,flatten:Qie,forEach:Zie,inv:tae,pinv:nae,eigs:Yie,kron:rae,matrixFromFunction:oae,matrixFromRows:sae,matrixFromColumns:aae,map:iae,ones:uae,partitionSelect:lae,range:cae,resize:dae,reshape:fae,rotate:hae,rotationMatrix:pae,row:mae,size:vae,sort:gae,squeeze:yae,subset:xae,trace:bae,transpose:wae,zeros:_ae,fft:Eae,ifft:Cae,sylvester:uie,schur:lie,lyap:cie,solveODE:use,combinations:Nae,combinationsWithRep:Sae,factorial:Dae,gamma:Aae,kldivergence:Mae,lgamma:Tae,multinomial:Iae,permutations:Rae,pickRandom:kae,random:Fae,randomInt:Pae,compare:Oae,compareNatural:Bae,compareText:Lae,deepEqual:jae,equal:$ae,equalText:zae,larger:Uae,largerEq:Wae,smaller:Vae,smallerEq:qae,unequal:Hae,setCartesian:Gae,setDifference:Kae,setDistinct:Yae,setIntersect:Xae,setIsSubset:Qae,setMultiplicity:Zae,setPowerset:Jae,setSize:eoe,setSymDifference:toe,setUnion:noe,zpk2tf:roe,freqz:ioe,erf:aoe,zeta:ooe,cumsum:voe,mad:soe,max:uoe,mean:loe,median:coe,min:foe,mode:doe,prod:hoe,quantileSeq:poe,std:moe,sum:goe,variance:yoe,corr:xoe,acos:boe,acosh:woe,acot:_oe,acoth:Eoe,acsc:Coe,acsch:Noe,asec:Soe,asech:Doe,asin:Aoe,asinh:Toe,atan:Moe,atanh:Roe,atan2:Ioe,cos:koe,cosh:Foe,cot:Poe,coth:Ooe,csc:Boe,csch:Loe,sec:joe,sech:$oe,sin:zoe,sinh:Uoe,tan:Woe,tanh:Voe,to:qoe,clone:Goe,format:Koe,bin:Hoe,oct:ase,hex:Xoe,isNaN:Zoe,isInteger:Qoe,isNegative:Joe,isNumeric:ese,hasNumericValue:Yoe,isPositive:tse,isPrime:nse,isZero:rse,print:ose,typeOf:sse,numeric:ise},aT="help",cse=["typed","mathWithTransform","Help"],fse=z(aT,cse,t=>{var{typed:e,mathWithTransform:n,Help:r}=t;return e(aT,{any:function(a){var o,s=a;if(typeof a!="string"){for(o in n)if(Ue(n,o)&&a===n[o]){s=o;break}}var u=Wr(lse,s);if(!u){var l=typeof s=="function"?s.name:s;throw new Error('No documentation found on "'+l+'"')}return new r(u)}})}),oT="chain",dse=["typed","Chain"],hse=z(oT,dse,t=>{var{typed:e,Chain:n}=t;return e(oT,{"":function(){return new n},any:function(i){return new n(i)}})}),sT="det",pse=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],mse=z(sT,pse,t=>{var{typed:e,matrix:n,subtractScalar:r,multiply:i,divideScalar:a,isZero:o,unaryMinus:s}=t;return e(sT,{any:function(c){return ut(c)},"Array | Matrix":function(c){var f;switch(Je(c)?f=c.size():Array.isArray(c)?(c=n(c),f=c.size()):f=[],f.length){case 0:return ut(c);case 1:if(f[0]===1)return ut(c.valueOf()[0]);if(f[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+xt(f)+")");case 2:{var d=f[0],h=f[1];if(d===h)return u(c.clone().valueOf(),d);if(h===0)return 1;throw new RangeError("Matrix must be square (size: "+xt(f)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+xt(f)+")")}}});function u(l,c,f){if(c===1)return ut(l[0][0]);if(c===2)return r(i(l[0][0],l[1][1]),i(l[1][0],l[0][1]));for(var d=!1,h=new Array(c).fill(0).map((E,C)=>C),p=0;p<c;p++){var m=h[p];if(o(l[m][p])){var g=void 0;for(g=p+1;g<c;g++)if(!o(l[h[g]][p])){m=h[g],h[g]=h[p],h[p]=m,d=!d;break}if(g===c)return l[m][p]}for(var v=l[m][p],x=p===0?1:l[h[p-1]][p-1],y=p+1;y<c;y++)for(var b=h[y],w=p+1;w<c;w++)l[b][w]=a(r(i(l[b][w],v),i(l[b][p],l[m][w])),x)}var _=l[h[c-1]][c-1];return d?s(_):_}}),uT="inv",vse=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],gse=z(uT,vse,t=>{var{typed:e,matrix:n,divideScalar:r,addScalar:i,multiply:a,unaryMinus:o,det:s,identity:u,abs:l}=t;return e(uT,{"Array | Matrix":function(d){var h=Je(d)?d.size():ot(d);switch(h.length){case 1:if(h[0]===1)return Je(d)?n([r(1,d.valueOf()[0])]):[r(1,d[0])];throw new RangeError("Matrix must be square (size: "+xt(h)+")");case 2:{var p=h[0],m=h[1];if(p===m)return Je(d)?n(c(d.valueOf(),p,m),d.storage()):c(d,p,m);throw new RangeError("Matrix must be square (size: "+xt(h)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+xt(h)+")")}},any:function(d){return r(1,d)}});function c(f,d,h){var p,m,g,v,x;if(d===1){if(v=f[0][0],v===0)throw Error("Cannot calculate inverse, determinant is zero");return[[r(1,v)]]}else if(d===2){var y=s(f);if(y===0)throw Error("Cannot calculate inverse, determinant is zero");return[[r(f[1][1],y),r(o(f[0][1]),y)],[r(o(f[1][0]),y),r(f[0][0],y)]]}else{var b=f.concat();for(p=0;p<d;p++)b[p]=b[p].concat();for(var w=u(d).valueOf(),_=0;_<h;_++){var E=l(b[_][_]),C=_;for(p=_+1;p<d;)l(b[p][_])>E&&(E=l(b[p][_]),C=p),p++;if(E===0)throw Error("Cannot calculate inverse, determinant is zero");p=C,p!==_&&(x=b[_],b[_]=b[p],b[p]=x,x=w[_],w[_]=w[p],w[p]=x);var N=b[_],D=w[_];for(p=0;p<d;p++){var A=b[p],T=w[p];if(p!==_){if(A[_]!==0){for(g=r(o(A[_]),N[_]),m=_;m<h;m++)A[m]=i(A[m],a(g,N[m]));for(m=0;m<h;m++)T[m]=i(T[m],a(g,D[m]))}}else{for(g=N[_],m=_;m<h;m++)A[m]=r(A[m],g);for(m=0;m<h;m++)T[m]=r(T[m],g)}}}return w}}}),lT="pinv",yse=["typed","matrix","inv","deepEqual","equal","dotDivide","dot","ctranspose","divideScalar","multiply","add","Complex"],xse=z(lT,yse,t=>{var{typed:e,matrix:n,inv:r,deepEqual:i,equal:a,dotDivide:o,dot:s,ctranspose:u,divideScalar:l,multiply:c,add:f,Complex:d}=t;return e(lT,{"Array | Matrix":function(y){var b=Je(y)?y.size():ot(y);switch(b.length){case 1:return v(y)?u(y):b[0]===1?r(y):o(u(y),s(y,y));case 2:{if(v(y))return u(y);var w=b[0],_=b[1];if(w===_)try{return r(y)}catch(E){if(!(E instanceof Error&&E.message.match(/Cannot calculate inverse, determinant is zero/)))throw E}return Je(y)?n(h(y.valueOf(),w,_),y.storage()):h(y,w,_)}default:throw new RangeError("Matrix must be two dimensional (size: "+xt(b)+")")}},any:function(y){return a(y,0)?ut(y):l(1,y)}});function h(x,y,b){var{C:w,F:_}=m(x,y,b),E=c(r(c(u(w),w)),u(w)),C=c(u(_),r(c(_,u(_))));return c(C,E)}function p(x,y,b){for(var w=ut(x),_=0,E=0;E<y;E++){if(b<=_)return w;for(var C=E;g(w[C][_]);)if(C++,y===C&&(C=E,_++,b===_))return w;[w[C],w[E]]=[w[E],w[C]];for(var N=w[E][_],D=0;D<b;D++)w[E][D]=o(w[E][D],N);for(var A=0;A<y;A++)if(A!==E){N=w[A][_];for(var T=0;T<b;T++)w[A][T]=f(w[A][T],c(-1,c(N,w[E][T])))}_++}return w}function m(x,y,b){var w=p(x,y,b),_=x.map((C,N)=>C.filter((D,A)=>A<y&&!g(s(w[A],w[A])))),E=w.filter((C,N)=>!g(s(w[N],w[N])));return{C:_,F:E}}function g(x){return a(f(x,d(1,1)),f(0,d(1,1)))}function v(x){return i(f(x,d(1,1)),f(c(x,0),d(1,1)))}});function bse(t){var{addScalar:e,subtract:n,flatten:r,multiply:i,multiplyScalar:a,divideScalar:o,sqrt:s,abs:u,bignumber:l,diag:c,size:f,reshape:d,inv:h,qr:p,usolve:m,usolveAll:g,equal:v,complex:x,larger:y,smaller:b,matrixFromColumns:w,dot:_}=t;function E(V,L,ne,fe){var te=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,oe=C(V,L,ne,fe,te);N(V,L,ne,fe,te,oe);var{values:H,C:U}=D(V,L,ne,fe,te);if(te){var Q=A(V,L,U,oe,H,ne,fe);return{values:H,eigenvectors:Q}}return{values:H}}function C(V,L,ne,fe,te){var oe=fe==="BigNumber",H=fe==="Complex",U=oe?l(0):0,Q=oe?l(1):H?x(1):1,re=oe?l(1):1,ie=oe?l(10):2,de=a(ie,ie),he;te&&(he=Array(L).fill(Q));for(var $=!1;!$;){$=!0;for(var G=0;G<L;G++){for(var ue=U,ce=U,ge=0;ge<L;ge++)G!==ge&&(ue=e(ue,u(V[ge][G])),ce=e(ce,u(V[G][ge])));if(!v(ue,0)&&!v(ce,0)){for(var Ce=re,Ae=ue,Pe=o(ce,ie),q=a(ce,ie);b(Ae,Pe);)Ae=a(Ae,de),Ce=a(Ce,ie);for(;y(Ae,q);)Ae=o(Ae,de),Ce=o(Ce,ie);var ee=b(o(e(Ae,ce),Ce),a(e(ue,ce),.95));if(ee){$=!1;for(var le=o(1,Ce),pe=0;pe<L;pe++)G!==pe&&(V[G][pe]=a(V[G][pe],le),V[pe][G]=a(V[pe][G],Ce));te&&(he[G]=a(he[G],le))}}}}return te?c(he):null}function N(V,L,ne,fe,te,oe){var H=fe==="BigNumber",U=fe==="Complex",Q=H?l(0):U?x(0):0;H&&(ne=l(ne));for(var re=0;re<L-2;re++){for(var ie=0,de=Q,he=re+1;he<L;he++){var $=V[he][re];b(u(de),u($))&&(de=$,ie=he)}if(!b(u(de),ne)){if(ie!==re+1){var G=V[ie];V[ie]=V[re+1],V[re+1]=G;for(var ue=0;ue<L;ue++){var ce=V[ue][ie];V[ue][ie]=V[ue][re+1],V[ue][re+1]=ce}if(te){var ge=oe[ie];oe[ie]=oe[re+1],oe[re+1]=ge}}for(var Ce=re+2;Ce<L;Ce++){var Ae=o(V[Ce][re],de);if(Ae!==0){for(var Pe=0;Pe<L;Pe++)V[Ce][Pe]=n(V[Ce][Pe],a(Ae,V[re+1][Pe]));for(var q=0;q<L;q++)V[q][re+1]=e(V[q][re+1],a(Ae,V[q][Ce]));if(te)for(var ee=0;ee<L;ee++)oe[Ce][ee]=n(oe[Ce][ee],a(Ae,oe[re+1][ee]))}}}}return oe}function D(V,L,ne,fe,te){var oe=fe==="BigNumber",H=fe==="Complex",U=oe?l(1):H?x(1):1;oe&&(ne=l(ne));for(var Q=ut(V),re=[],ie=L,de=[],he=te?c(Array(L).fill(U)):void 0,$=te?c(Array(ie).fill(U)):void 0,G=0;G<=100;){G+=1;for(var ue=Q[ie-1][ie-1],ce=0;ce<ie;ce++)Q[ce][ce]=n(Q[ce][ce],ue);var{Q:ge,R:Ce}=p(Q);Q=i(Ce,ge);for(var Ae=0;Ae<ie;Ae++)Q[Ae][Ae]=e(Q[Ae][Ae],ue);if(te&&($=i($,ge)),ie===1||b(u(Q[ie-1][ie-2]),ne)){G=0,re.push(Q[ie-1][ie-1]),te&&(de.unshift([[1]]),F($,L),he=i(he,$),ie>1&&($=c(Array(ie-1).fill(U)))),ie-=1,Q.pop();for(var Pe=0;Pe<ie;Pe++)Q[Pe].pop()}else if(ie===2||b(u(Q[ie-2][ie-3]),ne)){G=0;var q=T(Q[ie-2][ie-2],Q[ie-2][ie-1],Q[ie-1][ie-2],Q[ie-1][ie-1]);re.push(...q),te&&(de.unshift(k(Q[ie-2][ie-2],Q[ie-2][ie-1],Q[ie-1][ie-2],Q[ie-1][ie-1],q[0],q[1],ne,fe)),F($,L),he=i(he,$),ie>2&&($=c(Array(ie-2).fill(U)))),ie-=2,Q.pop(),Q.pop();for(var ee=0;ee<ie;ee++)Q[ee].pop(),Q[ee].pop()}if(ie===0)break}if(re.sort((be,xe)=>+n(u(be),u(xe))),G>100){var le=Error("The eigenvalues failed to converge. Only found these eigenvalues: "+re.join(", "));throw le.values=re,le.vectors=[],le}var pe=te?i(he,O(de,L)):void 0;return{values:re,C:pe}}function A(V,L,ne,fe,te,oe,H){var U=h(ne),Q=i(U,V,ne),re=H==="BigNumber",ie=H==="Complex",de=re?l(0):ie?x(0):0,he=re?l(1):ie?x(1):1,$=[],G=[];for(var ue of te){var ce=I($,ue,v);ce===-1?($.push(ue),G.push(1)):G[ce]+=1}for(var ge=[],Ce=$.length,Ae=Array(L).fill(de),Pe=c(Array(L).fill(he)),q=function(){var pe=$[ee],be=n(Q,i(pe,Pe)),xe=g(be,Ae);for(xe.shift();xe.length<G[ee];){var Fe=M(be,L,xe,oe,H);if(Fe===null)break;xe.push(Fe)}var Te=i(h(fe),ne);xe=xe.map(Oe=>i(Te,Oe)),ge.push(...xe.map(Oe=>({value:pe,vector:r(Oe)})))},ee=0;ee<Ce;ee++)q();return ge}function T(V,L,ne,fe){var te=e(V,fe),oe=n(a(V,fe),a(L,ne)),H=a(te,.5),U=a(s(n(a(te,te),a(4,oe))),.5);return[e(H,U),n(H,U)]}function k(V,L,ne,fe,te,oe,H,U){var Q=U==="BigNumber",re=U==="Complex",ie=Q?l(0):re?x(0):0,de=Q?l(1):re?x(1):1;if(b(u(ne),H))return[[de,ie],[ie,de]];if(y(u(n(te,oe)),H))return[[n(te,fe),n(oe,fe)],[ne,ne]];var he=n(V,te),$=n(fe,te);return b(u(L),H)&&b(u($),H)?[[he,de],[ne,ie]]:[[L,ie],[$,de]]}function F(V,L){for(var ne=0;ne<V.length;ne++)V[ne].push(...Array(L-V[ne].length).fill(0));for(var fe=V.length;fe<L;fe++)V.push(Array(L).fill(0)),V[fe][fe]=1;return V}function O(V,L){for(var ne=[],fe=0;fe<L;fe++)ne[fe]=Array(L).fill(0);var te=0;for(var oe of V){for(var H=oe.length,U=0;U<H;U++)for(var Q=0;Q<H;Q++)ne[te+U][te+Q]=oe[U][Q];te+=H}return ne}function I(V,L,ne){for(var fe=0;fe<V.length;fe++)if(ne(V[fe],L))return fe;return-1}function M(V,L,ne,fe,te){for(var oe=te==="BigNumber"?l(1e3):1e3,H,U=0;U<5;++U){H=B(L,ne,te);try{H=m(V,H)}catch{continue}if(y(j(H),oe))break}if(U>=5)return null;for(U=0;;){var Q=m(V,H);if(b(j(R(H,[Q])),fe))break;if(++U>=10)return null;H=K(Q)}return H}function B(V,L,ne){var fe=ne==="BigNumber",te=ne==="Complex",oe=Array(V).fill(0).map(H=>2*Math.random()-1);return fe&&(oe=oe.map(H=>l(H))),te&&(oe=oe.map(H=>x(H))),oe=R(oe,L),K(oe,ne)}function R(V,L){var ne=f(V);for(var fe of L)fe=d(fe,ne),V=n(V,i(o(_(fe,V),_(fe,fe)),fe));return V}function j(V){return u(s(_(V,V)))}function K(V,L){var ne=L==="BigNumber",fe=L==="Complex",te=ne?l(1):fe?x(1):1;return i(o(te,j(V)),V)}return E}function wse(t){var{config:e,addScalar:n,subtract:r,abs:i,atan:a,cos:o,sin:s,multiplyScalar:u,inv:l,bignumber:c,multiply:f,add:d}=t;function h(N,D){var A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.relTol,T=arguments.length>3?arguments[3]:void 0,k=arguments.length>4?arguments[4]:void 0;if(T==="number")return p(N,A,k);if(T==="BigNumber")return m(N,A,k);throw TypeError("Unsupported data type: "+T)}function p(N,D,A){var T=N.length,k=Math.abs(D/T),F,O;if(A){O=new Array(T);for(var I=0;I<T;I++)O[I]=Array(T).fill(0),O[I][I]=1}for(var M=_(N);Math.abs(M[1])>=Math.abs(k);){var B=M[0][0],R=M[0][1];F=g(N[B][B],N[R][R],N[B][R]),N=w(N,F,B,R),A&&(O=x(O,F,B,R)),M=_(N)}for(var j=Array(T).fill(0),K=0;K<T;K++)j[K]=N[K][K];return C(ut(j),O,A)}function m(N,D,A){var T=N.length,k=i(D/T),F,O;if(A){O=new Array(T);for(var I=0;I<T;I++)O[I]=Array(T).fill(0),O[I][I]=1}for(var M=E(N);i(M[1])>=i(k);){var B=M[0][0],R=M[0][1];F=v(N[B][B],N[R][R],N[B][R]),N=b(N,F,B,R),A&&(O=y(O,F,B,R)),M=E(N)}for(var j=Array(T).fill(0),K=0;K<T;K++)j[K]=N[K][K];return C(ut(j),O,A)}function g(N,D,A){var T=D-N;return Math.abs(T)<=e.relTol?Math.PI/4:.5*Math.atan(2*A/(D-N))}function v(N,D,A){var T=r(D,N);return i(T)<=e.relTol?c(-1).acos().div(4):u(.5,a(f(2,A,l(T))))}function x(N,D,A,T){for(var k=N.length,F=Math.cos(D),O=Math.sin(D),I=Array(k).fill(0),M=Array(k).fill(0),B=0;B<k;B++)I[B]=F*N[B][A]-O*N[B][T],M[B]=O*N[B][A]+F*N[B][T];for(var R=0;R<k;R++)N[R][A]=I[R],N[R][T]=M[R];return N}function y(N,D,A,T){for(var k=N.length,F=o(D),O=s(D),I=Array(k).fill(c(0)),M=Array(k).fill(c(0)),B=0;B<k;B++)I[B]=r(u(F,N[B][A]),u(O,N[B][T])),M[B]=n(u(O,N[B][A]),u(F,N[B][T]));for(var R=0;R<k;R++)N[R][A]=I[R],N[R][T]=M[R];return N}function b(N,D,A,T){for(var k=N.length,F=c(o(D)),O=c(s(D)),I=u(F,F),M=u(O,O),B=Array(k).fill(c(0)),R=Array(k).fill(c(0)),j=f(c(2),F,O,N[A][T]),K=n(r(u(I,N[A][A]),j),u(M,N[T][T])),V=d(u(M,N[A][A]),j,u(I,N[T][T])),L=0;L<k;L++)B[L]=r(u(F,N[A][L]),u(O,N[T][L])),R[L]=n(u(O,N[A][L]),u(F,N[T][L]));N[A][A]=K,N[T][T]=V,N[A][T]=c(0),N[T][A]=c(0);for(var ne=0;ne<k;ne++)ne!==A&&ne!==T&&(N[A][ne]=B[ne],N[ne][A]=B[ne],N[T][ne]=R[ne],N[ne][T]=R[ne]);return N}function w(N,D,A,T){for(var k=N.length,F=Math.cos(D),O=Math.sin(D),I=F*F,M=O*O,B=Array(k).fill(0),R=Array(k).fill(0),j=I*N[A][A]-2*F*O*N[A][T]+M*N[T][T],K=M*N[A][A]+2*F*O*N[A][T]+I*N[T][T],V=0;V<k;V++)B[V]=F*N[A][V]-O*N[T][V],R[V]=O*N[A][V]+F*N[T][V];N[A][A]=j,N[T][T]=K,N[A][T]=0,N[T][A]=0;for(var L=0;L<k;L++)L!==A&&L!==T&&(N[A][L]=B[L],N[L][A]=B[L],N[T][L]=R[L],N[L][T]=R[L]);return N}function _(N){for(var D=N.length,A=0,T=[0,1],k=0;k<D;k++)for(var F=k+1;F<D;F++)Math.abs(A)<Math.abs(N[k][F])&&(A=Math.abs(N[k][F]),T=[k,F]);return[T,A]}function E(N){for(var D=N.length,A=0,T=[0,1],k=0;k<D;k++)for(var F=k+1;F<D;F++)i(A)<i(N[k][F])&&(A=i(N[k][F]),T=[k,F]);return[T,A]}function C(N,D,A){var T=N.length,k=Array(T),F;if(A){F=Array(T);for(var O=0;O<T;O++)F[O]=Array(T)}for(var I=0;I<T;I++){for(var M=0,B=N[0],R=0;R<N.length;R++)i(N[R])<i(B)&&(M=R,B=N[M]);if(k[I]=N.splice(M,1)[0],A)for(var j=0;j<T;j++)F[I][j]=D[j][M],D[j].splice(M,1)}if(!A)return{values:k};var K=F.map((V,L)=>({value:k[L],vector:V}));return{values:k,eigenvectors:K}}return h}var _se="eigs",Ese=["config","typed","matrix","addScalar","equal","subtract","abs","atan","cos","sin","multiplyScalar","divideScalar","inv","bignumber","multiply","add","larger","column","flatten","number","complex","sqrt","diag","size","reshape","qr","usolve","usolveAll","im","re","smaller","matrixFromColumns","dot"],Cse=z(_se,Ese,t=>{var{config:e,typed:n,matrix:r,addScalar:i,subtract:a,equal:o,abs:s,atan:u,cos:l,sin:c,multiplyScalar:f,divideScalar:d,inv:h,bignumber:p,multiply:m,add:g,larger:v,column:x,flatten:y,number:b,complex:w,sqrt:_,diag:E,size:C,reshape:N,qr:D,usolve:A,usolveAll:T,im:k,re:F,smaller:O,matrixFromColumns:I,dot:M}=t,B=wse({config:e,addScalar:i,subtract:a,column:x,flatten:y,equal:o,abs:s,atan:u,cos:l,sin:c,multiplyScalar:f,inv:h,bignumber:p,complex:w,multiply:m,add:g}),R=bse({config:e,addScalar:i,subtract:a,multiply:m,multiplyScalar:f,flatten:y,divideScalar:d,sqrt:_,abs:s,bignumber:p,diag:E,size:C,reshape:N,qr:D,inv:h,usolve:A,usolveAll:T,equal:o,complex:w,larger:v,smaller:O,matrixFromColumns:I,dot:M});return n("eigs",{Array:function(oe){return j(r(oe))},"Array, number|BigNumber":function(oe,H){return j(r(oe),{precision:H})},"Array, Object"(te,oe){return j(r(te),oe)},Matrix:function(oe){return j(oe,{matricize:!0})},"Matrix, number|BigNumber":function(oe,H){return j(oe,{precision:H,matricize:!0})},"Matrix, Object":function(oe,H){var U={matricize:!0};return jn(U,H),j(oe,U)}});function j(te){var oe,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},U="eigenvectors"in H?H.eigenvectors:!0,Q=(oe=H.precision)!==null&&oe!==void 0?oe:e.relTol,re=K(te,Q,U);return H.matricize&&(re.values=r(re.values),U&&(re.eigenvectors=re.eigenvectors.map(ie=>{var{value:de,vector:he}=ie;return{value:de,vector:r(he)}}))),U&&Object.defineProperty(re,"vectors",{enumerable:!1,get:()=>{throw new Error("eigs(M).vectors replaced with eigs(M).eigenvectors")}}),re}function K(te,oe,H){var U=te.toArray(),Q=te.size();if(Q.length!==2||Q[0]!==Q[1])throw new RangeError("Matrix must be square (size: ".concat(xt(Q),")"));var re=Q[0];if(L(U,re,oe)&&(ne(U,re),V(U,re,oe))){var ie=fe(te,U,re);return B(U,re,oe,ie,H)}var de=fe(te,U,re);return R(U,re,oe,de,H)}function V(te,oe,H){for(var U=0;U<oe;U++)for(var Q=U;Q<oe;Q++)if(v(p(s(a(te[U][Q],te[Q][U]))),H))return!1;return!0}function L(te,oe,H){for(var U=0;U<oe;U++)for(var Q=0;Q<oe;Q++)if(v(p(s(k(te[U][Q]))),H))return!1;return!0}function ne(te,oe){for(var H=0;H<oe;H++)for(var U=0;U<oe;U++)te[H][U]=F(te[H][U])}function fe(te,oe,H){var U=te.datatype();if(U==="number"||U==="BigNumber"||U==="Complex")return U;for(var Q=!1,re=!1,ie=!1,de=0;de<H;de++)for(var he=0;he<H;he++){var $=oe[de][he];if(dt($)||Yh($))Q=!0;else if(ht($))re=!0;else if(Mo($))ie=!0;else throw TypeError("Unsupported type in Matrix: "+Qt($))}if(re&&ie&&console.warn("Complex BigNumbers not supported, this operation will lose precission."),ie){for(var G=0;G<H;G++)for(var ue=0;ue<H;ue++)oe[G][ue]=w(oe[G][ue]);return"Complex"}if(re){for(var ce=0;ce<H;ce++)for(var ge=0;ge<H;ge++)oe[ce][ge]=p(oe[ce][ge]);return"BigNumber"}if(Q){for(var Ce=0;Ce<H;Ce++)for(var Ae=0;Ae<H;Ae++)oe[Ce][Ae]=b(oe[Ce][Ae]);return"number"}else throw TypeError("Matrix contains unsupported types only.")}}),cT="expm",Nse=["typed","abs","add","identity","inv","multiply"],Sse=z(cT,Nse,t=>{var{typed:e,abs:n,add:r,identity:i,inv:a,multiply:o}=t;return e(cT,{Matrix:function(f){var d=f.size();if(d.length!==2||d[0]!==d[1])throw new RangeError("Matrix must be square (size: "+xt(d)+")");for(var h=d[0],p=1e-15,m=s(f),g=u(m,p),v=g.q,x=g.j,y=o(f,Math.pow(2,-x)),b=i(h),w=i(h),_=1,E=y,C=-1,N=1;N<=v;N++)N>1&&(E=o(E,y),C=-C),_=_*(v-N+1)/((2*v-N+1)*N),b=r(b,o(_,E)),w=r(w,o(_*C,E));for(var D=o(a(w),b),A=0;A<x;A++)D=o(D,D);return ju(f)?f.createSparseMatrix(D):D}});function s(c){for(var f=c.size()[0],d=0,h=0;h<f;h++){for(var p=0,m=0;m<f;m++)p+=n(c.get([h,m]));d=Math.max(p,d)}return d}function u(c,f){for(var d=30,h=0;h<d;h++)for(var p=0;p<=h;p++){var m=h-p;if(l(c,p,m)<f)return{q:p,j:m}}throw new Error("Could not find acceptable parameters to compute the matrix exponential (try increasing maxSearchSize in expm.js)")}function l(c,f,d){for(var h=1,p=2;p<=f;p++)h*=p;for(var m=h,g=f+1;g<=2*f;g++)m*=g;var v=m*(2*f+1);return 8*Math.pow(c/Math.pow(2,d),2*f)*h*h/(m*v)}}),fT="sqrtm",Dse=["typed","abs","add","multiply","map","sqrt","subtract","inv","size","max","identity"],Ase=z(fT,Dse,t=>{var{typed:e,abs:n,add:r,multiply:i,map:a,sqrt:o,subtract:s,inv:u,size:l,max:c,identity:f}=t,d=1e3,h=1e-6;function p(m){var g,v=0,x=m,y=f(l(m));do{var b=x;if(x=i(.5,r(b,u(y))),y=i(.5,r(y,u(b))),g=c(n(s(x,b))),g>h&&++v>d)throw new Error("computing square root of matrix: iterative method could not converge")}while(g>h);return x}return e(fT,{"Array | Matrix":function(g){var v=Je(g)?g.size():ot(g);switch(v.length){case 1:if(v[0]===1)return a(g,o);throw new RangeError("Matrix must be square (size: "+xt(v)+")");case 2:{var x=v[0],y=v[1];if(x===y)return p(g);throw new RangeError("Matrix must be square (size: "+xt(v)+")")}default:throw new RangeError("Matrix must be at most two dimensional (size: "+xt(v)+")")}}})}),dT="sylvester",Tse=["typed","schur","matrixFromColumns","matrix","multiply","range","concat","transpose","index","subset","add","subtract","identity","lusolve","abs"],Mse=z(dT,Tse,t=>{var{typed:e,schur:n,matrixFromColumns:r,matrix:i,multiply:a,range:o,concat:s,transpose:u,index:l,subset:c,add:f,subtract:d,identity:h,lusolve:p,abs:m}=t;return e(dT,{"Matrix, Matrix, Matrix":g,"Array, Matrix, Matrix":function(x,y,b){return g(i(x),y,b)},"Array, Array, Matrix":function(x,y,b){return g(i(x),i(y),b)},"Array, Matrix, Array":function(x,y,b){return g(i(x),y,i(b))},"Matrix, Array, Matrix":function(x,y,b){return g(x,i(y),b)},"Matrix, Array, Array":function(x,y,b){return g(x,i(y),i(b))},"Matrix, Matrix, Array":function(x,y,b){return g(x,y,i(b))},"Array, Array, Array":function(x,y,b){return g(i(x),i(y),i(b)).toArray()}});function g(v,x,y){for(var b=x.size()[0],w=v.size()[0],_=n(v),E=_.T,C=_.U,N=n(a(-1,x)),D=N.T,A=N.U,T=a(a(u(C),y),A),k=o(0,w),F=[],O=(ie,de)=>s(ie,de,1),I=(ie,de)=>s(ie,de,0),M=0;M<b;M++)if(M<b-1&&m(c(D,l(M+1,M)))>1e-5){for(var B=I(c(T,l(k,M)),c(T,l(k,M+1))),R=0;R<M;R++)B=f(B,I(a(F[R],c(D,l(R,M))),a(F[R],c(D,l(R,M+1)))));var j=a(h(w),a(-1,c(D,l(M,M)))),K=a(h(w),a(-1,c(D,l(M+1,M)))),V=a(h(w),a(-1,c(D,l(M,M+1)))),L=a(h(w),a(-1,c(D,l(M+1,M+1)))),ne=I(O(f(E,j),K),O(V,f(E,L))),fe=p(ne,B);F[M]=fe.subset(l(o(0,w),0)),F[M+1]=fe.subset(l(o(w,2*w),0)),M++}else{for(var te=c(T,l(k,M)),oe=0;oe<M;oe++)te=f(te,a(F[oe],c(D,l(oe,M))));var H=c(D,l(M,M)),U=d(E,a(H,h(w)));F[M]=p(U,te)}var Q=i(r(...F)),re=a(C,a(Q,u(A)));return re}}),hT="schur",Ise=["typed","matrix","identity","multiply","qr","norm","subtract"],Rse=z(hT,Ise,t=>{var{typed:e,matrix:n,identity:r,multiply:i,qr:a,norm:o,subtract:s}=t;return e(hT,{Array:function(c){var f=u(n(c));return{U:f.U.valueOf(),T:f.T.valueOf()}},Matrix:function(c){return u(c)}});function u(l){var c=l.size()[0],f=l,d=r(c),h=0,p;do{p=f;var m=a(f),g=m.Q,v=m.R;if(f=i(v,g),d=i(d,g),h++>100)break}while(o(s(f,p))>1e-4);return{U:d,T:f}}}),pT="lyap",kse=["typed","matrix","sylvester","multiply","transpose"],Fse=z(pT,kse,t=>{var{typed:e,matrix:n,sylvester:r,multiply:i,transpose:a}=t;return e(pT,{"Matrix, Matrix":function(s,u){return r(s,a(s),i(-1,u))},"Array, Matrix":function(s,u){return r(n(s),a(n(s)),i(-1,u))},"Matrix, Array":function(s,u){return r(s,a(n(s)),n(i(-1,u)))},"Array, Array":function(s,u){return r(n(s),a(n(s)),n(i(-1,u))).toArray()}})}),Pse="divide",Ose=["typed","matrix","multiply","equalScalar","divideScalar","inv"],Bse=z(Pse,Ose,t=>{var{typed:e,matrix:n,multiply:r,equalScalar:i,divideScalar:a,inv:o}=t,s=xr({typed:e,equalScalar:i}),u=Ia({typed:e});return e("divide",wP({"Array | Matrix, Array | Matrix":function(c,f){return r(c,o(f))},"DenseMatrix, any":function(c,f){return u(c,f,a,!1)},"SparseMatrix, any":function(c,f){return s(c,f,a,!1)},"Array, any":function(c,f){return u(n(c),f,a,!1).valueOf()},"any, Array | Matrix":function(c,f){return r(c,o(f))}},a.signatures))}),mT="distance",Lse=["typed","addScalar","subtractScalar","divideScalar","multiplyScalar","deepEqual","sqrt","abs"],jse=z(mT,Lse,t=>{var{typed:e,addScalar:n,subtractScalar:r,multiplyScalar:i,divideScalar:a,deepEqual:o,sqrt:s,abs:u}=t;return e(mT,{"Array, Array, Array":function(w,_,E){if(w.length===2&&_.length===2&&E.length===2){if(!c(w))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!c(_))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!c(E))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(o(_,E))throw new TypeError("LinePoint1 should not be same with LinePoint2");var C=r(E[1],_[1]),N=r(_[0],E[0]),D=r(i(E[0],_[1]),i(_[0],E[1]));return g(w[0],w[1],C,N,D)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object, Object":function(w,_,E){if(Object.keys(w).length===2&&Object.keys(_).length===2&&Object.keys(E).length===2){if(!c(w))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!c(_))throw new TypeError("Values of lineOnePtX and lineOnePtY should be numbers or BigNumbers");if(!c(E))throw new TypeError("Values of lineTwoPtX and lineTwoPtY should be numbers or BigNumbers");if(o(p(_),p(E)))throw new TypeError("LinePoint1 should not be same with LinePoint2");if("pointX"in w&&"pointY"in w&&"lineOnePtX"in _&&"lineOnePtY"in _&&"lineTwoPtX"in E&&"lineTwoPtY"in E){var C=r(E.lineTwoPtY,_.lineOnePtY),N=r(_.lineOnePtX,E.lineTwoPtX),D=r(i(E.lineTwoPtX,_.lineOnePtY),i(_.lineOnePtX,E.lineTwoPtY));return g(w.pointX,w.pointY,C,N,D)}else throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},"Array, Array":function(w,_){if(w.length===2&&_.length===3){if(!c(w))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!f(_))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");return g(w[0],w[1],_[0],_[1],_[2])}else if(w.length===3&&_.length===6){if(!f(w))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!h(_))throw new TypeError("Array with 6 numbers or BigNumbers expected for second argument");return v(w[0],w[1],w[2],_[0],_[1],_[2],_[3],_[4],_[5])}else if(w.length===_.length&&w.length>0){if(!d(w))throw new TypeError("All values of an array should be numbers or BigNumbers");if(!d(_))throw new TypeError("All values of an array should be numbers or BigNumbers");return x(w,_)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object":function(w,_){if(Object.keys(w).length===2&&Object.keys(_).length===3){if(!c(w))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!f(_))throw new TypeError("Values of xCoeffLine, yCoeffLine and constant should be numbers or BigNumbers");if("pointX"in w&&"pointY"in w&&"xCoeffLine"in _&&"yCoeffLine"in _&&"constant"in _)return g(w.pointX,w.pointY,_.xCoeffLine,_.yCoeffLine,_.constant);throw new TypeError("Key names do not match")}else if(Object.keys(w).length===3&&Object.keys(_).length===6){if(!f(w))throw new TypeError("Values of pointX, pointY and pointZ should be numbers or BigNumbers");if(!h(_))throw new TypeError("Values of x0, y0, z0, a, b and c should be numbers or BigNumbers");if("pointX"in w&&"pointY"in w&&"x0"in _&&"y0"in _&&"z0"in _&&"a"in _&&"b"in _&&"c"in _)return v(w.pointX,w.pointY,w.pointZ,_.x0,_.y0,_.z0,_.a,_.b,_.c);throw new TypeError("Key names do not match")}else if(Object.keys(w).length===2&&Object.keys(_).length===2){if(!c(w))throw new TypeError("Values of pointOneX and pointOneY should be numbers or BigNumbers");if(!c(_))throw new TypeError("Values of pointTwoX and pointTwoY should be numbers or BigNumbers");if("pointOneX"in w&&"pointOneY"in w&&"pointTwoX"in _&&"pointTwoY"in _)return x([w.pointOneX,w.pointOneY],[_.pointTwoX,_.pointTwoY]);throw new TypeError("Key names do not match")}else if(Object.keys(w).length===3&&Object.keys(_).length===3){if(!f(w))throw new TypeError("Values of pointOneX, pointOneY and pointOneZ should be numbers or BigNumbers");if(!f(_))throw new TypeError("Values of pointTwoX, pointTwoY and pointTwoZ should be numbers or BigNumbers");if("pointOneX"in w&&"pointOneY"in w&&"pointOneZ"in w&&"pointTwoX"in _&&"pointTwoY"in _&&"pointTwoZ"in _)return x([w.pointOneX,w.pointOneY,w.pointOneZ],[_.pointTwoX,_.pointTwoY,_.pointTwoZ]);throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},Array:function(w){if(!m(w))throw new TypeError("Incorrect array format entered for pairwise distance calculation");return y(w)}});function l(b){return typeof b=="number"||ht(b)}function c(b){return b.constructor!==Array&&(b=p(b)),l(b[0])&&l(b[1])}function f(b){return b.constructor!==Array&&(b=p(b)),l(b[0])&&l(b[1])&&l(b[2])}function d(b){return Array.isArray(b)||(b=p(b)),b.every(l)}function h(b){return b.constructor!==Array&&(b=p(b)),l(b[0])&&l(b[1])&&l(b[2])&&l(b[3])&&l(b[4])&&l(b[5])}function p(b){for(var w=Object.keys(b),_=[],E=0;E<w.length;E++)_.push(b[w[E]]);return _}function m(b){if(b[0].length===2&&l(b[0][0])&&l(b[0][1])){if(b.some(w=>w.length!==2||!l(w[0])||!l(w[1])))return!1}else if(b[0].length===3&&l(b[0][0])&&l(b[0][1])&&l(b[0][2])){if(b.some(w=>w.length!==3||!l(w[0])||!l(w[1])||!l(w[2])))return!1}else return!1;return!0}function g(b,w,_,E,C){var N=u(n(n(i(_,b),i(E,w)),C)),D=s(n(i(_,_),i(E,E)));return a(N,D)}function v(b,w,_,E,C,N,D,A,T){var k=[r(i(r(C,w),T),i(r(N,_),A)),r(i(r(N,_),D),i(r(E,b),T)),r(i(r(E,b),A),i(r(C,w),D))];k=s(n(n(i(k[0],k[0]),i(k[1],k[1])),i(k[2],k[2])));var F=s(n(n(i(D,D),i(A,A)),i(T,T)));return a(k,F)}function x(b,w){for(var _=b.length,E=0,C=0,N=0;N<_;N++)C=r(b[N],w[N]),E=n(i(C,C),E);return s(E)}function y(b){for(var w=[],_=[],E=[],C=0;C<b.length-1;C++)for(var N=C+1;N<b.length;N++)b[0].length===2?(_=[b[C][0],b[C][1]],E=[b[N][0],b[N][1]]):b[0].length===3&&(_=[b[C][0],b[C][1],b[C][2]],E=[b[N][0],b[N][1],b[N][2]]),w.push(x(_,E));return w}}),$se="intersect",zse=["typed","config","abs","add","addScalar","matrix","multiply","multiplyScalar","divideScalar","subtract","smaller","equalScalar","flatten","isZero","isNumeric"],Use=z($se,zse,t=>{var{typed:e,config:n,abs:r,add:i,addScalar:a,matrix:o,multiply:s,multiplyScalar:u,divideScalar:l,subtract:c,smaller:f,equalScalar:d,flatten:h,isZero:p,isNumeric:m}=t;return e("intersect",{"Array, Array, Array":g,"Array, Array, Array, Array":v,"Matrix, Matrix, Matrix":function(A,T,k){var F=g(A.valueOf(),T.valueOf(),k.valueOf());return F===null?null:o(F)},"Matrix, Matrix, Matrix, Matrix":function(A,T,k,F){var O=v(A.valueOf(),T.valueOf(),k.valueOf(),F.valueOf());return O===null?null:o(O)}});function g(D,A,T){if(D=x(D),A=x(A),T=x(T),!b(D))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!b(A))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!w(T))throw new TypeError("Array with 4 numbers expected as third argument");return N(D[0],D[1],D[2],A[0],A[1],A[2],T[0],T[1],T[2],T[3])}function v(D,A,T,k){if(D=x(D),A=x(A),T=x(T),k=x(k),D.length===2){if(!y(D))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!y(A))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!y(T))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(!y(k))throw new TypeError("Array with 2 numbers or BigNumbers expected for fourth argument");return _(D,A,T,k)}else if(D.length===3){if(!b(D))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!b(A))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!b(T))throw new TypeError("Array with 3 numbers or BigNumbers expected for third argument");if(!b(k))throw new TypeError("Array with 3 numbers or BigNumbers expected for fourth argument");return C(D[0],D[1],D[2],A[0],A[1],A[2],T[0],T[1],T[2],k[0],k[1],k[2])}else throw new TypeError("Arrays with two or thee dimensional points expected")}function x(D){return D.length===1?D[0]:D.length>1&&Array.isArray(D[0])&&D.every(A=>Array.isArray(A)&&A.length===1)?h(D):D}function y(D){return D.length===2&&m(D[0])&&m(D[1])}function b(D){return D.length===3&&m(D[0])&&m(D[1])&&m(D[2])}function w(D){return D.length===4&&m(D[0])&&m(D[1])&&m(D[2])&&m(D[3])}function _(D,A,T,k){var F=D,O=T,I=c(F,A),M=c(O,k),B=c(u(I[0],M[1]),u(M[0],I[1]));if(p(B)||f(r(B),n.relTol))return null;var R=u(M[0],F[1]),j=u(M[1],F[0]),K=u(M[0],O[1]),V=u(M[1],O[0]),L=l(a(c(c(R,j),K),V),B);return i(s(I,L),F)}function E(D,A,T,k,F,O,I,M,B,R,j,K){var V=u(c(D,A),c(T,k)),L=u(c(F,O),c(I,M)),ne=u(c(B,R),c(j,K));return a(a(V,L),ne)}function C(D,A,T,k,F,O,I,M,B,R,j,K){var V=E(D,I,R,I,A,M,j,M,T,B,K,B),L=E(R,I,k,D,j,M,F,A,K,B,O,T),ne=E(D,I,k,D,A,M,F,A,T,B,O,T),fe=E(R,I,R,I,j,M,j,M,K,B,K,B),te=E(k,D,k,D,F,A,F,A,O,T,O,T),oe=c(u(V,L),u(ne,fe)),H=c(u(te,fe),u(L,L));if(p(H))return null;var U=l(oe,H),Q=l(a(V,u(U,L)),fe),re=a(D,u(U,c(k,D))),ie=a(A,u(U,c(F,A))),de=a(T,u(U,c(O,T))),he=a(I,u(Q,c(R,I))),$=a(M,u(Q,c(j,M))),G=a(B,u(Q,c(K,B)));return d(re,he)&&d(ie,$)&&d(de,G)?[re,ie,de]:null}function N(D,A,T,k,F,O,I,M,B,R){var j=u(D,I),K=u(k,I),V=u(A,M),L=u(F,M),ne=u(T,B),fe=u(O,B),te=c(c(c(R,j),V),ne),oe=c(c(c(a(a(K,L),fe),j),V),ne),H=l(te,oe),U=a(D,u(H,c(k,D))),Q=a(A,u(H,c(F,A))),re=a(T,u(H,c(O,T)));return[U,Q,re]}}),vT="sum",Wse=["typed","config","add","numeric"],dB=z(vT,Wse,t=>{var{typed:e,config:n,add:r,numeric:i}=t;return e(vT,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":o,"...":function(u){if(Ef(u))throw new TypeError("Scalar values expected in function sum");return a(u)}});function a(s){var u;return Ks(s,function(l){try{u=u===void 0?l:r(u,l)}catch(c){throw Hr(c,"sum",l)}}),u===void 0&&(u=i(0,n.number)),typeof u=="string"&&(u=i(u,au(u,n))),u}function o(s,u){try{var l=F0(s,u,r);return l}catch(c){throw Hr(c,"sum")}}}),mm="cumsum",Vse=["typed","add","unaryPlus"],hB=z(mm,Vse,t=>{var{typed:e,add:n,unaryPlus:r}=t;return e(mm,{Array:i,Matrix:function(l){return l.create(i(l.valueOf(),l.datatype()))},"Array, number | BigNumber":o,"Matrix, number | BigNumber":function(l,c){return l.create(o(l.valueOf(),c),l.datatype())},"...":function(l){if(Ef(l))throw new TypeError("All values expected to be scalar in function cumsum");return i(l)}});function i(u){try{return a(u)}catch(l){throw Hr(l,mm)}}function a(u){if(u.length===0)return[];for(var l=[r(u[0])],c=1;c<u.length;++c)l.push(n(l[c-1],u[c]));return l}function o(u,l){var c=ot(u);if(l<0||l>=c.length)throw new Ta(l,c.length);try{return s(u,l)}catch(f){throw Hr(f,mm)}}function s(u,l){var c,f,d;if(l<=0){var h=u[0][0];if(Array.isArray(h)){for(d=YP(u),f=[],c=0;c<d.length;c++)f[c]=s(d[c],l-1);return f}else return a(u)}else{for(f=[],c=0;c<u.length;c++)f[c]=s(u[c],l-1);return f}}}),gT="mean",qse=["typed","add","divide"],pB=z(gT,qse,t=>{var{typed:e,add:n,divide:r}=t;return e(gT,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":i,"...":function(s){if(Ef(s))throw new TypeError("Scalar values expected in function mean");return a(s)}});function i(o,s){try{var u=F0(o,s,n),l=Array.isArray(o)?ot(o):o.size();return r(u,l[s])}catch(c){throw Hr(c,"mean")}}function a(o){var s,u=0;if(Ks(o,function(l){try{s=s===void 0?l:n(s,l),u++}catch(c){throw Hr(c,"mean",l)}}),u===0)throw new Error("Cannot calculate the mean of an empty array");return r(s,u)}}),yT="median",Hse=["typed","add","divide","compare","partitionSelect"],Gse=z(yT,Hse,t=>{var{typed:e,add:n,divide:r,compare:i,partitionSelect:a}=t;function o(l){try{l=Ft(l.valueOf());var c=l.length;if(c===0)throw new Error("Cannot calculate median of an empty array");if(c%2===0){for(var f=c/2-1,d=a(l,f+1),h=l[f],p=0;p<f;++p)i(l[p],h)>0&&(h=l[p]);return u(h,d)}else{var m=a(l,(c-1)/2);return s(m)}}catch(g){throw Hr(g,"median")}}var s=e({"number | BigNumber | Complex | Unit":function(c){return c}}),u=e({"number | BigNumber | Complex | Unit, number | BigNumber | Complex | Unit":function(c,f){return r(n(c,f),2)}});return e(yT,{"Array | Matrix":o,"Array | Matrix, number | BigNumber":function(c,f){throw new Error("median(A, dim) is not yet supported")},"...":function(c){if(Ef(c))throw new TypeError("Scalar values expected in function median");return o(c)}})}),xT="mad",Kse=["typed","abs","map","median","subtract"],Yse=z(xT,Kse,t=>{var{typed:e,abs:n,map:r,median:i,subtract:a}=t;return e(xT,{"Array | Matrix":o,"...":function(u){return o(u)}});function o(s){if(s=Ft(s.valueOf()),s.length===0)throw new Error("Cannot calculate median absolute deviation (mad) of an empty array");try{var u=i(s);return i(r(s,function(l){return n(a(l,u))}))}catch(l){throw l instanceof TypeError&&l.message.includes("median")?new TypeError(l.message.replace("median","mad")):Hr(l,"mad")}}}),c1="unbiased",bT="variance",Xse=["typed","add","subtract","multiply","divide","mapSlices","isNaN"],mB=z(bT,Xse,t=>{var{typed:e,add:n,subtract:r,multiply:i,divide:a,mapSlices:o,isNaN:s}=t;return e(bT,{"Array | Matrix":function(f){return u(f,c1)},"Array | Matrix, string":u,"Array | Matrix, number | BigNumber":function(f,d){return l(f,d,c1)},"Array | Matrix, number | BigNumber, string":l,"...":function(f){return u(f,c1)}});function u(c,f){var d,h=0;if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");if(Ks(c,function(g){try{d=d===void 0?g:n(d,g),h++}catch(v){throw Hr(v,"variance",g)}}),h===0)throw new Error("Cannot calculate variance of an empty array");var p=a(d,h);if(d=void 0,Ks(c,function(g){var v=r(g,p);d=d===void 0?i(v,v):n(d,i(v,v))}),s(d))return d;switch(f){case"uncorrected":return a(d,h);case"biased":return a(d,h+1);case"unbiased":{var m=ht(d)?d.mul(0):0;return h===1?m:a(d,h-1)}default:throw new Error('Unknown normalization "'+f+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}function l(c,f,d){try{if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");return o(c,f,h=>u(h,d))}catch(h){throw Hr(h,"variance")}}}),wT="quantileSeq",Qse=["typed","?bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger","mapSlices"],vB=z(wT,Qse,t=>{var{typed:e,bignumber:n,add:r,subtract:i,divide:a,multiply:o,partitionSelect:s,compare:u,isInteger:l,smaller:c,smallerEq:f,larger:d,mapSlices:h}=t;return e(wT,{"Array | Matrix, number | BigNumber":(x,y)=>m(x,y,!1),"Array | Matrix, number | BigNumber, number":(x,y,b)=>p(x,y,!1,b,m),"Array | Matrix, number | BigNumber, boolean":m,"Array | Matrix, number | BigNumber, boolean, number":(x,y,b,w)=>p(x,y,b,w,m),"Array | Matrix, Array | Matrix":(x,y)=>g(x,y,!1),"Array | Matrix, Array | Matrix, number":(x,y,b)=>p(x,y,!1,b,g),"Array | Matrix, Array | Matrix, boolean":g,"Array | Matrix, Array | Matrix, boolean, number":(x,y,b,w)=>p(x,y,b,w,g)});function p(x,y,b,w,_){return h(x,w,E=>_(E,y,b))}function m(x,y,b){var w,_=x.valueOf();if(c(y,0))throw new Error("N/prob must be non-negative");if(f(y,1))return dt(y)?v(_,y,b):n(v(_,y,b));if(d(y,1)){if(!l(y))throw new Error("N must be a positive integer");if(d(y,4294967295))throw new Error("N must be less than or equal to 2^32-1, as that is the maximum length of an Array");var E=r(y,1);w=[];for(var C=0;c(C,y);C++){var N=a(C+1,E);w.push(v(_,N,b))}return dt(y)?w:n(w)}}function g(x,y,b){for(var w=x.valueOf(),_=y.valueOf(),E=[],C=0;C<_.length;++C)E.push(v(w,_[C],b));return E}function v(x,y,b){var w=Ft(x),_=w.length;if(_===0)throw new Error("Cannot calculate quantile of an empty sequence");var E=dt(y)?y*(_-1):y.times(_-1),C=dt(y)?Math.floor(E):E.floor().toNumber(),N=dt(y)?E%1:E.minus(C);if(l(E))return b?w[E]:s(w,dt(y)?E:E.valueOf());var D,A;if(b)D=w[C],A=w[C+1];else{A=s(w,C+1),D=w[C];for(var T=0;T<C;++T)u(w[T],D)>0&&(D=w[T])}return r(o(D,i(1,N)),o(A,N))}}),_T="std",Zse=["typed","map","sqrt","variance"],gB=z(_T,Zse,t=>{var{typed:e,map:n,sqrt:r,variance:i}=t;return e(_T,{"Array | Matrix":a,"Array | Matrix, string":a,"Array | Matrix, number | BigNumber":a,"Array | Matrix, number | BigNumber, string":a,"...":function(s){return a(s)}});function a(o,s){if(o.length===0)throw new SyntaxError("Function std requires one or more parameters (0 provided)");try{var u=i.apply(null,arguments);return na(u)?n(u,r):r(u)}catch(l){throw l instanceof TypeError&&l.message.includes(" variance")?new TypeError(l.message.replace(" variance"," std")):l}}}),ET="corr",Jse=["typed","matrix","mean","sqrt","sum","add","subtract","multiply","pow","divide"],eue=z(ET,Jse,t=>{var{typed:e,matrix:n,sqrt:r,sum:i,add:a,subtract:o,multiply:s,pow:u,divide:l}=t;return e(ET,{"Array, Array":function(h,p){return c(h,p)},"Matrix, Matrix":function(h,p){var m=c(h.toArray(),p.toArray());return Array.isArray(m)?n(m):m}});function c(d,h){var p=[];if(Array.isArray(d[0])&&Array.isArray(h[0])){if(d.length!==h.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same length.");for(var m=0;m<d.length;m++){if(d[m].length!==h[m].length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");p.push(f(d[m],h[m]))}return p}else{if(d.length!==h.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");return f(d,h)}}function f(d,h){var p=d.length,m=i(d),g=i(h),v=d.reduce((_,E,C)=>a(_,s(E,h[C])),0),x=i(d.map(_=>u(_,2))),y=i(h.map(_=>u(_,2))),b=o(s(p,v),s(m,g)),w=r(s(o(s(p,x),u(m,2)),o(s(p,y),u(g,2))));return l(b,w)}}),CT="combinations",tue=["typed"],nue=z(CT,tue,t=>{var{typed:e}=t;return e(CT,{"number, number":vO,"BigNumber, BigNumber":function(r,i){var a=r.constructor,o,s,u=r.minus(i),l=new a(1);if(!NT(r)||!NT(i))throw new TypeError("Positive integer value expected in function combinations");if(i.gt(r))throw new TypeError("k must be less than n in function combinations");if(o=l,i.lt(u))for(s=l;s.lte(u);s=s.plus(l))o=o.times(i.plus(s)).dividedBy(s);else for(s=l;s.lte(i);s=s.plus(l))o=o.times(u.plus(s)).dividedBy(s);return o}})});function NT(t){return t.isInteger()&&t.gte(0)}var ST="combinationsWithRep",rue=["typed"],iue=z(ST,rue,t=>{var{typed:e}=t;return e(ST,{"number, number":function(r,i){if(!qe(r)||r<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(!qe(i)||i<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(r<1)throw new TypeError("k must be less than or equal to n + k - 1");if(i<r-1){var a=No(r,r+i-1);return a/No(1,i)}var o=No(i+1,r+i-1);return o/No(1,r-1)},"BigNumber, BigNumber":function(r,i){var a=r.constructor,o,s,u=new a(1),l=r.minus(u);if(!DT(r)||!DT(i))throw new TypeError("Positive integer value expected in function combinationsWithRep");if(r.lt(u))throw new TypeError("k must be less than or equal to n + k - 1 in function combinationsWithRep");if(o=u,i.lt(l))for(s=u;s.lte(l);s=s.plus(u))o=o.times(i.plus(s)).dividedBy(s);else for(s=u;s.lte(i);s=s.plus(u))o=o.times(l.plus(s)).dividedBy(s);return o}})});function DT(t){return t.isInteger()&&t.gte(0)}var AT="gamma",aue=["typed","config","multiplyScalar","pow","BigNumber","Complex"],oue=z(AT,aue,t=>{var{typed:e,config:n,multiplyScalar:r,pow:i,BigNumber:a,Complex:o}=t;function s(l){if(l.im===0)return qv(l.re);if(l.re<.5){var c=new o(1-l.re,-l.im),f=new o(Math.PI*l.re,Math.PI*l.im);return new o(Math.PI).div(f.sin()).div(s(c))}l=new o(l.re-1,l.im);for(var d=new o(Sc[0],0),h=1;h<Sc.length;++h){var p=new o(Sc[h],0);d=d.add(p.div(l.add(h)))}var m=new o(l.re+yO+.5,l.im),g=Math.sqrt(2*Math.PI),v=m.pow(l.add(.5)),x=m.neg().exp();return d.mul(g).mul(v).mul(x)}return e(AT,{number:qv,Complex:s,BigNumber:function(c){if(c.isInteger())return c.isNegative()||c.isZero()?new a(1/0):u(c.minus(1));if(!c.isFinite())return new a(c.isNegative()?NaN:1/0);throw new Error("Integer BigNumber expected")}});function u(l){if(l<8)return new a([1,1,2,6,24,120,720,5040][l]);var c=n.precision+(Math.log(l.toNumber())|0),f=a.clone({precision:c});if(l%2===1)return l.times(u(new a(l-1)));for(var d=l,h=new f(l),p=l.toNumber();d>2;)d-=2,p+=d,h=h.times(p);return new a(h.toPrecision(a.precision))}}),TT="lgamma",sue=["Complex","typed"],uue=z(TT,sue,t=>{var{Complex:e,typed:n}=t,r=7,i=7,a=[-.029550653594771242,.00641025641025641,-.0019175269175269176,.0008417508417508417,-.0005952380952380953,.0007936507936507937,-.002777777777777778,.08333333333333333];return n(TT,{number:Hv,Complex:o,BigNumber:function(){throw new Error("mathjs doesn't yet provide an implementation of the algorithm lgamma for BigNumber")}});function o(l){var c=6.283185307179586,f=1.1447298858494002,d=.1;if(l.isNaN())return new e(NaN,NaN);if(l.im===0)return new e(Hv(l.re),0);if(l.re>=r||Math.abs(l.im)>=i)return s(l);if(l.re<=d){var h=ZV(c,l.im)*Math.floor(.5*l.re+.25),p=l.mul(Math.PI).sin().log(),m=o(new e(1-l.re,-l.im));return new e(f,h).sub(p).sub(m)}else return l.im>=0?u(l):u(l.conjugate()).conjugate()}function s(l){for(var c=l.sub(.5).mul(l.log()).sub(l).add(xO),f=new e(1,0).div(l),d=f.div(l),h=a[0],p=a[1],m=2*d.re,g=d.re*d.re+d.im*d.im,v=2;v<8;v++){var x=p;p=-g*h+a[v],h=m*h+x}var y=f.mul(d.mul(h).add(p));return c.add(y)}function u(l){var c=0,f=0,d=l;for(l=l.add(1);l.re<=r;){d=d.mul(l);var h=d.im<0?1:0;h!==0&&f===0&&c++,f=h,l=l.add(1)}return s(l).sub(d.log()).sub(new e(0,c*2*Math.PI*1))}}),MT="factorial",lue=["typed","gamma"],cue=z(MT,lue,t=>{var{typed:e,gamma:n}=t;return e(MT,{number:function(i){if(i<0)throw new Error("Value must be non-negative");return n(i+1)},BigNumber:function(i){if(i.isNegative())throw new Error("Value must be non-negative");return n(i.plus(1))},"Array | Matrix":e.referToSelf(r=>i=>pt(i,r))})}),IT="kldivergence",fue=["typed","matrix","divide","sum","multiply","map","dotDivide","log","isNumeric"],due=z(IT,fue,t=>{var{typed:e,matrix:n,divide:r,sum:i,multiply:a,map:o,dotDivide:s,log:u,isNumeric:l}=t;return e(IT,{"Array, Array":function(d,h){return c(n(d),n(h))},"Matrix, Array":function(d,h){return c(d,n(h))},"Array, Matrix":function(d,h){return c(n(d),h)},"Matrix, Matrix":function(d,h){return c(d,h)}});function c(f,d){var h=d.size().length,p=f.size().length;if(h>1)throw new Error("first object must be one dimensional");if(p>1)throw new Error("second object must be one dimensional");if(h!==p)throw new Error("Length of two vectors must be equal");var m=i(f);if(m===0)throw new Error("Sum of elements in first object must be non zero");var g=i(d);if(g===0)throw new Error("Sum of elements in second object must be non zero");var v=r(f,i(f)),x=r(d,i(d)),y=i(a(v,o(s(v,x),b=>u(b))));return l(y)?y:Number.NaN}}),RT="multinomial",hue=["typed","add","divide","multiply","factorial","isInteger","isPositive"],pue=z(RT,hue,t=>{var{typed:e,add:n,divide:r,multiply:i,factorial:a,isInteger:o,isPositive:s}=t;return e(RT,{"Array | Matrix":function(l){var c=0,f=1;return Ks(l,function(d){if(!o(d)||!s(d))throw new TypeError("Positive integer value expected in function multinomial");c=n(c,d),f=i(f,a(d))}),r(a(c),f)}})}),kT="permutations",mue=["typed","factorial"],vue=z(kT,mue,t=>{var{typed:e,factorial:n}=t;return e(kT,{"number | BigNumber":n,"number, number":function(i,a){if(!qe(i)||i<0)throw new TypeError("Positive integer value expected in function permutations");if(!qe(a)||a<0)throw new TypeError("Positive integer value expected in function permutations");if(a>i)throw new TypeError("second argument k must be less than or equal to first argument n");return No(i-a+1,i)},"BigNumber, BigNumber":function(i,a){var o,s;if(!FT(i)||!FT(a))throw new TypeError("Positive integer value expected in function permutations");if(a.gt(i))throw new TypeError("second argument k must be less than or equal to first argument n");var u=i.mul(0).add(1);for(o=u,s=i.minus(a).plus(1);s.lte(i);s=s.plus(1))o=o.times(s);return o}})});function FT(t){return t.isInteger()&&t.gte(0)}var i_={exports:{}};i_.exports;(function(t){(function(e,n,r){function i(u){var l=this,c=s();l.next=function(){var f=2091639*l.s0+l.c*23283064365386963e-26;return l.s0=l.s1,l.s1=l.s2,l.s2=f-(l.c=f|0)},l.c=1,l.s0=c(" "),l.s1=c(" "),l.s2=c(" "),l.s0-=c(u),l.s0<0&&(l.s0+=1),l.s1-=c(u),l.s1<0&&(l.s1+=1),l.s2-=c(u),l.s2<0&&(l.s2+=1),c=null}function a(u,l){return l.c=u.c,l.s0=u.s0,l.s1=u.s1,l.s2=u.s2,l}function o(u,l){var c=new i(u),f=l&&l.state,d=c.next;return d.int32=function(){return c.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,f&&(typeof f=="object"&&a(f,c),d.state=function(){return a(c,{})}),d}function s(){var u=4022871197,l=function(c){c=String(c);for(var f=0;f<c.length;f++){u+=c.charCodeAt(f);var d=.02519603282416938*u;u=d>>>0,d-=u,d*=u,u=d>>>0,d-=u,u+=d*4294967296}return(u>>>0)*23283064365386963e-26};return l}n&&n.exports?n.exports=o:this.alea=o})(ml,t)})(i_);var gue=i_.exports,a_={exports:{}};a_.exports;(function(t){(function(e,n,r){function i(s){var u=this,l="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var f=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^f^f>>>8},s===(s|0)?u.x=s:l+=s;for(var c=0;c<l.length+64;c++)u.x^=l.charCodeAt(c)|0,u.next()}function a(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u}function o(s,u){var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,p=(d+h)/(1<<21);while(p===0);return p},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&a(c,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=o:this.xor128=o})(ml,t)})(a_);var yue=a_.exports,o_={exports:{}};o_.exports;(function(t){(function(e,n,r){function i(s){var u=this,l="";u.next=function(){var f=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^(f^f<<1))|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,s===(s|0)?u.x=s:l+=s;for(var c=0;c<l.length+64;c++)u.x^=l.charCodeAt(c)|0,c==l.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function a(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u.v=s.v,u.d=s.d,u}function o(s,u){var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,p=(d+h)/(1<<21);while(p===0);return p},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&a(c,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=o:this.xorwow=o})(ml,t)})(o_);var xue=o_.exports,s_={exports:{}};s_.exports;(function(t){(function(e,n,r){function i(s){var u=this;u.next=function(){var c=u.x,f=u.i,d,h;return d=c[f],d^=d>>>7,h=d^d<<24,d=c[f+1&7],h^=d^d>>>10,d=c[f+3&7],h^=d^d>>>3,d=c[f+4&7],h^=d^d<<7,d=c[f+7&7],d=d^d<<13,h^=d^d<<9,c[f]=h,u.i=f+1&7,h};function l(c,f){var d,h=[];if(f===(f|0))h[0]=f;else for(f=""+f,d=0;d<f.length;++d)h[d&7]=h[d&7]<<15^f.charCodeAt(d)+h[d+1&7]<<13;for(;h.length<8;)h.push(0);for(d=0;d<8&&h[d]===0;++d);for(d==8?h[7]=-1:h[d],c.x=h,c.i=0,d=256;d>0;--d)c.next()}l(u,s)}function a(s,u){return u.x=s.x.slice(),u.i=s.i,u}function o(s,u){s==null&&(s=+new Date);var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,p=(d+h)/(1<<21);while(p===0);return p},f.int32=l.next,f.quick=f,c&&(c.x&&a(c,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=o:this.xorshift7=o})(ml,t)})(s_);var bue=s_.exports,u_={exports:{}};u_.exports;(function(t){(function(e,n,r){function i(s){var u=this;u.next=function(){var c=u.w,f=u.X,d=u.i,h,p;return u.w=c=c+1640531527|0,p=f[d+34&127],h=f[d=d+1&127],p^=p<<13,h^=h<<17,p^=p>>>15,h^=h>>>12,p=f[d]=p^h,u.i=d,p+(c^c>>>16)|0};function l(c,f){var d,h,p,m,g,v=[],x=128;for(f===(f|0)?(h=f,f=null):(f=f+"\0",h=0,x=Math.max(x,f.length)),p=0,m=-32;m<x;++m)f&&(h^=f.charCodeAt((m+32)%f.length)),m===0&&(g=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,m>=0&&(g=g+1640531527|0,d=v[m&127]^=h+g,p=d==0?p+1:0);for(p>=128&&(v[(f&&f.length||0)&127]=-1),p=127,m=4*128;m>0;--m)h=v[p+34&127],d=v[p=p+1&127],h^=h<<13,d^=d<<17,h^=h>>>15,d^=d>>>12,v[p]=h^d;c.w=g,c.X=v,c.i=p}l(u,s)}function a(s,u){return u.i=s.i,u.w=s.w,u.X=s.X.slice(),u}function o(s,u){s==null&&(s=+new Date);var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,p=(d+h)/(1<<21);while(p===0);return p},f.int32=l.next,f.quick=f,c&&(c.X&&a(c,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=o:this.xor4096=o})(ml,t)})(u_);var wue=u_.exports,l_={exports:{}};l_.exports;(function(t){(function(e,n,r){function i(s){var u=this,l="";u.next=function(){var f=u.b,d=u.c,h=u.d,p=u.a;return f=f<<25^f>>>7^d,d=d-h|0,h=h<<24^h>>>8^p,p=p-f|0,u.b=f=f<<20^f>>>12^d,u.c=d=d-h|0,u.d=h<<16^d>>>16^p,u.a=p-f|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,s===Math.floor(s)?(u.a=s/4294967296|0,u.b=s|0):l+=s;for(var c=0;c<l.length+20;c++)u.b^=l.charCodeAt(c)|0,u.next()}function a(s,u){return u.a=s.a,u.b=s.b,u.c=s.c,u.d=s.d,u}function o(s,u){var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,p=(d+h)/(1<<21);while(p===0);return p},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&a(c,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=o:this.tychei=o})(ml,t)})(l_);var _ue=l_.exports,yB={exports:{}};const Eue={},Cue=Object.freeze(Object.defineProperty({__proto__:null,default:Eue},Symbol.toStringTag,{value:"Module"})),Nue=e$(Cue);(function(t){(function(e,n,r){var i=256,a=6,o=52,s="random",u=r.pow(i,a),l=r.pow(2,o),c=l*2,f=i-1,d;function h(b,w,_){var E=[];w=w==!0?{entropy:!0}:w||{};var C=v(g(w.entropy?[b,y(n)]:b??x(),3),E),N=new p(E),D=function(){for(var A=N.g(a),T=u,k=0;A<l;)A=(A+k)*i,T*=i,k=N.g(1);for(;A>=c;)A/=2,T/=2,k>>>=1;return(A+k)/T};return D.int32=function(){return N.g(4)|0},D.quick=function(){return N.g(4)/4294967296},D.double=D,v(y(N.S),n),(w.pass||_||function(A,T,k,F){return F&&(F.S&&m(F,N),A.state=function(){return m(N,{})}),k?(r[s]=A,T):A})(D,C,"global"in w?w.global:this==r,w.state)}function p(b){var w,_=b.length,E=this,C=0,N=E.i=E.j=0,D=E.S=[];for(_||(b=[_++]);C<i;)D[C]=C++;for(C=0;C<i;C++)D[C]=D[N=f&N+b[C%_]+(w=D[C])],D[N]=w;(E.g=function(A){for(var T,k=0,F=E.i,O=E.j,I=E.S;A--;)T=I[F=f&F+1],k=k*i+I[f&(I[F]=I[O=f&O+T])+(I[O]=T)];return E.i=F,E.j=O,k})(i)}function m(b,w){return w.i=b.i,w.j=b.j,w.S=b.S.slice(),w}function g(b,w){var _=[],E=typeof b,C;if(w&&E=="object")for(C in b)try{_.push(g(b[C],w-1))}catch{}return _.length?_:E=="string"?b:b+"\0"}function v(b,w){for(var _=b+"",E,C=0;C<_.length;)w[f&C]=f&(E^=w[f&C]*19)+_.charCodeAt(C++);return y(w)}function x(){try{var b;return d&&(b=d.randomBytes)?b=b(i):(b=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(b)),y(b)}catch{var w=e.navigator,_=w&&w.plugins;return[+new Date,e,_,e.screen,y(n)]}}function y(b){return String.fromCharCode.apply(0,b)}if(v(r.random(),n),t.exports){t.exports=h;try{d=Nue}catch{}}else r["seed"+s]=h})(typeof self<"u"?self:ml,[],Math)})(yB);var Sue=yB.exports,Due=gue,Aue=yue,Tue=xue,Mue=bue,Iue=wue,Rue=_ue,bl=Sue;bl.alea=Due;bl.xor128=Aue;bl.xorwow=Tue;bl.xorshift7=Mue;bl.xor4096=Iue;bl.tychei=Rue;var kue=bl;const xB=i0(kue);var Fue=xB(Date.now());function ef(t){var e;function n(i){e=i===null?Fue:xB(String(i))}n(t);function r(){return e()}return r}var PT="pickRandom",Pue=["typed","config","?on"],Oue=z(PT,Pue,t=>{var{typed:e,config:n,on:r}=t,i=ef(n.randomSeed);return r&&r("config",function(o,s){o.randomSeed!==s.randomSeed&&(i=ef(o.randomSeed))}),e(PT,{"Array | Matrix":function(s){return a(s,{})},"Array | Matrix, Object":function(s,u){return a(s,u)},"Array | Matrix, number":function(s,u){return a(s,{number:u})},"Array | Matrix, Array | Matrix":function(s,u){return a(s,{weights:u})},"Array | Matrix, Array | Matrix, number":function(s,u,l){return a(s,{number:l,weights:u})},"Array | Matrix, number, Array | Matrix":function(s,u,l){return a(s,{number:u,weights:l})}});function a(o,s){var{number:u,weights:l,elementWise:c=!0}=s,f=typeof u>"u";f&&(u=1);var d=Je(o)?o.create:Je(l)?l.create:null;o=o.valueOf(),l&&(l=l.valueOf()),c===!0&&(o=Ft(o),l=Ft(l));var h=0;if(typeof l<"u"){if(l.length!==o.length)throw new Error("Weights must have the same length as possibles");for(var p=0,m=l.length;p<m;p++){if(!dt(l[p])||l[p]<0)throw new Error("Weights must be an array of positive numbers");h+=l[p]}}for(var g=o.length,v=[],x;v.length<u;){if(typeof l>"u")x=o[Math.floor(i()*g)];else for(var y=i()*h,b=0,w=o.length;b<w;b++)if(y-=l[b],y<0){x=o[b];break}v.push(x)}return f?v[0]:d?d(v):v}});function c_(t,e){var n=[];if(t=t.slice(0),t.length>1)for(var r=0,i=t.shift();r<i;r++)n.push(c_(t,e));else for(var a=0,o=t.shift();a<o;a++)n.push(e());return n}var OT="random",Bue=["typed","config","?on"],Lue=z(OT,Bue,t=>{var{typed:e,config:n,on:r}=t,i=ef(n.randomSeed);return r&&r("config",function(s,u){s.randomSeed!==u.randomSeed&&(i=ef(s.randomSeed))}),e(OT,{"":()=>o(0,1),number:s=>o(0,s),"number, number":(s,u)=>o(s,u),"Array | Matrix":s=>a(s,0,1),"Array | Matrix, number":(s,u)=>a(s,0,u),"Array | Matrix, number, number":(s,u,l)=>a(s,u,l)});function a(s,u,l){var c=c_(s.valueOf(),()=>o(u,l));return Je(s)?s.create(c,"number"):c}function o(s,u){return s+i()*(u-s)}}),BT="randomInt",jue=["typed","config","log2","?on"],$ue=2n**30n,zue=z(BT,jue,t=>{var{typed:e,config:n,log2:r,on:i}=t,a=ef(n.randomSeed);return i&&i("config",function(l,c){l.randomSeed!==c.randomSeed&&(a=ef(l.randomSeed))}),e(BT,{"":()=>s(0,2),number:l=>s(0,l),"number, number":(l,c)=>s(l,c),bigint:l=>u(0n,l),"bigint, bigint":u,"Array | Matrix":l=>o(l,0,1),"Array | Matrix, number":(l,c)=>o(l,0,c),"Array | Matrix, number, number":(l,c,f)=>o(l,c,f)});function o(l,c,f){var d=c_(l.valueOf(),()=>s(c,f));return Je(l)?l.create(d,"number"):d}function s(l,c){return Math.floor(l+a()*(c-l))}function u(l,c){var f=c-l;if(f<=$ue)return l+BigInt(s(0,Number(f)));for(var d=r(f),h=f;h>=f;){h=0n;for(var p=0;p<d;++p)h=2n*h+(a()<.5?0n:1n)}return l+h}}),LT="stirlingS2",Uue=["typed","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","factorial","combinations","isNegative","isInteger","number","?bignumber","larger"],Wue=z(LT,Uue,t=>{var{typed:e,addScalar:n,subtractScalar:r,multiplyScalar:i,divideScalar:a,pow:o,factorial:s,combinations:u,isNegative:l,isInteger:c,number:f,bignumber:d,larger:h}=t,p=[],m=[];return e(LT,{"number | BigNumber, number | BigNumber":function(v,x){if(!c(v)||l(v)||!c(x)||l(x))throw new TypeError("Non-negative integer value expected in function stirlingS2");if(h(x,v))throw new TypeError("k must be less than or equal to n in function stirlingS2");var y=!(dt(v)&&dt(x)),b=y?m:p,w=y?d:f,_=f(v),E=f(x);if(b[_]&&b[_].length>E)return b[_][E];for(var C=0;C<=_;++C)if(b[C]||(b[C]=[w(C===0?1:0)]),C!==0)for(var N=b[C],D=b[C-1],A=N.length;A<=C&&A<=E;++A)A===C?N[A]=1:N[A]=n(i(w(A),D[A]),D[A-1]);return b[_][E]}})}),jT="bellNumbers",Vue=["typed","addScalar","isNegative","isInteger","stirlingS2"],que=z(jT,Vue,t=>{var{typed:e,addScalar:n,isNegative:r,isInteger:i,stirlingS2:a}=t;return e(jT,{"number | BigNumber":function(s){if(!i(s)||r(s))throw new TypeError("Non-negative integer value expected in function bellNumbers");for(var u=0,l=0;l<=s;l++)u=n(u,a(s,l));return u}})}),$T="catalan",Hue=["typed","addScalar","divideScalar","multiplyScalar","combinations","isNegative","isInteger"],Gue=z($T,Hue,t=>{var{typed:e,addScalar:n,divideScalar:r,multiplyScalar:i,combinations:a,isNegative:o,isInteger:s}=t;return e($T,{"number | BigNumber":function(l){if(!s(l)||o(l))throw new TypeError("Non-negative integer value expected in function catalan");return r(a(i(l,2),l),n(l,1))}})}),zT="composition",Kue=["typed","addScalar","combinations","isNegative","isPositive","isInteger","larger"],Yue=z(zT,Kue,t=>{var{typed:e,addScalar:n,combinations:r,isPositive:i,isNegative:a,isInteger:o,larger:s}=t;return e(zT,{"number | BigNumber, number | BigNumber":function(l,c){if(!o(l)||!i(l)||!o(c)||!i(c))throw new TypeError("Positive integer value expected in function composition");if(s(c,l))throw new TypeError("k must be less than or equal to n in function composition");return r(n(l,-1),n(c,-1))}})}),UT="leafCount",Xue=["parse","typed"],Que=z(UT,Xue,t=>{var{parse:e,typed:n}=t;function r(i){var a=0;return i.forEach(o=>{a+=r(o)}),a||1}return n(UT,{Node:function(a){return r(a)}})});function WT(t){return At(t)||Tn(t)&&t.isUnary()&&At(t.args[0])}function ng(t){return!!(At(t)||(qs(t)||Tn(t))&&t.args.every(ng)||$o(t)&&ng(t.content))}function VT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function f1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VT(Object(n),!0).forEach(function(r){Pn(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Zue="simplifyUtil",Jue=["FunctionNode","OperatorNode","SymbolNode"],f_=z(Zue,Jue,t=>{var{FunctionNode:e,OperatorNode:n,SymbolNode:r}=t,i=!0,a=!1,o="defaultF",s={add:{trivial:i,total:i,commutative:i,associative:i},unaryPlus:{trivial:i,total:i,commutative:i,associative:i},subtract:{trivial:a,total:i,commutative:a,associative:a},multiply:{trivial:i,total:i,commutative:i,associative:i},divide:{trivial:a,total:i,commutative:a,associative:a},paren:{trivial:i,total:i,commutative:i,associative:a},defaultF:{trivial:a,total:i,commutative:a,associative:a}},u={divide:{total:a},log:{total:a}},l={subtract:{total:a},abs:{trivial:i},log:{total:i}};function c(y,b){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:s,_=o;if(typeof y=="string"?_=y:Tn(y)?_=y.fn.toString():qs(y)?_=y.name:$o(y)&&(_="paren"),Ue(w,_)){var E=w[_];if(Ue(E,b))return E[b];if(Ue(s,_))return s[_][b]}if(Ue(w,o)){var C=w[o];return Ue(C,b)?C[b]:s[o][b]}if(Ue(s,_)){var N=s[_];if(Ue(N,b))return N[b]}return s[o][b]}function f(y){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s;return c(y,"commutative",b)}function d(y){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s;return c(y,"associative",b)}function h(y,b){var w=f1({},y);for(var _ in b)Ue(y,_)?w[_]=f1(f1({},b[_]),y[_]):w[_]=b[_];return w}function p(y,b){if(!y.args||y.args.length===0)return y;y.args=m(y,b);for(var w=0;w<y.args.length;w++)p(y.args[w],b)}function m(y,b){var w,_=[],E=function(N){for(var D=0;D<N.args.length;D++){var A=N.args[D];Tn(A)&&w===A.op?E(A):_.push(A)}};return d(y,b)?(w=y.op,E(y),_):y.args}function g(y,b){if(!(!y.args||y.args.length===0)){for(var w=x(y),_=y.args.length,E=0;E<_;E++)g(y.args[E],b);if(_>2&&d(y,b)){for(var C=y.args.pop();y.args.length>0;)C=w([y.args.pop(),C]);y.args=C.args}}}function v(y,b){if(!(!y.args||y.args.length===0)){for(var w=x(y),_=y.args.length,E=0;E<_;E++)v(y.args[E],b);if(_>2&&d(y,b)){for(var C=y.args.shift();y.args.length>0;)C=w([C,y.args.shift()]);y.args=C.args}}}function x(y){return Tn(y)?function(b){try{return new n(y.op,y.fn,b,y.implicit)}catch(w){return console.error(w),[]}}:function(b){return new e(new r(y.name),b)}}return{createMakeNodeFunction:x,hasProperty:c,isCommutative:f,isAssociative:d,mergeContext:h,flatten:p,allChildren:m,unflattenr:g,unflattenl:v,defaultContext:s,realContext:u,positiveContext:l}}),ele="simplify",tle=["typed","parse","equal","resolve","simplifyConstant","simplifyCore","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode","replacer"],nle=z(ele,tle,t=>{var{typed:e,parse:n,equal:r,resolve:i,simplifyConstant:a,simplifyCore:o,AccessorNode:s,ArrayNode:u,ConstantNode:l,FunctionNode:c,IndexNode:f,ObjectNode:d,OperatorNode:h,ParenthesisNode:p,SymbolNode:m,replacer:g}=t,{hasProperty:v,isCommutative:x,isAssociative:y,mergeContext:b,flatten:w,unflattenr:_,unflattenl:E,createMakeNodeFunction:C,defaultContext:N,realContext:D,positiveContext:A}=f_({FunctionNode:c,OperatorNode:h,SymbolNode:m});e.addConversion({from:"Object",to:"Map",convert:Cc});var T=e("simplify",{Node:R,"Node, Map":(H,U)=>R(H,!1,U),"Node, Map, Object":(H,U,Q)=>R(H,!1,U,Q),"Node, Array":R,"Node, Array, Map":R,"Node, Array, Map, Object":R});e.removeConversion({from:"Object",to:"Map",convert:Cc}),T.defaultContext=N,T.realContext=D,T.positiveContext=A;function k(H){return H.transform(function(U){return $o(U)?k(U.content):U})}var F={true:!0,false:!0,e:!0,i:!0,Infinity:!0,LN2:!0,LN10:!0,LOG2E:!0,LOG10E:!0,NaN:!0,phi:!0,pi:!0,SQRT1_2:!0,SQRT2:!0,tau:!0};T.rules=[o,{l:"log(e)",r:"1"},{s:"n-n1 -> n+-n1",assuming:{subtract:{total:!0}}},{s:"n-n -> 0",assuming:{subtract:{total:!1}}},{s:"-(cl*v) -> v * (-cl)",assuming:{multiply:{commutative:!0},subtract:{total:!0}}},{s:"-(cl*v) -> (-cl) * v",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{s:"-(v*cl) -> v * (-cl)",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{l:"-(n1/n2)",r:"-n1/n2"},{l:"-v",r:"v * (-1)"},{l:"(n1 + n2)*(-1)",r:"n1*(-1) + n2*(-1)",repeat:!0},{l:"n/n1^n2",r:"n*n1^-n2"},{l:"n/n1",r:"n*n1^-1"},{s:"(n1*n2)^n3 -> n1^n3 * n2^n3",assuming:{multiply:{commutative:!0}}},{s:"(n1*n2)^(-1) -> n2^(-1) * n1^(-1)",assuming:{multiply:{commutative:!1}}},{s:"(n ^ n1) ^ n2 -> n ^ (n1 * n2)",assuming:{divide:{total:!0}}},{l:" vd   * ( vd   * n1 + n2)",r:"vd^2       * n1 +  vd   * n2"},{s:" vd   * (vd^n4 * n1 + n2)   ->  vd^(1+n4)  * n1 +  vd   * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * ( vd   * n1 + n2)   ->  vd^(n3+1)  * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * (vd^n4 * n1 + n2)   ->  vd^(n3+n4) * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{l:"n*n",r:"n^2"},{s:"n * n^n1 -> n^(n1+1)",assuming:{divide:{total:!0}}},{s:"n^n1 * n^n2 -> n^(n1+n2)",assuming:{divide:{total:!0}}},a,{s:"n+n -> 2*n",assuming:{add:{total:!0}}},{l:"n+-n",r:"0"},{l:"vd*n + vd",r:"vd*(n+1)"},{l:"n3*n1 + n3*n2",r:"n3*(n1+n2)"},{l:"n3^(-n4)*n1 +   n3  * n2",r:"n3^(-n4)*(n1 + n3^(n4+1) *n2)"},{l:"n3^(-n4)*n1 + n3^n5 * n2",r:"n3^(-n4)*(n1 + n3^(n4+n5)*n2)"},{s:"n*vd + vd -> (n+1)*vd",assuming:{multiply:{commutative:!1}}},{s:"vd + n*vd -> (1+n)*vd",assuming:{multiply:{commutative:!1}}},{s:"n1*n3 + n2*n3 -> (n1+n2)*n3",assuming:{multiply:{commutative:!1}}},{s:"n^n1 * n -> n^(n1+1)",assuming:{divide:{total:!0},multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3    -> (n1 + n2*n3^(n4 +  1))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3^n5 -> (n1 + n2*n3^(n4 + n5))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{l:"n*cd + cd",r:"(n+1)*cd"},{s:"cd*n + cd -> cd*(n+1)",assuming:{multiply:{commutative:!1}}},{s:"cd + cd*n -> cd*(1+n)",assuming:{multiply:{commutative:!1}}},a,{s:"(-n)*n1 -> -(n*n1)",assuming:{subtract:{total:!0}}},{s:"n1*(-n) -> -(n1*n)",assuming:{subtract:{total:!0},multiply:{commutative:!1}}},{s:"ce+ve -> ve+ce",assuming:{add:{commutative:!0}},imposeContext:{add:{commutative:!1}}},{s:"vd*cd -> cd*vd",assuming:{multiply:{commutative:!0}},imposeContext:{multiply:{commutative:!1}}},{l:"n+-n1",r:"n-n1"},{l:"n+-(n1)",r:"n-(n1)"},{s:"n*(n1^-1) -> n/n1",assuming:{multiply:{commutative:!0}}},{s:"n*n1^-n2 -> n/n1^n2",assuming:{multiply:{commutative:!0}}},{s:"n^-1 -> 1/n",assuming:{multiply:{commutative:!0}}},{l:"n^1",r:"n"},{s:"n*(n1/n2) -> (n*n1)/n2",assuming:{multiply:{associative:!0}}},{s:"n-(n1+n2) -> n-n1-n2",assuming:{addition:{associative:!0,commutative:!0}}},{l:"1*n",r:"n",imposeContext:{multiply:{commutative:!0}}},{s:"n1/(n2/n3) -> (n1*n3)/n2",assuming:{multiply:{associative:!0}}},{l:"n1/(-n2)",r:"-n1/n2"}];function O(H,U){var Q={};if(H.s){var re=H.s.split("->");if(re.length===2)Q.l=re[0],Q.r=re[1];else throw SyntaxError("Could not parse rule: "+H.s)}else Q.l=H.l,Q.r=H.r;Q.l=k(n(Q.l)),Q.r=k(n(Q.r));for(var ie of["imposeContext","repeat","assuming"])ie in H&&(Q[ie]=H[ie]);if(H.evaluate&&(Q.evaluate=n(H.evaluate)),y(Q.l,U)){var de=!x(Q.l,U),he;de&&(he=B());var $=C(Q.l),G=B();Q.expanded={},Q.expanded.l=$([Q.l,G]),w(Q.expanded.l,U),_(Q.expanded.l,U),Q.expanded.r=$([Q.r,G]),de&&(Q.expandedNC1={},Q.expandedNC1.l=$([he,Q.l]),Q.expandedNC1.r=$([he,Q.r]),Q.expandedNC2={},Q.expandedNC2.l=$([he,Q.expanded.l]),Q.expandedNC2.r=$([he,Q.expanded.r]))}return Q}function I(H,U){for(var Q=[],re=0;re<H.length;re++){var ie=H[re],de=void 0,he=typeof ie;switch(he){case"string":ie={s:ie};case"object":de=O(ie,U);break;case"function":de=ie;break;default:throw TypeError("Unsupported type of rule: "+he)}Q.push(de)}return Q}var M=0;function B(){return new m("_p"+M++)}function R(H,U){var Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:mh(),re=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},ie=re.consoleDebug;U=I(U||T.rules,re.context);var de=i(H,Q);de=k(de);for(var he={},$=de.toString({parenthesis:"all"});!he[$];){he[$]=!0,M=0;var G=$;ie&&console.log("Working on: ",$);for(var ue=0;ue<U.length;ue++){var ce="";if(typeof U[ue]=="function"?(de=U[ue](de,re),ie&&(ce=U[ue].name)):(w(de,re.context),de=K(de,U[ue],re.context),ie&&(ce="".concat(U[ue].l.toString()," -> ").concat(U[ue].r.toString()))),ie){var ge=de.toString({parenthesis:"all"});ge!==G&&(console.log("Applying",ce,"produced",ge),G=ge)}E(de,re.context)}$=de.toString({parenthesis:"all"})}return de}function j(H,U,Q){var re=H;if(H)for(var ie=0;ie<H.length;++ie){var de=K(H[ie],U,Q);de!==H[ie]&&(re===H&&(re=H.slice()),re[ie]=de)}return re}function K(H,U,Q){if(U.assuming){for(var re in U.assuming)for(var ie in U.assuming[re])if(v(re,ie,Q)!==U.assuming[re][ie])return H}var de=b(U.imposeContext,Q),he=H;if(he instanceof h||he instanceof c){var $=j(he.args,U,Q);$!==he.args&&(he=he.clone(),he.args=$)}else if(he instanceof p){if(he.content){var G=K(he.content,U,Q);G!==he.content&&(he=new p(G))}}else if(he instanceof u){var ue=j(he.items,U,Q);ue!==he.items&&(he=new u(ue))}else if(he instanceof s){var ce=he.object;he.object&&(ce=K(he.object,U,Q));var ge=he.index;he.index&&(ge=K(he.index,U,Q)),(ce!==he.object||ge!==he.index)&&(he=new s(ce,ge))}else if(he instanceof f){var Ce=j(he.dimensions,U,Q);Ce!==he.dimensions&&(he=new f(Ce))}else if(he instanceof d){var Ae=!1,Pe={};for(var q in he.properties)Pe[q]=K(he.properties[q],U,Q),Pe[q]!==he.properties[q]&&(Ae=!0);Ae&&(he=new d(Pe))}var ee=U.r,le=te(U.l,he,de)[0];if(!le&&U.expanded&&(ee=U.expanded.r,le=te(U.expanded.l,he,de)[0]),!le&&U.expandedNC1&&(ee=U.expandedNC1.r,le=te(U.expandedNC1.l,he,de)[0],le||(ee=U.expandedNC2.r,le=te(U.expandedNC2.l,he,de)[0])),le){var pe=he.implicit;he=ee.clone(),pe&&"implicit"in ee&&(he.implicit=!0),he=he.transform(function(be){return be.isSymbolNode&&Ue(le.placeholders,be.name)?le.placeholders[be.name].clone():be})}return U.repeat&&he!==H&&(he=K(he,U,Q)),he}function V(H,U){var Q=[],re,ie,de=C(H);if(x(H,U))for(var he=0;he<H.args.length;he++)ie=H.args.slice(0),ie.splice(he,1),re=ie.length===1?ie[0]:de(ie),Q.push(de([H.args[he],re]));else for(var $=1;$<H.args.length;$++){var G=H.args[0];$>1&&(G=de(H.args.slice(0,$))),ie=H.args.slice($),re=ie.length===1?ie[0]:de(ie),Q.push(de([G,re]))}return Q}function L(H,U){var Q={placeholders:{}};if(!H.placeholders&&!U.placeholders)return Q;if(H.placeholders){if(!U.placeholders)return H}else return U;for(var re in H.placeholders)if(Ue(H.placeholders,re)&&(Q.placeholders[re]=H.placeholders[re],Ue(U.placeholders,re)&&!oe(H.placeholders[re],U.placeholders[re])))return null;for(var ie in U.placeholders)Ue(U.placeholders,ie)&&(Q.placeholders[ie]=U.placeholders[ie]);return Q}function ne(H,U){var Q=[];if(H.length===0||U.length===0)return Q;for(var re,ie=0;ie<H.length;ie++)for(var de=0;de<U.length;de++)re=L(H[ie],U[de]),re&&Q.push(re);return Q}function fe(H){if(H.length===0)return H;for(var U=H.reduce(ne),Q=[],re={},ie=0;ie<U.length;ie++){var de=JSON.stringify(U[ie],g);re[de]||(re[de]=!0,Q.push(U[ie]))}return Q}function te(H,U,Q,re){var ie=[{placeholders:{}}];if(H instanceof h&&U instanceof h||H instanceof c&&U instanceof c){if(H instanceof h){if(H.op!==U.op||H.fn!==U.fn)return[]}else if(H instanceof c&&H.name!==U.name)return[];if(U.args.length===1&&H.args.length===1||!y(U,Q)&&U.args.length===H.args.length||re){for(var de=[],he=0;he<H.args.length;he++){var $=te(H.args[he],U.args[he],Q);if($.length===0)break;de.push($)}if(de.length!==H.args.length){if(!x(U,Q)||H.args.length===1)return[];if(H.args.length>2)throw new Error("permuting >2 commutative non-associative rule arguments not yet implemented");var G=te(H.args[0],U.args[1],Q);if(G.length===0)return[];var ue=te(H.args[1],U.args[0],Q);if(ue.length===0)return[];de=[G,ue]}ie=fe(de)}else if(U.args.length>=2&&H.args.length===2){for(var ce=V(U,Q),ge=[],Ce=0;Ce<ce.length;Ce++){var Ae=te(H,ce[Ce],Q,!0);ge=ge.concat(Ae)}return ge}else{if(H.args.length>2)throw Error("Unexpected non-binary associative function: "+H.toString());return[]}}else if(H instanceof m){if(H.name.length===0)throw new Error("Symbol in rule has 0 length...!?");if(F[H.name]){if(H.name!==U.name)return[]}else switch(H.name[1]>="a"&&H.name[1]<="z"?H.name.substring(0,2):H.name[0]){case"n":case"_p":ie[0].placeholders[H.name]=U;break;case"c":case"cl":if(At(U))ie[0].placeholders[H.name]=U;else return[];break;case"v":if(!At(U))ie[0].placeholders[H.name]=U;else return[];break;case"vl":if(rr(U))ie[0].placeholders[H.name]=U;else return[];break;case"cd":if(WT(U))ie[0].placeholders[H.name]=U;else return[];break;case"vd":if(!WT(U))ie[0].placeholders[H.name]=U;else return[];break;case"ce":if(ng(U))ie[0].placeholders[H.name]=U;else return[];break;case"ve":if(!ng(U))ie[0].placeholders[H.name]=U;else return[];break;default:throw new Error("Invalid symbol in rule: "+H.name)}}else if(H instanceof l){if(!r(H.value,U.value))return[]}else return[];return ie}function oe(H,U){if(H instanceof l&&U instanceof l){if(!r(H.value,U.value))return!1}else if(H instanceof m&&U instanceof m){if(H.name!==U.name)return!1}else if(H instanceof h&&U instanceof h||H instanceof c&&U instanceof c){if(H instanceof h){if(H.op!==U.op||H.fn!==U.fn)return!1}else if(H instanceof c&&H.name!==U.name)return!1;if(H.args.length!==U.args.length)return!1;for(var Q=0;Q<H.args.length;Q++)if(!oe(H.args[Q],U.args[Q]))return!1}else return!1;return!0}return T}),rle="simplifyConstant",ile=["typed","config","mathWithTransform","matrix","?fraction","?bignumber","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode"],ale=z(rle,ile,t=>{var{typed:e,config:n,mathWithTransform:r,matrix:i,fraction:a,bignumber:o,AccessorNode:s,ArrayNode:u,ConstantNode:l,FunctionNode:c,IndexNode:f,ObjectNode:d,OperatorNode:h,SymbolNode:p}=t,{isCommutative:m,isAssociative:g,allChildren:v,createMakeNodeFunction:x}=f_({FunctionNode:c,OperatorNode:h,SymbolNode:p}),y=e("simplifyConstant",{Node:O=>E(F(O,{})),"Node, Object":function(I,M){return E(F(I,M))}});function b(O){return Yh(O)?O.valueOf():O instanceof Array?O.map(b):Je(O)?i(b(O.valueOf())):O}function w(O,I,M){try{return r[O].apply(null,I)}catch{return I=I.map(b),N(r[O].apply(null,I),M)}}var _=e({Fraction:A,number:function(I){return I<0?D(new l(-I)):new l(I)},BigNumber:function(I){return I<0?D(new l(-I)):new l(I)},bigint:function(I){return I<0n?D(new l(-I)):new l(I)},Complex:function(I){throw new Error("Cannot convert Complex number to Node")},string:function(I){return new l(I)},Matrix:function(I){return new u(I.valueOf().map(M=>_(M)))}});function E(O){return Ut(O)?O:_(O)}function C(O,I){var M=I&&I.exactFractions!==!1;if(M&&isFinite(O)&&a){var B=a(O),R=I&&typeof I.fractionsLimit=="number"?I.fractionsLimit:1/0;if(B.valueOf()===O&&B.n<R&&B.d<R)return B}return O}var N=e({"string, Object":function(I,M){var B=au(I,n);if(B==="BigNumber")return o===void 0&&e_(),o(I);if(B==="bigint")return BigInt(I);if(B==="Fraction")return a===void 0&&QO(),a(I);var R=parseFloat(I);return C(R,M)},"Fraction, Object":function(I,M){return I},"BigNumber, Object":function(I,M){return I},"number, Object":function(I,M){return C(I,M)},"bigint, Object":function(I,M){return I},"Complex, Object":function(I,M){return I.im!==0?I:C(I.re,M)},"Matrix, Object":function(I,M){return i(C(I.valueOf()))},"Array, Object":function(I,M){return I.map(C)}});function D(O){return new h("-","unaryMinus",[O])}function A(O){var I=R=>n.number==="BigNumber"&&o?o(R):Number(R),M=O.s*O.n,B=M<0n?new h("-","unaryMinus",[new l(-I(M))]):new l(I(M));return O.d===1n?B:new h("/","divide",[B,new l(I(O.d))])}function T(O,I,M){if(!_f(I))return new s(E(O),E(I));if(Wi(O)||Je(O)){for(var B=Array.from(I.dimensions);B.length>0;)if(At(B[0])&&typeof B[0].value!="string"){var R=N(B.shift().value,M);Wi(O)?O=O.items[R-1]:(O=O.valueOf()[R-1],O instanceof Array&&(O=i(O)))}else if(B.length>1&&At(B[1])&&typeof B[1].value!="string"){var j=N(B[1].value,M),K=[],V=Wi(O)?O.items:O.valueOf();for(var L of V)if(Wi(L))K.push(L.items[j-1]);else if(Je(O))K.push(L[j-1]);else break;if(K.length===V.length)Wi(O)?O=new u(K):O=i(K),B.splice(1,1);else break}else break;return B.length===I.dimensions.length?new s(E(O),I):B.length>0?(I=new f(B),new s(E(O),I)):O}if(A0(O)&&I.dimensions.length===1&&At(I.dimensions[0])){var ne=I.dimensions[0].value;return ne in O.properties?O.properties[ne]:new l}return new s(E(O),I)}function k(O,I,M,B){var R=I.shift(),j=I.reduce((K,V)=>{if(!Ut(V)){var L=K.pop();if(Ut(L))return[L,V];try{return K.push(w(O,[L,V],B)),K}catch{K.push(L)}}K.push(E(K.pop()));var ne=K.length===1?K[0]:M(K);return[M([ne,E(V)])]},[R]);return j.length===1?j[0]:M([j[0],_(j[1])])}function F(O,I){switch(O.type){case"SymbolNode":return O;case"ConstantNode":switch(typeof O.value){case"number":return N(O.value,I);case"bigint":return N(O.value,I);case"string":return O.value;default:if(!isNaN(O.value))return N(O.value,I)}return O;case"FunctionNode":if(r[O.name]&&r[O.name].rawArgs)return O;{var M=["add","multiply"];if(!M.includes(O.name)){var B=O.args.map(re=>F(re,I));if(!B.some(Ut))try{return w(O.name,B,I)}catch{}if(O.name==="size"&&B.length===1&&Wi(B[0])){for(var R=[],j=B[0];Wi(j);)R.push(j.items.length),j=j.items[0];return i(R)}return new c(O.name,B.map(E))}}case"OperatorNode":{var K=O.fn.toString(),V,L,ne=x(O);if(Tn(O)&&O.isUnary())V=[F(O.args[0],I)],Ut(V[0])?L=ne(V):L=w(K,V,I);else if(g(O,I.context))if(V=v(O,I.context),V=V.map(re=>F(re,I)),m(K,I.context)){for(var fe=[],te=[],oe=0;oe<V.length;oe++)Ut(V[oe])?te.push(V[oe]):fe.push(V[oe]);fe.length>1?(L=k(K,fe,ne,I),te.unshift(L),L=k(K,te,ne,I)):L=k(K,V,ne,I)}else L=k(K,V,ne,I);else V=O.args.map(re=>F(re,I)),L=k(K,V,ne,I);return L}case"ParenthesisNode":return F(O.content,I);case"AccessorNode":return T(F(O.object,I),F(O.index,I),I);case"ArrayNode":{var H=O.items.map(re=>F(re,I));return H.some(Ut)?new u(H.map(E)):i(H)}case"IndexNode":return new f(O.dimensions.map(re=>y(re,I)));case"ObjectNode":{var U={};for(var Q in O.properties)U[Q]=y(O.properties[Q],I);return new d(U)}case"AssignmentNode":case"BlockNode":case"FunctionAssignmentNode":case"RangeNode":case"ConditionalNode":default:throw new Error("Unimplemented node type in simplifyConstant: ".concat(O.type))}}return y}),qT="simplifyCore",ole=["typed","parse","equal","isZero","add","subtract","multiply","divide","pow","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode"],sle=z(qT,ole,t=>{var{typed:e,parse:n,equal:r,isZero:i,add:a,subtract:o,multiply:s,divide:u,pow:l,AccessorNode:c,ArrayNode:f,ConstantNode:d,FunctionNode:h,IndexNode:p,ObjectNode:m,OperatorNode:g,ParenthesisNode:v,SymbolNode:x}=t,y=new d(0),b=new d(1),w=new d(!0),_=new d(!1);function E(A){return Tn(A)&&["and","not","or"].includes(A.op)}var{hasProperty:C,isCommutative:N}=f_({FunctionNode:h,OperatorNode:g,SymbolNode:x});function D(A){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},k=T?T.context:void 0;if(C(A,"trivial",k)){if(qs(A)&&A.args.length===1)return D(A.args[0],T);var F=!1,O=0;if(A.forEach(te=>{++O,O===1&&(F=D(te,T))}),O===1)return F}var I=A;if(qs(I)){var M=ste(I.name);if(M){if(I.args.length>2&&C(I,"associative",k))for(;I.args.length>2;){var B=I.args.pop(),R=I.args.pop();I.args.push(new g(M,I.name,[B,R]))}I=new g(M,I.name,I.args)}else return new h(D(I.fn),I.args.map(te=>D(te,T)))}if(Tn(I)&&I.isUnary()){var j=D(I.args[0],T);if(I.op==="~"&&Tn(j)&&j.isUnary()&&j.op==="~"||I.op==="not"&&Tn(j)&&j.isUnary()&&j.op==="not"&&E(j.args[0]))return j.args[0];var K=!0;if(I.op==="-"&&Tn(j)&&(j.isBinary()&&j.fn==="subtract"&&(I=new g("-","subtract",[j.args[1],j.args[0]]),K=!1),j.isUnary()&&j.op==="-"))return j.args[0];if(K)return new g(I.op,I.fn,[j])}if(Tn(I)&&I.isBinary()){var V=D(I.args[0],T),L=D(I.args[1],T);if(I.op==="+"){if(At(V)&&i(V.value))return L;if(At(L)&&i(L.value))return V;Tn(L)&&L.isUnary()&&L.op==="-"&&(L=L.args[0],I=new g("-","subtract",[V,L]))}if(I.op==="-")return Tn(L)&&L.isUnary()&&L.op==="-"?D(new g("+","add",[V,L.args[0]]),T):At(V)&&i(V.value)?D(new g("-","unaryMinus",[L])):At(L)&&i(L.value)?V:new g(I.op,I.fn,[V,L]);if(I.op==="*"){if(At(V)){if(i(V.value))return y;if(r(V.value,1))return L}if(At(L)){if(i(L.value))return y;if(r(L.value,1))return V;if(N(I,k))return new g(I.op,I.fn,[L,V],I.implicit)}return new g(I.op,I.fn,[V,L],I.implicit)}if(I.op==="/")return At(V)&&i(V.value)?y:At(L)&&r(L.value,1)?V:new g(I.op,I.fn,[V,L]);if(I.op==="^"&&At(L)){if(i(L.value))return b;if(r(L.value,1))return V}if(I.op==="and"){if(At(V))if(V.value){if(E(L))return L;if(At(L))return L.value?w:_}else return _;if(At(L))if(L.value){if(E(V))return V}else return _}if(I.op==="or"){if(At(V)){if(V.value)return w;if(E(L))return L}if(At(L)){if(L.value)return w;if(E(V))return V}}return new g(I.op,I.fn,[V,L])}if(Tn(I))return new g(I.op,I.fn,I.args.map(te=>D(te,T)));if(Wi(I))return new f(I.items.map(te=>D(te,T)));if(rl(I))return new c(D(I.object,T),D(I.index,T));if(_f(I))return new p(I.dimensions.map(te=>D(te,T)));if(A0(I)){var ne={};for(var fe in I.properties)ne[fe]=D(I.properties[fe],T);return new m(ne)}return I}return e(qT,{Node:D,"Node,Object":D})}),ule="resolve",lle=["typed","parse","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode"],cle=z(ule,lle,t=>{var{typed:e,parse:n,ConstantNode:r,FunctionNode:i,OperatorNode:a,ParenthesisNode:o}=t;function s(u,l){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new Set;if(!l)return u;if(rr(u)){if(c.has(u.name)){var f=Array.from(c).join(", ");throw new ReferenceError("recursive loop of variable definitions among {".concat(f,"}"))}var d=l.get(u.name);if(Ut(d)){var h=new Set(c);return h.add(u.name),s(d,l,h)}else return typeof d=="number"?n(String(d)):d!==void 0?new r(d):u}else if(Tn(u)){var p=u.args.map(function(g){return s(g,l,c)});return new a(u.op,u.fn,p,u.implicit)}else{if($o(u))return new o(s(u.content,l,c));if(qs(u)){var m=u.args.map(function(g){return s(g,l,c)});return new i(u.name,m)}}return u.map(g=>s(g,l,c))}return e("resolve",{Node:s,"Node, Map | null | undefined":s,"Node, Object":(u,l)=>s(u,Cc(l)),"Array | Matrix":e.referToSelf(u=>l=>l.map(c=>u(c))),"Array | Matrix, null | undefined":e.referToSelf(u=>l=>l.map(c=>u(c))),"Array, Object":e.referTo("Array,Map",u=>(l,c)=>u(l,Cc(c))),"Matrix, Object":e.referTo("Matrix,Map",u=>(l,c)=>u(l,Cc(c))),"Array | Matrix, Map":e.referToSelf(u=>(l,c)=>l.map(f=>u(f,c)))})}),HT="symbolicEqual",fle=["parse","simplify","typed","OperatorNode"],dle=z(HT,fle,t=>{var{parse:e,simplify:n,typed:r,OperatorNode:i}=t;function a(o,s){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=new i("-","subtract",[o,s]),c=n(l,{},u);return At(c)&&!c.value}return r(HT,{"Node, Node":a,"Node, Node, Object":a})}),GT="derivative",hle=["typed","config","parse","simplify","equal","isZero","numeric","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode","SymbolNode"],ple=z(GT,hle,t=>{var{typed:e,config:n,parse:r,simplify:i,equal:a,isZero:o,numeric:s,ConstantNode:u,FunctionNode:l,OperatorNode:c,ParenthesisNode:f,SymbolNode:d}=t;function h(b,w){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{simplify:!0},E=new Map,C=w.name;function N(A){var T=E.get(A);if(T!==void 0)return T;var k=v(N,A,C);return E.set(A,k),k}var D=x(b,N);return _.simplify?i(D):D}function p(b){var w=r(b);if(!w.isSymbolNode)throw new TypeError("Invalid variable. "+"Cannot parse ".concat(JSON.stringify(b)," into a variable in function derivative"));return w}var m=e(GT,{"Node, SymbolNode":h,"Node, SymbolNode, Object":h,"Node, string":(b,w)=>h(b,p(w)),"Node, string, Object":(b,w,_)=>h(b,p(w),_)});m._simplify=!0,m.toTex=function(b){return g.apply(null,b.args)};var g=e("_derivTex",{"Node, SymbolNode":function(w,_){return At(w)&&Qt(w.value)==="string"?g(r(w.value).toString(),_.toString(),1):g(w.toTex(),_.toString(),1)},"Node, ConstantNode":function(w,_){if(Qt(_.value)==="string")return g(w,r(_.value));throw new Error("The second parameter to 'derivative' is a non-string constant")},"Node, SymbolNode, ConstantNode":function(w,_,E){return g(w.toString(),_.name,E.value)},"string, string, number":function(w,_,E){var C;return E===1?C="{d\\over d"+_+"}":C="{d^{"+E+"}\\over d"+_+"^{"+E+"}}",C+"\\left[".concat(w,"\\right]")}}),v=e("_isConst",{"function, ConstantNode, string":function(){return!0},"function, SymbolNode, string":function(w,_,E){return _.name!==E},"function, ParenthesisNode, string":function(w,_,E){return w(_.content,E)},"function, FunctionAssignmentNode, string":function(w,_,E){return _.params.includes(E)?w(_.expr,E):!0},"function, FunctionNode | OperatorNode, string":function(w,_,E){return _.args.every(C=>w(C,E))}}),x=e("_derivative",{"ConstantNode, function":function(){return y(0)},"SymbolNode, function":function(w,_){return _(w)?y(0):y(1)},"ParenthesisNode, function":function(w,_){return new f(x(w.content,_))},"FunctionAssignmentNode, function":function(w,_){return _(w)?y(0):x(w.expr,_)},"FunctionNode, function":function(w,_){if(_(w))return y(0);var E=w.args[0],C,N=!1,D=!1,A;switch(w.name){case"cbrt":N=!0,A=new c("*","multiply",[y(3),new c("^","pow",[E,new c("/","divide",[y(2),y(3)])])]);break;case"sqrt":case"nthRoot":if(w.args.length===1)N=!0,A=new c("*","multiply",[y(2),new l("sqrt",[E])]);else if(w.args.length===2)return C=new c("/","divide",[y(1),w.args[1]]),x(new c("^","pow",[E,C]),_);break;case"log10":C=y(10);case"log":if(!C&&w.args.length===1)A=E.clone(),N=!0;else if(w.args.length===1&&C||w.args.length===2&&_(w.args[1]))A=new c("*","multiply",[E.clone(),new l("log",[C||w.args[1]])]),N=!0;else if(w.args.length===2)return x(new c("/","divide",[new l("log",[E]),new l("log",[w.args[1]])]),_);break;case"pow":if(w.args.length===2)return x(new c("^","pow",[E,w.args[1]]),_);break;case"exp":A=new l("exp",[E.clone()]);break;case"sin":A=new l("cos",[E.clone()]);break;case"cos":A=new c("-","unaryMinus",[new l("sin",[E.clone()])]);break;case"tan":A=new c("^","pow",[new l("sec",[E.clone()]),y(2)]);break;case"sec":A=new c("*","multiply",[w,new l("tan",[E.clone()])]);break;case"csc":D=!0,A=new c("*","multiply",[w,new l("cot",[E.clone()])]);break;case"cot":D=!0,A=new c("^","pow",[new l("csc",[E.clone()]),y(2)]);break;case"asin":N=!0,A=new l("sqrt",[new c("-","subtract",[y(1),new c("^","pow",[E.clone(),y(2)])])]);break;case"acos":N=!0,D=!0,A=new l("sqrt",[new c("-","subtract",[y(1),new c("^","pow",[E.clone(),y(2)])])]);break;case"atan":N=!0,A=new c("+","add",[new c("^","pow",[E.clone(),y(2)]),y(1)]);break;case"asec":N=!0,A=new c("*","multiply",[new l("abs",[E.clone()]),new l("sqrt",[new c("-","subtract",[new c("^","pow",[E.clone(),y(2)]),y(1)])])]);break;case"acsc":N=!0,D=!0,A=new c("*","multiply",[new l("abs",[E.clone()]),new l("sqrt",[new c("-","subtract",[new c("^","pow",[E.clone(),y(2)]),y(1)])])]);break;case"acot":N=!0,D=!0,A=new c("+","add",[new c("^","pow",[E.clone(),y(2)]),y(1)]);break;case"sinh":A=new l("cosh",[E.clone()]);break;case"cosh":A=new l("sinh",[E.clone()]);break;case"tanh":A=new c("^","pow",[new l("sech",[E.clone()]),y(2)]);break;case"sech":D=!0,A=new c("*","multiply",[w,new l("tanh",[E.clone()])]);break;case"csch":D=!0,A=new c("*","multiply",[w,new l("coth",[E.clone()])]);break;case"coth":D=!0,A=new c("^","pow",[new l("csch",[E.clone()]),y(2)]);break;case"asinh":N=!0,A=new l("sqrt",[new c("+","add",[new c("^","pow",[E.clone(),y(2)]),y(1)])]);break;case"acosh":N=!0,A=new l("sqrt",[new c("-","subtract",[new c("^","pow",[E.clone(),y(2)]),y(1)])]);break;case"atanh":N=!0,A=new c("-","subtract",[y(1),new c("^","pow",[E.clone(),y(2)])]);break;case"asech":N=!0,D=!0,A=new c("*","multiply",[E.clone(),new l("sqrt",[new c("-","subtract",[y(1),new c("^","pow",[E.clone(),y(2)])])])]);break;case"acsch":N=!0,D=!0,A=new c("*","multiply",[new l("abs",[E.clone()]),new l("sqrt",[new c("+","add",[new c("^","pow",[E.clone(),y(2)]),y(1)])])]);break;case"acoth":N=!0,D=!0,A=new c("-","subtract",[y(1),new c("^","pow",[E.clone(),y(2)])]);break;case"abs":A=new c("/","divide",[new l(new d("abs"),[E.clone()]),E.clone()]);break;case"gamma":default:throw new Error('Cannot process function "'+w.name+'" in derivative: the function is not supported, undefined, or the number of arguments passed to it are not supported')}var T,k;N?(T="/",k="divide"):(T="*",k="multiply");var F=x(E,_);return D&&(F=new c("-","unaryMinus",[F])),new c(T,k,[F,A])},"OperatorNode, function":function(w,_){if(_(w))return y(0);if(w.op==="+")return new c(w.op,w.fn,w.args.map(function(I){return x(I,_)}));if(w.op==="-"){if(w.isUnary())return new c(w.op,w.fn,[x(w.args[0],_)]);if(w.isBinary())return new c(w.op,w.fn,[x(w.args[0],_),x(w.args[1],_)])}if(w.op==="*"){var E=w.args.filter(function(I){return _(I)});if(E.length>0){var C=w.args.filter(function(I){return!_(I)}),N=C.length===1?C[0]:new c("*","multiply",C),D=E.concat(x(N,_));return new c("*","multiply",D)}return new c("+","add",w.args.map(function(I){return new c("*","multiply",w.args.map(function(M){return M===I?x(M,_):M.clone()}))}))}if(w.op==="/"&&w.isBinary()){var A=w.args[0],T=w.args[1];return _(T)?new c("/","divide",[x(A,_),T]):_(A)?new c("*","multiply",[new c("-","unaryMinus",[A]),new c("/","divide",[x(T,_),new c("^","pow",[T.clone(),y(2)])])]):new c("/","divide",[new c("-","subtract",[new c("*","multiply",[x(A,_),T.clone()]),new c("*","multiply",[A.clone(),x(T,_)])]),new c("^","pow",[T.clone(),y(2)])])}if(w.op==="^"&&w.isBinary()){var k=w.args[0],F=w.args[1];if(_(k))return At(k)&&(o(k.value)||a(k.value,1))?y(0):new c("*","multiply",[w,new c("*","multiply",[new l("log",[k.clone()]),x(F.clone(),_)])]);if(_(F)){if(At(F)){if(o(F.value))return y(0);if(a(F.value,1))return x(k,_)}var O=new c("^","pow",[k.clone(),new c("-","subtract",[F,y(1)])]);return new c("*","multiply",[F.clone(),new c("*","multiply",[x(k,_),O])])}return new c("*","multiply",[new c("^","pow",[k.clone(),F.clone()]),new c("+","add",[new c("*","multiply",[x(k,_),new c("/","divide",[F.clone(),k.clone()])]),new c("*","multiply",[x(F,_),new l("log",[k.clone()])])])])}throw new Error('Cannot process operator "'+w.op+'" in derivative: the operator is not supported, undefined, or the number of arguments passed to it are not supported')}});function y(b,w){return new u(s(b,au(String(b),n)))}return m}),KT="rationalize",mle=["config","typed","equal","isZero","add","subtract","multiply","divide","pow","parse","simplifyConstant","simplifyCore","simplify","?bignumber","?fraction","mathWithTransform","matrix","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode","ParenthesisNode"],vle=z(KT,mle,t=>{var{config:e,typed:n,equal:r,isZero:i,add:a,subtract:o,multiply:s,divide:u,pow:l,parse:c,simplifyConstant:f,simplifyCore:d,simplify:h,fraction:p,bignumber:m,mathWithTransform:g,matrix:v,AccessorNode:x,ArrayNode:y,ConstantNode:b,FunctionNode:w,IndexNode:_,ObjectNode:E,OperatorNode:C,SymbolNode:N,ParenthesisNode:D}=t;function A(I){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,R=k(),j=T(I,M,!0,R.firstRules),K=j.variables.length,V={exactFractions:!1},L={exactFractions:!0};if(I=j.expression,K>=1){I=F(I);var ne,fe,te=!0,oe=!1;I=h(I,R.firstRules,{},V);for(var H;fe=te?R.distrDivRules:R.sucDivRules,I=h(I,fe,{},L),te=!te,H=I.toString(),H!==ne;)oe=!0,ne=H;oe&&(I=h(I,R.firstRulesAgain,{},V)),I=h(I,R.finalRules,{},V)}var U=[],Q={};return I.type==="OperatorNode"&&I.isBinary()&&I.op==="/"?(K===1&&(I.args[0]=O(I.args[0],U),I.args[1]=O(I.args[1])),B&&(Q.numerator=I.args[0],Q.denominator=I.args[1])):(K===1&&(I=O(I,U)),B&&(Q.numerator=I,Q.denominator=null)),B?(Q.coefficients=U,Q.variables=j.variables,Q.expression=I,Q):I}return n(KT,{Node:A,"Node, boolean":(I,M)=>A(I,{},M),"Node, Object":A,"Node, Object, boolean":A});function T(I,M,B,R){var j=[],K=h(I,R,M,{exactFractions:!1});B=!!B;var V="+-*"+(B?"/":"");ne(K);var L={};return L.expression=K,L.variables=j,L;function ne(fe){var te=fe.type;if(te==="FunctionNode")throw new Error("There is an unsolved function call");if(te==="OperatorNode")if(fe.op==="^"){if(fe.args[1].type!=="ConstantNode"||!qe(parseFloat(fe.args[1].value)))throw new Error("There is a non-integer exponent");ne(fe.args[0])}else{if(!V.includes(fe.op))throw new Error("Operator "+fe.op+" invalid in polynomial expression");for(var oe=0;oe<fe.args.length;oe++)ne(fe.args[oe])}else if(te==="SymbolNode"){var H=fe.name,U=j.indexOf(H);U===-1&&j.push(H)}else if(te==="ParenthesisNode")ne(fe.content);else if(te!=="ConstantNode")throw new Error("type "+te+" is not allowed in polynomial expression")}}function k(){var I=[d,{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},f,{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"1*n",r:"n"}],M=[{l:"(-n1)/(-n2)",r:"n1/n2"},{l:"(-n1)*(-n2)",r:"n1*n2"},{l:"n1--n2",r:"n1+n2"},{l:"n1-n2",r:"n1+(-n2)"},{l:"(n1+n2)*n3",r:"(n1*n3 + n2*n3)"},{l:"n1*(n2+n3)",r:"(n1*n2+n1*n3)"},{l:"c1*n + c2*n",r:"(c1+c2)*n"},{l:"c1*n + n",r:"(c1+1)*n"},{l:"c1*n - c2*n",r:"(c1-c2)*n"},{l:"c1*n - n",r:"(c1-1)*n"},{l:"v/c",r:"(1/c)*v"},{l:"v/-c",r:"-(1/c)*v"},{l:"-v*-c",r:"c*v"},{l:"-v*c",r:"-c*v"},{l:"v*-c",r:"-c*v"},{l:"v*c",r:"c*v"},{l:"-(-n1*n2)",r:"(n1*n2)"},{l:"-(n1*n2)",r:"(-n1*n2)"},{l:"-(-n1+n2)",r:"(n1-n2)"},{l:"-(n1+n2)",r:"(-n1-n2)"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"},{l:"-(-n1/n2)",r:"(n1/n2)"},{l:"-(n1/n2)",r:"(-n1/n2)"}],B=[{l:"(n1/n2 + n3/n4)",r:"((n1*n4 + n3*n2)/(n2*n4))"},{l:"(n1/n2 + n3)",r:"((n1 + n3*n2)/n2)"},{l:"(n1 + n2/n3)",r:"((n1*n3 + n2)/n3)"}],R=[{l:"(n1/(n2/n3))",r:"((n1*n3)/n2)"},{l:"(n1/n2/n3)",r:"(n1/(n2*n3))"}],j={};return j.firstRules=I.concat(M,R),j.distrDivRules=B,j.sucDivRules=R,j.firstRulesAgain=I.concat(M),j.finalRules=[d,{l:"n*-n",r:"-n^2"},{l:"n*n",r:"n^2"},f,{l:"n*-n^n1",r:"-n^(n1+1)"},{l:"n*n^n1",r:"n^(n1+1)"},{l:"n^n1*-n^n2",r:"-n^(n1+n2)"},{l:"n^n1*n^n2",r:"n^(n1+n2)"},{l:"n^n1*-n",r:"-n^(n1+1)"},{l:"n^n1*n",r:"n^(n1+1)"},{l:"n^n1/-n",r:"-n^(n1-1)"},{l:"n^n1/n",r:"n^(n1-1)"},{l:"n/-n^n1",r:"-n^(1-n1)"},{l:"n/n^n1",r:"n^(1-n1)"},{l:"n^n1/-n^n2",r:"n^(n1-n2)"},{l:"n^n1/n^n2",r:"n^(n1-n2)"},{l:"n1+(-n2*n3)",r:"n1-n2*n3"},{l:"v*(-c)",r:"-c*v"},{l:"n1+-n2",r:"n1-n2"},{l:"v*c",r:"c*v"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"}],j}function F(I,M,B){var R=I.type,j=arguments.length>1;if(R==="OperatorNode"&&I.isBinary()){var K=!1,V;if(I.op==="^"&&(I.args[0].type==="ParenthesisNode"||I.args[0].type==="OperatorNode")&&I.args[1].type==="ConstantNode"&&(V=parseFloat(I.args[1].value),K=V>=2&&qe(V)),K){if(V>2){var L=I.args[0],ne=new C("^","pow",[I.args[0].cloneDeep(),new b(V-1)]);I=new C("*","multiply",[L,ne])}else I=new C("*","multiply",[I.args[0],I.args[0].cloneDeep()]);j&&(B==="content"?M.content=I:M.args[B]=I)}}if(R==="ParenthesisNode")F(I.content,I,"content");else if(R!=="ConstantNode"&&R!=="SymbolNode")for(var fe=0;fe<I.args.length;fe++)F(I.args[fe],I,fe);if(!j)return I}function O(I,M){M===void 0&&(M=[]),M[0]=0;var B={};B.cte=1,B.oper="+",B.fire="";var R=0,j="";H(I,null,B),R=M.length-1;for(var K=!0,V,L=R;L>=0;L--)if(M[L]!==0){var ne=new b(K?M[L]:Math.abs(M[L])),fe=M[L]<0?"-":"+";if(L>0){var te=new N(j);if(L>1){var oe=new b(L);te=new C("^","pow",[te,oe])}M[L]===-1&&K?ne=new C("-","unaryMinus",[te]):Math.abs(M[L])===1?ne=te:ne=new C("*","multiply",[ne,te])}K?V=ne:fe==="+"?V=new C("+","add",[V,ne]):V=new C("-","subtract",[V,ne]),K=!1}if(K)return new b(0);return V;function H(U,Q,re){var ie=U.type;if(ie==="FunctionNode")throw new Error("There is an unsolved function call");if(ie==="OperatorNode"){if(!"+-*^".includes(U.op))throw new Error("Operator "+U.op+" invalid");if(Q!==null){if((U.fn==="unaryMinus"||U.fn==="pow")&&Q.fn!=="add"&&Q.fn!=="subtract"&&Q.fn!=="multiply")throw new Error("Invalid "+U.op+" placing");if((U.fn==="subtract"||U.fn==="add"||U.fn==="multiply")&&Q.fn!=="add"&&Q.fn!=="subtract")throw new Error("Invalid "+U.op+" placing");if((U.fn==="subtract"||U.fn==="add"||U.fn==="unaryMinus")&&re.noFil!==0)throw new Error("Invalid "+U.op+" placing")}(U.op==="^"||U.op==="*")&&(re.fire=U.op);for(var de=0;de<U.args.length;de++)U.fn==="unaryMinus"&&(re.oper="-"),(U.op==="+"||U.fn==="subtract")&&(re.fire="",re.cte=1,re.oper=de===0?"+":U.op),re.noFil=de,H(U.args[de],U,re)}else if(ie==="SymbolNode"){if(U.name!==j&&j!=="")throw new Error("There is more than one variable");if(j=U.name,Q===null){M[1]=1;return}if(Q.op==="^"&&re.noFil!==0)throw new Error("In power the variable should be the first parameter");if(Q.op==="*"&&re.noFil!==1)throw new Error("In multiply the variable should be the second parameter");(re.fire===""||re.fire==="*")&&(R<1&&(M[1]=0),M[1]+=re.cte*(re.oper==="+"?1:-1),R=Math.max(1,R))}else if(ie==="ConstantNode"){var he=parseFloat(U.value);if(Q===null){M[0]=he;return}if(Q.op==="^"){if(re.noFil!==1)throw new Error("Constant cannot be powered");if(!qe(he)||he<=0)throw new Error("Non-integer exponent is not allowed");for(var $=R+1;$<he;$++)M[$]=0;he>R&&(M[he]=0),M[he]+=re.cte*(re.oper==="+"?1:-1),R=Math.max(he,R);return}re.cte=he,re.fire===""&&(M[0]+=re.cte*(re.oper==="+"?1:-1))}else throw new Error("Type "+ie+" is not allowed")}}}),YT="zpk2tf",gle=["typed","add","multiply","Complex","number"],yle=z(YT,gle,t=>{var{typed:e,add:n,multiply:r,Complex:i,number:a}=t;return e(YT,{"Array,Array,number":function(l,c,f){return o(l,c,f)},"Array,Array":function(l,c){return o(l,c,1)},"Matrix,Matrix,number":function(l,c,f){return o(l.valueOf(),c.valueOf(),f)},"Matrix,Matrix":function(l,c){return o(l.valueOf(),c.valueOf(),1)}});function o(u,l,c){u.some(x=>x.type==="BigNumber")&&(u=u.map(x=>a(x))),l.some(x=>x.type==="BigNumber")&&(l=l.map(x=>a(x)));for(var f=[i(1,0)],d=[i(1,0)],h=0;h<u.length;h++){var p=u[h];typeof p=="number"&&(p=i(p,0)),f=s(f,[i(1,0),i(-p.re,-p.im)])}for(var m=0;m<l.length;m++){var g=l[m];typeof g=="number"&&(g=i(g,0)),d=s(d,[i(1,0),i(-g.re,-g.im)])}for(var v=0;v<f.length;v++)f[v]=r(f[v],c);return[f,d]}function s(u,l){for(var c=[],f=0;f<u.length+l.length-1;f++){c[f]=i(0,0);for(var d=0;d<u.length;d++)f-d>=0&&f-d<l.length&&(c[f]=n(c[f],r(u[d],l[f-d])))}return c}}),XT="freqz",xle=["typed","add","multiply","Complex","divide","matrix"],ble=z(XT,xle,t=>{var{typed:e,add:n,multiply:r,Complex:i,divide:a,matrix:o}=t;return e(XT,{"Array, Array":function(c,f){var d=u(512);return s(c,f,d)},"Array, Array, Array":function(c,f,d){return s(c,f,d)},"Array, Array, number":function(c,f,d){if(d<0)throw new Error("w must be a positive number");var h=u(d);return s(c,f,h)},"Matrix, Matrix":function(c,f){var d=u(512),{w:h,h:p}=s(c.valueOf(),f.valueOf(),d);return{w:o(h),h:o(p)}},"Matrix, Matrix, Matrix":function(c,f,d){var{h}=s(c.valueOf(),f.valueOf(),d.valueOf());return{h:o(h),w:o(d)}},"Matrix, Matrix, number":function(c,f,d){if(d<0)throw new Error("w must be a positive number");var h=u(d),{h:p}=s(c.valueOf(),f.valueOf(),h);return{h:o(p),w:o(h)}}});function s(l,c,f){for(var d=[],h=[],p=0;p<f.length;p++){for(var m=i(0,0),g=i(0,0),v=0;v<l.length;v++)m=n(m,r(l[v],i(Math.cos(-v*f[p]),Math.sin(-v*f[p]))));for(var x=0;x<c.length;x++)g=n(g,r(c[x],i(Math.cos(-x*f[p]),Math.sin(-x*f[p]))));d.push(m),h.push(g)}for(var y=[],b=0;b<d.length;b++)y.push(a(d[b],h[b]));return{h:y,w:f}}function u(l){for(var c=[],f=0;f<l;f++)c.push(f/l*Math.PI);return c}}),wle="reviver",_le=["classes"],Ele=z(wle,_le,t=>{var{classes:e}=t;return function(r,i){var a=e[i&&i.mathjs];return a&&typeof a.fromJSON=="function"?a.fromJSON(i):i}}),Cle="replacer",Nle=[],Sle=z(Cle,Nle,()=>function(e,n){return typeof n=="number"&&(!isFinite(n)||isNaN(n))?{mathjs:"number",value:String(n)}:typeof n=="bigint"?{mathjs:"bigint",value:String(n)}:n}),Dle="14.4.0",Ale=z("true",[],()=>!0),Tle=z("false",[],()=>!1),Mle=z("null",[],()=>null),Ile=Oi("Infinity",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n(1/0):1/0}),Rle=Oi("NaN",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n(NaN):NaN}),kle=Oi("pi",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?r_(n):$H}),Fle=Oi("tau",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?fJ(n):zH}),Ple=Oi("e",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?lJ(n):UH}),Ole=Oi("phi",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?cJ(n):WH}),Ble=Oi("LN2",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n(2).ln():Math.LN2}),Lle=Oi("LN10",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n(10).ln():Math.LN10}),jle=Oi("LOG2E",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n(1).div(new n(2).ln()):Math.LOG2E}),$le=Oi("LOG10E",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n(1).div(new n(10).ln()):Math.LOG10E}),zle=Oi("SQRT1_2",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n("0.5").sqrt():Math.SQRT1_2}),Ule=Oi("SQRT2",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n(2).sqrt():Math.SQRT2}),Wle=Oi("i",["Complex"],t=>{var{Complex:e}=t;return e.I}),Vle=z("version",[],()=>Dle);function Oi(t,e,n){return z(t,e,n,{recreateOnConfigChange:!0})}var qle=ct("speedOfLight","299792458","m s^-1"),Hle=ct("gravitationConstant","6.67430e-11","m^3 kg^-1 s^-2"),Gle=ct("planckConstant","6.62607015e-34","J s"),Kle=ct("reducedPlanckConstant","1.0545718176461565e-34","J s"),Yle=ct("magneticConstant","1.25663706212e-6","N A^-2"),Xle=ct("electricConstant","8.8541878128e-12","F m^-1"),Qle=ct("vacuumImpedance","376.730313667","ohm"),Zle=ct("coulomb","8.987551792261171e9","N m^2 C^-2"),Jle=ct("elementaryCharge","1.602176634e-19","C"),ece=ct("bohrMagneton","9.2740100783e-24","J T^-1"),tce=ct("conductanceQuantum","7.748091729863649e-5","S"),nce=ct("inverseConductanceQuantum","12906.403729652257","ohm"),rce=ct("magneticFluxQuantum","2.0678338484619295e-15","Wb"),ice=ct("nuclearMagneton","5.0507837461e-27","J T^-1"),ace=ct("klitzing","25812.807459304513","ohm"),oce=ct("bohrRadius","5.29177210903e-11","m"),sce=ct("classicalElectronRadius","2.8179403262e-15","m"),uce=ct("electronMass","9.1093837015e-31","kg"),lce=ct("fermiCoupling","1.1663787e-5","GeV^-2"),cce=L0("fineStructure",.0072973525693),fce=ct("hartreeEnergy","4.3597447222071e-18","J"),dce=ct("protonMass","1.67262192369e-27","kg"),hce=ct("deuteronMass","3.3435830926e-27","kg"),pce=ct("neutronMass","1.6749271613e-27","kg"),mce=ct("quantumOfCirculation","3.6369475516e-4","m^2 s^-1"),vce=ct("rydberg","10973731.568160","m^-1"),gce=ct("thomsonCrossSection","6.6524587321e-29","m^2"),yce=L0("weakMixingAngle",.2229),xce=L0("efimovFactor",22.7),bce=ct("atomicMass","1.66053906660e-27","kg"),wce=ct("avogadro","6.02214076e23","mol^-1"),_ce=ct("boltzmann","1.380649e-23","J K^-1"),Ece=ct("faraday","96485.33212331001","C mol^-1"),Cce=ct("firstRadiation","3.7417718521927573e-16","W m^2"),Nce=ct("loschmidt","2.686780111798444e25","m^-3"),Sce=ct("gasConstant","8.31446261815324","J K^-1 mol^-1"),Dce=ct("molarPlanckConstant","3.990312712893431e-10","J s mol^-1"),Ace=ct("molarVolume","0.022413969545014137","m^3 mol^-1"),Tce=L0("sackurTetrode",-1.16487052358),Mce=ct("secondRadiation","0.014387768775039337","m K"),Ice=ct("stefanBoltzmann","5.67037441918443e-8","W m^-2 K^-4"),Rce=ct("wienDisplacement","2.897771955e-3","m K"),kce=ct("molarMass","0.99999999965e-3","kg mol^-1"),Fce=ct("molarMassC12","11.9999999958e-3","kg mol^-1"),Pce=ct("gravity","9.80665","m s^-2"),Oce=ct("planckLength","1.616255e-35","m"),Bce=ct("planckMass","2.176435e-8","kg"),Lce=ct("planckTime","5.391245e-44","s"),jce=ct("planckCharge","1.87554603778e-18","C"),$ce=ct("planckTemperature","1.416785e+32","K");function ct(t,e,n){var r=["config","Unit","BigNumber"];return z(t,r,i=>{var{config:a,Unit:o,BigNumber:s}=i,u=a.number==="BigNumber"?new s(e):parseFloat(e),l=new o(u,n);return l.fixPrefix=!0,l})}function L0(t,e){var n=["config","BigNumber"];return z(t,n,r=>{var{config:i,BigNumber:a}=r;return i.number==="BigNumber"?new a(e):e})}function QT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zce(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QT(Object(n),!0).forEach(function(r){Pn(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Uce="mapSlices",Wce=["typed","isInteger"],Vce=z(Uce,Wce,t=>{var{typed:e,isInteger:n}=t,r=Sb({typed:e,isInteger:n});return e("mapSlices",{"...any":function(a){var o=a[1];dt(o)?a[1]=o-1:ht(o)&&(a[1]=o.minus(1));try{return r.apply(null,a)}catch(s){throw Qr(s)}}})},zce({isTransformFunction:!0},Sb.meta)),qce="column",Hce=["typed","Index","matrix","range"],Gce=z(qce,Hce,t=>{var{typed:e,Index:n,matrix:r,range:i}=t,a=HO({typed:e,Index:n,matrix:r,range:i});return e("column",{"...any":function(s){var u=s.length-1,l=s[u];dt(l)&&(s[u]=l-1);try{return a.apply(null,s)}catch(c){throw Qr(c)}}})},{isTransformFunction:!0});function d_(t,e,n){var r=t.filter(function(u){return rr(u)&&!(u.name in e)&&!n.has(u.name)})[0];if(!r)throw new Error('No undefined variable found in inline expression "'+t+'"');var i=r.name,a=new Map,o=new vP(n,a,new Set([i])),s=t.compile();return function(l){return a.set(i,l),s.evaluate(o)}}var Kce="transformCallback",Yce=["typed"],h_=z(Kce,Yce,t=>{var{typed:e}=t;return function(r,i){return e.isTypedFunction(r)?n(r,i):ZT(r,r.length,i)};function n(r,i){var a=Object.fromEntries(Object.entries(r.signatures).map(o=>{var[s,u]=o,l=s.split(",").length;return e.isTypedFunction(u)?[s,n(u,i)]:[s,ZT(u,l,i)]}));return typeof r.name=="string"?e(r.name,a):e(a)}});function ZT(t,e,n){return e===n?t:e===n+1?function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var o=i.slice(0,n),s=JT(i[n]);return t(...o,s)}:e>n+1?function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var o=i.slice(0,n),s=JT(i[n]),u=i.slice(n+1);return t(...o,s,...u)}:t}function JT(t){return t.map(e=>e+1)}var Xce="filter",Qce=["typed"],Zce=z(Xce,Qce,t=>{var{typed:e}=t;function n(i,a,o){var s=GO({typed:e}),u=h_({typed:e});if(i.length===0)return s();var l=i[0];if(i.length===1)return s(l);var c=i.length-1,f=i[c];return l&&(l=r(l,o)),f&&(rr(f)||Xh(f)?f=r(f,o):f=d_(f,a,o)),s(l,u(f,c))}n.rawArgs=!0;function r(i,a){return i.compile().evaluate(a)}return n},{isTransformFunction:!0}),Jce="forEach",efe=["typed"],tfe=z(Jce,efe,t=>{var{typed:e}=t,n=KO({typed:e}),r=h_({typed:e});function i(o,s,u){if(o.length===0)return n();var l=o[0];if(o.length===1)return n(l);var c=o.length-1,f=o[c];return l&&(l=a(l,u)),f&&(rr(f)||Xh(f)?f=a(f,u):f=d_(f,s,u)),n(l,r(f,c))}i.rawArgs=!0;function a(o,s){return o.compile().evaluate(s)}return i},{isTransformFunction:!0}),nfe="index",rfe=["Index","getMatrixDataType"],ife=z(nfe,rfe,t=>{var{Index:e,getMatrixDataType:n}=t;return function(){for(var i=[],a=0,o=arguments.length;a<o;a++){var s=arguments[a];if(U2(s))s.start--,s.end-=s.step>0?0:2;else if(s&&s.isSet===!0)s=s.map(function(l){return l-1});else if(qt(s)||Je(s))n(s)!=="boolean"&&(s=s.map(function(l){return l-1}));else if(dt(s)||Fd(s))s--;else if(ht(s))s=s.toNumber()-1;else if(typeof s!="string")throw new TypeError("Dimension must be an Array, Matrix, number, bigint, string, or Range");i[a]=s}var u=new e;return e.apply(u,i),u}},{isTransformFunction:!0}),afe="map",ofe=["typed"],sfe=z(afe,ofe,t=>{var{typed:e}=t,n=YO({typed:e}),r=h_({typed:e});function i(a,o,s){if(a.length===0)return n();if(a.length===1)return n(a[0]);var u=a.length-1,l=a.slice(0,u),c=a[u];return l=l.map(d=>f(d,s)),c&&(rr(c)||Xh(c)?c=f(c,s):c=d_(c,o,s)),n(...l,r(c,u));function f(d,h){return d.compile().evaluate(h)}}return i.rawArgs=!0,i},{isTransformFunction:!0});function ufe(t){return dt(t)?t-1:ht(t)?t.minus(1):t}function lfe(t){return dt(t)||ht(t)}function uu(t){if(t.length===2&&na(t[0])){t=t.slice();var e=t[1];lfe(e)&&(t[1]=ufe(e))}return t}var cfe="max",ffe=["typed","config","numeric","larger","isNaN"],dfe=z(cfe,ffe,t=>{var{typed:e,config:n,numeric:r,larger:i,isNaN:a}=t,o=aB({typed:e,config:n,numeric:r,larger:i,isNaN:a});return e("max",{"...any":function(u){u=uu(u);try{return o.apply(null,u)}catch(l){throw Qr(l)}}})},{isTransformFunction:!0}),hfe="mean",pfe=["typed","add","divide"],mfe=z(hfe,pfe,t=>{var{typed:e,add:n,divide:r}=t,i=pB({typed:e,add:n,divide:r});return e("mean",{"...any":function(o){o=uu(o);try{return i.apply(null,o)}catch(s){throw Qr(s)}}})},{isTransformFunction:!0}),vfe="min",gfe=["typed","config","numeric","smaller","isNaN"],yfe=z(vfe,gfe,t=>{var{typed:e,config:n,numeric:r,smaller:i,isNaN:a}=t,o=oB({typed:e,config:n,numeric:r,smaller:i,isNaN:a});return e("min",{"...any":function(u){u=uu(u);try{return o.apply(null,u)}catch(l){throw Qr(l)}}})},{isTransformFunction:!0}),xfe="range",bfe=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq","add","isPositive"],wfe=z(xfe,bfe,t=>{var{typed:e,config:n,matrix:r,bignumber:i,smaller:a,smallerEq:o,larger:s,largerEq:u,add:l,isPositive:c}=t,f=JO({typed:e,config:n,matrix:r,bignumber:i,smaller:a,smallerEq:o,larger:s,largerEq:u,add:l,isPositive:c});return e("range",{"...any":function(h){var p=h.length-1,m=h[p];return typeof m!="boolean"&&h.push(!0),f.apply(null,h)}})},{isTransformFunction:!0}),_fe="row",Efe=["typed","Index","matrix","range"],Cfe=z(_fe,Efe,t=>{var{typed:e,Index:n,matrix:r,range:i}=t,a=eB({typed:e,Index:n,matrix:r,range:i});return e("row",{"...any":function(s){var u=s.length-1,l=s[u];dt(l)&&(s[u]=l-1);try{return a.apply(null,s)}catch(c){throw Qr(c)}}})},{isTransformFunction:!0}),Nfe="subset",Sfe=["typed","matrix","zeros","add"],Dfe=z(Nfe,Sfe,t=>{var{typed:e,matrix:n,zeros:r,add:i}=t,a=tB({typed:e,matrix:n,zeros:r,add:i});return e("subset",{"...any":function(s){try{return a.apply(null,s)}catch(u){throw Qr(u)}}})},{isTransformFunction:!0}),Afe="concat",Tfe=["typed","matrix","isInteger"],Mfe=z(Afe,Tfe,t=>{var{typed:e,matrix:n,isInteger:r}=t,i=qO({typed:e,matrix:n,isInteger:r});return e("concat",{"...any":function(o){var s=o.length-1,u=o[s];dt(u)?o[s]=u-1:ht(u)&&(o[s]=u.minus(1));try{return i.apply(null,o)}catch(l){throw Qr(l)}}})},{isTransformFunction:!0}),eM="diff",Ife=["typed","matrix","subtract","number","bignumber"],Rfe=z(eM,Ife,t=>{var{typed:e,matrix:n,subtract:r,number:i,bignumber:a}=t,o=XO({typed:e,matrix:n,subtract:r,number:i,bignumber:a});return e(eM,{"...any":function(u){u=uu(u);try{return o.apply(null,u)}catch(l){throw Qr(l)}}})},{isTransformFunction:!0}),kfe="std",Ffe=["typed","map","sqrt","variance"],Pfe=z(kfe,Ffe,t=>{var{typed:e,map:n,sqrt:r,variance:i}=t,a=gB({typed:e,map:n,sqrt:r,variance:i});return e("std",{"...any":function(s){s=uu(s);try{return a.apply(null,s)}catch(u){throw Qr(u)}}})},{isTransformFunction:!0}),tM="sum",Ofe=["typed","config","add","numeric"],Bfe=z(tM,Ofe,t=>{var{typed:e,config:n,add:r,numeric:i}=t,a=dB({typed:e,config:n,add:r,numeric:i});return e(tM,{"...any":function(s){s=uu(s);try{return a.apply(null,s)}catch(u){throw Qr(u)}}})},{isTransformFunction:!0}),Lfe="quantileSeq",jfe=["typed","bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger","mapSlices"],$fe=z(Lfe,jfe,t=>{var{typed:e,bignumber:n,add:r,subtract:i,divide:a,multiply:o,partitionSelect:s,compare:u,isInteger:l,smaller:c,smallerEq:f,larger:d,mapSlices:h}=t,p=vB({typed:e,bignumber:n,add:r,subtract:i,divide:a,multiply:o,partitionSelect:s,compare:u,isInteger:l,smaller:c,smallerEq:f,larger:d,mapSlices:h});return e("quantileSeq",{"Array | Matrix, number | BigNumber":p,"Array | Matrix, number | BigNumber, number":(g,v,x)=>p(g,v,m(x)),"Array | Matrix, number | BigNumber, boolean":p,"Array | Matrix, number | BigNumber, boolean, number":(g,v,x,y)=>p(g,v,x,m(y)),"Array | Matrix, Array | Matrix":p,"Array | Matrix, Array | Matrix, number":(g,v,x)=>p(g,v,m(x)),"Array | Matrix, Array | Matrix, boolean":p,"Array | Matrix, Array | Matrix, boolean, number":(g,v,x,y)=>p(g,v,x,m(y))});function m(g){return uu([[],g])[1]}},{isTransformFunction:!0}),nM="cumsum",zfe=["typed","add","unaryPlus"],Ufe=z(nM,zfe,t=>{var{typed:e,add:n,unaryPlus:r}=t,i=hB({typed:e,add:n,unaryPlus:r});return e(nM,{"...any":function(o){if(o.length===2&&na(o[0])){var s=o[1];dt(s)?o[1]=s-1:ht(s)&&(o[1]=s.minus(1))}try{return i.apply(null,o)}catch(u){throw Qr(u)}}})},{isTransformFunction:!0}),rM="variance",Wfe=["typed","add","subtract","multiply","divide","mapSlices","isNaN"],Vfe=z(rM,Wfe,t=>{var{typed:e,add:n,subtract:r,multiply:i,divide:a,mapSlices:o,isNaN:s}=t,u=mB({typed:e,add:n,subtract:r,multiply:i,divide:a,mapSlices:o,isNaN:s});return e(rM,{"...any":function(c){c=uu(c);try{return u.apply(null,c)}catch(f){throw Qr(f)}}})},{isTransformFunction:!0}),iM="print",qfe=["typed","matrix","zeros","add"],Hfe=z(iM,qfe,t=>{var{typed:e,matrix:n,zeros:r,add:i}=t,a=rB({typed:e,matrix:n,zeros:r,add:i});return e(iM,{"string, Object | Array":function(u,l){return a(o(u),l)},"string, Object | Array, number | Object":function(u,l,c){return a(o(u),l,c)}});function o(s){return s.replace(nB,u=>{var l=u.slice(1).split("."),c=l.map(function(f){return!isNaN(f)&&f.length>0?parseInt(f)-1:f});return"$"+c.join(".")})}},{isTransformFunction:!0}),Gfe="and",Kfe=["typed","matrix","zeros","add","equalScalar","not","concat"],Yfe=z(Gfe,Kfe,t=>{var{typed:e,matrix:n,equalScalar:r,zeros:i,not:a,concat:o}=t,s=iB({typed:e,matrix:n,equalScalar:r,zeros:i,not:a,concat:o});function u(l,c,f){var d=l[0].compile().evaluate(f);if(!na(d)&&!s(d,!0))return!1;var h=l[1].compile().evaluate(f);return s(d,h)}return u.rawArgs=!0,u},{isTransformFunction:!0}),Xfe="or",Qfe=["typed","matrix","equalScalar","DenseMatrix","concat"],Zfe=z(Xfe,Qfe,t=>{var{typed:e,matrix:n,equalScalar:r,DenseMatrix:i,concat:a}=t,o=VO({typed:e,matrix:n,equalScalar:r,DenseMatrix:i,concat:a});function s(u,l,c){var f=u[0].compile().evaluate(c);if(!na(f)&&o(f,!1))return!0;var d=u[1].compile().evaluate(c);return o(f,d)}return s.rawArgs=!0,s},{isTransformFunction:!0}),Jfe="bitAnd",ede=["typed","matrix","zeros","add","equalScalar","not","concat"],tde=z(Jfe,ede,t=>{var{typed:e,matrix:n,equalScalar:r,zeros:i,not:a,concat:o}=t,s=UO({typed:e,matrix:n,equalScalar:r,zeros:i,not:a,concat:o});function u(l,c,f){var d=l[0].compile().evaluate(f);if(!na(d)){if(isNaN(d))return NaN;if(d===0||d===!1)return 0}var h=l[1].compile().evaluate(f);return s(d,h)}return u.rawArgs=!0,u},{isTransformFunction:!0}),nde="bitOr",rde=["typed","matrix","equalScalar","DenseMatrix","concat"],ide=z(nde,rde,t=>{var{typed:e,matrix:n,equalScalar:r,DenseMatrix:i,concat:a}=t,o=WO({typed:e,matrix:n,equalScalar:r,DenseMatrix:i,concat:a});function s(u,l,c){var f=u[0].compile().evaluate(c);if(!na(f)){if(isNaN(f))return NaN;if(f===-1)return-1;if(f===!0)return 1}var d=u[1].compile().evaluate(c);return o(f,d)}return s.rawArgs=!0,s},{isTransformFunction:!0}),ke=eH({config:Ee}),Kt=aH({}),aM=Ple({BigNumber:ke,config:Ee}),ade=Tle({}),ode=cce({BigNumber:ke,config:Ee}),wl=dH({}),bB=Wle({Complex:Kt}),sde=Ile({BigNumber:ke,config:Ee}),ude=Lle({BigNumber:ke,config:Ee}),lde=$le({BigNumber:ke,config:Ee}),j0=yH({}),cde=Rle({BigNumber:ke,config:Ee}),fde=Mle({}),dde=Ole({BigNumber:ke,config:Ee}),hde=mH({}),wB=iq({}),pde=zle({BigNumber:ke,config:Ee}),mde=Tce({BigNumber:ke,config:Ee}),_B=Fle({BigNumber:ke,config:Ee}),vde=Ale({}),gde=Vle({}),gt=FH({Matrix:j0}),yde=xce({BigNumber:ke,config:Ee}),xde=Ble({BigNumber:ke,config:Ee}),Pb=kle({BigNumber:ke,config:Ee}),EB=Sle({}),bde=Ule({BigNumber:ke,config:Ee}),Z=eq({BigNumber:ke,Complex:Kt,DenseMatrix:gt,Fraction:wl}),wde=yce({BigNumber:ke,config:Ee}),Zr=YG({typed:Z}),_de=_J({Complex:Kt,config:Ee,typed:Z}),Ede=SJ({BigNumber:ke,typed:Z}),Cde=MJ({BigNumber:ke,Complex:Kt,config:Ee,typed:Z}),Gn=JG({typed:Z}),Nde=zY({typed:Z}),Sde=OJ({BigNumber:ke,Complex:Kt,config:Ee,typed:Z}),Dde=zJ({typed:Z}),CB=VJ({typed:Z}),Ade=KJ({Complex:Kt,config:Ee,typed:Z}),Tde=bG({typed:Z}),Mde=FY({typed:Z}),Ide=CG({typed:Z}),Rde=OH({typed:Z}),$0=nue({typed:Z}),z0=MG({Complex:Kt,typed:Z}),_l=WY({typed:Z}),p_=XJ({typed:Z}),kde=eee({BigNumber:ke,typed:Z}),Fde=iee({BigNumber:ke,typed:Z}),Pde=mK({typed:Z}),wt=lG({config:Ee,typed:Z}),Ode=sQ({typed:Z}),NB=gK({typed:Z}),Bde=xK({Complex:Kt,typed:Z}),Lde=GO({typed:Z}),ep=cX({typed:Z}),jde=KO({typed:Z}),tp=yQ({typed:Z}),m_=pX({typed:Z}),$de=CQ({format:tp,typed:Z}),v_=qY({typed:Z}),di=LH({typed:Z}),lu=KH({config:Ee,typed:Z}),El=eG({config:Ee,typed:Z}),ao=nG({equalScalar:wt,typed:Z}),zde=jle({BigNumber:ke,config:Ee}),Ude=uue({Complex:Kt,typed:Z}),Wde=eY({Complex:Kt,config:Ee,typed:Z}),g_=nY({Complex:Kt,config:Ee,typed:Z}),Cl=YO({typed:Z}),Dn=aY({typed:Z}),rg=YY({typed:Z}),Yo=gG({typed:Z}),Vde=_Q({format:tp,typed:Z}),qde=Oue({config:Ee,typed:Z}),Hde=rB({typed:Z}),Gde=Lue({config:Ee,typed:Z}),y_=GY({typed:Z}),Kde=uee({BigNumber:ke,typed:Z}),SB=fY({BigNumber:ke,Fraction:wl,complex:z0,typed:Z}),U0=dee({typed:Z}),Kn=dG({Matrix:j0,equalScalar:wt,typed:Z}),Yde=WG({typed:Z}),Xde=vY({typed:Z}),Qde=_G({typed:Z}),aa=tK({typed:Z}),Zde=vee({typed:Z}),x_=oG({typed:Z}),Jde=CJ({Complex:Kt,config:Ee,typed:Z}),ehe=RJ({BigNumber:ke,typed:Z}),the=FJ({BigNumber:ke,Complex:Kt,config:Ee,typed:Z}),hi=DG({BigNumber:ke,typed:Z}),nhe=iue({typed:Z}),rhe=ZJ({typed:Z}),ihe=oee({BigNumber:ke,typed:Z}),Io=iG({typed:Z}),ahe=TQ({typed:Z}),bh=Sb({isInteger:di,typed:Z}),Ie=PG({DenseMatrix:gt,Matrix:j0,SparseMatrix:Kn,typed:Z}),ohe=BG({isZero:ao,matrix:Ie,typed:Z}),she=EX({BigNumber:ke,config:Ee,matrix:Ie,typed:Z}),uhe=zue({config:Ee,log2:g_,typed:Z}),DB=SX({isInteger:di,matrix:Ie,typed:Z}),lhe=cee({BigNumber:ke,typed:Z}),che=pee({typed:Z}),fhe=yJ({SparseMatrix:Kn,typed:Z}),ka=pY({Complex:Kt,config:Ee,typed:Z}),dhe=LX({typed:Z}),hhe=xee({typed:Z}),np=VX({matrix:Ie,typed:Z}),AB=bY({BigNumber:ke,config:Ee,matrix:Ie,typed:Z}),pr=KX({BigNumber:ke,config:Ee,matrix:Ie,typed:Z}),phe=AJ({BigNumber:ke,Complex:Kt,config:Ee,typed:Z}),mhe=LJ({Complex:Kt,config:Ee,typed:Z}),vhe=bQ({format:tp,typed:Z}),Rt=qO({isInteger:di,matrix:Ie,typed:Z}),ghe=nee({BigNumber:ke,typed:Z}),b_=HX({conj:_l,transpose:np,typed:Z}),TB=oX({DenseMatrix:gt,SparseMatrix:Kn,matrix:Ie,typed:Z}),yhe=SY({concat:Rt,equalScalar:wt,matrix:Ie,multiplyScalar:Dn,typed:Z}),oa=EZ({DenseMatrix:gt,SparseMatrix:Kn,concat:Rt,equalScalar:wt,matrix:Ie,typed:Z}),rp=kG({Fraction:wl,typed:Z}),cu=vX({BigNumber:ke,DenseMatrix:gt,SparseMatrix:Kn,config:Ee,matrix:Ie,typed:Z}),Nl=XH({typed:Z}),xhe=yX({matrix:Ie,multiplyScalar:Dn,typed:Z}),W0=BZ({DenseMatrix:gt,SparseMatrix:Kn,concat:Rt,config:Ee,matrix:Ie,typed:Z}),bhe=sZ({DenseMatrix:gt,concat:Rt,equalScalar:wt,matrix:Ie,typed:Z,zeros:pr}),whe=pQ({isNaN:Io,isNumeric:Nl,typed:Z}),_he=lY({BigNumber:ke,concat:Rt,equalScalar:wt,matrix:Ie,typed:Z}),Ji=RQ({bignumber:hi,fraction:rp,number:Yo}),MB=vQ({config:Ee,multiplyScalar:Dn,numeric:Ji,typed:Z}),Ehe=TX({config:Ee,matrix:Ie}),Che=lZ({DenseMatrix:gt,concat:Rt,equalScalar:wt,matrix:Ie,typed:Z,zeros:pr}),Af=LQ({BigNumber:ke,DenseMatrix:gt,config:Ee,equalScalar:wt,matrix:Ie,typed:Z,zeros:pr}),br=OX({matrix:Ie,config:Ee,typed:Z}),Vr=AZ({DenseMatrix:gt,SparseMatrix:Kn,bignumber:hi,concat:Rt,config:Ee,matrix:Ie,typed:Z}),Nhe=DQ({concat:Rt,matrix:Ie,typed:Z}),oo=qG({typed:Z}),She=UZ({DenseMatrix:gt,SparseMatrix:Kn,concat:Rt,config:Ee,equalScalar:wt,matrix:Ie,typed:Z}),Dhe=ZY({DenseMatrix:gt,SparseMatrix:Kn,concat:Rt,matrix:Ie,typed:Z}),Ct=zee({DenseMatrix:gt,SparseMatrix:Kn,addScalar:Gn,concat:Rt,equalScalar:wt,matrix:Ie,typed:Z}),Ahe=HJ({BigNumber:ke,DenseMatrix:gt,concat:Rt,equalScalar:wt,matrix:Ie,typed:Z}),The=UO({concat:Rt,equalScalar:wt,matrix:Ie,typed:Z}),Mhe=WO({DenseMatrix:gt,concat:Rt,equalScalar:wt,matrix:Ie,typed:Z}),Ihe=jY({DenseMatrix:gt,SparseMatrix:Kn,concat:Rt,matrix:Ie,typed:Z}),IB=rK({BigNumber:ke,Complex:Kt,Fraction:wl,config:Ee,isNegative:lu,matrix:Ie,typed:Z,unaryMinus:oo}),Sl=pZ({BigNumber:ke,DenseMatrix:gt,Fraction:wl,concat:Rt,config:Ee,equalScalar:wt,matrix:Ie,typed:Z}),RB=wZ({concat:Rt,matrix:Ie,typed:Z}),Rhe=nX({prod:MB,size:br,typed:Z}),w_=$Z({equal:oa,typed:Z}),pn=FQ({numeric:Ji,typed:Z}),ip=YQ({DenseMatrix:gt,SparseMatrix:Kn,concat:Rt,divideScalar:pn,equalScalar:wt,matrix:Ie,typed:Z}),khe=SZ({compareText:RB,isZero:ao,typed:Z}),kB=jO({DenseMatrix:gt,config:Ee,equalScalar:wt,matrix:Ie,round:Af,typed:Z,zeros:pr}),Fhe=GK({BigNumber:ke,DenseMatrix:gt,concat:Rt,config:Ee,equalScalar:wt,matrix:Ie,round:Af,typed:Z,zeros:pr}),Phe=ZH({isNumeric:Nl,typed:Z}),Ohe=Wee({abs:Zr,addScalar:Gn,divideScalar:pn,isPositive:El,multiplyScalar:Dn,smaller:Vr,sqrt:ka,typed:Z}),FB=ZZ({DenseMatrix:gt,smaller:Vr}),Fr=tJ({ImmutableDenseMatrix:FB,getMatrixDataType:m_}),qr=FZ({DenseMatrix:gt,SparseMatrix:Kn,bignumber:hi,concat:Rt,config:Ee,matrix:Ie,typed:Z}),__=zQ({Complex:Kt,config:Ee,divideScalar:pn,typeOf:x_,typed:Z}),PB=QQ({DenseMatrix:gt,divideScalar:pn,equalScalar:wt,matrix:Ie,multiplyScalar:Dn,subtractScalar:aa,typed:Z}),E_=zG({flatten:ep,matrix:Ie,size:br,typed:Z}),C_=aB({config:Ee,isNaN:Io,larger:qr,numeric:Ji,typed:Z}),Bhe=oB({config:Ee,isNaN:Io,numeric:Ji,smaller:Vr,typed:Z}),OB=$O({DenseMatrix:gt,concat:Rt,config:Ee,equalScalar:wt,matrix:Ie,round:Af,typed:Z,zeros:pr}),Lhe=qQ({Complex:Kt,config:Ee,divideScalar:pn,typed:Z}),jhe=VO({DenseMatrix:gt,concat:Rt,equalScalar:wt,matrix:Ie,typed:Z}),V0=qZ({compare:Sl,isNaN:Io,isNumeric:Nl,typed:Z}),N_=tne({addScalar:Gn,complex:z0,conj:_l,divideScalar:pn,equal:oa,identity:cu,isZero:ao,matrix:Ie,multiplyScalar:Dn,sign:SB,sqrt:ka,subtractScalar:aa,typed:Z,unaryMinus:oo,zeros:pr}),$he=fZ({DenseMatrix:gt,concat:Rt,equalScalar:wt,matrix:Ie,typed:Z,zeros:pr}),tf=IZ({DenseMatrix:gt,SparseMatrix:Kn,concat:Rt,config:Ee,matrix:Ie,typed:Z}),Bi=tB({add:Ct,matrix:Ie,typed:Z,zeros:pr}),In=yY({DenseMatrix:gt,concat:Rt,equalScalar:wt,matrix:Ie,subtractScalar:aa,typed:Z,unaryMinus:oo}),zhe=Xee({add:Ct,matrix:Ie,typed:Z}),S_=JQ({DenseMatrix:gt,divideScalar:pn,equalScalar:wt,matrix:Ie,multiplyScalar:Dn,subtractScalar:aa,typed:Z}),Uhe=Gue({addScalar:Gn,combinations:$0,divideScalar:pn,isInteger:di,isNegative:lu,multiplyScalar:Dn,typed:Z}),so=yZ({compare:Sl,typed:Z}),Whe=Yue({addScalar:Gn,combinations:$0,isInteger:di,isNegative:lu,isPositive:El,larger:qr,typed:Z}),Vhe=XO({matrix:Ie,number:Yo,subtract:In,typed:Z}),qhe=jse({abs:Zr,addScalar:Gn,deepEqual:w_,divideScalar:pn,multiplyScalar:Dn,sqrt:ka,subtractScalar:aa,typed:Z}),q0=Gee({addScalar:Gn,conj:_l,multiplyScalar:Dn,size:br,typed:Z}),BB=iJ({larger:qr,smaller:Vr}),LB=Zee({Index:Fr,typed:Z}),Hhe=_Y({BigNumber:ke,add:Ct,config:Ee,equal:oa,isInteger:di,mod:OB,smaller:Vr,typed:Z,xgcd:AB}),Ghe=QK({concat:Rt,equalScalar:wt,matrix:Ie,typed:Z}),Khe=WQ({Complex:Kt,config:Ee,divideScalar:pn,log:__,typed:Z}),Yhe=tZ({DenseMatrix:gt,divideScalar:pn,equalScalar:wt,matrix:Ie,multiplyScalar:Dn,subtractScalar:aa,typed:Z}),Xhe=jG({flatten:ep,matrix:Ie,size:br,typed:Z}),zt=sY({addScalar:Gn,dot:q0,equalScalar:wt,matrix:Ie,multiplyScalar:Dn,typed:Z}),nf=JO({bignumber:hi,matrix:Ie,add:Ct,config:Ee,isPositive:El,larger:qr,largerEq:W0,smaller:Vr,smallerEq:tf,typed:Z}),Qhe=eB({Index:Fr,matrix:Ie,range:nf,typed:Z}),Zhe=wee({DenseMatrix:gt,Index:Fr,compareNatural:so,size:br,subset:Bi,typed:Z}),Jhe=Nee({DenseMatrix:gt,Index:Fr,compareNatural:so,size:br,subset:Bi,typed:Z}),epe=Tee({Index:Fr,compareNatural:so,size:br,subset:Bi,typed:Z}),tpe=kee({Index:Fr,compareNatural:so,size:br,subset:Bi,typed:Z}),jB=Nne({SparseMatrix:Kn,abs:Zr,add:Ct,divideScalar:pn,larger:qr,largerEq:W0,multiply:zt,subtract:In,transpose:np,typed:Z}),npe=GZ({compare:Sl,compareNatural:so,matrix:Ie,typed:Z}),D_=GG({config:Ee,numeric:Ji,typed:Z}),$B=rZ({DenseMatrix:gt,divideScalar:pn,equalScalar:wt,matrix:Ie,multiplyScalar:Dn,subtractScalar:aa,typed:Z}),rpe=yle({Complex:Kt,add:Ct,multiply:zt,number:Yo,typed:Z}),ipe=iB({concat:Rt,equalScalar:wt,matrix:Ie,not:rg,typed:Z,zeros:pr}),A_=hK({DenseMatrix:gt,config:Ee,equalScalar:wt,matrix:Ie,round:Af,typed:Z,zeros:pr}),zB=HO({Index:Fr,matrix:Ie,range:nf,typed:Z}),ape=iX({matrix:Ie,multiply:zt,subtract:In,typed:Z}),UB=mse({divideScalar:pn,isZero:ao,matrix:Ie,multiply:zt,subtractScalar:aa,typed:Z,unaryMinus:oo}),WB=_K({Complex:Kt,DenseMatrix:gt,ceil:A_,equalScalar:wt,floor:kB,matrix:Ie,typed:Z,zeros:pr}),Dl=gse({abs:Zr,addScalar:Gn,det:UB,divideScalar:pn,identity:cu,matrix:Ie,multiply:zt,typed:Z,unaryMinus:oo}),ope=xse({Complex:Kt,add:Ct,ctranspose:b_,deepEqual:w_,divideScalar:pn,dot:q0,dotDivide:ip,equal:oa,inv:Dl,matrix:Ie,multiply:zt,typed:Z}),Fa=OQ({Complex:Kt,config:Ee,fraction:rp,identity:cu,inv:Dl,matrix:Ie,multiply:zt,number:Yo,typed:Z}),VB=Eee({DenseMatrix:gt,Index:Fr,compareNatural:so,size:br,subset:Bi,typed:Z}),spe=Iee({Index:Fr,compareNatural:so,size:br,subset:Bi,typed:Z}),qB=Bee({Index:Fr,concat:Rt,setDifference:VB,size:br,subset:Bi,typed:Z}),HB=sJ({FibonacciHeap:BB,addScalar:Gn,equalScalar:wt}),upe=Ase({abs:Zr,add:Ct,identity:cu,inv:Dl,map:Cl,max:C_,multiply:zt,size:br,sqrt:ka,subtract:In,typed:Z}),T_=dB({add:Ct,config:Ee,numeric:Ji,typed:Z}),rt=pJ({BigNumber:ke,Complex:Kt,Fraction:wl,abs:Zr,addScalar:Gn,config:Ee,divideScalar:pn,equal:oa,fix:WB,format:tp,isNumeric:Nl,multiplyScalar:Dn,number:Yo,pow:Fa,round:Af,subtractScalar:aa}),lpe=Qle({BigNumber:ke,Unit:rt,config:Ee}),cpe=Rce({BigNumber:ke,Unit:rt,config:Ee}),fpe=bce({BigNumber:ke,Unit:rt,config:Ee}),dpe=ece({BigNumber:ke,Unit:rt,config:Ee}),hpe=_ce({BigNumber:ke,Unit:rt,config:Ee}),ppe=tce({BigNumber:ke,Unit:rt,config:Ee}),mpe=Zle({BigNumber:ke,Unit:rt,config:Ee}),vpe=hB({add:Ct,typed:Z,unaryPlus:D_}),gpe=hce({BigNumber:ke,Unit:rt,config:Ee}),ype=GQ({DenseMatrix:gt,SparseMatrix:Kn,concat:Rt,equalScalar:wt,matrix:Ie,pow:Fa,typed:Z}),xpe=Xle({BigNumber:ke,Unit:rt,config:Ee}),bpe=Jle({BigNumber:ke,Unit:rt,config:Ee}),wpe=Sse({abs:Zr,add:Ct,identity:cu,inv:Dl,multiply:zt,typed:Z}),_pe=Ece({BigNumber:ke,Unit:rt,config:Ee}),GB=XX({addScalar:Gn,ceil:A_,conj:_l,divideScalar:pn,dotDivide:ip,exp:NB,i:bB,log2:g_,matrix:Ie,multiplyScalar:Dn,pow:Fa,tau:_B,typed:Z}),M_=oue({BigNumber:ke,Complex:Kt,config:Ee,multiplyScalar:Dn,pow:Fa,typed:Z}),Epe=Hle({BigNumber:ke,Unit:rt,config:Ee}),Cpe=fce({BigNumber:ke,Unit:rt,config:Ee}),Npe=ZX({conj:_l,dotDivide:ip,fft:GB,typed:Z}),Spe=nce({BigNumber:ke,Unit:rt,config:Ee}),Dpe=ace({BigNumber:ke,Unit:rt,config:Ee}),Ape=Nce({BigNumber:ke,Unit:rt,config:Ee}),Tpe=Yle({BigNumber:ke,Unit:rt,config:Ee}),Mpe=kce({BigNumber:ke,Unit:rt,config:Ee}),Ipe=Dce({BigNumber:ke,Unit:rt,config:Ee}),Rpe=pce({BigNumber:ke,Unit:rt,config:Ee}),kpe=ice({BigNumber:ke,Unit:rt,config:Ee}),Fpe=jce({BigNumber:ke,Unit:rt,config:Ee}),Ppe=Oce({BigNumber:ke,Unit:rt,config:Ee}),Ope=$ce({BigNumber:ke,Unit:rt,config:Ee}),Bpe=dce({BigNumber:ke,Unit:rt,config:Ee}),Lpe=mce({BigNumber:ke,Unit:rt,config:Ee}),jpe=Kle({BigNumber:ke,Unit:rt,config:Ee}),$pe=vce({BigNumber:ke,Unit:rt,config:Ee}),zpe=Mce({BigNumber:ke,Unit:rt,config:Ee}),Upe=Pee({compareNatural:so,typed:Z}),Wpe=qle({BigNumber:ke,Unit:rt,config:Ee}),Vpe=Ice({BigNumber:ke,Unit:rt,config:Ee}),qpe=gce({BigNumber:ke,Unit:rt,config:Ee}),Hpe=wce({BigNumber:ke,Unit:rt,config:Ee}),Gpe=oce({BigNumber:ke,Unit:rt,config:Ee}),Kpe=bJ({Unit:rt,typed:Z}),vr=Bse({divideScalar:pn,equalScalar:wt,inv:Dl,matrix:Ie,multiply:zt,typed:Z}),Ype=uce({BigNumber:ke,Unit:rt,config:Ee}),ap=cue({gamma:M_,typed:Z}),Xpe=Cce({BigNumber:ke,Unit:rt,config:Ee}),Qpe=Pce({BigNumber:ke,Unit:rt,config:Ee}),Zpe=Use({abs:Zr,add:Ct,addScalar:Gn,config:Ee,divideScalar:pn,equalScalar:wt,flatten:ep,isNumeric:Nl,isZero:ao,matrix:Ie,multiply:zt,multiplyScalar:Dn,smaller:Vr,subtract:In,typed:Z}),KB=Jte({DenseMatrix:gt,Spa:HB,SparseMatrix:Kn,abs:Zr,addScalar:Gn,divideScalar:pn,equalScalar:wt,larger:qr,matrix:Ie,multiplyScalar:Dn,subtractScalar:aa,typed:Z,unaryMinus:oo}),Jpe=rce({BigNumber:ke,Unit:rt,config:Ee}),eme=Fce({BigNumber:ke,Unit:rt,config:Ee}),tme=pue({add:Ct,divide:vr,factorial:ap,isInteger:di,isPositive:El,multiply:zt,typed:Z}),nme=vue({factorial:ap,typed:Z}),rme=Bce({BigNumber:ke,Unit:rt,config:Ee}),ime=Tne({add:Ct,cbrt:IB,divide:vr,equalScalar:wt,im:v_,isZero:ao,multiply:zt,re:y_,sqrt:ka,subtract:In,typeOf:x_,typed:Z,unaryMinus:oo}),YB=Dee({DenseMatrix:gt,Index:Fr,compareNatural:so,size:br,subset:Bi,typed:Z}),ame=iQ({abs:Zr,add:Ct,bignumber:hi,divide:vr,isNegative:lu,isPositive:El,larger:qr,map:Cl,matrix:Ie,max:C_,multiply:zt,smaller:Vr,subtract:In,typed:Z,unaryMinus:oo}),XB=Wue({bignumber:hi,addScalar:Gn,combinations:$0,divideScalar:pn,factorial:ap,isInteger:di,isNegative:lu,larger:qr,multiplyScalar:Dn,number:Yo,pow:Fa,subtractScalar:aa,typed:Z}),ome=vJ({Unit:rt,typed:Z}),sme=que({addScalar:Gn,isInteger:di,isNegative:lu,stirlingS2:XB,typed:Z}),QB=Cse({abs:Zr,add:Ct,addScalar:Gn,atan:CB,bignumber:hi,column:zB,complex:z0,config:Ee,cos:p_,diag:TB,divideScalar:pn,dot:q0,equal:oa,flatten:ep,im:v_,inv:Dl,larger:qr,matrix:Ie,matrixFromColumns:E_,multiply:zt,multiplyScalar:Dn,number:Yo,qr:N_,re:y_,reshape:DB,sin:U0,size:br,smaller:Vr,sqrt:ka,subtract:In,typed:Z,usolve:S_,usolveAll:$B}),ume=lce({BigNumber:ke,Unit:rt,config:Ee}),lme=Sce({BigNumber:ke,Unit:rt,config:Ee}),cme=due({divide:vr,dotDivide:ip,isNumeric:Nl,log:__,map:Cl,matrix:Ie,multiply:zt,sum:T_,typed:Z}),ZB=Dne({DenseMatrix:gt,lsolve:PB,lup:KB,matrix:Ie,slu:jB,typed:Z,usolve:S_}),JB=pB({add:Ct,divide:vr,typed:Z}),fme=Ace({BigNumber:ke,Unit:rt,config:Ee}),dme=Gle({BigNumber:ke,Unit:rt,config:Ee}),hme=vB({bignumber:hi,add:Ct,compare:Sl,divide:vr,isInteger:di,larger:qr,mapSlices:bh,multiply:zt,partitionSelect:V0,smaller:Vr,smallerEq:tf,subtract:In,typed:Z}),pme=jee({Index:Fr,concat:Rt,setIntersect:YB,setSymDifference:qB,size:br,subset:Bi,typed:Z}),I_=mB({add:Ct,divide:vr,isNaN:Io,mapSlices:bh,multiply:zt,subtract:In,typed:Z}),mme=sce({BigNumber:ke,Unit:rt,config:Ee}),e5=Gse({add:Ct,compare:Sl,divide:vr,partitionSelect:V0,typed:Z}),vme=eue({add:Ct,divide:vr,matrix:Ie,mean:JB,multiply:zt,pow:Fa,sqrt:ka,subtract:In,sum:T_,typed:Z}),gme=ble({Complex:Kt,add:Ct,divide:vr,matrix:Ie,multiply:zt,typed:Z}),yme=Yse({abs:Zr,map:Cl,median:e5,subtract:In,typed:Z}),xme=gB({map:Cl,sqrt:ka,typed:Z,variance:I_}),bme=dQ({BigNumber:ke,Complex:Kt,add:Ct,config:Ee,divide:vr,equal:oa,factorial:ap,gamma:M_,isNegative:lu,multiply:zt,pi:Pb,pow:Fa,sin:U0,smallerEq:tf,subtract:In,typed:Z}),R_=qee({abs:Zr,add:Ct,conj:_l,ctranspose:b_,eigs:QB,equalScalar:wt,larger:qr,matrix:Ie,multiply:zt,pow:Fa,smaller:Vr,sqrt:ka,typed:Z}),t5=kX({BigNumber:ke,DenseMatrix:gt,SparseMatrix:Kn,addScalar:Gn,config:Ee,cos:p_,matrix:Ie,multiplyScalar:Dn,norm:R_,sin:U0,typed:Z,unaryMinus:oo}),wme=Lce({BigNumber:ke,Unit:rt,config:Ee}),n5=Rse({identity:cu,matrix:Ie,multiply:zt,norm:R_,qr:N_,subtract:In,typed:Z}),_me=IX({multiply:zt,rotationMatrix:t5,typed:Z}),r5=Mse({abs:Zr,add:Ct,concat:Rt,identity:cu,index:LB,lusolve:ZB,matrix:Ie,matrixFromColumns:E_,multiply:zt,range:nf,schur:n5,subset:Bi,subtract:In,transpose:np,typed:Z}),Eme=Fse({matrix:Ie,multiply:zt,sylvester:r5,transpose:np,typed:Z}),Tf={},op={},i5={},jr=tte({mathWithTransform:op}),Mf=Dte({Node:jr}),Xo=Tte({Node:jr}),Al=Ite({Node:jr}),a5=Pte({Node:jr}),If=ate({Node:jr}),o5=fte({Node:jr,ResultSet:wB}),s5=hte({Node:jr}),fu=wte({Node:jr}),u5=kte({Node:jr}),Cme=Ele({classes:i5}),k_=Pne({math:Tf,typed:Z}),l5=Ete({Node:jr,typed:Z}),Nme=hse({Chain:k_,typed:Z}),Rf=rte({Node:jr,subset:Bi}),c5=lte({matrix:Ie,Node:jr,subset:Bi}),kf=Nte({Node:jr,size:br}),du=Lte({Unit:rt,Node:jr,math:Tf}),hu=$te({Node:jr,SymbolNode:du,math:Tf}),Pa=Ute({AccessorNode:Rf,ArrayNode:If,AssignmentNode:c5,BlockNode:o5,ConditionalNode:s5,ConstantNode:fu,FunctionAssignmentNode:l5,FunctionNode:hu,IndexNode:kf,ObjectNode:Mf,OperatorNode:Xo,ParenthesisNode:Al,RangeNode:u5,RelationalNode:a5,SymbolNode:du,config:Ee,numeric:Ji,typed:Z}),f5=cle({ConstantNode:fu,FunctionNode:hu,OperatorNode:Xo,ParenthesisNode:Al,parse:Pa,typed:Z}),F_=ale({bignumber:hi,fraction:rp,AccessorNode:Rf,ArrayNode:If,ConstantNode:fu,FunctionNode:hu,IndexNode:kf,ObjectNode:Mf,OperatorNode:Xo,SymbolNode:du,config:Ee,mathWithTransform:op,matrix:Ie,typed:Z}),Sme=Vte({parse:Pa,typed:Z}),P_=sle({AccessorNode:Rf,ArrayNode:If,ConstantNode:fu,FunctionNode:hu,IndexNode:kf,ObjectNode:Mf,OperatorNode:Xo,ParenthesisNode:Al,SymbolNode:du,add:Ct,divide:vr,equal:oa,isZero:ao,multiply:zt,parse:Pa,pow:Fa,subtract:In,typed:Z}),H0=Hte({parse:Pa,typed:Z}),d5=Rne({evaluate:H0}),h5=Yte({evaluate:H0,parse:Pa}),G0=nle({AccessorNode:Rf,ArrayNode:If,ConstantNode:fu,FunctionNode:hu,IndexNode:kf,ObjectNode:Mf,OperatorNode:Xo,ParenthesisNode:Al,SymbolNode:du,equal:oa,parse:Pa,replacer:EB,resolve:f5,simplifyConstant:F_,simplifyCore:P_,typed:Z}),Dme=dle({OperatorNode:Xo,parse:Pa,simplify:G0,typed:Z}),Ame=Que({parse:Pa,typed:Z}),Tme=Qte({Parser:h5,typed:Z}),Mme=vle({bignumber:hi,fraction:rp,AccessorNode:Rf,ArrayNode:If,ConstantNode:fu,FunctionNode:hu,IndexNode:kf,ObjectNode:Mf,OperatorNode:Xo,ParenthesisNode:Al,SymbolNode:du,add:Ct,config:Ee,divide:vr,equal:oa,isZero:ao,mathWithTransform:op,matrix:Ie,multiply:zt,parse:Pa,pow:Fa,simplify:G0,simplifyConstant:F_,simplifyCore:P_,subtract:In,typed:Z}),Ime=ple({ConstantNode:fu,FunctionNode:hu,OperatorNode:Xo,ParenthesisNode:Al,SymbolNode:du,config:Ee,equal:oa,isZero:ao,numeric:Ji,parse:Pa,simplify:G0,typed:Z}),Rme=fse({Help:d5,mathWithTransform:op,typed:Z});jn(Tf,{e:aM,false:ade,fineStructure:ode,i:bB,Infinity:sde,LN10:ude,LOG10E:lde,NaN:cde,null:fde,phi:dde,SQRT1_2:pde,sackurTetrode:mde,tau:_B,true:vde,E:aM,version:gde,efimovFactor:yde,LN2:xde,pi:Pb,replacer:EB,reviver:Cme,SQRT2:bde,typed:Z,PI:Pb,weakMixingAngle:wde,abs:Zr,acos:_de,acot:Ede,acsc:Cde,addScalar:Gn,arg:Nde,asech:Sde,asinh:Dde,atan:CB,atanh:Ade,bigint:Tde,bitNot:Mde,boolean:Ide,clone:Rde,combinations:$0,complex:z0,conj:_l,cos:p_,cot:kde,csc:Fde,cube:Pde,equalScalar:wt,erf:Ode,exp:NB,expm1:Bde,filter:Lde,flatten:ep,forEach:jde,format:tp,getMatrixDataType:m_,hex:$de,im:v_,isInteger:di,isNegative:lu,isPositive:El,isZero:ao,LOG2E:zde,lgamma:Ude,log10:Wde,log2:g_,map:Cl,multiplyScalar:Dn,not:rg,number:Yo,oct:Vde,pickRandom:qde,print:Hde,random:Gde,re:y_,sec:Kde,sign:SB,sin:U0,splitUnit:Yde,square:Xde,string:Qde,subtractScalar:aa,tan:Zde,typeOf:x_,acosh:Jde,acsch:ehe,asec:the,bignumber:hi,chain:Nme,combinationsWithRep:nhe,cosh:rhe,csch:ihe,isNaN:Io,isPrime:ahe,mapSlices:bh,matrix:Ie,matrixFromFunction:ohe,ones:she,randomInt:uhe,reshape:DB,sech:lhe,sinh:che,sparse:fhe,sqrt:ka,squeeze:dhe,tanh:hhe,transpose:np,xgcd:AB,zeros:pr,acoth:phe,asin:mhe,bin:vhe,concat:Rt,coth:ghe,ctranspose:b_,diag:TB,dotMultiply:yhe,equal:oa,fraction:rp,identity:cu,isNumeric:Nl,kron:xhe,largerEq:W0,leftShift:bhe,mode:whe,nthRoot:_he,numeric:Ji,prod:MB,resize:Ehe,rightArithShift:Che,round:Af,size:br,smaller:Vr,to:Nhe,unaryMinus:oo,unequal:She,xor:Dhe,add:Ct,atan2:Ahe,bitAnd:The,bitOr:Mhe,bitXor:Ihe,cbrt:IB,compare:Sl,compareText:RB,count:Rhe,deepEqual:w_,divideScalar:pn,dotDivide:ip,equalText:khe,floor:kB,gcd:Fhe,hasNumericValue:Phe,hypot:Ohe,larger:qr,log:__,lsolve:PB,matrixFromColumns:E_,max:C_,min:Bhe,mod:OB,nthRoots:Lhe,or:jhe,partitionSelect:V0,qr:N_,rightLogShift:$he,smallerEq:tf,subset:Bi,subtract:In,trace:zhe,usolve:S_,catalan:Uhe,compareNatural:so,composition:Whe,diff:Vhe,distance:qhe,dot:q0,index:LB,invmod:Hhe,lcm:Ghe,log1p:Khe,lsolveAll:Yhe,matrixFromRows:Xhe,multiply:zt,range:nf,row:Qhe,setCartesian:Zhe,setDistinct:Jhe,setIsSubset:epe,setPowerset:tpe,slu:jB,sort:npe,unaryPlus:D_,usolveAll:$B,zpk2tf:rpe,and:ipe,ceil:A_,column:zB,cross:ape,det:UB,fix:WB,inv:Dl,pinv:ope,pow:Fa,setDifference:VB,setMultiplicity:spe,setSymDifference:qB,sqrtm:upe,sum:T_,vacuumImpedance:lpe,wienDisplacement:cpe,atomicMass:fpe,bohrMagneton:dpe,boltzmann:hpe,conductanceQuantum:ppe,coulomb:mpe,cumsum:vpe,deuteronMass:gpe,dotPow:ype,electricConstant:xpe,elementaryCharge:bpe,expm:wpe,faraday:_pe,fft:GB,gamma:M_,gravitationConstant:Epe,hartreeEnergy:Cpe,ifft:Npe,inverseConductanceQuantum:Spe,klitzing:Dpe,loschmidt:Ape,magneticConstant:Tpe,molarMass:Mpe,molarPlanckConstant:Ipe,neutronMass:Rpe,nuclearMagneton:kpe,planckCharge:Fpe,planckLength:Ppe,planckTemperature:Ope,protonMass:Bpe,quantumOfCirculation:Lpe,reducedPlanckConstant:jpe,rydberg:$pe,secondRadiation:zpe,setSize:Upe,speedOfLight:Wpe,stefanBoltzmann:Vpe,thomsonCrossSection:qpe,avogadro:Hpe,bohrRadius:Gpe,createUnit:Kpe,divide:vr,electronMass:Ype,factorial:ap,firstRadiation:Xpe,gravity:Qpe,intersect:Zpe,lup:KB,magneticFluxQuantum:Jpe,molarMassC12:eme,multinomial:tme,parse:Pa,permutations:nme,planckMass:rme,polynomialRoot:ime,resolve:f5,setIntersect:YB,simplifyConstant:F_,solveODE:ame,stirlingS2:XB,unit:ome,bellNumbers:sme,compile:Sme,eigs:QB,fermiCoupling:ume,gasConstant:lme,kldivergence:cme,lusolve:ZB,mean:JB,molarVolume:fme,planckConstant:dme,quantileSeq:hme,setUnion:pme,simplifyCore:P_,variance:I_,classicalElectronRadius:mme,evaluate:H0,median:e5,simplify:G0,symbolicEqual:Dme,corr:vme,freqz:gme,leafCount:Ame,mad:yme,parser:Tme,rationalize:Mme,std:xme,zeta:bme,derivative:Ime,norm:R_,rotationMatrix:t5,help:Rme,planckTime:wme,schur:n5,rotate:_me,sylvester:r5,lyap:Eme,config:Ee});jn(op,Tf,{mapSlices:Vce({isInteger:di,typed:Z}),filter:Zce({typed:Z}),forEach:tfe({typed:Z}),map:sfe({typed:Z}),or:Zfe({DenseMatrix:gt,concat:Rt,equalScalar:wt,matrix:Ie,typed:Z}),and:Yfe({add:Ct,concat:Rt,equalScalar:wt,matrix:Ie,not:rg,typed:Z,zeros:pr}),concat:Mfe({isInteger:di,matrix:Ie,typed:Z}),index:ife({Index:Fr,getMatrixDataType:m_}),print:Hfe({add:Ct,matrix:Ie,typed:Z,zeros:pr}),sum:Bfe({add:Ct,config:Ee,numeric:Ji,typed:Z}),bitAnd:tde({add:Ct,concat:Rt,equalScalar:wt,matrix:Ie,not:rg,typed:Z,zeros:pr}),min:yfe({config:Ee,isNaN:Io,numeric:Ji,smaller:Vr,typed:Z}),subset:Dfe({add:Ct,matrix:Ie,typed:Z,zeros:pr}),bitOr:ide({DenseMatrix:gt,concat:Rt,equalScalar:wt,matrix:Ie,typed:Z}),cumsum:Ufe({add:Ct,typed:Z,unaryPlus:D_}),diff:Rfe({bignumber:hi,matrix:Ie,number:Yo,subtract:In,typed:Z}),max:dfe({config:Ee,isNaN:Io,larger:qr,numeric:Ji,typed:Z}),range:wfe({bignumber:hi,matrix:Ie,add:Ct,config:Ee,isPositive:El,larger:qr,largerEq:W0,smaller:Vr,smallerEq:tf,typed:Z}),row:Cfe({Index:Fr,matrix:Ie,range:nf,typed:Z}),column:Gce({Index:Fr,matrix:Ie,range:nf,typed:Z}),mean:mfe({add:Ct,divide:vr,typed:Z}),quantileSeq:$fe({add:Ct,bignumber:hi,compare:Sl,divide:vr,isInteger:di,larger:qr,mapSlices:bh,multiply:zt,partitionSelect:V0,smaller:Vr,smallerEq:tf,subtract:In,typed:Z}),variance:Vfe({add:Ct,divide:vr,isNaN:Io,mapSlices:bh,multiply:zt,subtract:In,typed:Z}),std:Pfe({map:Cl,sqrt:ka,typed:Z,variance:I_})});jn(i5,{BigNumber:ke,Complex:Kt,Fraction:wl,Matrix:j0,Node:jr,ObjectNode:Mf,OperatorNode:Xo,ParenthesisNode:Al,Range:hde,RelationalNode:a5,ResultSet:wB,ArrayNode:If,BlockNode:o5,ConditionalNode:s5,ConstantNode:fu,DenseMatrix:gt,RangeNode:u5,Chain:k_,FunctionAssignmentNode:l5,SparseMatrix:Kn,ImmutableDenseMatrix:FB,Index:Fr,AccessorNode:Rf,AssignmentNode:c5,FibonacciHeap:BB,IndexNode:kf,Spa:HB,Unit:rt,SymbolNode:du,FunctionNode:hu,Help:d5,Parser:h5});k_.createProxy(Tf);const kme=()=>{const[t,e]=X.useState(""),[n,r]=X.useState(""),[i,a]=X.useState("calculator"),o=()=>{try{const c=H0(t);r(c.toString())}catch{r("Error: Invalid expression")}},s=()=>S.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[S.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Calculator"}),S.jsxs("div",{className:"mb-4",children:[S.jsx("label",{htmlFor:"expression",className:"block text-sm font-medium text-gray-700 mb-1",children:"Enter a mathematical expression:"}),S.jsx("input",{type:"text",id:"expression",value:t,onChange:c=>e(c.target.value),placeholder:"e.g., 2 + 2 * 3",className:"w-full p-2 border border-gray-300 rounded-md"})]}),S.jsx("button",{onClick:o,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"Calculate"}),n&&S.jsx("div",{className:"mt-4",children:S.jsxs("p",{className:"text-lg font-medium",children:["Result: ",n]})}),S.jsxs("div",{className:"mt-6",children:[S.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Supported operations:"}),S.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[S.jsx("li",{children:"Addition: 2 + 2"}),S.jsx("li",{children:"Subtraction: 5 - 3"}),S.jsx("li",{children:"Multiplication: 4 * 3"}),S.jsx("li",{children:"Division: 10 / 2"}),S.jsx("li",{children:"Exponents: 2^3 or 2**3"}),S.jsx("li",{children:"Parentheses: 2 * (3 + 4)"}),S.jsx("li",{children:"Functions: sin(/2), cos(0), sqrt(16)"})]})]})]}),u=()=>S.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[S.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Basic Math Concepts"}),S.jsxs("div",{className:"space-y-6",children:[S.jsxs("div",{children:[S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Addition and Subtraction"}),S.jsx("p",{className:"mb-2",children:"Addition (+) combines numbers to find their sum, while subtraction (-) finds the difference between numbers."}),S.jsx("div",{className:"bg-blue-50 p-3 rounded-md",children:S.jsxs("p",{children:[S.jsx("strong",{children:"Example:"})," 5 + 3 = 8, 10 - 4 = 6"]})})]}),S.jsxs("div",{children:[S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Multiplication and Division"}),S.jsx("p",{className:"mb-2",children:"Multiplication () adds a number to itself multiple times, while division () splits a number into equal parts."}),S.jsx("div",{className:"bg-blue-50 p-3 rounded-md",children:S.jsxs("p",{children:[S.jsx("strong",{children:"Example:"})," 4  3 = 12, 15  3 = 5"]})})]}),S.jsxs("div",{children:[S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Order of Operations (PEMDAS)"}),S.jsx("p",{className:"mb-2",children:"PEMDAS defines the order in which operations should be performed:"}),S.jsxs("ul",{className:"list-disc pl-5 mb-2",children:[S.jsx("li",{children:"Parentheses"}),S.jsx("li",{children:"Exponents"}),S.jsx("li",{children:"Multiplication and Division (from left to right)"}),S.jsx("li",{children:"Addition and Subtraction (from left to right)"})]}),S.jsx("div",{className:"bg-blue-50 p-3 rounded-md",children:S.jsxs("p",{children:[S.jsx("strong",{children:"Example:"})," 2 + 3  4 = 2 + 12 = 14"]})})]})]})]}),l=()=>S.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[S.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Geometry"}),S.jsxs("div",{className:"space-y-6",children:[S.jsxs("div",{children:[S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Area Formulas"}),S.jsxs("ul",{className:"list-disc pl-5 mb-2",children:[S.jsx("li",{children:"Square: side = s"}),S.jsx("li",{children:"Rectangle: length  width = l  w"}),S.jsx("li",{children:"Circle:   radius = r"}),S.jsx("li",{children:"Triangle:   base  height = bh"})]})]}),S.jsxs("div",{children:[S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Perimeter Formulas"}),S.jsxs("ul",{className:"list-disc pl-5 mb-2",children:[S.jsx("li",{children:"Square: 4  side = 4s"}),S.jsx("li",{children:"Rectangle: 2  (length + width) = 2(l + w)"}),S.jsx("li",{children:"Circle (circumference): 2    radius = 2r"}),S.jsx("li",{children:"Triangle: side1 + side2 + side3 = a + b + c"})]})]}),S.jsxs("div",{children:[S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Volume Formulas"}),S.jsxs("ul",{className:"list-disc pl-5 mb-2",children:[S.jsx("li",{children:"Cube: side = s"}),S.jsx("li",{children:"Rectangular Prism: length  width  height = l  w  h"}),S.jsx("li",{children:"Sphere: (4/3)    radius = (4/3)r"}),S.jsx("li",{children:"Cylinder:   radius  height = rh"})]})]})]})]});return S.jsxs("div",{className:"max-w-4xl mx-auto py-8 px-4",children:[S.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Math Learning Center"}),S.jsx("div",{className:"mb-6",children:S.jsxs("div",{className:"flex space-x-4 overflow-x-auto pb-2",children:[S.jsx("button",{onClick:()=>a("calculator"),className:`px-4 py-2 rounded-md ${i==="calculator"?"bg-blue-600 text-white":"bg-gray-200 hover:bg-gray-300"}`,children:"Calculator"}),S.jsx("button",{onClick:()=>a("basic"),className:`px-4 py-2 rounded-md ${i==="basic"?"bg-blue-600 text-white":"bg-gray-200 hover:bg-gray-300"}`,children:"Basic Math"}),S.jsx("button",{onClick:()=>a("geometry"),className:`px-4 py-2 rounded-md ${i==="geometry"?"bg-blue-600 text-white":"bg-gray-200 hover:bg-gray-300"}`,children:"Geometry"})]})}),i==="calculator"&&s(),i==="basic"&&u(),i==="geometry"&&l()]})};function Fme({questions:t,category:e,onComplete:n,isExam:r=!1}){const[i,a]=X.useState(0),[o,s]=X.useState(0),[u,l]=X.useState(!1),[c,f]=X.useState(r?30*60:0),[d,h]=X.useState(null),[p,m]=X.useState(null),[g,v]=X.useState(!1),[x,y]=X.useState(Array(t.length).fill(null)),[b,w]=X.useState(!1);X.useEffect(()=>{r&&!g&&(h(new Date),v(!0))},[r,g]),X.useEffect(()=>{if(r&&c>0&&!u){const k=setInterval(()=>f(F=>F-1),1e3);return()=>clearInterval(k)}else r&&c===0&&!u&&N()},[r,c,u]);const _=k=>{const F=Math.floor(k/60),O=k%60;return`${F}:${O.toString().padStart(2,"0")}`},E=k=>{const F=[...x],O=x[i],I=t[i].correctAnswer;O===I?k!==I&&s(M=>M-1):k===I&&s(M=>M+1),F[i]=k,y(F)},C=()=>{i===t.length-1?w(!0):a(k=>k+1)},N=()=>{const k=new Date,F=d?Math.floor((k.getTime()-d.getTime())/1e3):0;m(k),l(!0),n==null||n(o,F)},D=()=>{a(0),s(0),l(!1),f(r?30*60:0),h(null),m(null),v(!1),y(Array(t.length).fill(null)),w(!1)},A=()=>{i>0&&a(k=>k-1)},T=x[i];return r&&!g?S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mt-8 text-center",children:[S.jsx("h3",{className:"text-2xl font-semibold mb-4",children:"Starting Exam..."}),S.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"})]}):S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mt-8",children:[S.jsxs("h3",{className:"text-2xl font-semibold mb-4",children:[r?"Exam Mode":"Test Your"," ",e," Knowledge"]}),r&&!u&&S.jsx("div",{className:"mb-4 text-right",children:S.jsxs("span",{className:"text-lg font-semibold",children:["Time Remaining: ",_(c)]})}),u?S.jsxs("div",{className:"text-center",children:[S.jsxs("p",{className:"text-xl mb-4",children:["You scored ",o," out of ",t.length,"!"]}),r&&S.jsxs("div",{className:"mb-4",children:[S.jsxs("p",{className:"text-lg",children:["Time Taken:"," ",_(p&&d?Math.floor((p.getTime()-d.getTime())/1e3):0)]}),S.jsxs("p",{className:"text-lg",children:["Percentage: ",(o/t.length*100).toFixed(1),"%"]})]}),S.jsx("button",{onClick:D,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700",children:"Try Again"})]}):S.jsxs("div",{children:[S.jsxs("p",{className:"text-lg mb-4",children:["Question ",i+1," of ",t.length,e==="All Categories"&&S.jsxs("span",{className:"ml-2 text-sm text-gray-500",children:["(Category: ",t[i].category,")"]})]}),S.jsx("p",{className:"text-xl mb-6",children:t[i].question}),t[i].image&&S.jsx("div",{className:"mb-6 flex justify-center",children:S.jsx("img",{src:t[i].image,alt:"Question Visual",className:"w-48 h-auto rounded-lg shadow-md"})}),S.jsx("div",{className:"space-y-3",children:t[i].options.map((k,F)=>S.jsx("button",{onClick:()=>E(k),className:`w-full text-left p-3 rounded-lg transition-colors border ${T===k?k===t[i].correctAnswer?"bg-green-100 border-green-500":"bg-red-100 border-red-500":"bg-gray-100 hover:bg-gray-200"}`,children:k},F))}),S.jsxs("div",{className:"flex justify-between mt-6",children:[S.jsx("button",{onClick:A,disabled:i===0,className:`px-4 py-2 rounded-lg ${i===0?"bg-gray-300 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"}`,children:"Previous"}),i===t.length-1?b?S.jsx("button",{onClick:N,className:"px-4 py-2 rounded-lg bg-green-500 text-white hover:bg-green-600",children:"Submit"}):S.jsx("button",{onClick:C,disabled:!T,className:`px-4 py-2 rounded-lg ${T?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-300 cursor-not-allowed"}`,children:"Next"}):S.jsx("button",{onClick:C,disabled:!T,className:`px-4 py-2 rounded-lg ${T?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-300 cursor-not-allowed"}`,children:"Next"})]})]})]})}const d1=[{id:1,category:"Animals",question:"What is the largest land animal?",options:["African Elephant","White Rhinoceros","Hippopotamus","Giraffe"],correctAnswer:"African Elephant",image:"https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcQJLwERoOcxUaWy77zWGKffIAou6u4qprvF94FizspAWTDcWnXa-LlA7D-KuadBbR1Xr6etcGjdpYIa2o5npl8ZH5sTZO3iZe89TCCV0A"},{id:2,category:"Animals",question:"Which big cat is known as the 'King of the Jungle'?",options:["Tiger","Lion","Leopard","Jaguar"],correctAnswer:"Lion",image:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ5mY_cvo6-XP-Fivsf9qUh_gIIDBZunOhq2Q&s"},{id:3,category:"Animals",question:"What animal is known for having a long neck and eating leaves from tall trees?",options:["Elephant","Kangaroo","Giraffe","Zebra"],correctAnswer:"Giraffe",image:"https://images.unsplash.com/photo-1534567110243-8875d64ca8ff?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8R2lyYWZmZXxlbnwwfHwwfHx8MA%3D%3D"},{id:4,category:"Animals",question:"Which of these animals is known for its black and white stripes?",options:["Zebra","Tiger","Giraffe","Leopard"],correctAnswer:"Zebra",image:"https://images.unsplash.com/photo-1526095179574-86e545346ae6?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8WmVicmF8ZW58MHx8MHx8fDA%3D"},{id:5,category:"Animals",question:"What animal is known for storing food in its cheeks?",options:["Squirrel","Rabbit","Hamster","Chipmunk"],correctAnswer:"Hamster",image:"https://images.unsplash.com/photo-1577099608295-f11bbd6fed32?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTF8fEhhbXN0ZXJ8ZW58MHx8MHx8fDA%3Ds"},{id:6,category:"Aquatic",question:"Which of the following is the fastest fish in the ocean",options:["Shark","Swordfish","Tuna","Dolphin"],correctAnswer:"Swordfish",image:"https://plus.unsplash.com/premium_photo-1708433273440-da1b1601212f?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8U3dvcmRmaXNofGVufDB8fDB8fHww"},{id:7,category:"Aquatic",question:"What is the largest species of jellyfish?",options:["Lion's Mane Jellyfish","Moon Jellyfish","Box Jellyfish","Sea Nettle"],correctAnswer:"Lion's Mane Jellyfish",image:"https://plus.unsplash.com/premium_photo-1693723595968-b7d410643cbf?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NXx8TGlvbidzJTIwTWFuZSUyMEplbGx5ZmlzaHxlbnwwfHwwfHx8MA%3D%3D"},{id:8,category:"Aquatic",question:"Which animal is known to be able to regenerate its limbs?",options:[" Octopus","Sea Star","Whale","Shark"],correctAnswer:"Sea Star",image:"https://images.unsplash.com/photo-1534829942-6f3792b99514?q=80&w=1932&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{id:9,category:"Aquatic",question:"What is the primary food source for most adult sea turtles?",options:["Seaweed","Fish","Jellyfish","Shrimp"],correctAnswer:"Jellyfish",image:"https://plus.unsplash.com/premium_photo-1693723595870-2b8bad09b4c2?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8SmVsbHlmaXNofGVufDB8fDB8fHww"},{id:10,category:"Aquatic",question:"Which of these is a mammal that lives underwater?",options:["Shark","Dolphin","Seahorse","Squid"],correctAnswer:"Dolphin",image:"https://plus.unsplash.com/premium_photo-1661876281967-bb7301964945?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NXx8RG9scGhpbnxlbnwwfHwwfHx8MA%3D%3D"},{id:11,category:"Birds",question:"Which bird is known for its colorful feathers and ability to mimic sounds?",options:["Peacock","Parrot","Sparrow","Eagle"],correctAnswer:"Parrot",image:"https://images.unsplash.com/photo-1544923408-75c5cef46f14?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8UGFycm90fGVufDB8fDB8fHww"},{id:12,category:"Birds",question:"Which bird is  the fastest in the world?",options:["Eagle","Peregrine Falcon","Ostrich","Hawk"],correctAnswer:"Peregrine Falcon",image:"https://plus.unsplash.com/premium_photo-1664297692493-95729e262e92?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NXx8UGVyZWdyaW5lJTIwRmFsY29ufGVufDB8fDB8fHww"},{id:13,category:"Birds",question:"What bird is known for its long migration from the northern to southern hemispheres?",options:["Swallow","Penguin","Swan","Duck"],correctAnswer:"Swallow",image:"https://images.unsplash.com/photo-1613492697585-e9c360e39b1f?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8U3dhbGxvd3xlbnwwfHwwfHx8MA%3D%3D"},{id:14,category:"Birds",question:"Which bird is known for laying the largest eggs?",options:["Ostrich","Chicken","Eagle","Penguin"],correctAnswer:"Ostrich",image:"https://images.unsplash.com/photo-1569979227661-459bbb0ebe84?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8T3N0cmljaHxlbnwwfHwwfHx8MA%3D%3D"},{id:15,category:"Birds",question:"Which bird is known to fly at the highest altitude?",options:["Albatross","Vulture","Eagle","Condor"],correctAnswer:"Albatross",image:"https://images.unsplash.com/photo-1552243048-431d0c4e1bad?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8QWxiYXRyb3NzfGVufDB8fDB8fHww"},{id:16,category:"Vegetables",question:"Which vegetable is known for its orange color and is rich in vitamin A?",options:["Carrot","Broccoli","Spinach","Cucumber"],correctAnswer:"Carrot",image:"https://images.unsplash.com/photo-1598170845058-32b9d6a5da37?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8Q2Fycm90fGVufDB8fDB8fHww"},{id:17,category:"Vegetables",question:"Which vegetable is a key ingredient in making guacamole?",options:["Tomato","Cucumber","Avocado","Onion"],correctAnswer:"Avocado",image:"https://images.unsplash.com/photo-1601039641847-7857b994d704?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8QXZvY2Fkb3xlbnwwfHwwfHx8MA%3D%3D"},{id:18,category:"Vegetables",question:"Which vegetable is known for its green color and is often used in salads?",options:["Lettuce","Potato","Carrot","Pea"],correctAnswer:"Lettuce",image:"https://images.unsplash.com/photo-1640958904159-51ae08bd3412?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8TGV0dHVjZXxlbnwwfHwwfHx8MA%3D%3D"},{id:19,category:"Vegetables",question:"Which vegetable is known for being a rich source of potassium and is often used in fries?",options:["Tomato","Cucumber","Potato","Onion"],correctAnswer:"Potato",image:"https://images.unsplash.com/photo-1518977676601-b53f82aba655?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8UG90YXRvfGVufDB8fDB8fHwwo"},{id:20,category:"Vegetables",question:"Which vegetable is often used in soups and has a strong aroma when cooked?",options:["Garlic","Broccoli","Cabbage","Onion"],correctAnswer:"Onion",image:"https://images.unsplash.com/photo-1618512496248-a07fe83aa8cb?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8T25pb258ZW58MHx8MHx8fDA%3D"},{id:21,category:"Flowers",question:"Which flower is known for its strong fragrance and is often white?",options:["Jasmine","Rose","Tulip","Daffodil"],correctAnswer:"Jasmine",image:"https://images.unsplash.com/photo-1612380635121-411eda9ecbb9?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8SmFzbWluZXxlbnwwfHwwfHx8MA%3D%3D"},{id:22,category:"Flowers",question:"Which flower blooms from a bulb and comes in many colors, often seen in spring?",options:["Tulip","Lily","Marigold","Orchid"],correctAnswer:"Tulip",image:"https://images.unsplash.com/photo-1586968295564-92fd7572718b?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8VHVsaXB8ZW58MHx8MHx8fDA%3D"},{id:23,category:"Flowers",question:"Which flower is associated with peace and is commonly white?",options:["Lily","Rose","Sunflower","Hibiscus"],correctAnswer:"Lily",image:"https://images.unsplash.com/photo-1561897519-6e4fbd1fbc41?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8TGlseXxlbnwwfHwwfHx8MA%3D%3D"},{id:24,category:"Flowers",question:"Which flower is bright yellow and faces the sun?",options:["Sunflower","Marigold","Lotus","Daisy"],correctAnswer:"Sunflower",image:"https://images.unsplash.com/photo-1533598313300-ac574e6dd10d?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1yZWxhdGVkfDJ8fHxlbnwwfHx8fHw%3D"},{id:25,category:"Flowers",question:"Which flower is sacred in many cultures and grows in water?",options:["Lotus","Rose","Tulip","Lavender"],correctAnswer:"Lotus",image:"https://plus.unsplash.com/premium_photo-1664303754150-7a776a1f28bd?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NXx8TG90dXN8ZW58MHx8MHx8fDA%3D"},{id:26,category:"Vehicles",question:"Which vehicle has two wheels and is powered by pedaling?",options:["Bicycle","Car","Bus","Scooter"],correctAnswer:"Bicycle",image:"https://plus.unsplash.com/premium_photo-1678718713393-2b88cde9605b?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NXx8QmljeWNsZXxlbnwwfHwwfHx8MA%3D%3D"},{id:27,category:"Vehicles",question:"Which vehicle is used for public transport and carries many passengers?",options:["Bus","Car","Bike","Rickshaw"],correctAnswer:"Bus",image:"https://images.unsplash.com/photo-1570125909232-eb263c188f7e?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Nnx8QnVzfGVufDB8fDB8fHww"},{id:28,category:"Vehicles",question:"Which vehicle is commonly used by families and runs on four wheels?",options:["Car","Helicopter","Train","Bicycle"],correctAnswer:"Car",image:"https://images.unsplash.com/photo-1502877338535-766e1452684a?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8OHx8Q2FyfGVufDB8fDB8fHww"},{id:29,category:"Vehicles",question:"Which vehicle flies in the sky and transports people or goods over long distances?",options:["Airplane","Ship","Car","Bike"],correctAnswer:"Airplane",image:"https://images.unsplash.com/photo-1523833082115-1e8e294bd14e?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8N3x8QWlycGxhbmV8ZW58MHx8MHx8fDA%3D"},{id:30,category:"Vehicles",question:"Which vehicle runs on tracks and is used for long-distance land travel?",options:["Train","Bus","Bicycle","Scooter"],correctAnswer:"Train",image:"https://images.unsplash.com/photo-1474487548417-781cb71495f3?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTB8fFRyYWlufGVufDB8fDB8fHww"},{id:31,category:"Fruits",question:"Which fruit is yellow in color and high in potassium?",options:["Banana","Apple","Orange","Grapes"],correctAnswer:"Banana",image:"https://images.unsplash.com/photo-1603833665858-e61d17a86224?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Nnx8QmFuYW5hfGVufDB8fDB8fHww"},{id:32,category:"Fruits",question:"Which fruit is red and often associated with keeping the doctor away?",options:["Apple","Pear","Mango","Kiwi"],correctAnswer:"Apple",image:"https://images.unsplash.com/photo-1560806887-1e4cd0b6cbd6?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTB8fEFwcGxlfGVufDB8fDB8fHww"},{id:33,category:"Fruits",question:"Which fruit is known for its spiky outer skin and sweet yellow inside?",options:["Pineapple","Watermelon","Papaya","Coconut"],correctAnswer:"Pineapple",image:"https://images.unsplash.com/photo-1587883012610-e3df17d41270?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Nnx8cGluZUFwcGxlfGVufDB8fDB8fHww"},{id:34,category:"Fruits",question:"Which fruit is commonly used to make orange juice?",options:["Orange","Lemon","Grapefruit","Tangerine"],correctAnswer:"Orange",image:"https://plus.unsplash.com/premium_photo-1675667408018-3b64dbc55db1?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8T3JhbmdlfGVufDB8fDB8fHww"},{id:35,category:"Fruits",question:"Which small purple or green fruit grows in bunches on vines?",options:["Grapes","Blueberries","Cherries","Dates"],correctAnswer:"Grapes",image:"https://plus.unsplash.com/premium_photo-1666270423730-9af384b9cb0f?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8R3JhcGVzfGVufDB8fDB8fHww"},{id:41,category:"Math",question:"How many apples are present in he above image?",options:["10","20","6","7"],correctAnswer:"6",image:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSIOvt3dqd8Nx6rNGzRu8bFUMaZtanm-3rI-w&s"},{id:36,category:"Math",question:"How many grapes are present in he above image?",options:["9","12","13","14"],correctAnswer:"9",image:"https://content.lessonplanet.com/resources/thumbnails/177674/large/cgrmlwnvbnzlcnqymdezmdmzmc0ymzywos0xytz0mxlzlmpwzw.jpg?1414276004"},{id:37,category:"Math",question:"What is 9  3?",options:["27","18","21","24"],correctAnswer:"27"},{id:38,category:"Math",question:"What is the square root of 64?",options:["6","7","8","9"],correctAnswer:"8"},{id:39,category:"Math",question:"What is 15 - 6?",options:["9","8","7","6"],correctAnswer:"9"}],Pme=()=>{};var oM={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p5={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Be=function(t,e){if(!t)throw Ff(e)},Ff=function(t){return new Error("Firebase Database ("+p5.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m5=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Ome=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],o=t[n++],s=t[n++],u=((i&7)<<18|(a&63)<<12|(o&63)<<6|s&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const a=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},O_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],o=i+1<t.length,s=o?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,c=a>>2,f=(a&3)<<4|s>>4;let d=(s&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(m5(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Ome(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0;++i;const l=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||s==null||l==null||f==null)throw new Bme;const d=a<<2|s>>4;if(r.push(d),l!==64){const h=s<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Bme extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const v5=function(t){const e=m5(t);return O_.encodeByteArray(e,!0)},ig=function(t){return v5(t).replace(/\./g,"")},ag=function(t){try{return O_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lme(t){return g5(void 0,t)}function g5(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!jme(n)||(t[n]=g5(t[n],e[n]));return t}function jme(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $me(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zme=()=>$me().__FIREBASE_DEFAULTS__,Ume=()=>{if(typeof process>"u"||typeof oM>"u")return;const t=oM.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Wme=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&ag(t[1]);return e&&JSON.parse(e)},B_=()=>{try{return Pme()||zme()||Ume()||Wme()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},y5=t=>{var e,n;return(n=(e=B_())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Vme=t=>{const e=y5(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},x5=()=>{var t;return(t=B_())===null||t===void 0?void 0:t.config},b5=t=>{var e;return(e=B_())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qme(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ig(JSON.stringify(n)),ig(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function L_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gr())}function Hme(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Gme(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function w5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Kme(){const t=Gr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function _5(){return p5.NODE_ADMIN===!0}function Yme(){try{return typeof indexedDB=="object"}catch{return!1}}function Xme(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qme="FirebaseError";class pu extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Qme,Object.setPrototypeOf(this,pu.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sp.prototype.create)}}class sp{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?Zme(a,r):"Error",s=`${this.serviceName}: ${o} (${i}).`;return new pu(i,s,r)}}function Zme(t,e){return t.replace(Jme,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Jme=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wh(t){return JSON.parse(t)}function nr(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E5=function(t){let e={},n={},r={},i="";try{const a=t.split(".");e=wh(ag(a[0])||""),n=wh(ag(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},eve=function(t){const e=E5(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},tve=function(t){const e=E5(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qo(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function rf(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Ob(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function og(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function al(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],o=e[i];if(sM(a)&&sM(o)){if(!al(a,o))return!1}else if(a!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function sM(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pf(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function bd(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function wd(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nve{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let f=0;f<16;f++)r[f]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let f=0;f<16;f++)r[f]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let f=16;f<80;f++){const d=r[f-3]^r[f-8]^r[f-14]^r[f-16];r[f]=(d<<1|d>>>31)&4294967295}let i=this.chain_[0],a=this.chain_[1],o=this.chain_[2],s=this.chain_[3],u=this.chain_[4],l,c;for(let f=0;f<80;f++){f<40?f<20?(l=s^a&(o^s),c=1518500249):(l=a^o^s,c=1859775393):f<60?(l=a&o|s&(a|o),c=2400959708):(l=a^o^s,c=3395469782);const d=(i<<5|i>>>27)+l+u+c+r[f]&4294967295;u=s,s=o,o=(a<<30|a>>>2)&4294967295,a=i,i=d}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+s&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const a=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(a[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(a),o=0;break}}else for(;i<n;)if(a[o]=e[i],++o,++i,o===this.blockSize){this.compress_(a),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}function rve(t,e){const n=new ive(t,e);return n.subscribe.bind(n)}class ive{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");ave(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=h1),i.error===void 0&&(i.error=h1),i.complete===void 0&&(i.complete=h1);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ave(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function h1(){}function j_(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ove=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const a=i-55296;r++,Be(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(a<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Y0=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jr(t){return t&&t._delegate?t._delegate:t}class ol{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Au="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sve{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new K0;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lve(e))try{this.getOrInitializeService({instanceIdentifier:Au})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Au){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Au){return this.instances.has(e)}getOptions(e=Au){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(a);r===s&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const o=this.instances.get(i);return o&&e(o,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:uve(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Au){return this.component?this.component.multipleInstances?e:Au:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function uve(t){return t===Au?void 0:t}function lve(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cve{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new sve(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Xt||(Xt={}));const fve={debug:Xt.DEBUG,verbose:Xt.VERBOSE,info:Xt.INFO,warn:Xt.WARN,error:Xt.ERROR,silent:Xt.SILENT},dve=Xt.INFO,hve={[Xt.DEBUG]:"log",[Xt.VERBOSE]:"log",[Xt.INFO]:"info",[Xt.WARN]:"warn",[Xt.ERROR]:"error"},pve=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=hve[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class $_{constructor(e){this.name=e,this._logLevel=dve,this._logHandler=pve,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fve[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xt.DEBUG,...e),this._logHandler(this,Xt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xt.VERBOSE,...e),this._logHandler(this,Xt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xt.INFO,...e),this._logHandler(this,Xt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xt.WARN,...e),this._logHandler(this,Xt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xt.ERROR,...e),this._logHandler(this,Xt.ERROR,...e)}}const mve=(t,e)=>e.some(n=>t instanceof n);let uM,lM;function vve(){return uM||(uM=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gve(){return lM||(lM=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const C5=new WeakMap,Bb=new WeakMap,N5=new WeakMap,p1=new WeakMap,z_=new WeakMap;function yve(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{n(Os(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&C5.set(n,t)}).catch(()=>{}),z_.set(e,t),e}function xve(t){if(Bb.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});Bb.set(t,e)}let Lb={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Bb.get(t);if(e==="objectStoreNames")return t.objectStoreNames||N5.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Os(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function bve(t){Lb=t(Lb)}function wve(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(m1(this),e,...n);return N5.set(r,e.sort?e.sort():[e]),Os(r)}:gve().includes(t)?function(...e){return t.apply(m1(this),e),Os(C5.get(this))}:function(...e){return Os(t.apply(m1(this),e))}}function _ve(t){return typeof t=="function"?wve(t):(t instanceof IDBTransaction&&xve(t),mve(t,vve())?new Proxy(t,Lb):t)}function Os(t){if(t instanceof IDBRequest)return yve(t);if(p1.has(t))return p1.get(t);const e=_ve(t);return e!==t&&(p1.set(t,e),z_.set(e,t)),e}const m1=t=>z_.get(t);function Eve(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(t,e),s=Os(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Os(o.result),u.oldVersion,u.newVersion,Os(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),s.then(u=>{a&&u.addEventListener("close",()=>a()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),s}const Cve=["get","getKey","getAll","getAllKeys","count"],Nve=["put","add","delete","clear"],v1=new Map;function cM(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(v1.get(e))return v1.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Nve.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Cve.includes(n)))return;const a=async function(o,...s){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(s.shift())),(await Promise.all([l[n](...s),i&&u.done]))[0]};return v1.set(e,a),a}bve(t=>({...t,get:(e,n,r)=>cM(e,n)||t.get(e,n,r),has:(e,n)=>!!cM(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sve{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Dve(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Dve(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const jb="@firebase/app",fM="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo=new $_("@firebase/app"),Ave="@firebase/app-compat",Tve="@firebase/analytics-compat",Mve="@firebase/analytics",Ive="@firebase/app-check-compat",Rve="@firebase/app-check",kve="@firebase/auth",Fve="@firebase/auth-compat",Pve="@firebase/database",Ove="@firebase/data-connect",Bve="@firebase/database-compat",Lve="@firebase/functions",jve="@firebase/functions-compat",$ve="@firebase/installations",zve="@firebase/installations-compat",Uve="@firebase/messaging",Wve="@firebase/messaging-compat",Vve="@firebase/performance",qve="@firebase/performance-compat",Hve="@firebase/remote-config",Gve="@firebase/remote-config-compat",Kve="@firebase/storage",Yve="@firebase/storage-compat",Xve="@firebase/firestore",Qve="@firebase/vertexai",Zve="@firebase/firestore-compat",Jve="firebase",ege="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b="[DEFAULT]",tge={[jb]:"fire-core",[Ave]:"fire-core-compat",[Mve]:"fire-analytics",[Tve]:"fire-analytics-compat",[Rve]:"fire-app-check",[Ive]:"fire-app-check-compat",[kve]:"fire-auth",[Fve]:"fire-auth-compat",[Pve]:"fire-rtdb",[Ove]:"fire-data-connect",[Bve]:"fire-rtdb-compat",[Lve]:"fire-fn",[jve]:"fire-fn-compat",[$ve]:"fire-iid",[zve]:"fire-iid-compat",[Uve]:"fire-fcm",[Wve]:"fire-fcm-compat",[Vve]:"fire-perf",[qve]:"fire-perf-compat",[Hve]:"fire-rc",[Gve]:"fire-rc-compat",[Kve]:"fire-gcs",[Yve]:"fire-gcs-compat",[Xve]:"fire-fst",[Zve]:"fire-fst-compat",[Qve]:"fire-vertex","fire-js":"fire-js",[Jve]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sg=new Map,nge=new Map,zb=new Map;function dM(t,e){try{t.container.addComponent(e)}catch(n){Uo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function af(t){const e=t.name;if(zb.has(e))return Uo.debug(`There were multiple attempts to register component ${e}.`),!1;zb.set(e,t);for(const n of sg.values())dM(n,t);for(const n of nge.values())dM(n,t);return!0}function U_(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ei(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rge={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Bs=new sp("app","Firebase",rge);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ige{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ol("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Bs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Of=ege;function S5(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:$b,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Bs.create("bad-app-name",{appName:String(i)});if(n||(n=x5()),!n)throw Bs.create("no-options");const a=sg.get(i);if(a){if(al(n,a.options)&&al(r,a.config))return a;throw Bs.create("duplicate-app",{appName:i})}const o=new cve(i);for(const u of zb.values())o.addComponent(u);const s=new ige(n,r,o);return sg.set(i,s),s}function D5(t=$b){const e=sg.get(t);if(!e&&t===$b&&x5())return S5();if(!e)throw Bs.create("no-app",{appName:t});return e}function Ls(t,e,n){var r;let i=(r=tge[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const a=i.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const s=[`Unable to register library "${i}" with version "${e}":`];a&&s.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Uo.warn(s.join(" "));return}af(new ol(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const age="firebase-heartbeat-database",oge=1,_h="firebase-heartbeat-store";let g1=null;function A5(){return g1||(g1=Eve(age,oge,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(_h)}catch(n){console.warn(n)}}}}).catch(t=>{throw Bs.create("idb-open",{originalErrorMessage:t.message})})),g1}async function sge(t){try{const n=(await A5()).transaction(_h),r=await n.objectStore(_h).get(T5(t));return await n.done,r}catch(e){if(e instanceof pu)Uo.warn(e.message);else{const n=Bs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Uo.warn(n.message)}}}async function hM(t,e){try{const r=(await A5()).transaction(_h,"readwrite");await r.objectStore(_h).put(e,T5(t)),await r.done}catch(n){if(n instanceof pu)Uo.warn(n.message);else{const r=Bs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Uo.warn(r.message)}}}function T5(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uge=1024,lge=30;class cge{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new dge(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=pM();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>lge){const o=hge(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Uo.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=pM(),{heartbeatsToSend:r,unsentEntries:i}=fge(this._heartbeatsCache.heartbeats),a=ig(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Uo.warn(n),""}}}function pM(){return new Date().toISOString().substring(0,10)}function fge(t,e=uge){const n=[];let r=t.slice();for(const i of t){const a=n.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),mM(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),mM(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class dge{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Yme()?Xme().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await sge(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return hM(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return hM(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function mM(t){return ig(JSON.stringify({version:2,heartbeats:t})).length}function hge(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pge(t){af(new ol("platform-logger",e=>new Sve(e),"PRIVATE")),af(new ol("heartbeat",e=>new cge(e),"PRIVATE")),Ls(jb,fM,t),Ls(jb,fM,"esm2017"),Ls("fire-js","")}pge("");function W_(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function M5(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const mge=M5,I5=new sp("auth","Firebase",M5());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ug=new $_("@firebase/auth");function vge(t,...e){ug.logLevel<=Xt.WARN&&ug.warn(`Auth (${Of}): ${t}`,...e)}function Xm(t,...e){ug.logLevel<=Xt.ERROR&&ug.error(`Auth (${Of}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ia(t,...e){throw q_(t,...e)}function Na(t,...e){return q_(t,...e)}function V_(t,e,n){const r=Object.assign(Object.assign({},mge()),{[e]:n});return new sp("auth","Firebase",r).create(e,{appName:t.name})}function Ro(t){return V_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function gge(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&ia(t,"argument-error"),V_(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function q_(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return I5.create(t,...e)}function it(t,e,...n){if(!t)throw q_(e,...n)}function So(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Xm(e),new Error(e)}function Wo(t,e){t||So(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function yge(){return vM()==="http:"||vM()==="https:"}function vM(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xge(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(yge()||Gme()||"connection"in navigator)?navigator.onLine:!0}function bge(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e,n){this.shortDelay=e,this.longDelay=n,Wo(n>e,"Short delay should be less than long delay!"),this.isMobile=L_()||w5()}get(){return xge()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H_(t,e){Wo(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R5{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;So("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;So("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;So("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wge={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _ge=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Ege=new up(3e4,6e4);function mu(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function vu(t,e,n,r,i={}){return k5(t,i,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const s=Pf(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const l=Object.assign({method:e,headers:u},a);return Hme()||(l.referrerPolicy="no-referrer"),R5.fetch()(await F5(t,t.config.apiHost,n,s),l)})}async function k5(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},wge),e);try{const i=new Nge(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw vm(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const s=a.ok?o.errorMessage:o.error.message,[u,l]=s.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw vm(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw vm(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw vm(t,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw V_(t,c,l);ia(t,c)}}catch(i){if(i instanceof pu)throw i;ia(t,"network-request-failed",{message:String(i)})}}async function lp(t,e,n,r,i={}){const a=await vu(t,e,n,r,i);return"mfaPendingCredential"in a&&ia(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function F5(t,e,n,r){const i=`${e}${n}?${r}`,a=t,o=a.config.emulator?H_(t.config,i):`${t.config.apiScheme}://${i}`;return _ge.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}function Cge(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Nge{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Na(this.auth,"network-request-failed")),Ege.get())})}}function vm(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Na(t,e,r);return i.customData._tokenResponse=n,i}function gM(t){return t!==void 0&&t.enterprise!==void 0}class Sge{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Cge(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Dge(t,e){return vu(t,"GET","/v2/recaptchaConfig",mu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Age(t,e){return vu(t,"POST","/v1/accounts:delete",e)}async function lg(t,e){return vu(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pd(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Tge(t,e=!1){const n=Jr(t),r=await n.getIdToken(e),i=G_(r);it(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:Pd(y1(i.auth_time)),issuedAtTime:Pd(y1(i.iat)),expirationTime:Pd(y1(i.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function y1(t){return Number(t)*1e3}function G_(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Xm("JWT malformed, contained fewer than 3 sections"),null;try{const i=ag(n);return i?JSON.parse(i):(Xm("Failed to decode base64 JWT payload"),null)}catch(i){return Xm("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function yM(t){const e=G_(t);return it(e,"internal-error"),it(typeof e.exp<"u","internal-error"),it(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eh(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof pu&&Mge(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Mge({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ige{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pd(this.lastLoginAt),this.creationTime=Pd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cg(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Eh(t,lg(n,{idToken:r}));it(i==null?void 0:i.users.length,n,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?P5(a.providerUserInfo):[],s=kge(t.providerData,o),u=t.isAnonymous,l=!(t.email&&a.passwordHash)&&!(s!=null&&s.length),c=u?l:!1,f={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new Wb(a.createdAt,a.lastLoginAt),isAnonymous:c};Object.assign(t,f)}async function Rge(t){const e=Jr(t);await cg(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function kge(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function P5(t){return t.map(e=>{var{providerId:n}=e,r=W_(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fge(t,e){const n=await k5(t,{},async()=>{const r=Pf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,o=await F5(t,i,"/v1/token",`key=${a}`),s=await t._getAdditionalHeaders();return s["Content-Type"]="application/x-www-form-urlencoded",R5.fetch()(o,{method:"POST",headers:s,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Pge(t,e){return vu(t,"POST","/v2/accounts:revokeToken",mu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){it(e.idToken,"internal-error"),it(typeof e.idToken<"u","internal-error"),it(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):yM(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){it(e.length!==0,"internal-error");const n=yM(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(it(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await Fge(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,o=new Dc;return r&&(it(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(it(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(it(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Dc,this.toJSON())}_performRefresh(){return So("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function as(t,e){it(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ya{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,a=W_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ige(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Wb(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Eh(this,this.stsTokenManager.getToken(this.auth,e));return it(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Tge(this,e)}reload(){return Rge(this)}_assign(e){this!==e&&(it(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ya(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){it(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await cg(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ei(this.auth.app))return Promise.reject(Ro(this.auth));const e=await this.getIdToken();return await Eh(this,Age(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,a,o,s,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(s=n.tenantId)!==null&&s!==void 0?s:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,v=(l=n.createdAt)!==null&&l!==void 0?l:void 0,x=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:y,emailVerified:b,isAnonymous:w,providerData:_,stsTokenManager:E}=n;it(y&&E,e,"internal-error");const C=Dc.fromJSON(this.name,E);it(typeof y=="string",e,"internal-error"),as(f,e.name),as(d,e.name),it(typeof b=="boolean",e,"internal-error"),it(typeof w=="boolean",e,"internal-error"),as(h,e.name),as(p,e.name),as(m,e.name),as(g,e.name),as(v,e.name),as(x,e.name);const N=new ya({uid:y,auth:e,email:d,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:C,createdAt:v,lastLoginAt:x});return _&&Array.isArray(_)&&(N.providerData=_.map(D=>Object.assign({},D))),g&&(N._redirectEventId=g),N}static async _fromIdTokenResponse(e,n,r=!1){const i=new Dc;i.updateFromServerResponse(n);const a=new ya({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await cg(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];it(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?P5(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),s=new Dc;s.updateFromIdToken(r);const u=new ya({uid:i.localId,auth:e,stsTokenManager:s,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Wb(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xM=new Map;function Do(t){Wo(t instanceof Function,"Expected a class definition");let e=xM.get(t);return e?(Wo(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,xM.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}O5.type="NONE";const bM=O5;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qm(t,e,n){return`firebase:${t}:${e}:${n}`}class Ac{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Qm(this.userKey,i.apiKey,a),this.fullPersistenceKey=Qm("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await lg(this.auth,{idToken:e}).catch(()=>{});return n?ya._fromGetAccountInfoResponse(this.auth,n,e):null}return ya._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ac(Do(bM),e,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let a=i[0]||Do(bM);const o=Qm(r,e.config.apiKey,e.name);let s=null;for(const l of n)try{const c=await l._get(o);if(c){let f;if(typeof c=="string"){const d=await lg(e,{idToken:c}).catch(()=>{});if(!d)break;f=await ya._fromGetAccountInfoResponse(e,d,c)}else f=ya._fromJSON(e,c);l!==a&&(s=f),a=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new Ac(a,e,r):(a=u[0],s&&await a._set(o,s.toJSON()),await Promise.all(n.map(async l=>{if(l!==a)try{await l._remove(o)}catch{}})),new Ac(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wM(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($5(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(B5(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(U5(e))return"Blackberry";if(W5(e))return"Webos";if(L5(e))return"Safari";if((e.includes("chrome/")||j5(e))&&!e.includes("edge/"))return"Chrome";if(z5(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function B5(t=Gr()){return/firefox\//i.test(t)}function L5(t=Gr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function j5(t=Gr()){return/crios\//i.test(t)}function $5(t=Gr()){return/iemobile/i.test(t)}function z5(t=Gr()){return/android/i.test(t)}function U5(t=Gr()){return/blackberry/i.test(t)}function W5(t=Gr()){return/webos/i.test(t)}function K_(t=Gr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Oge(t=Gr()){var e;return K_(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Bge(){return Kme()&&document.documentMode===10}function V5(t=Gr()){return K_(t)||z5(t)||W5(t)||U5(t)||/windows phone/i.test(t)||$5(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q5(t,e=[]){let n;switch(t){case"Browser":n=wM(Gr());break;case"Worker":n=`${wM(Gr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Of}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lge{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((o,s)=>{try{const u=e(a);o(u)}catch(u){s(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jge(t,e={}){return vu(t,"GET","/v2/passwordPolicy",mu(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $ge=6;class zge{constructor(e){var n,r,i,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:$ge,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,a,o,s;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(a=u.containsUppercaseLetter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNonAlphanumericCharacter)!==null&&s!==void 0?s:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uge{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _M(this),this.idTokenSubscription=new _M(this),this.beforeStateQueue=new Lge(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=I5,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Do(n)),this._initializationPromise=this.queue(async()=>{var r,i,a;if(!this._deleted&&(this.persistenceManager=await Ac.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await lg(this,{idToken:e}),r=await ya._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ei(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,s=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===s)&&(u!=null&&u.user)&&(i=u.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return it(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await cg(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=bge()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ei(this.app))return Promise.reject(Ro(this));const n=e?Jr(e):null;return n&&it(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&it(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ei(this.app)?Promise.reject(Ro(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ei(this.app)?Promise.reject(Ro(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Do(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await jge(this),n=new zge(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new sp("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Pge(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Do(e)||this._popupRedirectResolver;it(n,this,"argument-error"),this.redirectPersistenceManager=await Ac.create(this,[Do(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let o=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(it(s,this,"internal-error"),s.then(()=>{o||a(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return it(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=q5(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(Ei(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&vge(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function gu(t){return Jr(t)}class _M{constructor(e){this.auth=e,this.observer=null,this.addObserver=rve(n=>this.observer=n)}get next(){return it(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let X0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Wge(t){X0=t}function H5(t){return X0.loadJS(t)}function Vge(){return X0.recaptchaEnterpriseScript}function qge(){return X0.gapiScript}function Hge(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class Gge{constructor(){this.enterprise=new Kge}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Kge{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Yge="recaptcha-enterprise",G5="NO_RECAPTCHA";class Xge{constructor(e){this.type=Yge,this.auth=gu(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,s)=>{Dge(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)s(new Error("recaptcha Enterprise site key undefined"));else{const l=new Sge(u);return a.tenantId==null?a._agentRecaptchaConfig=l:a._tenantRecaptchaConfigs[a.tenantId]=l,o(l.siteKey)}}).catch(u=>{s(u)})})}function i(a,o,s){const u=window.grecaptcha;gM(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(l=>{o(l)}).catch(()=>{o(G5)})}):s(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Gge().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{r(this.auth).then(s=>{if(!n&&gM(window.grecaptcha))i(s,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=Vge();u.length!==0&&(u+=s),H5(u).then(()=>{i(s,a,o)}).catch(l=>{o(l)})}}).catch(s=>{o(s)})})}}async function EM(t,e,n,r=!1,i=!1){const a=new Xge(t);let o;if(i)o=G5;else try{o=await a.verify(n)}catch{o=await a.verify(n,!0)}const s=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in s){const u=s.phoneEnrollmentInfo.phoneNumber,l=s.phoneEnrollmentInfo.recaptchaToken;Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in s){const u=s.phoneSignInInfo.recaptchaToken;Object.assign(s,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return s}return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function Vb(t,e,n,r,i){var a;if(!((a=t._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await EM(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=await EM(t,e,n,n==="getOobCode");return r(t,s)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qge(t,e){const n=U_(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(al(a,e??{}))return i;ia(i,"already-initialized")}return n.initialize({options:e})}function Zge(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Do);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Jge(t,e,n){const r=gu(t);it(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=K5(e),{host:o,port:s}=e0e(e),u=s===null?"":`:${s}`,l={url:`${a}//${o}${u}/`},c=Object.freeze({host:o,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){it(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),it(al(l,r.config.emulator)&&al(c,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=c,r.settings.appVerificationDisabledForTesting=!0,t0e()}function K5(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function e0e(t){const e=K5(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:CM(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:CM(o)}}}function CM(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function t0e(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return So("not implemented")}_getIdTokenResponse(e){return So("not implemented")}_linkToIdToken(e,n){return So("not implemented")}_getReauthenticationResolver(e){return So("not implemented")}}async function n0e(t,e){return vu(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r0e(t,e){return lp(t,"POST","/v1/accounts:signInWithPassword",mu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i0e(t,e){return lp(t,"POST","/v1/accounts:signInWithEmailLink",mu(t,e))}async function a0e(t,e){return lp(t,"POST","/v1/accounts:signInWithEmailLink",mu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch extends Y_{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Ch(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ch(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vb(e,n,"signInWithPassword",r0e);case"emailLink":return i0e(e,{email:this._email,oobCode:this._password});default:ia(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vb(e,r,"signUpPassword",n0e);case"emailLink":return a0e(e,{idToken:n,email:this._email,oobCode:this._password});default:ia(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tc(t,e){return lp(t,"POST","/v1/accounts:signInWithIdp",mu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0e="http://localhost";class sl extends Y_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new sl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ia("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,a=W_(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new sl(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Tc(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Tc(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Tc(e,n)}buildRequest(){const e={requestUri:o0e,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Pf(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s0e(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function u0e(t){const e=bd(wd(t)).link,n=e?bd(wd(e)).deep_link_id:null,r=bd(wd(t)).deep_link_id;return(r?bd(wd(r)).link:null)||r||n||e||t}class X_{constructor(e){var n,r,i,a,o,s;const u=bd(wd(e)),l=(n=u.apiKey)!==null&&n!==void 0?n:null,c=(r=u.oobCode)!==null&&r!==void 0?r:null,f=s0e((i=u.mode)!==null&&i!==void 0?i:null);it(l&&c&&f,"argument-error"),this.apiKey=l,this.operation=f,this.code=c,this.continueUrl=(a=u.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(s=u.tenantId)!==null&&s!==void 0?s:null}static parseLink(e){const n=u0e(e);try{return new X_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(){this.providerId=Bf.PROVIDER_ID}static credential(e,n){return Ch._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=X_.parseLink(n);return it(r,"argument-error"),Ch._fromEmailAndCode(e,r.code,r.tenantId)}}Bf.PROVIDER_ID="password";Bf.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Bf.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp extends Q_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs extends cp{constructor(){super("facebook.com")}static credential(e){return sl._fromParams({providerId:vs.PROVIDER_ID,signInMethod:vs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vs.credentialFromTaggedObject(e)}static credentialFromError(e){return vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vs.credential(e.oauthAccessToken)}catch{return null}}}vs.FACEBOOK_SIGN_IN_METHOD="facebook.com";vs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo extends cp{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return sl._fromParams({providerId:bo.PROVIDER_ID,signInMethod:bo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return bo.credentialFromTaggedObject(e)}static credentialFromError(e){return bo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return bo.credential(n,r)}catch{return null}}}bo.GOOGLE_SIGN_IN_METHOD="google.com";bo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs extends cp{constructor(){super("github.com")}static credential(e){return sl._fromParams({providerId:gs.PROVIDER_ID,signInMethod:gs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gs.credentialFromTaggedObject(e)}static credentialFromError(e){return gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gs.credential(e.oauthAccessToken)}catch{return null}}}gs.GITHUB_SIGN_IN_METHOD="github.com";gs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys extends cp{constructor(){super("twitter.com")}static credential(e,n){return sl._fromParams({providerId:ys.PROVIDER_ID,signInMethod:ys.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ys.credentialFromTaggedObject(e)}static credentialFromError(e){return ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ys.credential(n,r)}catch{return null}}}ys.TWITTER_SIGN_IN_METHOD="twitter.com";ys.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l0e(t,e){return lp(t,"POST","/v1/accounts:signUp",mu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await ya._fromIdTokenResponse(e,r,i),o=NM(r);return new ul({user:a,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=NM(r);return new ul({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function NM(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg extends pu{constructor(e,n,r,i){var a;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,fg.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new fg(e,n,r,i)}}function Y5(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?fg._fromErrorAndOperation(t,a,e,r):a})}async function c0e(t,e,n=!1){const r=await Eh(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ul._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f0e(t,e,n=!1){const{auth:r}=t;if(Ei(r.app))return Promise.reject(Ro(r));const i="reauthenticate";try{const a=await Eh(t,Y5(r,i,e,t),n);it(a.idToken,r,"internal-error");const o=G_(a.idToken);it(o,r,"internal-error");const{sub:s}=o;return it(t.uid===s,r,"user-mismatch"),ul._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&ia(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X5(t,e,n=!1){if(Ei(t.app))return Promise.reject(Ro(t));const r="signIn",i=await Y5(t,r,e),a=await ul._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}async function d0e(t,e){return X5(gu(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q5(t){const e=gu(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function h0e(t,e,n){if(Ei(t.app))return Promise.reject(Ro(t));const r=gu(t),o=await Vb(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",l0e).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&Q5(t),u}),s=await ul._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(s.user),s}function p0e(t,e,n){return Ei(t.app)?Promise.reject(Ro(t)):d0e(Jr(t),Bf.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Q5(t),r})}function m0e(t,e,n,r){return Jr(t).onIdTokenChanged(e,n,r)}function v0e(t,e,n){return Jr(t).beforeAuthStateChanged(e,n)}function g0e(t,e,n,r){return Jr(t).onAuthStateChanged(e,n,r)}function y0e(t){return Jr(t).signOut()}const dg="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z5{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(dg,"1"),this.storage.removeItem(dg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0e=1e3,b0e=10;class J5 extends Z5{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=V5(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,s,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);Bge()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,b0e):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},x0e)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}J5.type="LOCAL";const w0e=J5;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e8 extends Z5{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}e8.type="SESSION";const t8=e8;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _0e(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Q0(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const s=Array.from(o).map(async l=>l(n.origin,a)),u=await _0e(s);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Q0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z_(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0e{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((s,u)=>{const l=Z_("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),s(d.data.response);break;default:clearTimeout(c),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xa(){return window}function C0e(t){Xa().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n8(){return typeof Xa().WorkerGlobalScope<"u"&&typeof Xa().importScripts=="function"}async function N0e(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function S0e(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function D0e(){return n8()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r8="firebaseLocalStorageDb",A0e=1,hg="firebaseLocalStorage",i8="fbase_key";class fp{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Z0(t,e){return t.transaction([hg],e?"readwrite":"readonly").objectStore(hg)}function T0e(){const t=indexedDB.deleteDatabase(r8);return new fp(t).toPromise()}function qb(){const t=indexedDB.open(r8,A0e);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(hg,{keyPath:i8})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(hg)?e(r):(r.close(),await T0e(),e(await qb()))})})}async function SM(t,e,n){const r=Z0(t,!0).put({[i8]:e,value:n});return new fp(r).toPromise()}async function M0e(t,e){const n=Z0(t,!1).get(e),r=await new fp(n).toPromise();return r===void 0?null:r.value}function DM(t,e){const n=Z0(t,!0).delete(e);return new fp(n).toPromise()}const I0e=800,R0e=3;class a8{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await qb(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>R0e)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return n8()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Q0._getInstance(D0e()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await N0e(),!this.activeServiceWorker)return;this.sender=new E0e(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||S0e()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await qb();return await SM(e,dg,"1"),await DM(e,dg),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>SM(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>M0e(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>DM(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=Z0(i,!1).getAll();return new fp(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),I0e)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}a8.type="LOCAL";const k0e=a8;new up(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o8(t,e){return e?Do(e):(it(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_ extends Y_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Tc(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Tc(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Tc(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function F0e(t){return X5(t.auth,new J_(t),t.bypassAuthState)}function P0e(t){const{auth:e,user:n}=t;return it(n,e,"internal-error"),f0e(n,new J_(t),t.bypassAuthState)}async function O0e(t){const{auth:e,user:n}=t;return it(n,e,"internal-error"),c0e(n,new J_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s8{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:o,type:s}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(u))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return F0e;case"linkViaPopup":case"linkViaRedirect":return O0e;case"reauthViaPopup":case"reauthViaRedirect":return P0e;default:ia(this.auth,"internal-error")}}resolve(e){Wo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0e=new up(2e3,1e4);async function L0e(t,e,n){if(Ei(t.app))return Promise.reject(Na(t,"operation-not-supported-in-this-environment"));const r=gu(t);gge(t,e,Q_);const i=o8(r,n);return new zu(r,"signInViaPopup",e,i).executeNotNull()}class zu extends s8{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,zu.currentPopupAction&&zu.currentPopupAction.cancel(),zu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return it(e,this.auth,"internal-error"),e}async onExecution(){Wo(this.filter.length===1,"Popup operations only handle one event");const e=Z_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Na(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Na(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,zu.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Na(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,B0e.get())};e()}}zu.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0e="pendingRedirect",Zm=new Map;class $0e extends s8{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Zm.get(this.auth._key());if(!e){try{const r=await z0e(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Zm.set(this.auth._key(),e)}return this.bypassAuthState||Zm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function z0e(t,e){const n=V0e(e),r=W0e(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function U0e(t,e){Zm.set(t._key(),e)}function W0e(t){return Do(t._redirectPersistence)}function V0e(t){return Qm(j0e,t.config.apiKey,t.name)}async function q0e(t,e,n=!1){if(Ei(t.app))return Promise.reject(Ro(t));const r=gu(t),i=o8(r,e),o=await new $0e(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0e=10*60*1e3;class G0e{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!K0e(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!u8(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Na(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=H0e&&this.cachedEventUids.clear(),this.cachedEventUids.has(AM(e))}saveEventToCache(e){this.cachedEventUids.add(AM(e)),this.lastProcessedEventTime=Date.now()}}function AM(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function u8({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function K0e(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return u8(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y0e(t,e={}){return vu(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0e=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Q0e=/^https?/;async function Z0e(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Y0e(t);for(const n of e)try{if(J0e(n))return}catch{}ia(t,"unauthorized-domain")}function J0e(t){const e=Ub(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Q0e.test(n))return!1;if(X0e.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eye=new up(3e4,6e4);function TM(){const t=Xa().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function tye(t){return new Promise((e,n)=>{var r,i,a;function o(){TM(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{TM(),n(Na(t,"network-request-failed"))},timeout:eye.get()})}if(!((i=(r=Xa().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=Xa().gapi)===null||a===void 0)&&a.load)o();else{const s=Hge("iframefcb");return Xa()[s]=()=>{gapi.load?o():n(Na(t,"network-request-failed"))},H5(`${qge()}?onload=${s}`).catch(u=>n(u))}}).catch(e=>{throw Jm=null,e})}let Jm=null;function nye(t){return Jm=Jm||tye(t),Jm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rye=new up(5e3,15e3),iye="__/auth/iframe",aye="emulator/auth/iframe",oye={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sye=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uye(t){const e=t.config;it(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?H_(e,aye):`https://${t.config.authDomain}/${iye}`,r={apiKey:e.apiKey,appName:t.name,v:Of},i=sye.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Pf(r).slice(1)}`}async function lye(t){const e=await nye(t),n=Xa().gapi;return it(n,t,"internal-error"),e.open({where:document.body,url:uye(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:oye,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const o=Na(t,"network-request-failed"),s=Xa().setTimeout(()=>{a(o)},rye.get());function u(){Xa().clearTimeout(s),i(r)}r.ping(u).then(u,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cye={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},fye=500,dye=600,hye="_blank",pye="http://localhost";class MM{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function mye(t,e,n,r=fye,i=dye){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let s="";const u=Object.assign(Object.assign({},cye),{width:r.toString(),height:i.toString(),top:a,left:o}),l=Gr().toLowerCase();n&&(s=j5(l)?hye:n),B5(l)&&(e=e||pye,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(Oge(l)&&s!=="_self")return vye(e||"",s),new MM(null);const f=window.open(e||"",s,c);it(f,t,"popup-blocked");try{f.focus()}catch{}return new MM(f)}function vye(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gye="__/auth/handler",yye="emulator/auth/handler",xye=encodeURIComponent("fac");async function IM(t,e,n,r,i,a){it(t.config.authDomain,t,"auth-domain-config-required"),it(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Of,eventId:i};if(e instanceof Q_){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Ob(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,f]of Object.entries({}))o[c]=f}if(e instanceof cp){const c=e.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}t.tenantId&&(o.tid=t.tenantId);const s=o;for(const c of Object.keys(s))s[c]===void 0&&delete s[c];const u=await t._getAppCheckToken(),l=u?`#${xye}=${encodeURIComponent(u)}`:"";return`${bye(t)}?${Pf(s).slice(1)}${l}`}function bye({config:t}){return t.emulator?H_(t,yye):`https://${t.authDomain}/${gye}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1="webStorageSupport";class wye{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=t8,this._completeRedirectFn=q0e,this._overrideRedirectResult=U0e}async _openPopup(e,n,r,i){var a;Wo((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await IM(e,n,r,Ub(),i);return mye(e,o,Z_())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await IM(e,n,r,Ub(),i);return C0e(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(Wo(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await lye(e),r=new G0e(e);return n.register("authEvent",i=>(it(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(x1,{type:x1},i=>{var a;const o=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[x1];o!==void 0&&n(!!o),ia(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Z0e(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return V5()||L5()||K_()}}const _ye=wye;var RM="@firebase/auth",kM="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eye{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){it(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cye(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Nye(t){af(new ol("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:s}=r.options;it(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:s,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:q5(t)},l=new Uge(r,i,a,u);return Zge(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),af(new ol("auth-internal",e=>{const n=gu(e.getProvider("auth").getImmediate());return(r=>new Eye(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ls(RM,kM,Cye(t)),Ls(RM,kM,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sye=5*60,Dye=b5("authIdTokenMaxAge")||Sye;let FM=null;const Aye=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Dye)return;const i=n==null?void 0:n.token;FM!==i&&(FM=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Tye(t=D5()){const e=U_(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Qge(t,{popupRedirectResolver:_ye,persistence:[k0e,w0e,t8]}),r=b5("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=Aye(a.toString());v0e(n,o,()=>o(n.currentUser)),m0e(n,s=>o(s))}}const i=y5("auth");return i&&Jge(n,`http://${i}`),n}function Mye(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Wge({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=Na("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",Mye().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Nye("Browser");var Iye="firebase",Rye="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ls(Iye,Rye,"app");var PM={};const OM="@firebase/database",BM="1.0.14";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let l8="";function kye(t){l8=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fye{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),nr(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:wh(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pye{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Qo(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c8=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Fye(e)}}catch{}return new Pye},Uu=c8("localStorage"),Oye=c8("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mc=new $_("@firebase/database"),Bye=function(){let t=1;return function(){return t++}}(),f8=function(t){const e=ove(t),n=new nve;n.update(e);const r=n.digest();return O_.encodeByteArray(r)},dp=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=dp.apply(null,r):typeof r=="object"?e+=nr(r):e+=r,e+=" "}return e};let Od=null,LM=!0;const Lye=function(t,e){Be(!e,"Can't turn on custom loggers persistently."),Mc.logLevel=Xt.VERBOSE,Od=Mc.log.bind(Mc)},Ar=function(...t){if(LM===!0&&(LM=!1,Od===null&&Oye.get("logging_enabled")===!0&&Lye()),Od){const e=dp.apply(null,t);Od(e)}},hp=function(t){return function(...e){Ar(t,...e)}},Hb=function(...t){const e="FIREBASE INTERNAL ERROR: "+dp(...t);Mc.error(e)},Vo=function(...t){const e=`FIREBASE FATAL ERROR: ${dp(...t)}`;throw Mc.error(e),new Error(e)},pi=function(...t){const e="FIREBASE WARNING: "+dp(...t);Mc.warn(e)},jye=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&pi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},d8=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},$ye=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},of="[MIN_NAME]",ll="[MAX_NAME]",Lf=function(t,e){if(t===e)return 0;if(t===of||e===ll)return-1;if(e===of||t===ll)return 1;{const n=jM(t),r=jM(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},zye=function(t,e){return t===e?0:t<e?-1:1},id=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+nr(e))},eE=function(t){if(typeof t!="object"||t===null)return nr(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=nr(e[r]),n+=":",n+=eE(t[e[r]]);return n+="}",n},h8=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function gi(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const p8=function(t){Be(!d8(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,a,o,s,u;t===0?(a=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(s=Math.min(Math.floor(Math.log(t)/Math.LN2),r),a=s+r,o=Math.round(t*Math.pow(2,n-s)-Math.pow(2,n))):(a=0,o=Math.round(t/Math.pow(2,1-r-n))));const l=[];for(u=n;u;u-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(u=e;u;u-=1)l.push(a%2?1:0),a=Math.floor(a/2);l.push(i?1:0),l.reverse();const c=l.join("");let f="";for(u=0;u<64;u+=8){let d=parseInt(c.substr(u,8),2).toString(16);d.length===1&&(d="0"+d),f=f+d}return f.toLowerCase()},Uye=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Wye=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Vye(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const qye=new RegExp("^-?(0*)\\d{1,10}$"),Hye=-2147483648,Gye=2147483647,jM=function(t){if(qye.test(t)){const e=Number(t);if(e>=Hye&&e<=Gye)return e}return null},jf=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw pi("Exception was thrown by user callback.",n),e},Math.floor(0))}},Kye=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Bd=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yye{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,Ei(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){pi(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xye{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Ar("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',pi(e)}}class ev{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}ev.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE="5",m8="v",v8="s",g8="r",y8="f",x8=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,b8="ls",w8="p",Gb="ac",_8="websocket",E8="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C8{constructor(e,n,r,i,a=!1,o="",s=!1,u=!1,l=null){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.isUsingEmulator=u,this.emulatorOptions=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Uu.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Uu.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function Qye(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function N8(t,e,n){Be(typeof e=="string","typeof type must == string"),Be(typeof n=="object","typeof params must == object");let r;if(e===_8)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===E8)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Qye(t)&&(n.ns=t.namespace);const i=[];return gi(n,(a,o)=>{i.push(a+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zye{constructor(){this.counters_={}}incrementCounter(e,n=1){Qo(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Lme(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1={},w1={};function nE(t){const e=t.toString();return b1[e]||(b1[e]=new Zye),b1[e]}function Jye(t,e){const n=t.toString();return w1[n]||(w1[n]=e()),w1[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1e{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&jf(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $M="start",t1e="close",n1e="pLPCommand",r1e="pRTLPCB",S8="id",D8="pw",A8="ser",i1e="cb",a1e="seg",o1e="ts",s1e="d",u1e="dframe",T8=1870,M8=30,l1e=T8-M8,c1e=25e3,f1e=3e4;class dc{constructor(e,n,r,i,a,o,s){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=hp(e),this.stats_=nE(n),this.urlFn=u=>(this.appCheckToken&&(u[Gb]=this.appCheckToken),N8(n,E8,u))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new e1e(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(f1e)),$ye(()=>{if(this.isClosed_)return;this.scriptTagHolder=new rE((...a)=>{const[o,s,u,l,c]=a;if(this.incrementIncomingBytes_(a),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===$M)this.id=s,this.password=u;else if(o===t1e)s?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(s,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...a)=>{const[o,s]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(o,s)},()=>{this.onClosed_()},this.urlFn);const r={};r[$M]="t",r[A8]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[i1e]=this.scriptTagHolder.uniqueCallbackIdentifier),r[m8]=tE,this.transportSessionId&&(r[v8]=this.transportSessionId),this.lastSessionId&&(r[b8]=this.lastSessionId),this.applicationId&&(r[w8]=this.applicationId),this.appCheckToken&&(r[Gb]=this.appCheckToken),typeof location<"u"&&location.hostname&&x8.test(location.hostname)&&(r[g8]=y8);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){dc.forceAllow_=!0}static forceDisallow(){dc.forceDisallow_=!0}static isAvailable(){return dc.forceAllow_?!0:!dc.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Uye()&&!Wye()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=nr(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=v5(n),i=h8(r,l1e);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[u1e]="t",r[S8]=e,r[D8]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=nr(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class rE{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Bye(),window[n1e+this.uniqueCallbackIdentifier]=e,window[r1e+this.uniqueCallbackIdentifier]=n,this.myIFrame=rE.createIFrame_();let a="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(a='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(s){Ar("frame writing exception"),s.stack&&Ar(s.stack),Ar(s)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ar("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[S8]=this.myID,e[D8]=this.myPW,e[A8]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+M8+r.length<=T8;){const o=this.pendingSegs.shift();r=r+"&"+a1e+i+"="+o.seg+"&"+o1e+i+"="+o.ts+"&"+s1e+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(c1e)),a=()=>{clearTimeout(i),r()};this.addTag(e,a)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Ar("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1e=16384,h1e=45e3;let pg=null;typeof MozWebSocket<"u"?pg=MozWebSocket:typeof WebSocket<"u"&&(pg=WebSocket);class ga{constructor(e,n,r,i,a,o,s){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=hp(this.connId),this.stats_=nE(n),this.connURL=ga.connectionURL_(n,o,s,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,a){const o={};return o[m8]=tE,typeof location<"u"&&location.hostname&&x8.test(location.hostname)&&(o[g8]=y8),n&&(o[v8]=n),r&&(o[b8]=r),i&&(o[Gb]=i),a&&(o[w8]=a),N8(e,_8,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Uu.set("previous_websocket_failure",!0);try{let r;_5(),this.mySock=new pg(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){ga.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&pg!==null&&!ga.forceDisallow_}static previouslyFailed(){return Uu.isInMemoryStorage||Uu.get("previous_websocket_failure")===!0}markConnectionHealthy(){Uu.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=wh(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Be(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=nr(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=h8(n,d1e);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(h1e))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ga.responsesRequiredToBeHealthy=2;ga.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{static get ALL_TRANSPORTS(){return[dc,ga]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=ga&&ga.isAvailable();let r=n&&!ga.previouslyFailed();if(e.webSocketOnly&&(n||pi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[ga];else{const i=this.transports_=[];for(const a of Nh.ALL_TRANSPORTS)a&&a.isAvailable()&&i.push(a);Nh.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Nh.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1e=6e4,m1e=5e3,v1e=10*1024,g1e=100*1024,_1="t",zM="d",y1e="s",UM="r",x1e="e",WM="o",VM="a",qM="n",HM="p",b1e="h";class w1e{constructor(e,n,r,i,a,o,s,u,l,c){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=u,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=hp("c:"+this.id+":"),this.transportManager_=new Nh(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Bd(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>g1e?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>v1e?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(_1 in e){const n=e[_1];n===VM?this.upgradeIfSecondaryHealthy_():n===UM?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===WM&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=id("t",e),r=id("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:HM,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:VM,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:qM,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=id("t",e),r=id("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=id(_1,e);if(zM in e){const r=e[zM];if(n===b1e){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===qM){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===y1e?this.onConnectionShutdown_(r):n===UM?this.onReset_(r):n===x1e?Hb("Server Error: "+r):n===WM?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Hb("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),tE!==r&&pi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Bd(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(p1e))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Bd(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(m1e))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:HM,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Uu.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I8{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R8{constructor(e){this.allowedEvents_=e,this.listeners_={},Be(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===n&&(!r||r===i[a].context)){i.splice(a,1);return}}validateEventType_(e){Be(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg extends R8{static getInstance(){return new mg}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!L_()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return Be(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GM=32,KM=768;class en{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function jt(){return new en("")}function Nt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Ys(t){return t.pieces_.length-t.pieceNum_}function nn(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new en(t.pieces_,e)}function k8(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function _1e(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function F8(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function P8(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new en(e,0)}function $n(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof en)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new en(n,0)}function Tt(t){return t.pieceNum_>=t.pieces_.length}function oi(t,e){const n=Nt(t),r=Nt(e);if(n===null)return e;if(n===r)return oi(nn(t),nn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function iE(t,e){if(Ys(t)!==Ys(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function xa(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Ys(t)>Ys(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class E1e{constructor(e,n){this.errorPrefix_=n,this.parts_=F8(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Y0(this.parts_[r]);O8(this)}}function C1e(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Y0(e),O8(t)}function N1e(t){const e=t.parts_.pop();t.byteLength_-=Y0(e),t.parts_.length>0&&(t.byteLength_-=1)}function O8(t){if(t.byteLength_>KM)throw new Error(t.errorPrefix_+"has a key path longer than "+KM+" bytes ("+t.byteLength_+").");if(t.parts_.length>GM)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+GM+") or object contains a cycle "+Tu(t))}function Tu(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE extends R8{static getInstance(){return new aE}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return Be(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ad=1e3,S1e=60*5*1e3,YM=30*1e3,D1e=1.3,A1e=3e4,T1e="server_kill",XM=3;class ko extends I8{constructor(e,n,r,i,a,o,s,u){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=a,this.authTokenProvider_=o,this.appCheckTokenProvider_=s,this.authOverride_=u,this.id=ko.nextPersistentConnectionId_++,this.log_=hp("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ad,this.maxReconnectDelay_=S1e,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u&&!_5())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");aE.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&mg.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,a={r:i,a:e,b:n};this.log_(nr(a)),Be(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new K0,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const s=o.d;o.s==="ok"?n.resolve(s):n.reject(s)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const a=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(a),n.promise}listen(e,n,r,i){this.initConnection_();const a=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+a),this.listens.has(o)||this.listens.set(o,new Map),Be(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Be(!this.listens.get(o).has(a),"listen() called twice for same path/queryId.");const s={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(a,s),this.connected_&&this.sendListen_(s)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const a={p:r},o="q";e.tag&&(a.q=n._queryObject,a.t=e.tag),a.h=e.hashFn(),this.sendRequest(o,a,s=>{const u=s.d,l=s.s;ko.warnOnListenWarnings_(u,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",s),l!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(l,u))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Qo(e,"w")){const r=rf(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',a=n._path.toString();pi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${a} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||tve(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=YM)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=eve(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const a=i.s,o=i.d||"error";this.authToken_===e&&(a==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(a,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),Be(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const a={p:e},o="n";i&&(a.q=r,a.t=i),this.sendRequest(o,a)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const a={p:n,d:r};this.log_("onDisconnect "+e,a),this.sendRequest(e,a,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,a){this.initConnection_();const o={p:n,d:r};a!==void 0&&(o.h=a),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const s=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(s):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,a=>{this.log_(n+" response",a),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(a.s,a.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const a=r.d;this.log_("reportStats","Error sending stats: "+a)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+nr(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Hb("Unrecognized action received from server: "+nr(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Be(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ad,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ad,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>A1e&&(this.reconnectDelay_=ad),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*D1e)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+ko.nextConnectionId_++,a=this.lastSessionId;let o=!1,s=null;const u=function(){s?s.close():(o=!0,r())},l=function(f){Be(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(f)};this.realtime_={close:u,sendRequest:l};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[f,d]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);o?Ar("getToken() completed but was canceled"):(Ar("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=d&&d.token,s=new w1e(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,h=>{pi(h+" ("+this.repoInfo_.toString()+")"),this.interrupt(T1e)},a))}catch(f){this.log_("Failed to get token: "+f),o||(this.repoInfo_.nodeAdmin&&pi(f),u())}}}interrupt(e){Ar("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Ar("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Ob(this.interruptReasons_)&&(this.reconnectDelay_=ad,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(a=>eE(a)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new en(e).toString();let i;if(this.listens.has(r)){const a=this.listens.get(r);i=a.get(n),a.delete(n),a.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){Ar("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=XM&&(this.reconnectDelay_=YM,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Ar("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=XM&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+l8.replace(/\./g,"-")]=1,L_()?e["framework.cordova"]=1:w5()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=mg.getInstance().currentlyOnline();return Ob(this.interruptReasons_)&&e}}ko.nextPersistentConnectionId_=0;ko.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Dt(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Dt(of,e),i=new Dt(of,n);return this.compare(r,i)!==0}minPost(){return Dt.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gm;class B8 extends J0{static get __EMPTY_NODE(){return gm}static set __EMPTY_NODE(e){gm=e}compare(e,n){return Lf(e.name,n.name)}isDefinedOn(e){throw Ff("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Dt.MIN}maxPost(){return new Dt(ll,gm)}makePost(e,n){return Be(typeof e=="string","KeyIndex indexValue must always be a string."),new Dt(e,gm)}toString(){return".key"}}const Ic=new B8;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e,n,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class tr{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??tr.RED,this.left=i??si.EMPTY_NODE,this.right=a??si.EMPTY_NODE}copy(e,n,r,i,a){return new tr(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return a<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return si.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return si.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,tr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,tr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}tr.RED=!0;tr.BLACK=!1;class M1e{copy(e,n,r,i,a){return this}insert(e,n,r){return new tr(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class si{constructor(e,n=si.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new si(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,tr.BLACK,null,null))}remove(e){return new si(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,tr.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ym(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new ym(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new ym(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new ym(this.root_,null,this.comparator_,!0,e)}}si.EMPTY_NODE=new M1e;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I1e(t,e){return Lf(t.name,e.name)}function oE(t,e){return Lf(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kb;function R1e(t){Kb=t}const L8=function(t){return typeof t=="number"?"number:"+p8(t):"string:"+t},j8=function(t){if(t.isLeafNode()){const e=t.val();Be(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Qo(e,".sv"),"Priority must be a string or number.")}else Be(t===Kb||t.isEmpty(),"priority of unexpected type.");Be(t===Kb||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let QM;class Jn{static set __childrenNodeConstructor(e){QM=e}static get __childrenNodeConstructor(){return QM}constructor(e,n=Jn.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Be(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),j8(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Jn(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Jn.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Tt(e)?this:Nt(e)===".priority"?this.priorityNode_:Jn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Jn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Nt(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(Be(r!==".priority"||Ys(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Jn.__childrenNodeConstructor.EMPTY_NODE.updateChild(nn(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+L8(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=p8(this.value_):e+=this.value_,this.lazyHash_=f8(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Jn.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Jn.__childrenNodeConstructor?-1:(Be(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=Jn.VALUE_TYPE_ORDER.indexOf(n),a=Jn.VALUE_TYPE_ORDER.indexOf(r);return Be(i>=0,"Unknown leaf type: "+n),Be(a>=0,"Unknown leaf type: "+r),i===a?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:a-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Jn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $8,z8;function k1e(t){$8=t}function F1e(t){z8=t}class P1e extends J0{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),a=r.compareTo(i);return a===0?Lf(e.name,n.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Dt.MIN}maxPost(){return new Dt(ll,new Jn("[PRIORITY-POST]",z8))}makePost(e,n){const r=$8(e);return new Dt(n,new Jn("[PRIORITY-POST]",r))}toString(){return".priority"}}const Sn=new P1e;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1e=Math.log(2);class B1e{constructor(e){const n=a=>parseInt(Math.log(a)/O1e,10),r=a=>parseInt(Array(a+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const vg=function(t,e,n,r){t.sort(e);const i=function(u,l){const c=l-u;let f,d;if(c===0)return null;if(c===1)return f=t[u],d=n?n(f):f,new tr(d,f.node,tr.BLACK,null,null);{const h=parseInt(c/2,10)+u,p=i(u,h),m=i(h+1,l);return f=t[h],d=n?n(f):f,new tr(d,f.node,tr.BLACK,p,m)}},a=function(u){let l=null,c=null,f=t.length;const d=function(p,m){const g=f-p,v=f;f-=p;const x=i(g+1,v),y=t[g],b=n?n(y):y;h(new tr(b,y.node,m,null,x))},h=function(p){l?(l.left=p,l=p):(c=p,l=p)};for(let p=0;p<u.count;++p){const m=u.nextBitIsOne(),g=Math.pow(2,u.count-(p+1));m?d(g,tr.BLACK):(d(g,tr.BLACK),d(g,tr.RED))}return c},o=new B1e(t.length),s=a(o);return new si(r||e,s)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let E1;const Wl={};class Ao{static get Default(){return Be(Wl&&Sn,"ChildrenNode.ts has not been loaded"),E1=E1||new Ao({".priority":Wl},{".priority":Sn}),E1}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=rf(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof si?n:null}hasIndex(e){return Qo(this.indexSet_,e.toString())}addIndex(e,n){Be(e!==Ic,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=n.getIterator(Dt.Wrap);let o=a.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=a.getNext();let s;i?s=vg(r,e.getCompare()):s=Wl;const u=e.toString(),l=Object.assign({},this.indexSet_);l[u]=e;const c=Object.assign({},this.indexes_);return c[u]=s,new Ao(c,l)}addToIndexes(e,n){const r=og(this.indexes_,(i,a)=>{const o=rf(this.indexSet_,a);if(Be(o,"Missing index implementation for "+a),i===Wl)if(o.isDefinedOn(e.node)){const s=[],u=n.getIterator(Dt.Wrap);let l=u.getNext();for(;l;)l.name!==e.name&&s.push(l),l=u.getNext();return s.push(e),vg(s,o.getCompare())}else return Wl;else{const s=n.get(e.name);let u=i;return s&&(u=u.remove(new Dt(e.name,s))),u.insert(e,e.node)}});return new Ao(r,this.indexSet_)}removeFromIndexes(e,n){const r=og(this.indexes_,i=>{if(i===Wl)return i;{const a=n.get(e.name);return a?i.remove(new Dt(e.name,a)):i}});return new Ao(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let od;class at{static get EMPTY_NODE(){return od||(od=new at(new si(oE),null,Ao.Default))}constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&j8(this.priorityNode_),this.children_.isEmpty()&&Be(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||od}updatePriority(e){return this.children_.isEmpty()?this:new at(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?od:n}}getChild(e){const n=Nt(e);return n===null?this:this.getImmediateChild(n).getChild(nn(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(Be(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Dt(e,n);let i,a;n.isEmpty()?(i=this.children_.remove(e),a=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),a=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?od:this.priorityNode_;return new at(i,o,a)}}updateChild(e,n){const r=Nt(e);if(r===null)return n;{Be(Nt(e)!==".priority"||Ys(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(nn(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,a=!0;if(this.forEachChild(Sn,(o,s)=>{n[o]=s.val(e),r++,a&&at.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1}),!e&&a&&i<2*r){const o=[];for(const s in n)o[s]=n[s];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+L8(this.getPriority().val())+":"),this.forEachChild(Sn,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":f8(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const a=i.getPredecessorKey(new Dt(e,n));return a?a.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Dt(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Dt(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,Dt.Wrap);let a=i.peek();for(;a!=null&&n.compare(a,e)<0;)i.getNext(),a=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,Dt.Wrap);let a=i.peek();for(;a!=null&&n.compare(a,e)>0;)i.getNext(),a=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===pp?-1:0}withIndex(e){if(e===Ic||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new at(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Ic||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Sn),i=n.getIterator(Sn);let a=r.getNext(),o=i.getNext();for(;a&&o;){if(a.name!==o.name||!a.node.equals(o.node))return!1;a=r.getNext(),o=i.getNext()}return a===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Ic?null:this.indexMap_.get(e.toString())}}at.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class L1e extends at{constructor(){super(new si(oE),at.EMPTY_NODE,Ao.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return at.EMPTY_NODE}isEmpty(){return!1}}const pp=new L1e;Object.defineProperties(Dt,{MIN:{value:new Dt(of,at.EMPTY_NODE)},MAX:{value:new Dt(ll,pp)}});B8.__EMPTY_NODE=at.EMPTY_NODE;Jn.__childrenNodeConstructor=at;R1e(pp);F1e(pp);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1e=!0;function dr(t,e=null){if(t===null)return at.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),Be(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Jn(n,dr(e))}if(!(t instanceof Array)&&j1e){const n=[];let r=!1;if(gi(t,(o,s)=>{if(o.substring(0,1)!=="."){const u=dr(s);u.isEmpty()||(r=r||!u.getPriority().isEmpty(),n.push(new Dt(o,u)))}}),n.length===0)return at.EMPTY_NODE;const a=vg(n,I1e,o=>o.name,oE);if(r){const o=vg(n,Sn.getCompare());return new at(a,dr(e),new Ao({".priority":o},{".priority":Sn}))}else return new at(a,dr(e),Ao.Default)}else{let n=at.EMPTY_NODE;return gi(t,(r,i)=>{if(Qo(t,r)&&r.substring(0,1)!=="."){const a=dr(i);(a.isLeafNode()||!a.isEmpty())&&(n=n.updateImmediateChild(r,a))}}),n.updatePriority(dr(e))}}k1e(dr);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1e extends J0{constructor(e){super(),this.indexPath_=e,Be(!Tt(e)&&Nt(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),a=r.compareTo(i);return a===0?Lf(e.name,n.name):a}makePost(e,n){const r=dr(e),i=at.EMPTY_NODE.updateChild(this.indexPath_,r);return new Dt(n,i)}maxPost(){const e=at.EMPTY_NODE.updateChild(this.indexPath_,pp);return new Dt(ll,e)}toString(){return F8(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1e extends J0{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Lf(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Dt.MIN}maxPost(){return Dt.MAX}makePost(e,n){const r=dr(e);return new Dt(n,r)}toString(){return".value"}}const U1e=new z1e;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U8(t){return{type:"value",snapshotNode:t}}function sf(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Sh(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Dh(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function W1e(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(e){this.index_=e}updateChild(e,n,r,i,a,o){Be(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const s=e.getImmediateChild(n);return s.getChild(i).equals(r.getChild(i))&&s.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Sh(n,s)):Be(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(sf(n,r)):o.trackChildChange(Dh(n,r,s))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Sn,(i,a)=>{n.hasChild(i)||r.trackChildChange(Sh(i,a))}),n.isLeafNode()||n.forEachChild(Sn,(i,a)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(a)||r.trackChildChange(Dh(i,a,o))}else r.trackChildChange(sf(i,a))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?at.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e){this.indexedFilter_=new sE(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Ah.getStartPost_(e),this.endPost_=Ah.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,a,o){return this.matches(new Dt(n,r))||(r=at.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,a,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=at.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(at.EMPTY_NODE);const a=this;return n.forEachChild(Sn,(o,s)=>{a.matches(new Dt(o,s))||(i=i.updateImmediateChild(o,at.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1e{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Ah(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,a,o){return this.rangedFilter_.matches(new Dt(n,r))||(r=at.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,a,o):this.fullLimitUpdateChild_(e,n,r,a,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=at.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=at.EMPTY_NODE.withIndex(this.index_);let a;this.reverse_?a=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):a=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;a.hasNext()&&o<this.limit_;){const s=a.getNext();if(this.withinDirectionalStart(s))if(this.withinDirectionalEnd(s))i=i.updateImmediateChild(s.name,s.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(at.EMPTY_NODE);let a;this.reverse_?a=i.getReverseIterator(this.index_):a=i.getIterator(this.index_);let o=0;for(;a.hasNext();){const s=a.getNext();o<this.limit_&&this.withinDirectionalStart(s)&&this.withinDirectionalEnd(s)?o++:i=i.updateImmediateChild(s.name,at.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,a){let o;if(this.reverse_){const f=this.index_.getCompare();o=(d,h)=>f(h,d)}else o=this.index_.getCompare();const s=e;Be(s.numChildren()===this.limit_,"");const u=new Dt(n,r),l=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),c=this.rangedFilter_.matches(u);if(s.hasChild(n)){const f=s.getImmediateChild(n);let d=i.getChildAfterChild(this.index_,l,this.reverse_);for(;d!=null&&(d.name===n||s.hasChild(d.name));)d=i.getChildAfterChild(this.index_,d,this.reverse_);const h=d==null?1:o(d,u);if(c&&!r.isEmpty()&&h>=0)return a!=null&&a.trackChildChange(Dh(n,r,f)),s.updateImmediateChild(n,r);{a!=null&&a.trackChildChange(Sh(n,f));const m=s.updateImmediateChild(n,at.EMPTY_NODE);return d!=null&&this.rangedFilter_.matches(d)?(a!=null&&a.trackChildChange(sf(d.name,d.node)),m.updateImmediateChild(d.name,d.node)):m}}else return r.isEmpty()?e:c&&o(l,u)>=0?(a!=null&&(a.trackChildChange(Sh(l.name,l.node)),a.trackChildChange(sf(n,r))),s.updateImmediateChild(n,r).updateImmediateChild(l.name,at.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Sn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Be(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Be(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:of}hasEnd(){return this.endSet_}getIndexEndValue(){return Be(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Be(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ll}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Be(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Sn}copy(){const e=new uE;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function q1e(t){return t.loadsAllData()?new sE(t.getIndex()):t.hasLimit()?new V1e(t):new Ah(t)}function ZM(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Sn?n="$priority":t.index_===U1e?n="$value":t.index_===Ic?n="$key":(Be(t.index_ instanceof $1e,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=nr(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=nr(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+nr(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=nr(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+nr(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function JM(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Sn&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg extends I8{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(Be(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=hp("p:rest:"),this.listens_={}}listen(e,n,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const o=gg.getListenId_(e,r),s={};this.listens_[o]=s;const u=ZM(e._queryParams);this.restRequest_(a+".json",u,(l,c)=>{let f=c;if(l===404&&(f=null,l=null),l===null&&this.onDataUpdate_(a,f,!1,r),rf(this.listens_,o)===s){let d;l?l===401?d="permission_denied":d="rest_error:"+l:d="ok",i(d,null)}})}unlisten(e,n){const r=gg.getListenId_(e,n);delete this.listens_[r]}get(e){const n=ZM(e._queryParams),r=e._path.toString(),i=new K0;return this.restRequest_(r+".json",n,(a,o)=>{let s=o;a===404&&(s=null,a=null),a===null?(this.onDataUpdate_(r,s,!1,null),i.resolve(s)):i.reject(new Error(s))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(n.auth=i.accessToken),a&&a.token&&(n.ac=a.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Pf(n);this.log_("Sending REST request for "+o);const s=new XMLHttpRequest;s.onreadystatechange=()=>{if(r&&s.readyState===4){this.log_("REST Response for "+o+" received. status:",s.status,"response:",s.responseText);let u=null;if(s.status>=200&&s.status<300){try{u=wh(s.responseText)}catch{pi("Failed to parse JSON response for "+o+": "+s.responseText)}r(null,u)}else s.status!==401&&s.status!==404&&pi("Got unsuccessful REST response for "+o+" Status: "+s.status),r(s.status);r=null}},s.open("GET",o,!0),s.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1e{constructor(){this.rootNode_=at.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yg(){return{value:null,children:new Map}}function W8(t,e,n){if(Tt(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Nt(e);t.children.has(r)||t.children.set(r,yg());const i=t.children.get(r);e=nn(e),W8(i,e,n)}}function Yb(t,e,n){t.value!==null?n(e,t.value):G1e(t,(r,i)=>{const a=new en(e.toString()+"/"+r);Yb(i,a,n)})}function G1e(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1e{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&gi(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI=10*1e3,Y1e=30*1e3,X1e=5*60*1e3;class Q1e{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new K1e(e);const r=eI+(Y1e-eI)*Math.random();Bd(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;gi(e,(i,a)=>{a>0&&Qo(this.statsToReport_,i)&&(n[i]=a,r=!0)}),r&&this.server_.reportStats(n),Bd(this.reportStats_.bind(this),Math.floor(Math.random()*2*X1e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ba;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(ba||(ba={}));function V8(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function lE(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function cE(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=ba.ACK_USER_WRITE,this.source=V8()}operationForChild(e){if(Tt(this.path)){if(this.affectedTree.value!=null)return Be(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new en(e));return new xg(jt(),n,this.revert)}}else return Be(Nt(this.path)===e,"operationForChild called for unrelated child."),new xg(nn(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,n){this.source=e,this.path=n,this.type=ba.LISTEN_COMPLETE}operationForChild(e){return Tt(this.path)?new Th(this.source,jt()):new Th(this.source,nn(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=ba.OVERWRITE}operationForChild(e){return Tt(this.path)?new cl(this.source,jt(),this.snap.getImmediateChild(e)):new cl(this.source,nn(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=ba.MERGE}operationForChild(e){if(Tt(this.path)){const n=this.children.subtree(new en(e));return n.isEmpty()?null:n.value?new cl(this.source,jt(),n.value):new Mh(this.source,jt(),n)}else return Be(Nt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Mh(this.source,nn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Tt(e))return this.isFullyInitialized()&&!this.filtered_;const n=Nt(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1e{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function J1e(t,e,n,r){const i=[],a=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&a.push(W1e(o.childName,o.snapshotNode))}),sd(t,i,"child_removed",e,r,n),sd(t,i,"child_added",e,r,n),sd(t,i,"child_moved",a,r,n),sd(t,i,"child_changed",e,r,n),sd(t,i,"value",e,r,n),i}function sd(t,e,n,r,i,a){const o=r.filter(s=>s.type===n);o.sort((s,u)=>txe(t,s,u)),o.forEach(s=>{const u=exe(t,s,a);i.forEach(l=>{l.respondsTo(s.type)&&e.push(l.createEvent(u,t.query_))})})}function exe(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function txe(t,e,n){if(e.childName==null||n.childName==null)throw Ff("Should only compare child_ events.");const r=new Dt(e.childName,e.snapshotNode),i=new Dt(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ey(t,e){return{eventCache:t,serverCache:e}}function Ld(t,e,n,r){return ey(new fl(e,n,r),t.serverCache)}function q8(t,e,n,r){return ey(t.eventCache,new fl(e,n,r))}function Xb(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function dl(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let C1;const nxe=()=>(C1||(C1=new si(zye)),C1);class un{static fromObject(e){let n=new un(null);return gi(e,(r,i)=>{n=n.set(new en(r),i)}),n}constructor(e,n=nxe()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:jt(),value:this.value};if(Tt(e))return null;{const r=Nt(e),i=this.children.get(r);if(i!==null){const a=i.findRootMostMatchingPathAndValue(nn(e),n);return a!=null?{path:$n(new en(r),a.path),value:a.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Tt(e))return this;{const n=Nt(e),r=this.children.get(n);return r!==null?r.subtree(nn(e)):new un(null)}}set(e,n){if(Tt(e))return new un(n,this.children);{const r=Nt(e),a=(this.children.get(r)||new un(null)).set(nn(e),n),o=this.children.insert(r,a);return new un(this.value,o)}}remove(e){if(Tt(e))return this.children.isEmpty()?new un(null):new un(null,this.children);{const n=Nt(e),r=this.children.get(n);if(r){const i=r.remove(nn(e));let a;return i.isEmpty()?a=this.children.remove(n):a=this.children.insert(n,i),this.value===null&&a.isEmpty()?new un(null):new un(this.value,a)}else return this}}get(e){if(Tt(e))return this.value;{const n=Nt(e),r=this.children.get(n);return r?r.get(nn(e)):null}}setTree(e,n){if(Tt(e))return n;{const r=Nt(e),a=(this.children.get(r)||new un(null)).setTree(nn(e),n);let o;return a.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,a),new un(this.value,o)}}fold(e){return this.fold_(jt(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_($n(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,jt(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(Tt(e))return null;{const a=Nt(e),o=this.children.get(a);return o?o.findOnPath_(nn(e),$n(n,a),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,jt(),n)}foreachOnPath_(e,n,r){if(Tt(e))return this;{this.value&&r(n,this.value);const i=Nt(e),a=this.children.get(i);return a?a.foreachOnPath_(nn(e),$n(n,i),r):new un(null)}}foreach(e){this.foreach_(jt(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_($n(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e){this.writeTree_=e}static empty(){return new Sa(new un(null))}}function jd(t,e,n){if(Tt(e))return new Sa(new un(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let a=r.value;const o=oi(i,e);return a=a.updateChild(o,n),new Sa(t.writeTree_.set(i,a))}else{const i=new un(n),a=t.writeTree_.setTree(e,i);return new Sa(a)}}}function tI(t,e,n){let r=t;return gi(n,(i,a)=>{r=jd(r,$n(e,i),a)}),r}function nI(t,e){if(Tt(e))return Sa.empty();{const n=t.writeTree_.setTree(e,new un(null));return new Sa(n)}}function Qb(t,e){return Tl(t,e)!=null}function Tl(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(oi(n.path,e)):null}function rI(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Sn,(r,i)=>{e.push(new Dt(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Dt(r,i.value))}),e}function js(t,e){if(Tt(e))return t;{const n=Tl(t,e);return n!=null?new Sa(new un(n)):new Sa(t.writeTree_.subtree(e))}}function Zb(t){return t.writeTree_.isEmpty()}function uf(t,e){return H8(jt(),t.writeTree_,e)}function H8(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{i===".priority"?(Be(a.value!==null,"Priority writes must always be leaf nodes"),r=a.value):n=H8($n(t,i),a,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild($n(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fE(t,e){return X8(e,t)}function rxe(t,e,n,r,i){Be(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=jd(t.visibleWrites,e,n)),t.lastWriteId=r}function ixe(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function axe(t,e){const n=t.allWrites.findIndex(s=>s.writeId===e);Be(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,a=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const s=t.allWrites[o];s.visible&&(o>=n&&oxe(s,r.path)?i=!1:xa(r.path,s.path)&&(a=!0)),o--}if(i){if(a)return sxe(t),!0;if(r.snap)t.visibleWrites=nI(t.visibleWrites,r.path);else{const s=r.children;gi(s,u=>{t.visibleWrites=nI(t.visibleWrites,$n(r.path,u))})}return!0}else return!1}function oxe(t,e){if(t.snap)return xa(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&xa($n(t.path,n),e))return!0;return!1}function sxe(t){t.visibleWrites=G8(t.allWrites,uxe,jt()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function uxe(t){return t.visible}function G8(t,e,n){let r=Sa.empty();for(let i=0;i<t.length;++i){const a=t[i];if(e(a)){const o=a.path;let s;if(a.snap)xa(n,o)?(s=oi(n,o),r=jd(r,s,a.snap)):xa(o,n)&&(s=oi(o,n),r=jd(r,jt(),a.snap.getChild(s)));else if(a.children){if(xa(n,o))s=oi(n,o),r=tI(r,s,a.children);else if(xa(o,n))if(s=oi(o,n),Tt(s))r=tI(r,jt(),a.children);else{const u=rf(a.children,Nt(s));if(u){const l=u.getChild(nn(s));r=jd(r,jt(),l)}}}else throw Ff("WriteRecord should have .snap or .children")}}return r}function K8(t,e,n,r,i){if(!r&&!i){const a=Tl(t.visibleWrites,e);if(a!=null)return a;{const o=js(t.visibleWrites,e);if(Zb(o))return n;if(n==null&&!Qb(o,jt()))return null;{const s=n||at.EMPTY_NODE;return uf(o,s)}}}else{const a=js(t.visibleWrites,e);if(!i&&Zb(a))return n;if(!i&&n==null&&!Qb(a,jt()))return null;{const o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(xa(l.path,e)||xa(e,l.path))},s=G8(t.allWrites,o,e),u=n||at.EMPTY_NODE;return uf(s,u)}}}function lxe(t,e,n){let r=at.EMPTY_NODE;const i=Tl(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Sn,(a,o)=>{r=r.updateImmediateChild(a,o)}),r;if(n){const a=js(t.visibleWrites,e);return n.forEachChild(Sn,(o,s)=>{const u=uf(js(a,new en(o)),s);r=r.updateImmediateChild(o,u)}),rI(a).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const a=js(t.visibleWrites,e);return rI(a).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function cxe(t,e,n,r,i){Be(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=$n(e,n);if(Qb(t.visibleWrites,a))return null;{const o=js(t.visibleWrites,a);return Zb(o)?i.getChild(n):uf(o,i.getChild(n))}}function fxe(t,e,n,r){const i=$n(e,n),a=Tl(t.visibleWrites,i);if(a!=null)return a;if(r.isCompleteForChild(n)){const o=js(t.visibleWrites,i);return uf(o,r.getNode().getImmediateChild(n))}else return null}function dxe(t,e){return Tl(t.visibleWrites,e)}function hxe(t,e,n,r,i,a,o){let s;const u=js(t.visibleWrites,e),l=Tl(u,jt());if(l!=null)s=l;else if(n!=null)s=uf(u,n);else return[];if(s=s.withIndex(o),!s.isEmpty()&&!s.isLeafNode()){const c=[],f=o.getCompare(),d=a?s.getReverseIteratorFrom(r,o):s.getIteratorFrom(r,o);let h=d.getNext();for(;h&&c.length<i;)f(h,r)!==0&&c.push(h),h=d.getNext();return c}else return[]}function pxe(){return{visibleWrites:Sa.empty(),allWrites:[],lastWriteId:-1}}function bg(t,e,n,r){return K8(t.writeTree,t.treePath,e,n,r)}function dE(t,e){return lxe(t.writeTree,t.treePath,e)}function iI(t,e,n,r){return cxe(t.writeTree,t.treePath,e,n,r)}function wg(t,e){return dxe(t.writeTree,$n(t.treePath,e))}function mxe(t,e,n,r,i,a){return hxe(t.writeTree,t.treePath,e,n,r,i,a)}function hE(t,e,n){return fxe(t.writeTree,t.treePath,e,n)}function Y8(t,e){return X8($n(t.treePath,e),t.writeTree)}function X8(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vxe{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;Be(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),Be(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if(n==="child_added"&&a==="child_removed")this.changeMap.set(r,Dh(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&a==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&a==="child_changed")this.changeMap.set(r,Sh(r,i.oldSnap));else if(n==="child_changed"&&a==="child_added")this.changeMap.set(r,sf(r,e.snapshotNode));else if(n==="child_changed"&&a==="child_changed")this.changeMap.set(r,Dh(r,e.snapshotNode,i.oldSnap));else throw Ff("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gxe{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const Q8=new gxe;class pE{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new fl(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return hE(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:dl(this.viewCache_),a=mxe(this.writes_,i,n,1,r,e);return a.length===0?null:a[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yxe(t){return{filter:t}}function xxe(t,e){Be(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),Be(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function bxe(t,e,n,r,i){const a=new vxe;let o,s;if(n.type===ba.OVERWRITE){const l=n;l.source.fromUser?o=Jb(t,e,l.path,l.snap,r,i,a):(Be(l.source.fromServer,"Unknown source."),s=l.source.tagged||e.serverCache.isFiltered()&&!Tt(l.path),o=_g(t,e,l.path,l.snap,r,i,s,a))}else if(n.type===ba.MERGE){const l=n;l.source.fromUser?o=_xe(t,e,l.path,l.children,r,i,a):(Be(l.source.fromServer,"Unknown source."),s=l.source.tagged||e.serverCache.isFiltered(),o=ew(t,e,l.path,l.children,r,i,s,a))}else if(n.type===ba.ACK_USER_WRITE){const l=n;l.revert?o=Nxe(t,e,l.path,r,i,a):o=Exe(t,e,l.path,l.affectedTree,r,i,a)}else if(n.type===ba.LISTEN_COMPLETE)o=Cxe(t,e,n.path,r,a);else throw Ff("Unknown operation type: "+n.type);const u=a.getChanges();return wxe(e,o,u),{viewCache:o,changes:u}}function wxe(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=Xb(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(U8(Xb(e)))}}function Z8(t,e,n,r,i,a){const o=e.eventCache;if(wg(r,n)!=null)return e;{let s,u;if(Tt(n))if(Be(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const l=dl(e),c=l instanceof at?l:at.EMPTY_NODE,f=dE(r,c);s=t.filter.updateFullNode(e.eventCache.getNode(),f,a)}else{const l=bg(r,dl(e));s=t.filter.updateFullNode(e.eventCache.getNode(),l,a)}else{const l=Nt(n);if(l===".priority"){Be(Ys(n)===1,"Can't have a priority with additional path components");const c=o.getNode();u=e.serverCache.getNode();const f=iI(r,n,c,u);f!=null?s=t.filter.updatePriority(c,f):s=o.getNode()}else{const c=nn(n);let f;if(o.isCompleteForChild(l)){u=e.serverCache.getNode();const d=iI(r,n,o.getNode(),u);d!=null?f=o.getNode().getImmediateChild(l).updateChild(c,d):f=o.getNode().getImmediateChild(l)}else f=hE(r,l,e.serverCache);f!=null?s=t.filter.updateChild(o.getNode(),l,f,c,i,a):s=o.getNode()}}return Ld(e,s,o.isFullyInitialized()||Tt(n),t.filter.filtersNodes())}}function _g(t,e,n,r,i,a,o,s){const u=e.serverCache;let l;const c=o?t.filter:t.filter.getIndexedFilter();if(Tt(n))l=c.updateFullNode(u.getNode(),r,null);else if(c.filtersNodes()&&!u.isFiltered()){const h=u.getNode().updateChild(n,r);l=c.updateFullNode(u.getNode(),h,null)}else{const h=Nt(n);if(!u.isCompleteForPath(n)&&Ys(n)>1)return e;const p=nn(n),g=u.getNode().getImmediateChild(h).updateChild(p,r);h===".priority"?l=c.updatePriority(u.getNode(),g):l=c.updateChild(u.getNode(),h,g,p,Q8,null)}const f=q8(e,l,u.isFullyInitialized()||Tt(n),c.filtersNodes()),d=new pE(i,f,a);return Z8(t,f,n,i,d,s)}function Jb(t,e,n,r,i,a,o){const s=e.eventCache;let u,l;const c=new pE(i,e,a);if(Tt(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),u=Ld(e,l,!0,t.filter.filtersNodes());else{const f=Nt(n);if(f===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),u=Ld(e,l,s.isFullyInitialized(),s.isFiltered());else{const d=nn(n),h=s.getNode().getImmediateChild(f);let p;if(Tt(d))p=r;else{const m=c.getCompleteChild(f);m!=null?k8(d)===".priority"&&m.getChild(P8(d)).isEmpty()?p=m:p=m.updateChild(d,r):p=at.EMPTY_NODE}if(h.equals(p))u=e;else{const m=t.filter.updateChild(s.getNode(),f,p,d,c,o);u=Ld(e,m,s.isFullyInitialized(),t.filter.filtersNodes())}}}return u}function aI(t,e){return t.eventCache.isCompleteForChild(e)}function _xe(t,e,n,r,i,a,o){let s=e;return r.foreach((u,l)=>{const c=$n(n,u);aI(e,Nt(c))&&(s=Jb(t,s,c,l,i,a,o))}),r.foreach((u,l)=>{const c=$n(n,u);aI(e,Nt(c))||(s=Jb(t,s,c,l,i,a,o))}),s}function oI(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function ew(t,e,n,r,i,a,o,s){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u=e,l;Tt(n)?l=r:l=new un(null).setTree(n,r);const c=e.serverCache.getNode();return l.children.inorderTraversal((f,d)=>{if(c.hasChild(f)){const h=e.serverCache.getNode().getImmediateChild(f),p=oI(t,h,d);u=_g(t,u,new en(f),p,i,a,o,s)}}),l.children.inorderTraversal((f,d)=>{const h=!e.serverCache.isCompleteForChild(f)&&d.value===null;if(!c.hasChild(f)&&!h){const p=e.serverCache.getNode().getImmediateChild(f),m=oI(t,p,d);u=_g(t,u,new en(f),m,i,a,o,s)}}),u}function Exe(t,e,n,r,i,a,o){if(wg(i,n)!=null)return e;const s=e.serverCache.isFiltered(),u=e.serverCache;if(r.value!=null){if(Tt(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return _g(t,e,n,u.getNode().getChild(n),i,a,s,o);if(Tt(n)){let l=new un(null);return u.getNode().forEachChild(Ic,(c,f)=>{l=l.set(new en(c),f)}),ew(t,e,n,l,i,a,s,o)}else return e}else{let l=new un(null);return r.foreach((c,f)=>{const d=$n(n,c);u.isCompleteForPath(d)&&(l=l.set(c,u.getNode().getChild(d)))}),ew(t,e,n,l,i,a,s,o)}}function Cxe(t,e,n,r,i){const a=e.serverCache,o=q8(e,a.getNode(),a.isFullyInitialized()||Tt(n),a.isFiltered());return Z8(t,o,n,r,Q8,i)}function Nxe(t,e,n,r,i,a){let o;if(wg(r,n)!=null)return e;{const s=new pE(r,e,i),u=e.eventCache.getNode();let l;if(Tt(n)||Nt(n)===".priority"){let c;if(e.serverCache.isFullyInitialized())c=bg(r,dl(e));else{const f=e.serverCache.getNode();Be(f instanceof at,"serverChildren would be complete if leaf node"),c=dE(r,f)}c=c,l=t.filter.updateFullNode(u,c,a)}else{const c=Nt(n);let f=hE(r,c,e.serverCache);f==null&&e.serverCache.isCompleteForChild(c)&&(f=u.getImmediateChild(c)),f!=null?l=t.filter.updateChild(u,c,f,nn(n),s,a):e.eventCache.getNode().hasChild(c)?l=t.filter.updateChild(u,c,at.EMPTY_NODE,nn(n),s,a):l=u,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=bg(r,dl(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,a)))}return o=e.serverCache.isFullyInitialized()||wg(r,jt())!=null,Ld(e,l,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sxe{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new sE(r.getIndex()),a=q1e(r);this.processor_=yxe(a);const o=n.serverCache,s=n.eventCache,u=i.updateFullNode(at.EMPTY_NODE,o.getNode(),null),l=a.updateFullNode(at.EMPTY_NODE,s.getNode(),null),c=new fl(u,o.isFullyInitialized(),i.filtersNodes()),f=new fl(l,s.isFullyInitialized(),a.filtersNodes());this.viewCache_=ey(f,c),this.eventGenerator_=new Z1e(this.query_)}get query(){return this.query_}}function Dxe(t){return t.viewCache_.serverCache.getNode()}function Axe(t,e){const n=dl(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Tt(e)&&!n.getImmediateChild(Nt(e)).isEmpty())?n.getChild(e):null}function sI(t){return t.eventRegistrations_.length===0}function Txe(t,e){t.eventRegistrations_.push(e)}function uI(t,e,n){const r=[];if(n){Be(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(a=>{const o=a.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let a=0;a<t.eventRegistrations_.length;++a){const o=t.eventRegistrations_[a];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(a+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function lI(t,e,n,r){e.type===ba.MERGE&&e.source.queryId!==null&&(Be(dl(t.viewCache_),"We should always have a full cache before handling merges"),Be(Xb(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,a=bxe(t.processor_,i,e,n,r);return xxe(t.processor_,a.viewCache),Be(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=a.viewCache,J8(t,a.changes,a.viewCache.eventCache.getNode(),null)}function Mxe(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Sn,(a,o)=>{r.push(sf(a,o))}),n.isFullyInitialized()&&r.push(U8(n.getNode())),J8(t,r,n.getNode(),e)}function J8(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return J1e(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eg;class Ixe{constructor(){this.views=new Map}}function Rxe(t){Be(!Eg,"__referenceConstructor has already been defined"),Eg=t}function kxe(){return Be(Eg,"Reference.ts has not been loaded"),Eg}function Fxe(t){return t.views.size===0}function mE(t,e,n,r){const i=e.source.queryId;if(i!==null){const a=t.views.get(i);return Be(a!=null,"SyncTree gave us an op for an invalid query."),lI(a,e,n,r)}else{let a=[];for(const o of t.views.values())a=a.concat(lI(o,e,n,r));return a}}function Pxe(t,e,n,r,i){const a=e._queryIdentifier,o=t.views.get(a);if(!o){let s=bg(n,i?r:null),u=!1;s?u=!0:r instanceof at?(s=dE(n,r),u=!1):(s=at.EMPTY_NODE,u=!1);const l=ey(new fl(s,u,!1),new fl(r,i,!1));return new Sxe(e,l)}return o}function Oxe(t,e,n,r,i,a){const o=Pxe(t,e,r,i,a);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),Txe(o,n),Mxe(o,n)}function Bxe(t,e,n,r){const i=e._queryIdentifier,a=[];let o=[];const s=Xs(t);if(i==="default")for(const[u,l]of t.views.entries())o=o.concat(uI(l,n,r)),sI(l)&&(t.views.delete(u),l.query._queryParams.loadsAllData()||a.push(l.query));else{const u=t.views.get(i);u&&(o=o.concat(uI(u,n,r)),sI(u)&&(t.views.delete(i),u.query._queryParams.loadsAllData()||a.push(u.query)))}return s&&!Xs(t)&&a.push(new(kxe())(e._repo,e._path)),{removed:a,events:o}}function e6(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Rc(t,e){let n=null;for(const r of t.views.values())n=n||Axe(r,e);return n}function t6(t,e){if(e._queryParams.loadsAllData())return ty(t);{const r=e._queryIdentifier;return t.views.get(r)}}function n6(t,e){return t6(t,e)!=null}function Xs(t){return ty(t)!=null}function ty(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cg;function Lxe(t){Be(!Cg,"__referenceConstructor has already been defined"),Cg=t}function jxe(){return Be(Cg,"Reference.ts has not been loaded"),Cg}let $xe=1;class cI{constructor(e){this.listenProvider_=e,this.syncPointTree_=new un(null),this.pendingWriteTree_=pxe(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function r6(t,e,n,r,i){return rxe(t.pendingWriteTree_,e,n,r,i),i?mp(t,new cl(V8(),e,n)):[]}function Wu(t,e,n=!1){const r=ixe(t.pendingWriteTree_,e);if(axe(t.pendingWriteTree_,e)){let a=new un(null);return r.snap!=null?a=a.set(jt(),!0):gi(r.children,o=>{a=a.set(new en(o),!0)}),mp(t,new xg(r.path,a,n))}else return[]}function ny(t,e,n){return mp(t,new cl(lE(),e,n))}function zxe(t,e,n){const r=un.fromObject(n);return mp(t,new Mh(lE(),e,r))}function Uxe(t,e){return mp(t,new Th(lE(),e))}function Wxe(t,e,n){const r=gE(t,n);if(r){const i=yE(r),a=i.path,o=i.queryId,s=oi(a,e),u=new Th(cE(o),s);return xE(t,a,u)}else return[]}function tw(t,e,n,r,i=!1){const a=e._path,o=t.syncPointTree_.get(a);let s=[];if(o&&(e._queryIdentifier==="default"||n6(o,e))){const u=Bxe(o,e,n,r);Fxe(o)&&(t.syncPointTree_=t.syncPointTree_.remove(a));const l=u.removed;if(s=u.events,!i){const c=l.findIndex(d=>d._queryParams.loadsAllData())!==-1,f=t.syncPointTree_.findOnPath(a,(d,h)=>Xs(h));if(c&&!f){const d=t.syncPointTree_.subtree(a);if(!d.isEmpty()){const h=Hxe(d);for(let p=0;p<h.length;++p){const m=h[p],g=m.query,v=o6(t,m);t.listenProvider_.startListening($d(g),Ng(t,g),v.hashFn,v.onComplete)}}}!f&&l.length>0&&!r&&(c?t.listenProvider_.stopListening($d(e),null):l.forEach(d=>{const h=t.queryToTagMap.get(ry(d));t.listenProvider_.stopListening($d(d),h)}))}Gxe(t,l)}return s}function Vxe(t,e,n,r){const i=gE(t,r);if(i!=null){const a=yE(i),o=a.path,s=a.queryId,u=oi(o,e),l=new cl(cE(s),u,n);return xE(t,o,l)}else return[]}function qxe(t,e,n,r){const i=gE(t,r);if(i){const a=yE(i),o=a.path,s=a.queryId,u=oi(o,e),l=un.fromObject(n),c=new Mh(cE(s),u,l);return xE(t,o,c)}else return[]}function fI(t,e,n,r=!1){const i=e._path;let a=null,o=!1;t.syncPointTree_.foreachOnPath(i,(d,h)=>{const p=oi(d,i);a=a||Rc(h,p),o=o||Xs(h)});let s=t.syncPointTree_.get(i);s?(o=o||Xs(s),a=a||Rc(s,jt())):(s=new Ixe,t.syncPointTree_=t.syncPointTree_.set(i,s));let u;a!=null?u=!0:(u=!1,a=at.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((h,p)=>{const m=Rc(p,jt());m&&(a=a.updateImmediateChild(h,m))}));const l=n6(s,e);if(!l&&!e._queryParams.loadsAllData()){const d=ry(e);Be(!t.queryToTagMap.has(d),"View does not exist, but we have a tag");const h=Kxe();t.queryToTagMap.set(d,h),t.tagToQueryMap.set(h,d)}const c=fE(t.pendingWriteTree_,i);let f=Oxe(s,e,n,c,a,u);if(!l&&!o&&!r){const d=t6(s,e);f=f.concat(Yxe(t,e,d))}return f}function vE(t,e,n){const i=t.pendingWriteTree_,a=t.syncPointTree_.findOnPath(e,(o,s)=>{const u=oi(o,e),l=Rc(s,u);if(l)return l});return K8(i,e,a,n,!0)}function mp(t,e){return i6(e,t.syncPointTree_,null,fE(t.pendingWriteTree_,jt()))}function i6(t,e,n,r){if(Tt(t.path))return a6(t,e,n,r);{const i=e.get(jt());n==null&&i!=null&&(n=Rc(i,jt()));let a=[];const o=Nt(t.path),s=t.operationForChild(o),u=e.children.get(o);if(u&&s){const l=n?n.getImmediateChild(o):null,c=Y8(r,o);a=a.concat(i6(s,u,l,c))}return i&&(a=a.concat(mE(i,t,r,n))),a}}function a6(t,e,n,r){const i=e.get(jt());n==null&&i!=null&&(n=Rc(i,jt()));let a=[];return e.children.inorderTraversal((o,s)=>{const u=n?n.getImmediateChild(o):null,l=Y8(r,o),c=t.operationForChild(o);c&&(a=a.concat(a6(c,s,u,l)))}),i&&(a=a.concat(mE(i,t,r,n))),a}function o6(t,e){const n=e.query,r=Ng(t,n);return{hashFn:()=>(Dxe(e)||at.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?Wxe(t,n._path,r):Uxe(t,n._path);{const a=Vye(i,n);return tw(t,n,null,a)}}}}function Ng(t,e){const n=ry(e);return t.queryToTagMap.get(n)}function ry(t){return t._path.toString()+"$"+t._queryIdentifier}function gE(t,e){return t.tagToQueryMap.get(e)}function yE(t){const e=t.indexOf("$");return Be(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new en(t.substr(0,e))}}function xE(t,e,n){const r=t.syncPointTree_.get(e);Be(r,"Missing sync point for query tag that we're tracking");const i=fE(t.pendingWriteTree_,e);return mE(r,n,i,null)}function Hxe(t){return t.fold((e,n,r)=>{if(n&&Xs(n))return[ty(n)];{let i=[];return n&&(i=e6(n)),gi(r,(a,o)=>{i=i.concat(o)}),i}})}function $d(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(jxe())(t._repo,t._path):t}function Gxe(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=ry(r),a=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(a)}}}function Kxe(){return $xe++}function Yxe(t,e,n){const r=e._path,i=Ng(t,e),a=o6(t,n),o=t.listenProvider_.startListening($d(e),i,a.hashFn,a.onComplete),s=t.syncPointTree_.subtree(r);if(i)Be(!Xs(s.value),"If we're adding a query, it shouldn't be shadowed");else{const u=s.fold((l,c,f)=>{if(!Tt(l)&&c&&Xs(c))return[ty(c).query];{let d=[];return c&&(d=d.concat(e6(c).map(h=>h.query))),gi(f,(h,p)=>{d=d.concat(p)}),d}});for(let l=0;l<u.length;++l){const c=u[l];t.listenProvider_.stopListening($d(c),Ng(t,c))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new bE(n)}node(){return this.node_}}class wE{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=$n(this.path_,e);return new wE(this.syncTree_,n)}node(){return vE(this.syncTree_,this.path_)}}const Xxe=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},dI=function(t,e,n){if(!t||typeof t!="object")return t;if(Be(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Qxe(t[".sv"],e,n);if(typeof t[".sv"]=="object")return Zxe(t[".sv"],e);Be(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Qxe=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Be(!1,"Unexpected server value: "+t)}},Zxe=function(t,e,n){t.hasOwnProperty("increment")||Be(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&Be(!1,"Unexpected increment value: "+r);const i=e.node();if(Be(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},Jxe=function(t,e,n,r){return _E(e,new wE(n,t),r)},s6=function(t,e,n){return _E(t,new bE(e),n)};function _E(t,e,n){const r=t.getPriority().val(),i=dI(r,e.getImmediateChild(".priority"),n);let a;if(t.isLeafNode()){const o=t,s=dI(o.getValue(),e,n);return s!==o.getValue()||i!==o.getPriority().val()?new Jn(s,dr(i)):t}else{const o=t;return a=o,i!==o.getPriority().val()&&(a=a.updatePriority(new Jn(i))),o.forEachChild(Sn,(s,u)=>{const l=_E(u,e.getImmediateChild(s),n);l!==u&&(a=a.updateImmediateChild(s,l))}),a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function CE(t,e){let n=e instanceof en?e:new en(e),r=t,i=Nt(n);for(;i!==null;){const a=rf(r.node.children,i)||{children:{},childCount:0};r=new EE(i,r,a),n=nn(n),i=Nt(n)}return r}function $f(t){return t.node.value}function u6(t,e){t.node.value=e,nw(t)}function l6(t){return t.node.childCount>0}function ebe(t){return $f(t)===void 0&&!l6(t)}function iy(t,e){gi(t.node.children,(n,r)=>{e(new EE(n,t,r))})}function c6(t,e,n,r){n&&!r&&e(t),iy(t,i=>{c6(i,e,!0,r)}),n&&r&&e(t)}function tbe(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function vp(t){return new en(t.parent===null?t.name:vp(t.parent)+"/"+t.name)}function nw(t){t.parent!==null&&nbe(t.parent,t.name,t)}function nbe(t,e,n){const r=ebe(n),i=Qo(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,nw(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,nw(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rbe=/[\[\].#$\/\u0000-\u001F\u007F]/,ibe=/[\[\].#$\u0000-\u001F\u007F]/,N1=10*1024*1024,f6=function(t){return typeof t=="string"&&t.length!==0&&!rbe.test(t)},d6=function(t){return typeof t=="string"&&t.length!==0&&!ibe.test(t)},abe=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),d6(t)},h6=function(t,e,n,r){r&&e===void 0||NE(j_(t,"value"),e,n)},NE=function(t,e,n){const r=n instanceof en?new E1e(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Tu(r));if(typeof e=="function")throw new Error(t+"contains a function "+Tu(r)+" with contents = "+e.toString());if(d8(e))throw new Error(t+"contains "+e.toString()+" "+Tu(r));if(typeof e=="string"&&e.length>N1/3&&Y0(e)>N1)throw new Error(t+"contains a string greater than "+N1+" utf8 bytes "+Tu(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,a=!1;if(gi(e,(o,s)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(a=!0,!f6(o)))throw new Error(t+" contains an invalid key ("+o+") "+Tu(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);C1e(r,o),NE(t,s,r),N1e(r)}),i&&a)throw new Error(t+' contains ".value" child '+Tu(r)+" in addition to actual children.")}},p6=function(t,e,n,r){if(!d6(n))throw new Error(j_(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},obe=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),p6(t,e,n)},m6=function(t,e){if(Nt(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},sbe=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!f6(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!abe(n))throw new Error(j_(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ube{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function SE(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();n!==null&&!iE(a,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:a}),n.events.push(i)}n&&t.eventLists_.push(n)}function v6(t,e,n){SE(t,n),g6(t,r=>iE(r,e))}function qo(t,e,n){SE(t,n),g6(t,r=>xa(r,e)||xa(e,r))}function g6(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const a=i.path;e(a)?(lbe(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function lbe(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Od&&Ar("event: "+n.toString()),jf(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cbe="repo_interrupt",fbe=25;class dbe{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ube,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=yg(),this.transactionQueueTree_=new EE,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function hbe(t,e,n){if(t.stats_=nE(t.repoInfo_),t.forceRestClient_||Kye())t.server_=new gg(t.repoInfo_,(r,i,a,o)=>{hI(t,r,i,a,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>pI(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{nr(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new ko(t.repoInfo_,e,(r,i,a,o)=>{hI(t,r,i,a,o)},r=>{pI(t,r)},r=>{pbe(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=Jye(t.repoInfo_,()=>new Q1e(t.stats_,t.server_)),t.infoData_=new H1e,t.infoSyncTree_=new cI({startListening:(r,i,a,o)=>{let s=[];const u=t.infoData_.getNode(r._path);return u.isEmpty()||(s=ny(t.infoSyncTree_,r._path,u),setTimeout(()=>{o("ok")},0)),s},stopListening:()=>{}}),AE(t,"connected",!1),t.serverSyncTree_=new cI({startListening:(r,i,a,o)=>(t.server_.listen(r,a,i,(s,u)=>{const l=o(s,u);qo(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function y6(t){const n=t.infoData_.getNode(new en(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function DE(t){return Xxe({timestamp:y6(t)})}function hI(t,e,n,r,i){t.dataUpdateCount++;const a=new en(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const u=og(n,l=>dr(l));o=qxe(t.serverSyncTree_,a,u,i)}else{const u=dr(n);o=Vxe(t.serverSyncTree_,a,u,i)}else if(r){const u=og(n,l=>dr(l));o=zxe(t.serverSyncTree_,a,u)}else{const u=dr(n);o=ny(t.serverSyncTree_,a,u)}let s=a;o.length>0&&(s=ay(t,a)),qo(t.eventQueue_,s,o)}function pI(t,e){AE(t,"connected",e),e===!1&&vbe(t)}function pbe(t,e){gi(e,(n,r)=>{AE(t,n,r)})}function AE(t,e,n){const r=new en("/.info/"+e),i=dr(n);t.infoData_.updateSnapshot(r,i);const a=ny(t.infoSyncTree_,r,i);qo(t.eventQueue_,r,a)}function x6(t){return t.nextWriteId_++}function mbe(t,e,n,r,i){TE(t,"set",{path:e.toString(),value:n,priority:r});const a=DE(t),o=dr(n,r),s=vE(t.serverSyncTree_,e),u=s6(o,s,a),l=x6(t),c=r6(t.serverSyncTree_,e,u,l,!0);SE(t.eventQueue_,c),t.server_.put(e.toString(),o.val(!0),(d,h)=>{const p=d==="ok";p||pi("set at "+e+" failed: "+d);const m=Wu(t.serverSyncTree_,l,!p);qo(t.eventQueue_,e,m),bbe(t,i,d,h)});const f=C6(t,e);ay(t,f),qo(t.eventQueue_,f,[])}function vbe(t){TE(t,"onDisconnectEvents");const e=DE(t),n=yg();Yb(t.onDisconnect_,jt(),(i,a)=>{const o=Jxe(i,a,t.serverSyncTree_,e);W8(n,i,o)});let r=[];Yb(n,jt(),(i,a)=>{r=r.concat(ny(t.serverSyncTree_,i,a));const o=C6(t,i);ay(t,o)}),t.onDisconnect_=yg(),qo(t.eventQueue_,jt(),r)}function gbe(t,e,n){let r;Nt(e._path)===".info"?r=fI(t.infoSyncTree_,e,n):r=fI(t.serverSyncTree_,e,n),v6(t.eventQueue_,e._path,r)}function ybe(t,e,n){let r;Nt(e._path)===".info"?r=tw(t.infoSyncTree_,e,n):r=tw(t.serverSyncTree_,e,n),v6(t.eventQueue_,e._path,r)}function xbe(t){t.persistentConnection_&&t.persistentConnection_.interrupt(cbe)}function TE(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Ar(n,...e)}function bbe(t,e,n,r){e&&jf(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let a=i;r&&(a+=": "+r);const o=new Error(a);o.code=i,e(o)}})}function b6(t,e,n){return vE(t.serverSyncTree_,e,n)||at.EMPTY_NODE}function ME(t,e=t.transactionQueueTree_){if(e||oy(t,e),$f(e)){const n=_6(t,e);Be(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&wbe(t,vp(e),n)}else l6(e)&&iy(e,n=>{ME(t,n)})}function wbe(t,e,n){const r=n.map(l=>l.currentWriteId),i=b6(t,e,r);let a=i;const o=i.hash();for(let l=0;l<n.length;l++){const c=n[l];Be(c.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;const f=oi(e,c.path);a=a.updateChild(f,c.currentOutputSnapshotRaw)}const s=a.val(!0),u=e;t.server_.put(u.toString(),s,l=>{TE(t,"transaction put response",{path:u.toString(),status:l});let c=[];if(l==="ok"){const f=[];for(let d=0;d<n.length;d++)n[d].status=2,c=c.concat(Wu(t.serverSyncTree_,n[d].currentWriteId)),n[d].onComplete&&f.push(()=>n[d].onComplete(null,!0,n[d].currentOutputSnapshotResolved)),n[d].unwatcher();oy(t,CE(t.transactionQueueTree_,e)),ME(t,t.transactionQueueTree_),qo(t.eventQueue_,e,c);for(let d=0;d<f.length;d++)jf(f[d])}else{if(l==="datastale")for(let f=0;f<n.length;f++)n[f].status===3?n[f].status=4:n[f].status=0;else{pi("transaction at "+u.toString()+" failed: "+l);for(let f=0;f<n.length;f++)n[f].status=4,n[f].abortReason=l}ay(t,e)}},o)}function ay(t,e){const n=w6(t,e),r=vp(n),i=_6(t,n);return _be(t,i,r),r}function _be(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(s=>s.status===0).map(s=>s.currentWriteId);for(let s=0;s<e.length;s++){const u=e[s],l=oi(n,u.path);let c=!1,f;if(Be(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),u.status===4)c=!0,f=u.abortReason,i=i.concat(Wu(t.serverSyncTree_,u.currentWriteId,!0));else if(u.status===0)if(u.retryCount>=fbe)c=!0,f="maxretry",i=i.concat(Wu(t.serverSyncTree_,u.currentWriteId,!0));else{const d=b6(t,u.path,o);u.currentInputSnapshot=d;const h=e[s].update(d.val());if(h!==void 0){NE("transaction failed: Data returned ",h,u.path);let p=dr(h);typeof h=="object"&&h!=null&&Qo(h,".priority")||(p=p.updatePriority(d.getPriority()));const g=u.currentWriteId,v=DE(t),x=s6(p,d,v);u.currentOutputSnapshotRaw=p,u.currentOutputSnapshotResolved=x,u.currentWriteId=x6(t),o.splice(o.indexOf(g),1),i=i.concat(r6(t.serverSyncTree_,u.path,x,u.currentWriteId,u.applyLocally)),i=i.concat(Wu(t.serverSyncTree_,g,!0))}else c=!0,f="nodata",i=i.concat(Wu(t.serverSyncTree_,u.currentWriteId,!0))}qo(t.eventQueue_,n,i),i=[],c&&(e[s].status=2,function(d){setTimeout(d,Math.floor(0))}(e[s].unwatcher),e[s].onComplete&&(f==="nodata"?r.push(()=>e[s].onComplete(null,!1,e[s].currentInputSnapshot)):r.push(()=>e[s].onComplete(new Error(f),!1,null))))}oy(t,t.transactionQueueTree_);for(let s=0;s<r.length;s++)jf(r[s]);ME(t,t.transactionQueueTree_)}function w6(t,e){let n,r=t.transactionQueueTree_;for(n=Nt(e);n!==null&&$f(r)===void 0;)r=CE(r,n),e=nn(e),n=Nt(e);return r}function _6(t,e){const n=[];return E6(t,e,n),n.sort((r,i)=>r.order-i.order),n}function E6(t,e,n){const r=$f(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);iy(e,i=>{E6(t,i,n)})}function oy(t,e){const n=$f(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,u6(e,n.length>0?n:void 0)}iy(e,r=>{oy(t,r)})}function C6(t,e){const n=vp(w6(t,e)),r=CE(t.transactionQueueTree_,e);return tbe(r,i=>{S1(t,i)}),S1(t,r),c6(r,i=>{S1(t,i)}),n}function S1(t,e){const n=$f(e);if(n){const r=[];let i=[],a=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(Be(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(Be(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Wu(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));a===-1?u6(e,void 0):n.length=a+1,qo(t.eventQueue_,vp(e),i);for(let o=0;o<r.length;o++)jf(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ebe(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function Cbe(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):pi(`Invalid query segment '${n}' in query '${t}'`)}return e}const mI=function(t,e){const n=Nbe(t),r=n.namespace;n.domain==="firebase.com"&&Vo(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Vo("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||jye();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new C8(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new en(n.pathString)}},Nbe=function(t){let e="",n="",r="",i="",a="",o=!0,s="https",u=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(s=t.substring(0,l-1),t=t.substring(l+2));let c=t.indexOf("/");c===-1&&(c=t.length);let f=t.indexOf("?");f===-1&&(f=t.length),e=t.substring(0,Math.min(c,f)),c<f&&(i=Ebe(t.substring(c,f)));const d=Cbe(t.substring(Math.min(t.length,f)));l=e.indexOf(":"),l>=0?(o=s==="https"||s==="wss",u=parseInt(e.substring(l+1),10)):l=e.length;const h=e.slice(0,l);if(h.toLowerCase()==="localhost")n="localhost";else if(h.split(".").length<=2)n=h;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),a=r}"ns"in d&&(a=d.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:o,scheme:s,pathString:i,namespace:a}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Sbe=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let i;const a=new Array(8);for(i=7;i>=0;i--)a[i]=vI.charAt(n%64),n=Math.floor(n/64);Be(n===0,"Cannot push at time == 0");let o=a.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=vI.charAt(e[i]);return Be(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dbe{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+nr(this.snapshot.exportVal())}}class Abe{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tbe{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return Be(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return Tt(this._path)?null:k8(this._path)}get ref(){return new yu(this._repo,this._path)}get _queryIdentifier(){const e=JM(this._queryParams),n=eE(e);return n==="{}"?"default":n}get _queryObject(){return JM(this._queryParams)}isEqual(e){if(e=Jr(e),!(e instanceof IE))return!1;const n=this._repo===e._repo,r=iE(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+_1e(this._path)}}class yu extends IE{constructor(e,n){super(e,n,new uE,!1)}get parent(){const e=P8(this._path);return e===null?null:new yu(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Sg{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new en(e),r=Ih(this.ref,e);return new Sg(this._node.getChild(n),r,Sn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new Sg(i,Ih(this.ref,r),Sn)))}hasChild(e){const n=new en(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function N6(t,e){return t=Jr(t),t._checkNotDeleted("ref"),e!==void 0?Ih(t._root,e):t._root}function Ih(t,e){return t=Jr(t),Nt(t._path)===null?obe("child","path",e):p6("child","path",e),new yu(t._repo,$n(t._path,e))}function Mbe(t,e){t=Jr(t),m6("push",t._path),h6("push",e,t._path,!0);const n=y6(t._repo),r=Sbe(n),i=Ih(t,r),a=Ih(t,r);let o;return e!=null?o=Ibe(a,e).then(()=>a):o=Promise.resolve(a),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function Ibe(t,e){t=Jr(t),m6("set",t._path),h6("set",e,t._path,!1);const n=new K0;return mbe(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}class RE{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new Dbe("value",this,new Sg(e.snapshotNode,new yu(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Abe(this,e,n):null}matches(e){return e instanceof RE?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function Rbe(t,e,n,r,i){const a=new Tbe(n,void 0),o=new RE(a);return gbe(t._repo,t,o),()=>ybe(t._repo,t,o)}function kbe(t,e,n,r){return Rbe(t,"value",e)}Rxe(yu);Lxe(yu);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fbe="FIREBASE_DATABASE_EMULATOR_HOST",rw={};let Pbe=!1;function Obe(t,e,n,r){t.repoInfo_=new C8(e,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(t.authTokenProvider_=r)}function Bbe(t,e,n,r,i){let a=r||t.options.databaseURL;a===void 0&&(t.options.projectId||Vo("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ar("Using default host for project ",t.options.projectId),a=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=mI(a,i),s=o.repoInfo,u;typeof process<"u"&&PM&&(u=PM[Fbe]),u?(a=`http://${u}?ns=${s.namespace}`,o=mI(a,i),s=o.repoInfo):o.repoInfo.secure;const l=new Xye(t.name,t.options,e);sbe("Invalid Firebase Database URL",o),Tt(o.path)||Vo("Database URL must point to the root of a Firebase Database (not including a child path).");const c=jbe(s,t,l,new Yye(t,n));return new $be(c,t)}function Lbe(t,e){const n=rw[e];(!n||n[t.key]!==t)&&Vo(`Database ${e}(${t.repoInfo_}) has already been deleted.`),xbe(t),delete n[t.key]}function jbe(t,e,n,r){let i=rw[e.name];i||(i={},rw[e.name]=i);let a=i[t.toURLString()];return a&&Vo("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new dbe(t,Pbe,n,r),i[t.toURLString()]=a,a}class $be{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(hbe(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new yu(this._repo,jt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Lbe(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Vo("Cannot call "+e+" on a deleted database.")}}function zbe(t=D5(),e){const n=U_(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=Vme("database");r&&Ube(n,...r)}return n}function Ube(t,e,n,r={}){t=Jr(t),t._checkNotDeleted("useEmulator");const i=`${e}:${n}`,a=t._repoInternal;if(t._instanceStarted){if(i===t._repoInternal.repoInfo_.host&&al(r,a.repoInfo_.emulatorOptions))return;Vo("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(a.repoInfo_.nodeAdmin)r.mockUserToken&&Vo('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new ev(ev.OWNER);else if(r.mockUserToken){const s=typeof r.mockUserToken=="string"?r.mockUserToken:qme(r.mockUserToken,t.app.options.projectId);o=new ev(s)}Obe(a,i,r,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wbe(t){kye(Of),af(new ol("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return Bbe(r,i,a,n)},"PUBLIC").setMultipleInstances(!0)),Ls(OM,BM,t),Ls(OM,BM,"esm2017")}ko.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};ko.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};Wbe();const Vbe={apiKey:"AIzaSyB5bMKw1y39IEQ_5SbI8nZu10OuHzb8aCc",authDomain:"excel-a3fc8.firebaseapp.com",databaseURL:"https://excel-a3fc8-default-rtdb.firebaseio.com",projectId:"excel-a3fc8",storageBucket:"excel-a3fc8.firebasestorage.app",messagingSenderId:"940123719094",appId:"1:940123719094:web:b971300ddbf21673c22d17",measurementId:"G-M6MR18GFLG"},S6=S5(Vbe),ud=Tye(S6),D6=zbe(S6),A6=X.createContext(null);function zf(){const t=X.useContext(A6);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}function qbe({children:t}){const[e,n]=X.useState(null),[r,i]=X.useState(!0),a=new bo;X.useEffect(()=>g0e(ud,d=>{n(d),i(!1)}),[]);async function o(f,d){await h0e(ud,f,d)}async function s(f,d){await p0e(ud,f,d)}async function u(){await L0e(ud,a)}async function l(){await y0e(ud)}const c={currentUser:e,signup:o,login:s,loginWithGoogle:u,logout:l,loading:r};return S.jsx(A6.Provider,{value:c,children:!r&&t})}function Hbe(){const{currentUser:t}=zf(),[e,n]=X.useState(""),[r,i]=X.useState([]),[a,o]=X.useState(!0),s=X.useMemo(()=>["All Categories",...Array.from(new Set(d1.map(c=>c.category)))],[]);X.useEffect(()=>{(async()=>{if(!t){o(!1);return}try{}catch(f){console.error("Error fetching results:",f)}finally{o(!1)}})()},[t]),X.useEffect(()=>{if(!e)return;i(e==="All Categories"?[...d1].sort(()=>.5-Math.random()).slice(0,10):d1.filter(f=>f.category===e))},[e]);const u=async(c,f)=>{if(!t){alert("Please log in to save your results");return}try{const d=N6(D6,`quiz-results/${t.uid}`);await Mbe(d,{category:e,score:c,timeTaken:f,timestamp:Date.now(),totalQuestions:r.length})}catch(d){console.error("Error saving quiz results:",d),alert("Failed to save your results. Please try again.")}},l=()=>{n("")};return a?S.jsx("div",{className:"flex justify-center items-center min-h-screen",children:S.jsxs("div",{className:"text-center",children:[S.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-500 border-t-transparent mx-auto mb-4"}),S.jsx("p",{className:"text-gray-600",children:"Loading your quiz data..."})]})}):t?S.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-12",children:[S.jsxs("div",{className:"flex justify-between items-center mb-10",children:[S.jsx("h1",{className:"text-4xl font-bold text-gray-800",children:"Test Your Knowledge"}),S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx(Ni,{to:"/results",className:"text-blue-600 hover:text-blue-800 font-medium",children:"View My Results"}),S.jsxs("p",{className:"text-sm text-gray-500",children:["Logged in as: ",S.jsx("span",{className:"font-semibold",children:t.email})]})]})]}),e?S.jsxs("div",{children:[S.jsxs("button",{onClick:l,className:"mb-4 inline-flex items-center text-blue-600 hover:text-blue-800 font-medium",children:[S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Back to Categories"]}),S.jsx(Fme,{questions:r,category:e,onComplete:u,isExam:!0})]}):S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"mb-6",children:S.jsx("p",{className:"text-lg text-blue-700 font-medium",children:"All quizzes include a 30-minute timer"})}),S.jsx("div",{className:"grid sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:s.map(c=>S.jsxs("button",{onClick:()=>n(c),className:"bg-white border border-blue-100 p-6 rounded-xl shadow-md hover:shadow-lg hover:-translate-y-1 transition-all",children:[S.jsx("h3",{className:"text-xl font-semibold text-blue-700 mb-1",children:c}),S.jsx("p",{className:"text-gray-600 text-sm",children:c==="All Categories"?"Comprehensive timed exam":`Focused exam on ${c}`})]},c))})]})]}):S.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-16 text-center",children:[S.jsx("h1",{className:"text-5xl font-bold mb-6 text-blue-700",children:"Test Your Knowledge"}),S.jsx("p",{className:"text-lg mb-6 text-gray-600",children:"Log in to take quizzes and track your progress!"}),S.jsxs("div",{className:"flex justify-center gap-4",children:[S.jsx(Ni,{to:"/login",className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-semibold transition-all",children:"Login"}),S.jsx(Ni,{to:"/signup",className:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg font-semibold transition-all",children:"Sign Up"})]})]})}function Gbe(){const[t,e]=X.useState(""),[n,r]=X.useState(""),[i,a]=X.useState(""),[o,s]=X.useState(!1),{login:u,loginWithGoogle:l}=zf(),c=E0();async function f(h){h.preventDefault();try{a(""),s(!0),await u(t,n),c("/testing")}catch{a("Failed to log in. Please check your credentials.")}finally{s(!1)}}async function d(){try{a(""),s(!0),await l(),c("/testing")}catch{a("Failed to sign in with Google. Please try again.")}finally{s(!1)}}return S.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:S.jsxs("div",{className:"max-w-md w-full space-y-8",children:[S.jsx("div",{children:S.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sign in to your account"})}),S.jsxs("form",{className:"mt-8 space-y-6",onSubmit:f,children:[i&&S.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:S.jsx("span",{className:"block sm:inline",children:i})}),S.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"email-address",className:"sr-only",children:"Email address"}),S.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Email address",value:t,onChange:h=>e(h.target.value)})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),S.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Password",value:n,onChange:h=>r(h.target.value)})]})]}),S.jsxs("div",{className:"space-y-4",children:[S.jsx("button",{type:"submit",disabled:o,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:o?"Signing in...":"Sign in"}),S.jsxs("div",{className:"relative",children:[S.jsx("div",{className:"absolute inset-0 flex items-center",children:S.jsx("div",{className:"w-full border-t border-gray-300"})}),S.jsx("div",{className:"relative flex justify-center text-sm",children:S.jsx("span",{className:"px-2 bg-gray-50 text-gray-500",children:"Or continue with"})})]}),S.jsxs("button",{type:"button",onClick:d,disabled:o,className:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[S.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[S.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),S.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),S.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),S.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Sign in with Google"]})]})]}),S.jsx("div",{className:"text-center",children:S.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",S.jsx(Ni,{to:"/signup",className:"font-medium text-blue-600 hover:text-blue-500",children:"Sign up"})]})})]})})}function Kbe(){const[t,e]=X.useState(""),[n,r]=X.useState(""),[i,a]=X.useState(""),[o,s]=X.useState(""),[u,l]=X.useState(!1),{signup:c}=zf(),f=E0();async function d(h){if(h.preventDefault(),n!==i)return s("Passwords do not match");try{s(""),l(!0),await c(t,n),f("/testing")}catch{s("Failed to create an account. Please try again.")}finally{l(!1)}}return S.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:S.jsxs("div",{className:"max-w-md w-full space-y-8",children:[S.jsx("div",{children:S.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Create your account"})}),S.jsxs("form",{className:"mt-8 space-y-6",onSubmit:d,children:[o&&S.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:S.jsx("span",{className:"block sm:inline",children:o})}),S.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"email-address",className:"sr-only",children:"Email address"}),S.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Email address",value:t,onChange:h=>e(h.target.value)})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),S.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Password",value:n,onChange:h=>r(h.target.value)})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"confirm-password",className:"sr-only",children:"Confirm Password"}),S.jsx("input",{id:"confirm-password",name:"confirm-password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Confirm Password",value:i,onChange:h=>a(h.target.value)})]})]}),S.jsx("div",{children:S.jsx("button",{type:"submit",disabled:u,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:u?"Creating account...":"Sign up"})})]}),S.jsx("div",{className:"text-center",children:S.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",S.jsx(Ni,{to:"/login",className:"font-medium text-blue-600 hover:text-blue-500",children:"Sign in"})]})})]})})}function Ybe(){const{currentUser:t}=zf(),[e,n]=X.useState([]),[r,i]=X.useState(!0),[a,o]=X.useState("all");X.useEffect(()=>{if(!t){i(!1);return}const f=N6(D6,`quiz-results/${t.uid}`),d=kbe(f,h=>{if(h.exists()){const p=h.val(),m=Object.keys(p).map(g=>({id:g,...p[g]}));m.sort((g,v)=>v.timestamp-g.timestamp),n(m)}else n([]);i(!1)});return()=>{d()}},[t]);const s=a==="all"?e:e.filter(f=>f.category===a),u=["all",...new Set(e.map(f=>f.category))],l=f=>new Date(f).toLocaleString(),c=f=>{const d=Math.floor(f/60),h=f%60;return`${d}:${h<10?"0":""}${h}`};return r?S.jsx("div",{className:"flex justify-center items-center min-h-screen",children:S.jsxs("div",{className:"text-center",children:[S.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-500 border-t-transparent mx-auto mb-4"}),S.jsx("p",{className:"text-gray-600",children:"Loading your results..."})]})}):t?S.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-12",children:[S.jsxs("div",{className:"flex justify-between items-center mb-8",children:[S.jsx("h1",{className:"text-4xl font-bold text-gray-800",children:"My Quiz Results"}),S.jsx(Ni,{to:"/testing",className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-semibold transition-all",children:"Take Another Quiz"})]}),e.length===0?S.jsxs("div",{className:"text-center py-16 bg-gray-50 rounded-lg",children:[S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 text-gray-400 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),S.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-2",children:"No Quiz Results Yet"}),S.jsx("p",{className:"text-gray-600 mb-6",children:"Take your first quiz to start tracking your progress!"}),S.jsx(Ni,{to:"/testing",className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-semibold transition-all",children:"Start a Quiz"})]}):S.jsxs(S.Fragment,{children:[S.jsxs("div",{className:"mb-6 flex items-center gap-4",children:[S.jsx("label",{htmlFor:"filter",className:"font-medium text-gray-700",children:"Filter by Category:"}),S.jsx("select",{id:"filter",value:a,onChange:f=>o(f.target.value),className:"border border-gray-300 rounded-md px-3 py-1.5 focus:outline-none focus:ring-2 focus:ring-blue-500",children:u.map(f=>S.jsx("option",{value:f,children:f==="all"?"All Categories":f},f))})]}),S.jsx("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:S.jsx("div",{className:"overflow-x-auto",children:S.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[S.jsx("thead",{className:"bg-gray-50",children:S.jsxs("tr",{children:[S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Score"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Percentage"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time Taken"})]})}),S.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(f=>S.jsxs("tr",{children:[S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:l(f.timestamp)}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:S.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800",children:f.category})}),S.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[f.score," / ",f.totalQuestions]}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:S.jsxs("div",{className:"flex items-center",children:[S.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:S.jsx("div",{className:`h-2.5 rounded-full ${f.score/f.totalQuestions>=.7?"bg-green-600":f.score/f.totalQuestions>=.4?"bg-yellow-500":"bg-red-600"}`,style:{width:`${f.score/f.totalQuestions*100}%`}})}),S.jsxs("span",{className:"ml-3 text-sm font-medium",children:[Math.round(f.score/f.totalQuestions*100),"%"]})]})}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:c(f.timeTaken)})]},f.id))})]})})})]})]}):S.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-16 text-center",children:[S.jsx("h1",{className:"text-5xl font-bold mb-6 text-blue-700",children:"Quiz Results"}),S.jsx("p",{className:"text-lg mb-6 text-gray-600",children:"Please log in to view your quiz results."}),S.jsxs("div",{className:"flex justify-center gap-4",children:[S.jsx(Ni,{to:"/login",className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-semibold transition-all",children:"Login"}),S.jsx(Ni,{to:"/signup",className:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg font-semibold transition-all",children:"Sign Up"})]})]})}const Xbe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20256%20256'%20id='boy'%3e%3cpath%20fill='%23da865c'%20d='M181.38%20254.46c0-22.62-21.43-46.47-49.58-51.23v-25.48h-20.26v25.48C83.39%20208%2062%20231.84%2062%20254.46c1.23-1.27%20120.65-1.27%20119.38%200Z'%3e%3c/path%3e%3cpath%20fill='%23c97c55'%20d='M111.54%20177.75h20.26V194h-20.26z'%3e%3c/path%3e%3cpath%20fill='%2339240f'%20d='M209%2075.3a19.6%2019.6%200%200%200-14.15-18.82%2019.61%2019.61%200%200%200-21.78-27.14%2019.6%2019.6%200%200%200-30.31-13.07%2021.35%2021.35%200%200%200-38.65%200%2019.6%2019.6%200%200%200-30.29%2013.07A19.38%2019.38%200%200%200%2070%2029a19.58%2019.58%200%200%200-17.95%2027.48%2019.59%2019.59%200%200%200-9.56%2031.44%2033%2033%200%201%200%2034.36-15.63%2019.21%2019.21%200%200%200-1.42-4.9%2019.62%2019.62%200%200%200%2013.88-15.64%2019.59%2019.59%200%200%200%2020.9-9.58%2021.33%2021.33%200%200%200%2026.49%200%2019.61%2019.61%200%200%200%2020.91%209.58%2019.59%2019.59%200%200%200%2013.87%2015.64%2019.63%2019.63%200%200%200-1.42%204.9%2033%2033%200%201%200%2034.36%2015.63A19.53%2019.53%200%200%200%20209%2075.3Z'%3e%3c/path%3e%3cpath%20fill='%23d7805d'%20d='M54%20123.9c3.29%204.2%202.66%2015.92%201.14%2017.12s-13-1-16.34-5.19A9.66%209.66%200%200%201%2054%20123.9zm138.4%200c-3.29%204.2-2.66%2015.92-1.14%2017.12s13.05-1%2016.34-5.19a9.66%209.66%200%200%200-15.2-11.93z'%3e%3c/path%3e%3cpath%20fill='%23da865c'%20d='M194.55%20126.45c5.16%2043.81-27.26%2062.05-71%2062.05s-78.15-18.24-72.95-62c5.35-43.81%2037.3-75.21%2072-75.21s66.6%2031.35%2071.95%2075.16Z'%3e%3c/path%3e%3cpath%20fill='none'%20stroke='%238b3607'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='3'%20d='M129%20132.89a6.44%206.44%200%200%200-12.87%200'%3e%3c/path%3e%3cpath%20fill='none'%20stroke='%233d2513'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='5'%20d='M79.07%2094.68a8.94%208.94%200%200%201%206.4-3.32%209.09%209.09%200%200%201%203.51.49m76.19%202.83a8.94%208.94%200%200%200-6.4-3.32%209.09%209.09%200%200%200-3.51.49'%3e%3c/path%3e%3cellipse%20cx='74'%20cy='141.31'%20fill='%23d67656'%20rx='12.94'%20ry='8.91'%20transform='rotate(-2.04%2073.896%20141.214)'%3e%3c/ellipse%3e%3ccircle%20cx='67.3'%20cy='138.59'%20r='3.57'%20fill='%23d67656'%3e%3c/circle%3e%3cellipse%20cx='170.26'%20cy='141.31'%20fill='%23d67656'%20rx='8.91'%20ry='12.94'%20transform='rotate(-87.96%20170.26%20141.308)'%3e%3c/ellipse%3e%3ccircle%20cx='176.96'%20cy='138.59'%20r='3.57'%20fill='%23fff'%20opacity='.2'%3e%3c/circle%3e%3ccircle%20cx='67.3'%20cy='138.59'%20r='3.57'%20fill='%23fff'%20opacity='.2'%3e%3c/circle%3e%3cpath%20fill='%233d2513'%20d='M182.58%2067.34a15.41%2015.41%200%200%200-5.2.92%2019.88%2019.88%200%200%200-29.95-21.08%2025.88%2025.88%200%200%200-51.51%200%2019.89%2019.89%200%200%200-30%2020.82%2015.25%2015.25%200%200%200-4.56-.69%2015.45%2015.45%200%201%200%2015.45%2015.48v-.81a19.85%2019.85%200%200%200%2027.83-12.78%2025.86%2025.86%200%200%200%2034.06%200%2019.87%2019.87%200%200%200%2028.49%2012.48c0%20.37-.06.74-.06%201.11a15.45%2015.45%200%201%200%2015.45-15.45Z'%3e%3c/path%3e%3cpath%20fill='%23c0322c'%20d='M156.43%20242h22.86c-5.24-15.87-19.88-30.48-38.7-36.59a45.71%2045.71%200%200%201-37-.28c-19.22%205.92-34.22%2020.74-39.54%2036.87h22.86v11.69c20.41-.22%2049.12-.22%2069.52%200Z'%3e%3c/path%3e%3cpath%20fill='%23c7342e'%20d='M86.91%20249.88h69.52v-4H86.91Zm89.34-15H67.06c-.68%201.32-1.3%202.65-1.86%204h112.93c-.55-1.35-1.19-2.68-1.88-4Zm-7.57-11H74.63q-1.71%202-3.21%204h100.49c-1-1.37-2.09-2.7-3.23-4Zm-12.62-11H87.24a63.91%2063.91%200%200%200-5.4%204h79.62a65.56%2065.56%200%200%200-5.4-4Z'%3e%3c/path%3e%3cpath%20fill='%23ffe9e8'%20d='M119.64%20209.08c-.75%200-1.5-.11-2.23-.18h-.39c-.76-.09-1.51-.19-2.25-.31h-.08c-.76-.13-1.5-.27-2.23-.43h-.17c-.74-.17-1.45-.35-2.16-.54l-.23-.07c-.72-.2-1.42-.41-2.11-.65h-.05a36.83%2036.83%200%200%201-4-1.65h-.09c-1.45.45-2.88%201-4.29%201.51%205.8%204%2014%206.54%2023.09%206.54%208.8%200%2016.77-2.35%2022.53-6.16-1.42-.58-2.86-1.13-4.34-1.61-.63.29-1.28.57-2%20.83h-.07a40.87%2040.87%200%200%201-4.22%201.38q-1%20.27-2.13.51l-.26.05c-.72.15-1.44.28-2.18.4h-.06c-.7.11-1.42.2-2.15.28h-.32c-.71.08-1.43.13-2.16.17h-.43c-.75%200-1.5.06-2.26.06s-1.59%200-2.37-.06Z'%3e%3c/path%3e%3cpath%20fill='none'%20stroke='%233d2513'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='3'%20d='M79.87%20119.21a6.65%206.65%200%200%201%2012.38-.37m63.38.37a6.64%206.64%200%200%201%2012.37-.37'%3e%3c/path%3e%3cpath%20fill='%238b3607'%20d='M122.5%20164c6.36%200%2011.76-3.46%2013.72-8.27a2.94%202.94%200%200%200-2.78-4h-21.88a2.94%202.94%200%200%200-2.78%204c1.96%204.81%207.36%208.27%2013.72%208.27Z'%3e%3c/path%3e%3c/svg%3e",T6=X.createContext({});function Qbe(t){const e=X.useRef(null);return e.current===null&&(e.current=t()),e.current}const kE=X.createContext(null),M6=X.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function Zbe(t=!0){const e=X.useContext(kE);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,a=X.useId();X.useEffect(()=>{t&&i(a)},[t]);const o=X.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,o]:[!0]}const FE=typeof window<"u",Jbe=FE?X.useLayoutEffect:X.useEffect,Mi=t=>t;let iw=Mi;function PE(t){let e;return()=>(e===void 0&&(e=t()),e)}const lf=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},Fo=t=>t*1e3,Po=t=>t/1e3,ewe={skipAnimations:!1,useManualTiming:!1};function twe(t){let e=new Set,n=new Set,r=!1,i=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function s(l){a.has(l)&&(u.schedule(l),t()),l(o)}const u={schedule:(l,c=!1,f=!1)=>{const h=f&&r?e:n;return c&&a.add(l),h.has(l)||h.add(l),l},cancel:l=>{n.delete(l),a.delete(l)},process:l=>{if(o=l,r){i=!0;return}r=!0,[e,n]=[n,e],e.forEach(s),e.clear(),r=!1,i&&(i=!1,u.process(l))}};return u}const xm=["read","resolveKeyframes","update","preRender","render","postRender"],nwe=40;function I6(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,o=xm.reduce((v,x)=>(v[x]=twe(a),v),{}),{read:s,resolveKeyframes:u,update:l,preRender:c,render:f,postRender:d}=o,h=()=>{const v=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(v-i.timestamp,nwe),1),i.timestamp=v,i.isProcessing=!0,s.process(i),u.process(i),l.process(i),c.process(i),f.process(i),d.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(h))},p=()=>{n=!0,r=!0,i.isProcessing||t(h)};return{schedule:xm.reduce((v,x)=>{const y=o[x];return v[x]=(b,w=!1,_=!1)=>(n||p(),y.schedule(b,w,_)),v},{}),cancel:v=>{for(let x=0;x<xm.length;x++)o[xm[x]].cancel(v)},state:i,steps:o}}const{schedule:cn,cancel:Qs,state:ur,steps:D1}=I6(typeof requestAnimationFrame<"u"?requestAnimationFrame:Mi,!0),R6=X.createContext({strict:!1}),gI={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},cf={};for(const t in gI)cf[t]={isEnabled:e=>gI[t].some(n=>!!e[n])};function rwe(t){for(const e in t)cf[e]={...cf[e],...t[e]}}const iwe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Dg(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||iwe.has(t)}let k6=t=>!Dg(t);function awe(t){t&&(k6=e=>e.startsWith("on")?!Dg(e):t(e))}try{awe(require("@emotion/is-prop-valid").default)}catch{}function owe(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(k6(i)||n===!0&&Dg(i)||!e&&!Dg(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function swe(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const sy=X.createContext({});function Rh(t){return typeof t=="string"||Array.isArray(t)}function uy(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const OE=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],BE=["initial",...OE];function ly(t){return uy(t.animate)||BE.some(e=>Rh(t[e]))}function F6(t){return!!(ly(t)||t.variants)}function uwe(t,e){if(ly(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Rh(n)?n:void 0,animate:Rh(r)?r:void 0}}return t.inherit!==!1?e:{}}function lwe(t){const{initial:e,animate:n}=uwe(t,X.useContext(sy));return X.useMemo(()=>({initial:e,animate:n}),[yI(e),yI(n)])}function yI(t){return Array.isArray(t)?t.join(" "):t}const cwe=Symbol.for("motionComponentSymbol");function hc(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function fwe(t,e,n){return X.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):hc(n)&&(n.current=r))},[e])}const LE=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),dwe="framerAppearId",P6="data-"+LE(dwe),{schedule:jE,cancel:h4e}=I6(queueMicrotask,!1),O6=X.createContext({});function hwe(t,e,n,r,i){var a,o;const{visualElement:s}=X.useContext(sy),u=X.useContext(R6),l=X.useContext(kE),c=X.useContext(M6).reducedMotion,f=X.useRef(null);r=r||u.renderer,!f.current&&r&&(f.current=r(t,{visualState:e,parent:s,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const d=f.current,h=X.useContext(O6);d&&!d.projection&&i&&(d.type==="html"||d.type==="svg")&&pwe(f.current,n,i,h);const p=X.useRef(!1);X.useInsertionEffect(()=>{d&&p.current&&d.update(n,l)});const m=n[P6],g=X.useRef(!!m&&!(!((a=window.MotionHandoffIsComplete)===null||a===void 0)&&a.call(window,m))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,m)));return Jbe(()=>{d&&(p.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),jE.render(d.render),g.current&&d.animationState&&d.animationState.animateChanges())}),X.useEffect(()=>{d&&(!g.current&&d.animationState&&d.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)===null||v===void 0||v.call(window,m)}),g.current=!1))}),d}function pwe(t,e,n,r){const{layoutId:i,layout:a,drag:o,dragConstraints:s,layoutScroll:u,layoutRoot:l}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:B6(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!o||s&&hc(s),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,layoutScroll:u,layoutRoot:l})}function B6(t){if(t)return t.options.allowProjection!==!1?t.projection:B6(t.parent)}function mwe({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){var a,o;t&&rwe(t);function s(l,c){let f;const d={...X.useContext(M6),...l,layoutId:vwe(l)},{isStatic:h}=d,p=lwe(l),m=r(l,h);if(!h&&FE){gwe();const g=ywe(d);f=g.MeasureLayout,p.visualElement=hwe(i,m,d,e,g.ProjectionNode)}return S.jsxs(sy.Provider,{value:p,children:[f&&p.visualElement?S.jsx(f,{visualElement:p.visualElement,...d}):null,n(i,l,fwe(m,p.visualElement,c),m,h,p.visualElement)]})}s.displayName=`motion.${typeof i=="string"?i:`create(${(o=(a=i.displayName)!==null&&a!==void 0?a:i.name)!==null&&o!==void 0?o:""})`}`;const u=X.forwardRef(s);return u[cwe]=i,u}function vwe({layoutId:t}){const e=X.useContext(T6).id;return e&&t!==void 0?e+"-"+t:t}function gwe(t,e){X.useContext(R6).strict}function ywe(t){const{drag:e,layout:n}=cf;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const xwe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function $E(t){return typeof t!="string"||t.includes("-")?!1:!!(xwe.indexOf(t)>-1||/[A-Z]/u.test(t))}function xI(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function zE(t,e,n,r){if(typeof e=="function"){const[i,a]=xI(r);e=e(n!==void 0?n:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=xI(r);e=e(n!==void 0?n:t.custom,i,a)}return e}const aw=t=>Array.isArray(t),bwe=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),wwe=t=>aw(t)?t[t.length-1]||0:t,Rr=t=>!!(t&&t.getVelocity);function tv(t){const e=Rr(t)?t.get():t;return bwe(e)?e.toValue():e}function _we({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,a){const o={latestValues:Ewe(r,i,a,t),renderState:e()};return n&&(o.onMount=s=>n({props:r,current:s,...o}),o.onUpdate=s=>n(s)),o}const L6=t=>(e,n)=>{const r=X.useContext(sy),i=X.useContext(kE),a=()=>_we(t,e,r,i);return n?a():Qbe(a)};function Ewe(t,e,n,r){const i={},a=r(t,{});for(const d in a)i[d]=tv(a[d]);let{initial:o,animate:s}=t;const u=ly(t),l=F6(t);e&&l&&!u&&t.inherit!==!1&&(o===void 0&&(o=e.initial),s===void 0&&(s=e.animate));let c=n?n.initial===!1:!1;c=c||o===!1;const f=c?s:o;if(f&&typeof f!="boolean"&&!uy(f)){const d=Array.isArray(f)?f:[f];for(let h=0;h<d.length;h++){const p=zE(t,d[h]);if(p){const{transitionEnd:m,transition:g,...v}=p;for(const x in v){let y=v[x];if(Array.isArray(y)){const b=c?y.length-1:0;y=y[b]}y!==null&&(i[x]=y)}for(const x in m)i[x]=m[x]}}}return i}const Uf=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ml=new Set(Uf),j6=t=>e=>typeof e=="string"&&e.startsWith(t),$6=j6("--"),Cwe=j6("var(--"),UE=t=>Cwe(t)?Nwe.test(t.split("/*")[0].trim()):!1,Nwe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,z6=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Ho=(t,e,n)=>n>e?e:n<t?t:n,Wf={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},kh={...Wf,transform:t=>Ho(0,1,t)},bm={...Wf,default:1},gp=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),ls=gp("deg"),Qa=gp("%"),nt=gp("px"),Swe=gp("vh"),Dwe=gp("vw"),bI={...Qa,parse:t=>Qa.parse(t)/100,transform:t=>Qa.transform(t*100)},Awe={borderWidth:nt,borderTopWidth:nt,borderRightWidth:nt,borderBottomWidth:nt,borderLeftWidth:nt,borderRadius:nt,radius:nt,borderTopLeftRadius:nt,borderTopRightRadius:nt,borderBottomRightRadius:nt,borderBottomLeftRadius:nt,width:nt,maxWidth:nt,height:nt,maxHeight:nt,top:nt,right:nt,bottom:nt,left:nt,padding:nt,paddingTop:nt,paddingRight:nt,paddingBottom:nt,paddingLeft:nt,margin:nt,marginTop:nt,marginRight:nt,marginBottom:nt,marginLeft:nt,backgroundPositionX:nt,backgroundPositionY:nt},Twe={rotate:ls,rotateX:ls,rotateY:ls,rotateZ:ls,scale:bm,scaleX:bm,scaleY:bm,scaleZ:bm,skew:ls,skewX:ls,skewY:ls,distance:nt,translateX:nt,translateY:nt,translateZ:nt,x:nt,y:nt,z:nt,perspective:nt,transformPerspective:nt,opacity:kh,originX:bI,originY:bI,originZ:nt},wI={...Wf,transform:Math.round},WE={...Awe,...Twe,zIndex:wI,size:nt,fillOpacity:kh,strokeOpacity:kh,numOctaves:wI},Mwe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Iwe=Uf.length;function Rwe(t,e,n){let r="",i=!0;for(let a=0;a<Iwe;a++){const o=Uf[a],s=t[o];if(s===void 0)continue;let u=!0;if(typeof s=="number"?u=s===(o.startsWith("scale")?1:0):u=parseFloat(s)===0,!u||n){const l=z6(s,WE[o]);if(!u){i=!1;const c=Mwe[o]||o;r+=`${c}(${l}) `}n&&(e[o]=l)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function VE(t,e,n){const{style:r,vars:i,transformOrigin:a}=t;let o=!1,s=!1;for(const u in e){const l=e[u];if(Ml.has(u)){o=!0;continue}else if($6(u)){i[u]=l;continue}else{const c=z6(l,WE[u]);u.startsWith("origin")?(s=!0,a[u]=c):r[u]=c}}if(e.transform||(o||n?r.transform=Rwe(e,t.transform,n):r.transform&&(r.transform="none")),s){const{originX:u="50%",originY:l="50%",originZ:c=0}=a;r.transformOrigin=`${u} ${l} ${c}`}}const kwe={offset:"stroke-dashoffset",array:"stroke-dasharray"},Fwe={offset:"strokeDashoffset",array:"strokeDasharray"};function Pwe(t,e,n=1,r=0,i=!0){t.pathLength=1;const a=i?kwe:Fwe;t[a.offset]=nt.transform(-r);const o=nt.transform(e),s=nt.transform(n);t[a.array]=`${o} ${s}`}function _I(t,e,n){return typeof t=="string"?t:nt.transform(e+n*t)}function Owe(t,e,n){const r=_I(e,t.x,t.width),i=_I(n,t.y,t.height);return`${r} ${i}`}function qE(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:a,pathLength:o,pathSpacing:s=1,pathOffset:u=0,...l},c,f){if(VE(t,l,f),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:d,style:h,dimensions:p}=t;d.transform&&(p&&(h.transform=d.transform),delete d.transform),p&&(i!==void 0||a!==void 0||h.transform)&&(h.transformOrigin=Owe(p,i!==void 0?i:.5,a!==void 0?a:.5)),e!==void 0&&(d.x=e),n!==void 0&&(d.y=n),r!==void 0&&(d.scale=r),o!==void 0&&Pwe(d,o,s,u,!1)}const HE=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),U6=()=>({...HE(),attrs:{}}),GE=t=>typeof t=="string"&&t.toLowerCase()==="svg";function W6(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const a in n)t.style.setProperty(a,n[a])}const V6=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function q6(t,e,n,r){W6(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(V6.has(i)?i:LE(i),e.attrs[i])}const Ag={};function Bwe(t){Object.assign(Ag,t)}function H6(t,{layout:e,layoutId:n}){return Ml.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Ag[t]||t==="opacity")}function KE(t,e,n){var r;const{style:i}=t,a={};for(const o in i)(Rr(i[o])||e.style&&Rr(e.style[o])||H6(o,t)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(a[o]=i[o]);return a}function G6(t,e,n){const r=KE(t,e,n);for(const i in t)if(Rr(t[i])||Rr(e[i])){const a=Uf.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=t[i]}return r}function Lwe(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const EI=["x","y","width","height","cx","cy","r"],jwe={useVisualState:L6({scrapeMotionValuesFromProps:G6,createRenderState:U6,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let a=!!t.drag;if(!a){for(const s in i)if(Ml.has(s)){a=!0;break}}if(!a)return;let o=!e;if(e)for(let s=0;s<EI.length;s++){const u=EI[s];t[u]!==e[u]&&(o=!0)}o&&cn.read(()=>{Lwe(n,r),cn.render(()=>{qE(r,i,GE(n.tagName),t.transformTemplate),q6(n,r)})})}})},$we={useVisualState:L6({scrapeMotionValuesFromProps:KE,createRenderState:HE})};function K6(t,e,n){for(const r in e)!Rr(e[r])&&!H6(r,n)&&(t[r]=e[r])}function zwe({transformTemplate:t},e){return X.useMemo(()=>{const n=HE();return VE(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Uwe(t,e){const n=t.style||{},r={};return K6(r,n,t),Object.assign(r,zwe(t,e)),r}function Wwe(t,e){const n={},r=Uwe(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function Vwe(t,e,n,r){const i=X.useMemo(()=>{const a=U6();return qE(a,e,GE(r),t.transformTemplate),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};K6(a,t.style,t),i.style={...a,...i.style}}return i}function qwe(t=!1){return(n,r,i,{latestValues:a},o)=>{const u=($E(n)?Vwe:Wwe)(r,a,o,n),l=owe(r,typeof n=="string",t),c=n!==X.Fragment?{...l,...u,ref:i}:{},{children:f}=r,d=X.useMemo(()=>Rr(f)?f.get():f,[f]);return X.createElement(n,{...c,children:d})}}function Hwe(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...$E(r)?jwe:$we,preloadedFeatures:t,useRender:qwe(i),createVisualElement:e,Component:r};return mwe(o)}}function Y6(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function cy(t,e,n){const r=t.getProps();return zE(r,e,n!==void 0?n:r.custom,t)}const Gwe=PE(()=>window.ScrollTimeline!==void 0);class Kwe{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(Gwe()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,a)=>{i&&i(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class Ywe extends Kwe{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function YE(t,e){return t?t[e]||t.default||t:void 0}const ow=2e4;function X6(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<ow;)e+=n,r=t.next(e);return e>=ow?1/0:e}function XE(t){return typeof t=="function"}function CI(t,e){t.timeline=e,t.onfinish=null}const QE=t=>Array.isArray(t)&&typeof t[0]=="number",Xwe={linearEasing:void 0};function Qwe(t,e){const n=PE(t);return()=>{var r;return(r=Xwe[e])!==null&&r!==void 0?r:n()}}const Tg=Qwe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Q6=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let a=0;a<i;a++)r+=t(lf(0,i-1,a))+", ";return`linear(${r.substring(0,r.length-2)})`};function Z6(t){return!!(typeof t=="function"&&Tg()||!t||typeof t=="string"&&(t in sw||Tg())||QE(t)||Array.isArray(t)&&t.every(Z6))}const _d=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,sw={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:_d([0,.65,.55,1]),circOut:_d([.55,0,1,.45]),backIn:_d([.31,.01,.66,-.59]),backOut:_d([.33,1.53,.69,.99])};function J6(t,e){if(t)return typeof t=="function"&&Tg()?Q6(t,e):QE(t)?_d(t):Array.isArray(t)?t.map(n=>J6(n,e)||sw.easeOut):sw[t]}const fa={x:!1,y:!1};function eL(){return fa.x||fa.y}function Zwe(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const a=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(t);return a?Array.from(a):[]}return Array.from(t)}function tL(t,e){const n=Zwe(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function NI(t){return e=>{e.pointerType==="touch"||eL()||t(e)}}function Jwe(t,e,n={}){const[r,i,a]=tL(t,n),o=NI(s=>{const{target:u}=s,l=e(s);if(typeof l!="function"||!u)return;const c=NI(f=>{l(f),u.removeEventListener("pointerleave",c)});u.addEventListener("pointerleave",c,i)});return r.forEach(s=>{s.addEventListener("pointerenter",o,i)}),a}const nL=(t,e)=>e?t===e?!0:nL(t,e.parentElement):!1,ZE=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,e2e=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function t2e(t){return e2e.has(t.tagName)||t.tabIndex!==-1}const Ed=new WeakSet;function SI(t){return e=>{e.key==="Enter"&&t(e)}}function A1(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const n2e=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=SI(()=>{if(Ed.has(n))return;A1(n,"down");const i=SI(()=>{A1(n,"up")}),a=()=>A1(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function DI(t){return ZE(t)&&!eL()}function r2e(t,e,n={}){const[r,i,a]=tL(t,n),o=s=>{const u=s.currentTarget;if(!DI(s)||Ed.has(u))return;Ed.add(u);const l=e(s),c=(h,p)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",d),!(!DI(h)||!Ed.has(u))&&(Ed.delete(u),typeof l=="function"&&l(h,{success:p}))},f=h=>{c(h,n.useGlobalTarget||nL(u,h.target))},d=h=>{c(h,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",d,i)};return r.forEach(s=>{!t2e(s)&&s.getAttribute("tabindex")===null&&(s.tabIndex=0),(n.useGlobalTarget?window:s).addEventListener("pointerdown",o,i),s.addEventListener("focus",l=>n2e(l,i),i)}),a}function i2e(t){return t==="x"||t==="y"?fa[t]?null:(fa[t]=!0,()=>{fa[t]=!1}):fa.x||fa.y?null:(fa.x=fa.y=!0,()=>{fa.x=fa.y=!1})}const rL=new Set(["width","height","top","left","right","bottom",...Uf]);let nv;function a2e(){nv=void 0}const Za={now:()=>(nv===void 0&&Za.set(ur.isProcessing||ewe.useManualTiming?ur.timestamp:performance.now()),nv),set:t=>{nv=t,queueMicrotask(a2e)}};function JE(t,e){t.indexOf(e)===-1&&t.push(e)}function eC(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class tC{constructor(){this.subscriptions=[]}add(e){return JE(this.subscriptions,e),()=>eC(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let a=0;a<i;a++){const o=this.subscriptions[a];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function iL(t,e){return e?t*(1e3/e):0}const AI=30,o2e=t=>!isNaN(parseFloat(t));class s2e{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const a=Za.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Za.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=o2e(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new tC);const r=this.events[e].add(n);return e==="change"?()=>{r(),cn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Za.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>AI)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,AI);return iL(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Fh(t,e){return new s2e(t,e)}function u2e(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Fh(n))}function l2e(t,e){const n=cy(t,e);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const o in a){const s=wwe(a[o]);u2e(t,o,s)}}function c2e(t){return!!(Rr(t)&&t.add)}function uw(t,e){const n=t.getValue("willChange");if(c2e(n))return n.add(e)}function aL(t){return t.props[P6]}const oL=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,f2e=1e-7,d2e=12;function h2e(t,e,n,r,i){let a,o,s=0;do o=e+(n-e)/2,a=oL(o,r,i)-t,a>0?n=o:e=o;while(Math.abs(a)>f2e&&++s<d2e);return o}function yp(t,e,n,r){if(t===e&&n===r)return Mi;const i=a=>h2e(a,0,1,t,n);return a=>a===0||a===1?a:oL(i(a),e,r)}const sL=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,uL=t=>e=>1-t(1-e),lL=yp(.33,1.53,.69,.99),nC=uL(lL),cL=sL(nC),fL=t=>(t*=2)<1?.5*nC(t):.5*(2-Math.pow(2,-10*(t-1))),rC=t=>1-Math.sin(Math.acos(t)),dL=uL(rC),hL=sL(rC),pL=t=>/^0[^.\s]+$/u.test(t);function p2e(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||pL(t):!0}const zd=t=>Math.round(t*1e5)/1e5,iC=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function m2e(t){return t==null}const v2e=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,aC=(t,e)=>n=>!!(typeof n=="string"&&v2e.test(n)&&n.startsWith(t)||e&&!m2e(n)&&Object.prototype.hasOwnProperty.call(n,e)),mL=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,a,o,s]=r.match(iC);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(o),alpha:s!==void 0?parseFloat(s):1}},g2e=t=>Ho(0,255,t),T1={...Wf,transform:t=>Math.round(g2e(t))},Vu={test:aC("rgb","red"),parse:mL("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+T1.transform(t)+", "+T1.transform(e)+", "+T1.transform(n)+", "+zd(kh.transform(r))+")"};function y2e(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const lw={test:aC("#"),parse:y2e,transform:Vu.transform},pc={test:aC("hsl","hue"),parse:mL("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Qa.transform(zd(e))+", "+Qa.transform(zd(n))+", "+zd(kh.transform(r))+")"},Cr={test:t=>Vu.test(t)||lw.test(t)||pc.test(t),parse:t=>Vu.test(t)?Vu.parse(t):pc.test(t)?pc.parse(t):lw.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Vu.transform(t):pc.transform(t)},x2e=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function b2e(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(iC))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(x2e))===null||n===void 0?void 0:n.length)||0)>0}const vL="number",gL="color",w2e="var",_2e="var(",TI="${}",E2e=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ph(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const s=e.replace(E2e,u=>(Cr.test(u)?(r.color.push(a),i.push(gL),n.push(Cr.parse(u))):u.startsWith(_2e)?(r.var.push(a),i.push(w2e),n.push(u)):(r.number.push(a),i.push(vL),n.push(parseFloat(u))),++a,TI)).split(TI);return{values:n,split:s,indexes:r,types:i}}function yL(t){return Ph(t).values}function xL(t){const{split:e,types:n}=Ph(t),r=e.length;return i=>{let a="";for(let o=0;o<r;o++)if(a+=e[o],i[o]!==void 0){const s=n[o];s===vL?a+=zd(i[o]):s===gL?a+=Cr.transform(i[o]):a+=i[o]}return a}}const C2e=t=>typeof t=="number"?0:t;function N2e(t){const e=yL(t);return xL(t)(e.map(C2e))}const Zs={test:b2e,parse:yL,createTransformer:xL,getAnimatableNone:N2e},S2e=new Set(["brightness","contrast","saturate","opacity"]);function D2e(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(iC)||[];if(!r)return t;const i=n.replace(r,"");let a=S2e.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+i+")"}const A2e=/\b([a-z-]*)\(.*?\)/gu,cw={...Zs,getAnimatableNone:t=>{const e=t.match(A2e);return e?e.map(D2e).join(" "):t}},T2e={...WE,color:Cr,backgroundColor:Cr,outlineColor:Cr,fill:Cr,stroke:Cr,borderColor:Cr,borderTopColor:Cr,borderRightColor:Cr,borderBottomColor:Cr,borderLeftColor:Cr,filter:cw,WebkitFilter:cw},oC=t=>T2e[t];function bL(t,e){let n=oC(t);return n!==cw&&(n=Zs),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const M2e=new Set(["auto","none","0"]);function I2e(t,e,n){let r=0,i;for(;r<t.length&&!i;){const a=t[r];typeof a=="string"&&!M2e.has(a)&&Ph(a).values.length&&(i=t[r]),r++}if(i&&n)for(const a of e)t[a]=bL(n,i)}const MI=t=>t===Wf||t===nt,II=(t,e)=>parseFloat(t.split(", ")[e]),RI=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return II(i[1],e);{const a=r.match(/^matrix\((.+)\)$/u);return a?II(a[1],t):0}},R2e=new Set(["x","y","z"]),k2e=Uf.filter(t=>!R2e.has(t));function F2e(t){const e=[];return k2e.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const ff={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:RI(4,13),y:RI(5,14)};ff.translateX=ff.x;ff.translateY=ff.y;const Xu=new Set;let fw=!1,dw=!1;function wL(){if(dw){const t=Array.from(Xu).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=F2e(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,o])=>{var s;(s=r.getValue(a))===null||s===void 0||s.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}dw=!1,fw=!1,Xu.forEach(t=>t.complete()),Xu.clear()}function _L(){Xu.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(dw=!0)})}function P2e(){_L(),wL()}class sC{constructor(e,n,r,i,a,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Xu.add(this),fw||(fw=!0,cn.read(_L),cn.resolveKeyframes(wL))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let a=0;a<e.length;a++)if(e[a]===null)if(a===0){const o=i==null?void 0:i.get(),s=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const u=r.readValue(n,s);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=s),i&&o===void 0&&i.set(e[0])}else e[a]=e[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Xu.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Xu.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const EL=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),O2e=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function B2e(t){const e=O2e.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function CL(t,e,n=1){const[r,i]=B2e(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const o=a.trim();return EL(o)?parseFloat(o):o}return UE(i)?CL(i,e,n+1):i}const NL=t=>e=>e.test(t),L2e={test:t=>t==="auto",parse:t=>t},SL=[Wf,nt,Qa,ls,Dwe,Swe,L2e],kI=t=>SL.find(NL(t));class DL extends sC{constructor(e,n,r,i,a){super(e,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let l=e[u];if(typeof l=="string"&&(l=l.trim(),UE(l))){const c=CL(l,n.current);c!==void 0&&(e[u]=c),u===e.length-1&&(this.finalKeyframe=l)}}if(this.resolveNoneKeyframes(),!rL.has(r)||e.length!==2)return;const[i,a]=e,o=kI(i),s=kI(a);if(o!==s)if(MI(o)&&MI(s))for(let u=0;u<e.length;u++){const l=e[u];typeof l=="string"&&(e[u]=parseFloat(l))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)p2e(e[i])&&r.push(i);r.length&&I2e(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ff[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const a=n.getValue(r);a&&a.jump(this.measuredOrigin,!1);const o=i.length-1,s=i[o];i[o]=ff[r](n.measureViewportBox(),window.getComputedStyle(n.current)),s!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=s),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([u,l])=>{n.getValue(u).set(l)}),this.resolveNoneKeyframes()}}const FI=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Zs.test(t)||t==="0")&&!t.startsWith("url("));function j2e(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function $2e(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],o=FI(i,e),s=FI(a,e);return!o||!s?!1:j2e(t)||(n==="spring"||XE(n))&&r}const z2e=t=>t!==null;function fy(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(z2e),a=e&&n!=="loop"&&e%2===1?0:i.length-1;return!a||r===void 0?i[a]:r}const U2e=40;class AL{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:o="loop",...s}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Za.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:o,...s},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>U2e?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&P2e(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Za.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:a,delay:o,onComplete:s,onUpdate:u,isGenerator:l}=this.options;if(!l&&!$2e(e,r,i,a))if(o)this.options.duration=0;else{u&&u(fy(e,this.options,n)),s&&s(),this.resolveFinishedPromise();return}const c=this.initPlayback(e,n);c!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...c},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const gn=(t,e,n)=>t+(e-t)*n;function M1(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function W2e({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,a=0,o=0;if(!e)i=a=o=n;else{const s=n<.5?n*(1+e):n+e-n*e,u=2*n-s;i=M1(u,s,t+1/3),a=M1(u,s,t),o=M1(u,s,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:r}}function Mg(t,e){return n=>n>0?e:t}const I1=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},V2e=[lw,Vu,pc],q2e=t=>V2e.find(e=>e.test(t));function PI(t){const e=q2e(t);if(!e)return!1;let n=e.parse(t);return e===pc&&(n=W2e(n)),n}const OI=(t,e)=>{const n=PI(t),r=PI(e);if(!n||!r)return Mg(t,e);const i={...n};return a=>(i.red=I1(n.red,r.red,a),i.green=I1(n.green,r.green,a),i.blue=I1(n.blue,r.blue,a),i.alpha=gn(n.alpha,r.alpha,a),Vu.transform(i))},H2e=(t,e)=>n=>e(t(n)),xp=(...t)=>t.reduce(H2e),hw=new Set(["none","hidden"]);function G2e(t,e){return hw.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function K2e(t,e){return n=>gn(t,e,n)}function uC(t){return typeof t=="number"?K2e:typeof t=="string"?UE(t)?Mg:Cr.test(t)?OI:Q2e:Array.isArray(t)?TL:typeof t=="object"?Cr.test(t)?OI:Y2e:Mg}function TL(t,e){const n=[...t],r=n.length,i=t.map((a,o)=>uC(a)(a,e[o]));return a=>{for(let o=0;o<r;o++)n[o]=i[o](a);return n}}function Y2e(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=uC(t[i])(t[i],e[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function X2e(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const o=e.types[a],s=t.indexes[o][i[o]],u=(n=t.values[s])!==null&&n!==void 0?n:0;r[a]=u,i[o]++}return r}const Q2e=(t,e)=>{const n=Zs.createTransformer(e),r=Ph(t),i=Ph(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?hw.has(t)&&!i.values.length||hw.has(e)&&!r.values.length?G2e(t,e):xp(TL(X2e(r,i),i.values),n):Mg(t,e)};function ML(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?gn(t,e,n):uC(t)(t,e)}const Z2e=5;function IL(t,e,n){const r=Math.max(e-Z2e,0);return iL(n-t(r),e-r)}const Cn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},R1=.001;function J2e({duration:t=Cn.duration,bounce:e=Cn.bounce,velocity:n=Cn.velocity,mass:r=Cn.mass}){let i,a,o=1-e;o=Ho(Cn.minDamping,Cn.maxDamping,o),t=Ho(Cn.minDuration,Cn.maxDuration,Po(t)),o<1?(i=l=>{const c=l*o,f=c*t,d=c-n,h=pw(l,o),p=Math.exp(-f);return R1-d/h*p},a=l=>{const f=l*o*t,d=f*n+n,h=Math.pow(o,2)*Math.pow(l,2)*t,p=Math.exp(-f),m=pw(Math.pow(l,2),o);return(-i(l)+R1>0?-1:1)*((d-h)*p)/m}):(i=l=>{const c=Math.exp(-l*t),f=(l-n)*t+1;return-R1+c*f},a=l=>{const c=Math.exp(-l*t),f=(n-l)*(t*t);return c*f});const s=5/t,u=t_e(i,a,s);if(t=Fo(t),isNaN(u))return{stiffness:Cn.stiffness,damping:Cn.damping,duration:t};{const l=Math.pow(u,2)*r;return{stiffness:l,damping:o*2*Math.sqrt(r*l),duration:t}}}const e_e=12;function t_e(t,e,n){let r=n;for(let i=1;i<e_e;i++)r=r-t(r)/e(r);return r}function pw(t,e){return t*Math.sqrt(1-e*e)}const n_e=["duration","bounce"],r_e=["stiffness","damping","mass"];function BI(t,e){return e.some(n=>t[n]!==void 0)}function i_e(t){let e={velocity:Cn.velocity,stiffness:Cn.stiffness,damping:Cn.damping,mass:Cn.mass,isResolvedFromDuration:!1,...t};if(!BI(t,r_e)&&BI(t,n_e))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*Ho(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Cn.mass,stiffness:i,damping:a}}else{const n=J2e(t);e={...e,...n,mass:Cn.mass},e.isResolvedFromDuration=!0}return e}function RL(t=Cn.visualDuration,e=Cn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],s={done:!1,value:a},{stiffness:u,damping:l,mass:c,duration:f,velocity:d,isResolvedFromDuration:h}=i_e({...n,velocity:-Po(n.velocity||0)}),p=d||0,m=l/(2*Math.sqrt(u*c)),g=o-a,v=Po(Math.sqrt(u/c)),x=Math.abs(g)<5;r||(r=x?Cn.restSpeed.granular:Cn.restSpeed.default),i||(i=x?Cn.restDelta.granular:Cn.restDelta.default);let y;if(m<1){const w=pw(v,m);y=_=>{const E=Math.exp(-m*v*_);return o-E*((p+m*v*g)/w*Math.sin(w*_)+g*Math.cos(w*_))}}else if(m===1)y=w=>o-Math.exp(-v*w)*(g+(p+v*g)*w);else{const w=v*Math.sqrt(m*m-1);y=_=>{const E=Math.exp(-m*v*_),C=Math.min(w*_,300);return o-E*((p+m*v*g)*Math.sinh(C)+w*g*Math.cosh(C))/w}}const b={calculatedDuration:h&&f||null,next:w=>{const _=y(w);if(h)s.done=w>=f;else{let E=0;m<1&&(E=w===0?Fo(p):IL(y,w,_));const C=Math.abs(E)<=r,N=Math.abs(o-_)<=i;s.done=C&&N}return s.value=s.done?o:_,s},toString:()=>{const w=Math.min(X6(b),ow),_=Q6(E=>b.next(w*E).value,w,30);return w+"ms "+_}};return b}function LI({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:o,min:s,max:u,restDelta:l=.5,restSpeed:c}){const f=t[0],d={done:!1,value:f},h=C=>s!==void 0&&C<s||u!==void 0&&C>u,p=C=>s===void 0?u:u===void 0||Math.abs(s-C)<Math.abs(u-C)?s:u;let m=n*e;const g=f+m,v=o===void 0?g:o(g);v!==g&&(m=v-f);const x=C=>-m*Math.exp(-C/r),y=C=>v+x(C),b=C=>{const N=x(C),D=y(C);d.done=Math.abs(N)<=l,d.value=d.done?v:D};let w,_;const E=C=>{h(d.value)&&(w=C,_=RL({keyframes:[d.value,p(d.value)],velocity:IL(y,C,d.value),damping:i,stiffness:a,restDelta:l,restSpeed:c}))};return E(0),{calculatedDuration:null,next:C=>{let N=!1;return!_&&w===void 0&&(N=!0,b(C),E(C)),w!==void 0&&C>=w?_.next(C-w):(!N&&b(C),d)}}}const a_e=yp(.42,0,1,1),o_e=yp(0,0,.58,1),kL=yp(.42,0,.58,1),s_e=t=>Array.isArray(t)&&typeof t[0]!="number",jI={linear:Mi,easeIn:a_e,easeInOut:kL,easeOut:o_e,circIn:rC,circInOut:hL,circOut:dL,backIn:nC,backInOut:cL,backOut:lL,anticipate:fL},$I=t=>{if(QE(t)){iw(t.length===4);const[e,n,r,i]=t;return yp(e,n,r,i)}else if(typeof t=="string")return iw(jI[t]!==void 0),jI[t];return t};function u_e(t,e,n){const r=[],i=n||ML,a=t.length-1;for(let o=0;o<a;o++){let s=i(t[o],t[o+1]);if(e){const u=Array.isArray(e)?e[o]||Mi:e;s=xp(u,s)}r.push(s)}return r}function l_e(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const a=t.length;if(iw(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const s=u_e(e,r,i),u=s.length,l=c=>{if(o&&c<t[0])return e[0];let f=0;if(u>1)for(;f<t.length-2&&!(c<t[f+1]);f++);const d=lf(t[f],t[f+1],c);return s[f](d)};return n?c=>l(Ho(t[0],t[a-1],c)):l}function c_e(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=lf(0,e,r);t.push(gn(n,1,i))}}function f_e(t){const e=[0];return c_e(e,t.length-1),e}function d_e(t,e){return t.map(n=>n*e)}function h_e(t,e){return t.map(()=>e||kL).splice(0,t.length-1)}function Ig({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=s_e(r)?r.map($I):$I(r),a={done:!1,value:e[0]},o=d_e(n&&n.length===e.length?n:f_e(e),t),s=l_e(o,e,{ease:Array.isArray(i)?i:h_e(e,i)});return{calculatedDuration:t,next:u=>(a.value=s(u),a.done=u>=t,a)}}const p_e=t=>{const e=({timestamp:n})=>t(n);return{start:()=>cn.update(e,!0),stop:()=>Qs(e),now:()=>ur.isProcessing?ur.timestamp:Za.now()}},m_e={decay:LI,inertia:LI,tween:Ig,keyframes:Ig,spring:RL},v_e=t=>t/100;class lC extends AL{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:u}=this.options;u&&u()};const{name:n,motionValue:r,element:i,keyframes:a}=this.options,o=(i==null?void 0:i.KeyframeResolver)||sC,s=(u,l)=>this.onKeyframesResolved(u,l);this.resolver=new o(a,s,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:o=0}=this.options,s=XE(n)?n:m_e[n]||Ig;let u,l;s!==Ig&&typeof e[0]!="number"&&(u=xp(v_e,ML(e[0],e[1])),e=[0,100]);const c=s({...this.options,keyframes:e});a==="mirror"&&(l=s({...this.options,keyframes:[...e].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=X6(c));const{calculatedDuration:f}=c,d=f+i,h=d*(r+1)-i;return{generator:c,mirroredGenerator:l,mapPercentToKeyframes:u,calculatedDuration:f,resolvedDuration:d,totalDuration:h}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:C}=this.options;return{done:!0,value:C[C.length-1]}}const{finalKeyframe:i,generator:a,mirroredGenerator:o,mapPercentToKeyframes:s,keyframes:u,calculatedDuration:l,totalDuration:c,resolvedDuration:f}=r;if(this.startTime===null)return a.next(0);const{delay:d,repeat:h,repeatType:p,repeatDelay:m,onUpdate:g}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-c/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const v=this.currentTime-d*(this.speed>=0?1:-1),x=this.speed>=0?v<0:v>c;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=c);let y=this.currentTime,b=a;if(h){const C=Math.min(this.currentTime,c)/f;let N=Math.floor(C),D=C%1;!D&&C>=1&&(D=1),D===1&&N--,N=Math.min(N,h+1),!!(N%2)&&(p==="reverse"?(D=1-D,m&&(D-=m/f)):p==="mirror"&&(b=o)),y=Ho(0,1,D)*f}const w=x?{done:!1,value:u[0]}:b.next(y);s&&(w.value=s(w.value));let{done:_}=w;!x&&l!==null&&(_=this.speed>=0?this.currentTime>=c:this.currentTime<=0);const E=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&_);return E&&i!==void 0&&(w.value=fy(u,this.options,i)),g&&g(w.value),E&&this.finish(),w}get duration(){const{resolved:e}=this;return e?Po(e.calculatedDuration):0}get time(){return Po(this.currentTime)}set time(e){e=Fo(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Po(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=p_e,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const g_e=new Set(["opacity","clipPath","filter","transform"]);function y_e(t,e,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:o="loop",ease:s="easeInOut",times:u}={}){const l={[e]:n};u&&(l.offset=u);const c=J6(s,i);return Array.isArray(c)&&(l.easing=c),t.animate(l,{delay:r,duration:i,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"})}const x_e=PE(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Rg=10,b_e=2e4;function w_e(t){return XE(t.type)||t.type==="spring"||!Z6(t.ease)}function __e(t,e){const n=new lC({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let a=0;for(;!r.done&&a<b_e;)r=n.sample(a),i.push(r.value),a+=Rg;return{times:void 0,keyframes:i,duration:a-Rg,ease:"linear"}}const FL={anticipate:fL,backInOut:cL,circInOut:hL};function E_e(t){return t in FL}class zI extends AL{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:a}=this.options;this.resolver=new DL(a,(o,s)=>this.onKeyframesResolved(o,s),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:a,type:o,motionValue:s,name:u,startTime:l}=this.options;if(!s.owner||!s.owner.current)return!1;if(typeof a=="string"&&Tg()&&E_e(a)&&(a=FL[a]),w_e(this.options)){const{onComplete:f,onUpdate:d,motionValue:h,element:p,...m}=this.options,g=__e(e,m);e=g.keyframes,e.length===1&&(e[1]=e[0]),r=g.duration,i=g.times,a=g.ease,o="keyframes"}const c=y_e(s.owner.current,u,e,{...this.options,duration:r,times:i,ease:a});return c.startTime=l??this.calcStartTime(),this.pendingTimeline?(CI(c,this.pendingTimeline),this.pendingTimeline=void 0):c.onfinish=()=>{const{onComplete:f}=this.options;s.set(fy(e,this.options,n)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:c,duration:r,times:i,type:o,ease:a,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Po(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Po(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Fo(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Mi;const{animation:r}=n;CI(r,e)}return Mi}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:a,ease:o,times:s}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:l,onUpdate:c,onComplete:f,element:d,...h}=this.options,p=new lC({...h,keyframes:r,duration:i,type:a,ease:o,times:s,isGenerator:!0}),m=Fo(this.time);l.setWithVelocity(p.sample(m-Rg).value,p.sample(m).value,Rg)}const{onStop:u}=this.options;u&&u(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:a,damping:o,type:s}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:l}=n.owner.getProps();return x_e()&&r&&g_e.has(r)&&!u&&!l&&!i&&a!=="mirror"&&o!==0&&s!=="inertia"}}const C_e={type:"spring",stiffness:500,damping:25,restSpeed:10},N_e=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),S_e={type:"keyframes",duration:.8},D_e={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},A_e=(t,{keyframes:e})=>e.length>2?S_e:Ml.has(t)?t.startsWith("scale")?N_e(e[1]):C_e:D_e;function T_e({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:o,repeatDelay:s,from:u,elapsed:l,...c}){return!!Object.keys(c).length}const cC=(t,e,n,r={},i,a)=>o=>{const s=YE(r,t)||{},u=s.delay||r.delay||0;let{elapsed:l=0}=r;l=l-Fo(u);let c={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...s,delay:-l,onUpdate:d=>{e.set(d),s.onUpdate&&s.onUpdate(d)},onComplete:()=>{o(),s.onComplete&&s.onComplete()},name:t,motionValue:e,element:a?void 0:i};T_e(s)||(c={...c,...A_e(t,c)}),c.duration&&(c.duration=Fo(c.duration)),c.repeatDelay&&(c.repeatDelay=Fo(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let f=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(c.duration=0,c.delay===0&&(f=!0)),f&&!a&&e.get()!==void 0){const d=fy(c.keyframes,s);if(d!==void 0)return cn.update(()=>{c.onUpdate(d),c.onComplete()}),new Ywe([])}return!a&&zI.supports(c)?new zI(c):new lC(c)};function M_e({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function PL(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var a;let{transition:o=t.getDefaultTransition(),transitionEnd:s,...u}=e;r&&(o=r);const l=[],c=i&&t.animationState&&t.animationState.getState()[i];for(const f in u){const d=t.getValue(f,(a=t.latestValues[f])!==null&&a!==void 0?a:null),h=u[f];if(h===void 0||c&&M_e(c,f))continue;const p={delay:n,...YE(o||{},f)};let m=!1;if(window.MotionHandoffAnimation){const v=aL(t);if(v){const x=window.MotionHandoffAnimation(v,f,cn);x!==null&&(p.startTime=x,m=!0)}}uw(t,f),d.start(cC(f,d,h,t.shouldReduceMotion&&rL.has(f)?{type:!1}:p,t,m));const g=d.animation;g&&l.push(g)}return s&&Promise.all(l).then(()=>{cn.update(()=>{s&&l2e(t,s)})}),l}function mw(t,e,n={}){var r;const i=cy(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(a=n.transitionOverride);const o=i?()=>Promise.all(PL(t,i,n)):()=>Promise.resolve(),s=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:c=0,staggerChildren:f,staggerDirection:d}=a;return I_e(t,e,c+l,f,d,n)}:()=>Promise.resolve(),{when:u}=a;if(u){const[l,c]=u==="beforeChildren"?[o,s]:[s,o];return l().then(()=>c())}else return Promise.all([o(),s(n.delay)])}function I_e(t,e,n=0,r=0,i=1,a){const o=[],s=(t.variantChildren.size-1)*r,u=i===1?(l=0)=>l*r:(l=0)=>s-l*r;return Array.from(t.variantChildren).sort(R_e).forEach((l,c)=>{l.notify("AnimationStart",e),o.push(mw(l,e,{...a,delay:n+u(c)}).then(()=>l.notify("AnimationComplete",e)))}),Promise.all(o)}function R_e(t,e){return t.sortNodePosition(e)}function k_e(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>mw(t,a,n));r=Promise.all(i)}else if(typeof e=="string")r=mw(t,e,n);else{const i=typeof e=="function"?cy(t,e,n.custom):e;r=Promise.all(PL(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const F_e=BE.length;function OL(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?OL(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<F_e;n++){const r=BE[n],i=t.props[r];(Rh(i)||i===!1)&&(e[r]=i)}return e}const P_e=[...OE].reverse(),O_e=OE.length;function B_e(t){return e=>Promise.all(e.map(({animation:n,options:r})=>k_e(t,n,r)))}function L_e(t){let e=B_e(t),n=UI(),r=!0;const i=u=>(l,c)=>{var f;const d=cy(t,c,u==="exit"?(f=t.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(d){const{transition:h,transitionEnd:p,...m}=d;l={...l,...m,...p}}return l};function a(u){e=u(t)}function o(u){const{props:l}=t,c=OL(t.parent)||{},f=[],d=new Set;let h={},p=1/0;for(let g=0;g<O_e;g++){const v=P_e[g],x=n[v],y=l[v]!==void 0?l[v]:c[v],b=Rh(y),w=v===u?x.isActive:null;w===!1&&(p=g);let _=y===c[v]&&y!==l[v]&&b;if(_&&r&&t.manuallyAnimateOnMount&&(_=!1),x.protectedKeys={...h},!x.isActive&&w===null||!y&&!x.prevProp||uy(y)||typeof y=="boolean")continue;const E=j_e(x.prevProp,y);let C=E||v===u&&x.isActive&&!_&&b||g>p&&b,N=!1;const D=Array.isArray(y)?y:[y];let A=D.reduce(i(v),{});w===!1&&(A={});const{prevResolvedValues:T={}}=x,k={...T,...A},F=M=>{C=!0,d.has(M)&&(N=!0,d.delete(M)),x.needsAnimating[M]=!0;const B=t.getValue(M);B&&(B.liveStyle=!1)};for(const M in k){const B=A[M],R=T[M];if(h.hasOwnProperty(M))continue;let j=!1;aw(B)&&aw(R)?j=!Y6(B,R):j=B!==R,j?B!=null?F(M):d.add(M):B!==void 0&&d.has(M)?F(M):x.protectedKeys[M]=!0}x.prevProp=y,x.prevResolvedValues=A,x.isActive&&(h={...h,...A}),r&&t.blockInitialAnimation&&(C=!1),C&&(!(_&&E)||N)&&f.push(...D.map(M=>({animation:M,options:{type:v}})))}if(d.size){const g={};d.forEach(v=>{const x=t.getBaseTarget(v),y=t.getValue(v);y&&(y.liveStyle=!0),g[v]=x??null}),f.push({animation:g})}let m=!!f.length;return r&&(l.initial===!1||l.initial===l.animate)&&!t.manuallyAnimateOnMount&&(m=!1),r=!1,m?e(f):Promise.resolve()}function s(u,l){var c;if(n[u].isActive===l)return Promise.resolve();(c=t.variantChildren)===null||c===void 0||c.forEach(d=>{var h;return(h=d.animationState)===null||h===void 0?void 0:h.setActive(u,l)}),n[u].isActive=l;const f=o(u);for(const d in n)n[d].protectedKeys={};return f}return{animateChanges:o,setActive:s,setAnimateFunction:a,getState:()=>n,reset:()=>{n=UI(),r=!0}}}function j_e(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Y6(e,t):!1}function Eu(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function UI(){return{animate:Eu(!0),whileInView:Eu(),whileHover:Eu(),whileTap:Eu(),whileDrag:Eu(),whileFocus:Eu(),exit:Eu()}}class xu{constructor(e){this.isMounted=!1,this.node=e}update(){}}class $_e extends xu{constructor(e){super(e),e.animationState||(e.animationState=L_e(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();uy(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let z_e=0;class U_e extends xu{constructor(){super(...arguments),this.id=z_e++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const W_e={animation:{Feature:$_e},exit:{Feature:U_e}};function Oh(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function bp(t){return{point:{x:t.pageX,y:t.pageY}}}const V_e=t=>e=>ZE(e)&&t(e,bp(e));function Ud(t,e,n,r){return Oh(t,e,V_e(n),r)}const WI=(t,e)=>Math.abs(t-e);function q_e(t,e){const n=WI(t.x,e.x),r=WI(t.y,e.y);return Math.sqrt(n**2+r**2)}class BL{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=F1(this.lastMoveEventInfo,this.history),d=this.startEvent!==null,h=q_e(f.offset,{x:0,y:0})>=3;if(!d&&!h)return;const{point:p}=f,{timestamp:m}=ur;this.history.push({...p,timestamp:m});const{onStart:g,onMove:v}=this.handlers;d||(g&&g(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,f)},this.handlePointerMove=(f,d)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=k1(d,this.transformPagePoint),cn.update(this.updatePoint,!0)},this.handlePointerUp=(f,d)=>{this.end();const{onEnd:h,onSessionEnd:p,resumeAnimation:m}=this.handlers;if(this.dragSnapToOrigin&&m&&m(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=F1(f.type==="pointercancel"?this.lastMoveEventInfo:k1(d,this.transformPagePoint),this.history);this.startEvent&&h&&h(f,g),p&&p(f,g)},!ZE(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=bp(e),s=k1(o,this.transformPagePoint),{point:u}=s,{timestamp:l}=ur;this.history=[{...u,timestamp:l}];const{onSessionStart:c}=n;c&&c(e,F1(s,this.history)),this.removeListeners=xp(Ud(this.contextWindow,"pointermove",this.handlePointerMove),Ud(this.contextWindow,"pointerup",this.handlePointerUp),Ud(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Qs(this.updatePoint)}}function k1(t,e){return e?{point:e(t.point)}:t}function VI(t,e){return{x:t.x-e.x,y:t.y-e.y}}function F1({point:t},e){return{point:t,delta:VI(t,LL(e)),offset:VI(t,H_e(e)),velocity:G_e(e,.1)}}function H_e(t){return t[0]}function LL(t){return t[t.length-1]}function G_e(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=LL(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Fo(e)));)n--;if(!r)return{x:0,y:0};const a=Po(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const o={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const jL=1e-4,K_e=1-jL,Y_e=1+jL,$L=.01,X_e=0-$L,Q_e=0+$L;function ki(t){return t.max-t.min}function Z_e(t,e,n){return Math.abs(t-e)<=n}function qI(t,e,n,r=.5){t.origin=r,t.originPoint=gn(e.min,e.max,t.origin),t.scale=ki(n)/ki(e),t.translate=gn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=K_e&&t.scale<=Y_e||isNaN(t.scale))&&(t.scale=1),(t.translate>=X_e&&t.translate<=Q_e||isNaN(t.translate))&&(t.translate=0)}function Wd(t,e,n,r){qI(t.x,e.x,n.x,r?r.originX:void 0),qI(t.y,e.y,n.y,r?r.originY:void 0)}function HI(t,e,n){t.min=n.min+e.min,t.max=t.min+ki(e)}function J_e(t,e,n){HI(t.x,e.x,n.x),HI(t.y,e.y,n.y)}function GI(t,e,n){t.min=e.min-n.min,t.max=t.min+ki(e)}function Vd(t,e,n){GI(t.x,e.x,n.x),GI(t.y,e.y,n.y)}function eEe(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?gn(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?gn(n,t,r.max):Math.min(t,n)),t}function KI(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function tEe(t,{top:e,left:n,bottom:r,right:i}){return{x:KI(t.x,n,i),y:KI(t.y,e,r)}}function YI(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function nEe(t,e){return{x:YI(t.x,e.x),y:YI(t.y,e.y)}}function rEe(t,e){let n=.5;const r=ki(t),i=ki(e);return i>r?n=lf(e.min,e.max-r,t.min):r>i&&(n=lf(t.min,t.max-i,e.min)),Ho(0,1,n)}function iEe(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const vw=.35;function aEe(t=vw){return t===!1?t=0:t===!0&&(t=vw),{x:XI(t,"left","right"),y:XI(t,"top","bottom")}}function XI(t,e,n){return{min:QI(t,e),max:QI(t,n)}}function QI(t,e){return typeof t=="number"?t:t[e]||0}const ZI=()=>({translate:0,scale:1,origin:0,originPoint:0}),mc=()=>({x:ZI(),y:ZI()}),JI=()=>({min:0,max:0}),An=()=>({x:JI(),y:JI()});function zi(t){return[t("x"),t("y")]}function zL({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function oEe({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function sEe(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function P1(t){return t===void 0||t===1}function gw({scale:t,scaleX:e,scaleY:n}){return!P1(t)||!P1(e)||!P1(n)}function Mu(t){return gw(t)||UL(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function UL(t){return e4(t.x)||e4(t.y)}function e4(t){return t&&t!=="0%"}function kg(t,e,n){const r=t-n,i=e*r;return n+i}function t4(t,e,n,r,i){return i!==void 0&&(t=kg(t,i,r)),kg(t,n,r)+e}function yw(t,e=0,n=1,r,i){t.min=t4(t.min,e,n,r,i),t.max=t4(t.max,e,n,r,i)}function WL(t,{x:e,y:n}){yw(t.x,e.translate,e.scale,e.originPoint),yw(t.y,n.translate,n.scale,n.originPoint)}const n4=.999999999999,r4=1.0000000000001;function uEe(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let a,o;for(let s=0;s<i;s++){a=n[s],o=a.projectionDelta;const{visualElement:u}=a.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&gc(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,WL(t,o)),r&&Mu(a.latestValues)&&gc(t,a.latestValues))}e.x<r4&&e.x>n4&&(e.x=1),e.y<r4&&e.y>n4&&(e.y=1)}function vc(t,e){t.min=t.min+e,t.max=t.max+e}function i4(t,e,n,r,i=.5){const a=gn(t.min,t.max,i);yw(t,e,n,a,r)}function gc(t,e){i4(t.x,e.x,e.scaleX,e.scale,e.originX),i4(t.y,e.y,e.scaleY,e.scale,e.originY)}function VL(t,e){return zL(sEe(t.getBoundingClientRect(),e))}function lEe(t,e,n){const r=VL(t,n),{scroll:i}=e;return i&&(vc(r.x,i.offset.x),vc(r.y,i.offset.y)),r}const qL=({current:t})=>t?t.ownerDocument.defaultView:null,cEe=new WeakMap;class fEe{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=An(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=c=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(bp(c).point)},a=(c,f)=>{const{drag:d,dragPropagation:h,onDragStart:p}=this.getProps();if(d&&!h&&(this.openDragLock&&this.openDragLock(),this.openDragLock=i2e(d),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),zi(g=>{let v=this.getAxisMotionValue(g).get()||0;if(Qa.test(v)){const{projection:x}=this.visualElement;if(x&&x.layout){const y=x.layout.layoutBox[g];y&&(v=ki(y)*(parseFloat(v)/100))}}this.originPoint[g]=v}),p&&cn.postRender(()=>p(c,f)),uw(this.visualElement,"transform");const{animationState:m}=this.visualElement;m&&m.setActive("whileDrag",!0)},o=(c,f)=>{const{dragPropagation:d,dragDirectionLock:h,onDirectionLock:p,onDrag:m}=this.getProps();if(!d&&!this.openDragLock)return;const{offset:g}=f;if(h&&this.currentDirection===null){this.currentDirection=dEe(g),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",f.point,g),this.updateAxis("y",f.point,g),this.visualElement.render(),m&&m(c,f)},s=(c,f)=>this.stop(c,f),u=()=>zi(c=>{var f;return this.getAnimationState(c)==="paused"&&((f=this.getAxisMotionValue(c).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:l}=this.getProps();this.panSession=new BL(e,{onSessionStart:i,onStart:a,onMove:o,onSessionEnd:s,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:l,contextWindow:qL(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:a}=this.getProps();a&&cn.postRender(()=>a(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!wm(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=eEe(o,this.constraints[e],this.elastic[e])),a.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,a=this.constraints;n&&hc(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=tEe(i.layoutBox,n):this.constraints=!1,this.elastic=aEe(r),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&zi(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=iEe(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!hc(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=lEe(r,i.root,this.visualElement.getTransformPagePoint());let o=nEe(i.layout.layoutBox,a);if(n){const s=n(oEe(o));this.hasMutatedConstraints=!!s,s&&(o=zL(s))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:s}=this.getProps(),u=this.constraints||{},l=zi(c=>{if(!wm(c,n,this.currentDirection))return;let f=u&&u[c]||{};o&&(f={min:0,max:0});const d=i?200:1e6,h=i?40:1e7,p={type:"inertia",velocity:r?e[c]:0,bounceStiffness:d,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10,...a,...f};return this.startAxisValueAnimation(c,p)});return Promise.all(l).then(s)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return uw(this.visualElement,e),r.start(cC(e,r,0,n,this.visualElement,!1))}stopAnimation(){zi(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){zi(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){zi(n=>{const{drag:r}=this.getProps();if(!wm(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:s}=i.layout.layoutBox[n];a.set(e[n]-gn(o,s,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!hc(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};zi(o=>{const s=this.getAxisMotionValue(o);if(s&&this.constraints!==!1){const u=s.get();i[o]=rEe({min:u,max:u},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),zi(o=>{if(!wm(o,e,null))return;const s=this.getAxisMotionValue(o),{min:u,max:l}=this.constraints[o];s.set(gn(u,l,i[o]))})}addListeners(){if(!this.visualElement.current)return;cEe.set(this.visualElement,this);const e=this.visualElement.current,n=Ud(e,"pointerdown",u=>{const{drag:l,dragListener:c=!0}=this.getProps();l&&c&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();hc(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),cn.read(r);const o=Oh(window,"resize",()=>this.scalePositionWithinConstraints()),s=i.addEventListener("didUpdate",({delta:u,hasLayoutChanged:l})=>{this.isDragging&&l&&(zi(c=>{const f=this.getAxisMotionValue(c);f&&(this.originPoint[c]+=u[c].translate,f.set(f.get()+u[c].translate))}),this.visualElement.render())});return()=>{o(),n(),a(),s&&s()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:o=vw,dragMomentum:s=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:o,dragMomentum:s}}}function wm(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function dEe(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class hEe extends xu{constructor(e){super(e),this.removeGroupControls=Mi,this.removeListeners=Mi,this.controls=new fEe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Mi}unmount(){this.removeGroupControls(),this.removeListeners()}}const a4=t=>(e,n)=>{t&&cn.postRender(()=>t(e,n))};class pEe extends xu{constructor(){super(...arguments),this.removePointerDownListener=Mi}onPointerDown(e){this.session=new BL(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:qL(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:a4(e),onStart:a4(n),onMove:r,onEnd:(a,o)=>{delete this.session,i&&cn.postRender(()=>i(a,o))}}}mount(){this.removePointerDownListener=Ud(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const rv={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function o4(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const ld={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(nt.test(t))t=parseFloat(t);else return t;const n=o4(t,e.target.x),r=o4(t,e.target.y);return`${n}% ${r}%`}},mEe={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Zs.parse(t);if(i.length>5)return r;const a=Zs.createTransformer(t),o=typeof i[0]!="number"?1:0,s=n.x.scale*e.x,u=n.y.scale*e.y;i[0+o]/=s,i[1+o]/=u;const l=gn(s,u,.5);return typeof i[2+o]=="number"&&(i[2+o]/=l),typeof i[3+o]=="number"&&(i[3+o]/=l),a(i)}};class vEe extends X.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;Bwe(gEe),a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),rv.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,o=r.projection;return o&&(o.isPresent=a,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?o.promote():o.relegate()||cn.postRender(()=>{const s=o.getStack();(!s||!s.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),jE.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function HL(t){const[e,n]=Zbe(),r=X.useContext(T6);return S.jsx(vEe,{...t,layoutGroup:r,switchLayoutGroup:X.useContext(O6),isPresent:e,safeToRemove:n})}const gEe={borderRadius:{...ld,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ld,borderTopRightRadius:ld,borderBottomLeftRadius:ld,borderBottomRightRadius:ld,boxShadow:mEe};function yEe(t,e,n){const r=Rr(t)?t:Fh(t);return r.start(cC("",r,e,n)),r.animation}function xEe(t){return t instanceof SVGElement&&t.tagName!=="svg"}const bEe=(t,e)=>t.depth-e.depth;class wEe{constructor(){this.children=[],this.isDirty=!1}add(e){JE(this.children,e),this.isDirty=!0}remove(e){eC(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(bEe),this.isDirty=!1,this.children.forEach(e)}}function _Ee(t,e){const n=Za.now(),r=({timestamp:i})=>{const a=i-n;a>=e&&(Qs(r),t(a-e))};return cn.read(r,!0),()=>Qs(r)}const GL=["TopLeft","TopRight","BottomLeft","BottomRight"],EEe=GL.length,s4=t=>typeof t=="string"?parseFloat(t):t,u4=t=>typeof t=="number"||nt.test(t);function CEe(t,e,n,r,i,a){i?(t.opacity=gn(0,n.opacity!==void 0?n.opacity:1,NEe(r)),t.opacityExit=gn(e.opacity!==void 0?e.opacity:1,0,SEe(r))):a&&(t.opacity=gn(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<EEe;o++){const s=`border${GL[o]}Radius`;let u=l4(e,s),l=l4(n,s);if(u===void 0&&l===void 0)continue;u||(u=0),l||(l=0),u===0||l===0||u4(u)===u4(l)?(t[s]=Math.max(gn(s4(u),s4(l),r),0),(Qa.test(l)||Qa.test(u))&&(t[s]+="%")):t[s]=l}(e.rotate||n.rotate)&&(t.rotate=gn(e.rotate||0,n.rotate||0,r))}function l4(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const NEe=KL(0,.5,dL),SEe=KL(.5,.95,Mi);function KL(t,e,n){return r=>r<t?0:r>e?1:n(lf(t,e,r))}function c4(t,e){t.min=e.min,t.max=e.max}function $i(t,e){c4(t.x,e.x),c4(t.y,e.y)}function f4(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function d4(t,e,n,r,i){return t-=e,t=kg(t,1/n,r),i!==void 0&&(t=kg(t,1/i,r)),t}function DEe(t,e=0,n=1,r=.5,i,a=t,o=t){if(Qa.test(e)&&(e=parseFloat(e),e=gn(o.min,o.max,e/100)-o.min),typeof e!="number")return;let s=gn(a.min,a.max,r);t===a&&(s-=e),t.min=d4(t.min,e,n,s,i),t.max=d4(t.max,e,n,s,i)}function h4(t,e,[n,r,i],a,o){DEe(t,e[n],e[r],e[i],e.scale,a,o)}const AEe=["x","scaleX","originX"],TEe=["y","scaleY","originY"];function p4(t,e,n,r){h4(t.x,e,AEe,n?n.x:void 0,r?r.x:void 0),h4(t.y,e,TEe,n?n.y:void 0,r?r.y:void 0)}function m4(t){return t.translate===0&&t.scale===1}function YL(t){return m4(t.x)&&m4(t.y)}function v4(t,e){return t.min===e.min&&t.max===e.max}function MEe(t,e){return v4(t.x,e.x)&&v4(t.y,e.y)}function g4(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function XL(t,e){return g4(t.x,e.x)&&g4(t.y,e.y)}function y4(t){return ki(t.x)/ki(t.y)}function x4(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class IEe{constructor(){this.members=[]}add(e){JE(this.members,e),e.scheduleRender()}remove(e){if(eC(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function REe(t,e,n){let r="";const i=t.x.translate/e.x,a=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||a||o)&&(r=`translate3d(${i}px, ${a}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:l,rotate:c,rotateX:f,rotateY:d,skewX:h,skewY:p}=n;l&&(r=`perspective(${l}px) ${r}`),c&&(r+=`rotate(${c}deg) `),f&&(r+=`rotateX(${f}deg) `),d&&(r+=`rotateY(${d}deg) `),h&&(r+=`skewX(${h}deg) `),p&&(r+=`skewY(${p}deg) `)}const s=t.x.scale*e.x,u=t.y.scale*e.y;return(s!==1||u!==1)&&(r+=`scale(${s}, ${u})`),r||"none"}const Iu={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Cd=typeof window<"u"&&window.MotionDebug!==void 0,O1=["","X","Y","Z"],kEe={visibility:"hidden"},b4=1e3;let FEe=0;function B1(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function QL(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=aL(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",cn,!(i||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&QL(r)}function ZL({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},s=e==null?void 0:e()){this.id=FEe++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Cd&&(Iu.totalNodes=Iu.resolvedTargetDeltas=Iu.recalculatedProjection=0),this.nodes.forEach(BEe),this.nodes.forEach(UEe),this.nodes.forEach(WEe),this.nodes.forEach(LEe),Cd&&window.MotionDebug.record(Iu)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=s?s.root||s:this,this.path=s?[...s.path,s]:[],this.parent=s,this.depth=s?s.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new wEe)}addEventListener(o,s){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new tC),this.eventHandlers.get(o).add(s)}notifyListeners(o,...s){const u=this.eventHandlers.get(o);u&&u.notify(...s)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,s=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=xEe(o),this.instance=o;const{layoutId:u,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),s&&(l||u)&&(this.isLayoutDirty=!0),t){let f;const d=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=_Ee(d,250),rv.hasAnimatedSinceResize&&(rv.hasAnimatedSinceResize=!1,this.nodes.forEach(_4))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&c&&(u||l)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:d,hasRelativeTargetChanged:h,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||c.getDefaultTransition()||KEe,{onLayoutAnimationStart:g,onLayoutAnimationComplete:v}=c.getProps(),x=!this.targetLayout||!XL(this.targetLayout,p)||h,y=!d&&h;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||y||d&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,y);const b={...YE(m,"layout"),onPlay:g,onComplete:v};(c.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b)}else d||_4(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Qs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(VEe),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&QL(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const f=this.path[c];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:s,layout:u}=this.options;if(s===void 0&&!u)return;const l=this.getTransformTemplate();this.prevTransformTemplateValue=l?l(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(w4);return}this.isUpdating||this.nodes.forEach($Ee),this.isUpdating=!1,this.nodes.forEach(zEe),this.nodes.forEach(PEe),this.nodes.forEach(OEe),this.clearAllSnapshots();const s=Za.now();ur.delta=Ho(0,1e3/60,s-ur.timestamp),ur.timestamp=s,ur.isProcessing=!0,D1.update.process(ur),D1.preRender.process(ur),D1.render.process(ur),ur.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,jE.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(jEe),this.sharedNodes.forEach(qEe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,cn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){cn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=An(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:s}=this.options;s&&s.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let s=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(s=!1),s){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,s=this.projectionDelta&&!YL(this.projectionDelta),u=this.getTransformTemplate(),l=u?u(this.latestValues,""):void 0,c=l!==this.prevTransformTemplateValue;o&&(s||Mu(this.latestValues)||c)&&(i(this.instance,l),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const s=this.measurePageBox();let u=this.removeElementScroll(s);return o&&(u=this.removeTransform(u)),YEe(u),{animationId:this.root.animationId,measuredBox:s,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:s}=this.options;if(!s)return An();const u=s.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(XEe))){const{scroll:c}=this.root;c&&(vc(u.x,c.offset.x),vc(u.y,c.offset.y))}return u}removeElementScroll(o){var s;const u=An();if($i(u,o),!((s=this.scroll)===null||s===void 0)&&s.wasRoot)return u;for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:f,options:d}=c;c!==this.root&&f&&d.layoutScroll&&(f.wasRoot&&$i(u,o),vc(u.x,f.offset.x),vc(u.y,f.offset.y))}return u}applyTransform(o,s=!1){const u=An();$i(u,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];!s&&c.options.layoutScroll&&c.scroll&&c!==c.root&&gc(u,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),Mu(c.latestValues)&&gc(u,c.latestValues)}return Mu(this.latestValues)&&gc(u,this.latestValues),u}removeTransform(o){const s=An();$i(s,o);for(let u=0;u<this.path.length;u++){const l=this.path[u];if(!l.instance||!Mu(l.latestValues))continue;gw(l.latestValues)&&l.updateSnapshot();const c=An(),f=l.measurePageBox();$i(c,f),p4(s,l.latestValues,l.snapshot?l.snapshot.layoutBox:void 0,c)}return Mu(this.latestValues)&&p4(s,this.latestValues),s}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ur.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var s;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==u;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||!((s=this.parent)===null||s===void 0)&&s.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:d}=this.options;if(!(!this.layout||!(f||d))){if(this.resolvedRelativeTargetAt=ur.timestamp,!this.targetDelta&&!this.relativeTarget){const h=this.getClosestProjectingParent();h&&h.layout&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=An(),this.relativeTargetOrigin=An(),Vd(this.relativeTargetOrigin,this.layout.layoutBox,h.layout.layoutBox),$i(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=An(),this.targetWithTransforms=An()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),J_e(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):$i(this.target,this.layout.layoutBox),WL(this.target,this.targetDelta)):$i(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const h=this.getClosestProjectingParent();h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=An(),this.relativeTargetOrigin=An(),Vd(this.relativeTargetOrigin,this.target,h.target),$i(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Cd&&Iu.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||gw(this.parent.latestValues)||UL(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const s=this.getLead(),u=!!this.resumingFrom||this!==s;let l=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(l=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===ur.timestamp&&(l=!1),l)return;const{layout:c,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||f))return;$i(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,h=this.treeScale.y;uEe(this.layoutCorrected,this.treeScale,this.path,u),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox,s.targetWithTransforms=An());const{target:p}=s;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(f4(this.prevProjectionDelta.x,this.projectionDelta.x),f4(this.prevProjectionDelta.y,this.projectionDelta.y)),Wd(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==h||!x4(this.projectionDelta.x,this.prevProjectionDelta.x)||!x4(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p)),Cd&&Iu.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var s;if((s=this.options.visualElement)===null||s===void 0||s.scheduleRender(),o){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=mc(),this.projectionDelta=mc(),this.projectionDeltaWithTransform=mc()}setAnimationOrigin(o,s=!1){const u=this.snapshot,l=u?u.latestValues:{},c={...this.latestValues},f=mc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!s;const d=An(),h=u?u.source:void 0,p=this.layout?this.layout.source:void 0,m=h!==p,g=this.getStack(),v=!g||g.members.length<=1,x=!!(m&&!v&&this.options.crossfade===!0&&!this.path.some(GEe));this.animationProgress=0;let y;this.mixTargetDelta=b=>{const w=b/1e3;E4(f.x,o.x,w),E4(f.y,o.y,w),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Vd(d,this.layout.layoutBox,this.relativeParent.layout.layoutBox),HEe(this.relativeTarget,this.relativeTargetOrigin,d,w),y&&MEe(this.relativeTarget,y)&&(this.isProjectionDirty=!1),y||(y=An()),$i(y,this.relativeTarget)),m&&(this.animationValues=c,CEe(c,l,this.latestValues,w,x,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=w},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Qs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=cn.update(()=>{rv.hasAnimatedSinceResize=!0,this.currentAnimation=yEe(0,b4,{...o,onUpdate:s=>{this.mixTargetDelta(s),o.onUpdate&&o.onUpdate(s)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(b4),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:s,target:u,layout:l,latestValues:c}=o;if(!(!s||!u||!l)){if(this!==o&&this.layout&&l&&JL(this.options.animationType,this.layout.layoutBox,l.layoutBox)){u=this.target||An();const f=ki(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+f;const d=ki(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+d}$i(s,u),gc(s,c),Wd(this.projectionDeltaWithTransform,this.layoutCorrected,s,c)}}registerSharedNode(o,s){this.sharedNodes.has(o)||this.sharedNodes.set(o,new IEe),this.sharedNodes.get(o).add(s);const l=s.options.initialPromotionConfig;s.promote({transition:l?l.transition:void 0,preserveFollowOpacity:l&&l.shouldPreserveFollowOpacity?l.shouldPreserveFollowOpacity(s):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:s}=this.options;return s?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:s}=this.options;return s?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:s,preserveFollowOpacity:u}={}){const l=this.getStack();l&&l.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),s&&this.setOptions({transition:s})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let s=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(s=!0),!s)return;const l={};u.z&&B1("z",o,l,this.animationValues);for(let c=0;c<O1.length;c++)B1(`rotate${O1[c]}`,o,l,this.animationValues),B1(`skew${O1[c]}`,o,l,this.animationValues);o.render();for(const c in l)o.setStaticValue(c,l[c]),this.animationValues&&(this.animationValues[c]=l[c]);o.scheduleRender()}getProjectionStyles(o){var s,u;if(!this.instance||this.isSVG)return;if(!this.isVisible)return kEe;const l={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,l.opacity="",l.pointerEvents=tv(o==null?void 0:o.pointerEvents)||"",l.transform=c?c(this.latestValues,""):"none",l;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const m={};return this.options.layoutId&&(m.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,m.pointerEvents=tv(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Mu(this.latestValues)&&(m.transform=c?c({},""):"none",this.hasProjected=!1),m}const d=f.animationValues||f.latestValues;this.applyTransformsToTarget(),l.transform=REe(this.projectionDeltaWithTransform,this.treeScale,d),c&&(l.transform=c(d,l.transform));const{x:h,y:p}=this.projectionDelta;l.transformOrigin=`${h.origin*100}% ${p.origin*100}% 0`,f.animationValues?l.opacity=f===this?(u=(s=d.opacity)!==null&&s!==void 0?s:this.latestValues.opacity)!==null&&u!==void 0?u:1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:l.opacity=f===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const m in Ag){if(d[m]===void 0)continue;const{correct:g,applyTo:v}=Ag[m],x=l.transform==="none"?d[m]:g(d[m],f);if(v){const y=v.length;for(let b=0;b<y;b++)l[v[b]]=x}else l[m]=x}return this.options.layoutId&&(l.pointerEvents=f===this?tv(o==null?void 0:o.pointerEvents)||"":"none"),l}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var s;return(s=o.currentAnimation)===null||s===void 0?void 0:s.stop()}),this.root.nodes.forEach(w4),this.root.sharedNodes.clear()}}}function PEe(t){t.updateLayout()}function OEe(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:a}=t.options,o=n.source!==t.layout.source;a==="size"?zi(f=>{const d=o?n.measuredBox[f]:n.layoutBox[f],h=ki(d);d.min=r[f].min,d.max=d.min+h}):JL(a,n.layoutBox,r)&&zi(f=>{const d=o?n.measuredBox[f]:n.layoutBox[f],h=ki(r[f]);d.max=d.min+h,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+h)});const s=mc();Wd(s,r,n.layoutBox);const u=mc();o?Wd(u,t.applyTransform(i,!0),n.measuredBox):Wd(u,r,n.layoutBox);const l=!YL(s);let c=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:d,layout:h}=f;if(d&&h){const p=An();Vd(p,n.layoutBox,d.layoutBox);const m=An();Vd(m,r,h.layoutBox),XL(p,m)||(c=!0),f.options.layoutRoot&&(t.relativeTarget=m,t.relativeTargetOrigin=p,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:u,layoutDelta:s,hasLayoutChanged:l,hasRelativeTargetChanged:c})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function BEe(t){Cd&&Iu.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function LEe(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function jEe(t){t.clearSnapshot()}function w4(t){t.clearMeasurements()}function $Ee(t){t.isLayoutDirty=!1}function zEe(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function _4(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function UEe(t){t.resolveTargetDelta()}function WEe(t){t.calcProjection()}function VEe(t){t.resetSkewAndRotation()}function qEe(t){t.removeLeadSnapshot()}function E4(t,e,n){t.translate=gn(e.translate,0,n),t.scale=gn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function C4(t,e,n,r){t.min=gn(e.min,n.min,r),t.max=gn(e.max,n.max,r)}function HEe(t,e,n,r){C4(t.x,e.x,n.x,r),C4(t.y,e.y,n.y,r)}function GEe(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const KEe={duration:.45,ease:[.4,0,.1,1]},N4=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),S4=N4("applewebkit/")&&!N4("chrome/")?Math.round:Mi;function D4(t){t.min=S4(t.min),t.max=S4(t.max)}function YEe(t){D4(t.x),D4(t.y)}function JL(t,e,n){return t==="position"||t==="preserve-aspect"&&!Z_e(y4(e),y4(n),.2)}function XEe(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const QEe=ZL({attachResizeListener:(t,e)=>Oh(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),L1={current:void 0},e7=ZL({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!L1.current){const t=new QEe({});t.mount(window),t.setOptions({layoutScroll:!0}),L1.current=t}return L1.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),ZEe={pan:{Feature:pEe},drag:{Feature:hEe,ProjectionNode:e7,MeasureLayout:HL}};function A4(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&cn.postRender(()=>a(e,bp(e)))}class JEe extends xu{mount(){const{current:e}=this.node;e&&(this.unmount=Jwe(e,n=>(A4(this.node,n,"Start"),r=>A4(this.node,r,"End"))))}unmount(){}}class eCe extends xu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=xp(Oh(this.node.current,"focus",()=>this.onFocus()),Oh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function T4(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&cn.postRender(()=>a(e,bp(e)))}class tCe extends xu{mount(){const{current:e}=this.node;e&&(this.unmount=r2e(e,n=>(T4(this.node,n,"Start"),(r,{success:i})=>T4(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const xw=new WeakMap,j1=new WeakMap,nCe=t=>{const e=xw.get(t.target);e&&e(t)},rCe=t=>{t.forEach(nCe)};function iCe({root:t,...e}){const n=t||document;j1.has(n)||j1.set(n,{});const r=j1.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(rCe,{root:t,...e})),r[i]}function aCe(t,e,n){const r=iCe(e);return xw.set(t,n),r.observe(t),()=>{xw.delete(t),r.unobserve(t)}}const oCe={some:0,all:1};class sCe extends xu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:oCe[i]},s=u=>{const{isIntersecting:l}=u;if(this.isInView===l||(this.isInView=l,a&&!l&&this.hasEnteredView))return;l&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",l);const{onViewportEnter:c,onViewportLeave:f}=this.node.getProps(),d=l?c:f;d&&d(u)};return aCe(this.node.current,o,s)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(uCe(e,n))&&this.startObserver()}unmount(){}}function uCe({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const lCe={inView:{Feature:sCe},tap:{Feature:tCe},focus:{Feature:eCe},hover:{Feature:JEe}},cCe={layout:{ProjectionNode:e7,MeasureLayout:HL}},bw={current:null},t7={current:!1};function fCe(){if(t7.current=!0,!!FE)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>bw.current=t.matches;t.addListener(e),e()}else bw.current=!1}const dCe=[...SL,Cr,Zs],hCe=t=>dCe.find(NL(t)),M4=new WeakMap;function pCe(t,e,n){for(const r in e){const i=e[r],a=n[r];if(Rr(i))t.addValue(r,i);else if(Rr(a))t.addValue(r,Fh(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,Fh(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const I4=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class mCe{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:o},s={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=sC,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=Za.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,cn.render(this.render,!1,!0))};const{latestValues:u,renderState:l,onUpdate:c}=o;this.onUpdate=c,this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=s,this.blockInitialAnimation=!!a,this.isControllingVariants=ly(n),this.isVariantNode=F6(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const h in d){const p=d[h];u[h]!==void 0&&Rr(p)&&p.set(u[h],!1)}}mount(e){this.current=e,M4.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),t7.current||fCe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:bw.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){M4.delete(this.current),this.projection&&this.projection.unmount(),Qs(this.notifyUpdate),Qs(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Ml.has(e),i=n.on("change",s=>{this.latestValues[e]=s,this.props.onUpdate&&cn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),a(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in cf){const n=cf[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):An()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<I4.length;r++){const i=I4[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,o=e[a];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=pCe(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Fh(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(EL(i)||pL(i))?i=parseFloat(i):!hCe(i)&&Zs.test(n)&&(i=bL(e,n)),this.setBaseTarget(e,Rr(i)?i.get():i)),Rr(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=zE(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[e])}if(r&&i!==void 0)return i;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!Rr(a)?a:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new tC),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class n7 extends mCe{constructor(){super(...arguments),this.KeyframeResolver=DL}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Rr(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function vCe(t){return window.getComputedStyle(t)}class gCe extends n7{constructor(){super(...arguments),this.type="html",this.renderInstance=W6}readValueFromInstance(e,n){if(Ml.has(n)){const r=oC(n);return r&&r.default||0}else{const r=vCe(e),i=($6(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return VL(e,n)}build(e,n,r){VE(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return KE(e,n,r)}}class yCe extends n7{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=An}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Ml.has(n)){const r=oC(n);return r&&r.default||0}return n=V6.has(n)?n:LE(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return G6(e,n,r)}build(e,n,r){qE(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){q6(e,n,r,i)}mount(e){this.isSVGTag=GE(e.tagName),super.mount(e)}}const xCe=(t,e)=>$E(t)?new yCe(e):new gCe(e,{allowProjection:t!==X.Fragment}),bCe=Hwe({...W_e,...lCe,...ZEe,...cCe},xCe),fn=swe(bCe),wCe=({title:t,path:e,icon:n,color:r,description:i})=>S.jsx(fn.div,{whileHover:{y:-5},whileTap:{scale:.95},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:S.jsx(Ni,{to:e,className:"block",children:S.jsxs("div",{className:`game-card ${r} h-full`,children:[S.jsx("div",{className:`p-3 rounded-full bg-${r} bg-opacity-20 mb-2`,children:S.jsx(n,{size:36,className:`text-${r}`})}),S.jsx("h3",{className:"text-xl font-bold text-center",children:t}),S.jsx("p",{className:"text-sm text-gray-600 text-center mt-2",children:i})]})})}),_Ce=()=>{const t=[{title:"Memory Match",path:"/memory-game",icon:kW,color:"text-primary-500",description:"Find matching pairs of cards"},{title:"Whack-A-Mole",path:"/whack-a-mole",icon:jW,color:"text-accent-500",description:"Tap the moles as they appear"},{title:"Coloring Book",path:"/coloring-book",icon:qW,color:"text-secondary-500",description:"Color fun pictures"},{title:"Simple Puzzle",path:"/simple-puzzle",icon:GW,color:"text-success-500",description:"Solve picture puzzles"},{title:"Balloon Pop",path:"/balloon-pop",icon:WW,color:"text-error-500",description:"Pop colorful balloons"},{title:"Word Search",path:"/word-search",icon:KW,color:"text-primary-700",description:"Find hidden words"},{title:"Counting Game",path:"/counting-game",icon:$2,color:"text-warning-500",description:"Count objects and learn numbers"},{title:"Shape Sorter",path:"/shape-sorter",icon:kv,color:"text-secondary-700",description:"Match shapes to their spots"},{title:"Catch Stars",path:"/catch-stars",icon:ph,color:"text-accent-700",description:"Catch falling stars"},{title:"Animal Sounds",path:"/animal-sounds",icon:VW,color:"text-success-700",description:"Match animals to their sounds"}];return S.jsxs("div",{className:"py-6",children:[S.jsxs(fn.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-10",children:[S.jsx("h1",{className:"text-4xl font-bold text-primary-700 mb-3",children:"Welcome to Kids Game Zone!"}),S.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Pick a fun game to play. Each game is designed to be simple, fun, and help you learn while playing!"})]}),S.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-6",children:t.map((e,n)=>S.jsx(wCe,{title:e.title,path:e.path,icon:e.icon,color:e.color,description:e.description},n))})]})},uo=({title:t,children:e,instructions:n})=>S.jsxs(fn.div,{className:"game-container",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[S.jsx("h2",{className:"game-title",children:t}),n&&S.jsxs("div",{className:"bg-primary-50 p-4 rounded-lg mb-6 border border-primary-200",children:[S.jsx("h3",{className:"font-bold text-primary-700 mb-2",children:"How to Play:"}),S.jsx("p",{className:"text-primary-800",children:n})]}),S.jsx("div",{className:"mb-8",children:e}),S.jsx("div",{className:"text-center mt-6",children:S.jsxs(Ni,{to:"/",className:"inline-flex items-center gap-2 btn btn-primary",children:[S.jsx(pP,{size:18}),"Back to Games"]})})]}),R4=["","","","","","","",""],ECe=()=>{const[t,e]=X.useState([]),[n,r]=X.useState([]),[i,a]=X.useState(0),[o,s]=X.useState(!1);X.useEffect(()=>{u()},[]),X.useEffect(()=>{if(n.length===2){const[f,d]=n;t[f].emoji===t[d].emoji&&e(p=>p.map((m,g)=>g===f||g===d?{...m,isMatched:!0}:m));const h=setTimeout(()=>{r([])},1e3);return()=>clearTimeout(h)}},[n,t]),X.useEffect(()=>{t.length>0&&t.every(f=>f.isMatched)&&s(!0)},[t]);const u=()=>{const d=[...R4,...R4].map((h,p)=>({id:p,emoji:h,isFlipped:!1,isMatched:!1})).sort(()=>Math.random()-.5);e(d),r([]),a(0),s(!1)},l=f=>{n.length===2||t[f].isMatched||n.includes(f)||(e(d=>d.map((h,p)=>p===f?{...h,isFlipped:!0}:h)),r(d=>[...d,f]),n.length===1&&a(d=>d+1))},c=()=>{u()};return S.jsxs(uo,{title:"Memory Match",instructions:"Flip cards to find matching pairs. Remember where each card is located to make matches with fewer moves.",children:[S.jsx("div",{className:"text-center mb-4",children:S.jsxs("p",{className:"text-lg font-bold text-primary-600",children:["Moves: ",i]})}),S.jsx("div",{className:"grid grid-cols-4 gap-3 max-w-md mx-auto",children:t.map((f,d)=>S.jsx(fn.div,{whileHover:{scale:f.isMatched?1:1.05},whileTap:{scale:f.isMatched?1:.95},className:"aspect-square",children:S.jsx("div",{onClick:()=>l(d),className:`w-full h-full rounded-lg cursor-pointer transition-all duration-300 flex items-center justify-center text-4xl ${f.isFlipped||f.isMatched?"bg-white border-2 border-primary-300 shadow-md":"bg-primary-500 shadow-lg"}`,children:(f.isFlipped||f.isMatched)&&f.emoji})},f.id))}),o&&S.jsxs(fn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-8 text-center",children:[S.jsxs("h3",{className:"text-2xl font-bold text-success-600 mb-4",children:["Congratulations! You completed the game in ",i," moves!"]}),S.jsx("button",{onClick:c,className:"btn btn-primary",children:"Play Again"})]})]})},CCe=()=>{const[t,e]=X.useState(0),[n,r]=X.useState(30),[i,a]=X.useState(null),[o,s]=X.useState(!1),[u,l]=X.useState(!1),c=X.useRef(null),f=X.useRef(null),d=()=>{e(0),r(30),s(!0),l(!1),h()};X.useEffect(()=>(o&&(c.current=setInterval(()=>{r(m=>m<=1?(clearInterval(c.current),s(!1),l(!0),clearInterval(f.current),a(null),0):m-1)},1e3)),()=>{c.current&&clearInterval(c.current),f.current&&clearInterval(f.current)}),[o]);const h=()=>{f.current&&clearTimeout(f.current),a(null),setTimeout(()=>{if(!o)return;const m=Math.floor(Math.random()*9);a(m),f.current=setTimeout(()=>{a(null),h()},Math.random()*1e3+800)},300)},p=m=>{m===i&&(e(g=>g+1),a(null),h())};return S.jsxs(uo,{title:"Whack-A-Mole",instructions:"Click on the moles as they appear to score points. Be quick before they hide again!",children:[S.jsxs("div",{className:"text-center mb-6",children:[S.jsxs("div",{className:"flex justify-center gap-8 mb-4",children:[S.jsxs("div",{className:"text-lg font-bold bg-primary-100 px-4 py-2 rounded-md",children:["Score: ",S.jsx("span",{className:"text-primary-700",children:t})]}),S.jsxs("div",{className:"text-lg font-bold bg-accent-100 px-4 py-2 rounded-md",children:["Time: ",S.jsxs("span",{className:"text-accent-700",children:[n,"s"]})]})]}),!o&&!u&&S.jsx("button",{onClick:d,className:"btn btn-primary",children:"Start Game"})]}),S.jsx("div",{className:"grid grid-cols-3 gap-4 max-w-sm mx-auto",children:Array.from({length:9}).map((m,g)=>S.jsxs(fn.div,{className:"relative bg-accent-200 h-24 rounded-full overflow-hidden",whileTap:{scale:.95},children:[S.jsx("div",{className:"absolute inset-0 bg-accent-800 bottom-1/2 rounded-t-full"}),i===g&&S.jsx(fn.div,{className:"absolute bottom-0 left-0 right-0 h-16 flex justify-center",initial:{y:60},animate:{y:0},transition:{duration:.2},onClick:()=>p(g),children:S.jsx("div",{className:"w-16 h-16 bg-accent-500 rounded-full flex items-center justify-center cursor-pointer",children:S.jsx("div",{className:"text-3xl",children:""})})})]},g))}),u&&S.jsxs(fn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-8 text-center",children:[S.jsxs("h3",{className:"text-2xl font-bold text-primary-600 mb-4",children:["Game Over! Your score: ",t]}),S.jsx("button",{onClick:d,className:"btn btn-primary",children:"Play Again"})]})]})},k4=["#ff0000","#ff9900","#ffff00","#00ff00","#0099ff","#6633ff","#ff66cc","#663300","#000000","#ffffff"],NCe=()=>{const t=X.useRef(null),[e,n]=X.useState(k4[0]),[r,i]=X.useState(!1),[a,o]=X.useState(!1),[s,u]=X.useState(10);X.useEffect(()=>{if(t.current){const m=t.current,g=m.getContext("2d");m.width=m.offsetWidth,m.height=m.offsetHeight,g&&(g.fillStyle="#ffffff",g.fillRect(0,0,m.width,m.height),l(g,m.width,m.height),o(!0))}},[]);const l=(m,g,v)=>{m.strokeStyle="#000",m.lineWidth=2,m.beginPath(),m.arc(g*.8,v*.2,40,0,Math.PI*2),m.stroke();for(let x=0;x<8;x++){const y=x*Math.PI/4,b=g*.8+Math.cos(y)*40,w=v*.2+Math.sin(y)*40,_=g*.8+Math.cos(y)*60,E=v*.2+Math.sin(y)*60;m.beginPath(),m.moveTo(b,w),m.lineTo(_,E),m.stroke()}m.beginPath(),m.rect(g*.3,v*.5,g*.4,v*.3),m.stroke(),m.beginPath(),m.moveTo(g*.3,v*.5),m.lineTo(g*.5,v*.3),m.lineTo(g*.7,v*.5),m.stroke(),m.beginPath(),m.rect(g*.45,v*.65,g*.1,v*.15),m.stroke(),m.beginPath(),m.rect(g*.55,v*.55,g*.1,v*.1),m.stroke(),m.beginPath(),m.moveTo(0,v*.85),m.lineTo(g,v*.85),m.stroke()},c=m=>{if(!t.current)return;i(!0);const g=t.current,v=g.getContext("2d");if(v){v.strokeStyle=e,v.lineWidth=s,v.lineCap="round";let x,y;"touches"in m?(x=m.touches[0].clientX,y=m.touches[0].clientY):(x=m.clientX,y=m.clientY);const b=g.getBoundingClientRect(),w=x-b.left,_=y-b.top;v.beginPath(),v.moveTo(w,_)}},f=m=>{if(!r||!t.current)return;const g=t.current,v=g.getContext("2d");if(v){let x,y;"touches"in m?(x=m.touches[0].clientX,y=m.touches[0].clientY,m.preventDefault()):(x=m.clientX,y=m.clientY);const b=g.getBoundingClientRect(),w=x-b.left,_=y-b.top;v.lineTo(w,_),v.stroke()}},d=()=>{i(!1)},h=()=>{if(!t.current)return;const m=t.current,g=m.getContext("2d");g&&(g.fillStyle="#ffffff",g.fillRect(0,0,m.width,m.height),l(g,m.width,m.height))},p=m=>{u(Number(m.target.value))};return S.jsxs(uo,{title:"Coloring Book",instructions:"Select a color and brush size, then color the picture. You can clear the canvas to start over.",children:[S.jsxs("div",{className:"mb-6",children:[S.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-4",children:k4.map(m=>S.jsx(fn.div,{whileTap:{scale:.9},className:`w-10 h-10 rounded-full cursor-pointer ${m===e?"ring-4 ring-primary-500":""}`,style:{backgroundColor:m,border:"1px solid #ccc"},onClick:()=>n(m)},m))}),S.jsxs("div",{className:"flex justify-center items-center gap-4 mb-4",children:[S.jsx("span",{className:"text-sm",children:"Brush Size:"}),S.jsx("input",{type:"range",min:"1",max:"30",value:s,onChange:p,className:"w-48"}),S.jsxs("span",{className:"text-sm",children:[s,"px"]})]}),S.jsx("div",{className:"text-center",children:S.jsx("button",{onClick:h,className:"btn btn-secondary text-sm",children:"Clear Canvas"})})]}),S.jsx("div",{className:"border-2 border-gray-300 rounded-lg overflow-hidden bg-white",children:S.jsx("canvas",{ref:t,width:600,height:400,className:"w-full touch-none",style:{height:"400px"},onMouseDown:c,onMouseMove:f,onMouseUp:d,onMouseLeave:d,onTouchStart:c,onTouchMove:f,onTouchEnd:d})})]})},SCe="https://images.pexels.com/photos/1564506/pexels-photo-1564506.jpeg?auto=compress&cs=tinysrgb&w=600",DCe=()=>{const[t,e]=X.useState([]),[n,r]=X.useState(!1),[i,a]=X.useState("easy"),[o,s]=X.useState(null),[u,l]=X.useState(0);X.useEffect(()=>{c()},[i]),X.useEffect(()=>{t.length>0&&t.every(h=>h.currentPosition===h.correctPosition)&&r(!0)},[t]);const c=()=>{const h=i==="easy"?3:4,p=h*h,g=[...Array.from({length:p},(v,x)=>({id:x,correctPosition:x,currentPosition:x}))];for(let v=g.length-1;v>0;v--){const x=Math.floor(Math.random()*(v+1));[g[v].currentPosition,g[x].currentPosition]=[g[x].currentPosition,g[v].currentPosition]}e(g),s(null),r(!1),l(0)},f=h=>{n||(o===null?s(h):(e(p=>{const m=[...p],g=m.find(y=>y.id===o),v=m.find(y=>y.id===h),x=g.currentPosition;return g.currentPosition=v.currentPosition,v.currentPosition=x,m}),s(null),l(p=>p+1)))},d=(h,p)=>{const m=100/p,g=Math.floor(h.correctPosition/p),v=h.correctPosition%p;return{width:`${m}%`,height:`${m}%`,backgroundImage:`url(${SCe})`,backgroundSize:`${p*100}%`,backgroundPosition:`${v*100/(p-1)}% ${g*100/(p-1)}%`}};return S.jsxs(uo,{title:"Simple Puzzle",instructions:"Click on two pieces to swap their positions. Try to arrange the picture correctly with the fewest moves.",children:[S.jsxs("div",{className:"text-center mb-6",children:[S.jsxs("div",{className:"flex justify-center gap-4 mb-4",children:[S.jsx("button",{onClick:()=>a("easy"),className:`btn ${i==="easy"?"btn-primary":"bg-gray-200 hover:bg-gray-300"}`,children:"Easy (33)"}),S.jsx("button",{onClick:()=>a("medium"),className:`btn ${i==="medium"?"btn-primary":"bg-gray-200 hover:bg-gray-300"}`,children:"Medium (44)"})]}),S.jsxs("div",{className:"flex justify-center gap-8 mb-4",children:[S.jsxs("div",{className:"text-lg font-bold",children:["Moves: ",S.jsx("span",{className:"text-primary-700",children:u})]}),S.jsx("button",{onClick:c,className:"btn btn-secondary",children:"Shuffle"})]})]}),S.jsx("div",{className:"max-w-md mx-auto aspect-square border-4 border-primary-600 rounded-lg overflow-hidden",children:S.jsx("div",{className:"relative w-full h-full",children:t.sort((h,p)=>h.currentPosition-p.currentPosition).map(h=>{const p=i==="easy"?3:4,m=100/p,g=Math.floor(h.currentPosition/p),v=h.currentPosition%p;return S.jsx(fn.div,{className:`absolute cursor-pointer ${o===h.id?"ring-4 ring-primary-500 z-10":""}`,style:{...d(h,p),top:`${g*m}%`,left:`${v*m}%`},whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>f(h.id)},h.id)})})}),n&&S.jsxs(fn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-8 text-center",children:[S.jsxs("h3",{className:"text-2xl font-bold text-success-600 mb-4",children:["Puzzle Solved in ",u," moves!"]}),S.jsx("button",{onClick:c,className:"btn btn-primary",children:"Play Again"})]})]})},F4=["#ff0000","#ff9900","#ffff00","#00ff00","#0099ff","#6633ff","#ff66cc"],ACe=()=>{const[t,e]=X.useState([]),[n,r]=X.useState(0),[i,a]=X.useState(30),[o,s]=X.useState(!1),[u,l]=X.useState(!1),c=X.useRef(null),f=X.useRef(0),d=X.useRef(null),h=X.useRef(0),p=()=>{r(0),a(30),e([]),s(!0),l(!1),h.current=Date.now()};X.useEffect(()=>(o&&(d.current=setInterval(()=>{a(v=>v<=1?(clearInterval(d.current),s(!1),l(!0),cancelAnimationFrame(f.current),0):v-1)},1e3)),()=>{d.current&&clearInterval(d.current),f.current&&cancelAnimationFrame(f.current)}),[o]),X.useEffect(()=>{if(!o)return;const v=()=>{const x=Date.now();x-h.current>600&&(m(),h.current=x),e(y=>y.map(b=>({...b,y:b.y-b.speed})).filter(b=>b.y+b.size>0)),f.current=requestAnimationFrame(v)};return f.current=requestAnimationFrame(v),()=>{cancelAnimationFrame(f.current)}},[o]);const m=()=>{if(!c.current)return;const v=c.current,x=v.clientWidth,y={id:Date.now(),x:Math.random()*(x-60),y:v.clientHeight,size:Math.random()*40+40,color:F4[Math.floor(Math.random()*F4.length)],speed:Math.random()*2+1};e(b=>[...b,y])},g=v=>{e(x=>x.filter(y=>y.id!==v)),r(x=>x+1)};return S.jsxs(uo,{title:"Balloon Pop",instructions:"Pop as many balloons as you can before time runs out! Click on the balloons to pop them.",children:[S.jsxs("div",{className:"text-center mb-4",children:[S.jsxs("div",{className:"flex justify-center gap-8 mb-4",children:[S.jsxs("div",{className:"text-lg font-bold bg-primary-100 px-4 py-2 rounded-md",children:["Score: ",S.jsx("span",{className:"text-primary-700",children:n})]}),S.jsxs("div",{className:"text-lg font-bold bg-accent-100 px-4 py-2 rounded-md",children:["Time: ",S.jsxs("span",{className:"text-accent-700",children:[i,"s"]})]})]}),!o&&!u&&S.jsx("button",{onClick:p,className:"btn btn-primary",children:"Start Game"})]}),S.jsxs("div",{ref:c,className:"relative bg-gradient-to-b from-sky-200 to-sky-400 h-96 rounded-lg overflow-hidden border-2 border-primary-300",children:[t.map(v=>S.jsxs(fn.div,{className:"absolute cursor-pointer",style:{left:v.x,top:v.y,width:v.size,height:v.size*1.2},initial:{scale:.8},animate:{scale:1},whileTap:{scale:1.2,opacity:0},onClick:()=>g(v.id),children:[S.jsx("div",{className:"absolute w-full h-[83%] rounded-full",style:{backgroundColor:v.color}}),S.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 w-[20%] h-[20%] rounded-full",style:{backgroundColor:v.color}}),S.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 w-[2px] h-[15%] bg-gray-300"})]},v.id)),!o&&!u&&S.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-10",children:S.jsx("div",{className:"text-3xl font-bold text-white shadow-lg",children:"Click Start to Play"})})]}),u&&S.jsxs(fn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-8 text-center",children:[S.jsxs("h3",{className:"text-2xl font-bold text-primary-600 mb-4",children:["Game Over! You popped ",n," balloons!"]}),S.jsx("button",{onClick:p,className:"btn btn-primary",children:"Play Again"})]})]})},P4=[["CAT","DOG","PIG","COW","BIRD"],["RED","BLUE","GREEN","PINK","YELLOW"],["SUN","MOON","STAR","SKY","CLOUD"],["BALL","DOLL","KITE","BIKE","BOOK"]],TCe=()=>{const[t,e]=X.useState([]),[n,r]=X.useState([]),[i,a]=X.useState([]),[o,s]=X.useState([]),[u,l]=X.useState(!1),[c,f]=X.useState("easy"),[d,h]=X.useState(!1);X.useEffect(()=>{p()},[c]),X.useEffect(()=>{n.length>0&&i.length===n.length&&l(!0)},[i,n]);const p=()=>{const y=c==="easy"?8:10,b=P4[Math.floor(Math.random()*P4.length)],w=Array(y).fill(null).map((E,C)=>Array(y).fill(null).map((N,D)=>({row:C,col:D,letter:"",isSelected:!1,isRevealed:!1}))),_=[];for(const E of b){const C=m(w,E);if(C){_.push(E);for(const N of C.cells)w[N.row][N.col].letter=N.letter}if(_.length>=5)break}for(let E=0;E<y;E++)for(let C=0;C<y;C++)w[E][C].letter||(w[E][C].letter=String.fromCharCode(65+Math.floor(Math.random()*26)));e(w),r(_),a([]),s([]),l(!1),h(!1)},m=(y,b)=>{const w=y.length,_=[[0,1],[1,0],[1,1],[-1,1],[1,-1]];for(let E=0;E<20;E++){const C=_[Math.floor(Math.random()*_.length)],[N,D]=C,A=Math.floor(Math.random()*w),T=Math.floor(Math.random()*w);let k=!0;const F=[];for(let O=0;O<b.length;O++){const I=A+O*N,M=T+O*D;if(I<0||I>=w||M<0||M>=w){k=!1;break}if(y[I][M].letter&&y[I][M].letter!==b[O]){k=!1;break}F.push({row:I,col:M,letter:b[O],isSelected:!1,isRevealed:!1})}if(k)return{word:b,cells:F}}return null},g=(y,b)=>{if(u)return;const w=t[y][b];if(o.length===0){s([w]),e(A=>{const T=[...A];return T[y][b]={...w,isSelected:!0},T});return}if(o.some(A=>A.row===y&&A.col===b)){if(o[o.length-1].row===y&&o[o.length-1].col===b){const A=o.slice(0,-1);s(A),e(T=>{const k=[...T];return k[y][b]={...w,isSelected:!1},k})}return}const _=o[o.length-1],E=Math.abs(_.row-y),C=Math.abs(_.col-b);if(E>1||C>1)return;if(o.length>1){const A=o[o.length-2],T=_.row-A.row,k=_.col-A.col,F=y-_.row,O=b-_.col;if(T!==F||k!==O)return}const N=[...o,w];s(N),e(A=>{const T=[...A];return T[y][b]={...w,isSelected:!0},T});const D=N.map(A=>A.letter).join("");n.includes(D)&&!i.includes(D)&&(a(A=>[...A,D]),e(A=>{const T=[...A.map(k=>[...k])];for(const k of N)T[k.row][k.col]={...T[k.row][k.col],isSelected:!1,isRevealed:!0};return T}),s([]))},v=()=>{s([]),e(y=>{const b=[...y.map(w=>[...w])];for(let w=0;w<b.length;w++)for(let _=0;_<b[w].length;_++)b[w][_].isSelected&&!b[w][_].isRevealed&&(b[w][_]={...b[w][_],isSelected:!1});return b})},x=()=>{if(u||d||i.length>=n.length)return;const y=n.filter(w=>!i.includes(w));if(y.length===0)return;const b=y[0];e(w=>{const _=[...w.map(E=>[...E])];for(let E=0;E<_.length;E++)for(let C=0;C<_[E].length;C++)if(_[E][C].letter===b[0])for(const[N,D]of[[0,1],[1,0],[1,1],[-1,1],[1,-1]]){let A=!0;for(let T=1;T<b.length;T++){const k=E+T*N,F=C+T*D;if(k<0||k>=_.length||F<0||F>=_[E].length||_[k][F].letter!==b[T]){A=!1;break}}if(A){_[E][C]={..._[E][C],isSelected:!0};const T=E+N,k=C+D;return T>=0&&T<_.length&&k>=0&&k<_[E].length&&(_[T][k]={..._[T][k],isSelected:!0}),s([_[E][C],_[T][k]]),h(!0),_}}return _})};return S.jsxs(uo,{title:"Word Search",instructions:"Find the hidden words in the grid. Click and drag to select letters in a straight line.",children:[S.jsxs("div",{className:"text-center mb-6",children:[S.jsxs("div",{className:"flex justify-center gap-4 mb-4",children:[S.jsx("button",{onClick:()=>f("easy"),className:`btn ${c==="easy"?"btn-primary":"bg-gray-200 hover:bg-gray-300"}`,children:"Easy (88)"}),S.jsx("button",{onClick:()=>f("medium"),className:`btn ${c==="medium"?"btn-primary":"bg-gray-200 hover:bg-gray-300"}`,children:"Medium (1010)"})]}),S.jsxs("div",{className:"flex justify-center gap-4 mb-4",children:[S.jsx("button",{onClick:v,className:"btn btn-secondary text-sm",disabled:o.length===0,children:"Clear Selection"}),S.jsx("button",{onClick:x,className:"btn btn-accent text-sm",disabled:d||u,children:"Hint"}),S.jsx("button",{onClick:p,className:"btn bg-gray-200 hover:bg-gray-300 text-sm",children:"New Game"})]})]}),S.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[S.jsx("div",{className:"w-full md:w-1/3",children:S.jsxs("div",{className:"bg-primary-50 p-4 rounded-lg border border-primary-200",children:[S.jsx("h3",{className:"font-bold text-primary-700 mb-2",children:"Words to Find:"}),S.jsx("ul",{className:"space-y-2",children:n.map(y=>S.jsx("li",{className:`text-lg font-medium p-2 rounded ${i.includes(y)?"bg-success-100 text-success-700 line-through":"text-primary-800"}`,children:y},y))})]})}),S.jsx("div",{className:"w-full md:w-2/3",children:S.jsx("div",{className:"grid gap-1 mx-auto",style:{gridTemplateColumns:`repeat(${t.length}, 1fr)`},children:t.flat().map((y,b)=>S.jsx(fn.div,{className:`aspect-square flex items-center justify-center cursor-pointer text-lg font-bold rounded ${y.isRevealed?"bg-success-200 text-success-800":y.isSelected?"bg-primary-300 text-primary-800":"bg-white text-gray-800 hover:bg-gray-100 border border-gray-200"}`,whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>g(y.row,y.col),children:y.letter},b))})})]}),u&&S.jsxs(fn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-8 text-center",children:[S.jsx("h3",{className:"text-2xl font-bold text-success-600 mb-4",children:"Congratulations! You found all the words!"}),S.jsx("button",{onClick:p,className:"btn btn-primary",children:"Play Again"})]})]})},MCe=()=>{const[t,e]=X.useState([]),[n,r]=X.useState(0),[i,a]=X.useState(0),[o,s]=X.useState(!1),[u,l]=X.useState(null),[c,f]=X.useState(null);X.useEffect(()=>{d()},[]);const d=()=>{const m=[v=>S.jsx(ph,{size:24,className:"text-yellow-500"},v),v=>S.jsx(lb,{size:24,className:"text-red-500"},v),v=>S.jsx(ub,{size:24,className:"text-blue-500"},v),v=>S.jsx(fb,{size:24,className:"text-green-500"},v),v=>S.jsx(kv,{size:24,className:"text-purple-500"},v)],g=[];for(let v=0;v<10;v++){const x=m[Math.floor(Math.random()*m.length)],y=Math.floor(Math.random()*7)+1;let b=[y];for(;b.length<3;){const w=Math.floor(Math.random()*10)+1;b.includes(w)||b.push(w)}b=b.sort(()=>Math.random()-.5),g.push({shape:Array.from({length:y}).map((w,_)=>x(`shape-${v}-${_}`)),count:y,options:b})}e(g),r(0),a(0),s(!1),l(null),f(null)},h=m=>{if(u!==null)return;const g=t[n].count,v=m===g;l(m),f(v),v&&a(x=>x+1),setTimeout(()=>{n>=t.length-1?s(!0):(r(x=>x+1),l(null),f(null))},1500)},p=t[n];return S.jsxs(uo,{title:"Counting Game",instructions:"Count the shapes and click on the correct number.",children:[t.length>0&&!o&&S.jsxs("div",{className:"text-center",children:[S.jsxs("div",{className:"flex justify-center gap-8 mb-6",children:[S.jsxs("div",{className:"text-lg font-bold bg-primary-100 px-4 py-2 rounded-md",children:["Question: ",S.jsxs("span",{className:"text-primary-700",children:[n+1,"/",t.length]})]}),S.jsxs("div",{className:"text-lg font-bold bg-success-100 px-4 py-2 rounded-md",children:["Score: ",S.jsx("span",{className:"text-success-700",children:i})]})]}),S.jsxs(fn.div,{initial:{opacity:0},animate:{opacity:1},className:"mb-8",children:[S.jsx("h3",{className:"text-xl font-bold mb-6 text-primary-700",children:"How many shapes do you see?"}),S.jsx("div",{className:"flex flex-wrap gap-4 justify-center mb-8 p-6 bg-gray-50 rounded-lg border-2 border-gray-200 max-w-md mx-auto",children:p.shape}),S.jsx("div",{className:"flex justify-center gap-4",children:p.options.map(m=>S.jsx(fn.button,{className:`w-16 h-16 rounded-full text-2xl font-bold flex items-center justify-center ${u===null?"bg-primary-500 text-white hover:bg-primary-600":u===m?c?"bg-success-500 text-white":"bg-error-500 text-white":m===p.count&&u!==null?"bg-success-500 text-white":"bg-gray-200 text-gray-800"}`,whileHover:{scale:u===null?1.1:1},whileTap:{scale:u===null?.95:1},onClick:()=>h(m),disabled:u!==null,children:m},m))})]},n)]}),o&&S.jsxs(fn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center",children:[S.jsx("h3",{className:"text-2xl font-bold text-primary-600 mb-4",children:"Game Complete!"}),S.jsxs("p",{className:"text-lg mb-6",children:["You scored ",S.jsx("span",{className:"font-bold text-success-600",children:i})," out of ",S.jsx("span",{className:"font-bold",children:t.length}),"!"]}),S.jsx("button",{onClick:d,className:"btn btn-primary",children:"Play Again"})]})]})},ICe=()=>{const[t,e]=X.useState([]),[n,r]=X.useState(null),[i,a]=X.useState(0),[o,s]=X.useState(!1),[u,l]=X.useState("easy");X.useEffect(()=>{c()},[u]);const c=()=>{const m=["circle","square","triangle","star","heart"],g=["#ef4444","#f59e0b","#22c55e","#3b82f6","#d946ef"],v=u==="easy"?5:10,x=[];for(let b=0;b<v;b++){const w=b%m.length,_=b%g.length;x.push({id:`shape-${b}`,type:m[w],color:g[_],placed:!1})}const y=[...x].sort(()=>Math.random()-.5);e(y),r(null),a(0),s(!1)};X.useEffect(()=>{t.length>0&&i===t.length&&s(!0)},[i,t.length]);const f=m=>{r(m)},d=()=>{r(null)},h=m=>{if(!n)return;const g=t.find(v=>v.id===n);!g||g.placed||g.type===m&&(e(v=>v.map(x=>x.id===n?{...x,placed:!0}:x)),a(v=>v+1))},p=(m,g,v=40)=>{switch(m){case"circle":return S.jsx(ub,{size:v,color:g});case"square":return S.jsx(fb,{size:v,color:g});case"triangle":return S.jsx(kv,{size:v,color:g});case"star":return S.jsx(ph,{size:v,color:g});case"heart":return S.jsx(lb,{size:v,color:g});default:return null}};return S.jsxs(uo,{title:"Shape Sorter",instructions:"Drag each shape to its matching outline. Match all shapes to complete the game.",children:[S.jsxs("div",{className:"text-center mb-6",children:[S.jsxs("div",{className:"flex justify-center gap-4 mb-4",children:[S.jsx("button",{onClick:()=>l("easy"),className:`btn ${u==="easy"?"btn-primary":"bg-gray-200 hover:bg-gray-300"}`,children:"Easy (5 Shapes)"}),S.jsx("button",{onClick:()=>l("medium"),className:`btn ${u==="medium"?"btn-primary":"bg-gray-200 hover:bg-gray-300"}`,children:"Medium (10 Shapes)"})]}),S.jsxs("div",{className:"text-lg font-bold",children:["Placed: ",S.jsxs("span",{className:"text-primary-700",children:[i,"/",t.length]})]})]}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[S.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg border-2 border-gray-200",children:[S.jsx("h3",{className:"text-xl font-bold mb-4 text-center text-primary-700",children:"Drop Shapes Here"}),S.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[S.jsx("div",{className:"border-2 border-dashed border-gray-400 rounded-lg p-4 flex items-center justify-center aspect-square",onDragOver:m=>m.preventDefault(),onDrop:()=>h("circle"),children:S.jsx(ub,{size:60,className:"text-gray-300"})}),S.jsx("div",{className:"border-2 border-dashed border-gray-400 rounded-lg p-4 flex items-center justify-center aspect-square",onDragOver:m=>m.preventDefault(),onDrop:()=>h("square"),children:S.jsx(fb,{size:60,className:"text-gray-300"})}),S.jsx("div",{className:"border-2 border-dashed border-gray-400 rounded-lg p-4 flex items-center justify-center aspect-square",onDragOver:m=>m.preventDefault(),onDrop:()=>h("triangle"),children:S.jsx(kv,{size:60,className:"text-gray-300"})}),S.jsx("div",{className:"border-2 border-dashed border-gray-400 rounded-lg p-4 flex items-center justify-center aspect-square",onDragOver:m=>m.preventDefault(),onDrop:()=>h("star"),children:S.jsx(ph,{size:60,className:"text-gray-300"})}),S.jsx("div",{className:"border-2 border-dashed border-gray-400 rounded-lg p-4 flex items-center justify-center aspect-square",onDragOver:m=>m.preventDefault(),onDrop:()=>h("heart"),children:S.jsx(lb,{size:60,className:"text-gray-300"})})]})]}),S.jsxs("div",{className:"bg-white p-6 rounded-lg border-2 border-gray-200",children:[S.jsx("h3",{className:"text-xl font-bold mb-4 text-center text-primary-700",children:"Drag Shapes"}),S.jsx("div",{className:"flex flex-wrap gap-4 justify-center",children:t.map(m=>!m.placed&&S.jsx(fn.div,{className:"cursor-grab active:cursor-grabbing",whileHover:{scale:1.1},whileDrag:{scale:1.1},drag:!0,dragConstraints:{left:0,right:0,top:0,bottom:0},dragElastic:.1,onDragStart:()=>f(m.id),onDragEnd:d,draggable:"true",onDragOver:g=>g.preventDefault(),children:p(m.type,m.color,50)},m.id))})]})]}),o&&S.jsxs(fn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-8 text-center",children:[S.jsx("h3",{className:"text-2xl font-bold text-success-600 mb-4",children:"Great job! You sorted all the shapes!"}),S.jsx("button",{onClick:c,className:"btn btn-primary",children:"Play Again"})]})]})},RCe=()=>{const[t,e]=X.useState([]),[n,r]=X.useState(50),[i,a]=X.useState(0),[o,s]=X.useState(3),[u,l]=X.useState(!1),[c,f]=X.useState(!1),d=X.useRef(null),h=X.useRef(),p=X.useRef(0),m=X.useRef(1),g=["#f59e0b","#d946ef","#3b82f6","#ef4444","#22c55e"],v=()=>{e([]),a(0),s(3),l(!0),f(!1),m.current=1,p.current=0};X.useEffect(()=>{if(!u)return;const w=_=>{_-p.current>800&&(x(),p.current=_),e(E=>{var k;const C=((k=d.current)==null?void 0:k.clientHeight)||400,N=E.map(F=>({...F,y:F.y+F.speed*m.current})),D=N.filter(F=>F.y>C),A=D.filter(F=>{const I=F.x+F.size/2,M=n*d.current.clientWidth/100-80/2,B=M+80;return I>=M&&I<=B});a(F=>F+A.length);const T=D.length-A.length;return T>0&&s(F=>{const O=F-T;return O<=0?(l(!1),f(!0),0):O}),m.current+=2e-4,N.filter(F=>F.y<=C)}),h.current=requestAnimationFrame(w)};return h.current=requestAnimationFrame(w),()=>{h.current&&cancelAnimationFrame(h.current)}},[u,n]);const x=()=>{if(!d.current)return;const w=d.current.clientWidth,_=Math.random()*20+30,E={id:Date.now(),x:Math.random()*(w-_),y:-_,speed:Math.random()*2+2,rotation:Math.random()*360,size:_,color:g[Math.floor(Math.random()*g.length)]};e(C=>[...C,E])},y=w=>{if(!d.current||!u)return;const _=d.current.clientWidth,E=d.current.getBoundingClientRect(),N=(w.clientX-E.left)/_*100;r(Math.max(10,Math.min(90,N)))},b=w=>{if(!d.current||!u)return;const _=d.current.clientWidth,E=d.current.getBoundingClientRect(),N=(w.touches[0].clientX-E.left)/_*100;r(Math.max(10,Math.min(90,N)))};return S.jsxs(uo,{title:"Catch the Stars",instructions:"Move the basket left and right to catch falling stars. Don't let them hit the ground!",children:[S.jsxs("div",{className:"text-center mb-4",children:[S.jsxs("div",{className:"flex justify-center gap-8 mb-4",children:[S.jsxs("div",{className:"text-lg font-bold bg-primary-100 px-4 py-2 rounded-md",children:["Score: ",S.jsx("span",{className:"text-primary-700",children:i})]}),S.jsxs("div",{className:"text-lg font-bold bg-accent-100 px-4 py-2 rounded-md",children:["Lives: ",S.jsx("span",{className:"text-accent-700",children:o})]})]}),!u&&!c&&S.jsx("button",{onClick:v,className:"btn btn-primary",children:"Start Game"})]}),S.jsxs("div",{ref:d,className:"relative bg-gradient-to-b from-blue-900 to-purple-900 h-96 rounded-lg overflow-hidden border-2 border-primary-300",onMouseMove:y,onTouchMove:b,children:[t.map(w=>S.jsx(fn.div,{className:"absolute",style:{left:w.x,top:w.y,width:w.size,height:w.size,transform:`rotate(${w.rotation}deg)`,color:w.color},animate:{rotate:w.rotation+360},transition:{duration:3,repeat:1/0,ease:"linear"},children:S.jsx(ph,{size:w.size,fill:w.color})},w.id)),S.jsx("div",{className:"absolute bottom-0",style:{left:`calc(${n}% - 40px)`,transition:"left 0.1s ease-out"},children:S.jsx("div",{className:"w-80 h-16 flex justify-center",children:S.jsx("div",{className:"w-60 h-12 bg-accent-500 rounded-t-3xl border-t-2 border-l-2 border-r-2 border-accent-300"})})}),!u&&!c&&S.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-30",children:S.jsx("div",{className:"text-3xl font-bold text-white shadow-lg",children:"Click Start to Play"})})]}),c&&S.jsxs(fn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-8 text-center",children:[S.jsxs("h3",{className:"text-2xl font-bold text-primary-600 mb-4",children:["Game Over! Your score: ",i]}),S.jsx("button",{onClick:v,className:"btn btn-primary",children:"Play Again"})]})]})},kCe=[{name:"Dog",image:"https://images.pexels.com/photos/1805164/pexels-photo-1805164.jpeg?auto=compress&cs=tinysrgb&w=300",sound:"Woof woof!"},{name:"Cat",image:"https://images.pexels.com/photos/1170986/pexels-photo-1170986.jpeg?auto=compress&cs=tinysrgb&w=300",sound:"Meow meow!"},{name:"Cow",image:"https://images.pexels.com/photos/735968/pexels-photo-735968.jpeg?auto=compress&cs=tinysrgb&w=300",sound:"Moo moo!"},{name:"Duck",image:"https://images.pexels.com/photos/162140/duckling-birds-yellow-fluffy-162140.jpeg?auto=compress&cs=tinysrgb&w=300",sound:"Quack quack!"},{name:"Horse",image:"https://images.pexels.com/photos/635499/pexels-photo-635499.jpeg?auto=compress&cs=tinysrgb&w=300",sound:"Neigh neigh!"},{name:"Pig",image:"https://images.pexels.com/photos/51311/pig-piglet-small-pig-cute-51311.jpeg?auto=compress&cs=tinysrgb&w=300",sound:"Oink oink!"},{name:"Sheep",image:"https://images.pexels.com/photos/288621/pexels-photo-288621.jpeg?auto=compress&cs=tinysrgb&w=300",sound:"Baa baa!"},{name:"Chicken",image:"https://images.pexels.com/photos/1405930/pexels-photo-1405930.jpeg?auto=compress&cs=tinysrgb&w=300",sound:"Cluck cluck!"}],FCe=()=>{const[t,e]=X.useState([]),[n,r]=X.useState([]),[i,a]=X.useState(null),[o,s]=X.useState(null),[u,l]=X.useState(0),[c,f]=X.useState(!1),[d,h]=X.useState(null);X.useEffect(()=>{p()},[]);const p=()=>{const x=[...kCe].sort(()=>Math.random()-.5).slice(0,4),y=x.map((E,C)=>({id:C,name:E.name,image:E.image,sound:E.sound,matched:!1})),b=x.map((E,C)=>({id:C+4,name:E.name,image:E.image,sound:E.sound,matched:!1})),w=[...y].sort(()=>Math.random()-.5),_=[...b].sort(()=>Math.random()-.5);e(w),r(_),a(null),s(null),l(0),f(!1),h(null)};X.useEffect(()=>{t.length>0&&u===t.length&&f(!0)},[u,t.length]);const m=x=>{x.matched||(i==null?void 0:i.id)===x.id||d||(a(x),o&&v(x,o))},g=x=>{x.matched||(o==null?void 0:o.id)===x.id||d||(s(x),i&&v(i,x))},v=(x,y)=>{x.name===y.name?(h("correct"),setTimeout(()=>{e(b=>b.map(w=>w.id===x.id?{...w,matched:!0}:w)),r(b=>b.map(w=>w.id===y.id?{...w,matched:!0}:w)),l(b=>b+1),a(null),s(null),h(null)},1e3)):(h("incorrect"),setTimeout(()=>{a(null),s(null),h(null)},1e3))};return S.jsxs(uo,{title:"Animal Sounds",instructions:"Match each animal to the sound it makes. Select an animal, then select the correct sound to make a match.",children:[S.jsxs("div",{className:"text-center mb-6",children:[S.jsxs("div",{className:"text-lg font-bold",children:["Matches: ",S.jsxs("span",{className:"text-primary-700",children:[u,"/",t.length]})]}),d&&S.jsx("div",{className:`mt-2 text-lg font-bold ${d==="correct"?"text-success-600":"text-error-600"}`,children:d==="correct"?"Correct match!":"Try again!"})]}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[S.jsxs("div",{children:[S.jsx("h3",{className:"text-xl font-bold mb-4 text-center text-primary-700",children:"Animals"}),S.jsx("div",{className:"grid grid-cols-2 gap-4",children:t.map(x=>S.jsxs(fn.div,{className:`bg-white rounded-lg overflow-hidden cursor-pointer border-2 ${x.matched?"border-success-500":(i==null?void 0:i.id)===x.id?"border-primary-500":"border-gray-200 hover:border-primary-300"}`,whileHover:{scale:x.matched?1:1.03},whileTap:{scale:x.matched?1:.98},onClick:()=>m(x),children:[S.jsx("div",{className:"aspect-square overflow-hidden",children:S.jsx("img",{src:x.image,alt:x.name,className:"w-full h-full object-cover"})}),S.jsx("div",{className:"p-2 text-center font-bold",children:x.name})]},x.id))})]}),S.jsxs("div",{children:[S.jsx("h3",{className:"text-xl font-bold mb-4 text-center text-primary-700",children:"Sounds"}),S.jsx("div",{className:"grid grid-cols-1 gap-4",children:n.map(x=>S.jsx(fn.div,{className:`bg-white rounded-lg p-4 cursor-pointer border-2 ${x.matched?"border-success-500":(o==null?void 0:o.id)===x.id?"border-primary-500":"border-gray-200 hover:border-primary-300"}`,whileHover:{scale:x.matched?1:1.02},whileTap:{scale:x.matched?1:.98},onClick:()=>g(x),children:S.jsx("div",{className:"text-center text-xl font-bold",children:x.sound})},x.id))})]})]}),c&&S.jsxs(fn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-8 text-center",children:[S.jsx("h3",{className:"text-2xl font-bold text-success-600 mb-4",children:"Great job! You matched all the animals with their sounds!"}),S.jsx("button",{onClick:p,className:"btn btn-primary",children:"Play Again"})]})]})},PCe=({onWebcamReady:t})=>{const e=X.useRef(null),[n,r]=X.useState(null),[i,a]=X.useState(null);return X.useEffect(()=>{let o=null;return(async()=>{try{o=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480},facingMode:"user"},audio:!1}),e.current&&(e.current.srcObject=o,r(!0),a(null),e.current.onloadedmetadata=()=>{e.current&&(e.current.play(),t(e.current))})}catch(u){console.error("Error accessing camera:",u),r(!1),u.name==="NotAllowedError"?a("Camera access denied. Please enable camera permissions."):u.name==="NotFoundError"?a("No camera detected on your device."):a("Error accessing camera. Please try again.")}})(),()=>{o&&o.getTracks().forEach(u=>u.stop())}},[t]),n===!1?S.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-md",children:S.jsx("div",{className:"flex",children:S.jsxs("div",{className:"ml-3",children:[S.jsx("p",{className:"text-sm text-red-700",children:i}),S.jsx("button",{onClick:()=>window.location.reload(),className:"mt-2 px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-colors",children:"Retry"})]})})}):S.jsx("video",{ref:e,autoPlay:!0,playsInline:!0,muted:!0,style:{position:"fixed",top:"-9999px"}})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var r7=function(t,e){return(r7=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])})(t,e)};function Oa(t,e){function n(){this.constructor=t}r7(t,e),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function We(t,e,n,r){return new(n||(n=Promise))(function(i,a){function o(l){try{u(r.next(l))}catch(c){a(c)}}function s(l){try{u(r.throw(l))}catch(c){a(c)}}function u(l){l.done?i(l.value):new n(function(c){c(l.value)}).then(o,s)}u((r=r.apply(t,[])).next())})}function Ve(t,e){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){o=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(c[0]===6&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=e.call(t,o)}catch(f){c=[6,f],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([u,l])}}}var OCe=function(){function t(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return t.prototype.setPlatform=function(e,n){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+n+"."),this.platformName=e,this.platform=n},t.prototype.registerFlag=function(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){var i=this.urlFlags[e];console.warn("Setting feature override from URL "+e+": "+i+"."),this.set(e,i)}},t.prototype.get=function(e){return e in this.flags?this.flags[e]:(this.flags[e]=this.evaluateFlag(e),this.flags[e])},t.prototype.getNumber=function(e){return this.get(e)},t.prototype.getBool=function(e){return this.get(e)},t.prototype.getFlags=function(){return this.flags},Object.defineProperty(t.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),t.prototype.set=function(e,n){if(this.flagRegistry[e]==null)throw new Error("Cannot set flag "+e+" as it has not been registered.");this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)},t.prototype.evaluateFlag=function(e){if(this.flagRegistry[e]==null)throw new Error("Cannot evaluate flag '"+e+"': no evaluation function found.");return this.flagRegistry[e].evaluationFn()},t.prototype.setFlags=function(e){this.flags=Object.assign({},e)},t.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},t.prototype.populateURLFlags=function(){var e=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var n,r,i=(n=this.global.location.search,r={},n.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(a){for(var o=[],s=1;s<arguments.length;s++)o[s-1]=arguments[s];return BCe(r,o[0],o[1]),o.join("=")}),r);"tfjsflags"in i&&i.tfjsflags.split(",").forEach(function(a){var o=a.split(":"),s=o[0],u=o[1];e.urlFlags[s]=function(l,c){if((c=c.toLowerCase())==="true"||c==="false")return c==="true";if(""+ +c===c)return+c;throw new Error("Could not parse value flag value "+c+" for flag "+l+".")}(s,u)})}},t}();function BCe(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function _e(){return i7}var i7=null,Fg=new Map,ww=new Map;function a7(t,e){var n=s7(t,e);return Fg.get(n)}function LCe(t){return ww.get(t)}function O4(t){for(var e=Fg.entries(),n=[];;){var r=e.next(),i=r.done,a=r.value;if(i)break;var o=a[0],s=a[1];o.split("_")[0]===t&&n.push(s)}return n}function o7(t){var e=t.kernelName,n=t.backendName,r=s7(e,n);if(Fg.has(r))throw new Error("The kernel '"+e+"' for backend '"+n+"' is already registered");Fg.set(r,t)}function jCe(t){var e=t.kernelName;ww.has(e)&&console.warn("Overriding the gradient for '"+e+"'"),ww.set(e,t)}function s7(t,e){return e+"_"+t}function _w(t,e,n){return Math.max(t,Math.min(e,n))}function u7(t){return t%2==0?t:t+1}function $Ce(t){for(var e=0,n=0;n<t.length;n++)e+=t[n];return e}function Y(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function Wt(t,e,n){n===void 0&&(n=""),Y(ar(t,e),function(){return n+" Shapes "+t+" and "+e+" must match"})}function Vf(t){Y(t!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function df(t,e,n){if(e===void 0&&(e=[]),n===void 0&&(n=!1),e==null&&(e=[]),Array.isArray(t)||Ja(t)&&!n)for(var r=0;r<t.length;++r)df(t[r],e,n);else e.push(t);return e}function He(t){if(t.length===0)return 1;for(var e=t[0],n=1;n<t.length;n++)e*=t[n];return e}function ar(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Rn(t){return t%1==0}function zCe(t){if(Math.tanh!=null)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;var e=Math.exp(2*t);return(e-1)/(e+1)}function Ew(t){var e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function kc(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function B4(t,e,n){return e===void 0&&(e=function(r){return 0}),new Promise(function(r,i){var a=0,o=function(){if(t())r();else{a++;var s=e(a);n!=null&&a>=n?i():setTimeout(o,s)}};o()})}function UCe(t,e){for(var n=1,r=-1,i=0;i<t.length;++i)if(t[i]>=0)n*=t[i];else if(t[i]===-1){if(r!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+i);r=i}else if(t[i]<0)throw Error("Shapes can not be < 0. Found "+t[i]+" at dim "+i);if(r===-1){if(e>0&&e!==n)throw Error("Size("+e+") must match the product of shape "+t);return t}if(n===0)throw Error("Cannot infer the missing size in ["+t+"] when there are 0 elements");if(e%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+e+" / "+n);var a=t.slice();return a[r]=e/n,a}function Yn(t,e){var n=e.length;return Y((t=t==null?e.map(function(r,i){return i}):[].concat(t)).every(function(r){return r>=-n&&r<n}),function(){return"All values in axis param must be in range [-"+n+", "+n+") but got axis "+t}),Y(t.every(function(r){return Rn(r)}),function(){return"All values in axis param must be integers but got axis "+t}),t.map(function(r){return r<0?n+r:r})}function Pu(t,e){for(var n=[],r=[],i=e!=null&&Array.isArray(e)&&e.length===0,a=e==null||i?null:Yn(e,t).sort(),o=0,s=0;s<t.length;++s){if(a!=null){if(a[o]===s&&t[s]!==1)throw new Error("Can't squeeze axis "+s+" since its dim '"+t[s]+"' is not 1");(a[o]==null||a[o]>s)&&t[s]===1&&(n.push(t[s]),r.push(s)),a[o]<=s&&o++}t[s]!==1&&(n.push(t[s]),r.push(s))}return{newShape:n,keptDims:r}}function Bh(t,e){var n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else{if(t!=="bool")throw new Error("Unknown data type "+t);n=new Uint8Array(e)}return n}function Pg(t,e){var n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else{if(t!=="string")throw new Error("Unknown data type "+t);n=new Array(e)}return n}function WCe(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+e+" being uploaded contains "+r+".")}}function VCe(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function qCe(t,e){return e!=="complex64"&&(e!=="float32"||t==="complex64")&&(e!=="int32"||t==="float32"||t==="complex64")&&(e!=="bool"||t!=="bool")}function Ja(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array}function l7(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error("Unknown dtype "+t)}function HCe(t){if(t==null)return 0;var e=0;return t.forEach(function(n){return e+=n.length}),e}function fC(t){return typeof t=="string"||t instanceof String}function GCe(t){return typeof t=="boolean"}function KCe(t){return typeof t=="number"}function wp(t){return Array.isArray(t)?wp(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array?"int32":KCe(t)?"float32":fC(t)?"string":GCe(t)?"bool":"float32"}function Cw(t){return!!(t&&t.constructor&&t.call&&t.apply)}function Nw(t,e){for(var n=e;n<t;++n)if(t%n==0)return n;return t}function eo(t){var e=t.length;if(e<2)return[];var n=new Array(e-1);n[e-2]=t[e-1];for(var r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function c7(t,e,n){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=df(t)),n&&WCe(t,e),function(a,o){return a instanceof Float32Array&&o==="float32"||a instanceof Int32Array&&o==="int32"||a instanceof Uint8Array&&o==="bool"}(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){for(var r=new Uint8Array(t.length),i=0;i<r.length;++i)Math.round(t[i])!==0&&(r[i]=1);return r}throw new Error("Unknown data type "+e)}function L4(t,e){if(t.length===0)return e[0];var n=t.reduce(function(r,i){return r*i});if(n===0)return[];if(n!==e.length)throw new Error("["+t+"] does not match the input size.");return function r(i,a,o){var s=new Array;if(a.length===1)for(var u=a[0],l=0;l<u;l++)s[l]=o[i+l];else{u=a[0];var c=a.slice(1),f=c.reduce(function(d,h){return d*h});for(l=0;l<u;l++)s[l]=r(i+l*f,c,o)}return s}(0,t,e)}function f7(t,e){for(var n=_p(t,e),r=0;r<n.length;r++)n[r]=1;return n}function _p(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error("Unknown data type "+e)}function Ua(){return _e().platform.now()}function d7(t){t.forEach(function(e){Y(Number.isInteger(e)&&e>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+t+"]."})})}function YCe(t,e){return e===void 0&&(e="utf-8"),e=e||"utf-8",_e().platform.encode(t,e)}function Og(t,e){return e===void 0&&(e="utf-8"),e=e||"utf-8",_e().platform.decode(t,e)}function j4(t,e,n){if(e===0)return 0;if(e===1)return t[0];for(var r=t[t.length-1],i=0;i<t.length-1;++i)r+=n[i]*t[i];return r}function XCe(t,e,n){if(e===0)return[];if(e===1)return[t];for(var r=new Array(e),i=0;i<r.length-1;++i)r[i]=Math.floor(t/n[i]),t-=r[i]*n[i];return r[r.length-1]=t,r}var QCe=function(){function t(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new ZCe)}return t.prototype.profileKernel=function(e,n,r){var i,a=this,o=this.backendTimer.time(function(){i=r()});return i.forEach(function(s){s.data().then(function(u){(function(l,c,f){if(c!=="float32")return!1;for(var d=0;d<l.length;d++){var h=l[d];if(isNaN(h)||!isFinite(h))return console.warn("Found "+h+" in the result of '"+f+"'"),!0}})(u,s.dtype,e),o.then(function(l){var c="";l.getExtraProfileInfo!=null&&(c=l.getExtraProfileInfo()),a.logger.logKernelProfile(e,s,u,l.kernelMs,n,c)})})}),i},t}(),ZCe=function(){function t(){}return t.prototype.logKernelProfile=function(e,n,r,i,a,o){var s=typeof i=="number"?kc(i+"ms",9):i.error,u=kc(e,25),l=n.rank,c=n.size,f=kc(n.shape.toString(),14),d="";for(var h in a){var p=a[h].shape||n.shape,m=p.length;d+=h+": "+m+"D "+(m>0?p:"")+" "}console.log("%c"+u+"	%c"+s+"	%c"+l+"D "+f+"	%c"+c+"	%c"+d+"	%c"+o,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},t}(),$4=20,cd=3,$1=7;function JCe(t,e,n,r){var i=eo(e),a=function(l,c,f,d){var h=He(c),p=d[d.length-1],m=new Array(p).fill(0),g=c.length,v=f==="complex64"?dd(l):l;if(g>1)for(var x=0;x<h/p;x++)for(var y=x*p,b=0;b<p;b++)m[b]=Math.max(m[b],fd(v[y+b],0,f).length);return m}(t,e,n,i),o=e.length,s=function l(c,f,d,h,p,m){m===void 0&&(m=!0);var g=d==="complex64"?2:1,v=f[0],x=f.length;if(x===0)return d==="complex64"?[fd(dd(c)[0],0,d)]:d==="bool"?[h7(c[0])]:[c[0].toString()];if(x===1){if(v>$4){var y=cd*g,b=Array.from(c.slice(0,y)),w=Array.from(c.slice((v-cd)*g,v*g));return d==="complex64"&&(b=dd(b),w=dd(w)),["["+b.map(function(O,I){return fd(O,p[I],d)}).join(", ")+", ..., "+w.map(function(O,I){return fd(O,p[v-cd+I],d)}).join(", ")+"]"]}return["["+(d==="complex64"?dd(c):Array.from(c)).map(function(O,I){return fd(O,p[I],d)}).join(", ")+"]"]}var _=f.slice(1),E=h.slice(1),C=h[0]*g,N=[];if(v>$4){for(var D=0;D<cd;D++){var A=(T=D*C)+C;N.push.apply(N,l(c.slice(T,A),_,d,E,p,!1))}for(N.push("..."),D=v-cd;D<v;D++)A=(T=D*C)+C,N.push.apply(N,l(c.slice(T,A),_,d,E,p,D===v-1))}else for(D=0;D<v;D++){var T;A=(T=D*C)+C,N.push.apply(N,l(c.slice(T,A),_,d,E,p,D===v-1))}var k=x===2?",":"";for(N[0]="["+N[0]+k,D=1;D<N.length-1;D++)N[D]=" "+N[D]+k;var F=`,
`;for(D=2;D<x;D++)F+=`
`;return N[N.length-1]=" "+N[N.length-1]+"]"+(m?"":F),N}(t,e,n,i,a),u=["Tensor"];return r&&(u.push("  dtype: "+n),u.push("  rank: "+o),u.push("  shape: ["+e+"]"),u.push("  values:")),u.push(s.map(function(l){return"    "+l}).join(`
`)),u.join(`
`)}function fd(t,e,n){return kc(Array.isArray(t)?parseFloat(t[0].toFixed($1))+" + "+parseFloat(t[1].toFixed($1))+"j":fC(t)?"'"+t+"'":n==="bool"?h7(t):parseFloat(t.toFixed($1)).toString(),e)}function h7(t){return t===0?"false":"true"}function dd(t){for(var e=[],n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}var Lh=function(){function t(e,n,r){var i=this;if(this.dtype=n,this.shape=e.slice(),this.size=He(e),r!=null){var a=r.length;Y(a===this.size,function(){return"Length of values '"+a+"' does not match the size inferred by the shape '"+i.size+"'."})}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Pg(n,this.size),this.strides=eo(e)}return t.prototype.set=function(e){for(var n=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];r.length===0&&(r=[0]),Y(r.length===this.rank,function(){return"The number of provided coordinates ("+r.length+") must match the rank ("+n.rank+")"});var a=this.locToIndex(r);this.values[a]=e},t.prototype.get=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.length===0&&(e=[0]);for(var r=0,i=0,a=e;i<a.length;i++){var o=a[i];if(o<0||o>=this.shape[r]){var s="Requested out of range element at "+e+".   Buffer shape="+this.shape;throw new Error(s)}r++}for(var u=e[e.length-1],l=0;l<e.length-1;++l)u+=this.strides[l]*e[l];return this.values[u]},t.prototype.locToIndex=function(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];for(var n=e[e.length-1],r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n},t.prototype.indexToLoc=function(e){if(this.rank===0)return[];if(this.rank===1)return[e];for(var n=new Array(this.shape.length),r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.toTensor=function(){return Va().makeTensor(this.values,this.shape,this.dtype)},t}(),Va=null,ye=null,p7=null,vn=function(){function t(e,n,r,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=He(e),this.strides=eo(e),this.dataId=r,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}return t.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},t.prototype.asScalar=function(){return this.throwIfDisposed(),Y(this.size===1,function(){return"The array must have only 1 element."}),this.reshape([])},t.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},t.prototype.as2D=function(e,n){return this.throwIfDisposed(),this.reshape([e,n])},t.prototype.as3D=function(e,n,r){return this.throwIfDisposed(),this.reshape([e,n,r])},t.prototype.as4D=function(e,n,r,i){return this.throwIfDisposed(),this.reshape([e,n,r,i])},t.prototype.as5D=function(e,n,r,i,a){return this.throwIfDisposed(),this.reshape([e,n,r,i,a])},t.prototype.asType=function(e){return this.throwIfDisposed(),ye.cast(this,e)},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.buffer=function(){return We(this,void 0,void 0,function(){var e;return Ve(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return e=n.sent(),[2,ye.buffer(this.shape,this.dtype,e)]}})})},t.prototype.bufferSync=function(){return ye.buffer(this.shape,this.dtype,this.dataSync())},t.prototype.array=function(){return We(this,void 0,void 0,function(){var e;return Ve(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return e=n.sent(),[2,L4(this.shape,e)]}})})},t.prototype.arraySync=function(){return L4(this.shape,this.dataSync())},t.prototype.data=function(){return We(this,void 0,void 0,function(){var e,n;return Ve(this,function(r){switch(r.label){case 0:return this.throwIfDisposed(),e=Va().read(this.dataId),this.dtype!=="string"?[3,2]:[4,e];case 1:n=r.sent();try{return[2,n.map(function(i){return Og(i)})]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}r.label=2;case 2:return[2,e]}})})},t.prototype.dataSync=function(){this.throwIfDisposed();var e=Va().readSync(this.dataId);if(this.dtype==="string")try{return e.map(function(n){return Og(n)})}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e},t.prototype.bytes=function(){return We(this,void 0,void 0,function(){var e;return Ve(this,function(n){switch(n.label){case 0:return this.throwIfDisposed(),[4,Va().read(this.dataId)];case 1:return e=n.sent(),this.dtype==="string"?[2,e]:[2,new Uint8Array(e.buffer)]}})})},t.prototype.dispose=function(){this.isDisposed||(Va().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),t.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},t.prototype.toFloat=function(){return this.asType("float32")},t.prototype.toInt=function(){return this.asType("int32")},t.prototype.toBool=function(){return this.asType("bool")},t.prototype.print=function(e){return e===void 0&&(e=!1),ye.print(this,e)},t.prototype.reshape=function(e){return this.throwIfDisposed(),ye.reshape(this,e)},t.prototype.reshapeAs=function(e){return this.throwIfDisposed(),this.reshape(e.shape)},t.prototype.expandDims=function(e){return e===void 0&&(e=0),ye.expandDims(this,e)},t.prototype.cumsum=function(e,n,r){return e===void 0&&(e=0),n===void 0&&(n=!1),r===void 0&&(r=!1),ye.cumsum(this,e,n,r)},t.prototype.squeeze=function(e){return this.throwIfDisposed(),ye.squeeze(this,e)},t.prototype.clone=function(){return this.throwIfDisposed(),ye.clone(this)},t.prototype.oneHot=function(e,n,r){return this.throwIfDisposed(),ye.oneHot(this,e,n,r)},t.prototype.toString=function(e){return e===void 0&&(e=!1),JCe(this.dataSync(),this.shape,this.dtype,e)},t.prototype.tile=function(e){return this.throwIfDisposed(),ye.tile(this,e)},t.prototype.gather=function(e,n){return n===void 0&&(n=0),this.throwIfDisposed(),ye.gather(this,e,n)},t.prototype.matMul=function(e,n,r){return n===void 0&&(n=!1),r===void 0&&(r=!1),this.throwIfDisposed(),ye.matMul(this,e,n,r)},t.prototype.dot=function(e){return this.throwIfDisposed(),ye.dot(this,e)},t.prototype.norm=function(e,n,r){return e===void 0&&(e="euclidean"),n===void 0&&(n=null),r===void 0&&(r=!1),this.throwIfDisposed(),ye.norm(this,e,n,r)},t.prototype.slice=function(e,n){return this.throwIfDisposed(),ye.slice(this,e,n)},t.prototype.reverse=function(e){return this.throwIfDisposed(),ye.reverse(this,e)},t.prototype.concat=function(e,n){return n===void 0&&(n=0),this.throwIfDisposed(),e instanceof t&&(e=[e]),ye.concat([this].concat(e),n)},t.prototype.split=function(e,n){return n===void 0&&(n=0),this.throwIfDisposed(),ye.split(this,e,n)},t.prototype.stack=function(e,n){return n===void 0&&(n=0),ye.stack([this,e],n)},t.prototype.unstack=function(e){return e===void 0&&(e=0),ye.unstack(this,e)},t.prototype.pad=function(e,n){return n===void 0&&(n=0),ye.pad(this,e,n)},t.prototype.batchNormalization=function(e,n,r,i,a){return r===void 0&&(r=.001),p7("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(e,n,a,i,r)},t.prototype.batchNorm=function(e,n,r,i,a){return a===void 0&&(a=.001),this.throwIfDisposed(),ye.batchNorm(this,e,n,r,i,a)},t.prototype.all=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),ye.all(this,e,n)},t.prototype.any=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),ye.any(this,e,n)},t.prototype.logSumExp=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),ye.logSumExp(this,e,n)},t.prototype.sum=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),ye.sum(this,e,n)},t.prototype.prod=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),ye.prod(this,e,n)},t.prototype.mean=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),ye.mean(this,e,n)},t.prototype.min=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),ye.min(this,e,n)},t.prototype.max=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),ye.max(this,e,n)},t.prototype.argMin=function(e){return e===void 0&&(e=null),this.throwIfDisposed(),ye.argMin(this,e)},t.prototype.argMax=function(e){return e===void 0&&(e=null),this.throwIfDisposed(),ye.argMax(this,e)},t.prototype.cast=function(e){return this.throwIfDisposed(),ye.cast(this,e)},t.prototype.add=function(e){return this.throwIfDisposed(),ye.add(this,e)},t.prototype.addStrict=function(e){return this.throwIfDisposed(),ye.addStrict(this,e)},t.prototype.atan2=function(e){return this.throwIfDisposed(),ye.atan2(this,e)},t.prototype.sub=function(e){return this.throwIfDisposed(),ye.sub(this,e)},t.prototype.subStrict=function(e){return this.throwIfDisposed(),ye.subStrict(this,e)},t.prototype.pow=function(e){return this.throwIfDisposed(),ye.pow(this,e)},t.prototype.powStrict=function(e){return this.throwIfDisposed(),ye.powStrict(this,e)},t.prototype.mul=function(e){return this.throwIfDisposed(),ye.mul(this,e)},t.prototype.mulStrict=function(e){return this.throwIfDisposed(),ye.mulStrict(this,e)},t.prototype.div=function(e){return this.throwIfDisposed(),ye.div(this,e)},t.prototype.divNoNan=function(e){return this.throwIfDisposed(),ye.divNoNan(this,e)},t.prototype.floorDiv=function(e){return this.throwIfDisposed(),ye.floorDiv(this,e)},t.prototype.divStrict=function(e){return this.throwIfDisposed(),ye.divStrict(this,e)},t.prototype.minimum=function(e){return this.throwIfDisposed(),ye.minimum(this,e)},t.prototype.minimumStrict=function(e){return this.throwIfDisposed(),ye.minimumStrict(this,e)},t.prototype.maximum=function(e){return this.throwIfDisposed(),ye.maximum(this,e)},t.prototype.maximumStrict=function(e){return this.throwIfDisposed(),ye.maximumStrict(this,e)},t.prototype.mod=function(e){return this.throwIfDisposed(),ye.mod(this,e)},t.prototype.modStrict=function(e){return this.throwIfDisposed(),ye.modStrict(this,e)},t.prototype.squaredDifferenceStrict=function(e){return this.throwIfDisposed(),ye.squaredDifferenceStrict(this,e)},t.prototype.transpose=function(e){return this.throwIfDisposed(),ye.transpose(this,e)},t.prototype.notEqual=function(e){return this.throwIfDisposed(),ye.notEqual(this,e)},t.prototype.notEqualStrict=function(e){return this.throwIfDisposed(),ye.notEqualStrict(this,e)},t.prototype.less=function(e){return this.throwIfDisposed(),ye.less(this,e)},t.prototype.lessStrict=function(e){return this.throwIfDisposed(),ye.lessStrict(this,e)},t.prototype.equal=function(e){return this.throwIfDisposed(),ye.equal(this,e)},t.prototype.equalStrict=function(e){return this.throwIfDisposed(),ye.equalStrict(this,e)},t.prototype.lessEqual=function(e){return this.throwIfDisposed(),ye.lessEqual(this,e)},t.prototype.lessEqualStrict=function(e){return this.throwIfDisposed(),ye.lessEqualStrict(this,e)},t.prototype.greater=function(e){return this.throwIfDisposed(),ye.greater(this,e)},t.prototype.greaterStrict=function(e){return this.throwIfDisposed(),ye.greaterStrict(this,e)},t.prototype.greaterEqual=function(e){return this.throwIfDisposed(),ye.greaterEqual(this,e)},t.prototype.greaterEqualStrict=function(e){return this.throwIfDisposed(),ye.greaterEqualStrict(this,e)},t.prototype.logicalAnd=function(e){return this.throwIfDisposed(),ye.logicalAnd(this,e)},t.prototype.logicalOr=function(e){return this.throwIfDisposed(),ye.logicalOr(this,e)},t.prototype.logicalNot=function(){return this.throwIfDisposed(),ye.logicalNot(this)},t.prototype.logicalXor=function(e){return this.throwIfDisposed(),ye.logicalXor(this,e)},t.prototype.where=function(e,n){return this.throwIfDisposed(),ye.where(e,this,n)},t.prototype.neg=function(){return this.throwIfDisposed(),ye.neg(this)},t.prototype.ceil=function(){return this.throwIfDisposed(),ye.ceil(this)},t.prototype.floor=function(){return this.throwIfDisposed(),ye.floor(this)},t.prototype.sign=function(){return this.throwIfDisposed(),ye.sign(this)},t.prototype.isNaN=function(){return this.throwIfDisposed(),ye.isNaN(this)},t.prototype.isInf=function(){return this.throwIfDisposed(),ye.isInf(this)},t.prototype.isFinite=function(){return this.throwIfDisposed(),ye.isFinite(this)},t.prototype.exp=function(){return this.throwIfDisposed(),ye.exp(this)},t.prototype.expm1=function(){return this.throwIfDisposed(),ye.expm1(this)},t.prototype.log=function(){return this.throwIfDisposed(),ye.log(this)},t.prototype.log1p=function(){return this.throwIfDisposed(),ye.log1p(this)},t.prototype.sqrt=function(){return this.throwIfDisposed(),ye.sqrt(this)},t.prototype.rsqrt=function(){return this.throwIfDisposed(),ye.rsqrt(this)},t.prototype.square=function(){return this.throwIfDisposed(),ye.square(this)},t.prototype.reciprocal=function(){return this.throwIfDisposed(),ye.reciprocal(this)},t.prototype.abs=function(){return this.throwIfDisposed(),ye.abs(this)},t.prototype.clipByValue=function(e,n){return this.throwIfDisposed(),ye.clipByValue(this,e,n)},t.prototype.relu=function(){return this.throwIfDisposed(),ye.relu(this)},t.prototype.relu6=function(){return this.throwIfDisposed(),ye.relu6(this)},t.prototype.elu=function(){return this.throwIfDisposed(),ye.elu(this)},t.prototype.selu=function(){return this.throwIfDisposed(),ye.selu(this)},t.prototype.leakyRelu=function(e){return e===void 0&&(e=.2),this.throwIfDisposed(),ye.leakyRelu(this,e)},t.prototype.prelu=function(e){return this.throwIfDisposed(),ye.prelu(this,e)},t.prototype.sigmoid=function(){return this.throwIfDisposed(),ye.sigmoid(this)},t.prototype.logSigmoid=function(){return this.throwIfDisposed(),ye.logSigmoid(this)},t.prototype.softplus=function(){return this.throwIfDisposed(),ye.softplus(this)},t.prototype.zerosLike=function(){return this.throwIfDisposed(),ye.zerosLike(this)},t.prototype.onesLike=function(){return this.throwIfDisposed(),ye.onesLike(this)},t.prototype.sin=function(){return this.throwIfDisposed(),ye.sin(this)},t.prototype.cos=function(){return this.throwIfDisposed(),ye.cos(this)},t.prototype.tan=function(){return this.throwIfDisposed(),ye.tan(this)},t.prototype.asin=function(){return this.throwIfDisposed(),ye.asin(this)},t.prototype.acos=function(){return this.throwIfDisposed(),ye.acos(this)},t.prototype.atan=function(){return this.throwIfDisposed(),ye.atan(this)},t.prototype.sinh=function(){return this.throwIfDisposed(),ye.sinh(this)},t.prototype.cosh=function(){return this.throwIfDisposed(),ye.cosh(this)},t.prototype.tanh=function(){return this.throwIfDisposed(),ye.tanh(this)},t.prototype.asinh=function(){return this.throwIfDisposed(),ye.asinh(this)},t.prototype.acosh=function(){return this.throwIfDisposed(),ye.acosh(this)},t.prototype.atanh=function(){return this.throwIfDisposed(),ye.atanh(this)},t.prototype.erf=function(){return this.throwIfDisposed(),ye.erf(this)},t.prototype.round=function(){return this.throwIfDisposed(),ye.round(this)},t.prototype.step=function(e){return e===void 0&&(e=0),this.throwIfDisposed(),ye.step(this,e)},t.prototype.softmax=function(e){return e===void 0&&(e=-1),this.throwIfDisposed(),ye.softmax(this,e)},t.prototype.logSoftmax=function(e){return e===void 0&&(e=-1),this.throwIfDisposed(),ye.logSoftmax(this,e)},t.prototype.resizeBilinear=function(e,n){return n===void 0&&(n=!1),this.throwIfDisposed(),ye.image.resizeBilinear(this,e,n)},t.prototype.resizeNearestNeighbor=function(e,n){return n===void 0&&(n=!1),this.throwIfDisposed(),ye.image.resizeNearestNeighbor(this,e,n)},t.prototype.conv1d=function(e,n,r,i,a,o){return i===void 0&&(i="NWC"),a===void 0&&(a=1),this.throwIfDisposed(),ye.conv1d(this,e,n,r,i,a,o)},t.prototype.conv2d=function(e,n,r,i,a,o){return i===void 0&&(i="NHWC"),a===void 0&&(a=[1,1]),this.throwIfDisposed(),ye.conv2d(this,e,n,r,i,a,o)},t.prototype.conv2dTranspose=function(e,n,r,i,a){return this.throwIfDisposed(),ye.conv2dTranspose(this,e,n,r,i,a)},t.prototype.depthwiseConv2D=function(e,n,r,i,a,o){return i===void 0&&(i="NHWC"),a===void 0&&(a=[1,1]),this.throwIfDisposed(),ye.depthwiseConv2d(this,e,n,r,i,a,o)},t.prototype.separableConv2d=function(e,n,r,i,a,o){return a===void 0&&(a=[1,1]),o===void 0&&(o="NHWC"),this.throwIfDisposed(),ye.separableConv2d(this,e,n,r,i,a,o)},t.prototype.avgPool=function(e,n,r,i){return this.throwIfDisposed(),ye.avgPool(this,e,n,r,i)},t.prototype.maxPool=function(e,n,r,i){return this.throwIfDisposed(),ye.maxPool(this,e,n,r,i)},t.prototype.localResponseNormalization=function(e,n,r,i){return e===void 0&&(e=5),n===void 0&&(n=1),r===void 0&&(r=1),i===void 0&&(i=.5),ye.localResponseNormalization(this,e,n,r,i)},t.prototype.pool=function(e,n,r,i,a){return this.throwIfDisposed(),ye.pool(this,e,n,r,i,a)},t.prototype.variable=function(e,n,r){return e===void 0&&(e=!0),this.throwIfDisposed(),Va().makeVariable(this,e,n,r)},t.prototype.unsortedSegmentSum=function(e,n){return this.throwIfDisposed(),ye.unsortedSegmentSum(this,e,n)},t.prototype.batchToSpaceND=function(e,n){return this.throwIfDisposed(),ye.batchToSpaceND(this,e,n)},t.prototype.spaceToBatchND=function(e,n){return this.throwIfDisposed(),ye.spaceToBatchND(this,e,n)},t.prototype.topk=function(e,n){return e===void 0&&(e=1),n===void 0&&(n=!0),this.throwIfDisposed(),ye.topk(this,e,n)},t.prototype.stridedSlice=function(e,n,r,i,a,o,s,u){return i===void 0&&(i=0),a===void 0&&(a=0),o===void 0&&(o=0),s===void 0&&(s=0),u===void 0&&(u=0),this.throwIfDisposed(),ye.stridedSlice(this,e,n,r,i,a,o,s,u)},t.prototype.depthToSpace=function(e,n){return this.throwIfDisposed(),ye.depthToSpace(this,e,n)},t.prototype.fft=function(){return this.throwIfDisposed(),ye.spectral.fft(this)},t.prototype.ifft=function(){return this.throwIfDisposed(),ye.spectral.ifft(this)},t.prototype.rfft=function(){return this.throwIfDisposed(),ye.spectral.rfft(this)},t.prototype.irfft=function(){return this.throwIfDisposed(),ye.spectral.irfft(this)},t}();Object.defineProperty(vn,Symbol.hasInstance,{value:function(t){return!!t&&t.dataId!=null&&t.shape!=null&&t.dtype!=null}});var z4,Sw,Dw,Aw,Tw,hf=function(t){function e(n,r,i,a){var o=t.call(this,n.shape,n.dtype,n.dataId,a)||this;return o.trainable=r,o.name=i,o}return Oa(e,t),e.prototype.assign=function(n){if(n.dtype!==this.dtype)throw new Error("dtype of the new value ("+n.dtype+") and previous value ("+this.dtype+") must match");if(!ar(n.shape,this.shape))throw new Error("shape of the new value ("+n.shape+") and previous value ("+this.shape+") must match");Va().disposeTensor(this),this.dataId=n.dataId,Va().incRef(this,null)},e.prototype.dispose=function(){Va().disposeVariable(this),this.isDisposedInternal=!0},e}(vn);Object.defineProperty(hf,Symbol.hasInstance,{value:function(t){return t instanceof vn&&t.assign!=null&&t.assign instanceof Function}}),function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"}(z4||(z4={})),function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"}(Sw||(Sw={})),function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"}(Dw||(Dw={})),function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"}(Aw||(Aw={})),function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"}(Tw||(Tw={}));var eNe={float32:Aw,int32:Sw,bool:Dw,complex64:Tw};function cr(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error("Can not upcast "+t+" with "+e)}return eNe[t][e]}function z1(t){return cr(t,"int32")}function _n(t,e){if(t.dtype===e.dtype)return[t,e];var n=cr(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function tNe(t,e){Y(t.dtype===e.dtype,function(){return"The dtypes of the first("+t.dtype+") and second("+e.dtype+") input must match"})}function m7(t){var e=[];return function n(r,i,a){if(r!=null){if(r instanceof vn)return void i.push(r);if(o=r,!(!Array.isArray(o)&&typeof o!="object")){var o,s=r;for(var u in s){var l=s[u];a.has(l)||(a.add(l),n(l,i,a))}}}}(t,e,new Set),e}var U1,U4=function(){function t(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return t.prototype.dispose=function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()},t}(),nNe=function(){function t(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new U4}return t.prototype.ready=function(){return We(this,void 0,void 0,function(){var e,n,r;return Ve(this,function(i){switch(i.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then(function(){})];if(this.backendInstance!=null)return[2];e=this.getSortedBackends(),n=0,i.label=1;case 1:return n<e.length?(r=e[n],[4,this.initializeBackend(r).success]):[3,5];case 2:return i.sent()?[4,this.setBackend(r)]:[3,4];case 3:return i.sent(),[2];case 4:return n++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(t.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var e=this.initializeBackendsAndReturnBest(),n=e.name;if(e.asyncInit)throw new Error("The highest priority backend '"+n+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(n)}return this.backendInstance},enumerable:!0,configurable:!0}),t.prototype.backendNames=function(){return Object.keys(this.registryFactory)},t.prototype.findBackend=function(e){return!(e in this.registry)&&(!(e in this.registryFactory)||this.initializeBackend(e).asyncInit)?null:this.registry[e]},t.prototype.findBackendFactory=function(e){return e in this.registryFactory?this.registryFactory[e].factory:null},t.prototype.registerBackend=function(e,n,r){return r===void 0&&(r=1),e in this.registryFactory?(console.warn(e+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:n,priority:r},!0)},t.prototype.setBackend=function(e){return We(this,void 0,void 0,function(){var n,r,i;return Ve(this,function(a){switch(a.label){case 0:if(this.registryFactory[e]==null)throw new Error("Backend name '"+e+"' not found in registry");return this.backendName=e,this.registry[e]!=null?[3,4]:(this.backendInstance=null,n=this.initializeBackend(e),r=n.success,n.asyncInit?[4,r]:[3,2]);case 1:return i=a.sent(),[3,3];case 2:i=r,a.label=3;case 3:if(!i)return[2,!1];a.label=4;case 4:return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new QCe(this.backendInstance),[2,!0]}})})},t.prototype.setupRegisteredKernels=function(){var e=this;O4(this.backendName).forEach(function(n){n.setupFunc!=null&&n.setupFunc(e.backendInstance)})},t.prototype.disposeRegisteredKernels=function(e){var n=this;O4(e).forEach(function(r){r.disposeFunc!=null&&r.disposeFunc(n.registry[e])})},t.prototype.initializeBackend=function(e){var n=this,r=this.registryFactory[e];if(r==null)throw new Error("Cannot initialize backend "+e+", no registration found.");try{var i=r.factory();if(Promise.resolve(i)===i){var a=++this.pendingBackendInitId,o=i.then(function(s){return!(a<n.pendingBackendInitId)&&(n.registry[e]=s,n.pendingBackendInit=null,!0)}).catch(function(s){return!(a<n.pendingBackendInitId)&&(n.pendingBackendInit=null,console.warn("Initialization of backend "+e+" failed"),console.warn(s.stack||s.message),!1)});return this.pendingBackendInit=o,{success:o,asyncInit:!0}}return this.registry[e]=i,{success:!0,asyncInit:!1}}catch(s){return console.warn("Initialization of backend "+e+" failed"),console.warn(s.stack||s.message),{success:!1,asyncInit:!1}}},t.prototype.removeBackend=function(e){if(!(e in this.registryFactory))throw new Error(e+" backend not found in registry");this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},t.prototype.getSortedBackends=function(){var e=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(n,r){return e.registryFactory[r].priority-e.registryFactory[n].priority})},t.prototype.initializeBackendsAndReturnBest=function(){for(var e=this.getSortedBackends(),n=0;n<e.length;n++){var r=e[n],i=this.initializeBackend(r),a=i.success,o=i.asyncInit;if(o||a)return{name:r,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")},t.prototype.moveData=function(e,n){var r=this.state.tensorInfo.get(n),i=r.backend,a=this.readSync(n);i.disposeData(n),r.backend=e,e.move(n,a,r.shape,r.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},t.prototype.tidy=function(e,n){var r,i=this,a=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun(function(){return i.startScope(a)},function(){return i.endScope(r)},function(){return(r=n())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r})},t.prototype.scopedRun=function(e,n,r){e();try{var i=r();return n(),i}catch(a){throw n(),a}},t.prototype.nextTensorId=function(){return t.nextTensorId++},t.prototype.nextVariableId=function(){return t.nextVariableId++},t.prototype.clone=function(e){var n=this.makeTensorFromDataId(e.dataId,e.shape,e.dtype),r={x:e};return this.addTapeNode(this.state.activeScope.name,r,[n],function(i){return{x:function(){return i.toFloat()}}},[]),n},t.prototype.runKernel=function(e,n,r,i,a){return this.runKernelFunc(null,n,null,e,r,i,a)},t.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},t.prototype.checkKernelForMemLeak=function(e,n,r){var i=this.backend.numDataIds(),a=0;r.forEach(function(u){a+=u.dtype==="complex64"?3:1});var o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=i-n-a-o;if(s>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+s+" data ids) after running '"+e+"'")},t.prototype.runKernelFunc=function(e,n,r,i,a,o,s){var u,l=this;o===void 0&&(o=[]),s===void 0&&(s=[]);var c=[],f=this.isTapeOn();i==null&&(i=this.state.activeScope!=null?this.state.activeScope.name:"");var d,h=function(x){f&&(c=x.map(function(y){return l.keep(l.clone(y))}))},p=this.state.numBytes,m=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var g,v=a7(i,this.backendName);return d=v!=null?function(){var x=l.backend.numDataIds();g=v.kernelFunc({inputs:n,attrs:a,backend:l.backend});var y=Array.isArray(g)?g:[g];l.shouldCheckForMemLeaks()&&l.checkKernelForMemLeak(i,x,y);var b=y.map(function(_){var E=_.dataId,C=_.shape,N=_.dtype;return l.makeTensorFromDataId(E,C,N)}),w=b.filter(function(_,E){return s[E]});return h((o||[]).slice().concat(w)),b}:function(){var x=l.backend.numDataIds();g=l.tidy(function(){return e(l.backend,h)});var y=Array.isArray(g)?g:[g];return l.shouldCheckForMemLeaks()&&l.checkKernelForMemLeak(i,x,y),y},this.scopedRun(function(){return l.state.kernelDepth++},function(){return l.state.kernelDepth--},function(){u=l.ENV.getBool("DEBUG")?l.profiler.profileKernel(i,n,function(){return d()}):d()}),f&&this.addTapeNode(i,n,u,r,c),this.state.profiling&&this.state.activeProfile.kernels.push({name:i,bytesAdded:this.state.numBytes-p,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-m,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(n).map(function(x){return n[x].shape}),outputShapes:u.map(function(x){return x.shape})}),Array.isArray(g)?u:u[0]},t.prototype.makeTensor=function(e,n,r,i){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",i=i||this.backend;var a=e;r==="string"&&fC(e[0])&&(a=e.map(function(c){return YCe(c)}));var o=i.write(a,n,r),s=new vn(n,r,o,this.nextTensorId());if(this.incRef(s,i),r==="string"){var u=this.state.tensorInfo.get(o),l=HCe(a);this.state.numBytes+=l-u.bytes,u.bytes=l}return s},t.prototype.makeTensorFromDataId=function(e,n,r,i){var a=new vn(n,r=r||"float32",e,this.nextTensorId());return this.incRef(a,i),a},t.prototype.makeVariable=function(e,n,r,i){n===void 0&&(n=!0),r=r||this.nextVariableId().toString(),i!=null&&i!==e.dtype&&(e=e.asType(i));var a=new hf(e,n,r,this.nextTensorId());if(this.state.registeredVariables[a.name]!=null)throw new Error("Variable with name "+a.name+" was already registered");return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a},t.prototype.incRef=function(e,n){var r=this.state.tensorInfo.has(e.dataId)?this.state.tensorInfo.get(e.dataId).refCount:0;if(this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++,r===0){this.state.numDataBuffers++;var i=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(i=e.size*l7(e.dtype)),this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:i,refCount:0}),this.state.numBytes+=i}this.state.tensorInfo.get(e.dataId).refCount++,e instanceof hf||this.track(e)},t.prototype.disposeTensor=function(e){if(this.state.tensorInfo.has(e.dataId)){this.state.numTensors--,e.dtype==="string"&&this.state.numStringTensors--;var n=this.state.tensorInfo.get(e.dataId);n.refCount<=1?(e.dtype!=="complex64"&&(this.state.numBytes-=n.bytes),this.state.numDataBuffers--,n.backend.disposeData(e.dataId),this.state.tensorInfo.delete(e.dataId)):this.state.tensorInfo.get(e.dataId).refCount--}},t.prototype.disposeVariables=function(){for(var e in this.state.registeredVariables){var n=this.state.registeredVariables[e];this.disposeVariable(n)}},t.prototype.disposeVariable=function(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]},t.prototype.memory=function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e},t.prototype.profile=function(e){return We(this,void 0,void 0,function(){var n,r;return Ve(this,function(i){return this.state.profiling=!0,n=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(a){return a.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r,[2,this.state.activeProfile]})})},t.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},t.prototype.addTapeNode=function(e,n,r,i,a){var o=this,s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:a},u=LCe(e);u!=null&&(i=u.gradFunc),i!=null&&(s.gradient=function(l){return l=l.map(function(c,f){if(c==null){var d=r[f],h=_p(d.size,d.dtype);return o.makeTensor(h,d.shape,d.dtype)}return c}),i(l.length>1?l:l[0],a)}),this.state.activeTape.push(s)},t.prototype.keep=function(e){return e.kept=!0,e},t.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},t.prototype.endTape=function(){this.state.gradientDepth--},t.prototype.startScope=function(e){var n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n},t.prototype.endScope=function(e){for(var n=this,r=m7(e),i=new Set(r.map(function(u){return u.id})),a=0;a<this.state.activeScope.track.length;a++){var o=this.state.activeScope.track[a];o.kept||i.has(o.id)||o.dispose()}var s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach(function(u){u.kept||u.scopeId!==s.id||n.track(u)})},t.prototype.gradients=function(e,n,r,i){var a=this;if(i===void 0&&(i=!1),Y(n.length>0,function(){return"gradients() received an empty list of xs."}),r!=null&&r.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+r.dtype+"'");var o=this.scopedRun(function(){return a.startTape()},function(){return a.endTape()},function(){return a.tidy("forward",e)});Y(o instanceof vn,function(){return"The result y returned by f() must be a tensor."});var s=function(u,l,c){for(var f={},d={},h=0;h<l.length;h++)f[l[h].id]=!0;for(h=0;h<u.length;h++){var p=(_=u[h]).inputs;for(var m in p){for(var g=p[m],v=!1,x=0;x<l.length;x++)if(f[g.id]){_.outputs.forEach(function(D){return f[D.id]=!0}),v=!0,d[_.id]=!0;break}if(v)break}}var y={};y[c.id]=!0;var b={};for(h=u.length-1;h>=0;h--)for(p=(_=u[h]).inputs,x=0;x<_.outputs.length;x++)if(y[_.outputs[x].id]){for(var m in p)y[p[m].id]=!0,b[_.id]=!0;break}var w=[];for(h=0;h<u.length;h++){var _;if(d[(_=u[h]).id]&&b[_.id]){var E={};for(var m in _.inputs){var C=_.inputs[m];f[C.id]&&(E[m]=C)}var N=Object.assign({},_);N.inputs=E,N.outputs=_.outputs,w.push(N)}}return w}(this.state.activeTape,n,o);if(!i&&s.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var u,l,c={};c[o.id]=r??(u=o.shape,l=f7(He(u),"float32"),se.makeTensor(l,u,"float32")),function(d,h,p){for(var m=function(v){var x=h[v],y=[];if(x.outputs.forEach(function(E){var C=d[E.id];C!=null?y.push(C):y.push(null)}),x.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+x.kernelName+".");var b=x.gradient(y),w=function(E){if(!(E in b))throw new Error("Cannot backprop through input "+E+". Available gradients found: "+Object.keys(b)+".");var C=p(function(){return b[E]()});if(C.dtype!=="float32")throw new Error("Error in gradient for op "+x.kernelName+". The gradient of input "+E+" must have 'float32' dtype, but has '"+C.dtype+"'");var N=x.inputs[E];if(!ar(C.shape,N.shape))throw new Error("Error in gradient for op "+x.kernelName+". The gradient of input '"+E+"' has shape '"+C.shape+"', which does not match the shape of the input '"+N.shape+"'");if(d[N.id]==null)d[N.id]=C;else{var D=d[N.id];d[N.id]=D.add(C),D.dispose()}};for(var _ in x.inputs)w(_)},g=h.length-1;g>=0;g--)m(g)}(c,s,function(d){return a.tidy(d)});var f=n.map(function(d){return c[d.id]});return a.state.gradientDepth===0&&(a.state.activeTape.forEach(function(d){for(var h=0,p=d.saved;h<p.length;h++)p[h].dispose()}),a.state.activeTape=null),{value:o,grads:f}})},t.prototype.customGrad=function(e){var n=this;return Y(Cw(e),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var r,i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];Y(i.every(function(s){return s instanceof vn}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var o={};return i.forEach(function(s,u){o[u]=s}),n.runKernelFunc(function(s,u){return Y((r=e.apply(void 0,i.concat([u]))).value instanceof vn,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),Y(Cw(r.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),r.value},o,function(s,u){var l=r.gradFunc(s,u),c=Array.isArray(l)?l:[l];Y(c.length===i.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),Y(c.every(function(d){return d instanceof vn}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var f={};return c.forEach(function(d,h){f[h]=function(){return d}}),f})}},t.prototype.readSync=function(e){return this.state.tensorInfo.get(e).backend.readSync(e)},t.prototype.read=function(e){return this.state.tensorInfo.get(e).backend.read(e)},t.prototype.time=function(e){return We(this,void 0,void 0,function(){var n,r;return Ve(this,function(i){switch(i.label){case 0:return n=Ua(),[4,this.backend.time(e)];case 1:return(r=i.sent()).wallMs=Ua()-n,[2,r]}})})},t.prototype.track=function(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e},Object.defineProperty(t.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),t.prototype.reset=function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new U4,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},t.nextTensorId=0,t.nextVariableId=0,t}(),se=function(){var t=function(){if(U1==null){var n=void 0;if(typeof window<"u")n=window;else if(typeof global<"u")n=global;else if(typeof process<"u")n=process;else{if(typeof self>"u")throw new Error("Could not find a global object");n=self}U1=n}return U1}();if(t._tfengine==null){var e=new OCe(t);t._tfengine=new nNe(e)}return function(n){i7=n}(t._tfengine.ENV),Va=function(){return t._tfengine},t._tfengine}();function v7(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var vo=_e();vo.registerFlag("DEBUG",function(){return!1},function(t){t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),vo.registerFlag("IS_BROWSER",function(){return v7()}),vo.registerFlag("IS_NODE",function(){return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0}),vo.registerFlag("IS_CHROME",function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),vo.registerFlag("PROD",function(){return!1}),vo.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return vo.getBool("DEBUG")}),vo.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),vo.registerFlag("IS_TEST",function(){return!1});var jh,Si,_i,Ru={},W1={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function rNe(t,e){Ru[t]=e}function lo(t){t in Ru||(Ru[t]=function(n){if(n!==1&&n!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var r=function(i){if(typeof OffscreenCanvas<"u"&&i===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(n);return r.addEventListener("webglcontextlost",function(i){i.preventDefault(),delete Ru[n]},!1),n===1?r.getContext("webgl",W1)||r.getContext("experimental-webgl",W1):r.getContext("webgl2",W1)}(t));var e=Ru[t];return e.isContextLost()?(delete Ru[t],lo(t)):(e.disable(e.DEPTH_TEST),e.disable(e.STENCIL_TEST),e.disable(e.BLEND),e.disable(e.DITHER),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SAMPLE_COVERAGE),e.enable(e.SCISSOR_TEST),e.enable(e.CULL_FACE),e.cullFace(e.BACK),Ru[t])}function dy(t,e){return[e,t]}function qd(t){var e=He(t);return Ew(Math.ceil(e/4))}function Ep(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function dC(t,e){var n,r,i,a,o,s,u,l,c,f=t;return _e().getNumber("WEBGL_VERSION")===2?(n=f.R32F,r=f.R16F,i=f.RGBA16F,a=f.RGBA32F,o=f.RED,s=4,u=1,l=f.HALF_FLOAT,c=f.FLOAT):(n=t.RGBA,r=t.RGBA,i=t.RGBA,a=f.RGBA,o=t.RGBA,s=4,u=4,l=e!=null?e.HALF_FLOAT_OES:null,c=t.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:a,textureFormatFloat:o,downloadTextureFormat:t.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:u,textureTypeHalfFloat:l,textureTypeFloat:c}}function Ge(t,e,n){var r=n();return e&&function(i){var a=i.getError();if(a!==i.NO_ERROR)throw new Error("WebGL Error: "+sNe(i,a))}(t),r}(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(jh||(jh={})),function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"}(Si||(Si={})),function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(_i||(_i={}));var iNe=596e-10,aNe=65504;function oNe(t){return!!(_e().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||iNe<Math.abs(t)&&Math.abs(t)<aNe)}function sNe(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+e}}function _m(t,e,n){return Zo(t,e,function(){return t.getExtension(n)},'Extension "'+n+'" not supported on this browser.')}function uNe(t,e,n){var r=Zo(t,e,function(){return t.createShader(t.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(Ge(t,e,function(){return t.shaderSource(r,n)}),Ge(t,e,function(){return t.compileShader(r)}),t.getShaderParameter(r,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function lNe(t,e,n){var r=Zo(t,e,function(){return t.createShader(t.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(Ge(t,e,function(){return t.shaderSource(r,n)}),Ge(t,e,function(){return t.compileShader(r)}),t.getShaderParameter(r,t.COMPILE_STATUS)===!1)throw function(i,a){var o=cNe.exec(a);if(o==null)return console.log("Couldn't parse line number in error: "+a),void console.log(i);for(var s=+o[1],u=i.split(`
`),l=u.length.toString().length+2,c=u.map(function(g,v){return kc((v+1).toString(),l)+g}),f=0,d=0;d<c.length;d++)f=Math.max(c[d].length,f);var h=c.slice(0,s-1),p=c.slice(s-1,s),m=c.slice(s);console.log(h.join(`
`)),console.log(a.split(`
`)[0]),console.log("%c "+kc(p[0],f),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(m.join(`
`))}(n,t.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var V1,q1,cNe=/ERROR: [0-9]+:([0-9]+):/g;function fNe(t,e){return Zo(t,e,function(){return t.createProgram()},"Unable to create WebGLProgram.")}function dNe(t,e,n){if(Ge(t,e,function(){return t.linkProgram(n)}),t.getProgramParameter(n,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function H1(t,e,n){if(Ge(t,e,function(){return t.validateProgram(n)}),t.getProgramParameter(n,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function hNe(t,e,n){var r=Zo(t,e,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return Ge(t,e,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),Ge(t,e,function(){return t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW)}),r}function pNe(t,e,n){var r=Zo(t,e,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return Ge(t,e,function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r)}),Ge(t,e,function(){return t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW)}),r}function mNe(t,e){return Zo(t,e,function(){return t.createTexture()},"Unable to create WebGLTexture.")}function vNe(t,e){var n=_e().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){var r="["+t+"x"+e+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n)throw r="["+t+"x"+e+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+("["+n+"x"+n+"]")+".")}function gNe(t,e){return Zo(t,e,function(){return t.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function W4(t,e,n,r,i,a,o,s){var u=t.getAttribLocation(n,r);return u!==-1&&(Ge(t,e,function(){return t.bindBuffer(t.ARRAY_BUFFER,i)}),Ge(t,e,function(){return t.vertexAttribPointer(u,a,t.FLOAT,!1,o,s)}),Ge(t,e,function(){return t.enableVertexAttribArray(u)}),!0)}function yNe(t,e,n,r){ENe(t,r),Ge(t,e,function(){return t.activeTexture(t.TEXTURE0+r)}),Ge(t,e,function(){return t.bindTexture(t.TEXTURE_2D,n)})}function xNe(t,e,n,r){return Zo(t,e,function(){return t.getUniformLocation(n,r)},'uniform "'+r+'" not present in program.')}function bNe(t,e,n){return t.getUniformLocation(e,n)}function wNe(t,e,n,r,i,a){Ge(t,e,function(){return yNe(t,e,r,a)}),Ge(t,e,function(){return t.uniform1i(i,a)})}function G1(t,e,n,r){Ge(t,e,function(){return t.bindFramebuffer(t.FRAMEBUFFER,r)}),Ge(t,e,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0)})}function V4(t,e,n){Ge(t,e,function(){return t.bindFramebuffer(t.FRAMEBUFFER,n)}),Ge(t,e,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)})}function Em(t){var e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+_Ne(t,e))}function _Ne(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+e}}function Zo(t,e,n,r){var i=Ge(t,e,function(){return n()});if(i==null)throw new Error(r);return i}function ENe(t,e){var n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+n+"]")+".")}function Bg(t,e){return e===void 0&&(e=2),He(t.slice(0,t.length-e))}function Lg(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function K1(t){var e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[Bg(t)].concat(Lg(t))),e}function CNe(t,e){var n;e===void 0&&(e=!1);var r=_e().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e&&(r*=2,(t=t.map(function(l,c){return c>=t.length-2?u7(t[c]):t[c]})).length===1&&(t=[2,t[0]])),t.length!==2){var i=Pu(t);t=i.newShape}var a=He(t);if(t.length<=1&&a<=r)return[1,a];if(t.length===2&&t[0]<=r&&t[1]<=r)return t;if(t.length===3&&t[0]*t[1]<=r&&t[2]<=r)return[t[0]*t[1],t[2]];if(t.length===3&&t[0]<=r&&t[1]*t[2]<=r)return[t[0],t[1]*t[2]];if(t.length===4&&t[0]*t[1]*t[2]<=r&&t[3]<=r)return[t[0]*t[1]*t[2],t[3]];if(t.length===4&&t[0]<=r&&t[1]*t[2]*t[3]<=r)return[t[0],t[1]*t[2]*t[3]];if(e){var o=Bg(t),s=2,u=2;return t.length&&(s=(n=Lg(t))[0],u=n[1]),Ew(a=o*(s/2)*(u/2)).map(function(l){return 2*l})}return Ew(a)}function Cm(t){return t%2==0}function Nm(t,e){if(ar(t=t.slice(-2),e=e.slice(-2))||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){var n=t.slice(-1)[0],r=e.slice(-1)[0];if(n===r||Cm(n)&&Cm(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&Cm(t[0])&&Cm(e[0])}function NNe(t){if(V1==null){var e=lo(t);V1=e.getParameter(e.MAX_TEXTURE_SIZE)}return V1}function SNe(t){if(q1==null){var e=lo(t);q1=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,q1)}function DNe(t){if(t===0)return 0;var e=lo(t);return Qi(e,"EXT_disjoint_timer_query_webgl2")&&t===2?2:Qi(e,"EXT_disjoint_timer_query")?1:0}function Qi(t,e){return t.getExtension(e)!=null}function q4(t){try{if(lo(t)!=null)return!0}catch{return!1}return!1}function ANe(t){if(t===0)return!1;var e=lo(t);if(t===1){if(!Qi(e,"OES_texture_float"))return!1}else if(!Qi(e,"EXT_color_buffer_float"))return!1;return Mw(e)}function TNe(t){if(t===0)return!1;var e=lo(t);if(t!==1){if(Qi(e,"EXT_color_buffer_float"))return Mw(e);if(Qi(e,"EXT_color_buffer_half_float")){var n=e.getExtension("EXT_color_buffer_half_float");return function(r,i){var a=dC(r,i),o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texImage2D(r.TEXTURE_2D,0,a.internalFormatHalfFloat,1,1,0,a.textureFormatFloat,a.textureTypeHalfFloat,null);var s=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,s),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,o,0);var u=r.checkFramebufferStatus(r.FRAMEBUFFER)===r.FRAMEBUFFER_COMPLETE;return r.bindTexture(r.TEXTURE_2D,null),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteTexture(o),r.deleteFramebuffer(s),u}(e,n)}return!1}return!!Qi(e,"OES_texture_float")&&!!Qi(e,"WEBGL_color_buffer_float")&&Mw(e)}function Mw(t){var e=dC(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);var r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);var i=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(r),i}function MNe(t){return t===2&&lo(t).fenceSync!=null}var st=_e();function g7(t){_e().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function $e(t,e){return se.tidy(t,e)}function mi(t){m7(t).forEach(function(e){return e.dispose()})}function INe(t){return se.keep(t)}function jg(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];_e().getBool("IS_TEST")||console.warn.apply(console,t)}function bu(t,e){var n=t;if(Ja(t))return e==="string"?[]:[t.length];if(!Array.isArray(t))return[];for(var r=[];Array.isArray(n)||Ja(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&_e().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function i(a,o,s){if(s=s||[],!Array.isArray(a)&&!Ja(a))return void Y(o.length===0,function(){return"Element arr["+s.join("][")+"] is a primitive, but should be an array/TypedArray of "+o[0]+" elements"});Y(o.length>0,function(){return"Element arr["+s.join("][")+"] should be a primitive, but is an array of "+a.length+" elements"}),Y(a.length===o[0],function(){return"Element arr["+s.join("][")+"] should have "+o[0]+" elements, but has "+a.length+" elements"});for(var u=o.slice(1),l=0;l<a.length;++l)i(a[l],u,s.concat(l))}(t,r,[]),r}function H4(t,e,n,r){if(t!=null&&(t!=="numeric"&&t!==e||t==="numeric"&&e==="string"))throw new Error("Argument '"+n+"' passed to '"+r+"' must be "+t+" tensor, but got "+e+" tensor")}function W(t,e,n,r){if(r===void 0&&(r="numeric"),t instanceof vn)return H4(r,t.dtype,e,n),t;var i=wp(t);if(i!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),H4(r,i,e,n),t==null||!Ja(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){var a=t==null?"null":t.constructor.name;throw new Error("Argument '"+e+"' passed to '"+n+"' must be a Tensor or TensorLike, but got '"+a+"'")}var o=bu(t,i);Ja(t)||Array.isArray(t)||(t=[t]);var s=i!=="string"?c7(t,i,_e().getBool("DEBUG")):df(t,[],!0);return se.makeTensor(s,o,i)}function $g(t,e,n,r){if(r===void 0&&(r="numeric"),!Array.isArray(t))throw new Error("Argument "+e+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return t.map(function(i,a){return W(i,e+"["+a+"]",n)},r)}function y7(t,e){for(var n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function RNe(t,e,n){for(var r=t.length+e.length,i=[],a=0,o=0,s=0;s<r;s++)n.indexOf(s)===-1?i.push(t[a++]):i.push(e[o++]);return i}function Nr(t,e){for(var n=[],r=t.length,i=0;i<r;i++)e.indexOf(i)===-1&&n.push(t[i]);return[n,e.map(function(a){return t[a]})]}function yi(t,e){return RNe(t,e.map(function(n){return 1}),e)}function wi(t,e,n){Y(y7(e,n),function(){return t+" supports only inner-most axes for now. Got axes "+e+" and rank-"+n+" input."})}function co(t,e){if(y7(t,e))return null;for(var n=[],r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(function(i){return n.push(i)}),n}function hC(t){return t.map(function(e,n){return[n,e]}).sort(function(e,n){return e[1]-n[1]}).map(function(e){return e[0]})}function fo(t,e){for(var n=[],r=e-t;r<e;++r)n.push(r);return n}function kNe(t,e){var n=t[0].length;t.forEach(function(i,a){Y(i.length===n,function(){return"Error in concat"+n+"D: rank of tensors["+a+"] must be the same as the rank of the rest ("+n+")"})}),Y(e>=0&&e<n,function(){return"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+"."});var r=t[0];t.forEach(function(i,a){for(var o=0;o<n;o++)Y(o===e||i[o]===r[o],function(){return"Error in concat"+n+"D: Shape of tensors["+a+"] ("+i+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+a+"."})})}function pf(t,e){for(var n=t[0].slice(),r=1;r<t.length;r++)n[e]+=t[r][e];return n}function ae(t){var e=Object.keys(t);if(e.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+e.length+" keys.");var n=e[0],r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var i=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];se.startScope(n);try{var s=r.apply(void 0,a);return s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),se.endScope(s),s}catch(u){throw se.endScope(null),u}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}st.registerFlag("HAS_WEBGL",function(){return st.getNumber("WEBGL_VERSION")>0}),st.registerFlag("WEBGL_VERSION",function(){return q4(2)?2:q4(1)?1:0}),st.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return st.get("WEBGL_VERSION")===2}),st.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),st.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),st.registerFlag("WEBGL_PACK",function(){return st.getBool("HAS_WEBGL")}),st.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return st.getBool("WEBGL_PACK")}),st.registerFlag("WEBGL_PACK_CLIP",function(){return st.getBool("WEBGL_PACK")}),st.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),st.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return st.getBool("WEBGL_PACK")}),st.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return st.getBool("WEBGL_PACK")}),st.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return st.getBool("WEBGL_PACK")}),st.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return st.getBool("WEBGL_PACK")}),st.registerFlag("WEBGL_PACK_REDUCE",function(){return st.getBool("WEBGL_PACK")}),st.registerFlag("WEBGL_LAZILY_UNPACK",function(){return st.getBool("WEBGL_PACK")}),st.registerFlag("WEBGL_CONV_IM2COL",function(){return st.getBool("WEBGL_PACK")}),st.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return NNe(st.getNumber("WEBGL_VERSION"))}),st.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return SNe(st.getNumber("WEBGL_VERSION"))}),st.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var t=st.getNumber("WEBGL_VERSION");return t===0?0:DNe(t)}),st.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return st.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(t=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))));var t}),st.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return ANe(st.getNumber("WEBGL_VERSION"))}),st.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!st.getBool("WEBGL_FORCE_F16_TEXTURES")&&st.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),st.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return TNe(st.getNumber("WEBGL_VERSION"))}),st.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return MNe(st.getNumber("WEBGL_VERSION"))}),st.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return st.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),p7=g7;var lr=ae({complex_:function(t,e){var n=W(t,"real","complex"),r=W(e,"imag","complex");return Wt(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex()."),se.runKernelFunc(function(i){return i.complex(n,r)},{$real:n,$imag:r})}}),Yi=ae({real_:function(t){var e=W(t,"input","real");return se.runKernelFunc(function(n){return n.real(e)},{$input:e})}}),qa=ae({imag_:function(t){var e=W(t,"input","imag");return se.runKernelFunc(function(n){return n.imag(e)},{$input:e})}});function fr(t,e,n){return wu(t,e,bu(t,n),n)}function wu(t,e,n,r){if(r==null&&(r=wp(t)),r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Ja(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){d7(e);var i=He(e),a=He(n);Y(i===a,function(){return"Based on the provided shape, ["+e+"], the tensor should have "+i+" values but has "+a});for(var o=0;o<n.length;++o){var s=n[o],u=o!==n.length-1||s!==He(e.slice(o));Y(n[o]===e[o]||!u,function(){return"Error creating a new Tensor. Inferred shape ("+n+") does not match the provided shape ("+e+"). "})}}return Ja(t)||Array.isArray(t)||(t=[t]),e=e||n,t=r!=="string"?c7(t,r,_e().getBool("DEBUG")):df(t,[],!0),se.makeTensor(t,e,r)}function je(t,e){if((Ja(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&Ja(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return wu(t,[],[],e)}function Fn(t,e){Vf(t);var n=bu(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return wu(t,null,n,e)}function $s(t,e,n){if(Vf(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var r=bu(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return wu(t,e,r,n)}function pC(t,e,n){if(Vf(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var r=bu(t,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return wu(t,e,r,n)}function ri(t,e,n){if(Vf(t),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var r=bu(t,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return wu(t,e,r,n)}function FNe(t,e,n){if(Vf(t),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var r=bu(t,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return wu(t,e,r,n)}function PNe(t,e,n){if(Vf(t),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var r=bu(t,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return wu(t,e=e||r,r,n)}function ONe(t,e,n,r){return e===void 0&&(e=!0),se.makeVariable(t,e,n,r)}function qf(t,e){if(e===void 0&&(e="float32"),e==="complex64"){var n=qf(t,"float32"),r=sn(t,"float32");return lr(n,r)}var i=f7(He(t),e);return se.makeTensor(i,t,e)}function sn(t,e){if(e===void 0&&(e="float32"),e==="complex64"){var n=sn(t,"float32"),r=sn(t,"float32");return lr(n,r)}var i=_p(He(t),e);return se.makeTensor(i,t,e)}function to(t,e,n){return se.runKernelFunc(function(r){return r.fill(t,e,n)},{})}function BNe(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");return se.runKernelFunc(function(r){return r.linspace(t,e,n)},{})}function zg(t,e,n,r){if(n===void 0&&(n=1),r===void 0&&(r="float32"),n===0)throw new Error("Cannot have a step of zero");if(t===e||t<e&&n<0||e<t&&n>1)return sn([0],r);var i=_p(Math.abs(Math.ceil((e-t)/n)),r);e<t&&n===1&&(n=-1),i[0]=t;for(var a=1;a<i.length;a++)i[a]=i[a-1]+n;return Fn(i,r)}var x7=ae({onesLike_:function(t){var e=W(t,"x","onesLike");if(e.dtype==="complex64"){var n=x7(Yi(e)),r=Ot(qa(e));return lr(n,r)}return se.runKernelFunc(function(i){return i.onesLike(e)},{$x:e},function(i,a){return{$x:function(){return Ot(i)}}})}}),Ot=ae({zerosLike_:function(t){var e=W(t,"x","zerosLike");return se.runKernelFunc(function(n){return n.zerosLike(e)},{$x:e},function(n,r){return{$x:function(){return Ot(n)}}})}}),Un=ae({concat_:function(t,e){e===void 0&&(e=0),Y(t.length>=1,function(){return"Pass at least one tensor to concat"});var n=$g(t,"tensors","concat");n[0].dtype==="complex64"&&n.forEach(function(s){if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+s.dtype+". ")}),e=Yn(e,n[0].shape)[0];var r=pf(n.map(function(s){return s.shape}),e);if(He(r)===0)return fr([],r);if((n=n.filter(function(s){return s.size>0})).length===1)return n[0];var i=n.map(function(s){return s.shape});kNe(i,e);var a=n,o={axis:e};return se.runKernelFunc(function(s){return s.concat(n,e)},a,function(s){var u=i.map(function(l){return l[e]});return mC(s,u,e).map(function(l){return function(){return l}})},"Concat",o)}}),LNe=ae({concat1d_:function(t){return Un(t,0)}}),jNe=ae({concat2d_:function(t,e){return Un(t,e)}}),$Ne=ae({concat3d_:function(t,e){return Un(t,e)}}),zNe=ae({concat4d_:function(t,e){return Un(t,e)}}),mC=ae({split_:function(t,e,n){n===void 0&&(n=0);var r,i=W(t,"x","split");return n=Yn(n,i.shape)[0],typeof e=="number"?(Y(i.shape[n]%e==0,function(){return"Number of splits must evenly divide the axis."}),r=new Array(e).fill(i.shape[n]/e)):(Y(i.shape[n]===e.reduce(function(a,o){return a+o}),function(){return"The sum of sizes must match the size of the axis dimension."}),r=e),se.runKernelFunc(function(a){return a.split(i,r,n)},{$x:i},function(a){return{$x:function(){return Un(a,n)}}})}});function Il(t,e){return t(e={exports:{}},e.exports),e.exports}var UNe=Il(function(t){(function(e,n,r){function i(s){var u,l=this,c=(u=4022871197,function(f){f=f.toString();for(var d=0;d<f.length;d++){var h=.02519603282416938*(u+=f.charCodeAt(d));h-=u=h>>>0,u=(h*=u)>>>0,u+=4294967296*(h-=u)}return 23283064365386963e-26*(u>>>0)});l.next=function(){var f=2091639*l.s0+23283064365386963e-26*l.c;return l.s0=l.s1,l.s1=l.s2,l.s2=f-(l.c=0|f)},l.c=1,l.s0=c(" "),l.s1=c(" "),l.s2=c(" "),l.s0-=c(s),l.s0<0&&(l.s0+=1),l.s1-=c(s),l.s1<0&&(l.s1+=1),l.s2-=c(s),l.s2<0&&(l.s2+=1),c=null}function a(s,u){return u.c=s.c,u.s0=s.s0,u.s1=s.s1,u.s2=s.s2,u}function o(s,u){var l=new i(s),c=u&&u.state,f=l.next;return f.int32=function(){return 4294967296*l.next()|0},f.double=function(){return f()+11102230246251565e-32*(2097152*f()|0)},f.quick=f,c&&(typeof c=="object"&&a(c,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=o:this.alea=o})(0,t)}),WNe=Il(function(t){(function(e,n,r){function i(s){var u=this,l="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var f=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^f^f>>>8},s===(0|s)?u.x=s:l+=s;for(var c=0;c<l.length+64;c++)u.x^=0|l.charCodeAt(c),u.next()}function a(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u}function o(s,u){var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(d===0);return d},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&a(c,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=o:this.xor128=o})(0,t)}),VNe=Il(function(t){(function(e,n,r){function i(s){var u=this,l="";u.next=function(){var f=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^f^f<<1)|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,s===(0|s)?u.x=s:l+=s;for(var c=0;c<l.length+64;c++)u.x^=0|l.charCodeAt(c),c==l.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function a(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u.v=s.v,u.d=s.d,u}function o(s,u){var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(d===0);return d},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&a(c,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=o:this.xorwow=o})(0,t)}),qNe=Il(function(t){(function(e,n,r){function i(s){var u=this;u.next=function(){var l,c,f=u.x,d=u.i;return l=f[d],c=(l^=l>>>7)^l<<24,c^=(l=f[d+1&7])^l>>>10,c^=(l=f[d+3&7])^l>>>3,c^=(l=f[d+4&7])^l<<7,l=f[d+7&7],c^=(l^=l<<13)^l<<9,f[d]=c,u.i=d+1&7,c},function(l,c){var f,d=[];if(c===(0|c))d[0]=c;else for(c=""+c,f=0;f<c.length;++f)d[7&f]=d[7&f]<<15^c.charCodeAt(f)+d[f+1&7]<<13;for(;d.length<8;)d.push(0);for(f=0;f<8&&d[f]===0;++f);for(f==8?d[7]=-1:d[f],l.x=d,l.i=0,f=256;f>0;--f)l.next()}(u,s)}function a(s,u){return u.x=s.x.slice(),u.i=s.i,u}function o(s,u){s==null&&(s=+new Date);var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(d===0);return d},f.int32=l.next,f.quick=f,c&&(c.x&&a(c,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=o:this.xorshift7=o})(0,t)}),HNe=Il(function(t){(function(e,n,r){function i(s){var u=this;u.next=function(){var l,c,f=u.w,d=u.X,h=u.i;return u.w=f=f+1640531527|0,c=d[h+34&127],l=d[h=h+1&127],c^=c<<13,l^=l<<17,c^=c>>>15,l^=l>>>12,c=d[h]=c^l,u.i=h,c+(f^f>>>16)|0},function(l,c){var f,d,h,p,m,g=[],v=128;for(c===(0|c)?(d=c,c=null):(c+="\0",d=0,v=Math.max(v,c.length)),h=0,p=-32;p<v;++p)c&&(d^=c.charCodeAt((p+32)%c.length)),p===0&&(m=d),d^=d<<10,d^=d>>>15,d^=d<<4,d^=d>>>13,p>=0&&(m=m+1640531527|0,h=(f=g[127&p]^=d+m)==0?h+1:0);for(h>=128&&(g[127&(c&&c.length||0)]=-1),h=127,p=512;p>0;--p)d=g[h+34&127],f=g[h=h+1&127],d^=d<<13,f^=f<<17,d^=d>>>15,f^=f>>>12,g[h]=d^f;l.w=m,l.X=g,l.i=h}(u,s)}function a(s,u){return u.i=s.i,u.w=s.w,u.X=s.X.slice(),u}function o(s,u){s==null&&(s=+new Date);var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(d===0);return d},f.int32=l.next,f.quick=f,c&&(c.X&&a(c,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=o:this.xor4096=o})(0,t)}),GNe=Il(function(t){(function(e,n,r){function i(s){var u=this,l="";u.next=function(){var f=u.b,d=u.c,h=u.d,p=u.a;return f=f<<25^f>>>7^d,d=d-h|0,h=h<<24^h>>>8^p,p=p-f|0,u.b=f=f<<20^f>>>12^d,u.c=d=d-h|0,u.d=h<<16^d>>>16^p,u.a=p-f|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,s===Math.floor(s)?(u.a=s/4294967296|0,u.b=0|s):l+=s;for(var c=0;c<l.length+20;c++)u.b^=0|l.charCodeAt(c),u.next()}function a(s,u){return u.a=s.a,u.b=s.b,u.c=s.c,u.d=s.d,u}function o(s,u){var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(d===0);return d},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&a(c,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=o:this.tychei=o})(0,t)}),ku=Il(function(t){(function(e,n){var r,i=this,a=256,o=6,s="random",u=n.pow(a,o),l=n.pow(2,52),c=2*l,f=a-1;function d(v,x,y){var b=[],w=m(function C(N,D){var A,T=[],k=typeof N;if(D&&k=="object")for(A in N)try{T.push(C(N[A],D-1))}catch{}return T.length?T:k=="string"?N:N+"\0"}((x=x==1?{entropy:!0}:x||{}).entropy?[v,g(e)]:v??function(){try{var C;return r&&(C=r.randomBytes)?C=C(a):(C=new Uint8Array(a),(i.crypto||i.msCrypto).getRandomValues(C)),g(C)}catch{var N=i.navigator,D=N&&N.plugins;return[+new Date,i,D,i.screen,g(e)]}}(),3),b),_=new h(b),E=function(){for(var C=_.g(o),N=u,D=0;C<l;)C=(C+D)*a,N*=a,D=_.g(1);for(;C>=c;)C/=2,N/=2,D>>>=1;return(C+D)/N};return E.int32=function(){return 0|_.g(4)},E.quick=function(){return _.g(4)/4294967296},E.double=E,m(g(_.S),e),(x.pass||y||function(C,N,D,A){return A&&(A.S&&p(A,_),C.state=function(){return p(_,{})}),D?(n[s]=C,N):C})(E,w,"global"in x?x.global:this==n,x.state)}function h(v){var x,y=v.length,b=this,w=0,_=b.i=b.j=0,E=b.S=[];for(y||(v=[y++]);w<a;)E[w]=w++;for(w=0;w<a;w++)E[w]=E[_=f&_+v[w%y]+(x=E[w])],E[_]=x;(b.g=function(C){for(var N,D=0,A=b.i,T=b.j,k=b.S;C--;)N=k[A=f&A+1],D=D*a+k[f&(k[A]=k[T=f&T+N])+(k[T]=N)];return b.i=A,b.j=T,D})(a)}function p(v,x){return x.i=v.i,x.j=v.j,x.S=v.S.slice(),x}function m(v,x){for(var y,b=v+"",w=0;w<b.length;)x[f&w]=f&(y^=19*x[f&w])+b.charCodeAt(w++);return g(x)}function g(v){return String.fromCharCode.apply(0,v)}if(n["seed"+s]=d,m(n.random(),e),t.exports){t.exports=d;try{r=require("crypto")}catch{}}})([],Math)});ku.alea=UNe,ku.xor128=WNe,ku.xorwow=VNe,ku.xorshift7=qNe,ku.xor4096=HNe,ku.tychei=GNe;var hy=ku.alea,vC=function(){function t(e,n,r,i,a){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=i,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var o=a||Math.random();this.random=hy(o.toString())}return t.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var n,r,i=!1;!i;){var a=void 0,o=void 0,s=void 0;do s=(a=2*this.random()-1)*a+(o=2*this.random()-1)*o;while(s>=1||s===0);var u=Math.sqrt(-2*Math.log(s)/s);n=this.mean+this.stdDev*a*u,r=this.mean+this.stdDev*o*u,this.truncated&&!this.isValidTruncated(n)||(i=!0)}return this.truncated&&!this.isValidTruncated(r)||(this.nextVal=this.convertValue(r)),this.convertValue(n)},t.prototype.convertValue=function(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)},t.prototype.isValidTruncated=function(e){return e<=this.upper&&e>=this.lower},t}(),KNe=function(){function t(e,n,r,i){this.alpha=e,this.beta=1/n,this.dtype=r;var a=i||Math.random();this.randu=hy(a.toString()),this.randn=new vC(0,1,r,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}return t.prototype.nextValue=function(){for(var e,n,r,i,a,o;;){do i=this.randn.nextValue(),o=1+this.c*i;while(o<=0);if(o*=o*o,n=1-.331*(e=i*i)*e,r=.5*e+this.d*(1-o+Math.log(o)),(a=this.randu())<n||Math.log(a)<r)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)},t.prototype.convertValue=function(e){return this.dtype==="float32"?e:Math.round(e)},t}(),YNe=function(){function t(e,n,r,i){var a=this;if(e===void 0&&(e=0),n===void 0&&(n=1),this.canReturnFloat=function(){return a.dtype==null||a.dtype==="float32"},this.min=e,this.range=n-e,this.dtype=r,i==null&&(i=Math.random()),typeof i=="number"&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+e+" - "+n+" <= 1 and dtype is not float");this.random=hy(i)}return t.prototype.convertValue=function(e){return this.canReturnFloat()?e:Math.round(e)},t.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},t}();function vt(t,e,n){return e===void 0&&(e="float32"),e=e||"float32",d7(t),new Lh(t,e,n)}function XNe(t,e){e===void 0&&(e=!1),console.log(t.toString(e))}var b7=ae({batchToSpaceND_:function(t,e,n){var r=W(t,"x","batchToSpaceND"),i=e.reduce(function(a,o){return a*o});return Y(r.rank>=1+e.length,function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+e.length}),Y(n.length===e.length,function(){return"crops.length is "+n.length+" but should be equal to blockShape.length  "+e.length}),Y(r.shape[0]%i==0,function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+e.join(" * ")+" === "+i}),se.runKernelFunc(function(a){return a.batchToSpaceND(r,e,n)},{$x:r},function(a){return{$x:function(){return a.spaceToBatchND(e,n)}}})}}),QNe=ae({broadcastTo_:function(t,e){var n=W(t,"broadcastTo","x"),r=n.shape;if(e.some(function(u){return!(u>0)||u%1!=0}))throw new Error("broadcastTo(): Invalid broadcast shape ["+e+"].");if(e.length<n.rank)throw new Error("broadcastTo(): shape.length="+e.length+" < input.rank="+n.rank+".");if(e.length>n.rank){for(var i=n.shape.slice();i.length<e.length;)i.unshift(1);n=n.reshape(i)}for(var a=Array.from(e),o=e.length-1;o>=0;o--)if(n.shape[o]===e[o])a[o]=1;else if(n.shape[o]!==1)throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+e+"].");var s=a.map(function(u,l){return u>1?l:-1}).filter(function(u){return u>=0});return s.length===0?n.clone():se.runKernelFunc(function(u){return u.tile(n,a)},{input:n},function(u){return{input:function(){return u.sum(s,!0)}}})}}),ZNe=ae({cast_:function(t,e){var n=W(t,"x","cast");if(!VCe(e))throw new Error("Failed to cast to unknown dtype "+e);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");var r={dtype:e};return se.runKernelFunc(function(i){return i.cast(n,e)},{x:n},function(i){return{x:function(){return i.clone()}}},"Cast",r)}}),JNe=ae({clone_:function(t){var e=W(t,"x","clone",null);return se.runKernelFunc(function(){return se.makeTensorFromDataId(e.dataId,e.shape,e.dtype)},{$x:e},function(n){return{$x:function(){return n.toFloat()}}})}}),eSe=ae({cumsum_:function(t,e,n,r){e===void 0&&(e=0),n===void 0&&(n=!1),r===void 0&&(r=!1);var i=W(t,"x","cumsum"),a=co([e|=0],i.rank),o=i;a!=null&&(o=i.transpose(a));var s=fo(1,i.rank)[0],u=se.runKernelFunc(function(l){return l.cumsum(o,s,n,r)},{permutedX:o},function(l){return{permutedX:function(){return l.cumsum(e,n,!r)}}});return a!=null&&(u=u.transpose(a)),u}}),tSe=ae({depthToSpace_:function(t,e,n){n===void 0&&(n="NHWC");var r=W(t,"x","depthToSpace"),i=n==="NHWC"?r.shape[1]:r.shape[2],a=n==="NHWC"?r.shape[2]:r.shape[3],o=n==="NHWC"?r.shape[3]:r.shape[1];return Y(i*e>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+i+" and "+e+`  for depthToSpace with input shape
      `+r.shape}),Y(a*e>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+a+" and "+e+` for depthToSpace with input shape
          `+r.shape}),Y(o%(e*e)==0,function(){return"Dimension size must be evenly divisible by "+e*e+" but is "+o+" for depthToSpace with input shape "+r.shape}),se.runKernelFunc(function(s){return s.depthToSpace(r,e,n)},{$x:r})}}),Gi=ae({expandDims_:function(t,e){e===void 0&&(e=0);var n=W(t,"x","expandDims",null);Y(e<=n.rank,function(){return"Axis must be <= rank of the tensor"});var r=n.shape.slice();return e<0&&(Y(-(n.rank+1)<=e,function(){return"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"}),e=n.rank+e+1),r.splice(e,0,1),wa(n,r)}}),w7=ae({eye_:function(t,e,n,r){r===void 0&&(r="float32"),e==null&&(e=t);for(var i=vt([t,e],r),a=t<=e?t:e,o=0;o<a;++o)i.set(1,o,o);var s=i.toTensor().as2D(t,e);if(n==null)return s;if(n.length===1)return Fc(Gi(s,0),[n[0],1,1]);if(n.length===2)return Fc(Gi(Gi(s,0),0),[n[0],n[1],1,1]);if(n.length===3)return Fc(Gi(Gi(Gi(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}}),nSe=ae({multinomial_:function(t,e,n,r){r===void 0&&(r=!1);var i=W(t,"logits","multinomial"),a=i.size,o=i.rank;if(a<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+a+".");if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+o);n=n||Math.random();var s=o===1?i.as2D(1,-1):i,u=se.runKernelFunc(function(l){return l.multinomial(s,r,e,n)},{logits2D:s});return o===1?u.as1D():u}}),Iw=ae({oneHot_:function(t,e,n,r){if(n===void 0&&(n=1),r===void 0&&(r=0),e<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+e);var i=W(t,"indices","oneHot","int32"),a=i.shape.concat([e]);return i=i.flatten(),se.runKernelFunc(function(o){return o.oneHot(i,e,n,r)},{$indices:i},function(o){return{$indices:function(){return sn(i.shape,"float32")}}}).reshape(a)}}),Rl=ae({pad_:function(t,e,n){n===void 0&&(n=0);var r=W(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var i={paddings:e,constantValue:n};return se.runKernelFunc(function(a){return a.pad(r,e,n)},{x:r},function(a){var o=e.map(function(s){return s[0]});return{x:function(){return a.slice(o,r.shape)}}},"PadV2",i)}}),rSe=ae({pad1d_:function(t,e,n){return n===void 0&&(n=0),Y(e.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),Rl(t,[e],n)}}),iSe=ae({pad2d_:function(t,e,n){return n===void 0&&(n=0),Y(e.length===2&&e[0].length===2&&e[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Rl(t,e,n)}}),aSe=ae({pad3d_:function(t,e,n){return n===void 0&&(n=0),Y(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Rl(t,e,n)}}),oSe=ae({pad4d_:function(t,e,n){return n===void 0&&(n=0),Y(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Rl(t,e,n)}}),sSe=ae({rand_:function(t,e,n){var r=He(t),i=null;if(n==null||n==="float32")i=new Float32Array(r);else if(n==="int32")i=new Int32Array(r);else{if(n!=="bool")throw new Error("Unknown data type "+n);i=new Uint8Array(r)}for(var a=0;a<r;a++)i[a]=e();return se.makeTensor(i,t,n)}}),uSe=ae({randomNormal_:function(t,e,n,r,i){if(e===void 0&&(e=0),n===void 0&&(n=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var a=new vC(e,n,r,!1,i),o=vt(t,r),s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}}),lSe=ae({randomGamma_:function(t,e,n,r,i){if(n===void 0&&(n=1),r===void 0&&(r="float32"),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error("Unsupported data type "+r);for(var a=new KNe(e,n,r,i),o=vt(t,r),s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}}),_7=ae({randomUniform_:function(t,e,n,r,i){e===void 0&&(e=0),n===void 0&&(n=1),r===void 0&&(r="float32");for(var a=vt(t,r),o=new YNe(e,n,null,i),s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}}),wa=ae({reshape_:function(t,e){var n=W(t,"x","reshape",null);e=UCe(e,n.size),Y(n.size===He(e),function(){return"new shape and old shape must have the same number of elements."});var r={shape:e};return se.runKernelFunc(function(i){return i.reshape(n,e)},{x:n},function(i){return{x:function(){return i.reshape(n.shape)}}},"Reshape",r)}}),E7=ae({spaceToBatchND_:function(t,e,n){var r=W(t,"x","spaceToBatchND");return Y(r.rank>=1+e.length,function(){return"input rank "+r.rank+" should be > than [blockShape] "+e.length}),Y(n.length===e.length,function(){return"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+e.length}),Y(r.shape.reduce(function(i,a,o){return o>0&&o<=e.length?i&&(a+n[o-1][0]+n[o-1][1])%e[o-1]==0:i},!0),function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+e.toString()}),se.runKernelFunc(function(i){return i.spaceToBatchND(r,e,n)},{$x:r},function(i){return{$x:function(){return i.batchToSpaceND(e,n)}}})}}),C7=ae({squeeze_:function(t,e){var n=W(t,"x","squeeze");return wa(n,Pu(n.shape,e).newShape)}}),Ii=ae({stack_:function(t,e){e===void 0&&(e=0);var n=$g(t,"tensors","stack");if(Y(n.length>=1,function(){return"Pass at least one tensor to tf.stack"}),n.length===1)return n[0].expandDims(e);var r=n[0].rank,i=n[0].shape,a=n[0].dtype;Y(e<=r,function(){return"Axis must be <= rank of the tensor"}),n.forEach(function(s){Wt(i,s.shape,"All tensors passed to stack must have matching shapes")}),n.forEach(function(s){Y(a===s.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var o=n.map(function(s){return s.expandDims(e)});return Un(o,e)}}),Fc=ae({tile_:function(t,e){var n=W(t,"x","tile",null);Y(n.rank===e.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of reps "+e+"."});var r=[n],i={reps:e};return se.runKernelFunc(function(a,o){var s=a.tile(n,e);return o([n]),s},{x:n},function(a,o){var s=o[0];return{x:function(){var u=Ot(s);if(s.rank===1)for(var l=0;l<e[0];++l)u=u.add(a.slice([l*s.shape[0]],[s.shape[0]]));else if(s.rank===2)for(l=0;l<e[0];++l)for(var c=0;c<e[1];++c)u=u.add(a.slice([l*s.shape[0],c*s.shape[1]],[s.shape[0],s.shape[1]]));else if(s.rank===3)for(l=0;l<e[0];++l)for(c=0;c<e[1];++c)for(var f=0;f<e[2];++f)u=u.add(a.slice([l*s.shape[0],c*s.shape[1],f*s.shape[2]],[s.shape[0],s.shape[1],s.shape[2]]));else{if(s.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+s.rank+" tensors yet.");for(l=0;l<e[0];++l)for(c=0;c<e[1];++c)for(f=0;f<e[2];++f)for(var d=0;d<e[3];++d)u=u.add(a.slice([l*s.shape[0],c*s.shape[1],f*s.shape[2],d*s.shape[3]],[s.shape[0],s.shape[1],s.shape[2],s.shape[3]]))}return u}}},"Tile",i,r)}}),cSe=ae({truncatedNormal_:function(t,e,n,r,i){if(e===void 0&&(e=0),n===void 0&&(n=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var a=new vC(e,n,r,!0,i),o=vt(t,r),s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}}),Wn=ae({unstack_:function(t,e){e===void 0&&(e=0),e=e||0;var n=W(t,"x","unstack");Y(e>=-n.shape.length&&e<n.shape.length,function(){return"Axis = "+e+" is not in [-"+n.shape.length+", "+n.shape.length+")"}),e<0&&(e+=n.shape.length);var r={axis:e};return se.runKernelFunc(function(i){return i.unstack(n,e)},{x:n},function(i){return{x:function(){return Ii(i,e)}}},"Unpack",r)}}),fSe=function(t,e){return We(this,void 0,void 0,function(){var n,r,i,a,o,s,u,l,c,f;return Ve(this,function(d){switch(d.label){case 0:return n=W(t,"x","setdiff1d"),r=W(e,"y","setdiff1d"),Y(n.dtype===r.dtype,function(){return"x and y should have the same dtype, but got x ("+n.dtype+") and y ("+r.dtype+")."}),Y(n.rank===1,function(){return"x should be 1D tensor, but got x ("+n.shape+")."}),Y(r.rank===1,function(){return"y should be 1D tensor, but got y ("+r.shape+")."}),[4,n.data()];case 1:return i=d.sent(),[4,r.data()];case 2:for(a=d.sent(),o=new Set(a),s=0,c=0;c<i.length;c++)o.has(i[c])||s++;for(u=new Lh([s],n.dtype),l=new Lh([s],"int32"),c=0,f=0;c<i.length;c++)o.has(i[c])||(u.values[f]=i[c],l.values[f]=c,f++);return[2,[u.toTensor(),l.toTensor()]]}})})};function Ug(t,e,n,r){r===void 0&&(r=!0);var i=[];if(r)(i=i.concat(e.slice(0))).push(t[0]/n),i=i.concat(t.slice(1));else{i=i.concat(t[0]);for(var a=e.length,o=0;o<a;++o)i=i.concat([t[o+1]/e[o],e[o]]);i=i.concat(t.slice(a+1))}return i}function Wg(t,e,n){n===void 0&&(n=!0);var r=[];if(n){r.push(e);for(var i=e+1;i<t;++i)i<=2*e?(r.push(i),r.push(i-(e+1))):r.push(i)}else{var a=[],o=[];for(i=1;i<t;++i)i>=2*e+1||i%2==1?o.push(i):a.push(i);r.push.apply(r,a),r.push(0),r.push.apply(r,o)}return r}function Vg(t,e,n,r){r===void 0&&(r=!0);var i=[];r?i.push(t[0]/n):i.push(t[0]*n);for(var a=1;a<t.length;++a)a<=e.length?r?i.push(e[a-1]*t[a]):i.push(t[a]/e[a-1]):i.push(t[a]);return i}function N7(t,e){for(var n=[0],r=0;r<e;++r)n.push(t[r][0]);return n}function S7(t,e,n){for(var r=t.slice(0,1),i=0;i<n;++i)r.push(t[i+1]-e[i][0]-e[i][1]);return r}function D7(t,e){if(t.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if(e.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+e.dtype+".");if(e.shape[e.rank-1]>t.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+e.shape[e.rank-1]+" vs. "+t.rank);if(t.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+t.shape+".");for(var n=e.shape,r=n[n.length-1],i=1,a=0;a<n.length-1;++a)i*=n[a];var o=t.shape,s=n.slice();s.pop();var u=1;for(a=r;a<t.rank;++a)u*=o[a],s.push(o[a]);var l=eo(t.shape).map(function(c){return c/u}).concat([1]).slice(0,r);return[s,i,u,l]}var A7=30;function Y1(t){return t<=A7?t:Nw(t,Math.floor(Math.sqrt(t)))}function dSe(t,e,n){var r=e.rank>1?e.shape[e.rank-1]:1,i=e.rank>1?e.rank-1:1,a="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+", indices.shape: "+e.shape+", shape: "+t+", sliceDim: "+r+", and batchDim: "+i+".";if(n.rank<i)throw new Error(a+" update.rank < "+i+". ");if(t.length<r+(n.rank-i))throw new Error(a+" Output shape length < "+(r+(n.rank-i)));if(n.rank!==i+t.length-r)throw new Error(a+" update.rank != "+(i+t.length-r));for(var o=0;o<i;++o)if(n.shape[o]!==e.shape[o])throw new Error(a+" updates.shape["+o+"] ("+n.shape[o]+") != indices.shape["+o+"] ("+e.shape[o]+").");for(o=0;o<n.rank-i;++o)if(n.shape[o+i]!==t[o+r])throw new Error(a+" updates.shape["+(o+i)+"] ("+n.shape[o+i]+") != shape["+(o+i)+"] ("+t[o+i]+")")}function hSe(t,e,n){if(e.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if(t.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+t.rank+".");if(e.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+e.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(n.length===0){if(e.size===0)throw new Error("Indices specified for empty output. indices shape: "+e.shape);if(t.size===0)throw new Error("Updates specified for empty output. updates shape: "+t.shape)}dSe(n,e,t)}function qg(t,e,n){for(var r=e.shape.length,i=r>1?e.shape[r-1]:1,a=n.length,o=1,s=i;s<a;++s)o*=n[s];var u=i<1?1:i;return{sliceRank:i,numUpdates:He(e.shape)/u,sliceSize:o,strides:eo(n.slice(0,i)).concat([1]),outputSize:He(n)}}function pSe(t,e,n){Y(t.rank===e.length,function(){return"Error in slice"+t.rank+"D: Length of begin "+e+" must match the rank of the array ("+t.rank+")."}),Y(t.rank===n.length,function(){return"Error in slice"+t.rank+"D: Length of size "+n+" must match the rank of the array ("+t.rank+")."});for(var r=function(a){Y(e[a]+n[a]<=t.shape[a],function(){return"Error in slice"+t.rank+"D: begin["+a+"] + size["+a+"] ("+(e[a]+n[a])+") would overflow input.shape["+a+"] ("+t.shape[a]+")"})},i=0;i<t.rank;++i)r(i)}function G4(t){for(var e=[],n=0;t>0;)1&t&&e.push(n),t/=2,n++;return e}function gC(t,e,n){for(var r=[],i=0;i<t.length;i++)r[i]=Math.ceil((e[i]-t[i])/n[i]);return r}function mSe(t,e,n,r,i){var a=e[i],o=n[i]||1;(t&1<<i||a==null)&&(a=o>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var s=r[i];return a<0&&(a+=s),a=_w(0,a,s-1)}function vSe(t,e,n,r,i){var a=e[i],o=n[i]||1;(t&1<<i||a==null)&&(a=o>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var s=r[i];return a<0&&(a+=s),a=o>0?_w(0,a,s):_w(-1,a,s-1)}function T7(t,e,n){for(var r=n.length,i=0;i<n.length;i++)if(n[i]>1){r=i;break}for(i=r+1;i<n.length;i++)if(e[i]>0||n[i]!==t[i])return!1;return!0}function M7(t,e){for(var n=t.length>0?t[t.length-1]:1,r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function gSe(t,e){Y(Cw(t),function(){return"The f passed in variableGrads(f) must be a function"}),Y(e==null||Array.isArray(e)&&e.every(function(c){return c instanceof hf}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var n=e!=null;if(!n)for(var r in e=[],se.registeredVariables)e.push(se.registeredVariables[r]);var i=n?e.filter(function(c){return!c.trainable}):null,a=e.length;Y((e=e.filter(function(c){return c.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+a+" variables is trainable."});var o=se.gradients(t,e,null,!0),s=o.value,u=o.grads;Y(u.some(function(c){return c!=null}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),Y(s.rank===0,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+s.rank+" tensor"});var l={};return e.forEach(function(c,f){u[f]!=null&&(l[c.name]=u[f])}),i!=null&&i.forEach(function(c){return l[c.name]=null}),{value:s,grads:l}}function py(t){return se.customGrad(t)}var Jo=ae({softmax_:function(t,e){e===void 0&&(e=-1);var n=W(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+e);return se.runKernelFunc(function(r,i){var a=r.softmax(n,e);return i([a]),a},{logits:n},function(r,i){var a=i[0],o=r.mul(a);return{logits:function(){return o.sub(o.sum([e],!0).mul(a))}}},"Softmax",{dim:e},[],[!0])}}),ySe=ae({logSoftmax_:function(t,e){e===void 0&&(e=-1);var n=W(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and axis was "+e);return py(function(r,i){var a=r.max(e,!0),o=r.sub(a),s=o.toFloat().sub(o.exp().sum(e,!0).log());return i([s]),{value:s,gradFunc:function(u,l){var c=l[0].exp();return u.sub(u.sum(e,!0).mul(c))}}})(n)}}),I7=function(){function t(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return t.prototype.get=function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)},t.prototype.set=function(e,n){this.dataIdsCount++,this.data.set(e,n)},t.prototype.has=function(e){return this.data.has(e)},t.prototype.delete=function(e){return this.dataIdsCount--,this.data.delete(e)},t.prototype.numDataIds=function(){return this.dataIdsCount},t}(),R7=function(){function t(){}return t.prototype.time=function(e){return ve("time")},t.prototype.read=function(e){return ve("read")},t.prototype.readSync=function(e){return ve("readSync")},t.prototype.numDataIds=function(){return ve("numDataIds")},t.prototype.disposeData=function(e){return ve("disposeData")},t.prototype.write=function(e,n,r){return ve("write")},t.prototype.move=function(e,n,r,i){return ve("move")},t.prototype.memory=function(){return ve("memory")},t.prototype.floatPrecision=function(){return ve("floatPrecision")},t.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},t.prototype.batchMatMul=function(e,n,r,i){return ve("batchMatMul")},t.prototype.fusedBatchMatMul=function(e){return e.a,e.b,e.transposeA,e.transposeB,e.bias,e.activation,e.preluActivationWeights,ve("fusedBatchMatMul")},t.prototype.slice=function(e,n,r){return ve("slice")},t.prototype.stridedSlice=function(e,n,r,i){return ve("stridedSlice")},t.prototype.unstack=function(e,n){return ve("unstack")},t.prototype.reverse=function(e,n){return ve("reverse")},t.prototype.concat=function(e,n){return ve("concat")},t.prototype.neg=function(e){return ve("neg")},t.prototype.add=function(e,n){return ve("add")},t.prototype.addN=function(e){return ve("addN")},t.prototype.subtract=function(e,n){return ve("subtract")},t.prototype.multiply=function(e,n){return ve("multiply")},t.prototype.realDivide=function(e,n){return ve("realDivide")},t.prototype.floorDiv=function(e,n){return ve("floorDiv")},t.prototype.sum=function(e,n){return ve("sum")},t.prototype.prod=function(e,n){return ve("prod")},t.prototype.unsortedSegmentSum=function(e,n,r){return ve("unsortedSegmentSum")},t.prototype.argMin=function(e,n){return ve("argMin")},t.prototype.argMax=function(e,n){return ve("argMax")},t.prototype.equal=function(e,n){return ve("equal")},t.prototype.notEqual=function(e,n){return ve("notEqual")},t.prototype.less=function(e,n){return ve("less")},t.prototype.lessEqual=function(e,n){return ve("lessEqual")},t.prototype.greater=function(e,n){return ve("greater")},t.prototype.greaterEqual=function(e,n){return ve("greaterEqual")},t.prototype.logicalNot=function(e){return ve("logicalNot")},t.prototype.logicalAnd=function(e,n){return ve("logicalAnd")},t.prototype.logicalOr=function(e,n){return ve("logicalOr")},t.prototype.where=function(e){return ve("where")},t.prototype.select=function(e,n,r){return ve("select")},t.prototype.topk=function(e,n,r){return ve("topk")},t.prototype.min=function(e,n){return ve("min")},t.prototype.minimum=function(e,n){return ve("minimum")},t.prototype.mod=function(e,n){return ve("mod")},t.prototype.max=function(e,n){return ve("max")},t.prototype.maximum=function(e,n){return ve("maximum")},t.prototype.all=function(e,n){return ve("all")},t.prototype.any=function(e,n){return ve("any")},t.prototype.squaredDifference=function(e,n){return ve("squaredDifference")},t.prototype.ceil=function(e){return ve("ceil")},t.prototype.floor=function(e){return ve("floor")},t.prototype.round=function(e){return ve("round")},t.prototype.sign=function(e){return ve("sign")},t.prototype.isNaN=function(e){return ve("isNaN")},t.prototype.isInf=function(e){return ve("isInf")},t.prototype.isFinite=function(e){return ve("isFinite")},t.prototype.pow=function(e,n){return ve("pow")},t.prototype.exp=function(e){return ve("exp")},t.prototype.expm1=function(e){return ve("expm1")},t.prototype.softmax=function(e,n){return ve("softmax")},t.prototype.log=function(e){return ve("log")},t.prototype.log1p=function(e){return ve("log1p")},t.prototype.sqrt=function(e){return ve("sqrt")},t.prototype.rsqrt=function(e){return ve("rsqrt")},t.prototype.square=function(e){return ve("square")},t.prototype.reciprocal=function(e){return ve("reciprocal")},t.prototype.relu=function(e){return ve("relu")},t.prototype.relu6=function(e){return ve("relu6")},t.prototype.prelu=function(e,n){return ve("prelu")},t.prototype.elu=function(e){return ve("elu")},t.prototype.eluDer=function(e,n){return ve("eluDer")},t.prototype.selu=function(e){return ve("selu")},t.prototype.int=function(e){return ve("int")},t.prototype.clip=function(e,n,r){return ve("clip")},t.prototype.abs=function(e){return ve("abs")},t.prototype.complexAbs=function(e){return ve("complexAbs")},t.prototype.sigmoid=function(e){return ve("sigmoid")},t.prototype.softplus=function(e){return ve("softplus")},t.prototype.sin=function(e){return ve("sin")},t.prototype.cos=function(e){return ve("cos")},t.prototype.tan=function(e){return ve("tan")},t.prototype.asin=function(e){return ve("asin")},t.prototype.acos=function(e){return ve("acos")},t.prototype.atan=function(e){return ve("atan")},t.prototype.atan2=function(e,n){return ve("atan2")},t.prototype.sinh=function(e){return ve("sinh")},t.prototype.cosh=function(e){return ve("cosh")},t.prototype.tanh=function(e){return ve("tanh")},t.prototype.asinh=function(e){return ve("asinh")},t.prototype.acosh=function(e){return ve("acosh")},t.prototype.atanh=function(e){return ve("atanh")},t.prototype.erf=function(e){return ve("erf")},t.prototype.step=function(e,n){return ve("step")},t.prototype.fusedConv2d=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,ve("fusedConv2d")},t.prototype.conv2d=function(e,n,r){return ve("conv2d")},t.prototype.conv2dDerInput=function(e,n,r){return ve("conv2dDerInput")},t.prototype.conv2dDerFilter=function(e,n,r){return ve("conv2dDerFilter")},t.prototype.fusedDepthwiseConv2D=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,ve("fusedDepthwiseConv2D")},t.prototype.depthwiseConv2D=function(e,n,r){return ve("depthwiseConv2D")},t.prototype.depthwiseConv2DDerInput=function(e,n,r){return ve("depthwiseConv2DDerInput")},t.prototype.depthwiseConv2DDerFilter=function(e,n,r){return ve("depthwiseConv2DDerFilter")},t.prototype.conv3d=function(e,n,r){return ve("conv3d")},t.prototype.conv3dDerInput=function(e,n,r){return ve("conv3dDerInput")},t.prototype.conv3dDerFilter=function(e,n,r){return ve("conv3dDerFilter")},t.prototype.maxPool=function(e,n){return ve("maxPool")},t.prototype.maxPoolBackprop=function(e,n,r,i){return ve("maxPoolBackprop")},t.prototype.avgPool=function(e,n){return ve("avgPool")},t.prototype.avgPoolBackprop=function(e,n,r){return ve("avgPoolBackprop")},t.prototype.avgPool3d=function(e,n){return ve("avgPool3d")},t.prototype.avgPool3dBackprop=function(e,n,r){return ve("avgPool3dBackprop")},t.prototype.maxPool3d=function(e,n){return ve("maxPool3d")},t.prototype.maxPool3dBackprop=function(e,n,r,i){return ve("maxPool3dBackprop")},t.prototype.reshape=function(e,n){return ve("reshape")},t.prototype.cast=function(e,n){return ve("cast")},t.prototype.tile=function(e,n){return ve("tile")},t.prototype.pad=function(e,n,r){return ve("pad")},t.prototype.transpose=function(e,n){return ve("transpose")},t.prototype.gather=function(e,n,r){return ve("gather")},t.prototype.gatherND=function(e,n){return ve("gatherND")},t.prototype.scatterND=function(e,n,r){return ve("scatterND")},t.prototype.batchToSpaceND=function(e,n,r){return ve("batchToSpaceND")},t.prototype.spaceToBatchND=function(e,n,r){return ve("spaceToBatchND")},t.prototype.resizeBilinear=function(e,n,r,i){return ve("resizeBilinear")},t.prototype.resizeBilinearBackprop=function(e,n,r){return ve("resizeBilinearBackprop")},t.prototype.resizeNearestNeighbor=function(e,n,r,i){return ve("resizeNearestNeighbor")},t.prototype.resizeNearestNeighborBackprop=function(e,n,r){return ve("resizeNearestNeighborBackprop")},t.prototype.batchNormalization=function(e,n,r,i,a,o){return ve("batchNormalization")},t.prototype.localResponseNormalization4D=function(e,n,r,i,a){return ve("localResponseNormalization4D")},t.prototype.LRNGrad=function(e,n,r,i,a,o,s){return ve("LRNGrad")},t.prototype.multinomial=function(e,n,r,i){return ve("multinomial")},t.prototype.oneHot=function(e,n,r,i){return ve("oneHot")},t.prototype.cumsum=function(e,n,r,i){return ve("cumsum")},t.prototype.nonMaxSuppression=function(e,n,r,i,a){return ve("nonMaxSuppression")},t.prototype.fft=function(e){return ve("fft")},t.prototype.ifft=function(e){return ve("ifft")},t.prototype.complex=function(e,n){return ve("complex")},t.prototype.real=function(e){return ve("real")},t.prototype.imag=function(e){return ve("imag")},t.prototype.cropAndResize=function(e,n,r,i,a,o){return ve("cropAndResize")},t.prototype.depthToSpace=function(e,n,r){return ve("depthToSpace")},t.prototype.split=function(e,n,r){return ve("split")},t.prototype.sparseToDense=function(e,n,r,i){return ve("sparseToDense")},t.prototype.diag=function(e){return ve("diag")},t.prototype.fill=function(e,n,r){return ve("fill")},t.prototype.onesLike=function(e){return ve("onesLike")},t.prototype.zerosLike=function(e){return ve("zerosLike")},t.prototype.linspace=function(e,n,r){return ve("linspace")},t.prototype.dispose=function(){return ve("dispose")},t}();function ve(t){throw new Error("'"+t+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function Cs(t,e){for(var n=t.length,r=[],i=0;i<n;i++){var a=n-1-i,o=t[a]||1;(e[e.length-1-i]||1)>1&&o===1&&r.unshift(a)}return r}function Vn(t,e){for(var n=[],r=0;r<e.length;r++){var i=t[t.length-r-1],a=e.length-r-1,o=e[a];(i==null||i===1&&o>1)&&n.unshift(a)}return n}function Mt(t,e){for(var n=[],r=Math.max(t.length,e.length),i=0;i<r;i++){var a=t[t.length-i-1];a==null&&(a=1);var o=e[e.length-i-1];if(o==null&&(o=1),a===1)n.unshift(o);else if(o===1)n.unshift(a);else{if(a!==o)throw Error("Operands could not be broadcast together with shapes "+t+" and "+e+".");n.unshift(a)}}return n}function $h(t,e,n,r,i,a,o){o===void 0&&(o="channelsLast");var s,u=Kg(e),l=u[0],c=u[1];if(o==="channelsLast")s=[l,c,t[3],t[3]];else{if(o!=="channelsFirst")throw new Error("Unknown dataFormat "+o);s=[l,c,t[1],t[1]]}return kl(t,s,n,r,i,a,!1,o)}function Hg(t,e,n,r,i,a,o){o===void 0&&(o="NDHWC");var s,u,l=Rw(e),c=l[0],f=l[1],d=l[2];if(o==="NDHWC")u="channelsLast",s=[c,f,d,t[4],t[4]];else{if(o!=="NCDHW")throw new Error("Unknown dataFormat "+o);u="channelsFirst",s=[c,f,d,t[1],t[1]]}return Gg(t,s,n,r,i,!1,u,a)}function kl(t,e,n,r,i,a,o,s){o===void 0&&(o=!1),s===void 0&&(s="channelsLast");var u=[-1,-1,-1,-1],l=u[0],c=u[1],f=u[2],d=u[3];if(s==="channelsLast")l=t[0],c=t[1],f=t[2],d=t[3];else{if(s!=="channelsFirst")throw new Error("Unknown dataFormat "+s);l=t[0],d=t[1],c=t[2],f=t[3]}var h,p=e[0],m=e[1],g=e[3],v=Kg(n),x=v[0],y=v[1],b=Kg(r),w=b[0],_=b[1],E=Pc(p,w),C=Pc(m,_),N=function(F,O,I,M,B,R,j,K){var V,L,ne;if(typeof F=="number"){V={top:F,bottom:F,left:F,right:F,type:F===0?"VALID":"NUMBER"};var fe=function(re,ie,de,he,$){he==null&&(he=k7(re,ie,de));var G=re[0],ue=re[1],ce=Hd((G-ie+2*he)/de+1,$);Y(Rn(ce),function(){return"The output # of rows ("+ce+") must be an integer. Change the stride and/or zero pad parameters"});var ge=Hd((ue-ie+2*he)/de+1,$);return Y(Rn(ge),function(){return"The output # of columns ("+ge+") must be an integer. Change the stride and/or zero pad parameters"}),[ce,ge]}([O,I],R,M,F,K);L=fe[0],ne=fe[1]}else if(F==="same"){L=Math.ceil(O/M),ne=Math.ceil(I/B);var te=Math.max(0,(L-1)*M+R-O),oe=Math.max(0,(ne-1)*B+j-I),H=Math.floor(te/2),U=te-H,Q=Math.floor(oe/2);V={top:H,bottom:U,left:Q,right:oe-Q,type:"SAME"}}else{if(F!=="valid")throw Error("Unknown padding parameter: "+F);V={top:0,bottom:0,left:0,right:0,type:"VALID"},L=Math.ceil((O-R+1)/M),ne=Math.ceil((I-j+1)/B)}return{padInfo:V,outHeight:L,outWidth:ne}}(i,c,f,x,y,E,C,a),D=N.padInfo,A=N.outHeight,T=N.outWidth,k=o?g*d:g;return s==="channelsFirst"?h=[l,k,A,T]:s==="channelsLast"&&(h=[l,A,T,k]),{batchSize:l,dataFormat:s,inHeight:c,inWidth:f,inChannels:d,outHeight:A,outWidth:T,outChannels:k,padInfo:D,strideHeight:x,strideWidth:y,filterHeight:p,filterWidth:m,effectiveFilterHeight:E,effectiveFilterWidth:C,dilationHeight:w,dilationWidth:_,inShape:t,outShape:h,filterShape:e}}function Gg(t,e,n,r,i,a,o,s){a===void 0&&(a=!1),o===void 0&&(o="channelsLast");var u=[-1,-1,-1,-1,-1],l=u[0],c=u[1],f=u[2],d=u[3],h=u[4];if(o==="channelsLast")l=t[0],c=t[1],f=t[2],d=t[3],h=t[4];else{if(o!=="channelsFirst")throw new Error("Unknown dataFormat "+o);l=t[0],h=t[1],c=t[2],f=t[3],d=t[4]}var p,m=e[0],g=e[1],v=e[2],x=e[4],y=Rw(n),b=y[0],w=y[1],_=y[2],E=Rw(r),C=E[0],N=E[1],D=E[2],A=Pc(m,C),T=Pc(g,N),k=Pc(v,D),F=function(j,K,V,L,ne,fe,te,oe,H,U,Q){var re,ie,de,he;if(typeof j=="number"){re={top:j,bottom:j,left:j,right:j,front:j,back:j,type:j===0?"VALID":"NUMBER"};var $=function(ee,le,pe,be,xe,Fe){xe==null&&(xe=k7(ee,le,be));var Te=ee[0],Oe=ee[1],Me=ee[2],Et=Hd((Te-le+2*xe)/be+1,Fe);Y(Rn(Et),function(){return"The output # of depths ("+Et+") must be an integer. Change the stride and/or zero pad parameters"});var Xe=Hd((Oe-le+2*xe)/be+1,Fe);Y(Rn(Xe),function(){return"The output # of rows ("+Xe+") must be an integer. Change the stride and/or zero pad parameters"});var Lt=Hd((Me-le+2*xe)/be+1,Fe);return Y(Rn(Lt),function(){return"The output # of columns ("+Lt+") must be an integer. Change the stride and/or zero pad parameters"}),[Et,Xe,Lt,pe]}([K,V,L,1],oe,1,ne,j,Q);ie=$[0],de=$[1],he=$[2]}else if(j==="same"){ie=Math.ceil(K/ne),de=Math.ceil(V/fe),he=Math.ceil(L/te);var G=(ie-1)*ne+oe-K,ue=(de-1)*fe+H-V,ce=(he-1)*te+U-L,ge=Math.floor(G/2),Ce=G-ge,Ae=Math.floor(ue/2),Pe=ue-Ae,q=Math.floor(ce/2);re={top:Ae,bottom:Pe,left:q,right:ce-q,front:ge,back:Ce,type:"SAME"}}else{if(j!=="valid")throw Error("Unknown padding parameter: "+j);re={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},ie=Math.ceil((K-oe+1)/ne),de=Math.ceil((V-H+1)/fe),he=Math.ceil((L-U+1)/te)}return{padInfo:re,outDepth:ie,outHeight:de,outWidth:he}}(i,c,f,d,b,w,_,A,T,k,s),O=F.padInfo,I=F.outDepth,M=F.outHeight,B=F.outWidth,R=a?x*h:x;return o==="channelsFirst"?p=[l,R,I,M,B]:o==="channelsLast"&&(p=[l,I,M,B,R]),{batchSize:l,dataFormat:o,inDepth:c,inHeight:f,inWidth:d,inChannels:h,outDepth:I,outHeight:M,outWidth:B,outChannels:R,padInfo:O,strideDepth:b,strideHeight:w,strideWidth:_,filterDepth:m,filterHeight:g,filterWidth:v,effectiveFilterDepth:A,effectiveFilterHeight:T,effectiveFilterWidth:k,dilationDepth:C,dilationHeight:N,dilationWidth:D,inShape:t,outShape:p,filterShape:e}}function k7(t,e,n,r){r===void 0&&(r=1);var i=Pc(e,r);return Math.floor((t[0]*(n-1)-n+i)/2)}function Kg(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function Rw(t){return typeof t=="number"?[t,t,t]:t}function Pc(t,e){return e<=1?t:t+(t-1)*(e-1)}function Hd(t,e){if(!e)return t;switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error("Unknown roundingMode "+e)}}function mf(t){var e=Kg(t),n=e[0],r=e[1],i=e[2];return n===1&&r===1&&i===1}function xi(t,e){return mf(t)||mf(e)}function yC(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+t)}function F7(t,e,n){if(e==="complex64"){if(t.dtype==="complex64")return t.clone();var r=sn(t.shape),i=t.toFloat(),a=n.complex(i,r);return r.dispose(),i.dispose(),a}if(!qCe(t.dtype,e))return se.makeTensorFromDataId(t.dataId,t.shape,e);if(t.dtype==="complex64"){var o=n.real(t);return a=o.cast(e),o.dispose(),a}if(e==="int32")return n.int(t);if(e==="bool"){var s=je(0,t.dtype);return a=n.notEqual(t,s),s.dispose(),a}throw new Error("Error in Cast: failed to cast "+t.dtype+" to "+e)}function kw(t,e){return se.makeTensorFromDataId(t.dataId,e,t.dtype)}function P7(t,e,n){var r=(e-t)/(n-1),i=_p(n,"float32");i[0]=t;for(var a=1;a<i.length;a++)i[a]=i[a-1]+r;return Fn(i,"float32")}function Fw(t,e){if(t.length!==e.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+t.length+", imag: "+e.length+".");for(var n=new Float32Array(2*t.length),r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function K4(t,e){return{real:t[2*e],imag:t[2*e+1]}}function xSe(t,e,n,r){t[2*r]=e,t[2*r+1]=n}function bSe(t,e,n){var r=(n?2:-2)*Math.PI*(t/e);return{real:Math.cos(r),imag:Math.sin(r)}}function wSe(t,e,n){var r=function(a,o,s){return function(u,l,c){for(var f=0,d=u.length,h=0,p=!1;f<d;){var m=c(l,u[h=f+(d-f>>>1)]);m>0?f=h+1:(d=h,p=!m)}return p?f:-f-1}(a,o,s||_Se)}(t,e,n),i=r<0?-(r+1):r;t.splice(i,0,e)}function _Se(t,e){return t>e?1:t<e?-1:0}function xC(t,e,n,r,i){return O7(t,e,n,r,i,0).selectedIndices}function bC(t,e,n,r,i,a){var o=O7(t,e,n,r,i,a);return o.numValidOutputs.dispose(),{selectedIndices:o.selectedIndices,selectedScores:o.selectedScores}}function O7(t,e,n,r,i,a,o,s){s===void 0&&(s=!1);for(var u=Array.from(e).map(function(b,w){return{score:b,boxIndex:w,suppressBeginIndex:0}}).filter(function(b){return b.score>i}).sort(Y4),l=a>0?-.5/a:0,c=[],f=[];c.length<n&&u.length>0;){var d=u.pop(),h=d.score,p=d.boxIndex,m=d.suppressBeginIndex;if(h<i)break;for(var g=!1,v=c.length-1;v>=m;--v){var x=ESe(t,p,c[v]);if(x>=r){g=!0;break}if(d.score=d.score*CSe(r,l,x),d.score<=i)break}d.suppressBeginIndex=c.length,g||(d.score===h?(c.push(p),f.push(d.score)):d.score>i&&wSe(u,d,Y4))}var y=c.length;return s&&(c.fill(0,y),f.fill(0,y)),{selectedIndices:Fn(c,"int32"),selectedScores:Fn(f,"float32"),numValidOutputs:je(y,"int32")}}function ESe(t,e,n){var r=t.subarray(4*e,4*e+4),i=t.subarray(4*n,4*n+4),a=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(i[0],i[2]),c=Math.min(i[1],i[3]),f=Math.max(i[0],i[2]),d=Math.max(i[1],i[3]),h=(s-a)*(u-o),p=(f-l)*(d-c);if(h<=0||p<=0)return 0;var m=Math.max(a,l),g=Math.max(o,c),v=Math.min(s,f),x=Math.min(u,d),y=Math.max(v-m,0)*Math.max(x-g,0);return y/(h+p-y)}function CSe(t,e,n){var r=Math.exp(e*n*n);return n<=t?r:0}function Y4(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}function B7(t,e,n){var r=new Array(t.rank).fill(0),i=t.shape.slice();return e.map(function(a){i[n]=a;var o=t.slice(r,i);return r[n]+=a,o})}function L7(t,e){for(var n=new Array(t.rank),r=0;r<n.length;r++)n[r]=t.shape[r]*e[r];var i=vt(n,t.dtype);for(r=0;r<i.values.length;++r){for(var a=i.indexToLoc(r),o=new Array(t.rank),s=0;s<o.length;s++)o[s]=a[s]%t.shape[s];var u=t.locToIndex(o);i.values[r]=t.values[u]}return i.toTensor()}function j7(t,e,n,r,i){for(var a=e[e.length-1],o=[t.length/a,a],s=o[0],u=o[1],l=Bh(n,s*r),c=Bh("int32",s*r),f=0;f<s;f++){for(var d=f*u,h=t.subarray(d,d+u),p=[],m=0;m<h.length;m++)p.push({value:h[m],index:m});p.sort(function(b,w){return w.value-b.value});var g=f*r,v=l.subarray(g,g+r),x=c.subarray(g,g+r);for(m=0;m<r;m++)v[m]=p[m].value,x[m]=p[m].index}var y=e.slice();return y[y.length-1]=r,[fr(l,y,n),fr(c,y,"int32")]}function wC(t,e){for(var n=[],r=0;r<e.length;r++)e[r]&&n.push(r);var i=vt(t,"int32"),a=vt([n.length,t.length],"int32");for(r=0;r<n.length;r++){var o=i.indexToLoc(n[r]),s=r*t.length;a.values.set(o,s)}return a.toTensor()}var NSe=function(t,e){this.outputShape=[],this.outputShape=t,this.variableNames=e.map(function(i,a){return"T"+a});var n=[];this.variableNames.forEach(function(i){n.push("float v"+i+" = get"+i+"AtOutCoords();")});var r=this.variableNames.map(function(i){return"v"+i}).join(" + ");this.userCode=`
      void main() {
        `+n.join(`
        `)+`

        float result = `+r+`;
        setOutput(result);
      }
    `},SSe=function(t,e){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=e.map(function(i,a){return"T"+a});var n=[];this.variableNames.forEach(function(i){n.push("vec4 v"+i+" = get"+i+"AtOutCoords();")});var r=this.variableNames.map(function(i){return"v"+i}).join(" + ");this.userCode=`
      void main() {
        `+n.join(`
        `)+`

        vec4 result = `+r+`;
        setOutput(result);
      }
    `},DSe=function(t,e,n){this.variableNames=["A"];var r=t.windowSize,i=t.batchSize,a=t.inSize,o=Math.ceil(a/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];var s=e==="max"?">":"<",u=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+r+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+r+`; i++) {
          int inIdx = `+u+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+s+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `};function $7(t,e){return["x","y","z","w","u","v"].slice(0,e).map(function(n){return t+"."+n})}function ii(t,e){return e===1?[t]:$7(t,e)}function Mr(){var t,e,n,r,i,a,o,s,u,l;return _e().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",i="texture",a="outputColor",o="out vec4 outputColor;",s=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,u="",l=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",i="texture2D",a="gl_FragColor",o="",s=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,u=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,l=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:i,output:a,defineOutput:o,defineSpecialNaN:s,defineSpecialInf:u,defineRound:l}}function qu(t,e,n){n===void 0&&(n="index");var r=eo(e);return r.map(function(i,a){return"int "+t[a]+" = "+n+" / "+i+"; "+(a===r.length-1?"int "+t[a+1]+" = "+n+" - "+t[a]+" * "+i:"index -= "+t[a]+" * "+i)+";"}).join("")}function _C(t){var e=eo(t).map(function(n){return n.toString()});return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `+e[0]+" + coords.y * "+e[1]+` + coords.z;
  }
`}var z7=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;function ASe(t,e,n,r){var i=[];t.forEach(function(h){var p=He(h.shapeInfo.logicalShape);h.shapeInfo.isUniform?i.push("uniform float "+h.name+(p>1?"["+p+"]":"")+";"):(i.push("uniform sampler2D "+h.name+";"),i.push("uniform int offset"+h.name+";"))});var a,o,s=i.join(`
`),u=t.map(function(h){return function(p,m,g){g===void 0&&(g=!1);var v="";v+=g?U7(p):Kl(p);var x=p.shapeInfo.logicalShape,y=m.logicalShape;return x.length<=y.length&&(v+=g?function(b,w){var _,E=b.name,C=E.charAt(0).toUpperCase()+E.slice(1),N="get"+C+"AtOutCoords",D=b.shapeInfo.logicalShape.length,A=w.logicalShape.length,T=Cs(b.shapeInfo.logicalShape,w.logicalShape),k=an(A),F=A-D,O=["x","y","z","w","u","v"];_=D===0?"":A<2&&T.length>=1?"coords = 0;":T.map(function(V){return"coords."+O[V+F]+" = 0;"}).join(`
`);var I="";I=A<2&&D>0?"coords":b.shapeInfo.logicalShape.map(function(V,L){return"coords."+O[L+F]}).join(", ");var M="return outputValue;",B=He(b.shapeInfo.logicalShape)===1,R=He(w.logicalShape)===1;if(D!==1||B||R){if(B&&!R)M=A===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(T.length){var j=D-2,K=D-1;T.indexOf(j)>-1&&T.indexOf(K)>-1?M="return vec4(outputValue.x);":T.indexOf(j)>-1?M="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":T.indexOf(K)>-1&&(M="return vec4(outputValue.xx, outputValue.zz);")}}else M=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 `+N+`() {
      `+k+` coords = getOutputCoords();
      `+_+`
      vec4 outputValue = get`+C+"("+I+`);
      `+M+`
    }
  `}(p,m):function(b,w){var _=b.name,E=_.charAt(0).toUpperCase()+_.slice(1),C="get"+E+"AtOutCoords",N=w.texShape,D=b.shapeInfo.texShape,A=b.shapeInfo.logicalShape.length,T=w.logicalShape.length;if(!b.shapeInfo.isUniform&&A===T&&b.shapeInfo.flatOffset==null&&ar(D,N))return`
      float `+C+`() {
        return sampleTexture(`+_+`, resultUV);
      }
    `;var k,F=an(T),O=Cs(b.shapeInfo.logicalShape,w.logicalShape),I=T-A,M=["x","y","z","w","u","v"];k=A===0?"":T<2&&O.length>=1?"coords = 0;":O.map(function(R){return"coords."+M[R+I]+" = 0;"}).join(`
`);var B="";return B=T<2&&A>0?"coords":b.shapeInfo.logicalShape.map(function(R,j){return"coords."+M[j+I]}).join(", "),`
    float `+C+`() {
      `+F+` coords = getOutputCoords();
      `+k+`
      return get`+E+"("+B+`);
    }
  `}(p,m)),v}(h,e,r)}).join(`
`),l=e.texShape,c=Mr(),f=function(h){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+h.texture2D+`(textureSampler, uv).r;
    }
  `}(c),d=function(h){return h.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+h.varyingFs+` vec2 resultUV;
    `+h.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `+h.defineSpecialNaN+`
    `+h.defineSpecialInf+`
    `+h.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+TSe+`
    `+MSe+`
    `+ISe+`
  `}(c);return e.isPacked?(a=function(h,p){switch(h.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(b,w){var _=[Math.ceil(w[0]/2),Math.ceil(w[1]/2)];return _[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+_[1]+`.0);
      }
    `:_[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+_[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+_[0]+", "+_[1]+`));
      return 2 * (resTexRC.x * `+_[1]+` + resTexRC.y);
    }
  `}(0,p);case 2:return function(b,w){var _=[Math.ceil(w[0]/2),Math.ceil(w[1]/2)];if(ar(b,w))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+_[0]+", "+_[1]+`));
      }
    `;var E=Math.ceil(b[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+_[0]+", "+_[1]+`));

      int index = resTexRC.x * `+_[1]+` + resTexRC.y;
      int r = 2 * (index / `+E+`);
      int c = imod(index, `+E+`) * 2;

      return ivec2(r, c);
    }
  `}(h,p);case 3:return m=h,g=p,v=[Math.ceil(g[0]/2),Math.ceil(g[1]/2)],x=Math.ceil(m[2]/2),y=x*Math.ceil(m[1]/2),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+v[0]+", "+v[1]+`));
      int index = resTexRC.x * `+v[1]+` + resTexRC.y;

      int b = index / `+y+`;
      index -= b * `+y+`;

      int r = 2 * (index / `+x+`);
      int c = imod(index, `+x+`) * 2;

      return ivec3(b, r, c);
    }
  `;default:return function(b,w){for(var _=[Math.ceil(w[0]/2),Math.ceil(w[1]/2)],E=Math.ceil(b[b.length-1]/2),C=E*Math.ceil(b[b.length-2]/2),N=C,D="",A="b, r, c",T=2;T<b.length-1;T++)N*=b[b.length-T-1],D=`
      int b`+T+" = index / "+N+`;
      index -= b`+T+" * "+N+`;
    `+D,A="b"+T+", "+A;return`
    ivec`+b.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+_[0]+", "+_[1]+`));
      int index = resTexRC.x * `+_[1]+` + resTexRC.y;

      `+D+`

      int b = index / `+C+`;
      index -= b * `+C+`;

      int r = 2 * (index / `+E+`);
      int c = imod(index, `+E+`) * 2;

      return ivec`+b.length+"("+A+`);
    }
  `}(h,p)}var m,g,v,x,y}(e.logicalShape,l),o=function(h){return`
    void setOutput(vec4 val) {
      `+h.output+` = val;
    }
  `}(c)):(a=function(h,p){switch(h.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(v,x){return x[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+x[1]+`.0);
      }
    `:x[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+x[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+x[0]+", "+x[1]+`));
      return resTexRC.x * `+x[1]+` + resTexRC.y;
    }
  `}(0,p);case 2:return function(v,x){return ar(v,x)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+x[0]+", "+x[1]+`));
      }
    `:v[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+x[0]+", "+x[1]+`));
        int index = resTexRC.x * `+x[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:v[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+x[0]+", "+x[1]+`));
        int index = resTexRC.x * `+x[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+x[0]+", "+x[1]+`));
      int index = resTexRC.x * `+x[1]+` + resTexRC.y;
      int r = index / `+v[1]+`;
      int c = index - r * `+v[1]+`;
      return ivec2(r, c);
    }
  `}(h,p);case 3:return m=p,g=qu(["r","c","d"],h),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+m[0]+", "+m[1]+`));
      int index = resTexRC.x * `+m[1]+` + resTexRC.y;
      `+g+`
      return ivec3(r, c, d);
    }
  `;case 4:return function(v,x){var y=qu(["r","c","d","d2"],v);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+x[0]+", "+x[1]+`));
      int index = resTexRC.x * `+x[1]+` + resTexRC.y;
      `+y+`
      return ivec4(r, c, d, d2);
    }
  `}(h,p);case 5:return function(v,x){var y=qu(["r","c","d","d2","d3"],v);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+x[0]+`,
                             `+x[1]+`));

      int index = resTexRC.x * `+x[1]+` + resTexRC.y;

      `+y+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}(h,p);case 6:return function(v,x){var y=qu(["r","c","d","d2","d3","d4"],v);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+x[0]+", "+x[1]+`));
      int index = resTexRC.x * `+x[1]+` + resTexRC.y;

      `+y+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}(h,p);default:throw new Error(h.length+"-D output sampling is not yet supported")}var m,g}(e.logicalShape,l),o=function(h){return`
    void setOutput(float val) {
      `+h.output+` = vec4(val, 0, 0, 0);
    }
  `}(c)),r&&(d+=RSe),[d,f,o,s,a,u,n].join(`
`)}function Kl(t){var e=t.shapeInfo.logicalShape;switch(e.length){case 0:return function(n){var r=n.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1);if(n.shapeInfo.isUniform)return"float "+i+"() {return "+r+";}";var a=n.shapeInfo.texShape,o=a[0],s=a[1];if(o===1&&s===1)return`
      float `+i+`() {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var u=n.shapeInfo.texShape,l=u[0],c=u[1],f=Cu(r);return`
    float `+i+`() {
      vec2 uv = uvFromFlat(`+l+", "+c+", "+f+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(t);case 1:return function(n){var r=n.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1);if(n.shapeInfo.isUniform)return`
      float `+i+`(int index) {
        `+Vl(n)+`
      }
    `;var a=n.shapeInfo.texShape,o=a[0],s=a[1];if(s===1&&o===1)return`
      float `+i+`(int index) {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var u=Cu(r);return s===1?`
      float `+i+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+u+") + 0.5) / "+o+`.0);
        return sampleTexture(`+r+`, uv);
      }
    `:o===1?`
      float `+i+`(int index) {
        vec2 uv = vec2((float(index + `+u+") + 0.5) / "+s+`.0, 0.5);
        return sampleTexture(`+r+`, uv);
      }
    `:`
    float `+i+`(int index) {
      vec2 uv = uvFromFlat(`+o+", "+s+", index + "+u+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(t);case 2:return function(n){var r=n.shapeInfo.logicalShape,i=n.name,a="get"+i.charAt(0).toUpperCase()+i.slice(1),o=n.shapeInfo.texShape;if(o!=null&&ar(r,o)){var s=o[0],u=o[1];return`
    float `+a+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+u+".0, "+s+`.0);
      return sampleTexture(`+i+`, uv);
    }
  `}var l=Pu(r),c=l.newShape,f=l.keptDims,d=c;if(d.length<r.length){var h=Yl(n,d);return`
      `+Kl(h)+`
      float `+a+`(int row, int col) {
        return `+a+"("+Xl(["row","col"],f)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+a+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+r[1]+`, 1)));
        `+Vl(n)+`
      }
    `;var p=o[0],m=o[1],g=Cu(i);return m===1?`
    float `+a+`(int row, int col) {
      float index = dot(vec3(row, col, `+g+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+p+`.0);
      return sampleTexture(`+i+`, uv);
    }
  `:p===1?`
    float `+a+`(int row, int col) {
      float index = dot(vec3(row, col, `+g+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+m+`.0, 0.5);
      return sampleTexture(`+i+`, uv);
    }
  `:`
  float `+a+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+r[1]+" + col + "+g+`;
    vec2 uv = uvFromFlat(`+p+", "+m+`, index);
    return sampleTexture(`+i+`, uv);
  }
`}(t);case 3:return function(n){var r=n.shapeInfo.logicalShape,i=n.name,a="get"+i.charAt(0).toUpperCase()+i.slice(1),o=r[1]*r[2],s=r[2],u=Pu(r),l=u.newShape,c=u.keptDims,f=l;if(f.length<r.length){var d=Yl(n,f);return`
        `+Kl(d)+`
        float `+a+`(int row, int col, int depth) {
          return `+a+"("+Xl(["row","col","depth"],c)+`);
        }
      `}if(n.shapeInfo.isUniform)return`
      float `+a+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+o+", "+s+`, 1)));
        `+Vl(n)+`
      }
    `;var h=n.shapeInfo.texShape,p=h[0],m=h[1],g=n.shapeInfo.flatOffset;if(m===o&&g==null)return`
        float `+a+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+s+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+m+".0, "+p+`.0);
          return sampleTexture(`+i+`, uv);
        }
      `;if(m===s&&g==null)return`
    float `+a+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+r[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+m+".0, "+p+`.0);
      return sampleTexture(`+i+`, uv);
    }
  `;var v=Cu(i);return`
      float `+a+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+o+" + col * "+s+" + depth + "+v+`;
        vec2 uv = uvFromFlat(`+p+", "+m+`, index);
        return sampleTexture(`+i+`, uv);
      }
  `}(t);case 4:return function(n){var r=n.shapeInfo.logicalShape,i=n.name,a="get"+i.charAt(0).toUpperCase()+i.slice(1),o=r[3],s=r[2]*o,u=r[1]*s,l=Pu(r),c=l.newShape,f=l.keptDims;if(c.length<r.length){var d=Yl(n,c);return`
      `+Kl(d)+`
      float `+a+`(int row, int col, int depth, int depth2) {
        return `+a+"("+Xl(["row","col","depth","depth2"],f)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+a+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+u+", "+s+", "+o+`, 1)));
        `+Vl(n)+`
      }
    `;var h=n.shapeInfo.flatOffset,p=n.shapeInfo.texShape,m=p[0],g=p[1];if(g===u&&h==null)return`
      float `+a+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+s+", "+o+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+g+".0, "+m+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;if(g===o&&h==null)return`
      float `+a+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+r[1]*r[2]+", "+r[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+g+".0, "+m+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;var v=Cu(i);return`
    float `+a+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+u+" + col * "+s+` +
          depth * `+o+` + depth2;
      vec2 uv = uvFromFlat(`+m+", "+g+", index + "+v+`);
      return sampleTexture(`+i+`, uv);
    }
  `}(t);case 5:return function(n){var r=n.shapeInfo.logicalShape,i=n.name,a="get"+i.charAt(0).toUpperCase()+i.slice(1),o=r[4],s=r[3]*o,u=r[2]*s,l=r[1]*u,c=Pu(r),f=c.newShape,d=c.keptDims;if(f.length<r.length){var h=Yl(n,f);return`
      `+Kl(h)+`
      float `+a+`(int row, int col, int depth, int depth2, int depth3) {
        return `+a+"("+Xl(["row","col","depth","depth2","depth3"],d)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+a+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+l+", "+u+", "+s+", "+o+`)) +
          depth3;
        `+Vl(n)+`
      }
    `;var p=n.shapeInfo.flatOffset,m=n.shapeInfo.texShape,g=m[0],v=m[1];if(v===l&&p==null)return`
      float `+a+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+u+", "+s+", "+o+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+v+".0, "+g+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;if(v===o&&p==null)return`
      float `+a+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]+`,
               `+r[2]*r[3]+", "+r[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+v+".0, "+g+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;var x=Cu(i);return`
    float `+a+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+l+" + col * "+u+" + depth * "+s+` +
          depth2 * `+o+" + depth3 + "+x+`;
      vec2 uv = uvFromFlat(`+g+", "+v+`, index);
      return sampleTexture(`+i+`, uv);
    }
  `}(t);case 6:return function(n){var r=n.shapeInfo.logicalShape,i=n.name,a="get"+i.charAt(0).toUpperCase()+i.slice(1),o=Pu(r),s=o.newShape,u=o.keptDims;if(s.length<r.length){var l=Yl(n,s);return`
      `+Kl(l)+`
      float `+a+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+a+"("+Xl(["row","col","depth","depth2","depth3","depth4"],u)+`);
      }
    `}var c=r[5],f=r[4]*c,d=r[3]*f,h=r[2]*d,p=r[1]*h;if(n.shapeInfo.isUniform)return`
      float `+a+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+p+", "+h+", "+d+", "+f+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+c+`, 1)));
        `+Vl(n)+`
      }
    `;var m=n.shapeInfo.flatOffset,g=n.shapeInfo.texShape,v=g[0],x=g[1];if(x===p&&m==null)return`
      float `+a+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+h+", "+d+", "+f+", "+c+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+x+".0, "+v+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;if(x===c&&m==null)return`
      float `+a+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]*r[4]+`,
               `+r[2]*r[3]*r[4]+`,
               `+r[3]*r[4]+`,
               `+r[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+x+".0, "+v+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;var y=Cu(i);return`
    float `+a+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+p+" + col * "+h+" + depth * "+d+` +
          depth2 * `+f+" + depth3 * "+c+" + depth4 + "+y+`;
      vec2 uv = uvFromFlat(`+v+", "+x+`, index);
      return sampleTexture(`+i+`, uv);
    }
  `}(t);default:throw new Error(e.length+"-D input sampling is not yet supported")}}function U7(t){var e,n,r;switch(t.shapeInfo.logicalShape.length){case 0:return e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=Mr(),`
    vec4 `+n+`() {
      return `+r.texture2D+"("+e+`, halfCR);
    }
  `;case 1:return function(i){var a=i.name,o="get"+a.charAt(0).toUpperCase()+a.slice(1),s=i.shapeInfo.texShape,u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],l=Mr();return`
    vec4 `+o+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+u[0]+", "+u[1]+`, index);
      return `+l.texture2D+"("+a+`, uv);
    }
  `}(t);case 2:return function(i){var a=i.shapeInfo.logicalShape,o=i.name,s="get"+o.charAt(0).toUpperCase()+o.slice(1),u=i.shapeInfo.texShape,l=u[0],c=u[1],f=Mr();if(u!=null&&ar(a,u))return`
      vec4 `+s+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+c+".0, "+l+`.0);

        return `+f.texture2D+"("+o+`, uv);
      }
    `;var d=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)],h=Math.ceil(a[1]/2);return`
    vec4 `+s+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+h+", "+d[0]+", "+d[1]+`, row, col);
      return `+f.texture2D+"("+o+`, uv);
    }
  `}(t);case 3:return function(i){var a=i.shapeInfo.logicalShape,o=i.name,s="get"+o.charAt(0).toUpperCase()+o.slice(1),u=i.shapeInfo.texShape,l=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)];if(a[0]===1){var c=a.slice(1),f=Yl(i,c);return`
        `+U7(f)+`
        vec4 `+s+`(int b, int row, int col) {
          return `+s+"("+Xl(["b","row","col"],[1,2])+`);
        }
      `}var d=l[0],h=l[1],p=Math.ceil(a[2]/2),m=p*Math.ceil(a[1]/2),g=Mr();return`
    vec4 `+s+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+d+", "+h+", "+m+", "+p+`, b, row, col);
      return `+g.texture2D+"("+o+`, uv);
    }
  `}(t);default:return function(i){for(var a=i.shapeInfo.logicalShape,o=a.length,s=i.name,u="get"+s.charAt(0).toUpperCase()+s.slice(1),l=i.shapeInfo.texShape,c=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)],f=c[0],d=c[1],h=Math.ceil(a[o-1]/2),p=h*Math.ceil(a[o-2]/2),m="int b, int row, int col",g="b * "+p+" + (row / 2) * "+h+" + (col / 2)",v=2;v<o-1;v++)m="int b"+v+", "+m,p*=a[o-v-1],g="b"+v+" * "+p+" + "+g;var x=Mr();return`
    vec4 `+u+"("+m+`) {
      int index = `+g+`;
      int texR = index / `+d+`;
      int texC = index - texR * `+d+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+d+", "+f+`);
      return `+x.texture2D+"("+s+`, uv);
    }
  `}(t)}}var TSe=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,MSe=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,ISe=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,RSe=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function Cu(t){return"offset"+t}function Vl(t){var e=t.name,n=He(t.shapeInfo.logicalShape);return n<2?"return "+e+";":`
    for (int i = 0; i < `+n+`; i++) {
      if (i == index) {
        return `+e+`[i];
      }
    }
  `}function an(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error("GPU for rank "+t+" is not yet supported")}function Yl(t,e){var n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function Xl(t,e){return e.map(function(n){return t[n]}).join(", ")}var kSe=function(t,e,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,Y(t.length>2,function(){return"Packed arg"+(n.charAt(0).toUpperCase()+n.slice(1))+" supports only inputs with rank above 2."});var i=t[t.length-1],a=Math.ceil(i/e);this.outputShape=t.slice(0,-1),a>1&&this.outputShape.push(a),r||this.variableNames.push("bestIndicesA");var o,s,u=this.outputShape,l=u.length,c=an(l),f=ii("coords",l);if(a===1){var d=an(s=l+1);o=`
        `+d+" sourceLocR = "+d+"("+f.join()+`, 0);
        ++`+f[l-1]+`;
        `+d+" sourceLocG = "+d+"("+f.join()+`, 0);
        ++`+f[l-2]+`;
        `+d+" sourceLocA = "+d+"("+f.join()+`, 0);
        --`+f[l-1]+`;
        `+d+" sourceLocB = "+d+"("+f.join()+`, 0);
        --`+f[l-2]+";"}else s=l,o=`
        `+c+` sourceLocR = coords;
        ++`+f[l-1]+`;
        `+c+` sourceLocG = coords;
        ++`+f[l-2]+`;
        `+c+` sourceLocA = coords;
        --`+f[l-1]+`;
        `+c+` sourceLocB = coords;
        --`+f[l-2]+";";var h=["x","y","z","w","u","v"].slice(0,s),p="."+h[s-1],m=h.map(function(C){return"int "+C}),g=ii("sourceLocR",s-1).concat("inIdx.r"),v=ii("sourceLocG",s-1).concat("inIdx.g"),x=ii("sourceLocB",s-1).concat("inIdx.b"),y=ii("sourceLocA",s-1).concat("inIdx.a"),b=n==="max"?"greaterThan":"lessThan",w=r?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+g.join()+`),
                             getBestIndicesAChannel(`+v.join()+`),
                             getBestIndicesAChannel(`+x.join()+`),
                             getBestIndicesAChannel(`+y.join()+")));",_=`vec4(
            getAChannel(`+g.join()+`),
            hasNextCol ? getAChannel(`+v.join()+`) : 0.,
            hasNextRow ? getAChannel(`+x.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+y.join()+") : 0.)",E=r?"":`
      float getBestIndicesAChannel(`+m.join()+`) {
        return getChannel(getBestIndicesA(`+h.join()+`),
                                          vec2(`+h.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+m.join()+`) {
        return getChannel(getA(`+h.join()+`),
                               vec2(`+h.slice(-2).join()+`));
      }
      `+E+`
      void main() {
        `+c+` coords = getOutputCoords();
        bool hasNextCol = `+f[l-1]+" < "+(u[l-1]-1)+`;
        bool hasNextRow = `+f[l-2]+" < "+(u[l-2]-1)+`;
        `+o+`
        ivec4 srcIdx = ivec4(sourceLocR`+p+", sourceLocG"+p+`,
          sourceLocB`+p+", sourceLocA"+p+") * "+e+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+_+`;

        for (int i = 0; i < `+e+`; i++) {
          inIdx = srcIdx;
          `+w+`
          vec4 candidate = `+_+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+b+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `},FSe=function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,i=t.strideWidth,a=t.dilationHeight,o=t.dilationWidth,s=t.effectiveFilterHeight,u=t.effectiveFilterWidth,l=s-1-t.padInfo.top,c=u-1-t.padInfo.left,f=1/(e*n);this.userCode=`
      const ivec2 pads = ivec2(`+l+", "+c+`);
      const float avgMultiplier = float(`+f+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+s+`;
            wR += `+a+`) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+u+`;
            wC+= `+o+`) {
            float dyC = float(dyCCorner + wC) / `+i+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `},PSe=function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var e=t.filterDepth,n=t.filterHeight,r=t.filterWidth,i=t.strideDepth,a=t.strideHeight,o=t.strideWidth,s=t.dilationDepth,u=t.dilationHeight,l=t.dilationWidth,c=t.effectiveFilterDepth,f=t.effectiveFilterHeight,d=t.effectiveFilterWidth,h=c-1-t.padInfo.front,p=f-1-t.padInfo.top,m=d-1-t.padInfo.left,g=1/(e*n*r);this.userCode=`
      const ivec3 pads = ivec3(`+h+", "+p+", "+m+`);
      const float avgMultiplier = float(`+g+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+c+`;
            wD += `+s+`) {
          float dyD = float(dyDCorner + wD) / `+i+`.0;

          if (dyD < 0.0 || dyD >= `+t.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+f+`;
              wR += `+u+`) {
            float dyR = float(dyRCorner + wR) / `+a+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+d+`;
                wC += `+l+`) {
              float dyC = float(dyCCorner + wC) / `+o+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `},OSe=function(t,e,n,r,i,a){this.outputShape=[],this.variableNames=["x","mean","variance"],Mt(t,e),Mt(t,n);var o="0.0";r!=null&&(Mt(t,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var s="1.0";i!=null&&(Mt(t,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+o+`;
        float scale = `+s+`;
        float inv = scale * inversesqrt(variance + float(`+a+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `},BSe=function(t,e,n,r,i,a){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Mt(t,e),Mt(t,n);var o="vec4(0.0)";r!=null&&(Mt(t,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var s="vec4(1.0)";i!=null&&(Mt(t,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        vec4 offset = `+o+`;
        vec4 scale = `+s+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+a+`));

        setOutput((x - mean) * inv + offset);
      }
    `},LSe="return areal * breal - aimag * bimag;",jSe="return areal * bimag + aimag * breal;",X4=function(t,e,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Mt(e,n),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+t+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `},X1="return a + b;",Q1="return a - b;",Q4="return a * b;",W7="return (a < 0.) ? b * a : a;",En=function(t,e,n){this.variableNames=["A","B"],this.outputShape=Mt(e,n),this.userCode=`
      float binaryOperation(float a, float b) {
        `+t+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `},V7=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,go=function(t,e,n,r){r===void 0&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Mt(e,n);var i=this.outputShape.length,a="";if(r)if(i===0||He(this.outputShape)===1)a=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(a=`
          `+an(i)+` coords = getOutputCoords();
        `,i===1)a+=`
            result.y = (coords + 1) >= `+this.outputShape[0]+` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{var o=ii("coords",i);a+=`
            bool nextRowOutOfBounds =
              (`+o[i-2]+" + 1) >= "+this.outputShape[i-2]+`;
            bool nextColOutOfBounds =
              (`+o[i-1]+" + 1) >= "+this.outputShape[i-1]+`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+t+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `+a+`

        setOutput(result);
      }
    `},$Se=function(){function t(e){this.variableNames=["A"],this.outputShape=e,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return t.prototype.getCustomSetupFunc=function(e,n){var r=this;return function(i,a){r.minLoc==null&&(r.minLoc=i.getUniformLocationNoThrow(a,"minVal"),r.maxLoc=i.getUniformLocationNoThrow(a,"maxVal")),i.gl.uniform1f(r.minLoc,e),i.gl.uniform1f(r.maxLoc,n)}},t}(),zSe=function(){function t(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return t.prototype.getCustomSetupFunc=function(e,n){var r=this;return function(i,a){r.minLoc==null&&(r.minLoc=i.getUniformLocationNoThrow(a,"minVal"),r.maxLoc=i.getUniformLocationNoThrow(a,"maxVal")),i.gl.uniform1f(r.minLoc,e),i.gl.uniform1f(r.maxLoc,n)}},t}(),USe=function(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `},WSe=function(t){this.outputShape=[],this.outputShape=pf(t,1),this.variableNames=t.map(function(s,u){return"T"+u});var e=new Array(t.length-1);e[0]=t[0][1];for(var n=1;n<e.length;n++)e[n]=e[n-1]+t[n][1];var r=["if (yC < "+e[0]+") setOutput(getT0(yR, yC));"];for(n=1;n<e.length;n++){var i=e[n-1];r.push("else if (yC < "+e[n]+") setOutput(getT"+n+"(yR, yC-"+i+"));")}var a=e.length,o=e[e.length-1];r.push("else setOutput(getT"+a+"(yR, yC-"+o+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+r.join(`
        `)+`
      }
    `},VSe=function(t,e){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=pf(t,e);var n=this.outputShape,r=n.length,i=an(r),a=ii("coords",r),o=["x","y","z","w","u","v"].slice(0,r);this.variableNames=t.map(function(g,v){return"T"+v});var s=new Array(t.length-1);s[0]=t[0][e];for(var u=1;u<s.length;u++)s[u]=s[u-1]+t[u][e];var l=o[e],c=o.slice(-2),f=o.join(),d="if ("+l+" < "+s[0]+`) {
        return getChannel(
            getT0(`+f+"), vec2("+c.join()+`));
        }`;for(u=1;u<s.length;u++){var h=s[u-1];d+=`
        if (`+l+" < "+s[u]+"  && "+l+" >= "+s[u-1]+`) {
          return getChannel(
            getT`+u+"("+Sm(o,l,h)+`),
            vec2(`+Sm(c,l,h)+`));
        }`}var p=s.length,m=s[s.length-1];d+=`
        return getChannel(
          getT`+p+"("+Sm(o,l,m)+`),
          vec2(`+Sm(c,l,m)+"));",this.userCode=`
      float getValue(`+o.map(function(g){return"int "+g})+`) {
        `+d+`
      }

      void main() {
        `+i+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+a+`), 0., 0., 0.);

        `+a[r-1]+" = "+a[r-1]+` + 1;
        if (`+a[r-1]+" < "+n[r-1]+`) {
          result.g = getValue(`+a+`);
        }

        `+a[r-2]+" = "+a[r-2]+` + 1;
        if (`+a[r-2]+" < "+n[r-2]+`) {
          result.a = getValue(`+a+`);
        }

        `+a[r-1]+" = "+a[r-1]+` - 1;
        if (`+a[r-2]+" < "+n[r-2]+` &&
            `+a[r-1]+" < "+n[r-1]+`) {
          result.b = getValue(`+a+`);
        }
        setOutput(result);
      }
    `};function Sm(t,e,n){var r=t.indexOf(e);return t.map(function(i,a){return a===r?i+" - "+n:i}).join()}var qSe=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var e=t.strideHeight,n=t.strideWidth,r=t.padInfo.top,i=t.padInfo.left,a=t.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yR = 0; yR < `+t.outHeight+`; yR++) {
            int xR = wR + yR * `+e+" - "+r+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+t.outWidth+`; yC++) {
              int xC = wC + yC * `+n+" - "+i+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              if (`+a+`) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},HSe=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,i=t.strideWidth,a=t.dataFormat==="channelsLast",o=e-1-t.padInfo.top,s=n-1-t.padInfo.left,u=a?1:2,l=a?2:3,c=a?3:1;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`+c+`];

        ivec2 dyCorner = ivec2(coords[`+u+"], coords["+l+`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+e+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+e+` - 1 - wR;

          for (int wC = 0; wC < `+n+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+i+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+n+` - 1 - wC;

            for (int d2 = 0; d2 < `+t.outChannels+`; d2++) {

              if (`+a+`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},GSe=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var e=t.strideDepth,n=t.strideHeight,r=t.strideWidth,i=t.padInfo.front,a=t.padInfo.top,o=t.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yF = 0; yF < `+t.outDepth+`; yF++) {
            int xF = wF + yF * `+e+" - "+i+`;

            if (xF < 0 || xF >= `+t.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+t.outHeight+`; yR++) {
              int xR = wR + yR * `+n+" - "+a+`;

              if (xR < 0 || xR >= `+t.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+t.outWidth+`; yC++) {
                int xC = wC + yC * `+r+" - "+o+`;

                if (xC < 0 || xC >= `+t.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},KSe=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterDepth,n=t.filterHeight,r=t.filterWidth,i=t.strideDepth,a=t.strideHeight,o=t.strideWidth,s=e-1-t.padInfo.front,u=n-1-t.padInfo.top,l=r-1-t.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+s+", "+u+", "+l+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+e+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+i+`.0;

          if (dyF < 0.0 || dyF >= `+t.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+e+` - 1 - wF;

          for (int wR = 0; wR < `+n+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+a+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+n+` - 1 - wR;

            for (int wC = 0; wC < `+r+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+o+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+r+` - 1 - wC;

              for (int d2 = 0; d2 < `+t.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},YSe=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var e=t.strideHeight,n=t.strideWidth,r=t.padInfo.top,i=t.padInfo.left,a=t.outChannels/t.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+a+` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yR = 0; yR < `+t.outHeight+`; yR++) {
            int xR = wR + yR * `+e+" - "+r+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+t.outWidth+`; yC++) {
              int xC = wC + yC * `+n+" - "+i+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `},XSe=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,i=t.strideWidth,a=e-1-t.padInfo.top,o=n-1-t.padInfo.left,s=t.outChannels/t.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+a+", "+o+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+e+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+e+` - 1 - wR;

          for (int wC = 0; wC < `+n+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+i+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+n+` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `+s+`; dm++) {
              int d2 = d1 * `+s+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `},Z4=function(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=t.outShape;var i=t.padInfo.top,a=t.padInfo.left,o=t.strideHeight,s=t.strideWidth,u=t.dilationHeight,l=t.dilationWidth,c=t.filterHeight,f=t.filterWidth,d=4*Math.floor(t.inChannels/4),h=t.inChannels%4,p=t.dataFormat==="channelsLast",m=p?1:2,g=p?2:3,v=p?3:1,x="",y="";n&&(x=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`
          float activation(float x) {
            `+n+`
          }
        `,y="result = activation(result);");var b=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+x+`

      const ivec2 strides = ivec2(`+o+", "+s+`);
      const ivec2 pads = ivec2(`+i+", "+a+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`+v+`];

        ivec2 xRCCorner =
            ivec2(coords[`+m+"], coords["+g+`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+c+`; wR++) {
          int xR = xRCorner + wR * `+u+`;

          if (xR < 0 || xR >= `+t.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+f+`; wC++) {
            int xC = xCCorner + wC * `+l+`;

            if (xC < 0 || xC >= `+t.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+d+`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`+p+`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`+(h===1)+`) {

              if (`+p+`) {
                dotProd +=
                    getX(batch, xR, xC, `+d+`) *
                    getW(wR, wC, `+d+`, d2);
              } else {
                dotProd +=
                    getX(batch, `+d+`, xR, xC) *
                    getW(wR, wC, `+d+`, d2);
              }

            } else if (`+(h===2)+`) {
              vec2 wValues = vec2(
                getW(wR, wC, `+d+`, d2),
                getW(wR, wC, `+d+` + 1, d2)
              );

              if (`+p+`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `+d+`),
                  getX(batch, xR, xC, `+d+` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `+d+`, xR, xC),
                  getX(batch, `+d+` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`+(h===3)+`) {
              vec3 wValues = vec3(
                getW(wR, wC, `+d+`, d2),
                getW(wR, wC, `+d+` + 1, d2),
                getW(wR, wC, `+d+` + 2, d2)
              );

              if (`+p+`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `+d+`),
                  getX(batch, xR, xC, `+d+` + 1),
                  getX(batch, xR, xC, `+d+` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `+d+`, xR, xC),
                  getX(batch, `+d+` + 1, xR, xC),
                  getX(batch, `+d+` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `+b+`
        `+y+`
        setOutput(result);
      }
    `},QSe=function(t){this.variableNames=["x","W"],this.outputShape=t.outShape;var e=t.padInfo.front,n=t.padInfo.top,r=t.padInfo.left,i=t.strideDepth,a=t.strideHeight,o=t.strideWidth,s=t.dilationDepth,u=t.dilationHeight,l=t.dilationWidth,c=t.filterDepth,f=t.filterHeight,d=t.filterWidth,h=4*Math.floor(t.inChannels/4),p=t.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+i+", "+a+", "+o+`);
      const ivec3 pads = ivec3(`+e+", "+n+", "+r+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+c+`; wF++) {
          int xF = xFCorner + wF * `+s+`;

          if (xF < 0 || xF >= `+t.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+f+`; wR++) {
            int xR = xRCorner + wR * `+u+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+d+`; wC++) {
              int xC = xCCorner + wC * `+l+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+h+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(p===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+h+`) *
                  getW(wF, wR, wC, `+h+`, d2);
              } else if (`+(p===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+h+`),
                  getX(batch, xF, xR, xC, `+h+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+h+`, d2),
                  getW(wF, wR, wC, `+h+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(p===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+h+`),
                  getX(batch, xF, xR, xC, `+h+` + 1),
                  getX(batch, xF, xR, xC, `+h+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+h+`, d2),
                  getW(wF, wR, wC, `+h+` + 1, d2),
                  getW(wF, wR, wC, `+h+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},J4=function(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=t.outShape;var i=t.inHeight,a=t.inWidth,o=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,l=t.strideWidth,c=t.dilationHeight,f=t.dilationWidth,d=t.filterHeight,h=t.filterWidth,p=t.outChannels/t.inChannels,m="",g="";n&&(m=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`
          float activation(float x) {
            `+n+`
          }
        `,g="result = activation(result);");var v=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+m+`

      const ivec2 strides = ivec2(`+u+", "+l+`);
      const ivec2 pads = ivec2(`+o+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+p+`;
        int q = d2 - d1 * `+p+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+d+`; wR++) {
          int xR = xRCorner + wR * `+c+`;

          if (xR < 0 || xR >= `+i+`) {
            continue;
          }

          for (int wC = 0; wC < `+h+`; wC++) {
            int xC = xCCorner + wC * `+f+`;

            if (xC < 0 || xC >= `+a+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `+v+`
        `+g+`
        setOutput(result);
      }
    `},eR=function(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.outShape;for(var i=t.inHeight,a=t.inWidth,o=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,l=t.strideWidth,c=t.dilationHeight,f=t.dilationWidth,d=t.filterHeight,h=t.filterWidth,p=h,m="int xR; int xC; int xCOffset;",g=0;g<d;g++)for(var v=0;v<h;v++)m+=`
          vec4 xTexelR`+g+"C"+2*v+` = vec4(0.);
          vec4 wR`+g+"C"+v+` = vec4(0.);
          vec4 xR`+g+"C"+v+" = vec4(0.);";for(g=0;g<d;g++)for(var x=0;x<p;x++){if(m+=`
          xR = xRCorner + `+g*c+`;
          xC = xCCorner + `+(v=2*x)*f+`;
        `,l===1){if(v<h&&(m+=s%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+i+" && xCOffset >= 0 && xCOffset < "+a+`) {
                  xTexelR`+g+"C"+v+` = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+a+`) {
                    xTexelR`+g+"C"+v+`.zw = vec2(0.);
                  }
                } else {
                  xTexelR`+g+"C"+v+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+i+" && xCOffset >= 0 && xCOffset < "+a+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+a+`) {
                    previous.zw = vec2(0.);
                  }

                  xR`+g+"C"+v+" = vec4(previous.zw, xTexelR"+g+"C"+v+`.xy);
                } else {
                  xR`+g+"C"+v+" = vec4(0, 0, xTexelR"+g+"C"+v+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+i+" && xC >= 0 && xC < "+a+`) {
                  xTexelR`+g+"C"+v+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+g+"C"+v+` = vec4(0.);
                }

                xR`+g+"C"+v+" = xTexelR"+g+"C"+v+`;
              `,v+1<h)){var y=s%2==0?u7(f):f;f%2==0&&s%2==1||f%2!=0&&s%2!=1?(m+=`
                  xCOffset = xC + `+s%2+" + "+y+`;

                  if(xR >= 0 && xR < `+i+` &&
                    xCOffset >= 0 && xCOffset < `+a+`) {
                    xTexelR`+g+"C"+(v+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,f>1&&(m+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+i+` &&
                      xCOffset >= 0 && xCOffset < `+a+`) {
                      xTexelR`+g+"C"+v+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+g+"C"+v+` = vec4(0.);
                    }
                  `),m+=`
                  xR`+g+"C"+(v+1)+` = vec4(
                    xTexelR`+g+"C"+v+".zw, xTexelR"+g+"C"+(v+2)+`.xy);
                `):m+=`
                  xCOffset = xC + `+y+`;

                  if(xR >= 0 && xR < `+i+` &&
                    xCOffset >= 0 && xCOffset < `+a+`) {
                    xTexelR`+g+"C"+(v+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+g+"C"+(v+1)+" = xTexelR"+g+"C"+(v+2)+`;
                `}}else v<h&&(m+=`
              if(xR >= 0 && xR < `+i+`) {
            `,s%2==1?(m+=`
                xCOffset = xC + 1 - `+l+`;
                if(xCOffset >= 0 && xCOffset < `+a+`) {
                  xTexelR`+g+"C"+v+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+g+"C"+v+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+a+`) {
                  xTexelR`+g+"C"+(v+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+g+"C"+(v+2)+` = vec4(0.);
                }

                xR`+g+"C"+v+` = vec4(
                  xTexelR`+g+"C"+v+".zw, xTexelR"+g+"C"+(v+2)+`.zw);
              `,v+1<h&&(m+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+l+`;
                  if(xCOffset >= 0 && xCOffset < `+a+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+g+"C"+(v+1)+" = vec4(xTexelR"+g+"C"+(v+2)+`.xy, final.xy);
                `)):(m+=`
                if(xC >= 0 && xC < `+a+`) {
                  xTexelR`+g+"C"+v+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+g+"C"+v+` = vec4(0.);
                }

                xCOffset = xC + `+l+`;
                if(xCOffset >= 0 && xCOffset < `+a+`) {
                  xTexelR`+g+"C"+(v+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+g+"C"+(v+2)+` = vec4(0.);
                }

                xR`+g+"C"+v+` = vec4(
                  xTexelR`+g+"C"+v+".xy, xTexelR"+g+"C"+(v+2)+`.xy);
              `,v+1<h&&(m+=`
                  xR`+g+"C"+(v+1)+` = vec4(
                    xTexelR`+g+"C"+v+".zw, xTexelR"+g+"C"+(v+2)+`.zw);
                `)),m+="}");v<h&&(m+=`
            vec4 wTexelR`+g+"C"+v+" = getW("+g+", "+v+`, d1, q);
            wR`+g+"C"+v+" = vec4(wTexelR"+g+"C"+v+".xz, wTexelR"+g+"C"+v+`.xz);
          `,v+1<h&&(m+=`
              vec4 wTexelR`+g+"C"+(v+1)+" = getW("+g+", "+(v+1)+`, d1, q);
              wR`+g+"C"+(v+1)+` =
                vec4(wTexelR`+g+"C"+(v+1)+".xz, wTexelR"+g+"C"+(v+1)+".xz);"))}for(g=0;g<d;g++)for(v=0;v<h;v++)m+="dotProd += xR"+g+"C"+v+" * wR"+g+"C"+v+";";var b="",w="";n&&(b=r?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`vec4 activation(vec4 x) {
          `+n+`
        }`,w="result = activation(result);");var _=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+b+`

      const ivec2 strides = ivec2(`+u+", "+l+`);
      const ivec2 pads = ivec2(`+o+", "+s+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        `+m+`

        vec4 result = dotProd;
        `+_+`
        `+w+`
        setOutput(result);
      }
    `},ZSe=function(t,e,n,r,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var a=t[0],o=t[1],s=t[2],u=t[3],l=e[0],c=n[0],f=n[1];this.outputShape=[l,c,f,u];var d=r==="bilinear"?1:0,h=[o-1+".0",s-1+".0"],p=h[0],m=h[1],g=c>1?[""+(o-1)/(c-1),"(y2-y1) * height_ratio","y1*"+p+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+p],v=g[0],x=g[1],y=g[2],b=f>1?[""+(s-1)/(f-1),"(x2-x1) * width_ratio","x1*"+m+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+m],w=b[0],_=b[1],E=b[2];this.userCode=`
      const float height_ratio = float(`+v+`);
      const float width_ratio = float(`+w+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+a+`) {
          return;
        }

        float height_scale = `+x+`;
        float width_scale = `+_+`;

        float in_y = `+y+`;
        if( in_y < 0.0 || in_y > `+p+` ) {
          setOutput(float(`+i+`));
          return;
        }
        float in_x = `+E+`;
        if( in_x < 0.0 || in_x > `+m+` ) {
          setOutput(float(`+i+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+d+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `},JSe=function(t,e,n){this.variableNames=["x"],this.outputShape=t;var r=t.length,i=t[t.length-1],a=n?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(n?"return "+i+" -i - 1;":"return i;")+`
      }

      void main() {
        `+an(r)+` coords = getOutputCoords();
        int end = `+tR(r,"coords")+`;
        float val = 0.0;
        for (int i = `+i+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+a+` end) {
            continue;
          }
          if (idx == end && `+e+`) {
            continue;
          }
          `+tR(r,"coords")+` = idx;
          val += getX(`+function(o,s){if(o===1)return""+s;if(o===2)return s+".x, "+s+".y";if(o===3)return s+".x, "+s+".y, "+s+".z";if(o===4)return s+".x, "+s+".y, "+s+".z, "+s+".w";throw Error("Cumulative sum for rank "+o+" is not yet supported")}(r,"coords")+`);
        }
        setOutput(val);
      }
    `};function tR(t,e){if(t===1)return""+e;if(t===2)return e+".y";if(t===3)return e+".z";if(t===4)return e+".w";throw Error("Cumulative sum for rank "+t+" is not yet supported")}var eDe=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=jh.DENSE;var e=qd(t),n=Mr();this.outputShape=t,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+qu(["r","c","d"],t)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+e[0]+", "+e[1]+`));
        int index = 4 * (resTexRC.x * `+e[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `+n.output+` = result;
      }
    `},tDe=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=jh.DENSE;var e=qd(t),n=Mr();this.outputShape=t,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+qu(["r","c","d"],t)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+e[0]+", "+e[1]+`));
        int index = 4 * (resTexRC.x * `+e[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `+n.output+` = result;
      }
    `},nDe=function(){function t(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+n+`;
      int offset_h = imod(h, `+n+`);
      int in_w = w / `+n+`;
      int offset_w = imod(w, `+n+`);
      int offset_d = (offset_h * `+n+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return t.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},t.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},t.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},t.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},t.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},t}(),rDe=function(t){this.variableNames=["X"],this.outputShape=[t,t],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `},iDe=function(t){this.variableNames=["A"],this.outTexUsage=Si.DOWNLOAD;var e=Mr();this.outputShape=t,this.userCode=`
      `+z7+`

      void main() {
        float x = getAAtOutCoords();
        `+e.output+` = encode_float(x);
      }
    `},aDe=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Si.DOWNLOAD;var e=Mr();this.outputShape=t,this.userCode=`
      `+z7+`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `+e.output+` = encode_float(x);
      }
    `},oDe=function(t,e,n){n===void 0&&(n=!1),this.variableNames=["A"];var r=Mr(),i=e[0],a=e[1];this.outputShape=t;var o="result";n&&(o="floor(result * 255. + 0.5)"),this.userCode=`
      `+_C(t)+`

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);
        
        int r = flatIndex / `+a+`;
        int c = imod(flatIndex, `+a+`);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(`+a+".0, "+i+`.0);
        vec4 values = `+r.texture2D+`(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        `+r.output+" = vec4("+o+`, 0., 0., 0.);
      }
    `},sDe=function(t,e,n){n===void 0&&(n=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=Mr(),i=e[0],a=e[1];this.outputShape=t;var o="",s="result";n&&(s="floor(result * 255. + 0.5)");for(var u=0;u<=1;u++)for(var l=0;l<=1;l++){var c=2*u+l;o+=`
          localCoords = coords;
          if(localCoords[2] + `+l+" < "+t[2]+`) {
            localCoords[2] += `+l+`;
            if(localCoords[1] + `+u+" < "+t[1]+`) {
              localCoords[1] += `+u+`;

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / `+a+`;
              c = imod(flatIndex, `+a+`);
              uv = (vec2(c, r) + halfCR) / vec2(`+a+".0, "+i+`.0);
              values = `+r.texture2D+`(A, uv);

              if(offset == 0) {
                result[`+c+`] = values[0];
              } else if(offset == 1) {
                result[`+c+`] = values[1];
              } else if(offset == 2) {
                result[`+c+`] = values[2];
              } else {
                result[`+c+`] = values[3];
              }
            }
          }
        `}this.userCode=`
      `+_C(t)+`

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        `+o+`

        `+r.output+" = "+s+`;
      }
    `},uDe="return real * expR - imag * expI;",lDe="return real * expI + imag * expR;",nR=function(t,e,n){this.variableNames=["real","imag"];var r=e[1];this.outputShape=e;var i=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,a=n?r+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+i+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+t+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+r+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+r+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+a+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `},cDe=function(){function t(e,n){this.outputShape=[],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return t.prototype.getCustomSetupFunc=function(e){var n=this;return function(r,i){n.valueLoc==null&&(n.valueLoc=r.getUniformLocationNoThrow(i,"value")),r.gl.uniform1f(n.valueLoc,e)}},t}(),fDe=function(t,e,n){this.variableNames=["A","indices"];var r=t.slice();r[n]=e,this.outputShape=r,this.rank=r.length;var i=an(this.rank),a=function(o,s){var u=o.length;if(u>4)throw Error("Gather for rank "+u+" is not yet supported");if(u===1)return"int(getIndices(resRC))";for(var l=["resRC.x","resRC.y","resRC.z","resRC.w"],c=[],f=0;f<o.length;f++)f===s?c.push("int(getIndices("+l[f]+"))"):c.push(""+l[f]);return c.join()}(t,n);this.userCode=`
      void main() {
        `+i+` resRC = getOutputCoords();
        setOutput(getA(`+a+`));
      }
    `},dDe=function(t,e,n){this.sliceDim=t,this.strides=e,this.variableNames=["x","indices"],this.outputShape=n;var r=an(e.length),i=an(n.length),a=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+r+" strides = "+r+"("+this.strides+`);
         void main() {
          `+i+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+a+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `};function hDe(t,e){var n=Mr();return uNe(t,e,n.version+`
    precision highp float;
    `+n.attribute+` vec3 clipSpacePos;
    `+n.attribute+` vec2 uv;
    `+n.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function pDe(t,e){return hNe(t,e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function mDe(t,e){return pNe(t,e,new Uint16Array([0,1,2,2,1,3]))}function Cp(t,e,n,r,i,a,o){vNe(n,r);var s=mNe(t,e),u=t.TEXTURE_2D;return Ge(t,e,function(){return t.bindTexture(u,s)}),Ge(t,e,function(){return t.texParameteri(u,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)}),Ge(t,e,function(){return t.texParameteri(u,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)}),Ge(t,e,function(){return t.texParameteri(u,t.TEXTURE_MIN_FILTER,t.NEAREST)}),Ge(t,e,function(){return t.texParameteri(u,t.TEXTURE_MAG_FILTER,t.NEAREST)}),Ge(t,e,function(){return t.texImage2D(u,0,i,n,r,0,a,o,null)}),Ge(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)}),s}function vDe(t,e,n,r,i){var a=dy(n,r);return Cp(t,e,a[0],a[1],i.internalFormatFloat,i.textureFormatFloat,t.FLOAT)}function gDe(t,e,n,r,i){var a=dy(n,r);return Cp(t,e,a[0],a[1],i.internalFormatHalfFloat,i.textureFormatFloat,i.textureTypeHalfFloat)}function yDe(t,e,n,r,i){var a=dy(n,r);return Cp(t,e,a[0],a[1],t.RGBA,t.RGBA,t.UNSIGNED_BYTE)}function xDe(t,e,n,r,i){var a=Ep(n,r);return Cp(t,e,a[0],a[1],i.internalFormatPackedFloat,t.RGBA,t.FLOAT)}function bDe(t,e,n,r,i){var a=Ep(n,r);return Cp(t,e,a[0],a[1],i.internalFormatPackedHalfFloat,t.RGBA,i.textureTypeHalfFloat)}function wDe(t,e,n,r){return Ge(t,e,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),W4(t,e,n,"clipSpacePos",r,3,20,0)&&W4(t,e,n,"uv",r,2,20,12)}function _De(t,e,n,r,i,a,o){var s,u,l;Ge(t,e,function(){return t.bindTexture(t.TEXTURE_2D,n)}),a instanceof Uint8Array?(s=new Uint8Array(r*i*4),u=t.UNSIGNED_BYTE,l=t.RGBA):(s=new Float32Array(r*i*4),u=t.FLOAT,l=o.internalFormatPackedFloat),s.set(a),Ge(t,e,function(){return t.texImage2D(t.TEXTURE_2D,0,l,r,i,0,t.RGBA,u,s)}),Ge(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function EDe(t,e,n,r){Ge(t,e,function(){return t.bindTexture(t.TEXTURE_2D,n)}),r.data instanceof Uint8Array?Ge(t,e,function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,r.width,r.height,0,t.RGBA,t.UNSIGNED_BYTE,r.data)}):Ge(t,e,function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r)}),Ge(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function CDe(t,e,n,r,i){var a=t.createBuffer();Ge(t,e,function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,a)});var o=16*n*r;return Ge(t,e,function(){return t.bufferData(t.PIXEL_PACK_BUFFER,o,t.STREAM_READ)}),Ge(t,e,function(){return t.readPixels(0,0,r,n,t.RGBA,t.FLOAT,0)}),Ge(t,e,function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,null)}),a}function NDe(t,e,n){var r=t,i=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function SDe(t,e,n,r,i){var a=dy(n,r),o=a[0],s=a[1],u=new Uint8Array(n*r*4);return Ge(t,e,function(){return t.readPixels(0,0,o,s,i.downloadTextureFormat,t.UNSIGNED_BYTE,u)}),new Float32Array(u.buffer)}function DDe(t,e,n,r,i,a,o,s){var u=t,l=new Float32Array(function(c,f){var d=Ep(c,f);return d[0]*d[1]*4}(a,o));return u.bindBuffer(u.PIXEL_PACK_BUFFER,e),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,l),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),l}function ADe(t,e,n,r){var i=new Float32Array(n*r*4);return Ge(t,e,function(){return t.readPixels(0,0,r,n,t.RGBA,t.FLOAT,i)}),i}var TDe=function(){function t(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var n=_e().getNumber("WEBGL_VERSION");e!=null?(this.gl=e,rNe(n,e)):this.gl=lo(n);var r="WEBGL_color_buffer_float";if(_e().getNumber("WEBGL_VERSION")===1){if(this.textureFloatExtension=_m(this.gl,this.debug,"OES_texture_float"),Qi(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=_m(this.gl,this.debug,"OES_texture_half_float");else if(_e().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Qi(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=_m(this.gl,this.debug,"EXT_color_buffer_half_float");else if(_e().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Qi(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!Qi(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=pDe(this.gl,this.debug),this.indexBuffer=mDe(this.gl,this.debug),this.framebuffer=gNe(this.gl,this.debug),this.textureConfig=dC(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(t.prototype,"debug",{get:function(){return _e().getBool("DEBUG")},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){var e=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var n=this.gl;Ge(n,this.debug,function(){return n.finish()}),Ge(n,this.debug,function(){return n.bindFramebuffer(n.FRAMEBUFFER,null)}),Ge(n,this.debug,function(){return n.deleteFramebuffer(e.framebuffer)}),Ge(n,this.debug,function(){return n.bindBuffer(n.ARRAY_BUFFER,null)}),Ge(n,this.debug,function(){return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null)}),Ge(n,this.debug,function(){return n.deleteBuffer(e.indexBuffer)}),this.disposed=!0}},t.prototype.createFloat32MatrixTexture=function(e,n){return this.throwIfDisposed(),vDe(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.createFloat16MatrixTexture=function(e,n){return this.throwIfDisposed(),gDe(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.createUnsignedBytesMatrixTexture=function(e,n){return this.throwIfDisposed(),yDe(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.uploadPixelDataToTexture=function(e,n){this.throwIfDisposed(),EDe(this.gl,this.debug,e,n)},t.prototype.uploadDenseMatrixToTexture=function(e,n,r,i){this.throwIfDisposed(),_De(this.gl,this.debug,e,n,r,i,this.textureConfig)},t.prototype.createFloat16PackedMatrixTexture=function(e,n){return this.throwIfDisposed(),bDe(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.createPackedMatrixTexture=function(e,n){return this.throwIfDisposed(),xDe(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.deleteMatrixTexture=function(e){var n=this;this.throwIfDisposed(),this.outputTexture===e&&(V4(this.gl,this.debug,this.framebuffer),this.outputTexture=null),Ge(this.gl,this.debug,function(){return n.gl.deleteTexture(e)})},t.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(e,n,r){var i=this;return this.downloadMatrixDriver(e,function(){return SDe(i.gl,i.debug,n,r,i.textureConfig)})},t.prototype.downloadPackedMatrixFromBuffer=function(e,n,r,i,a,o){return DDe(this.gl,e,0,0,0,a,o,this.textureConfig)},t.prototype.downloadFloat32MatrixFromBuffer=function(e,n){return NDe(this.gl,e,n)},t.prototype.createBufferFromTexture=function(e,n,r){this.bindTextureToFrameBuffer(e);var i=CDe(this.gl,this.debug,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),i},t.prototype.createAndWaitForFence=function(){var e=this.createFence(this.gl);return this.pollFence(e)},t.prototype.createFence=function(e){var n,r,i=this;if(_e().getBool("WEBGL_FENCE_API_ENABLED")){var a=e,o=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=function(){var s=a.clientWaitSync(o,0,0);return s===a.ALREADY_SIGNALED||s===a.CONDITION_SATISFIED},n=o}else _e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=function(){return i.isQueryAvailable(n,_e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):r=function(){return!0};return{query:n,isFencePassed:r}},t.prototype.downloadMatrixFromPackedTexture=function(e,n,r){var i=this;return this.downloadMatrixDriver(e,function(){return ADe(i.gl,i.debug,n,r)})},t.prototype.createProgram=function(e){this.throwIfDisposed();var n=this.gl,r=lNe(n,this.debug,e),i=hDe(n,this.debug),a=fNe(n,this.debug);return Ge(n,this.debug,function(){return n.attachShader(a,i)}),Ge(n,this.debug,function(){return n.attachShader(a,r)}),dNe(n,this.debug,a),this.debug&&H1(n,this.debug,a),this.vertexAttrsAreBound||(this.setProgram(a),this.vertexAttrsAreBound=wDe(n,this.debug,this.program,this.vertexBuffer)),a},t.prototype.deleteProgram=function(e){var n=this;this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&Ge(this.gl,this.debug,function(){return n.gl.deleteProgram(e)})},t.prototype.setProgram=function(e){var n=this;this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&H1(this.gl,this.debug,this.program),Ge(this.gl,this.debug,function(){return n.gl.useProgram(e)})},t.prototype.getUniformLocation=function(e,n,r){return r===void 0&&(r=!0),this.throwIfDisposed(),r?xNe(this.gl,this.debug,e,n):bNe(this.gl,e,n)},t.prototype.getAttributeLocation=function(e,n){var r=this;return this.throwIfDisposed(),Ge(this.gl,this.debug,function(){return r.gl.getAttribLocation(e,n)})},t.prototype.getUniformLocationNoThrow=function(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)},t.prototype.setInputMatrixTexture=function(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),wNe(this.gl,this.debug,this.program,e,n,r)},t.prototype.setOutputMatrixTexture=function(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)},t.prototype.setOutputPackedMatrixTexture=function(e,n,r){this.throwIfDisposed();var i=Ep(n,r),a=i[0],o=i[1];this.setOutputMatrixTextureDriver(e,a,o)},t.prototype.setOutputMatrixWriteRegion=function(e,n,r,i){this.setOutputMatrixWriteRegionDriver(r,e,i,n)},t.prototype.setOutputPackedMatrixWriteRegion=function(e,n,r,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},t.prototype.debugValidate=function(){this.program!=null&&H1(this.gl,this.debug,this.program),Em(this.gl)},t.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),Ge(e,this.debug,function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)})},t.prototype.blockUntilAllProgramsCompleted=function(){var e=this;this.throwIfDisposed(),Ge(this.gl,this.debug,function(){return e.gl.finish()})},t.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=_m(this.gl,this.debug,_e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},t.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},t.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},t.prototype.beginQuery=function(){if(_e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var e=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=e.createQuery();return e.beginQuery(n.TIME_ELAPSED_EXT,r),r}var i=this.getQueryTimerExtensionWebGL1(),a=i.createQueryEXT();return i.beginQueryEXT(i.TIME_ELAPSED_EXT,a),a},t.prototype.endQuery=function(){if(_e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT)}},t.prototype.waitForQueryAndGetTime=function(e){return We(this,void 0,void 0,function(){var n=this;return Ve(this,function(r){switch(r.label){case 0:return[4,B4(function(){return n.disposed||n.isQueryAvailable(e,_e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return r.sent(),[2,this.getQueryTime(e,_e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},t.prototype.getQueryTime=function(e,n){if(n===0)return null;if(n===2){var r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}var i=this.getQueryTimerExtensionWebGL1();return i.getQueryObjectEXT(e,i.QUERY_RESULT_EXT)/1e6},t.prototype.isQueryAvailable=function(e,n){if(n===0)return!0;if(n===2){var r=this.gl,i=this.getQueryTimerExtensionWebGL2(),a=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),a&&!this.disjoint}return a=(i=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(e,i.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),a&&!this.disjoint},t.prototype.pollFence=function(e){var n=this;return new Promise(function(r){n.addItemToPoll(function(){return e.isFencePassed()},function(){return r()})})},t.prototype.pollItems=function(){for(var e=function(r){for(var i=0;i<r.length&&r[i]();++i);return i-1}(this.itemsToPoll.map(function(r){return r.isDoneFn})),n=0;n<=e;++n)(0,this.itemsToPoll[n].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(e+1)},t.prototype.addItemToPoll=function(e,n){var r=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1||B4(function(){return r.pollItems(),r.itemsToPoll.length===0})},t.prototype.bindTextureToFrameBuffer=function(e){this.throwIfDisposed(),G1(this.gl,this.debug,e,this.framebuffer),this.debug&&Em(this.gl)},t.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(G1(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&Em(this.gl)):V4(this.gl,this.debug,this.framebuffer)},t.prototype.downloadMatrixDriver=function(e,n){this.bindTextureToFrameBuffer(e);var r=n();return this.unbindTextureToFrameBuffer(),r},t.prototype.setOutputMatrixTextureDriver=function(e,n,r){this.throwIfDisposed();var i=this.gl;G1(i,this.debug,e,this.framebuffer),this.debug&&Em(i),this.outputTexture=e,Ge(i,this.debug,function(){return i.viewport(0,0,n,r)}),Ge(i,this.debug,function(){return i.scissor(0,0,n,r)})},t.prototype.setOutputMatrixWriteRegionDriver=function(e,n,r,i){var a=this;this.throwIfDisposed(),Ge(this.gl,this.debug,function(){return a.gl.scissor(e,n,r,i)})},t.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},t.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},t}();function rR(t,e){if(t.length!==e.length)throw Error("Binary was compiled with "+t.length+" inputs, but was executed with "+e.length+" inputs");t.forEach(function(n,r){var i=n.logicalShape,a=e[r],o=a.shape;if(!ar(i,o))throw Error("Binary was compiled with different shapes than the current args. Shapes "+i+" and "+o+" must match");if(!n.isUniform||!a.isUniform){var s=n.texShape,u=a.isUniform?null:a.texData.texShape;if(!ar(s,u))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+s+" and "+u+" must match")}})}var MDe=function(t,e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var r=n.filterWidth,i=n.inChannels,a=n.strideWidth,o=n.strideHeight,s=n.padInfo,u=n.outWidth,l=n.dilationWidth,c=n.dilationHeight,f=n.dataFormat,d=s.left,h=s.top,p=i*r,m=Mr(),g=f==="channelsLast",v=g?0:1,x=g?1:2,y="",b=0;b<=1;b++)for(var w=0;w<=1;w++)y+=`
          blockIndex = rc.y + `+w+`;
          pos = rc.x + `+b+`;

          if(blockIndex < `+t[1]+" && pos < "+t[0]+`) {
            offsetY = int(blockIndex / (`+u+")) * "+o+" - "+h+`;
            d0 = offsetY + `+c+" * (pos / "+p+`);

            if(d0 < `+e[v]+` && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), `+u+".) * "+a+". - "+d+`.);
              d1 = offsetX + `+l+" * (int(mod(float(pos), "+p+".) / "+i+`.));

              if(d1 < `+e[x]+` && d1 >= 0) {

                ch = int(mod(float(pos), `+i+`.));

                if (`+g+`) {
                  innerDims = vec2(d1, ch);
                  result[`+(2*b+w)+`] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`+(2*b+w)+`] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `+y+`

        `+m.output+` = result;
      }
    `},IDe=function(t,e,n,r,i){this.variableNames=["x"],this.outputShape=[];var a,o=e,s=t[3]-1;this.outputShape=t;var u="float("+n+") + float("+r+") * sum";a=i===.5?"inversesqrt("+u+")":i===1?"1.0/("+u+")":"exp(log("+u+") * float(-"+i+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+o+"; j <= "+o+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+s+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+a+`;
        setOutput(val);
      }
    `},RDe=function(t,e,n,r,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=e,this.bias=n,this.alpha=r,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+e+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+e+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+r+") * norm + float("+n+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+r+`)
                * float(`+i+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+i+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `},kDe=function(t,e,n,r,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var a,o=e,s=t[3]-1;this.outputShape=t;var u="float("+n+") + float("+r+") * sum";a=i===.5?"inversesqrt("+u+")":i===1?"1.0/("+u+")":"exp(log("+u+") * float(-"+i+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `+this.outputShape[3]+`;
        bool hasNextRow = c < `+this.outputShape[2]+`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `+o+`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `+o+"; j <= "+o+`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`+s+`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `+a+`;
        setOutput(result);
      }
    `},FDe=function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var e=t.strideHeight,n=t.strideWidth,r=t.dilationHeight,i=t.effectiveFilterHeight,a=t.effectiveFilterWidth,o=i-1-t.padInfo.top,s=a-1-t.padInfo.left,u=i*a-1;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+i+`;
          wR += `+r+`) {
          float dyR = float(dyRCorner + wR) / `+e+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+a+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+n+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+u+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+a+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `},PDe=function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var e=t.strideDepth,n=t.strideHeight,r=t.strideWidth,i=t.dilationDepth,a=t.dilationHeight,o=t.dilationWidth,s=t.effectiveFilterDepth,u=t.effectiveFilterHeight,l=t.effectiveFilterWidth,c=s-1-t.padInfo.front,f=u-1-t.padInfo.top,d=l-1-t.padInfo.left,h=s*u*l-1;this.userCode=`
      const ivec3 pads = ivec3(`+c+", "+f+", "+d+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+s+`;
           wD += `+i+`) {
          float dyD = float(dyDCorner + wD) / `+e+`.0;

          if (dyD < 0.0 || dyD >= `+t.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+u+`;
              wR += `+a+`) {
            float dyR = float(dyRCorner + wR) / `+n+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+l+`;
                wC += `+o+`) {
              float dyC = float(dyCCorner + wC) / `+r+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `+h+` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `+u+" * "+l+` +
                  wR * `+l+` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `},Z1=function(t,e,n,r,i,a,o){n===void 0&&(n=!1),r===void 0&&(r=!1),i===void 0&&(i=!1),a===void 0&&(a=null),o===void 0&&(o=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;var s=n?t[1]:t[2],u=Math.ceil(s/2),l=n?"i * 2, rc.y":"rc.y, i * 2",c=r?"rc.z, i * 2":"i * 2, rc.z",f=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],d=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],h="",p="";a&&(h=o?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+a+`
        }`:`vec4 activation(vec4 x) {
          `+a+`
        }`,p="result = activation(result);");var m=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+h+`

      const float sharedDimension = `+u+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+u+`; i++) {
          vec4 a = getMatrixA(rc.x, `+l+`);
          vec4 b = getMatrixB(rc.x, `+c+`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`+f[0]+" * "+d[0]+`);
          result += (`+f[1]+" * "+d[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+m+`

        `+p+`

        setOutput(result);
      }
    `},ODe=function(){function t(e,n,r){this.variableNames=["probs"],this.outputShape=[e,r],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(n-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(n-1)+`));
      }
    `}return t.prototype.getCustomSetupFunc=function(e){var n=this;return function(r,i){n.seedLoc==null&&(n.seedLoc=r.getUniformLocation(i,"seed")),r.gl.uniform1f(n.seedLoc,e)}},t}(),BDe=function(t,e,n,r){this.variableNames=["indices"],this.outputShape=[t,e],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+r+"), float("+n+`),
                      float(index == coords.y)));
      }
    `},LDe=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t;var e=t.length;if(e===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var n=ii("rc",e),r=an(e),i=function(s,u,l){if(s===1)return"rc > "+u[0];for(var c="",f=s-2;f<s;f++)c+=l[f]+" >= "+u[f],f<s-1&&(c+="||");return c}(e,t,n),a=function(s,u,l,c){if(s===1)return"";var f=c.slice(-2);return`
    int r = `+f[0]+`;
    int c = `+f[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+u+`;
    bool rEdge = rp1 >= `+l+`;
  `}(e,t[t.length-1],t[t.length-2],n),o=function(s,u){var l=s.length,c=function(f,d){for(var h=[],p=0;p<=1;p++)for(var m=0;m<=1;m++){for(var g=(p===0?"r":"rp1")+", "+(m===0?"c":"cp1"),v=2;v<f;v++)g=d[d.length-1-v]+","+g;h.push(g)}return h}(l,u);return l===1?`getA(rc),
            rc + 1 >= `+s[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+c[0]+`),
          cEdge ? 0. : getA(`+c[1]+`),
          rEdge ? 0. : getA(`+c[2]+`),
          rEdge || cEdge ? 0. : getA(`+c[3]+")"}(t,n);this.userCode=`
        void main() {
          `+r+` rc = getOutputCoords();

          if(`+i+`) {
            setOutput(vec4(0));
          } else {
            `+a+`

            setOutput(vec4(`+o+`));
          }
        }
      `}},jDe=function(t,e,n){this.variableNames=["x"],this.outputShape=e.map(function(u,l){return u[0]+t[l]+u[1]});var r=t.length,i=an(r),a=e.map(function(u){return u[0]}).join(","),o=e.map(function(u,l){return u[0]+t[l]}).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=r!==1?`
      `+i+" start = "+i+"("+a+`);
      `+i+" end = "+i+"("+o+`);

      void main() {
        `+i+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+n+`));
        } else {
          `+i+` coords = outC - start;
          setOutput(getX(`+s+`));
        }
      }
    `:`
        int start = `+a+`;
        int end = `+o+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+n+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `},$De=function(t,e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.map(function(g,v){return g[0]+t[v]+g[1]});for(var r=t.length,i=an(r),a=e.map(function(g){return g[0]}).join(","),o=e.map(function(g,v){return g[0]+t[v]}).join(","),s=ii("rc",r),u=ii("source",r),l=s[r-1]+" < "+this.outputShape[r-1],c=r===1?"source":"vec2("+u.slice(-2).join()+")",f=[i+" rc = outputLoc;",s[r-1]+` += 1;
       if(`+l+`) {
      `,r===1?"":`}
       rc = outputLoc;
       `+s[r-2]+` += 1;
       if(`+s[r-2]+" < "+this.outputShape[r-2]+") {",r===1?"":"  "+s[r-1]+` += 1;
         if(`+l+") {"],d=r===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",h="",p=0,m=r===1?2:4;p<m;p++)h+=`
        `+f[p]+`
        if (`+d+`) {
          result[`+p+"] = float("+n+`);
        } else {
          `+i+` source = rc - start;
          result[`+p+"] = getChannel(getX("+u.join()+"), "+c+`);
        }
      `;h+=r===1?"} ":"}}",this.userCode=`
      const `+i+" start = "+i+"("+a+`);
      const `+i+" end = "+i+"("+o+`);

      void main() {
        `+i+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+h+`
        setOutput(result);
      }
    `},J1=function(t,e,n){if(this.variableNames=["x"],e==="avg"&&n)throw new Error("Cannot compute positions for average pool.");var r=t.filterWidth,i=t.strideHeight,a=t.strideWidth,o=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterHeight,l=t.effectiveFilterWidth,c=t.padInfo.top,f=t.padInfo.left;this.outputShape=t.outShape;var d=e==="avg",h="0.0";if(d||(h="-1.0 / 1e-20"),n)this.userCode=`
        const ivec2 strides = ivec2(`+i+", "+a+`);
        const ivec2 pads = ivec2(`+c+", "+f+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+u+`;
              wR += `+o+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+l+`;
                wC += `+s+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = wR * `+l+` + wC;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var p=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="avg"&&(p="avgValue / count");var m=4*Math.floor(r/4),g=r%4,v=`
      if (`+d+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+i+", "+a+`);
      const ivec2 pads = ivec2(`+c+", "+f+`);
      const float initializationValue = `+h+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+t.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+h+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+u+`;
            wR += `+o+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+t.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+m+`; wC += 4) {
            int xC = xCCorner + wC * `+s+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              getValue(batch, xR, xC + 2 * `+s+`, d),
              getValue(batch, xR, xC + 3 * `+s+`, d)
            );

            `+v+`
          }

          int xC = xCCorner + `+m+`;
          if (`+(g===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+v+`
          } else if (`+(g===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              initializationValue,
              initializationValue
            );

            `+v+`
          } else if (`+(g===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              getValue(batch, xR, xC + 2 * `+s+`, d),
              initializationValue
            );

            `+v+`
          }
        }
        setOutput(`+p+`);
      }
    `}},ex=function(t,e,n){if(this.variableNames=["x"],e==="avg"&&n)throw new Error("Cannot compute positions for average pool.");var r=t.filterWidth,i=t.strideDepth,a=t.strideHeight,o=t.strideWidth,s=t.dilationDepth,u=t.dilationHeight,l=t.dilationWidth,c=t.effectiveFilterDepth,f=t.effectiveFilterHeight,d=t.effectiveFilterWidth,h=t.padInfo.front,p=t.padInfo.top,m=t.padInfo.left;this.outputShape=t.outShape;var g=e==="avg",v="0.0";if(g||(v="-1.0 / 1e-20"),n)this.userCode=`
        const ivec3 strides =
            ivec3(`+i+", "+a+", "+o+`);
        const ivec3 pads = ivec3(`+h+", "+p+", "+m+`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `+c+`;
              wD += `+s+`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `+t.inDepth+`) {
              continue;
            }

            for (int wR = 0; wR < `+f+`;
                wR += `+u+`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `+t.inHeight+`) {
                continue;
              }

              for (int wC = 0; wC < `+d+`;
                  wC += `+l+`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `+t.inWidth+`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition =
                      wD * `+f+" * "+d+` +
                      wR * `+d+` + wC;;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var x=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="avg"&&(x="avgValue / count");var y=4*Math.floor(r/4),b=r%4,w=`
      if (`+g+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(`+i+", "+a+", "+o+`);
      const ivec3 pads = ivec3(`+h+", "+p+", "+m+`);
      const float initializationValue = `+v+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `+t.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+v+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `+c+`;
            wD += `+s+`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `+t.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+f+`;
            wR += `+u+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+y+`; wC += 4) {
              int xC = xCCorner + wC * `+l+`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+l+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+l+`, ch),
                getValue(batch, xD, xR, xC + 3 * `+l+`, ch)
              );

              `+w+`
            }

            int xC = xCCorner + `+y+`;
            if (`+(b===1)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `+w+`
            } else if (`+(b===2)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+l+`, ch),
                initializationValue,
                initializationValue
              );

              `+w+`
            } else if (`+(b===3)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+l+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+l+`, ch),
                initializationValue
              );

              `+w+`
            }
          }
          setOutput(`+x+`);
        }
      }
    `}},zDe=function(t,e){this.variableNames=["x"];var n=t.windowSize,r=t.batchSize,i=t.inSize,a=Math.ceil(i/n);this.outputShape=[r,a];var o="0.0",s="";e==="prod"?o="1.0":e==="min"?(o="1.0 / 1e-20",s="min"):e==="max"&&(o="-1.0 / 1e-20",s="max");var u=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="sum"?u="sumValue":e==="prod"?u="prodValue":e==="all"?u="allValue":e==="any"&&(u="anyValue");var l=4*Math.floor(n/4),c=n%4,f=`
      if (`+(e==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(e==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+s+`(values, minMaxValue);
      }
    `,d="vec4";e==="all"?(o="1.0",f=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,d="bvec4"):e==="any"&&(o="0.0",f=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,d="bvec4");var h="";i%n>0&&(h=`
        if (inIdx < 0 || inIdx >= `+i+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+o+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+h+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+n+`;

        vec4 minMaxValue = vec4(`+o+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+l+`; i += 4) {
          int inIdx = inOffset + i;
          `+d+" values = "+d+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+f+`
        }

        int inIdx = inOffset + `+l+`;
        if (`+(c===1)+`) {
          `+d+" values = "+d+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+f+`
        } else if (`+(c===2)+`) {
          `+d+" values = "+d+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+f+`
        } else if (`+(c===3)+`) {
          `+d+" values = "+d+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+f+`
        }
        setOutput(`+u+`);
      }
    `},UDe=function(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var n="",r=0;r<4;r++){var i="thisRC = rc;";r%2==1&&(i+="thisRC.z += 1;"),r>1&&(i+="thisRC.y += 1;"),n+=`
        `+i+`
        `+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+r+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(r>0?"}":"")+`
      `}this.userCode=`
      
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+qu(["r","c","d"],e)+`
      return ivec3(r, c, d);
    }
  
      `+_C(t)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+t[1]+`;
        int cols = `+t[2]+`;

        `+n+`

        setOutput(result);
      }
    `},WDe=function(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,i=r[1],a=r[2],o=t.shape,s=o[1],u=o[2],l=[n&&s>1?i-1:i,n&&u>1?a-1:a],c=[n&&s>1?s-1:s,n&&u>1?u-1:u],f=l[0]/c[0],d=l[1]/c[1],h=1/f,p=1/d,m=2*Math.ceil(h)+2,g=2*Math.ceil(p)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+f+`);
        const float widthScale = float(`+d+`);

        const float invHeightScale = float(`+h+`);
        const float invWidthScale = float(`+p+`);

        const int winHeight = int(`+m+`);
        const int winWidth = int(`+g+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+u+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(i-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(a-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},VDe=function(t,e,n,r){this.variableNames=["A"],this.outputShape=[];var i=t[0],a=t[1],o=t[2],s=t[3];this.outputShape=[i,e,n,s];var u=[r&&e>1?a-1:a,r&&n>1?o-1:o],l=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`);
      const vec2 inputShapeRC = vec2(`+a+".0, "+o+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `},qDe=function(t,e,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var i=t[0],a=t[1],o=t[2],s=t[3];this.outputShape=[i,e,n,s];var u=[r&&e>1?a-1:a,r&&n>1?o-1:o],l=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`,
          `+u[1]/l[1]+`);
      const vec3 inputShapeRC = vec3(`+a+".0, "+o+`.0,
                                     `+o+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(s-1)+`;
        bool hasNextRow = coords.z < `+(n-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `},HDe=function(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,i=r[1],a=r[2],o=t.shape,s=o[1],u=o[2],l=[n&&s>1?i-1:i,n&&u>1?a-1:a],c=[n&&s>1?s-1:s,n&&u>1?u-1:u],f=l[0]/c[0],d=l[1]/c[1],h=1/f,p=1/d,m=2*Math.ceil(h)+2,g=2*Math.ceil(p)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+f+`);
        const float widthScale = float(`+d+`);

        const float invHeightScale = float(`+h+`);
        const float invWidthScale = float(`+p+`);

        const int winHeight = int(`+m+`);
        const int winWidth = int(`+g+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+u+`) {
              continue;
            }

            float sourceFracRow =
              float(`+l[0]+`) *
                (float(dyR) / float(`+c[0]+`));

            float sourceFracCol =
                float(`+l[1]+`) *
                  (float(dyC) / float(`+c[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+i+`) - 1),
                `+n+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+a+`) - 1),
                `+n+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},GDe=function(t,e,n,r){this.variableNames=["A"],this.outputShape=[];var i=t[0],a=t[1],o=t[2],s=t[3];this.outputShape=[i,e,n,s];var u=[r&&e>1?a-1:a,r&&n>1?o-1:o],l=[r&&e>1?e-1:e,r&&n>1?n-1:n],c=r?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`);
      const vec2 inputShapeRC = vec2(`+a+".0, "+o+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+c+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `},KDe=function(t,e){this.variableNames=["x"];var n=t.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=t,n!==1){var r=t.map(function(a,o){return function(s){return e.indexOf(s)!==-1&&t[s]!==1?t[s]+" - coords["+s+"] - 1":"coords["+s+"]"}(o)}).join(","),i=an(n);this.userCode=`
      void main() {
        `+i+` coords = getOutputCoords();
        setOutput(getX(`+r+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+t[0]+` - coord - 1));
        }
      `},YDe=function(t,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var n=t.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");this.outputShape=t;var r=ii("rc",n),i=r[n-1]+" + 1 < "+this.outputShape[n-1],a=r[n-2]+" + 1 < "+this.outputShape[n-2],o=an(n);function s(u){var l=t.map(function(c,f){return function(d,h){return e.indexOf(d)!==-1&&t[d]!==1?t[d]+" - "+h[d]+" - 1":""+h[d]}(f,u)});return"getChannel(getX("+l.join(",")+"), vec2("+l.slice(-2).join(",")+"))"}this.userCode=n===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+t[0]+` - rc - 1),
            `+t[0]+` - rc - 1);
          if(`+i+`){
              result.g = getChannel(getX(`+t[0]+` - (rc  + 1) - 1),
                `+t[0]+` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+o+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+function(u){return s(u)}(r.slice())+`;
          if(`+i+`){
            result.g = `+function(u){return u[n-1]="("+u[n-1]+" + 1)",s(u)}(r.slice())+`;
          }
          if(`+a+`) {
            result.b = `+function(u){return u[n-2]="("+u[n-2]+" + 1)",s(u)}(r.slice())+`;
            if(`+i+`) {
              result.a = `+function(u){return u[n-1]="("+u[n-1]+" + 1)",u[n-2]="("+u[n-2]+" + 1)",s(u)}(r.slice())+`;
            }
          }
          setOutput(result);
        }
    `},iR=function(t,e,n,r,i,a,o){this.variableNames=["updates","indices","defaultValue"],this.outputShape=a;var s=an(i.length),u=an(a.length),l="";n===1?l="i":n===2&&(l="i, j");var c="getIndices("+l+")",f="";r===1?f="i":r===2&&(f="i, coords[1]");var d="getUpdates("+f+")",h=e>1?"strides[j]":"strides";this.userCode=`
        `+s+" strides = "+s+"("+i+`);

        void main() {
          `+u+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+t+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+e+`; j++) {
              int index = round(`+c+`);
              flattenedIndex += index * `+h+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+d+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `},XDe=function(t,e){this.variableNames=["x","segmentIds"];var n=t.windowSize,r=t.batchSize,i=t.inSize,a=t.numSegments,o=a*Math.ceil(i/n);this.outputShape=[r,o];var s=4*Math.floor(n/4),u=n%4,l=`
        sumValue += dot(values, segFilter);
    `,c="";i%n>0&&(c=`
        if (inIdx < 0 || inIdx >= `+i+`) {
          return initializationValue;
        }
      `);var f="";i%n>0&&(f=`
        if (inIdx < 0 || inIdx >= `+i+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+c+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+f+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+a+")) * float("+n+`));
        int currentSeg = int(mod(float(outIdx), float(`+a+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+s+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+l+`
        }

        int inIdx = inOffset + `+s+`;
        if (`+(u===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+l+`
        } else if (`+(u===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+l+`
        } else if (`+(u===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+l+`
        }
        setOutput(sumValue);
      }
    `},QDe=function(t,e,n){var r,i;if(this.variableNames=["c","a","b"],this.outputShape=e,n>4)throw Error("Where for rank "+n+" is not yet supported");if(n===1)i="resRC",r="resRC";else{for(var a=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],s=[],u=0;u<e.length;u++)s.push(""+a[u]),u<t&&o.push(""+a[u]);r=o.join(),i=s.join()}var l=an(n);this.userCode=`
      void main() {
        `+l+` resRC = getOutputCoords();
        float cVal = getC(`+r+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+i+`));
        } else {
          setOutput(getB(`+i+`));
        }
      }
    `},ZDe=function(){function t(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;var n,r=an(this.rank),i="uniform int start["+this.rank+"];",a=function(o){if(o===1)return"sourceLoc";if(o<=6)return tx.slice(0,o).map(function(s){return"sourceLoc."+s}).join(",");throw Error("Slicing for rank "+o+" is not yet supported")}(this.rank);n=`
        `+r+` sourceLoc;
        `+r+` coords = getOutputCoords();
        `+e.map(function(o,s){return"sourceLoc."+tx[s]+" = start["+s+"] + coords."+tx[s]+";"}).join(`
`)+`
      `,this.userCode=`
      `+i+`
      void main() {
        `+n+`
        setOutput(getSource(`+a+`));
      }
    `}return t.prototype.getCustomSetupFunc=function(e){var n=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(r,i){n.startLoc==null&&(n.startLoc=r.getUniformLocationNoThrow(i,"start"),n.startLoc==null)||r.gl.uniform1iv(n.startLoc,e)}},t}(),tx=["x","y","z","w","u","v"],JDe=function(){function t(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length;var n=an(this.rank),r=ii("coords",this.rank),i=ii("sourceLoc",this.rank),a=this.rank===1?"sourceLoc":"vec2("+i.slice(-2).join()+")",o="getChannel(getSource("+i.join()+"), "+a+")",s=`
      result.x = `+o+`;
      if (++`+r[this.rank-1]+" < "+e[this.rank-1]+`) {
        ++`+i[this.rank-1]+`;
        result.y = `+o+`;
        --`+i[this.rank-1]+`;
      }
    `,u=this.rank===1?"":`
      --`+r[this.rank-1]+`;
      if (++`+r[this.rank-2]+" < "+e[this.rank-2]+`) {
        ++`+i[this.rank-2]+`;
        result.z = `+o+`;
        if (++`+r[this.rank-1]+" < "+e[this.rank-1]+`) {
          ++`+i[this.rank-1]+`;
          result.w = `+o+`;
        }
      }
    `,l=this.rank<=4?`sourceLoc = coords +
            `+n+"("+e.map(function(c,f){return"start["+f+"]"}).join()+");":e.map(function(c,f){return i[f]+" = "+r[f]+" + start["+f+"];"}).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+n+` coords = getOutputCoords();
        `+n+` sourceLoc;
        `+l+`
        vec4 result = vec4(0.);
        `+s+`
        `+u+`
        setOutput(result);
      }
    `}return t.prototype.getCustomSetupFunc=function(e){var n=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(r,i){n.startLoc==null&&(n.startLoc=r.getUniformLocationNoThrow(i,"start"),n.startLoc==null)||r.gl.uniform1iv(n.startLoc,e)}},t}(),eAe=function(t,e,n){this.variableNames=["x"],this.outputShape=n;var r=n.length,i=an(n.length),a=an(n.length),o="";if(r===1)o="coords * strides + begin";else{var s=0;o=n.map(function(u,l){return s++,n.length===1?"coords * strides["+l+"] + begin["+l+"]":"coords["+(s-1)+"] * strides["+l+"] + begin["+l+"]"}).join(",")}this.userCode=`
      `+i+" begin = "+i+"("+t+`);
      `+i+" strides = "+i+"("+e+`);

      void main() {
        `+a+` coords = getOutputCoords();
        setOutput(getX(`+o+`));
      }
    `},tAe=function(){function t(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return t.prototype.acquireTexture=function(e,n,r){var i,a=aR(n,r),o=oR(e,a,r);if(o in this.freeTextures||(this.freeTextures[o]=[]),o in this.usedTextures||(this.usedTextures[o]=[]),this.freeTextures[o].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var s=this.freeTextures[o].shift();return this.usedTextures[o].push(s),s}return this.numUsedTextures++,this.log(),a===_i.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):a===_i.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):a===_i.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):a===_i.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):a===_i.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[o].push(i),i},t.prototype.releaseTexture=function(e,n,r,i){if(this.freeTextures!=null){var a=oR(n,aR(r,i),i);a in this.freeTextures||(this.freeTextures[a]=[]),this.freeTextures[a].push(e),this.numFreeTextures++,this.numUsedTextures--;var o=this.usedTextures[a],s=o.indexOf(e);if(s<0)throw new Error("Cannot release a texture that was never provided by this texture manager");o.splice(s,1),this.log()}},t.prototype.log=function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+e+")")}},t.prototype.getNumUsedTextures=function(){return this.numUsedTextures},t.prototype.getNumFreeTextures=function(){return this.numFreeTextures},t.prototype.dispose=function(){var e=this;if(this.freeTextures!=null){for(var n in this.freeTextures)this.freeTextures[n].forEach(function(r){e.gpgpu.deleteMatrixTexture(r)});for(var n in this.usedTextures)this.usedTextures[n].forEach(function(i){e.gpgpu.deleteMatrixTexture(i)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},t}();function aR(t,e){if(t===Si.UPLOAD)return _i.PACKED_2X2_FLOAT32;if(t===Si.RENDER||t==null)return function(n){return _e().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?n?_i.PACKED_2X2_FLOAT32:_i.UNPACKED_FLOAT32:n?_i.PACKED_2X2_FLOAT16:_i.UNPACKED_FLOAT16}(e);if(t===Si.DOWNLOAD||t===Si.PIXELS)return _i.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+t)}function oR(t,e,n){return t[0]+"_"+t[1]+"_"+e+"_"+n}var nAe=function(t,e){this.variableNames=["A"];for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[r]*e[r];this.outputShape=n,this.rank=n.length;var i=an(this.rank),a=function(o){var s=o.length;if(s>5)throw Error("Tile for rank "+s+" is not yet supported");if(s===1)return"imod(resRC, "+o[0]+")";for(var u=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],l=[],c=0;c<o.length;c++)l.push("imod("+u[c]+", "+o[c]+")");return l.join()}(t);this.userCode=`
      void main() {
        `+i+` resRC = getOutputCoords();
        setOutput(getA(`+a+`));
      }
    `},rAe=function(t,e){this.variableNames=["A"];for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[e[r]];this.outputShape=n,this.rank=n.length;var i=an(this.rank),a=function(o){var s=o.length;if(s>6)throw Error("Transpose for rank "+s+" is not yet supported");for(var u=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],l=new Array(s),c=0;c<o.length;c++)l[o[c]]=u[c];return l.join()}(e);this.userCode=`
    void main() {
      `+i+` resRC = getOutputCoords();
      setOutput(getA(`+a+`));
    }
    `},iAe=function(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[e[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var i=an(this.rank),a=$7("rc",this.rank),o=new Array(this.rank);for(r=0;r<e.length;r++)o[e[r]]=a[r];var s="vec2("+o.slice(-2).join()+")",u="++"+a[this.rank-1]+" < "+n[this.rank-1],l="getChannel(getA("+o.join()+"), "+s+")";this.userCode=`
    void main() {
      `+i+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+l+`;
      if(`+u+`) {
        result[1] = `+l+`;
      }
      --`+a[this.rank-1]+`;
      if(++`+a[this.rank-2]+" < "+n[this.rank-2]+`) {
        result[2] = `+l+`;
        if(`+u+`) {
          result[3] = `+l+`;
        }
      }
      setOutput(result);
    }
    `},EC=1.7580993408473768,CC=1.0507009873554805,_t=function(t,e){this.variableNames=["A"],this.outputShape=t,this.userCode=`
      float unaryOperation(float x) {
        `+e+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `},Ba="if (isnan(x)) return x;",aAe="return x;",sR="return abs(x);",q7=Ba+`
  return (x < 0.0) ? 0.0 : x;
`,H7=Ba+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,G7="return (x >= 0.0) ? x : (exp(x) - 1.0);",oAe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+EC+`;
  float scale = `+CC+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,uR="return -x;",lR="return ceil(x);",cR="return floor(x);",fR="return exp(x);",dR="return exp(x) - 1.0;",sAe=Ba+`
  return sin(x);
`,uAe=Ba+`
  return cos(x);
`,lAe=Ba+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,cAe=Ba+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,fAe=Ba+`
  return atan(x);
`,dAe=Ba+"return log(x + sqrt(x * x + 1.0));",hAe=Ba+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,pAe=Ba+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,Dm="return x;",mAe="return x;",K7=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Y7=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,X7=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,hd=function(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+e+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `},vAe=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t;var e=t.length,n=ii("rc",e),r=an(e),i=function(s,u){if(s===1)return"rc";for(var l="",c=0;c<s;c++)l+=u[c],c<s-1&&(l+=",");return l}(e,n),a=n.slice(-2),o=e<=1?"rc":"vec2("+a.join(",")+")";this.userCode=`
      void main() {
        `+r+` rc = getOutputCoords();
        vec4 packedInput = getA(`+i+`);

        setOutput(getChannel(packedInput, `+o+`));
      }
    `},Am={};function Tm(t,e){if(e===void 0&&(e=!1),t==="linear")return e?mAe:aAe;if(t==="relu")return e?K7:q7;if(t==="elu")return e?X7:G7;if(t==="relu6")return e?Y7:H7;if(t==="prelu")return e?V7:W7;throw new Error("Activation "+t+" has not been implemented for the WebGL backend.")}var gAe=600,yAe=function(t){function e(n){var r,i=t.call(this)||this;if(i.pendingRead=new WeakMap,i.pendingDisposal=new WeakSet,i.dataRefCount=new WeakMap,i.numBytesInGPU=0,i.uploadWaitMs=0,i.downloadWaitMs=0,i.warnedAboutMemory=!1,i.pendingDeletes=0,i.disposed=!1,!_e().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(n==null){var a=lo(_e().getNumber("WEBGL_VERSION"));i.binaryCache=((r=_e().getNumber("WEBGL_VERSION"))in Am||(Am[r]={}),Am[r]),i.gpgpu=new TDe(a),i.canvas=a.canvas,i.gpgpuCreatedLocally=!0}else i.gpgpu=n,i.binaryCache={},i.gpgpuCreatedLocally=!1,i.canvas=n.gl.canvas;return i.textureManager=new tAe(i.gpgpu),i.numMBBeforeWarning=_e().global.screen==null?1024:_e().global.screen.height*_e().global.screen.width*window.devicePixelRatio*gAe/1024/1024,i.texData=new I7(i,se),i}return Oa(e,t),e.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},e.prototype.write=function(n,r,i){if(_e().getBool("DEBUG")&&this.checkNumericalProblems(n),i==="complex64"&&n!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var a={};return this.texData.set(a,{shape:r,dtype:i,values:n,usage:Si.UPLOAD}),a},e.prototype.move=function(n,r,i,a){if(_e().getBool("DEBUG")&&this.checkNumericalProblems(r),a==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(n,{shape:i,dtype:a,values:r,usage:Si.UPLOAD})},e.prototype.readSync=function(n){var r=this.texData.get(n),i=r.values,a=r.dtype,o=r.complexTensors,s=r.slice,u=r.shape,l=r.isPacked;if(s!=null){var c=void 0;c=l?new hd(u,Dm):new _t(u,Dm);var f=this.runWebGLProgram(c,[{dataId:n,shape:u,dtype:a}],a),d=this.readSync(f.dataId);return this.disposeData(f.dataId),d}if(i!=null)return this.convertAndCacheOnCPU(n);if(a==="string")return i;var h,p,m=this.activeTimers!=null;return m&&(h=Ua()),a==="complex64"?p=Fw(o.real.dataSync(),o.imag.dataSync()):p=this.getValuesFromTexture(n),m&&(this.downloadWaitMs+=Ua()-h),this.convertAndCacheOnCPU(n,p)},e.prototype.read=function(n){return We(this,void 0,void 0,function(){var r,i,a,o,s,u,l,c,f,d,h,p,m,g,v,x,y,b,w,_,E,C;return Ve(this,function(N){switch(N.label){case 0:if(this.pendingRead.has(n))return r=this.pendingRead.get(n),[2,new Promise(function(D){return r.push(D)})];if(i=this.texData.get(n),a=i.values,o=i.shape,s=i.slice,u=i.dtype,l=i.complexTensors,c=i.isPacked,s!=null)return f=void 0,f=c?new hd(o,Dm):new _t(o,Dm),d=this.runWebGLProgram(f,[{dataId:n,shape:o,dtype:u}],u),h=this.read(d.dataId),this.disposeData(d.dataId),[2,h];if(a!=null)return[2,this.convertAndCacheOnCPU(n)];if(!_e().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&_e().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return p=null,u!=="complex64"&&_e().get("WEBGL_BUFFER_SUPPORTED")&&(m=this.decode(n),g=this.texData.get(m.dataId),p=(C=this.gpgpu).createBufferFromTexture.apply(C,[g.texture].concat(qd(o)))),this.pendingRead.set(n,[]),u==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:N.sent(),N.label=2;case 2:return u!=="complex64"?[3,4]:[4,Promise.all([l.real.data(),l.imag.data()])];case 3:return x=N.sent(),y=x[0],b=x[1],v=Fw(y,b),[3,5];case 4:p==null?v=this.getValuesFromTexture(n):(w=He(o),v=this.gpgpu.downloadFloat32MatrixFromBuffer(p,w)),N.label=5;case 5:return m!=null&&this.disposeData(m.dataId),_=this.convertAndCacheOnCPU(n,v),E=this.pendingRead.get(n),this.pendingRead.delete(n),E.forEach(function(D){return D(_)}),this.pendingDisposal.has(n)&&(this.pendingDisposal.delete(n),this.disposeData(n),this.pendingDeletes--),[2,_]}})})},e.prototype.checkNumericalProblems=function(n){if(n!=null)for(var r=0;r<n.length;r++){var i=n[r];if(!oNe(i))throw _e().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+i+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+i+" cannot be represented on this device.")}},e.prototype.getValuesFromTexture=function(n){var r,i=this.texData.get(n),a=i.shape,o=i.dtype,s=i.isPacked,u=He(a);if(_e().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var l=this.decode(n),c=this.texData.get(l.dataId),f=(r=this.gpgpu).downloadMatrixFromPackedTexture.apply(r,[c.texture].concat(qd(a))).subarray(0,u);return this.disposeData(l.dataId),f}var d=_e().getBool("WEBGL_PACK")&&s===!0,h=d?K1(a):a,p=d?new aDe(h):new iDe(h),m=this.runWebGLProgram(p,[{shape:h,dtype:o,dataId:n}],"float32"),g=this.texData.get(m.dataId),v=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(g.texture,g.texShape[0],g.texShape[1]).subarray(0,u);return this.disposeData(m.dataId),v},e.prototype.time=function(n){return We(this,void 0,void 0,function(){var r,i,a,o,s,u,l;return Ve(this,function(c){switch(c.label){case 0:return r=this.activeTimers,i=[],a=!1,this.programTimersStack==null?(this.programTimersStack=i,a=!0):this.activeTimers.push(i),this.activeTimers=i,n(),o=df(this.activeTimers.map(function(f){return f.query})).filter(function(f){return f!=null}),s=df(this.activeTimers.map(function(f){return f.name})).filter(function(f){return f!=null}),this.activeTimers=r,a&&(this.programTimersStack=null),u={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},_e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(o)]:[3,2];case 1:return l=c.sent(),u.kernelMs=$Ce(l),u.getExtraProfileInfo=function(){return l.map(function(f,d){return{name:s[d],ms:f}}).map(function(f){return f.name+": "+f.ms}).join(", ")},[3,3];case 2:u.kernelMs={error:"WebGL query timers are not supported in this environment."},c.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,u]}})})},e.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},e.prototype.startTimer=function(){return _e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Ua(),endMs:null}},e.prototype.endTimer=function(n){return _e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),n):(n.endMs=Ua(),n)},e.prototype.getQueryTime=function(n){return We(this,void 0,void 0,function(){var r;return Ve(this,function(i){return _e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(n)]:[2,(r=n).endMs-r.startMs]})})},e.prototype.disposeData=function(n){if(!this.pendingDisposal.has(n)){if(this.pendingRead.has(n))return this.pendingDisposal.add(n),void this.pendingDeletes++;if(this.texData.has(n)){this.releaseGPUData(n);var r=this.texData.get(n).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.texData.delete(n)}}},e.prototype.releaseGPUData=function(n){var r=this.texData.get(n),i=r.texture,a=r.dtype,o=r.texShape,s=r.usage,u=r.isPacked,l=r.slice,c=l&&l.origDataId||n,f=this.dataRefCount.get(c);f>1?this.dataRefCount.set(c,f-1):(this.dataRefCount.delete(c),i!=null&&(this.numBytesInGPU-=this.computeBytes(o,a),this.textureManager.releaseTexture(i,o,s,u)));var d=this.texData.get(n);d.texture=null,d.texShape=null,d.isPacked=!1,d.slice=null},e.prototype.getTexture=function(n){return this.uploadToGPU(n),this.texData.get(n).texture},e.prototype.getDataInfo=function(n){return this.texData.get(n)},e.prototype.getCPUBackend=function(){return _e().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=se.findBackend("cpu")),this.cpuBackend):null},e.prototype.shouldExecuteOnCPU=function(n,r){var i=this;return r===void 0&&(r=128),this.getCPUBackend()!=null&&n.every(function(a){return i.texData.get(a.dataId).texture==null&&a.size<r})},e.prototype.getGPGPUContext=function(){return this.gpgpu},e.prototype.complex=function(n,r){var i=this.makeOutput(n.shape,"complex64");return this.texData.get(i.dataId).complexTensors={real:se.keep(n.clone()),imag:se.keep(r.clone())},i},e.prototype.real=function(n){return this.texData.get(n.dataId).complexTensors.real.clone()},e.prototype.imag=function(n){return this.texData.get(n.dataId).complexTensors.imag.clone()},e.prototype.slice=function(n,r,i){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.slice(n,r,i);if(He(i)===0)return fr([],i,n.dtype);var a=this.texData.get(n.dataId).isPacked,o=T7(n.shape,r,i);if(a||!o){var s=_e().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new JDe(i):new ZDe(i),u=s.getCustomSetupFunc(r);return this.compileAndRun(s,[n],null,u)}return this.uploadToGPU(n.dataId),this.shallowSlice(n,r,i)},e.prototype.shallowSlice=function(n,r,i){var a=this.texData.get(n.dataId),o=this.makeOutput(i,n.dtype),s=this.texData.get(o.dataId);Object.assign(s,a),s.shape=i,s.dtype=n.dtype;var u=M7(r,n.strides);a.slice&&(u+=a.slice.flatOffset),s.slice={flatOffset:u,origDataId:a.slice&&a.slice.origDataId||n.dataId};var l=this.dataRefCount.get(s.slice.origDataId)||1;return this.dataRefCount.set(s.slice.origDataId,l+1),o},e.prototype.stridedSlice=function(n,r,i,a){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.stridedSlice(n,r,i,a);var o=gC(r,i,a);if(o.some(function(u){return u===0}))return fr([],o);var s=new eAe(r,a,o);return this.compileAndRun(s,[n])},e.prototype.reverse=function(n,r){var i=_e().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new YDe(n.shape,r):new KDe(n.shape,r);return this.compileAndRun(i,[n])},e.prototype.concat=function(n,r){if(n[0].dtype==="complex64"){var i=n.map(function(h){return Yi(h)}),a=n.map(function(h){return qa(h)});return lr(this.concat(i,r),this.concat(a,r))}if(this.shouldExecuteOnCPU(n))return this.cpuBackend.concat(n,r);if(n.length===1)return n[0];if(n.length>_e().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var o=Math.floor(n.length/2),s=this.concat(n.slice(0,o),r),u=this.concat(n.slice(o),r);return this.concat([s,u],r)}if(_e().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&n[0].rank>1){var l=new VSe(n.map(function(h){return h.shape}),r);return this.compileAndRun(l,n)}var c=pf(n.map(function(h){return h.shape}),r),f=n.map(function(h){return h.as2D(-1,He(h.shape.slice(r)))}),d=new WSe(f.map(function(h){return h.shape}));return this.compileAndRun(d,f).reshape(c)},e.prototype.neg=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.neg(n);if(_e().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,uR,n.dtype);var r=new _t(n.shape,uR);return this.compileAndRun(r,[n])},e.prototype.batchMatMul=function(n,r,i,a){var o=i?n.shape[2]:n.shape[1],s=a?r.shape[1]:r.shape[2],u=i?n.shape[1]:n.shape[2],l=n.shape[0];if((o===1||s===1)&&u>1e3){i&&(n=n.transpose([0,2,1])),a&&(r=r.transpose([0,2,1]));var c=s===1?n:n.as3D(l,u,1),f=s===1?2:1,d=s===1?r.as3D(l,1,u):r;return this.multiply(c,d).sum(f,!0)}var h=cr(n.dtype,r.dtype),p=new Z1(n.shape,[l,o,s],i,a);return this.compileAndRun(p,[n,r],h)},e.prototype.fusedBatchMatMul=function(n){var r=n.a,i=n.b,a=n.transposeA,o=n.transposeB,s=n.bias,u=n.activation,l=n.preluActivationWeights,c=a?r.shape[2]:r.shape[1],f=o?i.shape[1]:i.shape[2],d=r.shape[0],h=cr(r.dtype,i.dtype),p=s!=null,m=l!=null,g=u?Tm(u,!0):null,v=new Z1(r.shape,[d,c,f],a,o,p,g,m),x=[r,i];return s&&x.push(s),l&&x.push(l),this.compileAndRun(v,x,h)},e.prototype.multiply=function(n,r){if(n.dtype==="complex64"){var i=this.texData.get(n.dataId),a=this.texData.get(r.dataId),o=new X4(LSe,n.shape,r.shape),s=new X4(jSe,n.shape,r.shape),u=[this.makeComplexComponentTensorInfo(n,i.complexTensors.real),this.makeComplexComponentTensorInfo(n,i.complexTensors.imag),this.makeComplexComponentTensorInfo(r,a.complexTensors.real),this.makeComplexComponentTensorInfo(r,a.complexTensors.imag)],l=this.compileAndRun(o,u),c=this.compileAndRun(s,u),f=this.complex(l,c);return l.dispose(),c.dispose(),f}if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.multiply(n,r);if(_e().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,Q4,n.dtype);var d=new En(Q4,n.shape,r.shape);return this.compileAndRun(d,[n,r],n.dtype)},e.prototype.batchNormalization=function(n,r,i,a,o,s){var u=[n,r,i],l=null;s!=null&&(l=s.shape,u.push(s));var c=null;if(o!=null&&(c=o.shape,u.push(o)),_e().getBool("WEBGL_PACK_NORMALIZATION")){var f=new BSe(n.shape,r.shape,i.shape,l,c,a);return this.compileAndRun(f,u)}var d=new OSe(n.shape,r.shape,i.shape,l,c,a);return this.compileAndRun(d,u)},e.prototype.localResponseNormalization4D=function(n,r,i,a,o){var s=_e().getBool("WEBGL_PACK_NORMALIZATION")?new kDe(n.shape,r,i,a,o):new IDe(n.shape,r,i,a,o);return this.compileAndRun(s,[n])},e.prototype.LRNGrad=function(n,r,i,a,o,s,u){var l=new RDe(r.shape,a,o,s,u);return this.compileAndRun(l,[r,i,n])},e.prototype.tile=function(n,r){if(n.dtype==="string"){var i=this.readSync(n.dataId).map(function(o){return Og(o)});return L7(vt(n.shape,n.dtype,i),r)}var a=new nAe(n.shape,r);return this.compileAndRun(a,[n])},e.prototype.pad=function(n,r,i){var a=_e().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new $De(n.shape,r,i):new jDe(n.shape,r,i);return this.compileAndRun(a,[n])},e.prototype.transpose=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.transpose(n,r);var i=_e().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new iAe(n.shape,r):new rAe(n.shape,r);return this.compileAndRun(i,[n])},e.prototype.gather=function(n,r,i){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.gather(n,r,i);var a=new fDe(n.shape,r.size,i);return this.compileAndRun(a,[n,r])},e.prototype.batchToSpaceND=function(n,r,i){Y(n.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var a=r.reduce(function(f,d){return f*d}),o=Ug(n.shape,r,a),s=Wg(o.length,r.length),u=Vg(n.shape,r,a),l=N7(i,r.length),c=S7(u,i,r.length);return n.reshape(o).transpose(s).reshape(u).slice(l,c)},e.prototype.spaceToBatchND=function(n,r,i){Y(n.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var a=r.reduce(function(d,h){return d*h}),o=[[0,0]];o.push.apply(o,i);for(var s=1+r.length;s<n.shape.length;++s)o.push([0,0]);var u=n.pad(o),l=Ug(u.shape,r,a,!1),c=Wg(l.length,r.length,!1),f=Vg(u.shape,r,a,!1);return u.reshape(l).transpose(c).reshape(f)},e.prototype.reduce=function(n,r,i){var a=n.shape[0],o=n.shape[1],s=Y1(o),u=new zDe({windowSize:s,inSize:o,batchSize:a},r),l=this.compileAndRun(u,[n],i);return l.shape[1]===1?l:this.reduce(l,r,i)},e.prototype.argReduce=function(n,r,i){i===void 0&&(i=null);var a=n.shape[0],o=n.shape[1];i!=null&&(a=i.shape[0],o=i.shape[1]);var s=Y1(o),u=new DSe({windowSize:s,inSize:o,batchSize:a},r,i==null),l=[n];i!=null&&l.push(i);var c=this.compileAndRun(u,l,"int32");return c.shape[1]===1?c:this.argReduce(n,r,c)},e.prototype.argReducePacked=function(n,r,i){i===void 0&&(i=null);var a=i!=null?i.shape:n.shape,o=Y1(a[a.length-1]),s=new kSe(a,o,r,i==null),u=i==null?[n]:[n,i],l=this.compileAndRun(s,u,"int32");return l.rank===n.rank?this.argReducePacked(n,r,l):l},e.prototype.sum=function(n,r){wi("sum",r,n.rank);var i=Nr(n.shape,r),a=i[0],o=He(i[1]),s=n.as2D(-1,o),u=z1(n.dtype);return this.reduce(s,"sum",u).reshape(a)},e.prototype.prod=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.prod(n,r);var i=Nr(n.shape,r),a=i[0],o=He(i[1]),s=n.as2D(-1,o),u=z1(n.dtype);return this.reduce(s,"prod",u).reshape(a)},e.prototype.unsortedSegmentSum=function(n,r,i){var a=0,o=co([a],n.rank),s=n;o!=null&&(s=n.transpose(o),a=fo(1,n.rank)[0]);var u=function(h,p,m){for(var g=[],v=h.length,x=0;x<v;x++)x!==p?g.push(h[x]):g.push(m);return g}(s.shape,a,i),l=He([s.shape[a]]),c=s.as2D(-1,l),f=z1(n.dtype),d=this.segOpCompute(c,"unsortedSegmentSum",r,f,i).reshape(u);return o!=null&&(d=d.transpose(hC(o))),d},e.prototype.segOpCompute=function(n,r,i,a,o){var s=n.shape[0],u=n.shape[1],l=function(d,h){var p,m=!1;for(d<=A7?(p=d,m=!0):p=Nw(d,Math.floor(Math.sqrt(d)));!m;)p>h||p===d?m=!0:p=Nw(d,p+1);return p}(u,o),c=new XDe({windowSize:l,inSize:u,batchSize:s,numSegments:o}),f=this.compileAndRun(c,[n,i],a);return f.shape[1]===o?f:(i=zg(0,o).tile([u/l]),this.segOpCompute(f,r,i,a,o))},e.prototype.argMinMaxReduce=function(n,r,i){var a=[r];if(wi("arg"+i.charAt(0).toUpperCase()+i.slice(1),a,n.rank),!_e().getBool("WEBGL_PACK_REDUCE")||n.rank<=2){var o=Nr(n.shape,a),s=o[0],u=He(o[1]),l=n.as2D(-1,u);return this.argReduce(l,i).reshape(s)}return this.argReducePacked(n,i)},e.prototype.argMin=function(n,r){return this.argMinMaxReduce(n,r,"min")},e.prototype.argMax=function(n,r){return this.argMinMaxReduce(n,r,"max")},e.prototype.cumsum=function(n,r,i,a){if(r!==n.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(n.rank-1)+" but got axis="+r);var o=new JSe(n.shape,i,a);return this.compileAndRun(o,[n])},e.prototype.equal=function(n,r){if(_e().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(equal(a, b));
`,"bool");var i=new En("return float(a == b);",n.shape,r.shape);return this.compileAndRun(i,[n,r],"bool")},e.prototype.notEqual=function(n,r){if(_e().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(notEqual(a, b));
`,"bool");var i=new En("return float(a != b);",n.shape,r.shape);return this.compileAndRun(i,[n,r],"bool")},e.prototype.less=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.less(n,r);if(_e().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(lessThan(a, b));
`,"bool");var i=new En("return float(a < b);",n.shape,r.shape);return this.compileAndRun(i,[n,r],"bool")},e.prototype.lessEqual=function(n,r){if(_e().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(lessThanEqual(a, b));
`,"bool");var i=new En("return float(a <= b);",n.shape,r.shape);return this.compileAndRun(i,[n,r],"bool")},e.prototype.greater=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.greater(n,r);if(_e().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(greaterThan(a, b));
`,"bool");var i=new En("return float(a > b);",n.shape,r.shape);return this.compileAndRun(i,[n,r],"bool")},e.prototype.greaterEqual=function(n,r){if(_e().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(greaterThanEqual(a, b));
`,"bool");var i=new En("return float(a >= b);",n.shape,r.shape);return this.compileAndRun(i,[n,r],"bool")},e.prototype.logicalNot=function(n){var r=new _t(n.shape,"return float(!(x >= 1.0));");return this.compileAndRun(r,[n])},e.prototype.logicalAnd=function(n,r){if(_e().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,"bool");var i=new En("return float(a >= 1.0 && b >= 1.0);",n.shape,r.shape);return this.compileAndRun(i,[n,r],"bool")},e.prototype.logicalOr=function(n,r){if(_e().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,"bool");var i=new En("return float(a >= 1.0 || b >= 1.0);",n.shape,r.shape);return this.compileAndRun(i,[n,r],"bool")},e.prototype.select=function(n,r,i){var a=new QDe(n.rank,r.shape,r.rank);return this.compileAndRun(a,[n,r,i],cr(r.dtype,i.dtype))},e.prototype.where=function(n){jg("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var r=n.dataSync();return wC(n.shape,r)},e.prototype.topk=function(n,r,i){return j7(n.dataSync(),n.shape,n.dtype,r)},e.prototype.min=function(n,r){wi("min",r,n.rank);var i=Nr(n.shape,r),a=i[0],o=He(i[1]),s=n.as2D(-1,o);return this.reduce(s,"min",s.dtype).reshape(a)},e.prototype.minimum=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.minimum(n,r);var i=_e().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new go(`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new En(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return min(a, b);
`,n.shape,r.shape);return this.compileAndRun(i,[n,r])},e.prototype.mod=function(n,r){var i=_e().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new go(`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new En(`if (b == 0.0) return NAN;
  return mod(a, b);`,n.shape,r.shape);return this.compileAndRun(i,[n,r])},e.prototype.max=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.max(n,r);wi("max",r,n.rank);var i=Nr(n.shape,r),a=i[0],o=He(i[1]),s=n.as2D(-1,o);return this.reduce(s,"max",s.dtype).reshape(a)},e.prototype.maximum=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.maximum(n,r);var i=_e().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new go(`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new En(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return max(a, b);
`,n.shape,r.shape);return this.compileAndRun(i,[n,r])},e.prototype.all=function(n,r){wi("all",r,n.rank);var i=Nr(n.shape,r),a=i[0],o=He(i[1]),s=n.as2D(-1,o);return this.reduce(s,"all",s.dtype).reshape(a)},e.prototype.any=function(n,r){wi("any",r,n.rank);var i=Nr(n.shape,r),a=i[0],o=He(i[1]),s=n.as2D(-1,o);return this.reduce(s,"any",s.dtype).reshape(a)},e.prototype.realDivide=function(n,r){if(_e().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,"float32",!0);var i=new En(`
if (a == b) {
  return 1.0;
};
return a / b;`,n.shape,r.shape);return this.compileAndRun(i,[n,r],"float32")},e.prototype.floorDiv=function(n,r){if(_e().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,"int32");var i=new En(`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,n.shape,r.shape);return this.compileAndRun(i,[n,r],"int32")},e.prototype.add=function(n,r){if(n.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(n,r,X1);if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.add(n,r);var i=cr(n.dtype,r.dtype);if(_e().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,X1,i);var a=new En(X1,n.shape,r.shape);return this.compileAndRun(a,[n,r],i)},e.prototype.packedUnaryOp=function(n,r,i){var a=new hd(n.shape,r);return this.compileAndRun(a,[n],i)},e.prototype.packedBinaryOp=function(n,r,i,a,o){o===void 0&&(o=!1);var s=new go(i,n.shape,r.shape,o);return this.compileAndRun(s,[n,r],a)},e.prototype.complexSeparableBinaryOp=function(n,r,i){var a=this,o=this.texData.get(n.dataId),s=this.texData.get(r.dataId),u=[[o.complexTensors.real,s.complexTensors.real],[o.complexTensors.imag,s.complexTensors.imag]].map(function(d){var h=d[0],p=d[1],m=a.makeComplexComponentTensorInfo(n,h),g=a.makeComplexComponentTensorInfo(r,p),v=new En(i,n.shape,r.shape);return a.compileAndRun(v,[m,g],cr(h.dtype,p.dtype))}),l=u[0],c=u[1],f=this.complex(l,c);return l.dispose(),c.dispose(),f},e.prototype.makeComplexComponentTensorInfo=function(n,r){return{dataId:r.dataId,dtype:r.dtype,shape:n.shape}},e.prototype.addN=function(n){if(n.length===1)return n[0];if(n.length>_e().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var r=Math.floor(n.length/2),i=this.addN(n.slice(0,r)),a=this.addN(n.slice(r));return this.addN([i,a])}var o=n.map(function(l){return l.dtype}).reduce(function(l,c){return cr(l,c)}),s=n.map(function(l){return l.shape}),u=_e().getBool("WEBGL_PACK")?new SSe(n[0].shape,s):new NSe(n[0].shape,s);return this.compileAndRun(u,n,o)},e.prototype.subtract=function(n,r){if(n.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(n,r,Q1);if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.subtract(n,r);var i=cr(n.dtype,r.dtype);if(_e().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,Q1,n.dtype);var a=new En(Q1,n.shape,r.shape);return this.compileAndRun(a,[n,r],i)},e.prototype.pow=function(n,r){var i=_e().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new go(`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new En(`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
if (b == 0.0) {
  return 1.0;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,n.shape,r.shape),a=cr(n.dtype,r.dtype);return this.compileAndRun(i,[n,r],a)},e.prototype.ceil=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.ceil(n);if(_e().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,lR,n.dtype);var r=new _t(n.shape,lR);return this.compileAndRun(r,[n])},e.prototype.floor=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.floor(n);if(_e().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,cR,n.dtype);var r=new _t(n.shape,cR);return this.compileAndRun(r,[n])},e.prototype.sign=function(n){var r=new _t(n.shape,`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`);return this.compileAndRun(r,[n])},e.prototype.isNaN=function(n){var r=new _t(n.shape,"return float(isnan(x));");return this.compileAndRun(r,[n],"bool")},e.prototype.isInf=function(n){var r=new _t(n.shape,"return float(isinf(x));");return this.compileAndRun(r,[n],"bool")},e.prototype.isFinite=function(n){var r=new _t(n.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(r,[n],"bool")},e.prototype.round=function(n){var r=new _t(n.shape,`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`);return this.compileAndRun(r,[n])},e.prototype.exp=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.exp(n);if(_e().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,fR,n.dtype);var r=new _t(n.shape,fR);return this.compileAndRun(r,[n])},e.prototype.expm1=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.expm1(n);if(_e().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,dR,n.dtype);var r=new _t(n.shape,dR);return this.compileAndRun(r,[n])},e.prototype.softmax=function(n,r){var i=Yn([r],n.shape),a=this.max(n,i),o=yi(a.shape,i),s=this.subtract(n,a.reshape(o)),u=this.exp(s),l=this.sum(u,i).reshape(o);return this.realDivide(u,l)},e.prototype.log=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.log(n);if(_e().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,n.dtype);var r=new _t(n.shape,`if (x < 0.0) return NAN;
  return log(x);`);return this.compileAndRun(r,[n])},e.prototype.log1p=function(n){var r=new _t(n.shape,"return log(1.0 + x);");return this.compileAndRun(r,[n])},e.prototype.sqrt=function(n){var r=new _t(n.shape,"return sqrt(x);");return this.compileAndRun(r,[n])},e.prototype.rsqrt=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.rsqrt(n);var r=new _t(n.shape,"return inversesqrt(x);");return this.compileAndRun(r,[n])},e.prototype.reciprocal=function(n){var r=new _t(n.shape,"return 1.0 / x;");return this.compileAndRun(r,[n])},e.prototype.relu=function(n){var r;return r=_e().getBool("WEBGL_PACK")?new hd(n.shape,K7):new _t(n.shape,q7),this.compileAndRun(r,[n])},e.prototype.relu6=function(n){var r;return r=_e().getBool("WEBGL_PACK")?new hd(n.shape,Y7):new _t(n.shape,H7),this.compileAndRun(r,[n])},e.prototype.prelu=function(n,r){var i=_e().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new go(V7,n.shape,r.shape):new En(W7,n.shape,r.shape);return this.compileAndRun(i,[n,r])},e.prototype.elu=function(n){if(_e().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,X7,n.dtype);var r=new _t(n.shape,G7);return this.compileAndRun(r,[n])},e.prototype.eluDer=function(n,r){var i=_e().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new go(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,n.shape,r.shape):new En("return (b >= 1.0) ? a : a * (b + 1.0);",n.shape,r.shape);return this.compileAndRun(i,[n,r])},e.prototype.selu=function(n){var r=new _t(n.shape,oAe);return this.compileAndRun(r,[n])},e.prototype.int=function(n){var r=new _t(n.shape,"return float(int(x));");return this.compileAndRun(r,[n],"int32")},e.prototype.clip=function(n,r,i){var a,o=(a=_e().getBool("WEBGL_PACK_CLIP")?new zSe(n.shape):new $Se(n.shape)).getCustomSetupFunc(r,i);return this.compileAndRun(a,[n],null,o)},e.prototype.abs=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.abs(n);if(_e().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,sR,n.dtype);var r=new _t(n.shape,sR);return this.compileAndRun(r,[n])},e.prototype.complexAbs=function(n){var r=this.texData.get(n.dataId),i=new USe(n.shape),a=[this.makeComplexComponentTensorInfo(n,r.complexTensors.real),this.makeComplexComponentTensorInfo(n,r.complexTensors.imag)];return this.compileAndRun(i,a)},e.prototype.sigmoid=function(n){var r=new _t(n.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(r,[n])},e.prototype.softplus=function(n){var r=new _t(n.shape,`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`);return this.compileAndRun(r,[n])},e.prototype.sin=function(n){var r=new _t(n.shape,sAe);return this.compileAndRun(r,[n])},e.prototype.cos=function(n){var r=new _t(n.shape,uAe);return this.compileAndRun(r,[n])},e.prototype.tan=function(n){var r=new _t(n.shape,"return tan(x);");return this.compileAndRun(r,[n])},e.prototype.asin=function(n){var r=new _t(n.shape,lAe);return this.compileAndRun(r,[n])},e.prototype.acos=function(n){var r=new _t(n.shape,cAe);return this.compileAndRun(r,[n])},e.prototype.atan=function(n){var r=new _t(n.shape,fAe);return this.compileAndRun(r,[n])},e.prototype.atan2=function(n,r){var i=_e().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new go(`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new En(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return atan(a, b);
`,n.shape,r.shape);return this.compileAndRun(i,[n,r])},e.prototype.sinh=function(n){var r=new _t(n.shape,`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[n])},e.prototype.cosh=function(n){var r=new _t(n.shape,`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[n])},e.prototype.tanh=function(n){var r=new _t(n.shape,`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`);return this.compileAndRun(r,[n])},e.prototype.asinh=function(n){var r=new _t(n.shape,dAe);return this.compileAndRun(r,[n])},e.prototype.acosh=function(n){var r=new _t(n.shape,hAe);return this.compileAndRun(r,[n])},e.prototype.atanh=function(n){var r=new _t(n.shape,pAe);return this.compileAndRun(r,[n])},e.prototype.erf=function(n){var r=new _t(n.shape,`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = 0.3275911;
  float a1 = 0.254829592;
  float a2 = -0.284496736;
  float a3 = 1.421413741;
  float a4 = -1.453152027;
  float a5 = 1.061405429;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`);return this.compileAndRun(r,[n])},e.prototype.step=function(n,r){var i=new _t(n.shape,function(a){return a===void 0&&(a=0),Ba+`
    return x > 0.0 ? 1.0 : float(`+a+`);
  `}(r));return this.compileAndRun(i,[n])},e.prototype.conv2dByMatMul=function(n,r,i,a,o,s){var u=n.shape,l=this.texData.get(n.dataId),c=i.inChannels,f=u[0]*u[1]*u[2],d=i.outChannels,h=i.dataFormat==="channelsLast",p=(f===1||d===1)&&c>1e3,m=u[2]%2!=0&&!!l.isPacked;if(p||!_e().getBool("WEBGL_LAZILY_UNPACK")||!_e().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!m){var g=h?u[0]*u[1]*u[2]:u[0]*u[2]*u[3],v=this.reshape(n,[1,g,i.inChannels]),x=this.reshape(r,[1,i.inChannels,i.outChannels]);return this.reshape(this.fusedBatchMatMul({a:v,b:x,transposeA:!1,transposeB:!1,bias:a,activation:o,preluActivationWeights:s}),i.outShape)}var y=h?u[0]*u[1]*(u[2]+1):u[0]*u[2]*(u[3]+1),b={dataId:n.dataId,shape:[1,y,i.inChannels],dtype:n.dtype},w=l.shape;l.shape=l.shape.slice(),l.shape[l.shape.length-2]++,Y(Nm(l.shape,b.shape),function(){return"packed reshape "+l.shape+" to "+b.shape+" isn't free"});var _=this.reshape(r,[1,i.inChannels,i.outChannels]),E=this.fusedBatchMatMul({a:b,b:_,transposeA:!1,transposeB:!1,bias:a,activation:o,preluActivationWeights:s}),C=this.texData.get(E.dataId);return Y(C.isPacked,function(){return"batchMatMul result is expected to be packed"}),l.shape=w,C.shape=i.outShape,se.makeTensorFromDataId(E.dataId,i.outShape,E.dtype)},e.prototype.conv2dWithIm2Row=function(n,r,i,a,o,s){var u=i.filterWidth,l=i.filterHeight,c=i.inChannels,f=i.outWidth,d=i.outHeight,h=i.dataFormat==="channelsLast",p=u*l*c,m=d*f,g=[p,m],v=n.squeeze([0]),x=r.reshape([1,p,-1]),y=new MDe(g,v.shape,i),b=this.compileAndRun(y,[v]).reshape([1,g[0],g[1]]),w=a!=null,_=s!=null,E=o?Tm(o,!0):null,C=new Z1(b.shape,[1,m,i.outChannels],!0,!1,w,E,_),N=[b,x];a&&N.push(a),_&&N.push(s);var D=this.compileAndRun(C,N);return h?D.reshape([1,d,f,i.outChannels]):D.reshape([1,i.outChannels,d,f])},e.prototype.fusedConv2d=function(n){var r=n.input,i=n.filter,a=n.convInfo,o=n.bias,s=n.activation,u=n.preluActivationWeights;if(a.filterHeight===1&&a.filterWidth===1&&a.dilationHeight===1&&a.dilationWidth===1&&a.strideHeight===1&&a.strideWidth===1&&(a.padInfo.type==="SAME"||a.padInfo.type==="VALID"))return this.conv2dByMatMul(r,i,a,o,s,u);if(_e().getBool("WEBGL_CONV_IM2COL")&&r.shape[0]===1)return this.conv2dWithIm2Row(r,i,a,o,s,u);var l=o!=null,c=u!=null,f=s?Tm(s,!1):null,d=new Z4(a,l,f,c),h=[r,i];return o&&h.push(o),u&&h.push(u),this.compileAndRun(d,h)},e.prototype.conv2d=function(n,r,i){if(i.filterHeight===1&&i.filterWidth===1&&i.dilationHeight===1&&i.dilationWidth===1&&i.strideHeight===1&&i.strideWidth===1&&(i.padInfo.type==="SAME"||i.padInfo.type==="VALID"))return this.conv2dByMatMul(n,r,i);if(_e().getBool("WEBGL_CONV_IM2COL")&&n.shape[0]===1)return this.conv2dWithIm2Row(n,r,i);var a=new Z4(i);return this.compileAndRun(a,[n,r])},e.prototype.conv2dDerInput=function(n,r,i){var a=new HSe(i);return this.compileAndRun(a,[n,r])},e.prototype.conv2dDerFilter=function(n,r,i){var a=new qSe(i);return this.compileAndRun(a,[n,r])},e.prototype.fusedDepthwiseConv2D=function(n){var r,i=n.input,a=n.filter,o=n.convInfo,s=n.bias,u=n.activation,l=n.preluActivationWeights,c=_e().getBool("WEBGL_PACK_DEPTHWISECONV")&&o.strideWidth<=2&&o.outChannels/o.inChannels==1,f=u?Tm(u,c):null,d=[i,a],h=s!=null,p=l!=null;return h&&d.push(s),p&&d.push(l),c?(r=new eR(o,h,f,p),this.compileAndRun(r,d)):(r=new J4(o,h,f,p),this.compileAndRun(r,d))},e.prototype.depthwiseConv2D=function(n,r,i){var a;return _e().getBool("WEBGL_PACK_DEPTHWISECONV")&&i.strideWidth<=2&&i.outChannels/i.inChannels==1?(a=new eR(i),this.compileAndRun(a,[n,r])):(a=new J4(i),this.compileAndRun(a,[n,r]))},e.prototype.depthwiseConv2DDerInput=function(n,r,i){var a=new XSe(i);return this.compileAndRun(a,[n,r])},e.prototype.depthwiseConv2DDerFilter=function(n,r,i){var a=new YSe(i);return this.compileAndRun(a,[n,r])},e.prototype.conv3d=function(n,r,i){var a=new QSe(i);return this.compileAndRun(a,[n,r])},e.prototype.conv3dDerInput=function(n,r,i){var a=new KSe(i);return this.compileAndRun(a,[n,r])},e.prototype.conv3dDerFilter=function(n,r,i){var a=new GSe(i);return this.compileAndRun(a,[n,r])},e.prototype.maxPool=function(n,r){var i=new J1(r,"max",!1);return this.compileAndRun(i,[n])},e.prototype.avgPool=function(n,r){var i=new J1(r,"avg",!1);return this.compileAndRun(i,[n],"float32")},e.prototype.maxPoolBackprop=function(n,r,i,a){var o=new J1(a,"max",!0),s=this.compileAndRun(o,[r]),u=new FDe(a),l=this.compileAndRun(u,[n,s],r.dtype);return s.dispose(),l},e.prototype.avgPoolBackprop=function(n,r,i){var a=new FSe(i);return this.compileAndRun(a,[n],r.dtype)},e.prototype.cast=function(n,r){return F7(n,r,this)},e.prototype.unstack=function(n,r){for(var i=n.shape[r],a=new Array(n.rank-1),o=0,s=0;s<n.rank;s++)s!==r&&(a[o++]=n.shape[s]);var u=new Array(n.rank).fill(0),l=n.shape.slice();l[r]=1;var c=new Array(i);for(s=0;s<c.length;s++)u[r]=s,c[s]=this.slice(n,u,l).reshape(a);return c},e.prototype.avgPool3d=function(n,r){var i=new ex(r,"avg",!1);return this.compileAndRun(i,[n],"float32")},e.prototype.avgPool3dBackprop=function(n,r,i){var a=new PSe(i);return this.compileAndRun(a,[n],r.dtype)},e.prototype.maxPool3d=function(n,r){var i=new ex(r,"max",!1);return this.compileAndRun(i,[n],"float32")},e.prototype.maxPool3dBackprop=function(n,r,i,a){var o=new ex(a,"max",!0),s=this.compileAndRun(o,[r]),u=new PDe(a),l=this.compileAndRun(u,[n,s],r.dtype);return s.dispose(),l},e.prototype.reshape=function(n,r){var i=this.texData.get(n.dataId);if(i.isPacked&&!Nm(n.shape,r)&&(i.texture===null||!Nm(i.shape,r))){var a=this.packedReshape(n,r);return se.makeTensorFromDataId(a.dataId,a.shape,a.dtype)}return kw(n,r)},e.prototype.resizeBilinear=function(n,r,i,a){var o=_e().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new qDe(n.shape,r,i,a):new VDe(n.shape,r,i,a);return this.compileAndRun(o,[n],"float32")},e.prototype.resizeBilinearBackprop=function(n,r,i){var a=new WDe(n,r,i);return this.compileAndRun(a,[n])},e.prototype.resizeNearestNeighbor=function(n,r,i,a){var o=new GDe(n.shape,r,i,a);return this.compileAndRun(o,[n])},e.prototype.resizeNearestNeighborBackprop=function(n,r,i){var a=new HDe(n,r,i);return this.compileAndRun(a,[n])},e.prototype.multinomial=function(n,r,i,a){var o=r?n:Jo(n),s=o.shape[0],u=o.shape[1],l=new ODe(s,u,i),c=l.getCustomSetupFunc(a);return this.compileAndRun(l,[o],"int32",c)},e.prototype.oneHot=function(n,r,i,a){var o=new BDe(n.size,r,i,a);return this.compileAndRun(o,[n])},e.prototype.diag=function(n){var r=new rDe(n.size);return this.compileAndRun(r,[n])},e.prototype.nonMaxSuppression=function(n,r,i,a,o){return jg("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),xC(n.dataSync(),r.dataSync(),i,a,o)},e.prototype.cropAndResize=function(n,r,i,a,o,s){var u=new ZSe(n.shape,r.shape,a,o,s);return this.compileAndRun(u,[n,r,i],"float32")},e.prototype.depthToSpace=function(n,r,i){Y(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});var a=n.shape[0],o=i==="NHWC"?n.shape[1]:n.shape[2],s=i==="NHWC"?n.shape[2]:n.shape[3],u=i==="NHWC"?n.shape[3]:n.shape[1],l=o*r,c=s*r,f=u/(r*r),d=new nDe(i==="NHWC"?[a,l,c,f]:[a,f,l,c],r,i);return this.compileAndRun(d,[n])},e.prototype.split=function(n,r,i){return B7(n,r,i)},e.prototype.scatterND=function(n,r,i){var a=qg(0,n,i),o=a.sliceRank,s=a.numUpdates,u=a.sliceSize,l=a.strides,c=a.outputSize,f=[c/u,u],d=n.reshape([s,o]),h=r.reshape([s,u]);if(c===0)return kw(fr([]),i);var p=je(0),m=new iR(s,o,d.rank,h.rank,l,f);return this.compileAndRun(m,[h,d,p]).reshape(i)},e.prototype.sparseToDense=function(n,r,i,a){var o=qg(0,n,i),s=o.sliceRank,u=o.numUpdates,l=o.strides,c=o.outputSize,f=new iR(u,s,n.rank,r.rank,l,[c,1]);return this.compileAndRun(f,[r,n,a]).reshape(i)},e.prototype.fft=function(n){return this.fftImpl(n,!1)},e.prototype.ifft=function(n){return this.fftImpl(n,!0)},e.prototype.fftImpl=function(n,r){var i=this.texData.get(n.dataId),a=new nR(uDe,n.shape,r),o=new nR(lDe,n.shape,r),s=[this.makeComplexComponentTensorInfo(n,i.complexTensors.real),this.makeComplexComponentTensorInfo(n,i.complexTensors.imag)],u=this.compileAndRun(a,s),l=this.compileAndRun(o,s),c=this.complex(u,l).as2D(n.shape[0],n.shape[1]);return u.dispose(),l.dispose(),c},e.prototype.gatherND=function(n,r){var i=r.shape,a=i[i.length-1],o=D7(n,r),s=o[0],u=o[1],l=o[2],c=o[3],f=r.reshape([u,a]),d=n.reshape([n.size/l,l]),h=new dDe(a,c,[u,l]);return this.compileAndRun(h,[d,f]).reshape(s)},e.prototype.fill=function(n,r,i){if((i=i||wp(r))==="string"){var a=Pg(i,He(n));return a.fill(r),se.makeTensor(a,n,i,this)}var o=new cDe(n,r),s=o.getCustomSetupFunc(r);return this.compileAndRun(o,[],i,s)},e.prototype.onesLike=function(n){if(n.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(n.shape,1,n.dtype)},e.prototype.zerosLike=function(n){return this.fill(n.shape,n.dtype==="string"?"":0,n.dtype)},e.prototype.linspace=function(n,r,i){return P7(n,r,i)},e.prototype.makeTensorInfo=function(n,r){var i=this.write(null,n,r);return this.texData.get(i).usage=null,{dataId:i,shape:n,dtype:r}},e.prototype.makeOutput=function(n,r){var i=this.makeTensorInfo(n,r).dataId;return se.makeTensorFromDataId(i,n,r,this)},e.prototype.unpackTensor=function(n){var r=new vAe(n.shape);return this.runWebGLProgram(r,[n],n.dtype)},e.prototype.packTensor=function(n){var r=new LDe(n.shape);return this.runWebGLProgram(r,[n],n.dtype,null,!0)},e.prototype.packedReshape=function(n,r){var i=[Bg(n.shape)].concat(Lg(n.shape)),a={dtype:n.dtype,shape:i,dataId:n.dataId},o=[Bg(r)].concat(Lg(r)),s=new UDe(o,i),u=this.runWebGLProgram(s,[a],n.dtype,null,!0);return{dataId:u.dataId,shape:r,dtype:u.dtype}},e.prototype.decode=function(n){var r,i=this.texData.get(n),a=i.isPacked,o=i.shape,s=i.dtype,u=K1(o);return r=a?new tDe(u):new eDe(u),{dtype:s,shape:o,dataId:this.runWebGLProgram(r,[{shape:u,dtype:s,dataId:n}],s,null,!0).dataId}},e.prototype.runWebGLProgram=function(n,r,i,a,o){var s=this;o===void 0&&(o=!1);var u=this.makeTensorInfo(n.outputShape,i),l=this.texData.get(u.dataId);if(n.packedOutput&&(l.isPacked=!0),n.outPackingScheme===jh.DENSE){var c=qd(n.outputShape);l.texShape=c.map(function(y){return 2*y})}if(n.outTexUsage!=null&&(l.usage=n.outTexUsage),He(u.shape)===0)return l.values=Bh(u.dtype,0),u;var f=[],d=r.map(function(y){if(y.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var b=s.texData.get(y.dataId);if(b.texture==null){if(!n.packedInputs&&He(y.shape)<=_e().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:y.shape,texData:null,isUniform:!0,uniformValues:b.values};n.packedInputs&&(b.isPacked=!0,b.shape=y.shape)}else if(!!b.isPacked!=!!n.packedInputs)y=b.isPacked?s.unpackTensor(y):s.packTensor(y),f.push(y),b=s.texData.get(y.dataId);else if(b.isPacked&&!Nm(b.shape,y.shape)){var w=y,_=y.shape;y.shape=b.shape,y=s.packedReshape(y,_),f.push(y),b=s.texData.get(y.dataId),w.shape=_}return s.uploadToGPU(y.dataId),{shape:y.shape,texData:b,isUniform:!1}});this.uploadToGPU(u.dataId);var h,p={shape:u.shape,texData:l,isUniform:!1},m=function(y,b,w){var _="";b.concat(w).forEach(function(N){var D=N.texData!=null&&N.texData.slice!=null&&N.texData.slice.flatOffset>0,A=N.isUniform?"uniform":N.texData.texShape;_+=N.shape+"_"+A+"_"+D});var E=y.userCode,C=y.constructor.name;return C+="_"+_+"_"+E}(n,d,p),g=this.getAndSaveBinary(m,function(){return function(y,b,w,_){var E=b.userCode,C=w.map(function(B,R){var j={logicalShape:B.shape,texShape:B.isUniform?null:B.texData.texShape,isUniform:B.isUniform,isPacked:!B.isUniform&&B.texData.isPacked,flatOffset:null};return B.texData!=null&&B.texData.slice!=null&&B.texData.slice.flatOffset>0&&(j.flatOffset=B.texData.slice.flatOffset),{name:b.variableNames[R],shapeInfo:j}}),N=C.map(function(B){return B.shapeInfo}),D={logicalShape:_.shape,texShape:_.texData.texShape,isUniform:!1,isPacked:_.texData.isPacked,flatOffset:null},A=ASe(C,D,E,b.packedInputs),T=y.createProgram(A),k=null,F=y.getUniformLocation(T,"NAN",!1);_e().getNumber("WEBGL_VERSION")===1&&(k=y.getUniformLocation(T,"INFINITY",!1));for(var O={},I=0;I<b.variableNames.length;I++){var M=b.variableNames[I];O[M]=y.getUniformLocation(T,M,!1),O["offset"+M]=y.getUniformLocation(T,"offset"+M,!1)}return{program:b,source:A,webGLProgram:T,uniformLocations:O,inShapeInfos:N,outShapeInfo:D,infLoc:k,nanLoc:F}}(s.gpgpu,n,d,p)}),v=this.activeTimers!=null;if(v&&(h=this.startTimer()),function(y,b,w,_,E){rR(b.inShapeInfos,w),rR([b.outShapeInfo],[_]);var C=_.texData.texture,N=_.texData.texShape;_.texData.isPacked?y.setOutputPackedMatrixTexture(C,N[0],N[1]):y.setOutputMatrixTexture(C,N[0],N[1]),y.setProgram(b.webGLProgram),_e().getNumber("WEBGL_VERSION")===1&&b.infLoc!==null&&y.gl.uniform1f(b.infLoc,1/0),b.nanLoc!==null&&y.gl.uniform1f(b.nanLoc,NaN),w.forEach(function(D,A){var T=b.program.variableNames[A],k=b.uniformLocations[T],F=b.uniformLocations["offset"+T];if(k!=null)if(D.isUniform)if(He(D.shape)<2)y.gl.uniform1f(k,D.uniformValues[0]);else{var O=D.uniformValues;O instanceof Float32Array||(O=new Float32Array(O)),y.gl.uniform1fv(k,O)}else D.texData.slice!=null&&F!=null&&y.gl.uniform1i(F,D.texData.slice.flatOffset),y.setInputMatrixTexture(D.texData.texture,k,A)}),E!=null&&E(y,b.webGLProgram),y.executeProgram()}(this.gpgpu,g,d,p,a),f.forEach(function(y){return s.disposeData(y.dataId)}),v&&(h=this.endTimer(h),this.activeTimers.push({name:n.constructor.name,query:this.getQueryTime(h)})),!_e().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&o===!1){var x=this.unpackTensor(u);return this.disposeData(u.dataId),x}return u},e.prototype.compileAndRun=function(n,r,i,a,o){o===void 0&&(o=!1),i=i||r[0].dtype;var s=this.runWebGLProgram(n,r,i,a,o);return se.makeTensorFromDataId(s.dataId,s.shape,s.dtype)},e.prototype.getAndSaveBinary=function(n,r){return n in this.binaryCache||(this.binaryCache[n]=r()),this.binaryCache[n]},e.prototype.getTextureManager=function(){return this.textureManager},e.prototype.dispose=function(){var n=this;this.disposed||(_e().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(function(r){n.gpgpu.deleteProgram(n.binaryCache[r].webGLProgram),delete n.binaryCache[r]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},e.prototype.floatPrecision=function(){var n=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=$e(function(){if(!_e().get("WEBGL_RENDER_FLOAT32_ENABLED")){var r=_e().getBool("DEBUG");_e().set("DEBUG",!1);var i=n.abs(je(1e-8)).dataSync()[0];if(_e().set("DEBUG",r),i>0)return 32}return 16})),this.floatPrecisionValue},e.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},e.prototype.uploadToGPU=function(n){var r,i=this.texData.get(n),a=i.shape,o=i.dtype,s=i.values,u=i.texture,l=i.usage,c=i.isPacked;if(u==null){var f,d=this.activeTimers!=null;d&&(f=Ua());var h=i.texShape;if(h==null&&(h=CNe(a,c),i.texShape=h),s!=null){var p=K1(a),m=void 0,g=h[1],v=h[0],x=s instanceof Uint8Array;c?(g=(r=Ep(h[0],h[1]))[0],v=r[1],m=new sDe(p,[v,g],x)):m=new oDe(p,[v,g],x);var y=this.makeTensorInfo([v,g],o);this.texData.get(y.dataId).usage=x?Si.PIXELS:Si.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(y.dataId),g,v,s);var b=this.runWebGLProgram(m,[y],o,null,!0),w=this.texData.get(b.dataId);i.texture=w.texture,i.texShape=w.texShape,i.isPacked=w.isPacked,i.usage=w.usage,this.disposeData(y.dataId),this.texData.delete(b.dataId),i.values=null,d&&(this.uploadWaitMs+=Ua()-f)}else{var _=this.acquireTexture(h,l,o,c);i.texture=_}}},e.prototype.convertAndCacheOnCPU=function(n,r){var i=this.texData.get(n),a=i.dtype;return this.releaseGPUData(n),r!=null&&(i.values=function(o,s){if(s==="float32"||s==="complex64")return o;if(s==="int32"||s==="bool"){for(var u=s==="int32"?new Int32Array(o.length):new Uint8Array(o.length),l=0;l<u.length;++l)u[l]=Math.round(o[l]);return u}throw new Error("Unknown dtype "+s)}(r,a)),i.values},e.prototype.acquireTexture=function(n,r,i,a){if(this.numBytesInGPU+=this.computeBytes(n,i),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var o=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+o+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(n,r,a)},e.prototype.computeBytes=function(n,r){return n[0]*n[1]*l7(r)},e}(R7);v7()&&se.registerBackend("webgl",function(){return new yAe},2);var xAe=ae({square_:function(t){var e=W(t,"x","square"),n=[e];return se.runKernelFunc(function(r,i){return i([e]),r.square(e)},{x:e},null,"Square",{},n,[])}}),zh="SquaredDifference",Q7=ae({squaredDifference_:function(t,e){var n,r=W(t,"a","squaredDifference"),i=W(e,"b","squaredDifference");n=_n(r,i),r=n[0],i=n[1],Mt(r.shape,i.shape);var a={a:r,b:i},o=[r,i];return se.runKernelFunc(function(s,u){var l=s.squaredDifference(r,i);return u([r,i]),l},a,function(s,u){var l=u[0],c=u[1],f=je(2);return{a:function(){return s.mul(l.sub(c).mul(f))},b:function(){return s.mul(c.sub(l).mul(f))}}},zh,{},o,[])}}),bAe=ae({abs_:function(t){var e=W(t,"x","abs");return e.dtype==="complex64"?se.runKernelFunc(function(n){return n.complexAbs(e)},{$x:e}):se.runKernelFunc(function(n,r){var i=n.abs(e);return r([e]),i},{x:e},function(n,r){var i=r[0];return{x:function(){return n.mul(i.toFloat().step(-1))}}},"Abs")}}),wAe=ae({acos_:function(t){var e=W(t,"x","acos");return se.runKernelFunc(function(n,r){var i=n.acos(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.divStrict(je(1).sub(i.toFloat().square()).sqrt()).neg()}}})}}),_Ae=ae({acosh_:function(t){var e=W(t,"x","acosh");return se.runKernelFunc(function(n,r){var i=n.acosh(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.divStrict(i.toFloat().square().sub(1).sqrt())}}})}}),EAe=ae({asin_:function(t){var e=W(t,"x","asin");return se.runKernelFunc(function(n,r){var i=n.asin(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.divStrict(je(1).sub(i.toFloat().square()).sqrt())}}})}}),CAe=ae({asinh_:function(t){var e=W(t,"x","asinh");return se.runKernelFunc(function(n,r){var i=n.asinh(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.divStrict(je(1).add(i.toFloat().square()).sqrt())}}})}}),NAe=ae({atan_:function(t){var e=W(t,"x","atan");return se.runKernelFunc(function(n,r){var i=n.atan(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.div(i.toFloat().square().add(1))}}})}}),SAe=ae({atanh_:function(t){var e=W(t,"x","atanh");return se.runKernelFunc(function(n,r){var i=n.atanh(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.div(je(1).sub(i.toFloat().square()))}}})}}),DAe=ae({ceil_:function(t){var e=W(t,"x","ceil");return se.runKernelFunc(function(n){return n.ceil(e)},{$x:e},function(n){return{$x:function(){return Ot(n)}}})}}),NC=ae({clipByValue_:function(t,e,n){var r=W(t,"x","clipByValue");Y(e<=n,function(){return"Error in clip: min ("+e+") must be less than or equal to max ("+n+")."});var i=[r],a={min:e,max:n};return se.runKernelFunc(function(o,s){var u=o.clip(r,e,n);return s([r]),u},{x:r},function(o,s){var u=s[0];return{x:function(){return o.where(u.greaterEqual(e).logicalAnd(u.lessEqual(n)),Ot(o))}}},"ClipByValue",a,i)}}),AAe=ae({cos_:function(t){var e=W(t,"x","cos"),n=[e];return se.runKernelFunc(function(r,i){var a=r.cos(e);return i([e]),a},{x:e},function(r,i){var a=i[0];return{x:function(){return a.toFloat().sin().neg().mul(r)}}},"Cos",{},n)}}),TAe=ae({cosh_:function(t){var e=W(t,"x","cosh");return se.runKernelFunc(function(n,r){var i=n.cosh(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return i.toFloat().sinh().mulStrict(n)}}})}}),MAe=ae({erf_:function(t){var e=W(t,"x","erf");return Y(e.dtype==="int32"||e.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),e.dtype==="int32"&&(e=e.toFloat()),se.runKernelFunc(function(n,r){var i=n.erf(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.mul(i.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),Pw=ae({exp_:function(t){var e=W(t,"x","exp");return se.runKernelFunc(function(n,r){var i=n.exp(e);return r([i]),i},{x:e},function(n,r){return{x:function(){return n.mulStrict(r[0])}}},"Exp",{},[],[!0])}}),IAe=ae({expm1_:function(t){var e=W(t,"x","expm1");return se.runKernelFunc(function(n,r){var i=n.expm1(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.mul(i.exp())}}})}}),RAe=ae({floor_:function(t){var e=W(t,"x","floor");return se.runKernelFunc(function(n){return n.floor(e)},{$x:e},function(n){return{$x:function(){return Ot(n)}}})}}),kAe=ae({log_:function(t){var e=W(t,"x","log"),n=[e];return se.runKernelFunc(function(r,i){var a=r.log(e);return i([e]),a},{x:e},function(r,i){var a=i[0];return{x:function(){return r.div(a.toFloat())}}},"Log",{},n)}}),FAe=ae({log1p_:function(t){var e=W(t,"x","log1p");return se.runKernelFunc(function(n,r){var i=n.log1p(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.div(i.add(1))}}})}}),PAe=ae({logSigmoid_:function(t){var e=W(t,"x","logSigmoid");return se.runKernelFunc(function(n,r){var i=n.softplus(e.neg()).neg();return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.mul(i.neg().sigmoid())}}})}}),Yg=ae({neg_:function(t){var e=W(t,"x","neg"),n=[e];return se.runKernelFunc(function(r){return r.neg(e)},{x:e},function(r){return{x:function(){return r.neg()}}},"Neg",{},n)}}),OAe=ae({reciprocal_:function(t){var e=W(t,"x","reciprocal");return se.runKernelFunc(function(n,r){var i=n.reciprocal(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.div(i.square().neg())}}})}}),BAe=ae({round_:function(t){var e=W(t,"x","round");return se.runKernelFunc(function(n){return n.round(e)},{$x:e},function(n){return{$x:function(){return Ot(n)}}})}}),Z7=ae({rsqrt_:function(t){var e=W(t,"x","rsqrt"),n=[e];return se.runKernelFunc(function(r,i){var a=r.rsqrt(e);return i([e]),a},{x:e},function(r,i){var a=i[0];return{x:function(){return r.div(a.pow(1.5).mul(2)).neg()}}},"Rsqrt",{},n)}}),J7=ae({sigmoid_:function(t){var e=W(t,"x","sigmoid");return se.runKernelFunc(function(n,r){var i=n.sigmoid(e);return r([i]),i},{x:e},function(n,r){var i=r[0];return{x:function(){return n.mul(i.mul(je(1).sub(i)))}}},"Sigmoid")}}),LAe=ae({sign_:function(t){var e=W(t,"x","sign");return se.runKernelFunc(function(n){return n.sign(e)},{$x:e},function(n){return{$x:function(){return Ot(n)}}})}}),jAe=ae({isNaN_:function(t){var e=W(t,"x","isNaN");return se.runKernelFunc(function(n){return n.isNaN(e)},{$x:e},function(n){return{$x:function(){return Ot(n)}}})}}),$Ae=ae({isInf_:function(t){var e=W(t,"x","isInf");return se.runKernelFunc(function(n){return n.isInf(e)},{$x:e},function(n){return{$x:function(){return Ot(n)}}})}}),zAe=ae({isFinite_:function(t){var e=W(t,"x","isFinite");return se.runKernelFunc(function(n){return n.isFinite(e)},{$x:e},function(n){return{$x:function(){return Ot(n)}}})}}),UAe=ae({sin_:function(t){var e=W(t,"x","sin"),n=[e];return se.runKernelFunc(function(r,i){var a=r.sin(e);return i([e]),a},{x:e},function(r,i){var a=i[0];return{x:function(){return a.toFloat().cos().mul(r)}}},"Sin",{},n)}}),WAe=ae({sinh_:function(t){var e=W(t,"x","sinh");return se.runKernelFunc(function(n,r){var i=n.sinh(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return i.toFloat().cosh().mulStrict(n)}}})}}),VAe=ae({softplus_:function(t){var e=W(t,"x","softplus");return se.runKernelFunc(function(n,r){var i=n.softplus(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.mul(i.sigmoid())}}})}}),qAe=ae({sqrt_:function(t){var e=W(t,"x","sqrt");return se.runKernelFunc(function(n,r){var i=n.sqrt(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.div(i.toFloat().sqrt().mul(2))}}})}}),HAe=ae({step_:function(t,e){e===void 0&&(e=0);var n=W(t,"x","step");return se.runKernelFunc(function(r){return r.step(n,e)},{$x:n},function(r){return{$x:function(){return Ot(r)}}})}}),GAe=ae({tan_:function(t){var e=W(t,"x","tan");return se.runKernelFunc(function(n,r){var i=n.tan(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.div(i.cos().square())}}})}}),KAe=ae({tanh_:function(t){var e=W(t,"x","tanh");return se.runKernelFunc(function(n,r){var i=n.tanh(e);return r([i]),i},{x:e},function(n,r){var i=r[0];return{x:function(){return je(1).sub(i.square()).mulStrict(n)}}},"Tanh",{},null,[!0])}});function e9(t,e,n,r,i,a){var o,s,u=W(t,"x","batchNorm"),l=W(e,"mean","batchNorm"),c=W(n,"variance","batchNorm");return i!=null&&(o=W(i,"scale","batchNorm")),r!=null&&(s=W(r,"offset","batchNorm")),Y(u.rank===2,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),Y(l.rank===2||l.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+l.rank+"."}),Y(c.rank===2||c.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+c.rank+"."}),o!=null&&Y(o.rank===2||o.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+o.rank+"."}),s!=null&&Y(s.rank===2||s.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."}),Np(u,l,c,s,o,a)}function t9(t,e,n,r,i,a){var o,s,u=W(t,"x","batchNorm"),l=W(e,"mean","batchNorm"),c=W(n,"variance","batchNorm");return i!=null&&(o=W(i,"scale","batchNorm")),r!=null&&(s=W(r,"offset","batchNorm")),Y(u.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),Y(l.rank===3||l.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+l.rank+"."}),Y(c.rank===3||c.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+c.rank+"."}),o!=null&&Y(o.rank===3||o.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+o.rank+"."}),s!=null&&Y(s.rank===3||s.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."}),Np(u,l,c,s,o,a)}function n9(t,e,n,r,i,a){var o,s,u=W(t,"x","batchNorm"),l=W(e,"mean","batchNorm"),c=W(n,"variance","batchNorm");return i!=null&&(o=W(i,"scale","batchNorm")),r!=null&&(s=W(r,"offset","batchNorm")),Y(u.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+u.rank+"."}),Y(l.rank===4||l.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+l.rank+"."}),Y(c.rank===4||c.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+c.rank+"."}),o!=null&&Y(o.rank===4||o.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+o.rank+"."}),s!=null&&Y(s.rank===4||s.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."}),Np(u,l,c,s,o,a)}function Np(t,e,n,r,i,a){a==null&&(a=.001);var o,s,u,l=W(t,"x","batchNorm"),c=W(e,"mean","batchNorm"),f=W(n,"variance","batchNorm");i!=null&&(o=W(i,"scale","batchNorm")),r!=null&&(s=W(r,"offset","batchNorm")),Y(c.rank===f.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),Y(s==null||c.rank===s.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),Y(o==null||c.rank===o.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),u=l.rank===0||l.rank===1?l.as4D(1,1,1,l.size):l.rank===2?l.as4D(1,1,l.shape[0],l.shape[1]):l.rank===3?l.as4D(1,l.shape[0],l.shape[1],l.shape[2]):l;var d=[l,c,f,o];return se.runKernelFunc(function(h,p){var m=h.batchNormalization(u,Mm(c),Mm(f),a,Mm(o),Mm(s));return p([l,c,f,o]),m},{x:l,mean:c,variance:f,scale:o,offset:s},function(h,p){var m=p,g=m[0],v=m[1],x=m[2],y=m[3],b=y??je(1),w=Vn(v.shape,u.shape),_=[];if(v.rank===1){for(var E=0;E<u.shape.length-1;++E)_.push(u.shape[E]);_.push(1)}var C=g.sub(v),N=h.mul(b),D=Z7(x.add(je(a))),A=D.mul(D).mul(D).mul(je(-.5));return{x:function(){return v.rank===1?h.mul(Fc(D.as4D(1,1,1,v.shape[0]),_)).mul(b).reshape(g.shape):h.mul(D).mul(b).reshape(g.shape)},mean:function(){var T=D.mul(je(-1)).mul(N);return v.rank===1&&(T=T.sum(w)),T.reshape(v.shape)},variance:function(){var T=A.mul(C).mul(N);return v.rank===1&&(T=T.sum(w)),T.reshape(v.shape)},scale:function(){var T=C.mul(D),k=h.mul(T);return v.rank===1&&(k=k.sum(w)),k.reshape(v.shape)},offset:function(){var T=h;return v.rank===1&&(T=T.sum(w)),T.reshape(v.shape)}}},"BatchNormalization",{varianceEpsilon:a},d).reshape(l.shape)}function Mm(t){return t==null?null:t.rank===0?t.as1D():t.rank===1?t:t.rank===2?t.as4D(1,1,t.shape[0],t.shape[1]):t.rank===3?t.as4D(1,t.shape[0],t.shape[1],t.shape[2]):t}function my(){g7("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var YAe=ae({batchNormalization2d_:function(t,e,n,r,i,a){return r===void 0&&(r=.001),my(),e9(t,e,n,a,i,r)}}),XAe=ae({batchNormalization3d_:function(t,e,n,r,i,a){return r===void 0&&(r=.001),my(),t9(t,e,n,a,i,r)}}),QAe=ae({batchNormalization4d_:function(t,e,n,r,i,a){return r===void 0&&(r=.001),my(),n9(t,e,n,a,i,r)}}),ZAe=ae({batchNormalization_:function(t,e,n,r,i,a){return r===void 0&&(r=.001),my(),Np(t,e,n,a,i,r)}}),r9=ae({batchNorm_:Np}),JAe=ae({batchNorm2d_:e9}),e3e=ae({batchNorm3d_:t9}),t3e=ae({batchNorm4d_:n9}),vy=ae({logicalAnd_:function(t,e){var n=W(t,"a","logicalAnd","bool"),r=W(e,"b","logicalAnd","bool");return Mt(n.shape,r.shape),se.runKernelFunc(function(i){return i.logicalAnd(n,r)},{a:n,b:r},null,"LogicalAnd")}}),n3e=ae({logicalNot_:function(t){var e=W(t,"x","logicalNot","bool");return se.runKernelFunc(function(n){return n.logicalNot(e)},{$x:e})}}),i9=ae({logicalOr_:function(t,e){var n=W(t,"a","logicalOr","bool"),r=W(e,"b","logicalOr","bool");return Mt(n.shape,r.shape),se.runKernelFunc(function(i){return i.logicalOr(n,r)},{$a:n,$b:r})}}),r3e=ae({logicalXor_:function(t,e){var n=W(t,"a","logicalXor","bool"),r=W(e,"b","logicalXor","bool");return Mt(n.shape,r.shape),i9(t,e).logicalAnd(vy(t,e).logicalNot())}}),hl=ae({where_:function(t,e,n){var r=W(e,"a","where"),i=W(n,"b","where"),a=W(t,"condition","where","bool");return Wt(r.shape,i.shape,"Error in where: "),a.rank===1?Y(a.shape[0]===r.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):Wt(a.shape,i.shape,"Error in where: "),se.runKernelFunc(function(o,s){var u=o.select(a,r,i);return s([a]),u},{$condition:a,$a:r,$b:i},function(o,s){var u=s[0];return{$condition:function(){return Ot(u).toFloat()},$a:function(){return o.mul(u.cast(o.dtype))},$b:function(){return o.mul(u.logicalNot().cast(o.dtype))}}})}}),a9=function(t){return We(this,void 0,void 0,function(){var e,n,r;return Ve(this,function(i){switch(i.label){case 0:return[4,(e=W(t,"condition","whereAsync","bool")).data()];case 1:return n=i.sent(),r=wC(e.shape,n),t!==e&&e.dispose(),[2,r]}})})},St=ae({add_:function(t,e){var n,r=W(t,"a","add"),i=W(e,"b","add");n=_n(r,i),r=n[0],i=n[1];var a=Mt(r.shape,i.shape);return se.runKernelFunc(function(o){return o.add(r,i)},{a:r,b:i},function(o){return{a:function(){var s=o,u=Vn(r.shape,a);return u.length>0&&(s=s.sum(u)),s.reshape(r.shape)},b:function(){var s=o,u=Vn(i.shape,a);return u.length>0&&(s=s.sum(u)),s.reshape(i.shape)}}},"Add")}}),i3e=ae({addN_:function(t){Y(Array.isArray(t),function(){return"The argument passed to tf.addN() must be a list of tensors"}),Y(t.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+t.length});var e=t.map(function(i,a){return W(i,"tensors"+a,"addN")}),n=e[0];e.forEach(function(i){if(i.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(function(i){if(!ar(i.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var r=e;return se.runKernelFunc(function(i){return i.addN(e)},r,function(i){var a={};return e.forEach(function(o,s){a[s]=function(){return i.clone()}}),a},"AddN")}}),a3e=ae({addStrict_:function(t,e){var n=W(t,"a","addStrict"),r=W(e,"b","addStrict");return Wt(n.shape,r.shape,"Error in addStrict: "),n.add(r)}}),o3e=ae({atan2_:function(t,e){var n,r=W(t,"a","atan2"),i=W(e,"b","atan2");n=_n(r,i),r=n[0],i=n[1];var a=Mt(r.shape,i.shape);return se.runKernelFunc(function(o,s){var u=o.atan2(r,i);return s([r,i]),u},{$a:r,$b:i},function(o,s){var u=s[0],l=s[1];return{$a:function(){var c=St(u.square(),l.square()),f=o.mul(l.div(c)),d=Vn(u.shape,a);return d.length>0&&(f=f.sum(d)),f.reshape(u.shape)},$b:function(){var c=St(u.square(),l.square()),f=Yg(o.mul(u.div(c))),d=Vn(l.shape,a);return d.length>0&&(f=f.sum(d)),f.reshape(l.shape)}}})}}),va=ae({div_:function(t,e){var n,r=W(t,"a","div"),i=W(e,"b","div");if(n=_n(r,i),r=n[0],i=n[1],r.dtype==="int32"&&i.dtype==="int32")return o9(r,i);var a=Mt(r.shape,i.shape);return se.runKernelFunc(function(o,s){var u=o.realDivide(r,i);return s([r,i]),u},{a:r,b:i},function(o,s){var u=s[0],l=s[1];return{a:function(){var c=o.div(l.toFloat()),f=Vn(u.shape,a);return f.length>0?c.sum(f).reshape(u.shape):c},b:function(){var c=o.mul(u.toFloat()),f=Vn(l.shape,a);f.length>0&&(c=c.sum(f).reshape(l.shape));var d=l.square();return c.div(d.toFloat()).neg()}}},"Div")}}),s3e=ae({divNoNan_:function(t,e){var n,r=W(t,"a","div"),i=W(e,"b","div");r=(n=_n(r,i))[0],i=n[1];var a=va(r,i),o=Ot(a),s=i.equal(o);return hl(s,o,a)}}),u3e=ae({divStrict_:function(t,e){var n=W(t,"a","div"),r=W(e,"b","div");return Wt(n.shape,r.shape,"Error in divideStrict: "),n.div(r)}}),o9=ae({floorDiv_:function(t,e){var n,r=W(t,"a","floorDiv"),i=W(e,"b","floorDiv");n=_n(r,i),r=n[0],i=n[1];var a=Mt(r.shape,i.shape);return se.runKernelFunc(function(o,s){var u=o.floorDiv(r,i);return s([r,i]),u},{a:r,b:i},function(o,s){var u=s[0],l=s[1];return{a:function(){var c=o.div(l.toFloat()),f=Vn(u.shape,a);return f.length>0?c.sum(f).reshape(u.shape):c},b:function(){var c=o.mul(u.toFloat()),f=Vn(l.shape,a);f.length>0&&(c=c.sum(f).reshape(l.shape));var d=l.square();return c.div(d.toFloat()).neg()}}},"FloorDiv")}}),SC=ae({maximum_:function(t,e){var n,r=W(t,"a","maximum"),i=W(e,"b","maximum");return n=_n(r,i),r=n[0],i=n[1],r.dtype==="bool"&&(r=r.toInt(),i=i.toInt()),Mt(r.shape,i.shape),se.runKernelFunc(function(a,o){var s=a.maximum(r,i);return o([r,i]),s},{a:r,b:i},function(a,o){var s=o[0],u=o[1];return{a:function(){return a.mul(s.greaterEqual(u).toFloat())},b:function(){return a.mul(s.less(u).toFloat())}}},"Maximum")}}),l3e=ae({maximumStrict_:function(t,e){var n=W(t,"a","maximumStrict"),r=W(e,"b","maximumStrict");return Wt(n.shape,r.shape,"Error in maximumStrict: "),n.maximum(r)}}),s9=ae({minimum_:function(t,e){var n,r=W(t,"a","minimum"),i=W(e,"b","minimum");return n=_n(r,i),r=n[0],i=n[1],r.dtype==="bool"&&(r=r.toInt(),i=i.toInt()),Mt(r.shape,i.shape),se.runKernelFunc(function(a,o){var s=a.minimum(r,i);return o([r,i]),s},{a:r,b:i},function(a,o){var s=o[0],u=o[1];return{a:function(){return a.mul(s.lessEqual(u).toFloat())},b:function(){return a.mul(s.greater(u).toFloat())}}},"Minimum")}}),c3e=ae({minimumStrict_:function(t,e){var n=W(t,"a","minimumStrict"),r=W(e,"b","minimumStrict");return Wt(n.shape,r.shape,"Error in minimumStrict: "),n.minimum(r)}}),f3e=ae({mod_:function(t,e){var n,r=W(t,"a","mod"),i=W(e,"b","mod");n=_n(r,i),r=n[0],i=n[1];var a=Mt(r.shape,i.shape);return se.runKernelFunc(function(o,s){var u=o.mod(r,i);return s([r,i]),u},{$a:r,$b:i},function(o,s){var u=s[0],l=s[1];return{$a:function(){var c=Vn(u.shape,a);return c.length>0?o.sum(c).reshape(u.shape):o},$b:function(){var c=o.mul(u.div(l).floor().neg()),f=Vn(l.shape,a);return f.length>0?c.sum(f).reshape(l.shape):c}}})}}),d3e=ae({modStrict_:function(t,e){var n=W(t,"a","modStrict"),r=W(e,"b","modStrict");return Wt(n.shape,r.shape,"Error in modStrict: "),n.mod(r)}}),kr=ae({mul_:function(t,e){var n,r=W(t,"a","mul"),i=W(e,"b","mul");n=_n(r,i),r=n[0],i=n[1];var a=Mt(r.shape,i.shape);return se.runKernelFunc(function(o,s){var u=o.multiply(r,i);return s([r,i]),u},{a:r,b:i},function(o,s){var u=s[0],l=s[1];return{a:function(){var c=o.mul(l.toFloat()),f=Vn(u.shape,a);return f.length>0?c.sum(f).reshape(u.shape):c},b:function(){var c=o.mul(u.toFloat()),f=Vn(l.shape,a);return f.length>0?c.sum(f).reshape(l.shape):c}}},"Mul")}}),h3e=ae({mulStrict_:function(t,e){var n=W(t,"a","mul"),r=W(e,"b","mul");return Wt(n.shape,r.shape,"Error in multiplyStrict: "),n.mul(r)}}),Xg=ae({pow_:function(t,e){var n,r=W(t,"base","pow"),i=W(e,"exp","pow");n=_n(r,i),r=n[0],i=n[1];var a=Mt(r.shape,i.shape),o=[r,i];return se.runKernelFunc(function(s,u){var l=s.pow(r,i);return u([r,i,l]),l},{a:r,b:i},function(s,u){var l=u[0],c=u[1],f=u[2];return{a:function(){var d=c.toFloat(),h=s.mul(d.mul(l.pow(d.sub(je(1))))),p=Vn(l.shape,a);return p.length>0&&(h=h.sum(p)),h.reshape(l.shape)},b:function(){var d=l.greater(0),h=l.log().where(d,Ot(l)),p=s.mul(f.mul(h)),m=Vn(c.shape,a);return m.length>0&&(p=p.sum(m)),p.reshape(c.shape)}}},"Pow",{},o,[!0])}}),p3e=ae({powStrict_:function(t,e){return Wt(t.shape,e.shape,"Error in powStrict: "),t.pow(e)}}),m3e=ae({squaredDifferenceStrict_:function(t,e){var n=W(t,"a","squaredDifferenceStrict"),r=W(e,"b","squaredDifferenceStrict");return Wt(n.shape,r.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(r)}}),qn=ae({sub_:function(t,e){var n,r=W(t,"a","sub"),i=W(e,"b","sub");n=_n(r,i),r=n[0],i=n[1];var a=Mt(r.shape,i.shape);return se.runKernelFunc(function(o){return o.subtract(r,i)},{a:r,b:i},function(o){return{a:function(){var s=o,u=Vn(r.shape,a);return u.length>0&&(s=s.sum(u)),s.reshape(r.shape)},b:function(){var s=o,u=Vn(i.shape,a);return u.length>0&&(s=s.sum(u)),s.neg().reshape(i.shape)}}},"Sub")}}),v3e=ae({subStrict_:function(t,e){var n=W(t,"a","subStrict"),r=W(e,"b","subStrict");return Wt(n.shape,r.shape,"Error in subStrict: "),n.sub(r)}}),u9=ae({equal_:function(t,e){var n,r=W(t,"a","equal"),i=W(e,"b","equal");return n=_n(r,i),r=n[0],i=n[1],Mt(r.shape,i.shape),se.runKernelFunc(function(a){return a.equal(r,i)},{$a:r,$b:i})}}),g3e=ae({equalStrict_:function(t,e){var n=W(t,"a","equalStrict"),r=W(e,"b","equalStrict");return Wt(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),y3e=ae({greater_:function(t,e){var n,r=W(t,"a","greater"),i=W(e,"b","greater");return n=_n(r,i),r=n[0],i=n[1],Mt(r.shape,i.shape),se.runKernelFunc(function(a){return a.greater(r,i)},{a:r,b:i},null,"Greater")}}),l9=ae({greaterEqual_:function(t,e){var n,r=W(t,"a","greaterEqual"),i=W(e,"b","greaterEqual");return n=_n(r,i),r=n[0],i=n[1],Mt(r.shape,i.shape),se.runKernelFunc(function(a,o){var s=a.greaterEqual(r,i);return o([r,i]),s},{a:r,b:i},function(a,o){var s=o[0],u=o[1];return{a:function(){return Ot(s)},b:function(){return Ot(u)}}},"GreaterEqual")}}),x3e=ae({greaterEqualStrict_:function(t,e){var n=W(t,"a","greaterEqualStrict"),r=W(e,"b","greaterEqualStrict");return Wt(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),b3e=ae({greaterStrict_:function(t,e){var n=W(t,"a","greaterStrict"),r=W(e,"b","greaterStrict");return Wt(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),w3e=ae({less_:function(t,e){var n,r=W(t,"a","less"),i=W(e,"b","less");return n=_n(r,i),r=n[0],i=n[1],Mt(r.shape,i.shape),se.runKernelFunc(function(a){return a.less(r,i)},{a:r,b:i},null,"Less")}}),_3e=ae({lessEqual_:function(t,e){var n,r=W(t,"a","lessEqual"),i=W(e,"b","lessEqual");return n=_n(r,i),r=n[0],i=n[1],Mt(r.shape,i.shape),se.runKernelFunc(function(a,o){var s=a.lessEqual(r,i);return o([r,i]),s},{a:r,b:i},null,"LessEqual")}}),E3e=ae({lessEqualStrict_:function(t,e){var n=W(t,"a","lessEqualStrict"),r=W(e,"b","lessEqualStrict");return Wt(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),C3e=ae({lessStrict_:function(t,e){var n=W(t,"a","lessStrict"),r=W(e,"b","lessStrict");return Wt(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),N3e=ae({notEqual_:function(t,e){var n,r=W(t,"a","notEqual"),i=W(e,"b","notEqual");return n=_n(r,i),r=n[0],i=n[1],Mt(r.shape,i.shape),se.runKernelFunc(function(a){return a.notEqual(r,i)},{a:r,b:i},null,"NotEqual")}}),S3e=ae({notEqualStrict_:function(t,e){var n=W(t,"a","notEqualStrict"),r=W(e,"b","notEqualStrict");return Wt(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}});function hR(t,e){for(var n=[],r=t;r<e;++r)n.push(r);return n}function pR(t){for(var e=[],n=0;n<t.length;++n)for(var r=0;r<t[n].length;++r)e.push(t[n][r]);return e}var DC=ae({gather_:function(t,e,n){n===void 0&&(n=0);var r=W(t,"x","gather"),i=W(e,"indices","gather","int32");n=Yn(n,r.shape)[0];var a=function(o,s,u){for(var l=o.shape[u],c=[],f=1,d=1,h=0;h<u;h++)c.push(o.shape[h]),f*=o.shape[h];for(h=0;h<s.rank;h++)c.push(s.shape[h]);for(h=u+1;h<o.rank;h++)c.push(o.shape[h]),d*=o.shape[h];return{batchSize:f,sliceSize:d,dimSize:l,outputShape:c}}(r,i,n);return se.runKernelFunc(function(o,s){var u=o.gather(r,i.flatten(),n);return s([i]),u},{x:r,indices:i},function(o,s){var u=s[0];return{x:function(){var l=r.shape,c=u.size,f=l.slice(0,n),d=f.length,h=l.slice(n,l.length).slice(1),p=h.length,m=hR(0,d),g=hR(d+1,d+1+p),v=pR([f,[c],h]),x=o.reshape(v),y=u.reshape([c]),b=pR([[d],m,g]),w=x.transpose(b),_=c9(w,y,r.shape[n]),E=hC(b);return _=_.transpose(E)},indices:function(){return u}}},"Gather",{axis:n}).reshape(a.outputShape)}}),c9=ae({unsortedSegmentSum_:function(t,e,n){var r=W(t,"x","unsortedSegmentSum"),i=W(e,"segmentIds","unsortedSegmentSum","int32");return Y(Rn(n),function(){return"numSegments must be of dtype int"}),se.runKernelFunc(function(a,o){var s=a.unsortedSegmentSum(r,i,n);return o([i]),s},{$x:r},function(a,o){var s=o[0];return{$x:function(){return function(u,l){for(var c=SC(l,Ot(l)),f=DC(u,c),d=l9(l,je(0,"int32")),h=f.rank-d.rank,p=0;p<h;++p)d=Gi(d,p+1);d=vy(d,qf(f.shape,"bool"));var m=Ot(f);return hl(d,f,m)}(a,s)}}})}}),D3e=function(t,e,n){return We(this,void 0,void 0,function(){var r,i,a,o,s,u,l,c,f,d,h,p,m;return Ve(this,function(g){switch(g.label){case 0:for(r=W(t,"tensor","boolMask"),i=W(e,"mask","boolMask","bool"),a=n??0,o=i.rank,s=r.shape,Y(o>0,function(){return"mask cannot be scalar"}),Wt(s.slice(a,a+o),i.shape,"mask's shape must match the first K dimensions of tensor's shape,"),u=1,l=a;l<a+o;l++)u*=s[l];return c=s.slice(0,a).concat([u],s.slice(a+o)),f=r.reshape(c),d=i.reshape([-1]),[4,a9(d)];case 1:return h=g.sent(),p=h.squeeze([1]),m=DC(f,p,a),t!==r&&r.dispose(),e!==i&&i.dispose(),p.dispose(),f.dispose(),d.dispose(),h.dispose(),[2,m]}})})};function f9(t,e,n,r,i,a,o){a===void 0&&(a="NHWC"),Y(t.length===e.rank,function(){return"Length of inShape ("+t.length+") and rank of dy ("+e.rank+") must match"});var s=t,u=e,l=!1;e.rank===3&&(l=!0,u=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]),s=[1,t[0],t[1],t[2]]),Y(s.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+s.length+"."}),Y(u.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+u.rank}),Y(n.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank});var c=a==="NHWC"?s[3]:s[1],f=a==="NHWC"?u.shape[3]:u.shape[1];Y(c===n.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+c+") must match input depth for filter "+n.shape[2]+"."}),Y(f===n.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+f+") must match output depth for filter "+n.shape[3]+"."}),o!=null&&Y(Rn(i),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."});var d=yC(a),h=kl(s,n.shape,r,1,i,o,!1,d),p=se.runKernelFunc(function(m,g){var v=m.conv2dDerInput(u,n,h);return g([n,u]),v},{dy4D:u,filter:n},function(m,g){var v=g[0],x=g[1];return{dy4D:function(){return sa(m,v,r,i,a,1,o)},filter:function(){return AC(m,x,v.shape,r,i,a,o)}}});return l?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}function nx(t){var e=function(a){return typeof a=="number"?[a,a,a]:a.length===2?[a[0],a[1],1]:a}(t),n=e[0],r=e[1],i=e[2];return n===1&&r===1&&i===1}function d9(t,e,n,r,i){Y(t.length===e.rank,function(){return"Length of inShape ("+t.length+") and rank of dy ("+e.rank+") must match"});var a=t,o=e,s=!1;e.rank===4&&(s=!0,o=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]),a=[1,t[0],t[1],t[2],t[3]]);var u=a[4],l=o.shape[4];Y(a.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+a.length+"."}),Y(o.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+o.rank}),Y(n.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank}),Y(u===n.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+u+") must match input depth for filter "+n.shape[3]+"."}),Y(l===n.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+l+") must match output depth for filter "+n.shape[4]+"."});var c=Gg(a,n.shape,r,1,i),f=se.runKernelFunc(function(d){return d.conv3dDerInput(o,n,c)},{dy5D:o});return s?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}var A3e=ae({conv1d_:function(t,e,n,r,i,a,o){i===void 0&&(i="NWC"),a===void 0&&(a=1);var s=W(t,"x","conv1d"),u=W(e,"filter","conv1d"),l=s,c=!1;s.rank===2&&(c=!0,l=s.as3D(1,s.shape[0],s.shape[1])),Y(l.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank "+l.rank+"."}),Y(u.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+u.rank+"."}),o!=null&&Y(Rn(r),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."}),Y(l.shape[2]===u.shape[1],function(){return"Error in conv1d: depth of input ("+l.shape[2]+") must match input depth for filter "+u.shape[1]+"."}),Y(xi(n,a),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+a+"'"}),Y(i==="NWC",function(){return"Error in conv1d: got dataFormat of "+i+" but only NWC is currently supported."});var f=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]),d=l.as4D(l.shape[0],1,l.shape[1],l.shape[2]),h=sa(d,f,[1,n],r,"NHWC",[1,a],o);return c?h.as2D(h.shape[2],h.shape[3]):h.as3D(h.shape[0],h.shape[2],h.shape[3])}}),sa=ae({conv2d_:function(t,e,n,r,i,a,o){i===void 0&&(i="NHWC"),a===void 0&&(a=[1,1]);var s=W(t,"x","conv2d"),u=W(e,"filter","conv2d"),l=s,c=!1;s.rank===3&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),Y(l.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank "+l.rank+"."}),Y(u.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+u.rank+"."}),o!=null&&Y(Rn(r),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."});var f=i==="NHWC"?l.shape[3]:l.shape[1];Y(f===u.shape[2],function(){return"Error in conv2d: depth of input ("+f+") must match input depth for filter "+u.shape[2]+"."}),Y(xi(n,a),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"});var d=yC(i),h=kl(l.shape,u.shape,n,a,r,o,!1,d),p=[u,l],m=se.runKernelFunc(function(g,v){var x=g.conv2d(l,u,h);return v([u,l]),x},{x:l,filter:u},function(g,v){var x=v,y=x[0],b=x[1];return Y(mf(a),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+a+"'"}),{x:function(){return h9(b.shape,g,y,n,r,i)},filter:function(){return AC(b,g,y.shape,n,r,i)}}},"Conv2D",h,p);return c?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),T3e=ae({conv3d_:function(t,e,n,r,i,a){i===void 0&&(i="NDHWC"),a===void 0&&(a=[1,1,1]);var o=W(t,"x","conv3d"),s=W(e,"filter","conv3d"),u=o,l=!1;o.rank===4&&(l=!0,u=o.as5D(1,o.shape[0],o.shape[1],o.shape[2],o.shape[3])),Y(u.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank "+u.rank+"."}),Y(s.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+s.rank+"."}),Y(u.shape[4]===s.shape[3],function(){return"Error in conv3d: depth of input ("+u.shape[4]+") must match input depth for filter "+s.shape[3]+"."}),Y(function(d,h){return nx(d)||nx(h)}(n,a),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"}),Y(i==="NDHWC",function(){return"Error in conv3d: got dataFormat of "+i+" but only NDHWC is currently supported."});var c=Gg(u.shape,s.shape,n,a,r),f=se.runKernelFunc(function(d,h){var p=d.conv3d(u,s,c);return h([u,s]),p},{x:u,$filter:s},function(d,h){Y(nx(a),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+a+"'"});var p=h[0],m=h[1];return{x:function(){return d9(p.shape,d,m,n,r)},$filter:function(){return function(g,v,x,y,b){var w=g;g.rank===4&&(w=g.as5D(1,g.shape[0],g.shape[1],g.shape[2],g.shape[3]));var _=v;_.rank===4&&(_=v.as5D(1,v.shape[0],v.shape[1],v.shape[2],v.shape[3])),Y(w.rank===5,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+w.shape+"."}),Y(_.rank===5,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+_.shape+"."}),Y(x.length===5,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+x+"."}),Y(w.shape[4]===x[3],function(){return"Error in conv3dDerFilter: depth of input "+w.shape[4]+") must match input depth in filter ("+x[3]+"."}),Y(_.shape[4]===x[4],function(){return"Error in conv3dDerFilter: depth of dy ("+_.shape[4]+") must match output depth for filter ("+x[4]+")."});var E=Gg(w.shape,x,y,1,b);return se.runKernelFunc(function(C){return C.conv3dDerFilter(w,_,E)},{x5D:w,dy5D:_})}(p,d,m.shape,n,r)}}});return l?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),AC=ae({conv2dDerFilter_:function(t,e,n,r,i,a,o){a===void 0&&(a="NHWC");var s=t;t.rank===3&&(s=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var u=e;u.rank===3&&(u=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),Y(s.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+s.shape+"."}),Y(u.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+u.shape+"."}),Y(n.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."});var l=a==="NHWC"?s.shape[3]:s.shape[1],c=a==="NHWC"?u.shape[3]:u.shape[1];Y(l===n[2],function(){return"Error in conv2dDerFilter: depth of input "+l+") must match input depth in filter ("+n[2]+"."}),Y(c===n[3],function(){return"Error in conv2dDerFilter: depth of dy ("+c+") must match output depth for filter ("+n[3]+")."}),o!=null&&Y(Rn(i),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."});var f=yC(a),d=kl(s.shape,n,r,1,i,o,!1,f);return se.runKernelFunc(function(h){return h.conv2dDerFilter(s,u,d)},{x4D:s,dy4D:u})}}),h9=ae({conv2dDerInput_:f9}),gy=ae({depthwiseConv2d_:function(t,e,n,r,i,a,o){a===void 0&&(a=[1,1]);var s=W(t,"x","depthwiseConv2d"),u=W(e,"filter","depthwiseConv2d"),l=s,c=!1;s.rank===3&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),Y(l.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+l.rank+"."}),Y(u.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+u.rank+"."}),Y(l.shape[3]===u.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+l.shape[3]+") must match the inChannels dimension in filter "+u.shape[2]+"."}),a==null&&(a=[1,1]),Y(xi(n,a),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"}),o!=null&&Y(Rn(r),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."});var f=kl(l.shape,u.shape,n,a,r,o,!0),d=[l,u],h=se.runKernelFunc(function(p,m){var g=p.depthwiseConv2D(l,u,f);return m([l,u]),g},{x:l,filter:u},function(p,m){Y(mf(a),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+a+"'"});var g=m[0],v=m[1];return{x:function(){return p9(g.shape,p,v,f)},filter:function(){return m9(g,p,v.shape,f)}}},"DepthwiseConv2dNative",f,d);return c?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}}),p9=ae({depthwiseConv2dDerInput_:function(t,e,n,r){var i=e,a=!1;e.rank===3&&(a=!0,i=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var o=se.runKernelFunc(function(s){return s.depthwiseConv2DDerInput(i,n,r)},{dy4D:i});return a?o.as3D(o.shape[1],o.shape[2],o.shape[3]):o}}),m9=ae({depthwiseConv2dDerFilter_:function(t,e,n,r){var i=t;t.rank===3&&(i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var a=e;return a.rank===3&&(a=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),se.runKernelFunc(function(o){return o.depthwiseConv2DDerFilter(i,a,r)},{x4D:i,dy4D:a})}}),TC=ae({separableConv2d_:function(t,e,n,r,i,a,o){a===void 0&&(a=[1,1]),o===void 0&&(o="NHWC");var s=W(t,"x","separableConv2d"),u=W(e,"depthwiseFilter","separableConv2d"),l=W(n,"pointwiseFilter","separableConv2d"),c=s,f=!1;if(s.rank===3&&(f=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");Y(c.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+c.rank+"."}),Y(u.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+u.rank+"."}),Y(l.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+u.rank+"."}),Y(l.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+l.shape[0]+"."}),Y(l.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+l.shape[1]+"."});var d=u.shape[2],h=u.shape[3];Y(l.shape[2]===d*h,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+d*h+", but got "+l.shape[2]+"."});var p=gy(c,u,r,i,o,a),m=sa(p,l,1,"valid",o);return f?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),M3e=ae({conv2dTranspose_:function(t,e,n,r,i,a){return f9(n,W(t,"x","conv2dTranspose"),W(e,"filter","conv2dTranspose"),r,i,"NHWC",a)}}),I3e=ae({conv3dTranspose_:function(t,e,n,r,i){return d9(n,W(t,"x","conv3dTranspose"),W(e,"filter","conv3dTranspose"),r,i)}}),yy=ae({matMul_:function(t,e,n,r){var i;n===void 0&&(n=!1),r===void 0&&(r=!1);var a=W(t,"a","matMul"),o=W(e,"b","matMul");i=_n(a,o),a=i[0],o=i[1];var s=n?a.shape[a.rank-2]:a.shape[a.rank-1],u=r?o.shape[o.rank-1]:o.shape[o.rank-2],l=n?a.shape[a.rank-1]:a.shape[a.rank-2],c=r?o.shape[o.rank-2]:o.shape[o.rank-1],f=a.shape.slice(0,-2),d=o.shape.slice(0,-2),h=He(f),p=He(d);Y(a.rank>=2&&o.rank>=2&&a.rank===o.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+a.rank+" and "+o.rank+"."}),Y(ar(f,d),function(){return"Error in matMul: outer dimensions ("+f+") and ("+d+") of Tensors with shapes "+a.shape+" and "+o.shape+" must match."}),Y(s===u,function(){return"Error in matMul: inner shapes ("+s+") and ("+u+") of Tensors with shapes "+a.shape+" and "+o.shape+" and transposeA="+n+" and transposeB="+r+" must match."});var m=a.shape.slice(0,-2).concat([l,c]),g=n?a.as3D(h,s,l):a.as3D(h,l,s),v=r?o.as3D(p,c,u):o.as3D(p,u,c),x={transposeA:n,transposeB:r};return se.runKernelFunc(function(y,b){var w=y.batchMatMul(g,v,n,r);return b([g,v]),w},{a:g,b:v},function(y,b){var w=b,_=w[0],E=w[1];return n||r?!n&&r?{a:function(){return y.matMul(E,!1,!1)},b:function(){return y.matMul(_,!0,!1)}}:n&&!r?{a:function(){return E.matMul(y,!1,!0)},b:function(){return _.matMul(y,!1,!1)}}:{a:function(){return E.matMul(y,!0,!0)},b:function(){return y.matMul(_,!0,!0)}}:{a:function(){return y.matMul(E,!1,!0)},b:function(){return _.matMul(y,!0,!1)}}},"BatchMatMul",x).reshape(m)}}),R3e=ae({dot_:function(t,e){var n=W(t,"t1","dot"),r=W(e,"t2","dot");Y(!(n.rank!==1&&n.rank!==2||r.rank!==1&&r.rank!==2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+"."});var i=n.rank===1?n.size:n.shape[1],a=r.rank===1?r.size:r.shape[0];return Y(i===a,function(){return"Error in dot: inner dimensions of inputs must match, but got "+i+" and "+a+"."}),n.rank===1&&r.rank===1?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():n.rank===1&&r.rank===2?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():n.rank===2&&r.rank===1?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}}),k3e=ae({outerProduct_:function(t,e){var n=W(t,"v1","outerProduct"),r=W(e,"v2","outerProduct");return Y(n.rank===1&&r.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."}),n.as2D(-1,1).matMul(r.as2D(1,-1))}}),Sp=ae({reverse_:function(t,e){var n=W(t,"x","reverse");if(n.rank===0)return n.clone();var r=Yn(e,n.shape);return se.runKernelFunc(function(i){return i.reverse(n,r)},{$x:n},function(i){return{$x:function(){return i.reverse(r)}}}).reshapeAs(n)}}),F3e=ae({reverse1d_:function(t){var e=W(t,"x","reverse");return Y(e.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank "+e.rank+"."}),Sp(e,0)}}),P3e=ae({reverse2d_:function(t,e){var n=W(t,"x","reverse");return Y(n.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank "+n.rank+"."}),Sp(n,e)}}),O3e=ae({reverse3d_:function(t,e){var n=W(t,"x","reverse");return Y(n.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank "+n.rank+"."}),Sp(n,e)}}),B3e=ae({reverse4d_:function(t,e){var n=W(t,"x","reverse");return Y(n.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank "+n.rank+"."}),Sp(n,e)}});function v9(t,e,n,r,i,a){var o=W(t,"x","maxPool"),s=o,u=!1;o.rank===3&&(u=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),Y(s.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+s.rank+"."}),Y(xi(n,r),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"}),a!=null&&Y(Rn(i),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+i+"."});var l=$h(s.shape,e,n,r,i,a);if(l.filterWidth===1&&l.filterHeight===1&&ar(l.inShape,l.outShape))return o.clone();var c=[s],f=se.runKernelFunc(function(d,h){var p=d.maxPool(s,l);return h([s,p]),p},{x:s},function(d,h){var p=h[0],m=h[1];return{x:function(){return function(g,v,x,y,b,w,_,E){var C=W(g,"dy","maxPoolBackprop"),N=W(v,"input","maxPoolBackprop"),D=W(x,"output","maxPoolBackprop");Y(N.rank===C.rank,function(){return"Rank of input ("+N.rank+") does not match rank of dy ("+C.rank+")"}),Y(xi(b,w),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+b+" and dilations '"+w+"'"}),Y(C.rank===4,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+C.rank+"."}),Y(N.rank===4,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+N.rank+"."});var A=$h(N.shape,y,b,w,_,E);return se.runKernelFunc(function(T){return T.maxPoolBackprop(C,N,D,A)},{$dy:C,$input:N})}(d,p,m,e,n,r,i)}}},"MaxPool",l,c);return u?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}function g9(t,e,n,r,i,a){var o=W(t,"x","avgPool","float32");Y(xi(n,r),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"});var s=o,u=!1;o.rank===3&&(u=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),Y(s.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank "+s.rank+"."}),a!=null&&Y(Rn(i),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+i+"."});var l=$h(s.shape,e,n,r,i,a);if(l.filterWidth===1&&l.filterHeight===1&&ar(l.inShape,l.outShape))return o.clone();var c=se.runKernelFunc(function(f){return f.avgPool(s,l)},{x:s},function(f){return{x:function(){return function(d,h,p,m,g,v){var x=W(d,"dy","avgPoolBackprop"),y=W(h,"input","avgPoolBackprop");Y(y.rank===x.rank,function(){return"Rank of input ("+y.rank+") does not match rank of dy ("+x.rank+")"}),Y(xi(m,g),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+m+" and dilations '"+g+"'"});var b=y,w=x,_=!1;y.rank===3&&(_=!0,b=y.as4D(1,y.shape[0],y.shape[1],y.shape[2]),w=x.as4D(1,x.shape[0],x.shape[1],x.shape[2])),Y(w.rank===4,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+w.rank+"."}),Y(b.rank===4,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+b.rank+"."});var E=$h(b.shape,p,m,g,v),C=se.runKernelFunc(function(N){return N.avgPoolBackprop(w,b,E)},{dy4D:w,input4D:b});return _?C.as3D(C.shape[1],C.shape[2],C.shape[3]):C}(f,s,e,n,r,i)}}},"AvgPool",l);return c=c.cast(o.dtype),u?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}var Zn=ae({maxPool_:function(t,e,n,r,i){return v9(t,e,n,1,r,i)}}),Dp=ae({avgPool_:function(t,e,n,r,i){return g9(t,e,n,1,r,i)}}),L3e=ae({pool_:function(t,e,n,r,i,a){i==null&&(i=[1,1]),a==null&&(a=1),r===0&&(r="valid");var o=W(t,"x","maxPool"),s=o,u=!1;o.rank===3&&(u=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),Y(xi(a,i),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+a+" and dilations '"+i+"'"});var l,c=$h(s.shape,e,a,i,r),f=[c.dilationHeight,c.dilationWidth];l=r==="same"?function(b,w){var _=b.map(function(N,D){return N+(N-1)*(w[D]-1)}).map(function(N){return N-1}),E=_.map(function(N){return Math.floor(N/2)}),C=_.map(function(N,D){return N-E[D]});return _.map(function(N,D){return[E[D],C[D]]})}([c.filterHeight,c.filterWidth],f):[[0,0],[0,0]];var d=f[0]===1&&f[1]===1,h=function(b,w,_){var E=_.map(function(F){return F[0]}),C=_.map(function(F){return F[1]}),N=b.concat(E,C),D=w.map(function(F,O){return(F-N[O]%F)%F}),A=C.map(function(F,O){return F+D[O]}),T=w.map(function(F,O){return[E[O],A[O]]}),k=w.map(function(F,O){return[0,D[O]]});return[T,k]}([c.inHeight,c.inWidth],f,l),p=h[0],m=h[1],g=d?r:"valid",v=d?s:E7(s,f,p),x=(n==="avg"?function(){return g9(v,e,a,1,g)}:function(){return v9(v,e,a,1,g)})(),y=d?x:b7(x,f,m);return u?y.as3D(y.shape[1],y.shape[2],y.shape[3]):y}}),j3e=ae({maxPool3d_:function(t,e,n,r,i,a,o){a===void 0&&(a="NDHWC");var s=W(t,"x","maxPool3d"),u=s,l=!1;s.rank===4&&(l=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),o==null&&(o=[1,1,1]),Y(u.rank===5,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+u.rank+"."}),Y(a==="NDHWC",function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+a}),Y(xi(n,o),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"}),i!=null&&Y(Rn(r),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var c=Hg(u.shape,e,n,o,r,i,a),f=se.runKernelFunc(function(d,h){var p=d.maxPool3d(u,c);return h([u,p]),p},{x:u},function(d,h){var p=h[0],m=h[1];return{x:function(){return function(g,v,x,y,b,w,_,E){var C=W(g,"dy","maxPool3dBackprop"),N=W(v,"input","maxPool3dBackprop"),D=W(x,"output","maxPool3dBackprop"),A=C,T=N,k=D,F=!1;N.rank===4&&(F=!0,A=C.as5D(1,C.shape[0],C.shape[1],C.shape[2],C.shape[3]),T=N.as5D(1,N.shape[0],N.shape[1],N.shape[2],N.shape[3]),k=D.as5D(1,D.shape[0],D.shape[1],D.shape[2],D.shape[3])),Y(A.rank===5,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+A.rank+"."}),Y(T.rank===5,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+T.rank+"."}),Y(k.rank===5,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+k.rank+"."}),w==null&&(w=[1,1,1]),Y(xi(b,w),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+b+" and dilations '"+w+"'"}),E!=null&&Y(Rn(_),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+E+" but got pad "+_+"."});var O=Hg(T.shape,y,b,w,_,E),I=se.runKernelFunc(function(M){return M.maxPool3dBackprop(A,T,k,O)},{dy5D:A,input5D:T});return F?I.as4D(I.shape[1],I.shape[2],I.shape[3],I.shape[4]):I}(d,p,m,e,n,o,r,i)}}});return l?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),$3e=ae({avgPool3d_:function(t,e,n,r,i,a,o){a===void 0&&(a="NDHWC");var s=W(t,"x","avgPool3d","float32"),u=s,l=!1;s.rank===4&&(l=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),o==null&&(o=[1,1,1]),Y(u.rank===5,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+u.rank+"."}),Y(a==="NDHWC",function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+a}),Y(xi(n,o),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"}),i!=null&&Y(Rn(r),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var c=Hg(u.shape,e,n,o,r,i,a),f=se.runKernelFunc(function(d){return d.avgPool3d(u,c)},{x:u},function(d){return{x:function(){return function(h,p,m,g,v,x,y){var b=W(h,"dy","avgPool3dBackprop"),w=W(p,"input","avgPool3dBackprop"),_=b,E=w,C=!1;w.rank===4&&(C=!0,_=b.as5D(1,b.shape[0],b.shape[1],b.shape[2],b.shape[3]),E=w.as5D(1,w.shape[0],w.shape[1],w.shape[2],w.shape[3])),Y(_.rank===5,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+_.rank+"."}),Y(E.rank===5,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+E.rank+"."}),v==null&&(v=[1,1,1]),Y(xi(g,v),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+g+" and dilations '"+v+"'"}),y!=null&&Y(Rn(x),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+y+" but got pad "+x+"."});var N=Hg(E.shape,m,g,v,x,y),D=se.runKernelFunc(function(A){return A.avgPool3dBackprop(_,E,N)},{dy5D:_,input5D:E});return C?D.as4D(D.shape[1],D.shape[2],D.shape[3],D.shape[4]):D}(d,u,e,n,o,r,i)}}});return f=f.cast(u.dtype),l?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),ro=ae({slice_:function(t,e,n){var r,i,a=W(t,"x","slice");if(a.rank===0)throw new Error("Slicing scalar is not possible");(r=typeof e=="number"?[e].concat(new Array(a.rank-1).fill(0)):e.length<a.rank?e.concat(new Array(a.rank-e.length).fill(0)):e.slice()).forEach(function(u){Y(u!==-1,function(){return"slice() does not support negative begin indexing."})}),i=(i=n==null?new Array(a.rank).fill(-1):typeof n=="number"?[n].concat(new Array(a.rank-1).fill(-1)):n.length<a.rank?n.concat(new Array(a.rank-n.length).fill(-1)):n).map(function(u,l){return u>=0?u:(Y(u===-1,function(){return"Negative size values should be exactly -1 but got "+u+" for the slice() size at index "+l+"."}),a.shape[l]-r[l])}),pSe(a,r,i);var o=a.shape,s={begin:r,size:i};return se.runKernelFunc(function(u){return u.slice(a,r,i)},{x:a},function(u){for(var l=[],c=0;c<u.rank;c++)l.push([r[c],o[c]-r[c]-i[c]]);return{x:function(){return u.pad(l)}}},"Slice",s)}}),z3e=ae({slice1d_:function(t,e,n){var r=W(t,"x","slice1d");return Y(r.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"}),ro(r,[e],[n])}}),U3e=ae({slice2d_:function(t,e,n){var r=W(t,"x","slice2d");return Y(r.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"}),ro(r,e,n)}}),y9=ae({slice3d_:function(t,e,n){var r=W(t,"x","slice3d");return Y(r.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"}),ro(r,e,n)}}),W3e=ae({slice4d_:function(t,e,n){var r=W(t,"x","slice4d");return Y(r.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"}),ro(r,e,n)}});function x9(t,e,n,r,i){return e.rank<n.rank&&(e=e.reshape(yi(e.shape,r))),t.rank<n.rank&&(t=t.reshape(yi(t.shape,r))),{x:function(){var a=t.mul(n.equal(e).cast(t.dtype));return i==null?a:a.transpose(i)}}}var V3e=ae({all_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=W(t,"x","all","bool"),i=Yn(e,r.shape),a=i,o=co(a,r.rank);o!=null&&(r=r.transpose(o),a=fo(a.length,r.rank));var s=se.runKernelFunc(function(l){return l.all(r,a)},{$x:r});if(n){var u=yi(s.shape,i);return s.reshape(u)}return s}}),q3e=ae({any_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=W(t,"x","any","bool"),i=Yn(e,r.shape),a=i,o=co(a,r.rank);o!=null&&(r=r.transpose(o),a=fo(a.length,r.rank));var s=se.runKernelFunc(function(l){return l.any(r,a)},{$x:r});if(n){var u=yi(s.shape,i);return s.reshape(u)}return s}}),H3e=ae({argMax_:function(t,e){e===void 0&&(e=0);var n=W(t,"x","argMax");e==null&&(e=0);var r=Yn(e,n.shape),i=co(r,n.rank);i!=null&&(n=n.transpose(i),r=fo(r.length,n.rank));var a={axis:r[0]},o=[n];return se.runKernelFunc(function(s,u){var l=s.argMax(n,r[0]);return u([n]),l},{x:n},function(s,u){var l=u[0];return{x:function(){return Ot(l)}}},"ArgMax",a,o)}}),G3e=ae({argMin_:function(t,e){e===void 0&&(e=0);var n=W(t,"x","argMin");e==null&&(e=0);var r=Yn(e,n.shape),i=co(r,n.rank);return i!=null&&(n=n.transpose(i),r=fo(r.length,n.rank)),se.runKernelFunc(function(a,o){var s=a.argMin(n,r[0]);return o([n]),s},{$x:n},function(a,o){var s=o[0];return{$x:function(){return Ot(s)}}})}}),K3e=ae({logSumExp_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=W(t,"x","logSumExp"),i=Yn(e,r.shape),a=r.max(i,!0),o=r.sub(a).exp().sum(i).log(),s=a.reshape(o.shape).add(o);if(n){var u=yi(s.shape,i);return s.reshape(u)}return s}}),xy=ae({max_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=W(t,"x","max"),i=r,a=Yn(e,r.shape),o=a,s=co(o,r.rank);s!=null&&(r=r.transpose(s),o=fo(o.length,r.rank));var u=[r],l=se.runKernelFunc(function(f,d){var h=f.max(r,o);return d([i,h]),h},{x:r},function(f,d){return x9(f,d[1],d[0],a,s)},"Max",{axes:o},u,[!0]);if(n){var c=yi(l.shape,a);l=l.reshape(c)}return l}}),Y3e=ae({mean_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=W(t,"x","mean"),i=Yn(e,r.shape),a=He(Nr(r.shape,i)[1]);return py(function(o){var s=je(a);return{value:(s.dtype===o.dtype?o:o.cast(s.dtype)).div(s).sum(e,n),gradFunc:function(u){var l=o.shape.slice();return i.forEach(function(c){l[c]=1}),u.reshape(l).mul(qf(o.shape,"float32")).div(a)}}})(r)}}),X3e=ae({min_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=W(t,"x","min"),i=r,a=Yn(e,r.shape),o=a,s=co(o,r.rank);s!=null&&(r=r.transpose(s),o=fo(o.length,r.rank));var u=[r],l=se.runKernelFunc(function(f,d){var h=f.min(r,o);return d([i,h]),h},{x:r},function(f,d){return x9(f,d[1],d[0],a,s)},"Min",{axes:o},u,[!0]);if(n){var c=yi(l.shape,a);l=l.reshape(c)}return l}}),Q3e=ae({moments_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=Yn(e,(t=W(t,"x","moments")).shape),i=t.mean(r,n),a=i.shape;n||(a=yi(i.shape,r));var o=t.toFloat().sub(i.reshape(a)).square();return{mean:i,variance:o.mean(r,n)}}}),b9=ae({sum_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=W(t,"x","sum");r.dtype==="bool"&&(r=r.toInt());var i=Yn(e,r.shape);return py(function(a){var o=co(i,a.rank),s=i,u=a;o!=null&&(u=a.transpose(o),s=fo(s.length,a.rank));var l=function(h){var p=a.shape.slice();return i.forEach(function(m){p[m]=1}),h.reshape(p).mul(qf(a.shape,"float32"))},c={axes:s},f=se.runKernelFunc(function(h){return h.sum(u,s)},{x:u},function(h){return{x:function(){return l(h)}}},"Sum",c);if(n){var d=yi(f.shape,i);f=f.reshape(d)}return{value:f,gradFunc:l}})(r)}}),Z3e=ae({prod_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=W(t,"x","prod");r.dtype==="bool"&&(r=r.toInt());var i=Yn(e,r.shape),a=co(i,r.rank),o=i,s=r;a!=null&&(s=r.transpose(a),o=fo(o.length,r.rank));var u=se.runKernelFunc(function(c){return c.prod(s,o)},{permutedX:s});if(n){var l=yi(u.shape,i);u=u.reshape(l)}return u}}),w9=ae({elu_:function(t){var e=W(t,"x","elu");return se.runKernelFunc(function(n,r){var i=n.elu(e);return r([i]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return se.runKernelFunc(function(a){return a.eluDer(n,i)},{dy:n,y:i})}}})}}),J3e=ae({leakyRelu_:function(t,e){e===void 0&&(e=.2);var n=W(t,"x","leakyRelu");return SC(je(e).mul(n),n)}}),_9=ae({prelu_:function(t,e){var n=W(t,"x","prelu"),r=W(e,"alpha","prelu");return se.runKernelFunc(function(i,a){var o=i.prelu(n,r);return a([n,r]),o},{x:n,alpha:r},function(i,a){var o=a[0],s=a[1],u=o.greater(0);return{x:function(){return hl(u,i,i.mul(s))},alpha:function(){var l=hl(u,Ot(i),i.mul(o)),c=Vn(s.shape,i.shape);return c.length>0&&(l=l.sum(c)),l.reshape(s.shape)}}},"Prelu")}}),yn=ae({relu_:function(t){var e=W(t,"x","relu");return e.dtype==="bool"?e.toInt():se.runKernelFunc(function(n,r){var i=n.relu(e);return r([e]),i},{x:e},function(n,r){var i=r[0];return{x:function(){return n.mulStrict(i.step().toFloat())}}},"Relu")}}),E9=ae({relu6_:function(t){var e=W(t,"x","relu6");return e.dtype==="bool"?e.toInt():se.runKernelFunc(function(n,r){var i=n.relu6(e);return r([e]),i},{x:e},function(n,r){var i=r[0],a=i.lessEqual(6).mul(i.step());return{x:function(){return n.mulStrict(a.toFloat())}}},"Relu6")}}),eTe=ae({selu_:function(t){var e=W(t,"x","selu");return se.runKernelFunc(function(n,r){var i=n.selu(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){var a=i.greater(je(0)),o=je(EC),s=je(CC),u=n.mul(s),l=n.mul(o).mul(i.toFloat().exp());return hl(a,u,l)}}})}}),Js=ae({transpose_:function(t,e){var n=W(t,"x","transpose");if(e==null&&(e=n.shape.map(function(i,a){return a}).reverse()),Y(n.rank===e.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of perm "+e+"."}),e.forEach(function(i){Y(i>=0&&i<n.rank,function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+e})}),n.rank<=1)return n.clone();var r={perm:e};return se.runKernelFunc(function(i){return i.transpose(n,e)},{x:n},function(i){var a=hC(e);return{x:function(){return i.transpose(a)}}},"Transpose",r)}}),tTe=ae({localResponseNormalization_:function(t,e,n,r,i){e===void 0&&(e=5),n===void 0&&(n=1),r===void 0&&(r=1),i===void 0&&(i=.5);var a=W(t,"x","localResponseNormalization");Y(a.rank===4||a.rank===3,function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+a.rank+"."}),Y(Rn(e),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+e+"."});var o=a,s=!1;a.rank===3&&(s=!0,o=a.as4D(1,a.shape[0],a.shape[1],a.shape[2]));var u=se.runKernelFunc(function(l,c){var f=l.localResponseNormalization4D(o,e,n,r,i);return c([o,f]),f},{x4D:o},function(l,c){var f=c[0],d=c[1];return{x4D:function(){return se.runKernelFunc(function(h){return h.LRNGrad(l,f,d,e,n,r,i)},{})}}});return s?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),C9=ae({norm_:function(t,e,n,r){e===void 0&&(e="euclidean"),n===void 0&&(n=null),r===void 0&&(r=!1);var i=function s(u,l,c){if(c===void 0&&(c=null),u.rank===0)return u.abs();if(u.rank!==1&&c===null)return s(u.reshape([-1]),l,c);if(u.rank===1||typeof c=="number"||Array.isArray(c)&&c.length===1){if(l===1)return u.abs().sum(c);if(l===1/0)return u.abs().max(c);if(l===-1/0)return u.abs().min(c);if(l==="euclidean"||l===2)return u.abs().pow(je(2,"int32")).sum(c).sqrt();throw new Error("Error in norm: invalid ord value: "+l)}if(Array.isArray(c)&&c.length===2){if(l===1)return u.abs().sum(c[0]).max(c[1]-1);if(l===1/0)return u.abs().sum(c[1]).max(c[0]);if(l===-1/0)return u.abs().sum(c[1]).min(c[0]);if(l==="fro"||l==="euclidean")return u.square().sum(c).sqrt();throw new Error("Error in norm: invalid ord value: "+l)}throw new Error("Error in norm: invalid axis: "+c)}(t=W(t,"x","norm"),e,n),a=i.shape;if(r){var o=Yn(n,t.shape);a=yi(i.shape,o)}return i.reshape(a)}}),nTe=ae({basicLSTMCell_:function(t,e,n,r,i,a){var o=W(t,"forgetBias","basicLSTMCell"),s=W(e,"lstmKernel","basicLSTMCell"),u=W(n,"lstmBias","basicLSTMCell"),l=W(r,"data","basicLSTMCell"),c=W(i,"c","basicLSTMCell"),f=W(a,"h","basicLSTMCell"),d=l.concat(f,1).matMul(s).add(u),h=d.shape[0],p=d.shape[1]/4,m=[h,p],g=d.slice([0,0],m),v=d.slice([0,p],m),x=d.slice([0,2*p],m),y=d.slice([0,3*p],m),b=g.sigmoid().mulStrict(v.tanh()).addStrict(c.mulStrict(o.add(x).sigmoid())),w=b.tanh().mulStrict(y.sigmoid());return[b,w]}}),rTe=ae({multiRNNCell_:function(t,e,n,r){for(var i=W(e,"data","multiRNNCell"),a=$g(n,"c","multiRNNCell"),o=$g(r,"h","multiRNNCell"),s=i,u=[],l=0;l<t.length;l++){var c=t[l](s,a[l],o[l]);u.push(c[0]),u.push(c[1]),s=c[1]}var f=[],d=[];for(l=0;l<u.length;l+=2)f.push(u[l]),d.push(u[l+1]);return[f,d]}}),iTe=ae({movingAverage_:function(t,e,n,r,i){i===void 0&&(i=!0);var a=W(t,"v","movingAverage"),o=W(e,"x","movingAverage"),s=W(n,"decay","movingAverage");tNe(a,o),Y(ar(a.shape,o.shape),function(){return"Shape mismatch in v and x"});var u=je(1),l=u.sub(s),c=o.sub(a).mul(l);if(i){Y(r!=null,function(){return"When using zeroDebias: true, step is required."});var f=W(r,"step","movingAverage");c=c.div(u.sub(Xg(s,f)))}return a.add(c)}}),aTe=ae({stridedSlice_:function(t,e,n,r,i,a,o,s,u){if(i===void 0&&(i=0),a===void 0&&(a=0),o===void 0&&(o=0),s===void 0&&(s=0),u===void 0&&(u=0),r==null&&(r=new Array(e.length)),o!==0)throw new Error("ellipsis mask is not yet supported");var l=W(t,"x","stridedSlice"),c=G4(s),f=l.shape.slice();c.forEach(function(g){e[g]=0,n[g]=1,f.splice(g,0,1)}),l=l.reshape(f);for(var d=0;d<l.rank;d++)e[d]=mSe(i,e,r,l.shape,d),n[d]=vSe(a,n,r,l.shape,d),r[d]=r[d]||1;var h=G4(u);h.forEach(function(g){n[g]=e[g]+1,r[g]=1});var p=gC(e,n,r),m=p.filter(function(g,v){return h.indexOf(v)===-1});return r.every(function(g){return g===1})?ro(l,e,p).reshape(m):se.runKernelFunc(function(g){return g.stridedSlice(l,e,n,r)},{$x:l}).reshape(m)}}),oTe=ae({topk_:function(t,e,n){e===void 0&&(e=1),n===void 0&&(n=!0);var r=W(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var i=r.shape[r.shape.length-1];if(e>i)throw new Error("'k' passed to topk() must be <= the last dimension ("+i+") but got "+e);var a=se.runKernelFunc(function(o){return o.topk(r,e,n)},{$x:r});return{values:a[0],indices:a[1]}}}),sTe=ae({scatterND_:function(t,e,n){var r=W(t,"indices","scatterND","int32"),i=W(e,"updates","scatterND");return hSe(i,r,n),se.runKernelFunc(function(a){return a.scatterND(r,i,n)},{indices:r,updates:i},null,"ScatterNd",{shape:n})}}),MC=ae({fft_:function(t){Y(t.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+t.dtype+"."});var e=t.shape[t.shape.length-1],n=t.size/e,r=t.as2D(n,e);return se.runKernelFunc(function(i){return i.fft(r)},{input:t}).reshape(t.shape)}}),Qg=ae({ifft_:function(t){Y(t.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+t.dtype+"."});var e=t.shape[t.shape.length-1],n=t.size/e,r=t.as2D(n,e);return se.runKernelFunc(function(i){return i.ifft(r)},{input:t}).reshape(t.shape)}}),IC=ae({rfft_:function(t,e){Y(t.dtype==="float32",function(){return"The dtype for rfft() must be real value but got "+t.dtype});var n,r=t.shape[t.shape.length-1],i=t.size/r;if(e!=null&&e<r){var a=t.shape.map(function(v){return 0}),o=t.shape.map(function(v){return v});o[t.shape.length-1]=e,n=t.slice(a,o),r=e}else if(e!=null&&e>r){var s=t.shape.map(function(v){return v});s[t.shape.length-1]=e-r,n=t.concat(sn(s),t.shape.length-1),r=e}else n=t;var u=n.zerosLike(),l=lr(n,u).as2D(i,r),c=MC(l),f=Math.floor(r/2)+1,d=Yi(c),h=qa(c),p=d.split([f,r-f],d.shape.length-1),m=h.split([f,r-f],h.shape.length-1),g=n.shape.slice();return g[n.shape.length-1]=f,lr(p[0],m[0]).reshape(g)}}),N9=ae({irfft_:function(t){var e=t.shape[t.shape.length-1],n=t.size/e;if(e<=2){var r=t.as2D(n,e),i=Qg(r);return Yi(i)}var a=[n,2*(e-1)],o=Yi(t).as2D(n,e),s=qa(t).as2D(n,e),u=o.slice([0,1],[n,e-2]).reverse(1),l=s.slice([0,1],[n,e-2]).reverse(1).mul(je(-1)),c=o.concat(u,1),f=s.concat(l,1);return r=lr(c,f).as2D(a[0],a[1]),i=Qg(r),Yi(i)}}),uTe=Object.freeze({fft:MC,ifft:Qg,rfft:IC,irfft:N9}),lTe=ae({sparseToDense_:function(t,e,n,r){r===void 0&&(r=0);var i=W(t,"sparseIndices","sparseToDense","int32"),a=W(e,"sparseValues","sparseToDense"),o=W(r,"defaultValue","sparseToDense",a.dtype);return function(s,u,l,c){if(s.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+s.dtype+".");if(s.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+s.shape+".");var f=s.rank>0?s.shape[0]:1,d=s.rank>1?s.shape[1]:1;if(l.length!==d)throw new Error("outputShape has incorrect number of elements:, "+l.length+", should be: "+d+".");var h=u.size;if(u.rank!==0&&(u.rank!==1||h!==f))throw new Error("sparseValues has incorrect shape "+u.shape+", should be [] or ["+f+"]");if(u.dtype!==c.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(i,a,n,o),se.runKernelFunc(function(s){return s.sparseToDense(i,a,n,o)},{$sparseIndices:i,$sparseValues:a,$defaultValue:o})}}),cTe=ae({gatherND_:function(t,e){var n=W(e,"indices","gatherND","int32"),r=W(t,"x","gatherND");return se.runKernelFunc(function(i){return i.gatherND(r,n)},{x:r,indices:n},null,"GatherNd")}}),fTe=ae({diag_:function(t){var e=W(t,"x","diag").flatten(),n=t.shape.concat(t.shape);return se.runKernelFunc(function(r){return r.diag(e)},{$x:e}).reshape(n)}}),dTe=ae({dropout_:function(t,e,n,r){var i=W(t,"x","dropout");if(Y(i.dtype==="float32",function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+i.dtype+" tensor instead."}),Y(e>=0&&e<1,function(){return"rate must be a float in the range [0, 1), but got "+e+"."}),e===0)return t instanceof vn?i.clone():i;var a=function(u,l){if(l==null)return u.shape.slice();if(ar(u.shape,l))return l;if(u.shape.length===l.length){for(var c=[],f=0;f<u.shape.length;f++)l[f]==null&&u.shape[f]!=null?c.push(u.shape[f]):c.push(l[f]);return c}return l}(i,n),o=1-e,s=_7(a,0,1,"float32",r).add(o).floor().div(o);return i.mul(s)}});function S9(t,e,n){for(var r=1-t%2,i=new Float32Array(t),a=0;a<t;++a){var o=2*Math.PI*a/(t+r-1);i[a]=e-n*Math.cos(o)}return Fn(i,"float32")}var RC=ae({hannWindow_:function(t){return S9(t,.5,.5)}}),D9=ae({hammingWindow_:function(t){return S9(t,.54,.46)}}),kC=ae({frame_:function(t,e,n,r,i){r===void 0&&(r=!1),i===void 0&&(i=0);for(var a=0,o=[];a+e<=t.size;)o.push(ro(t,a,e)),a+=n;if(r)for(;a<t.size;){var s=a+e-t.size,u=Un([ro(t,a,e-s),to([s],i)]);o.push(u),a+=n}return o.length===0?$s([],[0,e]):Un(o).as2D(o.length,e)}}),A9=ae({stft_:function(t,e,n,r,i){var a;i===void 0&&(i=RC),r==null&&(a=e,r=Math.floor(Math.pow(2,Math.ceil(Math.log(a)/Math.log(2)))));for(var o=kC(t,e,n),s=kr(o,i(e)),u=[],l=0;l<o.shape[0];l++)u.push(IC(s.slice([l,0],[1,e]),r));return Un(u)}}),hTe=Object.freeze({hannWindow:RC,hammingWindow:D9,frame:kC,stft:A9}),Ir,pTe=function(t,e,n){return n===void 0&&(n=1),We(this,void 0,void 0,function(){var r,i,a,o,s,u,l,c,f,d,h,p,m,g;return Ve(this,function(v){switch(v.label){case 0:return r=W(t,"predictions","inTopK"),i=W(e,"targets","inTopK"),Y(r.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank}),Y(r.rank-1===i.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+i.rank}),Wt(r.shape.slice(0,r.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),a=r.shape[r.shape.length-1],Y(n>0&&n<=a,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+a+"), but got "+n}),[4,r.data()];case 1:return o=v.sent(),[4,i.data()];case 2:for(s=v.sent(),u=[o.length/a,a],c=u[1],f=Bh("bool",l=u[0]),d=0;d<l;d++){for(h=d*c,p=o.subarray(h,h+c),m=[],g=0;g<p.length;g++)m.push({value:p[g],index:g});for(m.sort(function(x,y){return y.value-x.value}),f[d]=0,g=0;g<n;g++)if(m[g].index===s[d]){f[d]=1;break}}return t!==r&&r.dispose(),e!==i&&i.dispose(),[2,fr(f,i.shape,"bool")]}})})};(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Ir||(Ir={}));var mTe=ae({absoluteDifference_:function(t,e,n,r){r===void 0&&(r=Ir.SUM_BY_NONZERO_WEIGHTS);var i=W(t,"labels","absoluteDifference"),a=W(e,"predictions","absoluteDifference"),o=null;n!=null&&(o=W(n,"weights","absoluteDifference")),Wt(i.shape,a.shape,"Error in absoluteDifference: ");var s=i.sub(a).abs();return es(s,o,r)}}),es=ae({computeWeightedLoss_:function(t,e,n){n===void 0&&(n=Ir.SUM_BY_NONZERO_WEIGHTS);var r=W(t,"losses","computeWeightedLoss"),i=null;e!=null&&(i=W(e,"weights","computeWeightedLoss"));var a=i==null?r:r.mul(i);if(n===Ir.NONE)return a;if(n===Ir.SUM)return a.sum();if(n===Ir.MEAN){if(i==null)return a.mean();var o=r.size/i.size,s=a.sum().div(i.sum());return o>1?s.div(je(o)):s}if(n===Ir.SUM_BY_NONZERO_WEIGHTS){if(i==null)return a.sum().div(je(r.size));var u=i.mul(qf(r.shape)).notEqual(je(0)).sum().toFloat();return a.sum().div(u)}throw Error("Unknown reduction: "+n)}}),vTe=ae({cosineDistance_:function(t,e,n,r,i){i===void 0&&(i=Ir.SUM_BY_NONZERO_WEIGHTS);var a=W(t,"labels","cosineDistance"),o=W(e,"predictions","cosineDistance"),s=null;r!=null&&(s=W(r,"weights","cosineDistance")),Wt(a.shape,o.shape,"Error in cosineDistance: ");var u=je(1).sub(a.mul(o).sum(n,!0));return es(u,s,i)}}),gTe=ae({hingeLoss_:function(t,e,n,r){r===void 0&&(r=Ir.SUM_BY_NONZERO_WEIGHTS);var i=W(t,"labels","hingeLoss"),a=W(e,"predictions","hingeLoss"),o=null;n!=null&&(o=W(n,"weights","hingeLoss")),Wt(i.shape,a.shape,"Error in hingeLoss: ");var s=je(1);i=je(2).mul(i).sub(s);var u=s.sub(i.mul(a)).relu();return es(u,o,r)}}),yTe=ae({huberLoss_:function(t,e,n,r,i){r===void 0&&(r=1),i===void 0&&(i=Ir.SUM_BY_NONZERO_WEIGHTS);var a=W(t,"labels","huberLoss"),o=W(e,"predictions","huberLoss"),s=null;n!=null&&(s=W(n,"weights","huberLoss")),Wt(a.shape,o.shape,"Error in huberLoss: ");var u=je(r),l=o.sub(a).abs(),c=s9(l,u),f=l.sub(c),d=je(.5).mul(c.square()).add(u.mul(f));return es(d,s,i)}}),xTe=ae({logLoss_:function(t,e,n,r,i){r===void 0&&(r=1e-7),i===void 0&&(i=Ir.SUM_BY_NONZERO_WEIGHTS);var a=W(t,"labels","logLoss"),o=W(e,"predictions","logLoss"),s=null;n!=null&&(s=W(n,"weights","logLoss")),Wt(a.shape,o.shape,"Error in logLoss: ");var u=je(1),l=je(r),c=a.mul(o.add(l).log()).neg().sub(u.sub(a).mul(u.sub(o).add(l).log()));return es(c,s,i)}}),bTe=ae({meanSquaredError_:function(t,e,n,r){r===void 0&&(r=Ir.SUM_BY_NONZERO_WEIGHTS);var i=W(t,"labels","meanSquaredError"),a=W(e,"predictions","meanSquaredError"),o=null;n!=null&&(o=W(n,"weights","meanSquaredError")),Wt(i.shape,a.shape,"Error in meanSquaredError: ");var s=i.squaredDifference(a);return es(s,o,r)}}),wTe=ae({sigmoidCrossEntropy_:function(t,e,n,r,i){r===void 0&&(r=0),i===void 0&&(i=Ir.SUM_BY_NONZERO_WEIGHTS);var a=W(t,"multiClassLabels","sigmoidCrossEntropy"),o=W(e,"logits","sigmoidCrossEntropy"),s=null;if(n!=null&&(s=W(n,"weights","sigmoidCrossEntropy")),Wt(a.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=je(r),l=je(1),c=je(.5);a=a.mul(l.sub(u)).add(c.mul(u))}var f=function(d,h){var p=W(d,"labels","sigmoidCrossEntropyWithLogits"),m=W(h,"logits","sigmoidCrossEntropyWithLogits");Wt(p.shape,m.shape,"Error in sigmoidCrossEntropyWithLogits: ");var g=m.relu(),v=m.mul(p),x=m.abs().neg().exp().log1p();return g.sub(v).add(x)}(a,o);return es(f,s,i)}}),_Te=ae({softmaxCrossEntropy_:function(t,e,n,r,i){r===void 0&&(r=0),i===void 0&&(i=Ir.SUM_BY_NONZERO_WEIGHTS);var a=W(t,"onehotLabels","softmaxCrossEntropy"),o=W(e,"logits","softmaxCrossEntropy"),s=null;if(n!=null&&(s=W(n,"weights","softmaxCrossEntropy")),Wt(a.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){var u=je(r),l=je(1),c=je(a.shape[1]);a=a.mul(l.sub(u)).add(u.div(c))}var f=function(d,h,p){if(p===void 0&&(p=-1),p===-1&&(p=h.rank-1),p!==h.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+h.rank+" and dim was "+p);return py(function(m,g,v){var x=g.logSumExp([p],!0),y=g.toFloat().sub(x);return v([m,y]),{value:y.mul(m).neg().sum([p]),gradFunc:function(b,w){var _=w[0],E=w[1],C=yi(b.shape,[p]);return[b.reshape(C).mul(_.toFloat().sub(E.exp())),b.reshape(C).mul(E.exp().sub(_.toFloat()))]}}})(d,h)}(a,o);return es(f,s,i)}}),ETe=Object.freeze({get Reduction(){return Ir},absoluteDifference:mTe,computeWeightedLoss:es,cosineDistance:vTe,hingeLoss:gTe,huberLoss:yTe,logLoss:xTe,meanSquaredError:bTe,sigmoidCrossEntropy:wTe,softmaxCrossEntropy:_Te});function mR(t,e){return e===void 0&&(e=!1),se.tidy(function(){if(t.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+t.shape.length+"D Tensor.");for(var n=t.shape[0],r=t.shape[1],i=w7(n),a=t.clone(),o=$s([[1]],[1,1]),s=o.clone(),u=n>=r?r:n,l=function(f){var d,h=a,p=s,m=i;d=se.tidy(function(){var g=a.slice([f,f],[n-f,1]),v=g.norm(),x=a.slice([f,f],[1,1]),y=$s([[-1]]).where(x.greater(0),$s([[1]])),b=x.sub(y.mul(v)),w=g.div(b);s=w.shape[0]===1?o.clone():o.concat(w.slice([1,0],[w.shape[0]-1,w.shape[1]]),0);var _=y.matMul(b).div(v).neg(),E=a.slice([f,0],[n-f,r]),C=_.mul(s);if(f===0)a=E.sub(C.matMul(s.transpose().matMul(E)));else{var N=E.sub(C.matMul(s.transpose().matMul(E)));a=a.slice([0,0],[f,r]).concat(N,0)}var D=i.slice([0,f],[n,i.shape[1]-f]);if(f===0)i=D.sub(D.matMul(s).matMul(C.transpose()));else{var A=D.sub(D.matMul(s).matMul(C.transpose()));i=i.slice([0,0],[n,f]).concat(A,1)}return[s,a,i]}),s=d[0],a=d[1],i=d[2],mi([h,p,m])},c=0;c<u;++c)l(c);return!e&&n>r&&(i=i.slice([0,0],[n,r]),a=a.slice([0,0],[r,r])),[i,a]})}var CTe=ae({bandPart_:function(t,e,n){if(e%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+e+".");if(n%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+n+".");var r=W(t,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var i=r.shape,a=r.shape.slice(-2),o=a[0],s=a[1];if(!(e<=o))throw new Error("bandPart(): numLower ("+e+") must not be greater than the number of rows ("+o+").");if(!(n<=s))throw new Error("bandPart(): numUpper ("+n+") must not be greater than the number of columns ("+s+").");e<0&&(e=o),n<0&&(n=s);var u=zg(0,o,1,"int32").reshape([-1,1]),l=zg(0,s,1,"int32"),c=qn(u,l),f=vy(c.lessEqual(je(+e,"int32")),c.greaterEqual(je(-n,"int32"))),d=sn([o,s],r.dtype);return Ii(Wn(r.reshape([-1,o,s])).map(function(h){return hl(f,h,d)})).reshape(i)}}),NTe=ae({gramSchmidt_:function(t){var e;if(Array.isArray(t)){e=!1,Y(t!=null&&t.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var n=t[0].shape[0],r=function(u){Y(t[u].shape[0]===n,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+t[u].shape[0]+" vs. "+n+")"})},i=1;i<t.length;++i)r(i)}else e=!0,t=mC(t,t.shape[0],0).map(function(u){return C7(u,[0])});Y(t.length<=t[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+t.length+") exceeds number of dimensions ("+t[0].shape[0]+")."});var a=[],o=t,s=function(u){a.push(se.tidy(function(){var l=o[u];if(u>0)for(var c=0;c<u;++c){var f=b9(a[c].mulStrict(l)).mul(a[c]);l=l.sub(f)}return l.div(C9(l,"euclidean"))}))};for(i=0;i<t.length;++i)s(i);return e?Ii(a,0):a}}),STe=ae({qr_:function(t,e){if(e===void 0&&(e=!1),t.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+t.rank);if(t.rank===2)return mR(t,e);var n=t.shape.slice(0,t.shape.length-2).reduce(function(o,s){return o*s}),r=Wn(t.reshape([n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),i=[],a=[];return r.forEach(function(o){var s=mR(o,e),u=s[0],l=s[1];i.push(u),a.push(l)}),[Ii(i,0).reshape(t.shape),Ii(a,0).reshape(t.shape)]}}),DTe=Object.freeze({bandPart:CTe,gramSchmidt:NTe,qr:STe});function by(t,e,n,r,i,a){r==null&&(r=.5),i==null&&(i=Number.NEGATIVE_INFINITY),a==null&&(a=0);var o=t.shape[0];return n=Math.min(n,o),Y(0<=r&&r<=1,function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"}),Y(t.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '"+t.rank+"'"}),Y(t.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was "+t.shape[1]}),Y(e.rank===1,function(){return"scores must be a 1D tensor"}),Y(e.shape[0]===o,function(){return"scores has incompatible shape with boxes. Expected "+o+", but was "+e.shape[0]}),Y(0<=a&&a<=1,function(){return"softNmsSigma must be in [0, 1], but was '"+a+"'"}),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:a}}var ATe=ae({resizeBilinear_:function(t,e,n){n===void 0&&(n=!1);var r=W(t,"images","resizeBilinear");Y(r.rank===3||r.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."}),Y(e.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+e+"."});var i=r,a=!1;r.rank===3&&(a=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var o=e[0],s=e[1],u=se.runKernelFunc(function(l,c){return c([i]),l.resizeBilinear(i,o,s,n)},{x:i},function(l,c){return{x:function(){return se.runKernelFunc(function(f){return f.resizeBilinearBackprop(l,c[0],n)},{})}}},"ResizeBilinear",{alignCorners:n,newHeight:o,newWidth:s});return a?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),TTe=ae({resizeNearestNeighbor_:function(t,e,n){n===void 0&&(n=!1);var r=W(t,"images","resizeNearestNeighbor");Y(r.rank===3||r.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."}),Y(e.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+e+"."}),Y(r.dtype==="float32"||r.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"});var i=r,a=!1;r.rank===3&&(a=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var o=e[0],s=e[1],u=se.runKernelFunc(function(l,c){return c([i]),l.resizeNearestNeighbor(i,o,s,n)},{batchImages:i},function(l,c){return{batchImages:function(){return se.runKernelFunc(function(f){return f.resizeNearestNeighborBackprop(l,c[0],n)},{})}}});return a?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),MTe=ae({nonMaxSuppression_:function(t,e,n,r,i){r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY);var a=W(t,"boxes","nonMaxSuppression"),o=W(e,"scores","nonMaxSuppression"),s=by(a,o,n,r,i);n=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold;var u={maxOutputSize:n,iouThreshold:r,scoreThreshold:i};return se.runKernelFunc(function(l){return l.nonMaxSuppression(a,o,n,r,i)},{boxes:a,scores:o},null,"NonMaxSuppressionV3",u)}}),ITe=function(t,e,n,r,i){return r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY),We(this,void 0,void 0,function(){var a,o,s,u,l,c,f;return Ve(this,function(d){switch(d.label){case 0:return a=W(t,"boxes","nonMaxSuppressionAsync"),o=W(e,"scores","nonMaxSuppressionAsync"),s=by(a,o,n,r,i),n=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold,[4,Promise.all([a.data(),o.data()])];case 1:return u=d.sent(),l=u[0],c=u[1],f=xC(l,c,n,r,i),a!==t&&a.dispose(),o!==e&&o.dispose(),[2,f]}})})},RTe=ae({nonMaxSuppressionWithScore_:function(t,e,n,r,i,a){r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY),a===void 0&&(a=0);var o=W(t,"boxes","nonMaxSuppression"),s=W(e,"scores","nonMaxSuppression"),u=by(o,s,n,r,i,a),l={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:i=u.scoreThreshold,softNmsSigma:a=u.softNmsSigma},c=se.runKernel("NonMaxSuppressionV5",{boxes:o,scores:s},l);return{selectedIndices:c[0],selectedScores:c[1]}}}),kTe=function(t,e,n,r,i,a){return r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY),a===void 0&&(a=0),We(this,void 0,void 0,function(){var o,s,u,l,c,f,d;return Ve(this,function(h){switch(h.label){case 0:return o=W(t,"boxes","nonMaxSuppressionAsync"),s=W(e,"scores","nonMaxSuppressionAsync"),u=by(o,s,n,r,i,a),n=u.maxOutputSize,r=u.iouThreshold,i=u.scoreThreshold,a=u.softNmsSigma,[4,Promise.all([o.data(),s.data()])];case 1:return l=h.sent(),c=l[0],f=l[1],d=bC(c,f,n,r,i,a),o!==t&&o.dispose(),s!==e&&s.dispose(),[2,d]}})})},FTe=ae({cropAndResize_:function(t,e,n,r,i,a){var o=W(t,"image","cropAndResize"),s=W(e,"boxes","cropAndResize","float32"),u=W(n,"boxInd","cropAndResize","int32");i=i||"bilinear",a=a||0;var l=s.shape[0];return Y(o.rank===4,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+o.rank+"."}),Y(s.rank===2&&s.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size ["+l+",4] but had shape "+s.shape+"."}),Y(u.rank===1&&u.shape[0]===l,function(){return"Error in cropAndResize: boxInd must be have size ["+l+"] but had shape "+s.shape+"."}),Y(r.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."}),Y(r[0]>=1&&r[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+r}),Y(i==="bilinear"||i==="nearest",function(){return"method must be bilinear or nearest, but was "+i}),se.runKernelFunc(function(c,f){return c.cropAndResize(o,s,u,r,i,a)},{images:o,boxes:s,boxInd:u},null,"CropAndResize",{method:i,extrapolationValue:a,cropSize:r})}}),FC=Object.freeze({resizeBilinear:ATe,resizeNearestNeighbor:TTe,nonMaxSuppression:MTe,nonMaxSuppressionAsync:ITe,nonMaxSuppressionWithScore:RTe,nonMaxSuppressionWithScoreAsync:kTe,cropAndResize:FTe}),PC=function(t,e){return!(t>0)||e==="linear"},OC=function(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return t.mul(e.step());throw new Error("Gradient for activation "+n+" has not been implemented yet.")},BC=function(t,e){var n=e,r=Vn(t.shape,e.shape);return r.length>0&&(n=n.sum(r)),n.reshape(t.shape)},LC=function(t,e,n){if(e==="linear")return t;if(e==="relu")return yn(t);if(e==="elu")return w9(t);if(e==="relu6")return E9(t);if(e==="prelu")return _9(t,n);throw new Error("Unknown fused activation "+e+".")},PTe=ae({fusedMatMul_:function(t){var e,n=t.a,r=t.b,i=t.transposeA,a=i!==void 0&&i,o=t.transposeB,s=o!==void 0&&o,u=t.bias,l=t.activation,c=l===void 0?"linear":l,f=t.preluActivationWeights;if(PC(se.state.gradientDepth,c)===!1){var d=yy(n,r,a,s);return u!=null&&(d=St(d,u)),LC(d,c,f)}var h=W(n,"a","fused matMul"),p=W(r,"b","fused matMul");e=_n(h,p),h=e[0],p=e[1];var m=a?h.shape[h.rank-2]:h.shape[h.rank-1],g=s?p.shape[p.rank-1]:p.shape[p.rank-2],v=a?h.shape[h.rank-1]:h.shape[h.rank-2],x=s?p.shape[p.rank-2]:p.shape[p.rank-1],y=h.shape.slice(0,-2),b=p.shape.slice(0,-2),w=He(y),_=He(b);Y(h.rank>=2&&p.rank>=2&&h.rank===p.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+h.rank+" and "+p.rank+"."}),Y(ar(y,b),function(){return"Error in fused matMul: outer dimensions ("+y+") and ("+b+") of Tensors with shapes "+h.shape+" and "+p.shape+" must match."}),Y(m===g,function(){return"Error in fused matMul: inner shapes ("+m+") and ("+g+") of Tensors with shapes "+h.shape+" and "+p.shape+" and transposeA="+a+" and transposeB="+s+" must match."});var E,C,N=h.shape.slice(0,-2).concat([v,x]),D=a?h.as3D(w,m,v):h.as3D(w,v,m),A=s?p.as3D(_,x,g):p.as3D(_,g,x);u!=null&&Mt(N,(E=_n(E=W(u,"bias","fused matMul"),h)[0]).shape),f!=null&&(C=W(f,"prelu weights","fused matMul"));var T={a:D,b:A};u!=null&&(T.bias=E),f!=null&&(T.preluActivationWeights=C);var k=[D,A];return se.runKernelFunc(function(F,O){var I=F.fusedBatchMatMul({a:D,b:A,transposeA:a,transposeB:s,bias:E,activation:c,preluActivationWeights:C});return O([D,A,I]),I},T,function(F,O){var I=O[0],M=O[1],B=O[2],R=OC(F,B,c),j={};return u!=null&&(j={bias:function(){return BC(E,R)}}),Object.assign(a||s?!a&&s?{a:function(){return R.matMul(M,!1,!1)},b:function(){return R.matMul(I,!0,!1)}}:a&&!s?{a:function(){return M.matMul(R,!1,!0)},b:function(){return I.matMul(R,!1,!1)}}:{a:function(){return M.matMul(R,!0,!0)},b:function(){return R.matMul(I,!0,!0)}}:{a:function(){return R.matMul(M,!1,!0)},b:function(){return I.matMul(R,!0,!1)}},j)},"_FusedMatMul",{transposeA:a,transposeB:s,activation:c},k,[!0]).reshape(N)}}),OTe=ae({fusedConv2d_:function(t){var e=t.x,n=t.filter,r=t.strides,i=t.pad,a=t.dataFormat,o=a===void 0?"NHWC":a,s=t.dilations,u=s===void 0?[1,1]:s,l=t.dimRoundingMode,c=t.bias,f=t.activation,d=f===void 0?"linear":f,h=t.preluActivationWeights;if(d=d||"linear",PC(se.state.gradientDepth,d)===!1){var p=sa(e,n,r,i,o,u,l);return c!=null&&(p=St(p,c)),LC(p,d,h)}var m=W(e,"x","conv2d"),g=W(n,"filter","conv2d"),v=m,x=!1;m.rank===3&&(x=!0,v=m.as4D(1,m.shape[0],m.shape[1],m.shape[2])),Y(v.rank===4,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+v.rank+"."}),Y(g.rank===4,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+g.rank+"."}),l!=null&&Y(Rn(i),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+l+" but got pad "+i+"."}),Y(v.shape[3]===g.shape[2],function(){return"Error in conv2d: depth of input ("+v.shape[3]+") must match input depth for filter "+g.shape[2]+"."}),Y(xi(r,u),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"}),Y(o==="NHWC",function(){return"Error in conv2d: got dataFormat of "+o+" but only NHWC is currently supported."});var y,b,w=kl(v.shape,g.shape,r,u,i,l);c!=null&&(y=_n(y=W(c,"bias","fused conv2d"),m)[0],Mt(w.outShape,y.shape)),h!=null&&(b=W(h,"prelu weights","fused conv2d"));var _={x:v,filter:g};c!=null&&(_.bias=y),h!=null&&(_.preluActivationWeights=b);var E=[g,v],C=se.runKernelFunc(function(N,D){var A=N.fusedConv2d({input:v,filter:g,convInfo:w,bias:y,activation:d,preluActivationWeights:b});return D([g,v,A]),A},_,function(N,D){var A=D,T=A[0],k=A[1],F=A[2],O=OC(N,F,d);Y(mf(u),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+u+"'"});var I={};return c!=null&&(I={bias:function(){return BC(y,O)}}),Object.assign({x:function(){return h9(k.shape,O,T,r,i)},filter:function(){return AC(k,O,T.shape,r,i)}},I)},"FusedConv2D",{convInfo:w,activation:d},E,[!0]);return x?C.as3D(C.shape[1],C.shape[2],C.shape[3]):C}}),BTe=ae({fusedDepthwiseConv2d_:function(t){var e=t.x,n=t.filter,r=t.strides,i=t.pad,a=t.dataFormat,o=a===void 0?"NHWC":a,s=t.dilations,u=s===void 0?[1,1]:s,l=t.dimRoundingMode,c=t.bias,f=t.activation,d=f===void 0?"linear":f,h=t.preluActivationWeights;if(PC(se.state.gradientDepth,d)===!1){var p=gy(e,n,r,i,o,u,l);return c!=null&&(p=St(p,c)),LC(p,d,h)}var m=W(e,"x","depthwiseConv2d"),g=W(n,"filter","depthwiseConv2d"),v=m,x=!1;m.rank===3&&(x=!0,v=m.as4D(1,m.shape[0],m.shape[1],m.shape[2])),Y(v.rank===4,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+v.rank+"."}),Y(g.rank===4,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+g.rank+"."}),Y(v.shape[3]===g.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+v.shape[3]+") must match the inChannels dimension in filter "+g.shape[2]+"."}),u==null&&(u=[1,1]),Y(xi(r,u),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"}),l!=null&&Y(Rn(i),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+l+" but got pad "+i+"."});var y,b,w=kl(v.shape,g.shape,r,u,i,l,!0);c!=null&&(y=_n(y=W(c,"bias","fused conv2d"),m)[0],Mt(w.outShape,y.shape)),h!=null&&(b=W(h,"prelu weights","fused depthwiseConv2d"));var _={x:v,filter:g};c!=null&&(_.bias=y),h!=null&&(_.preluActivationWeights=b);var E=[g,v],C=se.runKernelFunc(function(N,D){var A=N.fusedDepthwiseConv2D({input:v,filter:g,convInfo:w,bias:y,activation:d,preluActivationWeights:b});return D([g,v,A]),A},_,function(N,D){Y(mf(u),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+u+"'"});var A=D[0],T=D[1],k=D[2],F=OC(N,k,d),O={};return c!=null&&(O={bias:function(){return BC(y,F)}}),Object.assign({x:function(){return p9(T.shape,F,A,w)},filter:function(){return m9(T,F,A.shape,w)}},O)},"FusedDepthwiseConv2D",{convInfo:w,activation:d},E,[!0]);return x?C.as3D(C.shape[1],C.shape[2],C.shape[3]):C}}),LTe=Object.freeze({matMul:PTe,conv2d:OTe,depthwiseConv2d:BTe}),jTe=Object.freeze({image:FC,linalg:DTe,losses:ETe,spectral:uTe,fused:LTe,signal:hTe,square:xAe,squaredDifference:Q7,conv1d:A3e,conv2d:sa,conv3d:T3e,depthwiseConv2d:gy,separableConv2d:TC,conv2dTranspose:M3e,conv3dTranspose:I3e,op:ae,batchNormalization2d:YAe,batchNormalization3d:XAe,batchNormalization4d:QAe,batchNormalization:ZAe,batchNorm:r9,batchNorm2d:JAe,batchNorm3d:e3e,batchNorm4d:t3e,booleanMaskAsync:D3e,complex:lr,real:Yi,imag:qa,concat:Un,concat1d:LNe,concat2d:jNe,concat3d:$Ne,concat4d:zNe,split:mC,matMul:yy,dot:R3e,outerProduct:k3e,reverse:Sp,reverse1d:F3e,reverse2d:P3e,reverse3d:O3e,reverse4d:B3e,maxPool:Zn,avgPool:Dp,pool:L3e,maxPool3d:j3e,avgPool3d:$3e,slice:ro,slice1d:z3e,slice2d:U3e,slice3d:y9,slice4d:W3e,abs:bAe,acos:wAe,acosh:_Ae,asin:EAe,asinh:CAe,atan:NAe,atanh:SAe,ceil:DAe,clipByValue:NC,cos:AAe,cosh:TAe,erf:MAe,exp:Pw,expm1:IAe,floor:RAe,log:kAe,log1p:FAe,logSigmoid:PAe,neg:Yg,reciprocal:OAe,round:BAe,rsqrt:Z7,sigmoid:J7,sign:LAe,isNaN:jAe,isInf:$Ae,isFinite:zAe,sin:UAe,sinh:WAe,softplus:VAe,sqrt:qAe,step:HAe,tan:GAe,tanh:KAe,all:V3e,any:q3e,argMax:H3e,argMin:G3e,logSumExp:K3e,max:xy,mean:Y3e,min:X3e,moments:Q3e,sum:b9,prod:Z3e,equal:u9,equalStrict:g3e,greater:y3e,greaterEqual:l9,greaterEqualStrict:x3e,greaterStrict:b3e,less:w3e,lessEqual:_3e,lessEqualStrict:E3e,lessStrict:C3e,notEqual:N3e,notEqualStrict:S3e,add:St,addN:i3e,addStrict:a3e,atan2:o3e,div:va,divNoNan:s3e,divStrict:u3e,floorDiv:o9,maximum:SC,maximumStrict:l3e,minimum:s9,minimumStrict:c3e,mod:f3e,modStrict:d3e,mul:kr,mulStrict:h3e,pow:Xg,powStrict:p3e,squaredDifferenceStrict:m3e,sub:qn,subStrict:v3e,elu:w9,leakyRelu:J3e,prelu:_9,relu:yn,relu6:E9,selu:eTe,logicalAnd:vy,logicalNot:n3e,logicalOr:i9,logicalXor:r3e,where:hl,whereAsync:a9,buffer:vt,print:XNe,batchToSpaceND:b7,broadcastTo:QNe,cast:ZNe,clone:JNe,cumsum:eSe,depthToSpace:tSe,expandDims:Gi,eye:w7,multinomial:nSe,oneHot:Iw,pad:Rl,pad1d:rSe,pad2d:iSe,pad3d:aSe,pad4d:oSe,rand:sSe,randomNormal:uSe,randomGamma:lSe,randomUniform:_7,reshape:wa,spaceToBatchND:E7,squeeze:C7,stack:Ii,tile:Fc,truncatedNormal:cSe,unstack:Wn,setdiff1dAsync:fSe,fill:to,linspace:BNe,ones:qf,range:zg,scalar:je,tensor:fr,tensor1d:Fn,tensor2d:$s,tensor3d:pC,tensor4d:ri,tensor5d:FNe,tensor6d:PNe,variable:ONe,zeros:sn,onesLike:x7,zerosLike:Ot,transpose:Js,softmax:Jo,logSoftmax:ySe,localResponseNormalization:tTe,norm:C9,gather:DC,unsortedSegmentSum:c9,basicLSTMCell:nTe,multiRNNCell:rTe,movingAverage:iTe,stridedSlice:aTe,topk:oTe,scatterND:sTe,fft:MC,ifft:Qg,rfft:IC,irfft:N9,sparseToDense:lTe,gatherND:cTe,diag:fTe,dropout:dTe,hannWindow:RC,hammingWindow:D9,frame:kC,stft:A9,inTopKAsync:pTe});function Ne(t,e){Array.isArray(t)||(t=[t]),t.forEach(function(n){n!=null&&Y(n.dtype!=="complex64",function(){return e+" does not support complex64 tensors."})})}function rx(t,e,n,r){if(n==="linear")return t.linear(e);if(n==="relu")return t.relu(e);if(n==="elu")return t.elu(e);if(n==="relu6")return t.relu6(e);if(n==="prelu")return t.prelu(e,r);throw new Error("Activation "+n+" has not been implemented for the CPU backend.")}var $Te=function(t){function e(){var n=t.call(this)||this;return n.blockSize=48,n.firstUse=!0,n.data=new I7(n,se),n}return Oa(e,t),e.prototype.write=function(n,r,i){this.firstUse&&(this.firstUse=!1,_e().get("IS_NODE")&&jg(`
============================
Hi there . Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));var a={};return this.data.set(a,{values:n,dtype:i}),a},e.prototype.move=function(n,r,i,a){this.data.set(n,{values:r,dtype:a})},e.prototype.numDataIds=function(){return this.data.numDataIds()},e.prototype.read=function(n){return We(this,void 0,void 0,function(){return Ve(this,function(r){return[2,this.readSync(n)]})})},e.prototype.readSync=function(n){var r=this.data.get(n),i=r.dtype,a=r.complexTensors;return i==="complex64"?Fw(this.readSync(a.real.dataId),this.readSync(a.imag.dataId)):this.data.get(n).values},e.prototype.bufferSync=function(n){var r=this.readSync(n.dataId),i=r;if(n.dtype==="string")try{i=r.map(function(a){return Og(a)})}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return vt(n.shape,n.dtype,i)},e.prototype.makeOutput=function(n,r,i){var a=this.write(n,r,i);return se.makeTensorFromDataId(a,r,i,this)},e.prototype.disposeData=function(n){if(this.data.has(n)){var r=this.data.get(n).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.data.delete(n)}},e.prototype.time=function(n){return We(this,void 0,void 0,function(){var r;return Ve(this,function(i){return r=Ua(),n(),[2,{kernelMs:Ua()-r}]})})},e.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},e.prototype.complex=function(n,r){var i=this.makeOutput(null,n.shape,"complex64");return this.data.get(i.dataId).complexTensors={real:se.keep(n.clone()),imag:se.keep(r.clone())},i},e.prototype.real=function(n){return this.data.get(n.dataId).complexTensors.real.clone()},e.prototype.imag=function(n){return this.data.get(n.dataId).complexTensors.imag.clone()},e.prototype.slice=function(n,r,i){if(Ne(n,"slice"),T7(n.shape,r,i)){var a=M7(r,n.strides),o=He(i);return fr(this.readSync(n.dataId).subarray(a,a+o),i,n.dtype)}for(var s=vt(i,n.dtype),u=this.bufferSync(n),l=0;l<s.size;++l){var c=s.indexToLoc(l).map(function(f,d){return f+r[d]});s.values[l]=u.get.apply(u,c)}return s.toTensor()},e.prototype.stridedSlice=function(n,r,i,a){Ne(n,"stridedSlice");var o=gC(r,i,a);if(o.some(function(h){return h===0}))return fr([],o);for(var s=vt(o,n.dtype),u=this.bufferSync(n),l=0;l<s.size;l++){for(var c=s.indexToLoc(l),f=new Array(c.length),d=0;d<f.length;d++)f[d]=c[d]*a[d]+r[d];s.set.apply(s,[u.get.apply(u,f)].concat(c))}return s.toTensor()},e.prototype.diag=function(n){for(var r=this.readSync(n.dataId),i=vt([n.size,n.size],n.dtype),a=i.values,o=0;o<r.length;o++)a[o*n.size+o]=r[o];return i.toTensor()},e.prototype.unstack=function(n,r){for(var i=n.shape[r],a=new Array(n.rank-1),o=0,s=0;s<n.rank;s++)s!==r&&(a[o++]=n.shape[s]);var u=new Array(n.rank).fill(0),l=n.shape.slice();l[r]=1;var c=new Array(i);for(s=0;s<c.length;s++)u[r]=s,c[s]=this.slice(n,u,l).reshape(a);return c},e.prototype.reverse=function(n,r){Ne(n,"reverse");for(var i=vt(n.shape,n.dtype),a=this.bufferSync(n),o=function(u){var l=i.indexToLoc(u),c=l.slice();r.forEach(function(f){return c[f]=n.shape[f]-1-c[f]}),i.set.apply(i,[a.get.apply(a,c)].concat(l))},s=0;s<i.size;s++)o(s);return i.toTensor()},e.prototype.concat=function(n,r){var i=this;if(n[0].dtype==="complex64"){var a=n.map(function(h){return Yi(h)}),o=n.map(function(h){return qa(h)});return lr(this.concat(a,r),this.concat(o,r))}var s=n.map(function(h){var p=He(h.shape.slice(r));return h.as2D(-1,p)}),u=pf(s.map(function(h){return h.shape}),1),l=vt(u,n[0].dtype).values;if(s[0].shape[0]===1){var c=0;s.forEach(function(h){l.set(i.readSync(h.dataId),c),c+=h.size})}else{var f=0;s.forEach(function(h){for(var p=i.readSync(h.dataId),m=0,g=0;g<h.shape[0];++g)for(var v=g*u[1]+f,x=0;x<h.shape[1];++x)l[v+x]=p[m++];f+=h.shape[1]})}var d=pf(n.map(function(h){return h.shape}),r);return fr(l,d,n[0].dtype)},e.prototype.neg=function(n){return Ne(n,"neg"),this.multiply(je(-1),n)},e.prototype.add=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),function(i,a,o,s){return{real:i+o,imag:a+s}}):this.broadcastedBinaryOp(n,r,cr(n.dtype,r.dtype),function(i,a){return i+a})},e.prototype.addN=function(n){var r=this;Ne(n,"addN");for(var i=n.map(function(c){return r.readSync(c.dataId)}),a=vt(n[0].shape,n[0].dtype),o=a.values,s=0;s<n.length;s++)for(var u=i[s],l=0;l<o.length;l++)o[l]+=u[l];return a.toTensor()},e.prototype.softmax=function(n,r){var i=Yn([r],n.shape),a=this.max(n,i),o=yi(a.shape,i),s=this.subtract(n,a.reshape(o)),u=this.exp(s),l=this.sum(u,i).reshape(o);return this.realDivide(u,l)},e.prototype.subtract=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),function(i,a,o,s){return{real:i-o,imag:a-s}}):this.broadcastedBinaryOp(n,r,cr(n.dtype,r.dtype),function(i,a){return i-a})},e.prototype.pow=function(n,r){return Ne([n,r],"pow"),this.broadcastedBinaryOp(n,r,n.dtype,function(i,a){return Math.pow(i,a)})},e.prototype.batchMatMul=function(n,r,i,a){Ne([n,r],"matMul");for(var o=i?n.shape[1]:n.shape[2],s=i?n.shape[2]:n.shape[1],u=a?r.shape[1]:r.shape[2],l=n.shape[0],c=this.readSync(n.dataId),f=this.readSync(r.dataId),d=i?[n.strides[0],1,n.strides[1]]:[n.strides[0],n.strides[1],1],h=d[0],p=d[1],m=d[2],g=a?[1,r.strides[1],r.strides[0]]:[r.strides[1],1,r.strides[0]],v=g[0],x=g[1],y=g[2],b=s*u,w=vt([l,s,u],n.dtype),_=w.values,E=this.blockSize,C=0;C<l;C++)for(var N=0;N<s;N+=E)for(var D=0;D<u;D+=E)for(var A=0;A<o;A+=E)for(var T=Math.min(N+E,s),k=Math.min(D+E,u),F=Math.min(A+E,o),O=N;O<T;O++)for(var I=D;I<k;I++){for(var M=0,B=A;B<F;B++)M+=c[C*h+O*p+B*m]*f[B*v+I*x+C*y];_[C*b+(O*u+I)]+=M}return w.toTensor()},e.prototype.fusedBatchMatMul=function(n){var r=n.a,i=n.b,a=n.transposeA,o=n.transposeB,s=n.bias,u=n.activation,l=n.preluActivationWeights,c=this.batchMatMul(r,i,a,o);return s&&(c=this.add(c,s)),u&&(c=rx(this,c,u,l)),c},e.prototype.multiply=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),function(i,a,o,s){return{real:i*o-a*s,imag:i*s+a*o}}):this.broadcastedBinaryOp(n,r,cr(n.dtype,r.dtype),function(i,a){return i*a})},e.prototype.realDivide=function(n,r){return Ne([n,r],"realDivide"),this.broadcastedBinaryOp(n,r,"float32",function(i,a){return i/a})},e.prototype.floorDiv=function(n,r){return Ne([n,r],"floorDiv"),this.broadcastedBinaryOp(n,r,"int32",function(i,a){return Math.floor(i/a)})},e.prototype.sum=function(n,r){Ne(n,"sum"),wi("sum",r,n.rank);for(var i=Nr(n.shape,r),a=i[0],o=i[1],s=sn(a,cr(n.dtype,"int32")),u=He(o),l=this.readSync(s.dataId),c=this.readSync(n.dataId),f=0;f<l.length;++f){for(var d=f*u,h=0,p=0;p<u;++p)h+=c[d+p];l[f]=h}return s},e.prototype.prod=function(n,r){Ne(n,"sum");for(var i=Nr(n.shape,r),a=i[0],o=i[1],s=sn(a,cr(n.dtype,"int32")),u=He(o),l=this.readSync(s.dataId),c=this.readSync(n.dataId),f=0;f<l.length;++f){for(var d=f*u,h=1,p=0;p<u;++p)h*=c[d+p];l[f]=h}return s},e.prototype.unsortedSegmentSum=function(n,r,i){Ne(n,"unsortedSegmentSum");for(var a=[],o=n.rank-r.rank,s=0;s<o;++s)r=r.expandDims(s+1);for(s=0;s<i;++s){var u=je(s,"int32"),l=u9(u,r).asType("float32").mul(n).sum(0);a.push(l)}return Ii(a)},e.prototype.argMin=function(n,r){Ne(n,"argMin");var i=[r];wi("argMin",i,n.rank);for(var a=Nr(n.shape,i),o=a[0],s=a[1],u=sn(o,"int32"),l=He(s),c=this.readSync(u.dataId),f=this.readSync(n.dataId),d=0;d<c.length;++d){for(var h=d*l,p=f[h],m=0,g=0;g<l;++g){var v=f[h+g];v<p&&(p=v,m=g)}c[d]=m}return u},e.prototype.argMax=function(n,r){Ne(n,"argMax");var i=[r];wi("argMax",i,n.rank);for(var a=Nr(n.shape,i),o=a[0],s=a[1],u=sn(o,"int32"),l=He(s),c=this.readSync(u.dataId),f=this.readSync(n.dataId),d=0;d<c.length;++d){for(var h=d*l,p=f[h],m=0,g=0;g<l;++g){var v=f[h+g];v>p&&(p=v,m=g)}c[d]=m}return u},e.prototype.cumsum=function(n,r,i,a){if(Ne(n,"cumsum"),r!==n.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(n.rank-1)+" but got axis="+r);for(var o=cr(n.dtype,"int32"),s=sn(n.shape,o),u=this.readSync(s.dataId),l=this.readSync(n.dataId),c=n.shape[n.rank-1],f=a?function(g,v){return g+c-v-1}:function(g,v){return g+v},d=0;d<l.length;d+=c)for(var h=0;h<c;h++){var p=f(d,h);if(h===0)u[p]=i?0:l[p];else{var m=f(d,h-1);u[p]=i?l[m]+u[m]:l[p]+u[m]}}return s},e.prototype.equal=function(n,r){return Ne([n,r],"equal"),this.broadcastedBinaryOp(n,r,"bool",function(i,a){return i===a?1:0})},e.prototype.notEqual=function(n,r){return Ne([n,r],"notEqual"),this.broadcastedBinaryOp(n,r,"bool",function(i,a){return i!==a?1:0})},e.prototype.less=function(n,r){return Ne([n,r],"less"),this.broadcastedBinaryOp(n,r,"bool",function(i,a){return i<a?1:0})},e.prototype.lessEqual=function(n,r){return Ne([n,r],"lessEqual"),this.broadcastedBinaryOp(n,r,"bool",function(i,a){return i<=a?1:0})},e.prototype.greater=function(n,r){return Ne([n,r],"greater"),this.broadcastedBinaryOp(n,r,"bool",function(i,a){return i>a?1:0})},e.prototype.greaterEqual=function(n,r){return Ne([n,r],"greaterEqual"),this.broadcastedBinaryOp(n,r,"bool",function(i,a){return i>=a?1:0})},e.prototype.logicalNot=function(n){Ne(n,"logicalNot");for(var r=this.readSync(n.dataId),i=new Uint8Array(r.length),a=0;a<r.length;++a)i[a]=r[a]?0:1;return this.makeOutput(i,n.shape,"bool")},e.prototype.logicalAnd=function(n,r){return Ne([n,r],"logicalAnd"),this.broadcastedBinaryOp(n,r,"bool",function(i,a){return i&&a})},e.prototype.logicalOr=function(n,r){return Ne([n,r],"logicalOr"),this.broadcastedBinaryOp(n,r,"bool",function(i,a){return i||a})},e.prototype.select=function(n,r,i){Ne([n,r,i],"select");for(var a=this.readSync(n.dataId),o=this.readSync(r.dataId),s=this.readSync(i.dataId),u=sn(r.shape,cr(r.dtype,i.dtype)),l=this.readSync(u.dataId),c=0,f=n.rank===0||n.rank>1||r.rank===1?1:He(r.shape.slice(1)),d=0;d<a.length;d++)for(var h=0;h<f;h++)a[d]===1?l[c++]=o[d]:l[c++]=s[d];return u},e.prototype.where=function(n){Ne([n],"where");var r=this.readSync(n.dataId);return wC(n.shape,r)},e.prototype.topk=function(n,r,i){return Ne(n,"topk"),j7(this.readSync(n.dataId),n.shape,n.dtype,r)},e.prototype.min=function(n,r){Ne(n,"min"),wi("min",r,n.rank);for(var i=Nr(n.shape,r),a=i[0],o=i[1],s=sn(a,n.dtype),u=He(o),l=this.readSync(s.dataId),c=this.readSync(n.dataId),f=0;f<l.length;++f){for(var d=f*u,h=c[d],p=0;p<u;++p){var m=c[d+p];m<h&&(h=m)}l[f]=h}return s},e.prototype.minimum=function(n,r){return Ne([n,r],"minimum"),this.broadcastedBinaryOp(n,r,n.dtype,function(i,a){return Math.min(i,a)})},e.prototype.mod=function(n,r){return Ne([n,r],"mod"),this.broadcastedBinaryOp(n,r,n.dtype,function(i,a){var o=i%a;return i<0&&a<0||i>=0&&a>=0?o:(o+a)%a})},e.prototype.max=function(n,r){Ne(n,"max"),wi("max",r,n.rank);for(var i=Nr(n.shape,r),a=i[0],o=i[1],s=sn(a,n.dtype),u=He(o),l=this.readSync(s.dataId),c=this.readSync(n.dataId),f=0;f<l.length;++f){for(var d=f*u,h=c[d],p=0;p<u;++p){var m=c[d+p];m>h&&(h=m)}l[f]=h}return s},e.prototype.maximum=function(n,r){return Ne([n,r],"maximum"),this.broadcastedBinaryOp(n,r,n.dtype,function(i,a){return Math.max(i,a)})},e.prototype.all=function(n,r){Ne(n,"all"),wi("all",r,n.rank);for(var i=Nr(n.shape,r),a=i[0],o=i[1],s=sn(a,n.dtype),u=He(o),l=this.readSync(s.dataId),c=this.readSync(n.dataId),f=0;f<l.length;++f){for(var d=f*u,h=c[d],p=0;p<u;++p){var m=c[d+p];h=h&&m}l[f]=h}return s},e.prototype.any=function(n,r){Ne(n,"any"),wi("any",r,n.rank);for(var i=Nr(n.shape,r),a=i[0],o=i[1],s=sn(a,n.dtype),u=He(o),l=this.readSync(s.dataId),c=this.readSync(n.dataId),f=0;f<l.length;++f){for(var d=f*u,h=c[d],p=0;p<u;++p){var m=c[d+p];h=h||m}l[f]=h}return s},e.prototype.squaredDifference=function(n,r){return Ne([n,r],"squaredDifference"),this.broadcastedBinaryOp(n,r,n.dtype,function(i,a){var o=i-a;return o*o})},e.prototype.ceil=function(n){Ne(n,"ceil");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a)i[a]=Math.ceil(r[a]);return this.makeOutput(i,n.shape,"float32")},e.prototype.floor=function(n){Ne(n,"floor");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a)i[a]=Math.floor(r[a]);return this.makeOutput(i,n.shape,"float32")},e.prototype.sign=function(n){Ne(n,"x");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a)r[a]<0?i[a]=-1:r[a]>0?i[a]=1:i[a]=0;return this.makeOutput(i,n.shape,"float32")},e.prototype.isNaN=function(n){Ne(n,"x");for(var r=this.readSync(n.dataId),i=new Uint8Array(r.length),a=0;a<r.length;++a)Number.isNaN(r[a])&&(i[a]=1);return this.makeOutput(i,n.shape,"bool")},e.prototype.isInf=function(n){Ne(n,"x");for(var r=this.readSync(n.dataId),i=new Uint8Array(r.length),a=0;a<r.length;++a)Math.abs(r[a])===1/0&&(i[a]=1);return this.makeOutput(i,n.shape,"bool")},e.prototype.isFinite=function(n){Ne(n,"x");for(var r=this.readSync(n.dataId),i=new Uint8Array(r.length),a=0;a<r.length;++a)Number.isFinite(r[a])&&(i[a]=1);return this.makeOutput(i,n.shape,"bool")},e.prototype.round=function(n){Ne(n,"round");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a){var o=Math.floor(r[a]);r[a]-o<.5?i[a]=Math.floor(r[a]):r[a]-o>.5?i[a]=Math.ceil(r[a]):i[a]=o%2==0?o:o+1}return this.makeOutput(i,n.shape,"float32")},e.prototype.exp=function(n){Ne(n,"exp");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a)i[a]=Math.exp(r[a]);return this.makeOutput(i,n.shape,"float32")},e.prototype.expm1=function(n){Ne(n,"expm1");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a)i[a]=Math.expm1(r[a]);return this.makeOutput(i,n.shape,"float32")},e.prototype.log=function(n){Ne(n,"log");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a){var o=r[a];i[a]=Math.log(o)}return this.makeOutput(i,n.shape,"float32")},e.prototype.log1p=function(n){Ne(n,"log1p");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a){var o=r[a];i[a]=Math.log1p(o)}return this.makeOutput(i,n.shape,"float32")},e.prototype.sqrt=function(n){Ne(n,"sqrt");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a){var o=r[a];i[a]=Math.sqrt(o)}return this.makeOutput(i,n.shape,"float32")},e.prototype.rsqrt=function(n){Ne(n,"rsqrt");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a){var o=r[a];i[a]=1/Math.sqrt(o)}return this.makeOutput(i,n.shape,"float32")},e.prototype.reciprocal=function(n){Ne(n,"reciprocal");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a)i[a]=1/r[a];return this.makeOutput(i,n.shape,"float32")},e.prototype.linear=function(n){return n},e.prototype.relu=function(n){Ne(n,"relu");for(var r=sn(n.shape,n.dtype),i=this.readSync(r.dataId),a=this.readSync(n.dataId),o=0;o<a.length;++o)i[o]=Math.max(0,a[o]);return r},e.prototype.relu6=function(n){Ne(n,"relu");for(var r=sn(n.shape,n.dtype),i=this.readSync(r.dataId),a=this.readSync(n.dataId),o=0;o<a.length;++o)i[o]=Math.min(Math.max(0,a[o]),6);return r},e.prototype.prelu=function(n,r){return Ne([n,r],"prelu"),this.broadcastedBinaryOp(n,r,n.dtype,function(i,a){return i<0?a*i:i})},e.prototype.elu=function(n){Ne(n,"elu");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a){var o=i[a];r[a]=o>=0?o:Math.exp(o)-1}return this.makeOutput(r,n.shape,"float32")},e.prototype.eluDer=function(n,r){Ne([n,r],"eluDer");for(var i=new Float32Array(r.size),a=this.readSync(r.dataId),o=this.readSync(n.dataId),s=0;s<a.length;++s){var u=a[s];i[s]=u>=1?o[s]:o[s]*(u+1)}return this.makeOutput(i,r.shape,"float32")},e.prototype.selu=function(n){Ne(n,"selu");for(var r=EC,i=CC,a=new Float32Array(n.size),o=this.readSync(n.dataId),s=0;s<o.length;++s){var u=o[s];a[s]=u>=0?i*u:r*(Math.exp(u)-1)}return this.makeOutput(a,n.shape,"float32")},e.prototype.clip=function(n,r,i){Ne(n,"clip");for(var a=new Float32Array(n.size),o=this.readSync(n.dataId),s=0;s<o.length;++s){var u=o[s];a[s]=u>i?i:u<r?r:u}return this.makeOutput(a,n.shape,"float32")},e.prototype.abs=function(n){for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a)r[a]=Math.abs(i[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.complexAbs=function(n){for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<n.size;++a){var o=i[2*a],s=i[2*a+1];r[a]=Math.hypot(o,s)}return this.makeOutput(r,n.shape,"float32")},e.prototype.int=function(n){Ne(n,"int");for(var r=new Int32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a)r[a]=i[a];return this.makeOutput(r,n.shape,"int32")},e.prototype.sigmoid=function(n){Ne(n,"sigmoid");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a)r[a]=1/(1+Math.exp(-i[a]));return this.makeOutput(r,n.shape,"float32")},e.prototype.softplus=function(n){Ne(n,"softplus");for(var r=Math.log(11920928955078125e-23)+2,i=new Float32Array(n.size),a=this.readSync(n.dataId),o=0;o<a.length;++o){var s=a[o]>-r,u=a[o]<r,l=Math.exp(a[o]),c=void 0;c=u?l:s?a[o]:Math.log(1+l),i[o]=c}return this.makeOutput(i,n.shape,"float32")},e.prototype.sin=function(n){Ne(n,"sin");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a)r[a]=Math.sin(i[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.cos=function(n){Ne(n,"cos");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a)r[a]=Math.cos(i[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.tan=function(n){Ne(n,"tan");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a)r[a]=Math.tan(i[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.asin=function(n){Ne(n,"asin");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a)r[a]=Math.asin(i[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.acos=function(n){Ne(n,"acos");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a)r[a]=Math.acos(i[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.atan=function(n){Ne(n,"atan");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a)r[a]=Math.atan(i[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.atan2=function(n,r){return Ne([n,r],"atan2"),this.broadcastedBinaryOp(n,r,n.dtype,function(i,a){return Math.atan2(i,a)})},e.prototype.sinh=function(n){Ne(n,"sinh");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a)r[a]=Math.sinh(i[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.cosh=function(n){Ne(n,"cosh");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a)r[a]=Math.cosh(i[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.tanh=function(n){Ne(n,"tanh");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a)r[a]=zCe(i[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.asinh=function(n){Ne(n,"asinh");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a)r[a]=Math.asinh(i[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.acosh=function(n){Ne(n,"acosh");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a)r[a]=Math.acosh(i[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.atanh=function(n){Ne(n,"atanh");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a)r[a]=Math.atanh(i[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.erf=function(n){Ne(n,"erf");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a){var o=Math.sign(i[a]),s=Math.abs(i[a]),u=1/(1+.3275911*s);r[a]=o*(1-((((1.061405429*u-1.453152027)*u+1.421413741)*u-.284496736)*u+.254829592)*u*Math.exp(-s*s))}return this.makeOutput(r,n.shape,"float32")},e.prototype.step=function(n,r){r===void 0&&(r=0),Ne(n,"step");for(var i=new Float32Array(n.size),a=this.readSync(n.dataId),o=0;o<a.length;++o){var s=a[o];isNaN(s)?i[o]=NaN:i[o]=s>0?1:r}return this.makeOutput(i,n.shape,"float32")},e.prototype.fusedConv2d=function(n){var r=n.input,i=n.filter,a=n.convInfo,o=n.bias,s=n.activation,u=n.preluActivationWeights,l=this.conv2d(r,i,a);return o&&(l=this.add(l,o)),s&&(l=rx(this,l,s,u)),l},e.prototype.conv2d=function(n,r,i){Ne([n,r],"conv2d");for(var a=i.filterHeight,o=i.filterWidth,s=i.dilationHeight,u=i.dilationWidth,l=i.padInfo.left,c=i.padInfo.top,f=i.dataFormat==="channelsLast",d=vt(i.outShape,n.dtype),h=n.strides[0],p=f?n.strides[1]:n.strides[2],m=f?n.strides[2]:1,g=f?1:n.strides[1],v=d.strides[0],x=f?d.strides[1]:d.strides[2],y=f?d.strides[2]:1,b=f?1:d.strides[1],w=this.readSync(n.dataId),_=this.readSync(r.dataId),E=d.values,C=0;C<i.batchSize;++C)for(var N=C*h,D=C*v,A=0;A<i.outHeight;++A)for(var T=D+A*x,k=A*i.strideHeight-c,F=0;F<a;F++){var O=k+F*s;if(!(O<0||O>=i.inHeight))for(var I=F*r.strides[0],M=N+O*p,B=0;B<i.outWidth;++B)for(var R=T+B*y,j=B*i.strideWidth-l,K=0;K<o;K++){var V=j+K*u;if(!(V<0||V>=i.inWidth))for(var L=M+V*m,ne=I+K*r.strides[1],fe=0;fe<i.inChannels;++fe){for(var te=w[L+fe*g],oe=0;oe<i.outChannels;++oe)E[R+oe*b]+=te*_[ne+oe];ne+=i.outChannels}}}return d.toTensor()},e.prototype.conv3d=function(n,r,i){for(var a=i.filterDepth,o=i.filterHeight,s=i.filterWidth,u=i.dilationDepth,l=i.dilationHeight,c=i.dilationWidth,f=i.padInfo.front,d=i.padInfo.left,h=i.padInfo.top,p=vt(i.outShape,n.dtype),m=this.readSync(n.dataId),g=this.readSync(r.dataId),v=p.values,x=0;x<i.batchSize;++x)for(var y=x*n.strides[0],b=x*p.strides[0],w=0;w<i.outDepth;++w)for(var _=b+w*p.strides[1],E=w*i.strideDepth-f,C=0;C<a;C++){var N=E+C*u;if(!(N<0||N>=i.inDepth))for(var D=C*r.strides[0],A=y+N*n.strides[1],T=0;T<i.outHeight;++T)for(var k=_+T*p.strides[2],F=T*i.strideHeight-h,O=0;O<o;O++){var I=F+O*l;if(!(I<0||I>=i.inHeight))for(var M=D+O*r.strides[1],B=A+I*n.strides[2],R=0;R<i.outWidth;++R)for(var j=k+R*i.outChannels,K=R*i.strideWidth-d,V=0;V<s;V++){var L=K+V*c;if(!(L<0||L>=i.inWidth))for(var ne=M+V*r.strides[2],fe=B+L*i.inChannels,te=ne,oe=0;oe<i.inChannels;++oe){for(var H=m[fe+oe],U=0;U<i.outChannels;++U)v[j+U]+=H*g[te+U];te+=i.outChannels}}}}return p.toTensor()},e.prototype.conv2dDerInput=function(n,r,i){Ne([n,r],"conv2dDerInput");for(var a=vt(i.inShape,"float32"),o=a.values,s=this.readSync(n.dataId),u=this.readSync(r.dataId),l=r.strides,c=l[0],f=l[1],d=l[2],h=i.batchSize,p=i.filterHeight,m=i.filterWidth,g=i.inChannels,v=i.inHeight,x=i.inWidth,y=i.outChannels,b=i.outHeight,w=i.outWidth,_=i.strideHeight,E=i.strideWidth,C=i.dataFormat,N=p-1-i.padInfo.top,D=m-1-i.padInfo.left,A=C==="channelsLast",T=a.strides[0],k=A?a.strides[1]:a.strides[2],F=A?a.strides[2]:1,O=A?1:a.strides[1],I=n.strides[0],M=A?n.strides[1]:n.strides[2],B=A?n.strides[2]:1,R=A?1:n.strides[1],j=0;j<h;++j)for(var K=0;K<g;++K)for(var V=0;V<v;++V)for(var L=V-N,ne=Math.max(0,Math.ceil(L/_)),fe=Math.min(b,(p+L)/_),te=0;te<x;++te){for(var oe=te-D,H=Math.max(0,Math.ceil(oe/E)),U=Math.min(w,(m+oe)/E),Q=0,re=ne;re<fe;++re)for(var ie=re*_-L,de=H;de<U;++de)for(var he=I*j+M*re+B*de,$=c*(p-1-ie)+f*(m-1-(de*E-oe))+d*K,G=0;G<y;++G)Q+=s[he+R*G]*u[$+G];o[T*j+k*V+F*te+O*K]=Q}return a.toTensor()},e.prototype.conv3dDerInput=function(n,r,i){for(var a=vt(i.inShape,"float32"),o=a.values,s=a.strides,u=s[0],l=s[1],c=s[2],f=s[3],d=this.readSync(n.dataId),h=n.strides,p=h[0],m=h[1],g=h[2],v=h[3],x=this.readSync(r.dataId),y=r.strides,b=y[0],w=y[1],_=y[2],E=y[3],C=i.batchSize,N=i.filterDepth,D=i.filterHeight,A=i.filterWidth,T=i.inChannels,k=i.inDepth,F=i.inHeight,O=i.inWidth,I=i.outChannels,M=i.outDepth,B=i.outHeight,R=i.outWidth,j=i.strideDepth,K=i.strideHeight,V=i.strideWidth,L=N-1-i.padInfo.front,ne=D-1-i.padInfo.top,fe=A-1-i.padInfo.left,te=0;te<C;++te)for(var oe=0;oe<T;++oe)for(var H=0;H<k;++H)for(var U=H-L,Q=Math.max(0,Math.ceil(U/j)),re=Math.min(M,(N+U)/j),ie=0;ie<F;++ie)for(var de=ie-ne,he=Math.max(0,Math.ceil(de/K)),$=Math.min(B,(D+de)/K),G=0;G<O;++G){for(var ue=G-fe,ce=Math.max(0,Math.ceil(ue/V)),ge=Math.min(R,(A+ue)/V),Ce=0,Ae=Q;Ae<re;++Ae)for(var Pe=Ae*j-U,q=he;q<$;++q)for(var ee=q*K-de,le=ce;le<ge;++le)for(var pe=p*te+m*Ae+g*q+v*le,be=b*(N-1-Pe)+w*(D-1-ee)+_*(A-1-(le*V-ue))+E*oe,xe=0;xe<I;++xe)Ce+=d[pe+xe]*x[be+xe];o[u*te+l*H+c*ie+f*G+oe]=Ce}return a.toTensor()},e.prototype.conv2dDerFilter=function(n,r,i){Ne([n,r],"conv2dDerFilter");for(var a=i.strideHeight,o=i.strideWidth,s=i.filterHeight,u=i.filterWidth,l=i.dataFormat==="channelsLast",c=vt(i.filterShape,"float32"),f=i.padInfo.left,d=i.padInfo.top,h=this.bufferSync(n),p=this.bufferSync(r),m=0;m<s;++m)for(var g=Math.max(0,Math.ceil((d-m)/a)),v=Math.min(i.outHeight,(i.inHeight+d-m)/a),x=0;x<u;++x)for(var y=Math.max(0,Math.ceil((f-x)/o)),b=Math.min(i.outWidth,(i.inWidth+f-x)/o),w=0;w<i.inChannels;++w)for(var _=0;_<i.outChannels;++_){for(var E=0,C=0;C<i.batchSize;++C)for(var N=g;N<v;++N)for(var D=m+N*a-d,A=y;A<b;++A){var T=x+A*o-f;E+=l?h.get(C,D,T,w)*p.get(C,N,A,_):h.get(C,w,D,T)*p.get(C,_,N,A)}c.set(E,m,x,w,_)}return c.toTensor()},e.prototype.conv3dDerFilter=function(n,r,i){for(var a=i.strideDepth,o=i.strideHeight,s=i.strideWidth,u=i.filterDepth,l=i.filterHeight,c=i.filterWidth,f=vt(i.filterShape,"float32"),d=f.values,h=f.strides,p=h[0],m=h[1],g=h[2],v=h[3],x=this.readSync(r.dataId),y=r.strides,b=y[0],w=y[1],_=y[2],E=y[3],C=this.readSync(n.dataId),N=n.strides,D=N[0],A=N[1],T=N[2],k=N[3],F=i.padInfo.front,O=i.padInfo.left,I=i.padInfo.top,M=0;M<u;++M)for(var B=Math.max(0,Math.ceil((F-M)/a)),R=Math.min(i.outDepth,(i.inDepth+F-M)/a),j=M*p,K=0;K<l;++K)for(var V=Math.max(0,Math.ceil((I-K)/o)),L=Math.min(i.outHeight,(i.inHeight+I-K)/o),ne=K*m+j,fe=0;fe<c;++fe)for(var te=Math.max(0,Math.ceil((O-fe)/s)),oe=Math.min(i.outWidth,(i.inWidth+O-fe)/s),H=fe*g+ne,U=0;U<i.inChannels;++U)for(var Q=U*v+H,re=0;re<i.outChannels;++re){for(var ie=0,de=0;de<i.batchSize;++de)for(var he=de*D,$=de*b,G=B;G<R;++G)for(var ue=(M+G*a-F)*A+he,ce=G*w+$,ge=V;ge<L;++ge)for(var Ce=(K+ge*o-I)*T+ue,Ae=ge*_+ce,Pe=te;Pe<oe;++Pe){var q=Pe*E+Ae;ie+=C[(fe+Pe*s-O)*k+Ce+U]*x[q+re]}d[Q+re]=ie}return f.toTensor()},e.prototype.fusedDepthwiseConv2D=function(n){var r=n.input,i=n.filter,a=n.convInfo,o=n.bias,s=n.activation,u=n.preluActivationWeights,l=this.depthwiseConv2D(r,i,a);return o&&(l=this.add(l,o)),s&&(l=rx(this,l,s,u)),l},e.prototype.depthwiseConv2D=function(n,r,i){Ne([n,r],"depthwiseConv2D");for(var a=i.filterHeight,o=i.filterWidth,s=i.dilationHeight,u=i.dilationWidth,l=i.padInfo.left,c=i.padInfo.top,f=i.outChannels/i.inChannels,d=vt(i.outShape,n.dtype),h=this.readSync(n.dataId),p=this.readSync(r.dataId),m=d.values,g=0;g<i.batchSize;++g)for(var v=g*n.strides[0],x=g*d.strides[0],y=0;y<i.outHeight;++y)for(var b=x+y*d.strides[1],w=y*i.strideHeight-l,_=0;_<a;++_){var E=w+_*s;if(!(E<0||E>=i.inHeight))for(var C=_*r.strides[0],N=v+E*n.strides[1],D=0;D<i.outWidth;++D)for(var A=b+D*d.strides[2],T=D*i.strideWidth-c,k=0;k<o;++k){var F=T+k*u;if(!(F<0||F>=i.inWidth))for(var O=C+k*r.strides[1],I=N+F*i.inChannels,M=A,B=O,R=0;R<i.inChannels;++R){for(var j=h[I+R],K=0;K<f;++K)m[M+K]+=j*p[B+K];M+=f,B+=f}}}return d.toTensor()},e.prototype.depthwiseConv2DDerInput=function(n,r,i){Ne([n,r],"depthwiseConv2DDerInput");for(var a=vt(i.inShape,"float32"),o=a.values,s=a.strides,u=s[0],l=s[1],c=s[2],f=this.readSync(n.dataId),d=n.strides,h=d[0],p=d[1],m=d[2],g=this.readSync(r.dataId),v=r.strides,x=v[0],y=v[1],b=v[2],w=i.batchSize,_=i.filterHeight,E=i.filterWidth,C=i.inChannels,N=i.inHeight,D=i.inWidth,A=i.outChannels,T=i.outHeight,k=i.outWidth,F=i.strideHeight,O=i.strideWidth,I=_-1-i.padInfo.top,M=E-1-i.padInfo.left,B=A/C,R=0;R<w;++R)for(var j=0;j<C;++j)for(var K=0;K<N;++K)for(var V=K-I,L=Math.max(0,Math.ceil(V/F)),ne=Math.min(T,(_+V)/F),fe=0;fe<D;++fe){for(var te=fe-M,oe=Math.max(0,Math.ceil(te/O)),H=Math.min(k,(E+te)/O),U=0,Q=L;Q<ne;++Q)for(var re=Q*F-V,ie=oe;ie<H;++ie)for(var de=h*R+p*Q+m*ie,he=x*(_-1-re)+y*(E-1-(ie*O-te))+b*j,$=0;$<B;++$)U+=f[de+(j*B+$)]*g[he+$];o[u*R+l*K+c*fe+j]=U}return a.toTensor()},e.prototype.depthwiseConv2DDerFilter=function(n,r,i){Ne([n,r],"depthwiseConv2DDerFilter");for(var a=i.strideHeight,o=i.strideWidth,s=i.filterHeight,u=i.filterWidth,l=vt(i.filterShape,"float32"),c=i.padInfo.left,f=i.padInfo.top,d=i.outChannels/i.inChannels,h=this.bufferSync(n),p=this.bufferSync(r),m=0;m<s;++m)for(var g=Math.max(0,Math.ceil((f-m)/a)),v=Math.min(i.outHeight,(i.inHeight+f-m)/a),x=0;x<u;++x)for(var y=Math.max(0,Math.ceil((c-x)/o)),b=Math.min(i.outWidth,(i.inWidth+c-x)/o),w=0;w<i.outChannels;++w){for(var _=Math.trunc(w/d),E=w%d,C=0,N=0;N<i.batchSize;++N)for(var D=g;D<v;++D)for(var A=m+D*a-f,T=y;T<b;++T){var k=x+T*o-c;C+=h.get(N,A,k,_)*p.get(N,D,T,w)}l.set(C,m,x,_,E)}return l.toTensor()},e.prototype.tile=function(n,r){return Ne(n,"tile"),L7(this.bufferSync(n),r)},e.prototype.pad=function(n,r,i){Ne(n,"pad");var a=r.map(function(d,h){return d[0]+n.shape[h]+d[1]}),o=r.map(function(d){return d[0]}),s=this.bufferSync(n),u=vt(a,n.dtype);i!==0&&u.values.fill(i);for(var l=0;l<n.size;l++){var c=s.indexToLoc(l),f=c.map(function(d,h){return d+o[h]});u.set.apply(u,[s.get.apply(s,c)].concat(f))}return u.toTensor()},e.prototype.transpose=function(n,r){Ne(n,"transpose");for(var i=new Array(n.rank),a=0;a<i.length;a++)i[a]=n.shape[r[a]];var o=this.readSync(n.dataId),s=vt(i,n.dtype),u=this.bufferSync(n);for(a=0;a<n.size;++a){for(var l=u.indexToLoc(a),c=new Array(l.length),f=0;f<c.length;f++)c[f]=l[r[f]];var d=s.locToIndex(c);s.values[d]=o[a]}return s.toTensor()},e.prototype.gather=function(n,r,i){Ne([n,r],"gather");var a=n.shape.slice(),o=this.readSync(r.dataId);a[i]=o.length;for(var s=vt(a,n.dtype),u=this.bufferSync(n),l=0;l<s.size;++l){var c=s.indexToLoc(l),f=c.slice();f[i]=o[c[i]];var d=u.locToIndex(f);s.values[l]=u.values[d]}return s.toTensor()},e.prototype.batchToSpaceND=function(n,r,i){Ne([n],"batchToSpaceND");var a=r.reduce(function(f,d){return f*d}),o=Ug(n.shape,r,a),s=Wg(o.length,r.length),u=Vg(n.shape,r,a),l=N7(i,r.length),c=S7(u,i,r.length);return n.reshape(o).transpose(s).reshape(u).slice(l,c)},e.prototype.spaceToBatchND=function(n,r,i){Ne([n],"spaceToBatchND");var a=r.reduce(function(d,h){return d*h}),o=[[0,0]];o.push.apply(o,i);for(var s=1+r.length;s<n.shape.length;++s)o.push([0,0]);var u=n.pad(o),l=Ug(u.shape,r,a,!1),c=Wg(l.length,r.length,!1),f=Vg(u.shape,r,a,!1);return u.reshape(l).transpose(c).reshape(f)},e.prototype.pool=function(n,r,i){Ne(n,"pool");for(var a=r.strideHeight,o=r.strideWidth,s=r.dilationHeight,u=r.dilationWidth,l=r.effectiveFilterHeight,c=r.effectiveFilterWidth,f=r.padInfo.top,d=r.padInfo.left,h=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,p=this.readSync(n.dataId),m=vt(r.outShape,n.dtype),g=m.values,v=r.outShape[1]*r.outShape[2]*r.outShape[3],x=r.outShape[2]*r.outShape[3],y=r.outShape[3],b=0;b<r.batchSize;++b)for(var w=b*v,_=b*n.strides[0],E=0;E<r.inChannels;++E)for(var C=0;C<r.outHeight;++C)for(var N=C*a-f,D=Math.max(0,N),A=Math.min(r.inHeight,l+N),T=w+C*x,k=0;k<r.outWidth;++k){for(var F=k*o-d,O=Math.max(0,F),I=Math.min(r.inWidth,c+F),M=h,B=0,R=0,j=D;j<A;j+=s){for(var K=_+j*n.strides[1],V=O;V<I;V+=u){var L=p[K+V*n.strides[2]+E];i==="max"&&L>M?M=L:i==="avg"&&(B+=L,R++)}if(isNaN(M))break}g[T+k*y+E]=i==="avg"?B/R:M}return m.toTensor()},e.prototype.maxPool=function(n,r){return this.pool(n,r,"max")},e.prototype.maxPoolPositions=function(n,r){for(var i=vt(r.outShape,"int32"),a=r.strideHeight,o=r.strideWidth,s=r.dilationHeight,u=r.dilationWidth,l=r.effectiveFilterHeight,c=r.effectiveFilterWidth,f=r.padInfo.top,d=r.padInfo.left,h=this.bufferSync(n),p=0;p<r.batchSize;++p)for(var m=0;m<r.inChannels;++m)for(var g=0;g<r.outHeight;++g){for(var v=g*a-f,x=v;x<0;)x+=s;for(var y=Math.min(r.inHeight,l+v),b=0;b<r.outWidth;++b){for(var w=b*o-d,_=w;_<0;)_+=u;for(var E=Math.min(r.inWidth,c+w),C=Number.NEGATIVE_INFINITY,N=-1,D=x;D<y;D+=s)for(var A=D-v,T=_;T<E;T+=u){var k=T-w,F=h.get(p,D,T,m);F>C&&(C=F,N=A*c+k)}i.set(N,p,g,b,m)}}return i.toTensor()},e.prototype.maxPoolBackprop=function(n,r,i,a){Ne([r,i],"maxPoolBackprop");for(var o=this.maxPoolPositions(r,a),s=a.strideHeight,u=a.strideWidth,l=a.dilationHeight,c=a.dilationWidth,f=a.effectiveFilterHeight,d=a.effectiveFilterWidth,h=d-1-a.padInfo.left,p=f-1-a.padInfo.top,m=vt(r.shape,"float32"),g=this.bufferSync(o),v=this.bufferSync(n),x=0;x<a.batchSize;++x)for(var y=0;y<a.inChannels;++y)for(var b=0;b<a.inHeight;++b)for(var w=0;w<a.inWidth;++w){for(var _=b-p,E=w-h,C=0,N=0;N<f;N+=l){var D=(_+N)/s;if(!(D<0||D>=a.outHeight||Math.floor(D)!==D))for(var A=0;A<d;A+=c){var T=(E+A)/u;if(!(T<0||T>=a.outWidth||Math.floor(T)!==T)){var k=f*d-1-g.get(x,D,T,y)===N*d+A?1:0;k!==0&&(C+=v.get(x,D,T,y)*k)}}}m.set(C,x,b,w,y)}return m.toTensor()},e.prototype.avgPoolBackprop=function(n,r,i){Ne([n,r],"avgPoolBackprop");for(var a=i.strideHeight,o=i.strideWidth,s=i.filterHeight,u=i.filterWidth,l=i.dilationHeight,c=i.dilationWidth,f=i.effectiveFilterHeight,d=i.effectiveFilterWidth,h=d-1-i.padInfo.left,p=f-1-i.padInfo.top,m=vt(r.shape,"float32"),g=1/(s*u),v=this.bufferSync(n),x=0;x<i.batchSize;++x)for(var y=0;y<i.inChannels;++y)for(var b=0;b<i.inHeight;++b)for(var w=0;w<i.inWidth;++w){for(var _=b-p,E=w-h,C=0,N=0;N<f;N+=l){var D=(_+N)/a;if(!(D<0||D>=i.outHeight||Math.floor(D)!==D))for(var A=0;A<d;A+=c){var T=(E+A)/o;T<0||T>=i.outWidth||Math.floor(T)!==T||(C+=v.get(x,D,T,y))}}m.set(C*g,x,b,w,y)}return m.toTensor()},e.prototype.pool3d=function(n,r,i){Ne(n,"pool3d");for(var a=r.strideDepth,o=r.strideHeight,s=r.strideWidth,u=r.dilationDepth,l=r.dilationHeight,c=r.dilationWidth,f=r.effectiveFilterDepth,d=r.effectiveFilterHeight,h=r.effectiveFilterWidth,p=r.padInfo.front,m=r.padInfo.top,g=r.padInfo.left,v=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,x=this.readSync(n.dataId),y=vt(r.outShape,n.dtype),b=y.values,w=r.outShape[1]*r.outShape[2]*r.outShape[3]*r.outShape[4],_=r.outShape[2]*r.outShape[3]*r.outShape[4],E=r.outShape[3]*r.outShape[4],C=r.outShape[4],N=0;N<r.batchSize;++N)for(var D=N*w,A=N*n.strides[0],T=0;T<r.inChannels;++T)for(var k=0;k<r.outDepth;++k){for(var F=k*a-p,O=F;O<0;)O+=u;for(var I=Math.min(r.inDepth,f+F),M=D+k*_,B=0;B<r.outHeight;++B){for(var R=B*o-m,j=R;j<0;)j+=l;for(var K=Math.min(r.inHeight,d+R),V=M+B*E,L=0;L<r.outWidth;++L){for(var ne=L*s-g,fe=ne;fe<0;)fe+=c;for(var te=Math.min(r.inWidth,h+ne),oe=V+L*C,H=v,U=0,Q=0,re=O;re<I;re+=u){for(var ie=A+re*n.strides[1],de=j;de<K;de+=l){for(var he=ie+de*n.strides[2],$=fe;$<te;$+=c){var G=x[he+$*n.strides[3]+T];if(i==="max"&&G>H?H=G:i==="avg"&&(U+=G,Q++),isNaN(H))break}if(isNaN(H))break}if(isNaN(H))break}b[oe+T]=i==="avg"?U/Q:H}}}return y.toTensor()},e.prototype.avgPool3d=function(n,r){return Ne(n,"avgPool3d"),this.pool3d(n,r,"avg").toFloat()},e.prototype.avgPool3dBackprop=function(n,r,i){Ne([n,r],"avgPool3dBackprop");for(var a=i.strideDepth,o=i.strideHeight,s=i.strideWidth,u=i.filterDepth,l=i.filterHeight,c=i.filterWidth,f=i.dilationDepth,d=i.dilationHeight,h=i.dilationWidth,p=i.effectiveFilterDepth,m=i.effectiveFilterHeight,g=i.effectiveFilterWidth,v=p-1-i.padInfo.front,x=g-1-i.padInfo.left,y=m-1-i.padInfo.top,b=vt(r.shape,"float32"),w=1/(u*l*c),_=this.bufferSync(n),E=0;E<i.batchSize;++E)for(var C=0;C<i.inChannels;++C)for(var N=0;N<i.inDepth;++N)for(var D=0;D<i.inHeight;++D)for(var A=0;A<i.inWidth;++A){for(var T=N-v,k=D-y,F=A-x,O=0,I=0;I<p;I+=f){var M=(T+I)/a;if(!(M<0||M>=i.outDepth||Math.floor(M)!==M))for(var B=0;B<m;B+=d){var R=(k+B)/o;if(!(R<0||R>=i.outHeight||Math.floor(R)!==R))for(var j=0;j<g;j+=h){var K=(F+j)/s;K<0||K>=i.outWidth||Math.floor(K)!==K||(O+=_.get(E,M,R,K,C))}}}b.set(O*w,E,N,D,A,C)}return b.toTensor()},e.prototype.maxPool3d=function(n,r){return Ne(n,"maxPool3d"),this.pool3d(n,r,"max").toFloat()},e.prototype.maxPool3dPositions=function(n,r){for(var i=vt(r.outShape,"int32"),a=r.strideDepth,o=r.strideHeight,s=r.strideWidth,u=r.dilationDepth,l=r.dilationHeight,c=r.dilationWidth,f=r.effectiveFilterDepth,d=r.effectiveFilterHeight,h=r.effectiveFilterWidth,p=r.padInfo.front,m=r.padInfo.top,g=r.padInfo.left,v=this.bufferSync(n),x=0;x<r.batchSize;++x)for(var y=0;y<r.inChannels;++y)for(var b=0;b<r.outDepth;++b){for(var w=b*a-p,_=w;_<0;)_+=u;for(var E=Math.min(r.inDepth,f+w),C=0;C<r.outHeight;++C){for(var N=C*o-m,D=N;D<0;)D+=l;for(var A=Math.min(r.inHeight,d+N),T=0;T<r.outWidth;++T){for(var k=T*s-g,F=k;F<0;)F+=c;for(var O=Math.min(r.inWidth,h+k),I=Number.NEGATIVE_INFINITY,M=-1,B=_;B<E;B+=u)for(var R=B-w,j=D;j<A;j+=l)for(var K=j-N,V=F;V<O;V+=c){var L=V-k,ne=v.get(x,B,j,V,y);ne>=I&&(I=ne,M=R*d*h+K*d+L)}i.set(M,x,b,C,T,y)}}}return i.toTensor()},e.prototype.maxPool3dBackprop=function(n,r,i,a){Ne([r,i],"maxPool3dBackprop");for(var o=this.maxPool3dPositions(r,a),s=a.strideDepth,u=a.strideHeight,l=a.strideWidth,c=a.dilationDepth,f=a.dilationHeight,d=a.dilationWidth,h=a.effectiveFilterDepth,p=a.effectiveFilterHeight,m=a.effectiveFilterWidth,g=h-1-a.padInfo.front,v=m-1-a.padInfo.left,x=p-1-a.padInfo.top,y=vt(r.shape,"float32"),b=this.bufferSync(o),w=this.bufferSync(n),_=0;_<a.batchSize;++_)for(var E=0;E<a.inChannels;++E)for(var C=0;C<a.inDepth;++C)for(var N=0;N<a.inHeight;++N)for(var D=0;D<a.inWidth;++D){for(var A=C-g,T=N-x,k=D-v,F=0,O=0;O<h;O+=c){var I=(A+O)/s;if(!(I<0||I>=a.outDepth||Math.floor(I)!==I))for(var M=0;M<p;M+=f){var B=(T+M)/u;if(!(B<0||B>=a.outHeight||Math.floor(B)!==B))for(var R=0;R<m;R+=d){var j=(k+R)/l;if(!(j<0||j>=a.outWidth||Math.floor(j)!==j)){var K=h*p*m-1-b.get(_,I,B,j,E)===O*p*m+M*m+R?1:0;K!==0&&(F+=w.get(_,I,B,j,E)*K)}}}}y.set(F,_,C,N,D,E)}return y.toTensor()},e.prototype.cast=function(n,r){return F7(n,r,this)},e.prototype.reshape=function(n,r){return kw(n,r)},e.prototype.avgPool=function(n,r){return Ne(n,"avgPool"),this.pool(n,r,"avg").toFloat()},e.prototype.resizeBilinear=function(n,r,i,a){Ne(n,"resizeBilinear");for(var o=n.shape,s=o[0],u=o[1],l=o[2],c=o[3],f=this.readSync(n.dataId),d=new Float32Array(He([s,r,i,c])),h=[a&&r>1?u-1:u,a&&i>1?l-1:l],p=[a&&r>1?r-1:r,a&&i>1?i-1:i],m=0,g=h[0]/p[0],v=h[1]/p[1],x=0;x<s;x++)for(var y=0;y<r;y++)for(var b=g*y,w=Math.floor(b),_=b-w,E=Math.min(u-1,Math.ceil(b)),C=x*n.strides[0]+w*n.strides[1],N=x*n.strides[0]+E*n.strides[1],D=0;D<i;D++)for(var A=v*D,T=Math.floor(A),k=A-T,F=Math.min(l-1,Math.ceil(A)),O=C+T*n.strides[2],I=N+T*n.strides[2],M=C+F*n.strides[2],B=N+F*n.strides[2],R=0;R<c;R++){var j=f[O+R],K=f[I+R],V=j+(f[M+R]-j)*k,L=V+(K+(f[B+R]-K)*k-V)*_;d[m++]=L}return fr(d,[s,r,i,c])},e.prototype.resizeBilinearBackprop=function(n,r,i){Ne([n,r],"resizeBilinearBackprop");for(var a=r.shape,o=a[0],s=a[1],u=a[2],l=a[3],c=n.shape,f=c[1],d=c[2],h=new Float32Array(o*s*u*l),p=[i&&f>1?s-1:s,i&&d>1?u-1:u],m=[i&&f>1?f-1:f,i&&d>1?d-1:d],g=p[0]/m[0],v=p[1]/m[1],x=this.readSync(n.dataId),y=0,b=0;b<o;b++)for(var w=b*r.strides[0],_=0;_<f;_++)for(var E=_*g,C=Math.floor(E),N=Math.min(Math.ceil(E),s-1),D=w+C*r.strides[1],A=w+N*r.strides[1],T=E-C,k=1-T,F=0;F<d;F++)for(var O=F*v,I=Math.floor(O),M=Math.min(Math.ceil(O),u-1),B=O-I,R=1-B,j=D+I*r.strides[2],K=D+M*r.strides[2],V=A+I*r.strides[2],L=A+M*r.strides[2],ne=k*R,fe=k*B,te=T*R,oe=T*B,H=0;H<l;H++){var U=x[y++];h[j+H]+=U*ne,h[K+H]+=U*fe,h[V+H]+=U*te,h[L+H]+=U*oe}return ri(h,[o,u,s,l],r.dtype)},e.prototype.resizeNearestNeighbor=function(n,r,i,a){Ne(n,"resizeNearestNeighbor");for(var o=n.shape,s=o[0],u=o[1],l=o[2],c=o[3],f=this.readSync(n.dataId),d=new Float32Array(s*r*i*c),h=[a&&r>1?u-1:u,a&&i>1?l-1:l],p=[a&&r>1?r-1:r,a&&i>1?i-1:i],m=h[0]/p[0],g=h[1]/p[1],v=0,x=0;x<s;x++)for(var y=x*n.strides[0],b=0;b<r;b++)for(var w=m*b,_=y+Math.min(u-1,a?Math.round(w):Math.floor(w))*n.strides[1],E=0;E<i;E++)for(var C=g*E,N=_+Math.min(l-1,a?Math.round(C):Math.floor(C))*n.strides[2],D=0;D<c;D++){var A=f[N+D];d[v++]=A}return fr(d,[s,r,i,c],n.dtype)},e.prototype.resizeNearestNeighborBackprop=function(n,r,i){Ne([n,r],"resizeNearestNeighborBackprop");for(var a=r.shape,o=a[0],s=a[1],u=a[2],l=a[3],c=n.shape,f=c[1],d=c[2],h=new Float32Array(o*s*u*l),p=this.readSync(n.dataId),m=[i&&f>1?s-1:s,i&&d>1?u-1:u],g=[i&&f>1?f-1:f,i&&d>1?d-1:d],v=m[0]/g[0],x=m[1]/g[1],y=1/v,b=1/x,w=2*Math.ceil(y)+2,_=2*Math.ceil(b)+2,E=0;E<o;E++)for(var C=E*r.strides[0],N=0;N<s;N++)for(var D=C+N*r.strides[1],A=Math.floor(N*y),T=Math.floor(A-w/2),k=0;k<u;k++)for(var F=D+k*r.strides[2],O=Math.floor(k*b),I=Math.floor(O-_/2),M=0;M<l;M++){for(var B=0,R=0;R<w;R++){var j=R+T;if(!(j<0||j>=f)){var K=C+j*n.strides[1],V=j*v;if(N===Math.min(s-1,i?Math.round(V):Math.floor(V)))for(var L=0;L<_;L++){var ne=L+I;if(!(ne<0||ne>=d)){var fe=K+ne*n.strides[2],te=ne*x;k===Math.min(u-1,i?Math.round(te):Math.floor(te))&&(B+=p[fe+M])}}}}h[F+M]=B}return ri(h,r.shape,r.dtype)},e.prototype.batchNormalization=function(n,r,i,a,o,s){Ne([n,r,i,o,s],"batchNorm");for(var u=this.readSync(n.dataId),l=this.readSync(r.dataId),c=this.readSync(i.dataId),f=o?this.readSync(o.dataId):new Float32Array([1]),d=s?this.readSync(s.dataId):new Float32Array([0]),h=new Float32Array(u.length),p=d.length,m=f.length,g=c.length,v=l.length,x=0,y=0,b=0,w=0,_=0;_<u.length;++_)h[_]=d[x++]+(u[_]-l[y++])*f[b++]/Math.sqrt(c[w++]+a),x>=p&&(x=0),y>=v&&(y=0),b>=m&&(b=0),w>=g&&(w=0);return ri(h,n.shape)},e.prototype.localResponseNormalization4D=function(n,r,i,a,o){Ne(n,"localResponseNormalization4D");var s=n.shape[3],u=s-1,l=this.readSync(n.dataId),c=n.size,f=new Float32Array(c);function d(g){for(var v=g%s,x=g-v+Math.max(0,v-r),y=g-v+Math.min(v+r,u),b=0;x<=y;x++){var w=l[x];b+=w*w}return b}for(var h=0;h<c;h++){var p=d(h),m=l[h]*Math.pow(i+a*p,-o);f[h]=m}return ri(f,n.shape)},e.prototype.LRNGrad=function(n,r,i,a,o,s,u){Ne(n,"LRNGrad");for(var l=n.shape[3],c=this.readSync(n.dataId),f=this.readSync(r.dataId),d=this.readSync(i.dataId),h=new Float32Array(n.size),p=n.size,m=0;m<p;m++){for(var g=m%l,v=m-g+Math.max(0,g-a),x=m-g+Math.min(l,g+a+1),y=0,b=v;b<x;b++)y+=Math.pow(f[b],2);for(y=s*y+o,b=v;b<x;b++){var w=-2*s*u*f[b]*d[m]/y;m===b&&(w+=Math.pow(y,-u)),w*=c[m],h[b]+=w}}return ri(h,n.shape)},e.prototype.multinomial=function(n,r,i,a){Ne(n,"multinomial");for(var o=r?n:Jo(n),s=o.shape[0],u=o.shape[1],l=sn([s,i],"int32"),c=this.readSync(l.dataId),f=this.readSync(o.dataId),d=0;d<s;++d){var h=d*u,p=new Float32Array(u-1);p[0]=f[h];for(var m=1;m<p.length;++m)p[m]=p[m-1]+f[h+m];for(var g=hy(a.toString()),v=d*i,x=0;x<i;++x){var y=g();c[v+x]=p.length;for(var b=0;b<p.length;b++)if(y<p[b]){c[v+x]=b;break}}}return l},e.prototype.oneHot=function(n,r,i,a){Ne(n,"oneHot");var o=new Float32Array(n.size*r);o.fill(a);for(var s=this.readSync(n.dataId),u=0;u<n.size;++u)s[u]>=0&&s[u]<r&&(o[u*r+s[u]]=i);return $s(o,[n.size,r],"int32")},e.prototype.nonMaxSuppression=function(n,r,i,a,o){return Ne(n,"nonMaxSuppression"),xC(this.readSync(n.dataId),this.readSync(r.dataId),i,a,o)},e.prototype.fft=function(n){return this.fftBatch(n,!1)},e.prototype.ifft=function(n){return this.fftBatch(n,!0)},e.prototype.fftBatch=function(n,r){for(var i=n.shape[0],a=n.shape[1],o=vt(n.shape,"float32"),s=vt(n.shape,"float32"),u=Yi(n).as2D(i,a),l=qa(n).as2D(i,a),c=0;c<i;c++)for(var f=u.slice([c,0],[1,a]),d=l.slice([c,0],[1,a]),h=lr(f,d),p=this.readSync(this.fftImpl(h,r).dataId),m=0;m<a;m++){var g=K4(p,m);o.values[c*a+m]=g.real,s.values[c*a+m]=g.imag}return lr(o.toTensor(),s.toTensor()).as2D(i,a)},e.prototype.fftImpl=function(n,r){var i=n.as1D(),a=i.size;if(this.isExponentOf2(a)){var o=this.fftRadix2(i,a,r).as2D(n.shape[0],n.shape[1]);return r&&(o=lr(Yi(o).div(je(a)),qa(o).div(je(a)))),o}var s=this.readSync(n.dataId),u=function(l){for(var c=new Float32Array(l.length/2),f=new Float32Array(l.length/2),d=0;d<l.length;d+=2)c[d/2]=l[d],f[d/2]=l[d+1];return{real:c,imag:f}}(this.fourierTransformByMatmul(s,a,r));return lr(u.real,u.imag).as2D(n.shape[0],n.shape[1])},e.prototype.isExponentOf2=function(n){return(n&n-1)==0},e.prototype.fftRadix2=function(n,r,i){if(r===1)return n;var a=this.readSync(n.dataId),o=r/2,s=function(v){for(var x=Math.ceil(v.length/4),y=new Float32Array(x),b=new Float32Array(x),w=0;w<v.length;w+=4)y[Math.floor(w/4)]=v[w],b[Math.floor(w/4)]=v[w+1];return{real:y,imag:b}}(a),u=lr(s.real,s.imag).as1D(),l=function(v){for(var x=Math.floor(v.length/4),y=new Float32Array(x),b=new Float32Array(x),w=2;w<v.length;w+=4)y[Math.floor(w/4)]=v[w],b[Math.floor(w/4)]=v[w+1];return{real:y,imag:b}}(a),c=lr(l.real,l.imag).as1D();u=this.fftRadix2(u,o,i),c=this.fftRadix2(c,o,i);var f=function(v,x){for(var y=new Float32Array(v/2),b=new Float32Array(v/2),w=0;w<Math.ceil(v/2);w++){var _=(x?2:-2)*Math.PI*(w/v);y[w]=Math.cos(_),b[w]=Math.sin(_)}return{real:y,imag:b}}(r,i),d=lr(f.real,f.imag).mul(c),h=u.add(d),p=u.sub(d),m=Yi(h).concat(Yi(p)),g=qa(h).concat(qa(p));return lr(m,g).as1D()},e.prototype.fourierTransformByMatmul=function(n,r,i){for(var a=new Float32Array(2*r),o=0;o<r;o++){for(var s=0,u=0,l=0;l<r;l++){var c=bSe(o*l,r,i),f=K4(n,l);s+=f.real*c.real-f.imag*c.imag,u+=f.real*c.imag+f.imag*c.real}i&&(s/=r,u/=r),xSe(a,s,u,o)}return a},e.prototype.depthToSpace=function(n,r,i){Y(i==="NHWC",function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+i}),Y(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});for(var a=n.shape[0],o=n.shape[1],s=n.shape[2],u=n.shape[3],l=o*r,c=s*r,f=u/(r*r),d=this.readSync(n.dataId),h=new Float32Array(a*l*c*f),p=0,m=0;m<a;++m)for(var g=0;g<l;++g)for(var v=Math.floor(g/r),x=g%r,y=0;y<c;++y)for(var b=Math.floor(y/r),w=(x*r+y%r)*f,_=0;_<f;++_){var E=_+w+u*(b+s*(v+o*m));h[p++]=d[E]}return ri(h,[a,l,c,f])},e.prototype.broadcastedBinaryOp=function(n,r,i,a){var o=Mt(n.shape,r.shape),s=vt(o,i),u=this.readSync(n.dataId),l=this.readSync(r.dataId),c=Cs(n.shape,o),f=Cs(r.shape,o),d=s.values;if(c.length+f.length===0)for(var h=0;h<d.length;++h)d[h]=a(u[h%u.length],l[h%l.length]);else{var p=this.bufferSync(n),m=this.bufferSync(r),g=function(v){var x=s.indexToLoc(v),y=x.slice(-n.rank);c.forEach(function(E){return y[E]=0});var b=p.locToIndex(y),w=x.slice(-r.rank);f.forEach(function(E){return w[E]=0});var _=m.locToIndex(w);d[v]=a(u[b],l[_])};for(h=0;h<d.length;++h)g(h)}return s.toTensor()},e.prototype.broadcastedBinaryComplexOp=function(n,r,i){var a=Mt(n.shape,r.shape),o=vt(a,"float32"),s=vt(a,"float32"),u=this.readSync(n.dataId),l=this.readSync(r.dataId),c=Cs(n.shape,a),f=Cs(r.shape,a),d=o.values,h=s.values;if(c.length+f.length===0)for(var p=0;p<d.length;p++){var m=p%u.length,g=p%l.length,v=i(u[2*m],u[2*m+1],l[2*g],l[2*g+1]);d[p]=v.real,h[p]=v.imag}else{var x=this.bufferSync(this.data.get(n.dataId).complexTensors.real),y=this.bufferSync(this.data.get(r.dataId).complexTensors.real),b=function(w){var _=o.indexToLoc(w),E=_.slice(-n.rank);c.forEach(function(T){return E[T]=0});var C=x.locToIndex(E),N=_.slice(-r.rank);f.forEach(function(T){return N[T]=0});var D=y.locToIndex(N),A=i(u[2*C],u[2*C+1],l[2*D],l[2*D+1]);d[w]=A.real,h[w]=A.imag};for(p=0;p<d.length;p++)b(p)}return this.complex(o.toTensor(),s.toTensor())},e.prototype.split=function(n,r,i){return B7(n,r,i)},e.prototype.dispose=function(){},e.prototype.floatPrecision=function(){return 32},e.prototype.epsilon=function(){return 1e-7},e.prototype.cropAndResize=function(n,r,i,a,o,s){for(var u=n.shape,l=u[0],c=u[1],f=u[2],d=u[3],h=r.shape[0],p=a[0],m=a[1],g=vt([h,p,m,d],"float32"),v=this.readSync(r.dataId),x=this.readSync(i.dataId),y=this.readSync(n.dataId),b=n.strides,w=g.strides,_=0;_<h;_++){var E=4*_,C=v[E],N=v[E+1],D=v[E+2],A=v[E+3],T=x[_];if(!(T>=l))for(var k=p>1?(D-C)*(c-1)/(p-1):0,F=m>1?(A-N)*(f-1)/(m-1):0,O=0;O<p;O++){var I=p>1?C*(c-1)+O*k:.5*(C+D)*(c-1);if(I<0||I>c-1)for(var M=0;M<m;M++)for(var B=0;B<d;B++){var R=B+M*w[2]+O*w[1]+_*w[0];g.values[R]=s}else if(o==="bilinear"){var j=Math.floor(I),K=Math.ceil(I),V=I-j;for(M=0;M<m;M++)if((re=m>1?N*(f-1)+M*F:.5*(N+A)*(f-1))<0||re>f-1)for(B=0;B<d;B++)R=B+M*w[2]+O*w[1]+_*w[0],g.values[R]=s;else{var L=Math.floor(re),ne=Math.ceil(re),fe=re-L;for(B=0;B<d;B++){var te=y[R=B+L*b[2]+j*b[1]+T*b[0]],oe=y[R=B+ne*b[2]+j*b[1]+T*b[0]],H=y[R=B+L*b[2]+K*b[1]+T*b[0]],U=te+(oe-te)*fe,Q=H+(y[R=B+ne*b[2]+K*b[1]+T*b[0]]-H)*fe;R=B+M*w[2]+O*w[1]+_*w[0],g.values[R]=U+(Q-U)*V}}}else for(M=0;M<m;++M){var re;if((re=m>1?N*(f-1)+M*F:.5*(N+A)*(f-1))<0||re>f-1)for(B=0;B<d;B++)R=B+M*w[2]+O*w[1]+_*w[0],g.values[R]=s;else{var ie=Math.round(re),de=Math.round(I);for(B=0;B<d;B++){var he=B+ie*b[2]+de*b[1]+T*b[0],$=B+M*w[2]+O*w[1]+_*w[0];g.values[$]=y[he]}}}}}return g.toTensor()},e.prototype.sparseToDense=function(n,r,i,a){var o=qg(0,n,i),s=o.sliceRank,u=o.numUpdates,l=o.sliceSize,c=o.strides,f=o.outputSize;return this.scatter(n,r,i,f,l,u,s,c,a,!1)},e.prototype.gatherND=function(n,r){var i=r.shape,a=i[i.length-1],o=D7(n,r),s=o[0],u=o[1],l=o[2],c=o[3];if(u===0)return fr([],s,n.dtype);for(var f=new Lh([u,l],n.dtype),d=this.readSync(r.dataId),h=this.readSync(n.dataId),p=0;p<u;p++){for(var m=[],g=0,v=0;v<a;v++){var x=d[p*a+v];g+=x*c[v],m.push(x)}if(g<0||g>=n.size/l)throw new Error("Invalid indices: "+m+" does not index into "+n.shape);for(var y=0;y<l;y++)f.values[p*l+y]=h[g*l+y]}return f.toTensor().reshape(s)},e.prototype.scatterND=function(n,r,i){var a=qg(0,n,i),o=a.sliceRank,s=a.numUpdates,u=a.sliceSize,l=a.strides,c=a.outputSize,f=je(0);return this.scatter(n,r,i,c,u,s,o,l,f,!0)},e.prototype.fill=function(n,r,i){var a=Pg(i=i||wp(r),He(n));return a.fill(r),se.makeTensor(a,n,i,this)},e.prototype.onesLike=function(n){if(n.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(n.shape,1,n.dtype)},e.prototype.zerosLike=function(n){var r=Pg(n.dtype,He(n.shape));return this.makeOutput(r,n.shape,n.dtype)},e.prototype.linspace=function(n,r,i){return P7(n,r,i)},e.prototype.scatter=function(n,r,i,a,o,s,u,l,c,f){var d=[a/o,o],h=this.readSync(n.dataId),p=this.readSync(r.dataId);if(a===0)return fr([],i,r.dtype);var m=new Lh(d,r.dtype);m.values.fill(this.readSync(c.dataId)[0]);for(var g=0;g<s;g++){for(var v=[],x=0,y=0;y<u;y++){var b=h[g*u+y];v.push(b),x+=b*l[y]}if(x<0||x>=a/o)throw new Error("Invalid indices: "+v+" does not index into "+i);for(var w=0;w<o;w++)f?m.values[x*o+w]+=p[g*o+w]:m.values[x*o+w]=r.rank===0?p[0]:p[g*o+w]}return m.toTensor().reshape(i)},e}(R7);se.registerBackend("cpu",function(){return new $Te},1);for(var ix=0,vR=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,i=e,a=i.boxes,o=i.scores,s=r,u=s.maxOutputSize,l=s.iouThreshold,c=s.scoreThreshold,f=s.softNmsSigma,d=n;Ne(a,"NonMaxSuppressionWithScore");var h=bC(d.data.get(a.dataId).values,d.data.get(o.dataId).values,u,l,c,f);return[h.selectedIndices,h.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e.x,i=n;Ne(r,"square");for(var a=i.data.get(r.dataId).values,o=new Float32Array(a.length),s=0;s<a.length;++s){var u=a[s];o[s]=u*u}return{dataId:i.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},{kernelName:zh,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e,i=r.a,a=r.b,o=n;Ne([i,a],zh);var s=o.data.get(i.dataId).values,u=o.data.get(a.dataId).values,l=function(d,h,p,m,g,v){var x=Mt(d,h),y=x.length,b=eo(x),w=Bh(g,He(x)),_=d.length,E=h.length,C=eo(d),N=eo(h),D=Cs(d,x),A=Cs(h,x);if(D.length+A.length===0)for(var T=0;T<w.length;++T)w[T]=v(p[T%p.length],m[T%m.length]);else{var k=function(F){var O=XCe(F,y,b),I=O.slice(-_);D.forEach(function(j){return I[j]=0});var M=j4(I,_,C),B=O.slice(-E);A.forEach(function(j){return B[j]=0});var R=j4(B,E,N);w[F]=v(p[M],m[R])};for(T=0;T<w.length;++T)k(T)}return[w,x]}(i.shape,a.shape,s,u,i.dtype,function(d,h){var p=d-h;return p*p}),c=l[0],f=l[1];return{dataId:o.write(c,f,i.dtype),shape:f,dtype:i.dtype}}}];ix<vR.length;ix++)o7(vR[ix]);var ql,zTe=function(t){this.variableNames=["A"];var e=Mr(),n=t[0],r=t[1];this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+r+".0, "+n+`.0);

        vec4 values = `+e.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `},UTe=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var e=Mr(),n=t[0],r=t[1];this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`+r+".0, "+n+`.0);
            vec4 values = `+e.texture2D+`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `+e.output+` = result;
      }
    `};for(var ax=0,gR=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,i=e.pixels,a=r.numChannels,o=typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement,s=typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement,u=o?[i.videoWidth,i.videoHeight]:[i.width,i.height],l=u[0],c=u[1],f=[c,l],d=[c,l,a];(s||o)&&(ql==null&&(ql=document.createElement("canvas").getContext("2d")),ql.canvas.width=l,ql.canvas.height=c,ql.drawImage(i,0,0,l,c),i=ql.canvas);var h=n.makeTensorInfo(f,"int32");n.texData.get(h.dataId).usage=Si.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(h.dataId),i);var p=_e().getBool("WEBGL_PACK")?new UTe(d):new zTe(d),m=n.runWebGLProgram(p,[h],"int32");return n.disposeData(h.dataId),m}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs;jg("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var i=e,a=i.boxes,o=i.scores,s=r,u=s.maxOutputSize,l=s.iouThreshold,c=s.scoreThreshold,f=s.softNmsSigma,d=n,h=bC(d.readSync(a.dataId),d.readSync(o.dataId),u,l,c,f);return[h.selectedIndices,h.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e.x,i=n,a=new _t(r.shape,"return x * x;");return i.runWebGLProgram(a,[r],r.dtype)}},{kernelName:zh,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e,i=r.a,a=r.b,o=n,s=_e().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new go("return (a - b) * (a - b);",i.shape,a.shape):new En("return (a - b) * (a - b);",i.shape,a.shape);return o.compileAndRun(s,[i,a])}}];ax<gR.length;ax++)o7(gR[ax]);for(var ox=0,yR=[{kernelName:"Square",gradFunc:function(t,e){var n=e[0];return{x:function(){return t.mul(n.toFloat().mul(2))}}}},{kernelName:zh,gradFunc:function(t,e){var n=e[0],r=e[1],i=je(2);return{a:function(){return kr(t,kr(i,qn(n,r)))},b:function(){return kr(t,kr(i,qn(r,n)))}}}}];ox<yR.length;ox++)jCe(yR[ox]);var WTe=function(){function t(){}return t.prototype.fetch=function(e,n){return fetch(e,n)},t.prototype.now=function(){return performance.now()},t.prototype.encode=function(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+n);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)},t.prototype.decode=function(e,n){return new TextDecoder(n).decode(e)},t}();_e().get("IS_BROWSER")&&_e().setPlatform("browser",new WTe);var sx,VTe=function(){return require("node-fetch")},qTe=function(){function t(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return t.prototype.fetch=function(e,n){return _e().global.fetch!=null?_e().global.fetch(e,n):(sx==null&&(sx=VTe()),sx(e,n))},t.prototype.now=function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6},t.prototype.encode=function(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+n);return this.textEncoder.encode(e)},t.prototype.decode=function(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)},t}();_e().get("IS_NODE")&&_e().setPlatform("node",new qTe);var Ow={float32:4,int32:4,uint16:2,uint8:1,bool:1},Zg=4;function T9(t,e){for(var n={},r=0,i=function(s){var u=s.name,l=s.dtype,c=s.shape,f=He(c),d=void 0;if("quantization"in s){var h=s.quantization;if(h.dtype!=="uint8"&&h.dtype!=="uint16")throw new Error("Weight "+s.name+" has unknown quantization dtype "+h.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var p=Ow[h.dtype],m=t.slice(r,r+f*p),g=h.dtype==="uint8"?new Uint8Array(m):new Uint16Array(m);if(l==="float32")d=Float32Array.from(g,function(_){return _*h.scale+h.min});else{if(l!=="int32")throw new Error("Unsupported dtype in weight '"+u+"': "+l);d=Int32Array.from(g,function(_){return Math.round(_*h.scale+h.min)})}r+=f*p}else if(l==="string"){var v=He(s.shape);d=[];for(var x=0;x<v;x++){var y=new Uint32Array(t.slice(r,r+Zg))[0];r+=Zg;var b=new Uint8Array(t.slice(r,r+y));d.push(b),r+=y}}else{var w=Ow[l];if(m=t.slice(r,r+f*w),l==="float32")d=new Float32Array(m);else if(l==="int32")d=new Int32Array(m);else{if(l!=="bool")throw new Error("Unsupported dtype in weight '"+u+"': "+l);d=new Uint8Array(m)}r+=f*w}n[u]=fr(d,c,l)},a=0,o=e;a<o.length;a++)i(o[a]);return n}function HTe(t){if(t===null)throw new Error("Invalid input value: "+JSON.stringify(t));var e=0,n=[];t.forEach(function(a){if(e+=a.byteLength,n.push(a.byteLength===a.buffer.byteLength?a:new a.constructor(a)),!(a instanceof Float32Array||a instanceof Int32Array||a instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+a.constructor.name)});var r=new Uint8Array(e),i=0;return n.forEach(function(a){r.set(new Uint8Array(a.buffer),i),i+=a.byteLength}),r.buffer}var Bw=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function xR(t){return Bw?Buffer.byteLength(t):new Blob([t]).size}function jC(t){var e=0;t.forEach(function(i){e+=i.byteLength});var n=new Uint8Array(e),r=0;return t.forEach(function(i){n.set(new Uint8Array(i),r),r+=i.byteLength}),n.buffer}function bR(t){for(t=t.trim();t.endsWith("/");)t=t.slice(0,t.length-1);var e=t.split("/");return e[e.length-1]}function Ap(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:xR(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:xR(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:t.weightData.byteLength}}var Di=function(){function t(){this.saveRouters=[],this.loadRouters=[]}return t.getInstance=function(){return t.instance==null&&(t.instance=new t),t.instance},t.registerSaveRouter=function(e){t.getInstance().saveRouters.push(e)},t.registerLoadRouter=function(e){t.getInstance().loadRouters.push(e)},t.getSaveHandlers=function(e){return t.getHandlers(e,"save")},t.getLoadHandlers=function(e,n){return t.getHandlers(e,"load",n)},t.getHandlers=function(e,n,r){var i=[];return(n==="load"?t.getInstance().loadRouters:t.getInstance().saveRouters).forEach(function(a){var o=a(e,r);o!==null&&i.push(o)}),i},t}(),Oc="://",zs=function(){function t(){this.managers={}}return t.getInstance=function(){return t.instance==null&&(t.instance=new t),t.instance},t.registerManager=function(e,n){Y(e!=null,function(){return"scheme must not be undefined or null."}),e.endsWith(Oc)&&(e=e.slice(0,e.indexOf(Oc))),Y(e.length>0,function(){return"scheme must not be an empty string."});var r=t.getInstance();Y(r.managers[e]==null,function(){return"A model store manager is already registered for scheme '"+e+"'."}),r.managers[e]=n},t.getManager=function(e){var n=this.getInstance().managers[e];if(n==null)throw new Error("Cannot find model manager for scheme '"+e+"'");return n},t.getSchemes=function(){return Object.keys(this.getInstance().managers)},t}();function iv(t){if(t.indexOf(Oc)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+zs.getSchemes().join(","));return{scheme:t.split(Oc)[0],path:t.split(Oc)[1]}}function wR(t,e,n){return n===void 0&&(n=!1),We(this,void 0,void 0,function(){var r,i,a,o,s,u,l,c,f;return Ve(this,function(d){switch(d.label){case 0:return Y(t!==e,function(){return"Old path and new path are the same: '"+t+"'"}),Y((r=Di.getLoadHandlers(t)).length>0,function(){return"Copying failed because no load handler is found for source URL "+t+"."}),Y(r.length<2,function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+t+"."}),i=r[0],Y((a=Di.getSaveHandlers(e)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+e+"."}),Y(a.length<2,function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+e+"."}),o=a[0],s=iv(t).scheme,u=iv(t).path,l=s===iv(t).scheme,[4,i.load()];case 1:return c=d.sent(),n&&l?[4,zs.getManager(s).removeModel(u)]:[3,3];case 2:d.sent(),d.label=3;case 3:return[4,o.save(c)];case 4:return f=d.sent(),!n||l?[3,6]:[4,zs.getManager(s).removeModel(u)];case 5:d.sent(),d.label=6;case 6:return[2,f.modelArtifactsInfo]}})})}var Hu="models_store",Ns="model_info_store";function M9(){if(!_e().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var t=window||self,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function Lw(t){var e=t.result;e.createObjectStore(Hu,{keyPath:"modelPath"}),e.createObjectStore(Ns,{keyPath:"modelPath"})}var Bc=function(){function t(e){if(this.indexedDB=M9(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}return t.prototype.save=function(e){return We(this,void 0,void 0,function(){return Ve(this,function(n){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,e)]})})},t.prototype.load=function(){return We(this,void 0,void 0,function(){return Ve(this,function(e){return[2,this.databaseAction(this.modelPath)]})})},t.prototype.databaseAction=function(e,n){var r=this;return new Promise(function(i,a){var o=r.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return Lw(o)},o.onsuccess=function(){var s=o.result;if(n==null){var u=s.transaction(Hu,"readonly"),l=u.objectStore(Hu).get(r.modelPath);l.onsuccess=function(){if(l.result==null)return s.close(),a(new Error("Cannot find model with path '"+r.modelPath+"' in IndexedDB."));i(l.result.modelArtifacts)},l.onerror=function(m){return s.close(),a(l.error)},u.oncomplete=function(){return s.close()}}else{var c,f=Ap(n),d=s.transaction(Ns,"readwrite"),h=d.objectStore(Ns),p=h.put({modelPath:r.modelPath,modelArtifactsInfo:f});p.onsuccess=function(){var m=(c=s.transaction(Hu,"readwrite")).objectStore(Hu).put({modelPath:r.modelPath,modelArtifacts:n,modelArtifactsInfo:f});m.onsuccess=function(){return i({modelArtifactsInfo:f})},m.onerror=function(g){var v=(h=d.objectStore(Ns)).delete(r.modelPath);v.onsuccess=function(){return s.close(),a(m.error)},v.onerror=function(x){return s.close(),a(m.error)}}},p.onerror=function(m){return s.close(),a(p.error)},d.oncomplete=function(){c==null?s.close():c.oncomplete=function(){return s.close()}}}},o.onerror=function(s){return a(o.error)}})},t.URL_SCHEME="indexeddb://",t}(),_R=function(t){return _e().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Bc.URL_SCHEME)?(e=t.slice(Bc.URL_SCHEME.length),new Bc(e)):null;var e};Di.registerSaveRouter(_R),Di.registerLoadRouter(_R);var GTe=function(){function t(){this.indexedDB=M9()}return t.prototype.listModels=function(){return We(this,void 0,void 0,function(){var e=this;return Ve(this,function(n){return[2,new Promise(function(r,i){var a=e.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return Lw(a)},a.onsuccess=function(){var o=a.result,s=o.transaction(Ns,"readonly"),u=s.objectStore(Ns).getAll();u.onsuccess=function(){for(var l={},c=0,f=u.result;c<f.length;c++){var d=f[c];l[d.modelPath]=d.modelArtifactsInfo}r(l)},u.onerror=function(l){return o.close(),i(u.error)},s.oncomplete=function(){return o.close()}},a.onerror=function(o){return i(a.error)}})]})})},t.prototype.removeModel=function(e){return We(this,void 0,void 0,function(){var n=this;return Ve(this,function(r){var i;return e=(i=e).startsWith(Bc.URL_SCHEME)?i.slice(Bc.URL_SCHEME.length):i,[2,new Promise(function(a,o){var s=n.indexedDB.open("tensorflowjs",1);s.onupgradeneeded=function(){return Lw(s)},s.onsuccess=function(){var u,l=s.result,c=l.transaction(Ns,"readwrite"),f=c.objectStore(Ns),d=f.get(e);d.onsuccess=function(){if(d.result==null)return l.close(),o(new Error("Cannot find model with path '"+e+"' in IndexedDB."));var h=f.delete(e),p=function(){var m=(u=l.transaction(Hu,"readwrite")).objectStore(Hu).delete(e);m.onsuccess=function(){return a(d.result.modelArtifactsInfo)},m.onerror=function(g){return o(d.error)}};h.onsuccess=p,h.onerror=function(m){return p(),l.close(),o(d.error)}},d.onerror=function(h){return l.close(),o(d.error)},c.oncomplete=function(){u==null?l.close():u.oncomplete=function(){return l.close()}}},s.onerror=function(u){return o(s.error)}})]})})},t}();if(_e().getBool("IS_BROWSER"))try{zs.registerManager(Bc.URL_SCHEME,new GTe)}catch{}var wo="/",Ql="tensorflowjs_models",I9="info",KTe="model_topology",YTe="weight_specs",XTe="weight_data",QTe="model_metadata";function R9(t){return{info:[Ql,t,I9].join(wo),topology:[Ql,t,KTe].join(wo),weightSpecs:[Ql,t,YTe].join(wo),weightData:[Ql,t,XTe].join(wo),modelMetadata:[Ql,t,QTe].join(wo)}}function ZTe(t){var e=t.split(wo);if(e.length<3)throw new Error("Invalid key format: "+t);return e.slice(1,e.length-1).join(wo)}var Lc=function(){function t(e){if(!_e().getBool("IS_BROWSER")||typeof window>"u"||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=R9(this.modelPath)}return t.prototype.save=function(e){return We(this,void 0,void 0,function(){var n,r,i;return Ve(this,function(a){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),i=Ap(e);try{return this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(o){if(Bw)return Buffer.from(o).toString("base64");for(var s=new Uint8Array(o),u="",l=0,c=s.length;l<c;l++)u+=String.fromCharCode(s[l]);return btoa(u)}(e.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata})),[2,{modelArtifactsInfo:i}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+i.modelTopologyBytes+", weightSpecsBytes="+i.weightSpecsBytes+", weightDataBytes="+i.weightDataBytes+".")}return[2]})})},t.prototype.load=function(){return We(this,void 0,void 0,function(){var e,n,r,i,a,o,s;return Ve(this,function(u){if((e=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(n={},(r=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(n.modelTopology=r,(i=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(n.weightSpecs=i,(a=this.LS.getItem(this.keys.modelMetadata))!=null&&(o=JSON.parse(a),n.format=o.format,n.generatedBy=o.generatedBy,n.convertedBy=o.convertedBy,n.userDefinedMetadata=o.userDefinedMetadata),(s=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return n.weightData=function(l){if(Bw){var c=Buffer.from(l,"base64");return c.buffer.slice(c.byteOffset,c.byteOffset+c.byteLength)}for(var f=atob(l),d=new Uint8Array(f.length),h=0;h<f.length;++h)d.set([f.charCodeAt(h)],h);return d.buffer}(s),[2,n]})})},t.URL_SCHEME="localstorage://",t}(),ER=function(t){return _e().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Lc.URL_SCHEME)?(e=t.slice(Lc.URL_SCHEME.length),new Lc(e)):null;var e};Di.registerSaveRouter(ER),Di.registerLoadRouter(ER);var JTe=function(){function t(){Y(_e().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),Y(typeof window>"u"||window.localStorage!==void 0,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return t.prototype.listModels=function(){return We(this,void 0,void 0,function(){var e,n,r,i,a,o;return Ve(this,function(s){for(e={},n=Ql+wo,r=wo+I9,i=0;i<this.LS.length;++i)(a=this.LS.key(i)).startsWith(n)&&a.endsWith(r)&&(o=ZTe(a),e[o]=JSON.parse(this.LS.getItem(a)));return[2,e]})})},t.prototype.removeModel=function(e){return We(this,void 0,void 0,function(){var n,r;return Ve(this,function(i){var a;if(e=(a=e).startsWith(Lc.URL_SCHEME)?a.slice(Lc.URL_SCHEME.length):a,n=R9(e),this.LS.getItem(n.info)==null)throw new Error("Cannot find model at path '"+e+"'");return r=JSON.parse(this.LS.getItem(n.info)),this.LS.removeItem(n.info),this.LS.removeItem(n.topology),this.LS.removeItem(n.weightSpecs),this.LS.removeItem(n.weightData),[2,r]})})},t}();if(_e().getBool("IS_BROWSER"))try{zs.registerManager(Lc.URL_SCHEME,new JTe)}catch{}var eMe="model",tMe=".json",nMe=".weights.bin";function CR(t){return new Promise(function(e){return setTimeout(e)}).then(t)}var ux=function(){function t(e){if(!_e().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(t.URL_SCHEME)&&(e=e.slice(t.URL_SCHEME.length)),e!=null&&e.length!==0||(e=eMe),this.modelTopologyFileName=e+tMe,this.weightDataFileName=e+nMe}return t.prototype.save=function(e){return We(this,void 0,void 0,function(){var n,r,i,a,o,s;return Ve(this,function(u){switch(u.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(n=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"})),!(e.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return r=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],i={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:r},a=window.URL.createObjectURL(new Blob([JSON.stringify(i)],{type:"application/json"})),(o=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,o.href=a,[4,CR(function(){return o.dispatchEvent(new MouseEvent("click"))})];case 2:return u.sent(),e.weightData==null?[3,4]:((s=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=n,[4,CR(function(){return s.dispatchEvent(new MouseEvent("click"))})]);case 3:u.sent(),u.label=4;case 4:return[2,{modelArtifactsInfo:Ap(e)}]}})})},t.URL_SCHEME="downloads://",t}(),rMe=function(){function t(e){if(e==null||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+e);this.files=e}return t.prototype.load=function(){return We(this,void 0,void 0,function(){var e,n,r=this;return Ve(this,function(i){return e=this.files[0],n=this.files.slice(1),[2,new Promise(function(a,o){var s=new FileReader;s.onload=function(u){var l=JSON.parse(u.target.result),c=l.modelTopology;if(c!=null){n.length===0&&a({modelTopology:c});var f=l.weightsManifest;if(f!=null){var d;try{d=r.checkManifestAndWeightFiles(f,n)}catch(g){return void o(g)}var h=[],p=[],m=[];f.forEach(function(g){g.paths.forEach(function(v){p.push(v),m.push(null)}),h.push.apply(h,g.weights)}),f.forEach(function(g){g.paths.forEach(function(v){var x=new FileReader;x.onload=function(y){var b=y.target.result,w=p.indexOf(v);m[w]=b,m.indexOf(null)===-1&&a({modelTopology:c,weightSpecs:h,weightData:jC(m),format:l.format,generatedBy:l.generatedBy,convertedBy:l.convertedBy,userDefinedMetadata:l.userDefinedMetadata})},x.onerror=function(y){return o("Failed to weights data from file of path '"+v+"'.")},x.readAsArrayBuffer(d[v])})})}else o(new Error("weightManifest field is missing from file "+e.name))}else o(new Error("modelTopology field is missing from file "+e.name))},s.onerror=function(u){return o("Failed to read model topology and weights manifest JSON from file '"+e.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},s.readAsText(e)})]})})},t.prototype.checkManifestAndWeightFiles=function(e,n){for(var r=[],i=n.map(function(u){return bR(u.name)}),a={},o=0,s=e;o<s.length;o++)s[o].paths.forEach(function(u){var l=bR(u);if(r.indexOf(l)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+l+"'");if(r.push(l),i.indexOf(l)===-1)throw new Error("Weight file with basename '"+l+"' is not provided.");a[u]=n[i.indexOf(l)]});if(r.length!==n.length)throw new Error("Mismatch in the number of files in weights manifest ("+r.length+") and the number of weight files provided ("+n.length+").");return a},t}();function NR(t,e,n,r){(function(a){Y(a!=null&&Array.isArray(a)&&a.length>0,function(){return"promises must be a none empty array"})})(t),function(a,o){Y(a>=0&&a<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+a}),Y(o>=0&&o<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+o}),Y(o>=a,function(){return"startFraction must be no more than endFraction, but got startFraction "+a+" and endFraction "+o})}(n=n??0,r=r??1);var i=0;return Promise.all(t.map(function(a){return a.then(function(o){var s=n+ ++i/t.length*(r-n);return e(s),o}),a}))}function k9(t,e){return We(this,void 0,void 0,function(){var n,r,i,a,o,s,u,l,c;return Ve(this,function(f){switch(f.label){case 0:return e==null&&(e={}),n=e.fetchFunc==null?_e().platform.fetch:e.fetchFunc,r=t.map(function(d){return n(d,e.requestInit,{isBinary:!0})}),i=0,a=.5,e.onProgress!=null?[3,2]:[4,Promise.all(r)];case 1:return o=f.sent(),[3,4];case 2:return[4,NR(r,e.onProgress,i,a)];case 3:o=f.sent(),f.label=4;case 4:return s=o.map(function(d){return d.arrayBuffer()}),u=.5,l=1,e.onProgress!=null?[3,6]:[4,Promise.all(s)];case 5:return c=f.sent(),[3,8];case 6:return[4,NR(s,e.onProgress,u,l)];case 7:c=f.sent(),f.label=8;case 8:return[2,c]}})})}function SR(t){var e=this;return function(n,r,i){return r===void 0&&(r=""),We(e,void 0,void 0,function(){var a,o,s,u,l,c,f,d,h,p;return Ve(this,function(m){switch(m.label){case 0:if(a=n.map(function(){return!1}),o={},s=i!=null?i.map(function(){return!1}):[],u=[],n.forEach(function(g,v){var x=0;g.weights.forEach(function(y){var b="quantization"in y?y.quantization.dtype:y.dtype,w=Ow[b]*He(y.shape),_=function(){a[v]=!0,o[v]==null&&(o[v]=[]),o[v].push({manifestEntry:y,groupOffset:x,sizeBytes:w})};i!=null?i.forEach(function(E,C){E===y.name&&(_(),s[C]=!0)}):_(),u.push(y.name),x+=w})}),!s.every(function(g){return g}))throw l=i.filter(function(g,v){return!s[v]}),new Error("Could not find weights in manifest with names: "+l.join(", ")+`. 
Manifest JSON has weights with names: `+u.join(", ")+".");return c=a.reduce(function(g,v,x){return v&&g.push(x),g},[]),f=[],c.forEach(function(g){n[g].paths.forEach(function(v){var x=r+(r.endsWith("/")?"":"/")+v;f.push(x)})}),[4,t(f)];case 1:return d=m.sent(),h={},p=0,c.forEach(function(g){for(var v=n[g].paths.length,x=0,y=0;y<v;y++)x+=d[p+y].byteLength;for(var b=new ArrayBuffer(x),w=new Uint8Array(b),_=0,E=0;E<v;E++){var C=new Uint8Array(d[p+E]);w.set(C,_),_+=C.byteLength}o[g].forEach(function(N){var D=T9(b.slice(N.groupOffset,N.groupOffset+N.sizeBytes),[N.manifestEntry]);for(var A in D)h[A]=D[A]}),p+=v}),[2,h]}})})}}Di.registerSaveRouter(function(t){return _e().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(ux.URL_SCHEME)?function(e){return e===void 0&&(e="model"),new ux(e)}(t.slice(ux.URL_SCHEME.length)):null});var F9=function(){function t(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,n.fetchFunc!=null?(Y(typeof n.fetchFunc=="function",function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=n.fetchFunc):this.fetch=_e().platform.fetch,Y(e!=null&&e.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(e)&&Y(e.length===2,function(){return"URL paths for http must have a length of 2, (actual length is "+e.length+")."}),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return t.prototype.save=function(e){return We(this,void 0,void 0,function(){var n,r,i,a;return Ve(this,function(o){switch(o.label){case 0:if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],i={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata,weightsManifest:r},n.body.append("model.json",new Blob([JSON.stringify(i)],{type:"application/json"}),"model.json"),e.weightData!=null&&n.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,n)];case 1:if((a=o.sent()).ok)return[2,{modelArtifactsInfo:Ap(e),responses:[a]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+a.status+".")}})})},t.prototype.load=function(){return We(this,void 0,void 0,function(){var e,n,r,i,a,o,s,u,l,c,f,d;return Ve(this,function(h){switch(h.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(e=h.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+e.status+". Please verify this URL points to the model JSON of the model to load.");h.label=2;case 2:return h.trys.push([2,4,,5]),[4,e.json()];case 3:return n=h.sent(),[3,5];case 4:throw h.sent(),r="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 5:if(i=n.modelTopology,a=n.weightsManifest,o=n.generatedBy,s=n.convertedBy,u=n.format,l=n.userDefinedMetadata,i==null&&a==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return a==null?[3,7]:[4,this.loadWeights(a)];case 6:d=h.sent(),c=d[0],f=d[1],h.label=7;case 7:return[2,{modelTopology:i,weightSpecs:c,weightData:f,userDefinedMetadata:l,generatedBy:o,convertedBy:s,format:u}]}})})},t.prototype.loadWeights=function(e){return We(this,void 0,void 0,function(){var n,r,i,a,o,s,u,l,c,f,d;return Ve(this,function(h){switch(h.label){case 0:for(n=Array.isArray(this.path)?this.path[1]:this.path,r=function(p){var m=p.lastIndexOf("/"),g=p.lastIndexOf("?"),v=p.substring(0,m),x=g>m?p.substring(g):"";return[v+"/",x]}(n),i=r[0],a=r[1],o=this.weightPathPrefix||i,s=[],u=0,l=e;u<l.length;u++)c=l[u],s.push.apply(s,c.weights);return f=[],e.forEach(function(p){p.paths.forEach(function(m){f.push(o+m+a)})}),[4,k9(f,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return d=h.sent(),[2,[s,jC(d)]]}})})},t.URL_SCHEME_REGEX=/^https?:\/\//,t}();function jw(t){return t.match(F9.URL_SCHEME_REGEX)!=null}var DR=function(t,e){return typeof fetch>"u"?null:(Array.isArray(t)?t.every(function(n){return jw(n)}):jw(t))?$w(t,{onProgress:e}):null};function $w(t,e){return new F9(t,e)}Di.registerSaveRouter(DR),Di.registerLoadRouter(DR);var lx=function(){function t(e){this.modelArtifacts=e}return t.prototype.load=function(){return We(this,void 0,void 0,function(){return Ve(this,function(e){return[2,this.modelArtifacts]})})},t}(),iMe=function(){function t(e){this.saveHandler=e}return t.prototype.save=function(e){return We(this,void 0,void 0,function(){return Ve(this,function(n){return[2,this.saveHandler(e)]})})},t}(),P9=Object.freeze({browserFiles:function(t){return new rMe(t)},browserHTTPRequest:function(t,e){return $w(t,e)},concatenateArrayBuffers:jC,decodeWeights:T9,encodeWeights:function(t,e){return We(this,void 0,void 0,function(){var n,r,i,a,o,s=this;return Ve(this,function(u){switch(u.label){case 0:for(n=[],r=[],i=Array.isArray(t)?t.map(function(l){return l.name}):Object.keys(t),a=function(l){var c=i[l],f=Array.isArray(t)?t[l].tensor:t[c];if(f.dtype!=="float32"&&f.dtype!=="int32"&&f.dtype!=="bool"&&f.dtype!=="string")throw new Error("Unsupported dtype in weight '"+c+"': "+f.dtype);var d={name:c,shape:f.shape,dtype:f.dtype};if(f.dtype==="string"){var h=new Promise(function(p){return We(s,void 0,void 0,function(){var m,g,v,x,y,b,w;return Ve(this,function(_){switch(_.label){case 0:return[4,f.bytes()];case 1:for(m=_.sent(),g=m.reduce(function(E,C){return E+C.length},0)+Zg*m.length,v=new Uint8Array(g),x=0,y=0;y<m.length;y++)b=m[y],w=new Uint8Array(new Uint32Array([b.length]).buffer),v.set(w,x),x+=Zg,v.set(b,x),x+=b.length;return p(v),[2]}})})});r.push(h)}else r.push(f.data());e!=null&&(d.group=e),n.push(d)},o=0;o<i.length;++o)a(o);return[4,Promise.all(r)];case 1:return[2,{data:HTe(u.sent()),specs:n}]}})})},fromMemory:function(t,e,n,r){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new lx(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new lx({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new lx({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))},getLoadHandlers:function(t,e){return Di.getLoadHandlers(t,e)},getModelArtifactsInfoForJSON:Ap,getSaveHandlers:function(t){return Di.getSaveHandlers(t)},http:$w,isHTTPScheme:jw,loadWeights:function(t,e,n,r){return e===void 0&&(e=""),We(this,void 0,void 0,function(){return Ve(this,function(i){return[2,SR(function(a){return k9(a,{requestInit:r})})(t,e,n)]})})},registerLoadRouter:function(t){return Di.registerLoadRouter(t)},registerSaveRouter:function(t){return Di.registerSaveRouter(t)},weightsLoaderFactory:SR,withSaveHandler:function(t){return new iMe(t)},copyModel:function(t,e){return We(this,void 0,void 0,function(){return Ve(this,function(n){return[2,wR(t,e,!1)]})})},listModels:function(){return We(this,void 0,void 0,function(){var t,e,n,r,i,a,o;return Ve(this,function(s){switch(s.label){case 0:t=zs.getSchemes(),e={},n=0,r=t,s.label=1;case 1:return n<r.length?(i=r[n],[4,zs.getManager(i).listModels()]):[3,4];case 2:for(o in a=s.sent())e[i+Oc+o]=a[o];s.label=3;case 3:return n++,[3,1];case 4:return[2,e]}})})},moveModel:function(t,e){return We(this,void 0,void 0,function(){return Ve(this,function(n){return[2,wR(t,e,!0)]})})},removeModel:function(t){return We(this,void 0,void 0,function(){var e;return Ve(this,function(n){return e=iv(t),[2,zs.getManager(e.scheme).removeModel(e.path)]})})}}),Hl;ae({confusionMatrix_:function(t,e,n){var r=W(t,"labels","confusionMatrix"),i=W(e,"predictions","confusionMatrix");Y(n==null||n>0&&Number.isInteger(n),function(){return"If provided, numClasses must be a positive integer, but got "+n}),Y(r.rank===1,function(){return"Expected the rank of labels to be 1, but got "+r.rank}),Y(i.rank===1,function(){return"Expected the rank of predictions to be 1, but got "+i.rank}),Y(r.shape[0]===i.shape[0],function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+i.shape[0]+". Labels and predictions should have the same number of elements."}),Y(n>0&&Number.isInteger(n),function(){return"numClasses is required to be a positive integer, but got "+n});var a=Iw(r.asType("int32"),n),o=Iw(i.asType("int32"),n);return a.transpose().matMul(o).asType("int32")}});var aMe=ae({fromPixels_:function(t,e){if(e===void 0&&(e=3),e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,i=!1,a=!1,o=!1;if(t.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)i=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)a=!0;else{if(t.getContext==null)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+t.constructor.name);o=!0}if(i&&i&&t.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(a7("FromPixels",se.backendName)!=null)return se.runKernel("FromPixels",{pixels:t},{numChannels:e});var s,u,l=i?[t.videoWidth,t.videoHeight]:[t.width,t.height],c=l[0],f=l[1];if(o?s=t.getContext("2d").getImageData(0,0,c,f).data:r||n?s=t.data:(a||i)&&(Hl==null&&(Hl=document.createElement("canvas").getContext("2d")),Hl.canvas.width=c,Hl.canvas.height=f,Hl.drawImage(t,0,0,c,f),s=Hl.getImageData(0,0,c,f).data),e===4)u=new Int32Array(s);else{var d=c*f;u=new Int32Array(d*e);for(var h=0;h<d;h++)for(var p=0;p<e;++p)u[h*e+p]=s[4*h+p]}return pC(u,[f,c,e],"int32")}}),$C=Object.freeze({toPixels:function(t,e){return We(this,void 0,void 0,function(){var n,r,i,a,o,s,u,l,c,f,d,h,p,m,g,v,x,y,b,w,_,E,C;return Ve(this,function(N){switch(N.label){case 0:if(n=W(t,"img","toPixels"),t instanceof vn||(n=n.toInt()),n.rank!==2&&n.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),i=r[0],a=r[1],(o=n.rank===2?1:n.shape[2])>4||o===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+o);return[4,n.data()];case 1:return s=N.sent(),u=n.min(),l=n.max(),[4,Promise.all([u.data(),l.data()])];case 2:if(c=N.sent(),f=c[0],d=c[1],h=f[0],p=d[0],u.dispose(),l.dispose(),n.dtype==="float32"){if(h<0||p>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+h+" - "+p+"].")}else{if(n.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(h<0||p>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+h+" - "+p+"].")}for(m=n.dtype==="float32"?255:1,g=new Uint8ClampedArray(a*i*4),v=0;v<i*a;++v)x=void 0,y=void 0,b=void 0,w=void 0,o===1?(x=s[v]*m,y=s[v]*m,b=s[v]*m,w=255):o===3?(x=s[3*v]*m,y=s[3*v+1]*m,b=s[3*v+2]*m,w=255):o===4&&(x=s[4*v]*m,y=s[4*v+1]*m,b=s[4*v+2]*m,w=s[4*v+3]*m),g[(_=4*v)+0]=Math.round(x),g[_+1]=Math.round(y),g[_+2]=Math.round(b),g[_+3]=Math.round(w);return e!=null&&(e.width=a,e.height=i,E=e.getContext("2d"),C=new ImageData(g,a,i),E.putImageData(C,0,0)),n!==t&&n.dispose(),[2,g]}})})},fromPixels:aMe}),oMe=function(){function t(){}return t.prototype.getClassName=function(){return this.constructor.className},t.fromConfig=function(e,n){return new e(n)},t}(),sMe=function(){function t(){this.classNameMap={}}return t.getMap=function(){return t.instance==null&&(t.instance=new t),t.instance},t.register=function(e){t.getMap().classNameMap[e.className]=[e,e.fromConfig]},t}();function Fl(t){Y(t.className!=null,function(){return"Class being registered does not have the static className property defined."}),Y(typeof t.className=="string",function(){return"className is required to be a string, but got type "+typeof t.className}),Y(t.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),sMe.register(t)}var Pl=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return Oa(e,t),e.prototype.minimize=function(n,r,i){r===void 0&&(r=!1);var a=this.computeGradients(n,i),o=a.value,s=a.grads;if(i!=null){var u=i.map(function(l){return{name:l.name,tensor:s[l.name]}});this.applyGradients(u)}else this.applyGradients(s);return mi(s),r?o:(o.dispose(),null)},Object.defineProperty(e.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),e.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},e.prototype.computeGradients=function(n,r){return gSe(n,r)},e.prototype.dispose=function(){this.iterations_!=null&&mi(this.iterations_)},e.prototype.saveIterations=function(){return We(this,void 0,void 0,function(){return Ve(this,function(n){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:je(this.iterations_,"int32")}]})})},e.prototype.getWeights=function(){return We(this,void 0,void 0,function(){return Ve(this,function(n){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},e.prototype.setWeights=function(n){return We(this,void 0,void 0,function(){return Ve(this,function(r){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},e.prototype.extractIterations=function(n){return We(this,void 0,void 0,function(){var r;return Ve(this,function(i){switch(i.label){case 0:return r=this,[4,n[0].tensor.data()];case 1:return r.iterations_=i.sent()[0],[2,n.slice(1)]}})})},e}(oMe);Object.defineProperty(Pl,Symbol.hasInstance,{value:function(t){return t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null}});var uMe=function(t){function e(n,r,i){i===void 0&&(i=null);var a=t.call(this)||this;return a.learningRate=n,a.rho=r,a.epsilon=i,a.accumulatedGrads=[],a.accumulatedUpdates=[],i==null&&(a.epsilon=se.backend.epsilon()),a}return Oa(e,t),e.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n)).forEach(function(i,a){var o=se.registeredVariables[i];r.accumulatedGrads[a]==null&&(r.accumulatedGrads[a]={originalName:i+"/accum_grad",variable:$e(function(){return Ot(o).variable(!1)})}),r.accumulatedUpdates[a]==null&&(r.accumulatedUpdates[a]={originalName:i+"/accum_var",variable:$e(function(){return Ot(o).variable(!1)})});var s=Array.isArray(n)?n[a].tensor:n[i];if(s!=null){var u=r.accumulatedGrads[a].variable,l=r.accumulatedUpdates[a].variable;$e(function(){var c=u.mul(r.rho).add(s.square().mul(1-r.rho)),f=l.add(r.epsilon).sqrt().div(u.add(r.epsilon).sqrt()).mul(s),d=l.mul(r.rho).add(f.square().mul(1-r.rho));u.assign(c),l.assign(d);var h=f.mul(-r.learningRate).add(o);o.assign(h)})}}),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedUpdates!=null&&(mi(this.accumulatedGrads.map(function(n){return n.variable})),mi(this.accumulatedUpdates.map(function(n){return n.variable})))},e.prototype.getWeights=function(){return We(this,void 0,void 0,function(){var n;return Ve(this,function(r){switch(r.label){case 0:return n=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},e.prototype.setWeights=function(n){return We(this,void 0,void 0,function(){var r;return Ve(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(n)];case 1:return n=i.sent(),r=n.length/2,this.accumulatedGrads=n.slice(0,r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),this.accumulatedUpdates=n.slice(r,2*r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},e.fromConfig=function(n,r){return new n(r.learningRate,r.rho,r.epsilon)},e.className="Adadelta",e}(Pl);Fl(uMe);var lMe=function(t){function e(n,r){r===void 0&&(r=.1);var i=t.call(this)||this;return i.learningRate=n,i.initialAccumulatorValue=r,i.accumulatedGrads=[],i}return Oa(e,t),e.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n)).forEach(function(i,a){var o=se.registeredVariables[i];r.accumulatedGrads[a]==null&&(r.accumulatedGrads[a]={originalName:i+"/accumulator",variable:$e(function(){return to(o.shape,r.initialAccumulatorValue).variable(!1)})});var s=Array.isArray(n)?n[a].tensor:n[i];if(s!=null){var u=r.accumulatedGrads[a].variable;$e(function(){var l=u.add(s.square());u.assign(l);var c=s.div(l.add(se.backend.epsilon()).sqrt()).mul(-r.learningRate).add(o);o.assign(c)})}}),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedGrads!=null&&mi(this.accumulatedGrads.map(function(n){return n.variable}))},e.prototype.getWeights=function(){return We(this,void 0,void 0,function(){return Ve(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(this.accumulatedGrads.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},e.prototype.setWeights=function(n){return We(this,void 0,void 0,function(){return Ve(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:return n=r.sent(),this.accumulatedGrads=n.map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},e.fromConfig=function(n,r){return new n(r.learningRate,r.initialAccumulatorValue)},e.className="Adagrad",e}(Pl);Fl(lMe);var cMe=function(t){function e(n,r,i,a){a===void 0&&(a=null);var o=t.call(this)||this;return o.learningRate=n,o.beta1=r,o.beta2=i,o.epsilon=a,o.accumulatedFirstMoment=[],o.accumulatedSecondMoment=[],$e(function(){o.accBeta1=je(r).variable(),o.accBeta2=je(i).variable()}),a==null&&(o.epsilon=se.backend.epsilon()),o}return Oa(e,t),e.prototype.applyGradients=function(n){var r=this,i=Array.isArray(n)?n.map(function(a){return a.name}):Object.keys(n);$e(function(){var a=qn(1,r.accBeta1),o=qn(1,r.accBeta2);i.forEach(function(s,u){var l=se.registeredVariables[s];r.accumulatedFirstMoment[u]==null&&(r.accumulatedFirstMoment[u]={originalName:s+"/m",variable:$e(function(){return Ot(l).variable(!1)})}),r.accumulatedSecondMoment[u]==null&&(r.accumulatedSecondMoment[u]={originalName:s+"/v",variable:$e(function(){return Ot(l).variable(!1)})});var c=Array.isArray(n)?n[u].tensor:n[s];if(c!=null){var f=r.accumulatedFirstMoment[u].variable,d=r.accumulatedSecondMoment[u].variable,h=f.mul(r.beta1).add(c.mul(1-r.beta1)),p=d.mul(r.beta2).add(c.square().mul(1-r.beta2)),m=h.div(a),g=p.div(o);f.assign(h),d.assign(p);var v=m.div(g.sqrt().add(r.epsilon)).mul(-r.learningRate).add(l);l.assign(v)}}),r.accBeta1.assign(r.accBeta1.mul(r.beta1)),r.accBeta2.assign(r.accBeta2.mul(r.beta2))}),this.incrementIterations()},e.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&mi(this.accumulatedFirstMoment.map(function(n){return n.variable})),this.accumulatedSecondMoment!=null&&mi(this.accumulatedSecondMoment.map(function(n){return n.variable}))},e.prototype.getWeights=function(){return We(this,void 0,void 0,function(){var n;return Ve(this,function(r){switch(r.label){case 0:return n=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},e.prototype.setWeights=function(n){return We(this,void 0,void 0,function(){var r,i=this;return Ve(this,function(a){switch(a.label){case 0:return[4,this.extractIterations(n)];case 1:return n=a.sent(),$e(function(){i.accBeta1.assign(Xg(i.beta1,i.iterations_+1)),i.accBeta2.assign(Xg(i.beta2,i.iterations_+1))}),r=n.length/2,this.accumulatedFirstMoment=n.slice(0,r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.accumulatedSecondMoment=n.slice(r,2*r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},e.fromConfig=function(n,r){return new n(r.learningRate,r.beta1,r.beta2,r.epsilon)},e.className="Adam",e}(Pl);Fl(cMe);var fMe=function(t){function e(n,r,i,a,o){a===void 0&&(a=null),o===void 0&&(o=0);var s=t.call(this)||this;return s.learningRate=n,s.beta1=r,s.beta2=i,s.epsilon=a,s.decay=o,s.accumulatedFirstMoment=[],s.accumulatedWeightedInfNorm=[],$e(function(){s.iteration=je(0).variable(),s.accBeta1=je(r).variable()}),a==null&&(s.epsilon=se.backend.epsilon()),s}return Oa(e,t),e.prototype.applyGradients=function(n){var r=this,i=Array.isArray(n)?n.map(function(a){return a.name}):Object.keys(n);$e(function(){var a=qn(1,r.accBeta1),o=va(-r.learningRate,r.iteration.mul(r.decay).add(1));i.forEach(function(s,u){var l=se.registeredVariables[s];r.accumulatedFirstMoment[u]==null&&(r.accumulatedFirstMoment[u]={originalName:s+"/m",variable:Ot(l).variable(!1)}),r.accumulatedWeightedInfNorm[u]==null&&(r.accumulatedWeightedInfNorm[u]={originalName:s+"/v",variable:Ot(l).variable(!1)});var c=Array.isArray(n)?n[u].tensor:n[s];if(c!=null){var f=r.accumulatedFirstMoment[u].variable,d=r.accumulatedWeightedInfNorm[u].variable,h=f.mul(r.beta1).add(c.mul(1-r.beta1)),p=d.mul(r.beta2),m=c.abs(),g=p.maximum(m);f.assign(h),d.assign(g);var v=o.div(a).mul(h.div(g.add(r.epsilon))).add(l);l.assign(v)}}),r.iteration.assign(r.iteration.add(1)),r.accBeta1.assign(r.accBeta1.mul(r.beta1))}),this.incrementIterations()},e.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&mi(this.accumulatedFirstMoment.map(function(n){return n.variable})),this.accumulatedWeightedInfNorm!=null&&mi(this.accumulatedWeightedInfNorm.map(function(n){return n.variable}))},e.prototype.getWeights=function(){return We(this,void 0,void 0,function(){return Ve(this,function(n){throw new Error("getWeights() is not implemented for Adamax yet.")})})},e.prototype.setWeights=function(n){return We(this,void 0,void 0,function(){return Ve(this,function(r){throw new Error("setWeights() is not implemented for Adamax yet.")})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},e.fromConfig=function(n,r){return new n(r.learningRate,r.beta1,r.beta2,r.epsilon,r.decay)},e.className="Adamax",e}(Pl);Fl(fMe);var O9=function(t){function e(n){var r=t.call(this)||this;return r.learningRate=n,r.setLearningRate(n),r}return Oa(e,t),e.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n)).forEach(function(i,a){var o=Array.isArray(n)?n[a].tensor:n[i];if(o!=null){var s=se.registeredVariables[i];$e(function(){var u=r.c.mul(o).add(s);s.assign(u)})}}),this.incrementIterations()},e.prototype.setLearningRate=function(n){this.learningRate=n,this.c!=null&&this.c.dispose(),this.c=INe(je(-n))},e.prototype.dispose=function(){this.c.dispose()},e.prototype.getWeights=function(){return We(this,void 0,void 0,function(){return Ve(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()]]}})})},e.prototype.setWeights=function(n){return We(this,void 0,void 0,function(){return Ve(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:if((n=r.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate}},e.fromConfig=function(n,r){return new n(r.learningRate)},e.className="SGD",e}(Pl);Fl(O9);var dMe=function(t){function e(n,r,i){i===void 0&&(i=!1);var a=t.call(this,n)||this;return a.learningRate=n,a.momentum=r,a.useNesterov=i,a.accumulations=[],a.m=je(a.momentum),a}return Oa(e,t),e.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n)).forEach(function(i,a){var o=se.registeredVariables[i];r.accumulations[a]==null&&(r.accumulations[a]={originalName:i+"/momentum",variable:$e(function(){return Ot(o).variable(!1)})});var s=r.accumulations[a].variable,u=Array.isArray(n)?n[a].tensor:n[i];u!=null&&$e(function(){var l,c=r.m.mul(s).add(u);l=r.useNesterov?r.c.mul(u.add(c.mul(r.m))).add(o):r.c.mul(c).add(o),s.assign(c),o.assign(l)})}),this.incrementIterations()},e.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&mi(this.accumulations.map(function(n){return n.variable}))},e.prototype.setMomentum=function(n){this.momentum=n},e.prototype.getWeights=function(){return We(this,void 0,void 0,function(){return Ve(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(this.accumulations.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},e.prototype.setWeights=function(n){return We(this,void 0,void 0,function(){return Ve(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:return n=r.sent(),this.accumulations=n.map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},e.fromConfig=function(n,r){return new n(r.learningRate,r.momentum,r.useNesterov)},e.className="Momentum",e}(O9);Fl(dMe);var hMe=function(t){function e(n,r,i,a,o){r===void 0&&(r=.9),i===void 0&&(i=0),a===void 0&&(a=null),o===void 0&&(o=!1);var s=t.call(this)||this;if(s.learningRate=n,s.decay=r,s.momentum=i,s.epsilon=a,s.accumulatedMeanSquares=[],s.accumulatedMoments=[],s.accumulatedMeanGrads=[],s.centered=o,a==null&&(s.epsilon=se.backend.epsilon()),n==null)throw new Error("learningRate for RMSPropOptimizer must be defined.");return s}return Oa(e,t),e.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n)).forEach(function(i,a){var o=se.registeredVariables[i];r.accumulatedMeanSquares[a]==null&&(r.accumulatedMeanSquares[a]={originalName:i+"/rms",variable:$e(function(){return Ot(o).variable(!1)})}),r.accumulatedMoments[a]==null&&(r.accumulatedMoments[a]={originalName:i+"/momentum",variable:$e(function(){return Ot(o).variable(!1)})}),r.accumulatedMeanGrads[a]==null&&r.centered&&(r.accumulatedMeanGrads[a]={originalName:i+"/mg",variable:$e(function(){return Ot(o).variable(!1)})});var s=Array.isArray(n)?n[a].tensor:n[i];if(s!=null){var u=r.accumulatedMeanSquares[a].variable,l=r.accumulatedMoments[a].variable;$e(function(){var c=u.mul(r.decay).add(s.square().mul(1-r.decay));if(r.centered){var f=r.accumulatedMeanGrads[a].variable,d=f.mul(r.decay).add(s.mul(1-r.decay)),h=l.mul(r.momentum).add(s.mul(r.learningRate).div(c.sub(d.square().add(r.epsilon)).sqrt()));u.assign(c),f.assign(d),l.assign(h);var p=o.sub(h);o.assign(p)}else{var m=u.mul(r.decay).add(s.square().mul(1-r.decay));h=l.mul(r.momentum).add(s.mul(r.learningRate).div(m.add(r.epsilon).sqrt())),u.assign(m),l.assign(h),p=o.sub(h),o.assign(p)}})}}),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&mi(this.accumulatedMeanSquares.map(function(n){return n.variable})),this.accumulatedMeanGrads!=null&&this.centered&&mi(this.accumulatedMeanGrads.map(function(n){return n.variable})),this.accumulatedMoments!=null&&mi(this.accumulatedMoments.map(function(n){return n.variable}))},e.prototype.getWeights=function(){return We(this,void 0,void 0,function(){var n;return Ve(this,function(r){switch(r.label){case 0:return n=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&n.push.apply(n,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},e.prototype.setWeights=function(n){return We(this,void 0,void 0,function(){var r;return Ve(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(n)];case 1:return n=i.sent(),r=this.centered?n.length/3:n.length/2,this.accumulatedMeanSquares=n.slice(0,r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),this.accumulatedMoments=n.slice(r,2*r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=n.slice(2*r,3*r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}})),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},e.fromConfig=function(n,r){return new n(r.learningRate,r.decay,r.momentum,r.epsilon,r.centered)},e.className="RMSProp",e}(Pl);Fl(hMe);vn.prototype.squaredDifference=function(t){return Q7(this,t)},ye=jTe;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var zw=function(t,e){return zw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},zw(t,e)};function mt(t,e){zw(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Tr=function(){return Tr=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Tr.apply(this,arguments)};function Ke(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?a(c.value):i(c.value).then(s,u)}l((r=r.apply(t,[])).next())})}function Ye(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(a=l[0]&2?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){n.label=l[1];break}if(l[0]===6&&n.label<a[1]){n.label=a[1],a=l;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(l);break}a[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(c){l=[6,c],i=0}finally{r=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Gd(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r}var jc=function(){function t(e,n){if(!Qu(e)||!Qu(n))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:e,height:n}));this._width=e,this._height=n}return Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),t.prototype.reverse=function(){return new t(1/this.width,1/this.height)},t}();function wy(t,e){return t instanceof vn&&t.shape.length===e}function pMe(t){return wy(t,2)}function _y(t){return wy(t,3)}function Us(t){return wy(t,4)}function mMe(t){return t%1!==0}function AR(t){return t%2===0}function vMe(t,e){e===void 0&&(e=2);var n=Math.pow(10,e);return Math.floor(t*n)/n}function TR(t){return t&&t.width&&t.height}function gMe(t,e){var n=t.width,r=t.height,i=e/Math.max(r,n);return new jc(Math.round(n*i),Math.round(r*i))}function zC(t){return t.reduce(function(e,n){return e.add(n)},new $t(0,0)).div(new $t(t.length,t.length))}function Uh(t,e,n){return Array(t).fill(0).map(function(r,i){return e+i*n})}function Qu(t){return!!t&&t!==1/0&&t!==-1/0&&!isNaN(t)||t===0}function MR(t){return Qu(t)&&0<=t&&t<=1}var $t=function(){function t(e,n){this._x=e,this._y=n}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),t.prototype.add=function(e){return new t(this.x+e.x,this.y+e.y)},t.prototype.sub=function(e){return new t(this.x-e.x,this.y-e.y)},t.prototype.mul=function(e){return new t(this.x*e.x,this.y*e.y)},t.prototype.div=function(e){return new t(this.x/e.x,this.y/e.y)},t.prototype.abs=function(){return new t(Math.abs(this.x),Math.abs(this.y))},t.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},t.prototype.floor=function(){return new t(Math.floor(this.x),Math.floor(this.y))},t}(),eu=function(){function t(e,n){n===void 0&&(n=!0);var r=e||{},i=[r.left,r.top,r.right,r.bottom].every(Qu),a=[r.x,r.y,r.width,r.height].every(Qu);if(!a&&!i)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var o=a?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],s=o[0],u=o[1],l=o[2],c=o[3];t.assertIsValidBox({x:s,y:u,width:l,height:c},"Box.constructor",n),this._x=s,this._y=u,this._width=l,this._height=c}return t.isRect=function(e){return!!e&&[e.x,e.y,e.width,e.height].every(Qu)},t.assertIsValidBox=function(e,n,r){if(r===void 0&&(r=!1),!t.isRect(e))throw new Error(n+" - invalid box: "+JSON.stringify(e)+", expected object with properties x, y, width, height");if(!r&&(e.width<0||e.height<0))throw new Error(n+" - width ("+e.width+") and height ("+e.height+") must be positive numbers")},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topLeft",{get:function(){return new $t(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topRight",{get:function(){return new $t(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomLeft",{get:function(){return new $t(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomRight",{get:function(){return new $t(this.right,this.bottom)},enumerable:!0,configurable:!0}),t.prototype.round=function(){var e=[this.x,this.y,this.width,this.height].map(function(o){return Math.round(o)}),n=e[0],r=e[1],i=e[2],a=e[3];return new t({x:n,y:r,width:i,height:a})},t.prototype.floor=function(){var e=[this.x,this.y,this.width,this.height].map(function(o){return Math.floor(o)}),n=e[0],r=e[1],i=e[2],a=e[3];return new t({x:n,y:r,width:i,height:a})},t.prototype.toSquare=function(){var e=this,n=e.x,r=e.y,i=e.width,a=e.height,o=Math.abs(i-a);return i<a&&(n-=o/2,i+=o),a<i&&(r-=o/2,a+=o),new t({x:n,y:r,width:i,height:a})},t.prototype.rescale=function(e){var n=TR(e)?e.width:e,r=TR(e)?e.height:e;return new t({x:this.x*n,y:this.y*r,width:this.width*n,height:this.height*r})},t.prototype.pad=function(e,n){var r=[this.x-e/2,this.y-n/2,this.width+e,this.height+n],i=r[0],a=r[1],o=r[2],s=r[3];return new t({x:i,y:a,width:o,height:s})},t.prototype.clipAtImageBorders=function(e,n){var r=this,i=r.x,a=r.y,o=r.right,s=r.bottom,u=Math.max(i,0),l=Math.max(a,0),c=o-u,f=s-l,d=Math.min(c,e-u),h=Math.min(f,n-l);return new t({x:u,y:l,width:d,height:h}).floor()},t.prototype.shift=function(e,n){var r=this,i=r.width,a=r.height,o=this.x+e,s=this.y+n;return new t({x:o,y:s,width:i,height:a})},t.prototype.padAtBorders=function(e,n){var r=this.width+1,i=this.height+1,a=1,o=1,s=r,u=i,l=this.left,c=this.top,f=this.right,d=this.bottom;return f>n&&(s=-f+n+r,f=n),d>e&&(u=-d+e+i,d=e),l<1&&(u=2-l,l=1),c<1&&(u=2-c,c=1),{dy:o,edy:u,dx:a,edx:s,y:c,ey:d,x:l,ex:f,w:r,h:i}},t.prototype.calibrate=function(e){return new t({left:this.left+e.left*this.width,top:this.top+e.top*this.height,right:this.right+e.right*this.width,bottom:this.bottom+e.bottom*this.height}).toSquare().round()},t}(),Ey=function(t){mt(e,t);function e(n,r,i,a,o){return o===void 0&&(o=!1),t.call(this,{left:n,top:r,right:i,bottom:a},o)||this}return e}(eu),B9=function(){function t(e,n,r,i,a){this._imageDims=new jc(a.width,a.height),this._score=e,this._classScore=n,this._className=r,this._box=new eu(i).rescale(this._imageDims)}return Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativeBox",{get:function(){return new eu(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),t.prototype.forSize=function(e,n){return new t(this.score,this.classScore,this.className,this.relativeBox,{width:e,height:n})},t}(),ho=function(t){mt(e,t);function e(n,r,i){return t.call(this,n,n,"",r,i)||this}return e.prototype.forSize=function(n,r){var i=t.prototype.forSize.call(this,n,r),a=i.score,o=i.relativeBox,s=i.imageDims;return new e(a,o,s)},e}(B9);function yMe(t,e,n){n===void 0&&(n=!0);var r=Math.max(0,Math.min(t.right,e.right)-Math.max(t.left,e.left)),i=Math.max(0,Math.min(t.bottom,e.bottom)-Math.max(t.top,e.top)),a=r*i;return n?a/(t.area+e.area-a):a/Math.min(t.area,e.area)}function xMe(t){var e=t.map(function(s){return s.x}),n=t.map(function(s){return s.y}),r=e.reduce(function(s,u){return u<s?u:s},1/0),i=n.reduce(function(s,u){return u<s?u:s},1/0),a=e.reduce(function(s,u){return s<u?u:s},0),o=n.reduce(function(s,u){return s<u?u:s},0);return new Ey(r,i,a,o)}function Wh(t,e,n,r){r===void 0&&(r=!0);for(var i=e.map(function(s,u){return{score:s,boxIndex:u}}).sort(function(s,u){return s.score-u.score}).map(function(s){return s.boxIndex}),a=[],o=function(){var s=i.pop();a.push(s);for(var u=i,l=[],c=0;c<u.length;c++){var f=u[c],d=t[s],h=t[f];l.push(yMe(d,h,r))}i=i.filter(function(p,m){return l[m]<=n})};i.length>0;)o();return a}function Tp(t,e){return $e(function(){var n=e[0],r=e[1],i=e[2],a=to(Gd(t.shape.slice(0,3),[1]),n),o=to(Gd(t.shape.slice(0,3),[1]),r),s=to(Gd(t.shape.slice(0,3),[1]),i),u=Un([a,o,s],3);return qn(t,u)})}function bMe(t,e){return e===void 0&&(e=!1),$e(function(){var n=t.shape.slice(1),r=n[0],i=n[1];if(r===i)return t;var a=Math.abs(r-i),o=Math.round(a*(e?.5:1)),s=r>i?2:1,u=function(h){var p=t.shape.slice();return p[s]=h,to(p,0)},l=u(o),c=a-l.shape[s],f=e&&c?u(c):null,d=[f,t,l].filter(function(h){return!!h}).map(function(h){return h.toFloat()});return Un(d,s)})}function cx(t){return 1/(1+Math.exp(-t))}var UC=function(t){mt(e,t);function e(n,r,i,a,o){return o===void 0&&(o=!1),t.call(this,{x:n,y:r,width:i,height:a},o)||this}return e}(eu),wMe=.5,_Me=.43,EMe=.45,Jg=function(){function t(e,n,r){r===void 0&&(r=new $t(0,0));var i=n.width,a=n.height;this._imgDims=new jc(i,a),this._shift=r,this._positions=e.map(function(o){return o.mul(new $t(i,a)).add(r)})}return Object.defineProperty(t.prototype,"shift",{get:function(){return new $t(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativePositions",{get:function(){var e=this;return this._positions.map(function(n){return n.sub(e._shift).div(new $t(e.imageWidth,e.imageHeight))})},enumerable:!0,configurable:!0}),t.prototype.forSize=function(e,n){return new this.constructor(this.relativePositions,{width:e,height:n})},t.prototype.shiftBy=function(e,n){return new this.constructor(this.relativePositions,this._imgDims,new $t(e,n))},t.prototype.shiftByPoint=function(e){return this.shiftBy(e.x,e.y)},t.prototype.align=function(e,n){if(n===void 0&&(n={}),e){var r=e instanceof ho?e.box.floor():new eu(e);return this.shiftBy(r.x,r.y).align(null,n)}var i=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},n),a=i.useDlibAlignment,o=i.minBoxPadding;return a?this.alignDlib():this.alignMinBbox(o)},t.prototype.alignDlib=function(){var e=this.getRefPointsForAlignment(),n=e[0],r=e[1],i=e[2],a=function(f){return i.sub(f).magnitude()},o=(a(n)+a(r))/2,s=Math.floor(o/EMe),u=zC(e),l=Math.floor(Math.max(0,u.x-wMe*s)),c=Math.floor(Math.max(0,u.y-_Me*s));return new UC(l,c,Math.min(s,this.imageWidth+l),Math.min(s,this.imageHeight+c))},t.prototype.alignMinBbox=function(e){var n=xMe(this.positions);return n.pad(n.width*e,n.height*e)},t.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},t}(),CMe=function(t){mt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getRefPointsForAlignment=function(){var n=this.positions;return[n[0],n[1],zC([n[3],n[4]])]},e}(Jg),NMe=function(t){mt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getJawOutline=function(){return this.positions.slice(0,17)},e.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},e.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},e.prototype.getNose=function(){return this.positions.slice(27,36)},e.prototype.getLeftEye=function(){return this.positions.slice(36,42)},e.prototype.getRightEye=function(){return this.positions.slice(42,48)},e.prototype.getMouth=function(){return this.positions.slice(48,68)},e.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(zC)},e}(Jg),IR=function(){function t(e,n){this._label=e,this._distance=n}return Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),t.prototype.toString=function(e){return e===void 0&&(e=!0),""+this.label+(e?" ("+vMe(this.distance)+")":"")},t}(),RR=function(t){mt(e,t);function e(n,r){var i=t.call(this,n)||this;return i._label=r,i}return e.assertIsValidLabeledBox=function(n,r){if(eu.assertIsValidBox(n,r),!Qu(n.label))throw new Error(r+" - expected property label ("+n.label+") to be a number")},Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),e}(eu),Im=function(){function t(e,n){if(typeof e!="string")throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(n)||n.some(function(r){return!(r instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=e,this._descriptors=n}return Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),t.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(e){return Array.from(e)})}},t.fromJSON=function(e){var n=e.descriptors.map(function(r){return new Float32Array(r)});return new t(e.label,n)},t}();(function(t){mt(e,t);function e(n,r,i,a){var o=t.call(this,n,r)||this;return o._score=i,o._classScore=a,o}return e.assertIsValidPredictedBox=function(n,r){if(RR.assertIsValidLabeledBox(n,r),!MR(n.score)||!MR(n.classScore))throw new Error(r+" - expected properties score ("+n.score+") and ("+n.classScore+") to be a number between [0, 1]")},Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),e})(RR);function SMe(t){return t.detection instanceof ho}function WC(t,e){var n={detection:e};return Object.assign({},t,n)}function L9(){var t=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")},e=function(){throw new Error("readFile - filesystem not available for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:t,readFile:e}}function j9(t){var e="";if(!t)try{t=require("fs")}catch(r){e=r.toString()}var n=t?function(r){return new Promise(function(i,a){t.readFile(r,function(o,s){return o?a(o):i(s)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+e)};return{readFile:n}}function $9(){var t=global.Canvas||global.HTMLCanvasElement,e=global.Image||global.HTMLImageElement,n=function(){if(t)return new t;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},r=function(){if(e)return new e;throw new Error("createImageElement - missing Image implementation for nodejs environment")},i=global.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},a=j9();return Tr({Canvas:t||function(){function o(){}return o}(),CanvasRenderingContext2D:global.CanvasRenderingContext2D||function(){function o(){}return o}(),Image:e||function(){function o(){}return o}(),ImageData:global.ImageData||function(){function o(){}return o}(),Video:global.HTMLVideoElement||function(){function o(){}return o}(),createCanvasElement:n,createImageElement:r,fetch:i},a)}function z9(){return typeof window=="object"&&typeof document<"u"&&typeof HTMLImageElement<"u"&&typeof HTMLCanvasElement<"u"&&typeof HTMLVideoElement<"u"&&typeof ImageData<"u"&&typeof CanvasRenderingContext2D<"u"}function U9(){return typeof global=="object"&&typeof require=="function"&&typeof Ej<"u"&&typeof process<"u"&&!!process.version}var On;function DMe(){if(!On)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return On}function Uw(t){On=t}function VC(){z9()&&Uw(L9()),U9()&&Uw($9())}function AMe(t){if(On||VC(),!On)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var e=t.Canvas,n=e===void 0?On.Canvas:e,r=t.Image,i=r===void 0?On.Image:r;On.Canvas=n,On.Image=i,On.createCanvasElement=t.createCanvasElement||function(){return new n},On.createImageElement=t.createImageElement||function(){return new i},On.ImageData=t.ImageData||On.ImageData,On.Video=t.Video||On.Video,On.fetch=t.fetch||On.fetch,On.readFile=t.readFile||On.readFile}var Br={getEnv:DMe,setEnv:Uw,initialize:VC,createBrowserEnv:L9,createFileSystem:j9,createNodejsEnv:$9,monkeyPatch:AMe,isBrowser:z9,isNodejs:U9};VC();function W9(t){return!Br.isNodejs()&&typeof t=="string"?document.getElementById(t):t}function pl(t){var e=Br.getEnv(),n=e.Canvas,r=e.CanvasRenderingContext2D;if(t instanceof r)return t;var i=W9(t);if(!(i instanceof n))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var a=i.getContext("2d");if(!a)throw new Error("resolveContext2d - canvas 2d context is null");return a}var kR;(function(t){t.TOP_LEFT="TOP_LEFT",t.TOP_RIGHT="TOP_RIGHT",t.BOTTOM_LEFT="BOTTOM_LEFT",t.BOTTOM_RIGHT="BOTTOM_RIGHT"})(kR||(kR={}));function V9(t){var e=Br.getEnv(),n=e.Image,r=e.Video;return t instanceof n&&t.complete||t instanceof r&&t.readyState>=3}function TMe(t){return new Promise(function(e,n){if(t instanceof Br.getEnv().Canvas||V9(t))return e();function r(a){a.currentTarget&&(a.currentTarget.removeEventListener("load",r),a.currentTarget.removeEventListener("error",i),e(a))}function i(a){a.currentTarget&&(a.currentTarget.removeEventListener("load",r),a.currentTarget.removeEventListener("error",i),n(a))}t.addEventListener("load",r),t.addEventListener("error",i)})}function q9(t){var e=Br.getEnv(),n=e.Image,r=e.Video;return t instanceof n?new jc(t.naturalWidth,t.naturalHeight):t instanceof r?new jc(t.videoWidth,t.videoHeight):new jc(t.width,t.height)}function Cy(t){var e=t.width,n=t.height,r=Br.getEnv().createCanvasElement,i=r();return i.width=e,i.height=n,i}function qC(t,e){var n=Br.getEnv().ImageData;if(!(t instanceof n)&&!V9(t))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=q9(t),i=r.width,a=r.height,o=Cy({width:i,height:a});return t instanceof n?pl(o).putImageData(t,0,0):pl(o).drawImage(t,0,0,i,a),o}function MMe(t,e){return Ke(this,void 0,void 0,function(){var n,r,i,a,o,s;return Ye(this,function(u){switch(u.label){case 0:return n=Br.getEnv().createCanvasElement(),r=t.shape.slice(Us(t)?1:0),i=r[0],a=r[1],o=r[2],s=$e(function(){return t.as3D(i,a,o).toInt()}),[4,$C.toPixels(s,n)];case 1:return u.sent(),s.dispose(),[2,n]}})})}function FR(t){var e=Br.getEnv(),n=e.Image,r=e.Canvas,i=e.Video;return t instanceof n||t instanceof r||t instanceof i}function IMe(t,e,n){n===void 0&&(n=!1);var r=Br.getEnv(),i=r.Image,a=r.Canvas;if(!(t instanceof i||t instanceof a))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var o=q9(t),s=e/Math.max(o.height,o.width),u=s*o.width,l=s*o.height,c=Cy({width:e,height:e}),f=t instanceof a?t:qC(t),d=Math.abs(u-l)/2,h=n&&u<l?d:0,p=n&&l<u?d:0;return pl(c).drawImage(f,h,p,u,l),c}var e0=function(){function t(e,n){var r=this;if(n===void 0&&(n=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(e))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+e);this._treatAsBatchInput=n,this._batchSize=e.length,e.forEach(function(i,a){if(_y(i)){r._imageTensors[a]=i,r._inputDimensions[a]=i.shape;return}if(Us(i)){var o=i.shape[0];if(o!==1)throw new Error("NetInput - tf.Tensor4D with batchSize "+o+" passed, but not supported in input array");r._imageTensors[a]=i,r._inputDimensions[a]=i.shape.slice(1);return}var s=i instanceof Br.getEnv().Canvas?i:qC(i);r._canvases[a]=s,r._inputDimensions[a]=[s.height,s.width,3]})}return Object.defineProperty(t.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reshapedInputDimensions",{get:function(){var e=this;return Uh(this.batchSize,0,1).map(function(n,r){return e.getReshapedInputDimensions(r)})},enumerable:!0,configurable:!0}),t.prototype.getInput=function(e){return this.canvases[e]||this.imageTensors[e]},t.prototype.getInputDimensions=function(e){return this._inputDimensions[e]},t.prototype.getInputHeight=function(e){return this._inputDimensions[e][0]},t.prototype.getInputWidth=function(e){return this._inputDimensions[e][1]},t.prototype.getReshapedInputDimensions=function(e){if(typeof this.inputSize!="number")throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");var n=this.getInputWidth(e),r=this.getInputHeight(e);return gMe({width:n,height:r},this.inputSize)},t.prototype.toBatchTensor=function(e,n){var r=this;return n===void 0&&(n=!0),this._inputSize=e,$e(function(){var i=Uh(r.batchSize,0,1).map(function(o){var s=r.getInput(o);if(s instanceof vn){var u=Us(s)?s:s.expandDims();return u=bMe(u,n),(u.shape[1]!==e||u.shape[2]!==e)&&(u=FC.resizeBilinear(u,[e,e])),u.as3D(e,e,3)}if(s instanceof Br.getEnv().Canvas)return $C.fromPixels(IMe(s,e,n));throw new Error("toBatchTensor - at batchIdx "+o+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+s)}),a=Ii(i.map(function(o){return o.toFloat()})).as4D(r.batchSize,e,e,3);return a})},t}();function or(t){return Ke(this,void 0,void 0,function(){var e,n,r;return Ye(this,function(i){switch(i.label){case 0:if(t instanceof e0)return[2,t];if(e=Array.isArray(t)?t:[t],!e.length)throw new Error("toNetInput - empty array passed as input");return n=function(a){return Array.isArray(t)?" at input index "+a+":":""},r=e.map(W9),r.forEach(function(a,o){if(!FR(a)&&!_y(a)&&!Us(a))throw typeof e[o]=="string"?new Error("toNetInput -"+n(o)+" string passed, but could not resolve HTMLElement for element id "+e[o]):new Error("toNetInput -"+n(o)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id");if(Us(a)){var s=a.shape[0];if(s!==1)throw new Error("toNetInput -"+n(o)+" tf.Tensor4D with batchSize "+s+" passed, but not supported in input array")}}),[4,Promise.all(r.map(function(a){return FR(a)&&TMe(a)}))];case 1:return i.sent(),[2,new e0(r,Array.isArray(t))]}})})}function HC(t,e){return Ke(this,void 0,void 0,function(){var n,r,i,a,o,s,u;return Ye(this,function(l){switch(l.label){case 0:return n=Br.getEnv().Canvas,r=t,t instanceof n?[3,5]:[4,or(t)];case 1:if(i=l.sent(),i.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return a=i.getInput(0),a instanceof n?(o=a,[3,4]):[3,2];case 2:return[4,MMe(a)];case 3:o=l.sent(),l.label=4;case 4:r=o,l.label=5;case 5:return s=pl(r),u=e.map(function(c){return c instanceof ho?c.forSize(r.width,r.height).box.floor():c}).map(function(c){return c.clipAtImageBorders(r.width,r.height)}),[2,u.map(function(c){var f=c.x,d=c.y,h=c.width,p=c.height,m=Cy({width:h,height:p});return pl(m).putImageData(s.getImageData(f,d,h,p),0,0),m})]}})})}function GC(t,e){return Ke(this,void 0,void 0,function(){return Ye(this,function(n){if(!_y(t)&&!Us(t))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(Us(t)&&t.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,$e(function(){var r=t.shape.slice(Us(t)?1:0),i=r[0],a=r[1],o=r[2],s=e.map(function(l){return l instanceof ho?l.forSize(a,i).box:l}).map(function(l){return l.clipAtImageBorders(a,i)}),u=s.map(function(l){var c=l.x,f=l.y,d=l.width,h=l.height;return y9(t.as3D(i,a,o),[f,c,0],[h,d,o])});return u})]})})}function RMe(t,e){return Ke(this,void 0,void 0,function(){var n,r;return Ye(this,function(i){switch(i.label){case 0:return n=Br.getEnv().fetch,[4,n(t,e)];case 1:if(r=i.sent(),!(r.status<400))throw new Error("failed to fetch: ("+r.status+") "+r.statusText+", from url: "+r.url);return[2,r]}})})}function kMe(t){return Ke(this,void 0,void 0,function(){return Ye(this,function(e){switch(e.label){case 0:return[4,RMe(t)];case 1:return[2,e.sent().json()]}})})}function H9(t,e){var n=e+"-weights_manifest.json";if(!t)return{modelBaseUri:"",manifestUri:n};if(t==="/")return{modelBaseUri:"/",manifestUri:"/"+n};var r=t.startsWith("http://")?"http://":t.startsWith("https://")?"https://":"";t=t.replace(r,"");var i=t.split("/").filter(function(s){return s}),a=t.endsWith(".json")?i[i.length-1]:n,o=r+(t.endsWith(".json")?i.slice(0,i.length-1):i).join("/");return o=t.startsWith("/")?"/"+o:o,{modelBaseUri:o,manifestUri:o==="/"?"/"+a:o+"/"+a}}function FMe(t,e){return Ke(this,void 0,void 0,function(){var n,r,i,a;return Ye(this,function(o){switch(o.label){case 0:return n=H9(t,e),r=n.manifestUri,i=n.modelBaseUri,[4,kMe(r)];case 1:return a=o.sent(),[2,P9.loadWeights(a,i)]}})})}var ts=function(){function t(e){this._name=e,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(t.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),t.prototype.getParamFromPath=function(e){var n=this.traversePropertyPath(e),r=n.obj,i=n.objProp;return r[i]},t.prototype.reassignParamFromPath=function(e,n){var r=this.traversePropertyPath(e),i=r.obj,a=r.objProp;i[a].dispose(),i[a]=n},t.prototype.getParamList=function(){var e=this;return this._paramMappings.map(function(n){var r=n.paramPath;return{path:r,tensor:e.getParamFromPath(r)}})},t.prototype.getTrainableParams=function(){return this.getParamList().filter(function(e){return e.tensor instanceof hf})},t.prototype.getFrozenParams=function(){return this.getParamList().filter(function(e){return!(e.tensor instanceof hf)})},t.prototype.variable=function(){var e=this;this.getFrozenParams().forEach(function(n){var r=n.path,i=n.tensor;e.reassignParamFromPath(r,i.variable())})},t.prototype.freeze=function(){var e=this;this.getTrainableParams().forEach(function(n){var r=n.path,i=n.tensor,a=fr(i.dataSync());i.dispose(),e.reassignParamFromPath(r,a)})},t.prototype.dispose=function(e){e===void 0&&(e=!0),this.getParamList().forEach(function(n){if(e&&n.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+n.path);n.tensor.dispose()}),this._params=void 0},t.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(e){var n=e.tensor;return Array.from(n.dataSync())}).reduce(function(e,n){return e.concat(n)}))},t.prototype.load=function(e){return Ke(this,void 0,void 0,function(){return Ye(this,function(n){switch(n.label){case 0:return e instanceof Float32Array?(this.extractWeights(e),[2]):[4,this.loadFromUri(e)];case 1:return n.sent(),[2]}})})},t.prototype.loadFromUri=function(e){return Ke(this,void 0,void 0,function(){var n;return Ye(this,function(r){switch(r.label){case 0:if(e&&typeof e!="string")throw new Error(this._name+".loadFromUri - expected model uri");return[4,FMe(e,this.getDefaultModelName())];case 1:return n=r.sent(),this.loadFromWeightMap(n),[2]}})})},t.prototype.loadFromDisk=function(e){return Ke(this,void 0,void 0,function(){var n,r,i,a,o,s,u,l,c,f;return Ye(this,function(d){switch(d.label){case 0:if(e&&typeof e!="string")throw new Error(this._name+".loadFromDisk - expected model file path");return n=Br.getEnv().readFile,r=H9(e,this.getDefaultModelName()),i=r.manifestUri,a=r.modelBaseUri,o=function(h){return Promise.all(h.map(function(p){return n(p).then(function(m){return m.buffer})}))},s=P9.weightsLoaderFactory(o),c=(l=JSON).parse,[4,n(i)];case 1:return u=c.apply(l,[d.sent().toString()]),[4,s(u,a)];case 2:return f=d.sent(),this.loadFromWeightMap(f),[2]}})})},t.prototype.loadFromWeightMap=function(e){var n=this.extractParamsFromWeigthMap(e),r=n.paramMappings,i=n.params;this._paramMappings=r,this._params=i},t.prototype.extractWeights=function(e){var n=this.extractParams(e),r=n.paramMappings,i=n.params;this._paramMappings=r,this._params=i},t.prototype.traversePropertyPath=function(e){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var n=e.split("/").reduce(function(a,o){if(!a.nextObj.hasOwnProperty(o))throw new Error("traversePropertyPath - object does not have property "+o+", for path "+e);return{obj:a.nextObj,objProp:o,nextObj:a.nextObj[o]}},{nextObj:this.params}),r=n.obj,i=n.objProp;if(!r||!i||!(r[i]instanceof vn))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+e);return{obj:r,objProp:i}},t}();function Ai(t,e,n){return $e(function(){var r=TC(t,e.depthwise_filter,e.pointwise_filter,n,"same");return r=St(r,e.bias),r})}function fx(t,e,n){return n===void 0&&(n=!1),$e(function(){var r=yn(n?St(sa(t,e.conv0.filters,[2,2],"same"),e.conv0.bias):Ai(t,e.conv0,[2,2])),i=Ai(r,e.conv1,[1,1]),a=yn(St(r,i)),o=Ai(a,e.conv2,[1,1]);return yn(St(r,St(i,o)))})}function Rm(t,e,n,r){return n===void 0&&(n=!1),r===void 0&&(r=!0),$e(function(){var i=yn(n?St(sa(t,e.conv0.filters,r?[2,2]:[1,1],"same"),e.conv0.bias):Ai(t,e.conv0,r?[2,2]:[1,1])),a=Ai(i,e.conv1,[1,1]),o=yn(St(i,a)),s=Ai(o,e.conv2,[1,1]),u=yn(St(i,St(a,s))),l=Ai(u,e.conv3,[1,1]);return yn(St(i,St(a,St(s,l))))})}function Da(t,e,n,r){return n===void 0&&(n="same"),r===void 0&&(r=!1),$e(function(){var i=St(sa(t,e.filters,[1,1],n),e.bias);return r?yn(i):i})}function ns(t,e){Object.keys(t).forEach(function(n){e.some(function(r){return r.originalPath===n})||t[n].dispose()})}function Ny(t,e){return function(n,r,i,a){var o=ri(t(n*r*i*i),[i,i,n,r]),s=Fn(t(r));return e.push({paramPath:a+"/filters"},{paramPath:a+"/bias"}),{filters:o,bias:s}}}function KC(t,e){return function(n,r,i){var a=$s(t(n*r),[n,r]),o=Fn(t(r));return e.push({paramPath:i+"/weights"},{paramPath:i+"/bias"}),{weights:a,bias:o}}}var G9=function(){function t(e,n,r){this.depthwise_filter=e,this.pointwise_filter=n,this.bias=r}return t}();function YC(t,e){return function(n,r,i){var a=ri(t(9*n),[3,3,n,1]),o=ri(t(n*r),[1,1,n,r]),s=Fn(t(r));return e.push({paramPath:i+"/depthwise_filter"},{paramPath:i+"/pointwise_filter"},{paramPath:i+"/bias"}),new G9(a,o,s)}}function XC(t){return function(e){var n=t(e+"/depthwise_filter",4),r=t(e+"/pointwise_filter",4),i=t(e+"/bias",1);return new G9(n,r,i)}}function _u(t,e){return function(n,r,i){var a=t[n];if(!wy(a,r))throw new Error("expected weightMap["+n+"] to be a Tensor"+r+"D, instead have "+a);return e.push({originalPath:n,paramPath:i||n}),a}}function rs(t){var e=t;function n(i){var a=e.slice(0,i);return e=e.slice(i),a}function r(){return e}return{extractWeights:n,getRemainingWeights:r}}function K9(t,e){var n=Ny(t,e),r=YC(t,e);function i(o,s,u,l){l===void 0&&(l=!1);var c=l?n(o,s,3,u+"/conv0"):r(o,s,u+"/conv0"),f=r(s,s,u+"/conv1"),d=r(s,s,u+"/conv2");return{conv0:c,conv1:f,conv2:d}}function a(o,s,u,l){l===void 0&&(l=!1);var c=i(o,s,u,l),f=c.conv0,d=c.conv1,h=c.conv2,p=r(s,s,u+"/conv3");return{conv0:f,conv1:d,conv2:h,conv3:p}}return{extractDenseBlock3Params:i,extractDenseBlock4Params:a}}function PMe(t){var e=[],n=rs(t),r=n.extractWeights,i=n.getRemainingWeights,a=K9(r,e).extractDenseBlock4Params,o=a(3,32,"dense0",!0),s=a(32,64,"dense1"),u=a(64,128,"dense2"),l=a(128,256,"dense3");if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:e,params:{dense0:o,dense1:s,dense2:u,dense3:l}}}function Y9(t){return function(e){var n=t(e+"/filters",4),r=t(e+"/bias",1);return{filters:n,bias:r}}}function X9(t,e){var n=_u(t,e),r=Y9(n),i=XC(n);function a(s,u){u===void 0&&(u=!1);var l=u?r(s+"/conv0"):i(s+"/conv0"),c=i(s+"/conv1"),f=i(s+"/conv2");return{conv0:l,conv1:c,conv2:f}}function o(s,u){u===void 0&&(u=!1);var l=u?r(s+"/conv0"):i(s+"/conv0"),c=i(s+"/conv1"),f=i(s+"/conv2"),d=i(s+"/conv3");return{conv0:l,conv1:c,conv2:f,conv3:d}}return{extractDenseBlock3Params:a,extractDenseBlock4Params:o}}function OMe(t){var e=[],n=X9(t,e).extractDenseBlock4Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2"),dense3:n("dense3")};return ns(t,e),{params:r,paramMappings:e}}var Q9=function(t){mt(e,t);function e(){return t.call(this,"FaceFeatureExtractor")||this}return e.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("FaceFeatureExtractor - load model before inference");return $e(function(){var i=n.toBatchTensor(112,!0),a=[122.782,117.001,104.298],o=Tp(i,a).div(je(255)),s=Rm(o,r.dense0,!0);return s=Rm(s,r.dense1),s=Rm(s,r.dense2),s=Rm(s,r.dense3),s=Dp(s,[7,7],[2,2],"valid"),s})},e.prototype.forward=function(n){return Ke(this,void 0,void 0,function(){var r;return Ye(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,or(n)];case 1:return[2,r.apply(this,[i.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},e.prototype.extractParamsFromWeigthMap=function(n){return OMe(n)},e.prototype.extractParams=function(n){return PMe(n)},e}(ts);function Ga(t,e){return $e(function(){return St(yy(t,e.weights),e.bias)})}function BMe(t,e,n){var r=[],i=rs(t),a=i.extractWeights,o=i.getRemainingWeights,s=KC(a,r),u=s(e,n,"fc");if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:r,params:{fc:u}}}function LMe(t){var e=[],n=_u(t,e);function r(a){var o=n(a+"/weights",2),s=n(a+"/bias",1);return{weights:o,bias:s}}var i={fc:r("fc")};return ns(t,e),{params:i,paramMappings:e}}function Z9(t){var e={},n={};return Object.keys(t).forEach(function(r){var i=r.startsWith("fc")?n:e;i[r]=t[r]}),{featureExtractorMap:e,classifierMap:n}}var J9=function(t){mt(e,t);function e(n,r){var i=t.call(this,n)||this;return i._faceFeatureExtractor=r,i}return Object.defineProperty(e.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),e.prototype.runNet=function(n){var r=this,i=this.params;if(!i)throw new Error(this._name+" - load model before inference");return $e(function(){var a=n instanceof e0?r.faceFeatureExtractor.forwardInput(n):n;return Ga(a.as2D(a.shape[0],-1),i.fc)})},e.prototype.dispose=function(n){n===void 0&&(n=!0),this.faceFeatureExtractor.dispose(n),t.prototype.dispose.call(this,n)},e.prototype.loadClassifierParams=function(n){var r=this.extractClassifierParams(n),i=r.params,a=r.paramMappings;this._params=i,this._paramMappings=a},e.prototype.extractClassifierParams=function(n){return BMe(n,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},e.prototype.extractParamsFromWeigthMap=function(n){var r=Z9(n),i=r.featureExtractorMap,a=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(i),LMe(a)},e.prototype.extractParams=function(n){var r=this.getClassifierChannelsIn(),i=this.getClassifierChannelsOut(),a=i*r+i,o=n.slice(0,n.length-a),s=n.slice(n.length-a);return this.faceFeatureExtractor.extractWeights(o),this.extractClassifierParams(s)},e}(ts),PR=["neutral","happy","sad","angry","fearful","disgusted","surprised"],jMe=function(){function t(e){var n=this;if(e.length!==7)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+e.length);PR.forEach(function(r,i){n[r]=e[i]})}return t.prototype.asSortedArray=function(){var e=this;return PR.map(function(n){return{expression:n,probability:e[n]}}).sort(function(n,r){return r.probability-n.probability})},t}(),$Me=function(t){mt(e,t);function e(n){return n===void 0&&(n=new Q9),t.call(this,"FaceExpressionNet",n)||this}return e.prototype.forwardInput=function(n){var r=this;return $e(function(){return Jo(r.runNet(n))})},e.prototype.forward=function(n){return Ke(this,void 0,void 0,function(){var r;return Ye(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,or(n)];case 1:return[2,r.apply(this,[i.sent()])]}})})},e.prototype.predictExpressions=function(n){return Ke(this,void 0,void 0,function(){var r,i,a,o,s=this;return Ye(this,function(u){switch(u.label){case 0:return[4,or(n)];case 1:return r=u.sent(),[4,this.forwardInput(r)];case 2:return i=u.sent(),[4,Promise.all(Wn(i).map(function(l){return Ke(s,void 0,void 0,function(){var c;return Ye(this,function(f){switch(f.label){case 0:return[4,l.data()];case 1:return c=f.sent(),l.dispose(),[2,c]}})})}))];case 3:return a=u.sent(),i.dispose(),o=a.map(function(l){return new jMe(l)}),[2,r.isBatchInput?o:o[0]]}})})},e.prototype.getDefaultModelName=function(){return"face_expression_model"},e.prototype.getClassifierChannelsIn=function(){return 256},e.prototype.getClassifierChannelsOut=function(){return 7},e}(J9);function ej(t,e){var n={expressions:e};return Object.assign({},t,n)}function zMe(t){return SMe(t)&&t.landmarks instanceof Jg&&t.unshiftedLandmarks instanceof Jg&&t.alignedRect instanceof ho}function QC(t,e){var n=t.detection.box,r=e.shiftBy(n.x,n.y),i=r.align(),a=t.detection.imageDims,o=new ho(t.detection.score,i.rescale(a.reverse()),a),s={landmarks:r,unshiftedLandmarks:e,alignedRect:o};return Object.assign({},t,s)}function UMe(t,e){var n=Ny(t,e),r=YC(t,e);function i(o,s,u){var l=r(o,s,u+"/separable_conv0"),c=r(s,s,u+"/separable_conv1"),f=n(o,s,1,u+"/expansion_conv");return{separable_conv0:l,separable_conv1:c,expansion_conv:f}}function a(o,s){var u=r(o,o,s+"/separable_conv0"),l=r(o,o,s+"/separable_conv1"),c=r(o,o,s+"/separable_conv2");return{separable_conv0:u,separable_conv1:l,separable_conv2:c}}return{extractConvParams:n,extractSeparableConvParams:r,extractReductionBlockParams:i,extractMainBlockParams:a}}function WMe(t,e){var n=[],r=rs(t),i=r.extractWeights,a=r.getRemainingWeights,o=UMe(i,n),s=o.extractConvParams,u=o.extractSeparableConvParams,l=o.extractReductionBlockParams,c=o.extractMainBlockParams,f=s(3,32,3,"entry_flow/conv_in"),d=l(32,64,"entry_flow/reduction_block_0"),h=l(64,128,"entry_flow/reduction_block_1"),p={conv_in:f,reduction_block_0:d,reduction_block_1:h},m={};Uh(e,0,1).forEach(function(y){m["main_block_"+y]=c(128,"middle_flow/main_block_"+y)});var g=l(128,256,"exit_flow/reduction_block"),v=u(256,512,"exit_flow/separable_conv"),x={reduction_block:g,separable_conv:v};if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:n,params:{entry_flow:p,middle_flow:m,exit_flow:x}}}function VMe(t,e){var n=_u(t,e),r=Y9(n),i=XC(n);function a(s){var u=i(s+"/separable_conv0"),l=i(s+"/separable_conv1"),c=r(s+"/expansion_conv");return{separable_conv0:u,separable_conv1:l,expansion_conv:c}}function o(s){var u=i(s+"/separable_conv0"),l=i(s+"/separable_conv1"),c=i(s+"/separable_conv2");return{separable_conv0:u,separable_conv1:l,separable_conv2:c}}return{extractConvParams:r,extractSeparableConvParams:i,extractReductionBlockParams:a,extractMainBlockParams:o}}function qMe(t,e){var n=[],r=VMe(t,n),i=r.extractConvParams,a=r.extractSeparableConvParams,o=r.extractReductionBlockParams,s=r.extractMainBlockParams,u=i("entry_flow/conv_in"),l=o("entry_flow/reduction_block_0"),c=o("entry_flow/reduction_block_1"),f={conv_in:u,reduction_block_0:l,reduction_block_1:c},d={};Uh(e,0,1).forEach(function(g){d["main_block_"+g]=s("middle_flow/main_block_"+g)});var h=o("exit_flow/reduction_block"),p=a("exit_flow/separable_conv"),m={reduction_block:h,separable_conv:p};return ns(t,n),{params:{entry_flow:f,middle_flow:d,exit_flow:m},paramMappings:n}}function tj(t,e,n){return St(sa(t,e.filters,n,"same"),e.bias)}function dx(t,e,n){n===void 0&&(n=!0);var r=n?yn(t):t;return r=Ai(r,e.separable_conv0,[1,1]),r=Ai(yn(r),e.separable_conv1,[1,1]),r=Zn(r,[3,3],[2,2],"same"),r=St(r,tj(t,e.expansion_conv,[2,2])),r}function HMe(t,e){var n=Ai(yn(t),e.separable_conv0,[1,1]);return n=Ai(yn(n),e.separable_conv1,[1,1]),n=Ai(yn(n),e.separable_conv2,[1,1]),n=St(n,t),n}var GMe=function(t){mt(e,t);function e(n){var r=t.call(this,"TinyXception")||this;return r._numMainBlocks=n,r}return e.prototype.forwardInput=function(n){var r=this,i=this.params;if(!i)throw new Error("TinyXception - load model before inference");return $e(function(){var a=n.toBatchTensor(112,!0),o=[122.782,117.001,104.298],s=Tp(a,o).div(je(256)),u=yn(tj(s,i.entry_flow.conv_in,[2,2]));return u=dx(u,i.entry_flow.reduction_block_0,!1),u=dx(u,i.entry_flow.reduction_block_1),Uh(r._numMainBlocks,0,1).forEach(function(l){u=HMe(u,i.middle_flow["main_block_"+l])}),u=dx(u,i.exit_flow.reduction_block),u=yn(Ai(u,i.exit_flow.separable_conv,[1,1])),u})},e.prototype.forward=function(n){return Ke(this,void 0,void 0,function(){var r;return Ye(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,or(n)];case 1:return[2,r.apply(this,[i.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"tiny_xception_model"},e.prototype.extractParamsFromWeigthMap=function(n){return qMe(n,this._numMainBlocks)},e.prototype.extractParams=function(n){return WMe(n,this._numMainBlocks)},e}(ts);function KMe(t){var e=[],n=rs(t),r=n.extractWeights,i=n.getRemainingWeights,a=KC(r,e),o=a(512,1,"fc/age"),s=a(512,2,"fc/gender");if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:e,params:{fc:{age:o,gender:s}}}}function YMe(t){var e=[],n=_u(t,e);function r(a){var o=n(a+"/weights",2),s=n(a+"/bias",1);return{weights:o,bias:s}}var i={fc:{age:r("fc/age"),gender:r("fc/gender")}};return ns(t,e),{params:i,paramMappings:e}}var t0;(function(t){t.FEMALE="female",t.MALE="male"})(t0||(t0={}));var XMe=function(t){mt(e,t);function e(n){n===void 0&&(n=new GMe(2));var r=t.call(this,"AgeGenderNet")||this;return r._faceFeatureExtractor=n,r}return Object.defineProperty(e.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),e.prototype.runNet=function(n){var r=this,i=this.params;if(!i)throw new Error(this._name+" - load model before inference");return $e(function(){var a=n instanceof e0?r.faceFeatureExtractor.forwardInput(n):n,o=Dp(a,[7,7],[2,2],"valid").as2D(a.shape[0],-1),s=Ga(o,i.fc.age).as1D(),u=Ga(o,i.fc.gender);return{age:s,gender:u}})},e.prototype.forwardInput=function(n){var r=this;return $e(function(){var i=r.runNet(n),a=i.age,o=i.gender;return{age:a,gender:Jo(o)}})},e.prototype.forward=function(n){return Ke(this,void 0,void 0,function(){var r;return Ye(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,or(n)];case 1:return[2,r.apply(this,[i.sent()])]}})})},e.prototype.predictAgeAndGender=function(n){return Ke(this,void 0,void 0,function(){var r,i,a,o,s,u,l=this;return Ye(this,function(c){switch(c.label){case 0:return[4,or(n)];case 1:return r=c.sent(),[4,this.forwardInput(r)];case 2:return i=c.sent(),a=Wn(i.age),o=Wn(i.gender),s=a.map(function(f,d){return{ageTensor:f,genderTensor:o[d]}}),[4,Promise.all(s.map(function(f){var d=f.ageTensor,h=f.genderTensor;return Ke(l,void 0,void 0,function(){var p,m,g,v,x;return Ye(this,function(y){switch(y.label){case 0:return[4,d.data()];case 1:return p=y.sent()[0],[4,h.data()];case 2:return m=y.sent()[0],g=m>.5,v=g?t0.MALE:t0.FEMALE,x=g?m:1-m,d.dispose(),h.dispose(),[2,{age:p,gender:v,genderProbability:x}]}})})}))];case 3:return u=c.sent(),i.age.dispose(),i.gender.dispose(),[2,r.isBatchInput?u:u[0]]}})})},e.prototype.getDefaultModelName=function(){return"age_gender_model"},e.prototype.dispose=function(n){n===void 0&&(n=!0),this.faceFeatureExtractor.dispose(n),t.prototype.dispose.call(this,n)},e.prototype.loadClassifierParams=function(n){var r=this.extractClassifierParams(n),i=r.params,a=r.paramMappings;this._params=i,this._paramMappings=a},e.prototype.extractClassifierParams=function(n){return KMe(n)},e.prototype.extractParamsFromWeigthMap=function(n){var r=Z9(n),i=r.featureExtractorMap,a=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(i),YMe(a)},e.prototype.extractParams=function(n){var r=1539,i=n.slice(0,n.length-r),a=n.slice(n.length-r);return this.faceFeatureExtractor.extractWeights(i),this.extractClassifierParams(a)},e}(ts),nj=function(t){mt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.postProcess=function(n,r,i){var a=i.map(function(s){var u=s.width,l=s.height,c=r/Math.max(l,u);return{width:u*c,height:l*c}}),o=a.length;return $e(function(){var s=function(d,h){return Ii([to([68],d),to([68],h)],1).as2D(1,136).as1D()},u=function(d,h){var p=a[d],m=p.width,g=p.height;return h(m,g)?Math.abs(m-g)/2:0},l=function(d){return u(d,function(h,p){return h<p})},c=function(d){return u(d,function(h,p){return p<h})},f=n.mul(to([o,136],r)).sub(Ii(Array.from(Array(o),function(d,h){return s(l(h),c(h))}))).div(Ii(Array.from(Array(o),function(d,h){return s(a[h].width,a[h].height)})));return f})},e.prototype.forwardInput=function(n){var r=this;return $e(function(){var i=r.runNet(n);return r.postProcess(i,n.inputSize,n.inputDimensions.map(function(a){var o=a[0],s=a[1];return{height:o,width:s}}))})},e.prototype.forward=function(n){return Ke(this,void 0,void 0,function(){var r;return Ye(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,or(n)];case 1:return[2,r.apply(this,[i.sent()])]}})})},e.prototype.detectLandmarks=function(n){return Ke(this,void 0,void 0,function(){var r,i,a,o=this;return Ye(this,function(s){switch(s.label){case 0:return[4,or(n)];case 1:return r=s.sent(),i=$e(function(){return Wn(o.forwardInput(r))}),[4,Promise.all(i.map(function(u,l){return Ke(o,void 0,void 0,function(){var c,f,d,h,p;return Ye(this,function(m){switch(m.label){case 0:return d=(f=Array).from,[4,u.data()];case 1:return c=d.apply(f,[m.sent()]),h=c.filter(function(g,v){return AR(v)}),p=c.filter(function(g,v){return!AR(v)}),[2,new NMe(Array(68).fill(0).map(function(g,v){return new $t(h[v],p[v])}),{height:r.getInputHeight(l),width:r.getInputWidth(l)})]}})})}))];case 2:return a=s.sent(),i.forEach(function(u){return u.dispose()}),[2,r.isBatchInput?a:a[0]]}})})},e.prototype.getClassifierChannelsOut=function(){return 136},e}(J9),rj=function(t){mt(e,t);function e(n){return n===void 0&&(n=new Q9),t.call(this,"FaceLandmark68Net",n)||this}return e.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},e.prototype.getClassifierChannelsIn=function(){return 256},e}(nj);function QMe(t){var e=[],n=X9(t,e).extractDenseBlock3Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2")};return ns(t,e),{params:r,paramMappings:e}}function ZMe(t){var e=[],n=rs(t),r=n.extractWeights,i=n.getRemainingWeights,a=K9(r,e).extractDenseBlock3Params,o=a(3,32,"dense0",!0),s=a(32,64,"dense1"),u=a(64,128,"dense2");if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:e,params:{dense0:o,dense1:s,dense2:u}}}var JMe=function(t){mt(e,t);function e(){return t.call(this,"TinyFaceFeatureExtractor")||this}return e.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("TinyFaceFeatureExtractor - load model before inference");return $e(function(){var i=n.toBatchTensor(112,!0),a=[122.782,117.001,104.298],o=Tp(i,a).div(je(255)),s=fx(o,r.dense0,!0);return s=fx(s,r.dense1),s=fx(s,r.dense2),s=Dp(s,[14,14],[2,2],"valid"),s})},e.prototype.forward=function(n){return Ke(this,void 0,void 0,function(){var r;return Ye(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,or(n)];case 1:return[2,r.apply(this,[i.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},e.prototype.extractParamsFromWeigthMap=function(n){return QMe(n)},e.prototype.extractParams=function(n){return ZMe(n)},e}(ts),eIe=function(t){mt(e,t);function e(n){return n===void 0&&(n=new JMe),t.call(this,"FaceLandmark68TinyNet",n)||this}return e.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},e.prototype.getClassifierChannelsIn=function(){return 128},e}(nj);(function(t){mt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(rj);function tIe(t,e){return St(kr(t,e.weights),e.biases)}function ZC(t,e,n,r,i){i===void 0&&(i="same");var a=e.conv,o=a.filters,s=a.bias,u=sa(t,o,n,i);return u=St(u,s),u=tIe(u,e.scale),r?yn(u):u}function nIe(t,e){return ZC(t,e,[1,1],!0)}function ij(t,e){return ZC(t,e,[1,1],!1)}function aj(t,e){return ZC(t,e,[2,2],!0,"valid")}function rIe(t,e){function n(s,u,l){var c=t(s),f=c.length/(u*l*l);if(mMe(f))throw new Error("depth has to be an integer: "+f+", weights.length: "+c.length+", numFilters: "+u+", filterSize: "+l);return $e(function(){return Js(ri(c,[u,f,l,l]),[2,3,1,0])})}function r(s,u,l,c){var f=n(s,u,l),d=Fn(t(u));return e.push({paramPath:c+"/filters"},{paramPath:c+"/bias"}),{filters:f,bias:d}}function i(s,u){var l=Fn(t(s)),c=Fn(t(s));return e.push({paramPath:u+"/weights"},{paramPath:u+"/biases"}),{weights:l,biases:c}}function a(s,u,l,c){var f=r(s,u,l,c+"/conv"),d=i(u,c+"/scale");return{conv:f,scale:d}}function o(s,u,l,c,f){f===void 0&&(f=!1);var d=a((f?.5:1)*s,u,l,c+"/conv1"),h=a(s,u,l,c+"/conv2");return{conv1:d,conv2:h}}return{extractConvLayerParams:a,extractResidualLayerParams:o}}function iIe(t){var e=rs(t),n=e.extractWeights,r=e.getRemainingWeights,i=[],a=rIe(n,i),o=a.extractConvLayerParams,s=a.extractResidualLayerParams,u=o(4704,32,7,"conv32_down"),l=s(9216,32,3,"conv32_1"),c=s(9216,32,3,"conv32_2"),f=s(9216,32,3,"conv32_3"),d=s(36864,64,3,"conv64_down",!0),h=s(36864,64,3,"conv64_1"),p=s(36864,64,3,"conv64_2"),m=s(36864,64,3,"conv64_3"),g=s(147456,128,3,"conv128_down",!0),v=s(147456,128,3,"conv128_1"),x=s(147456,128,3,"conv128_2"),y=s(589824,256,3,"conv256_down",!0),b=s(589824,256,3,"conv256_1"),w=s(589824,256,3,"conv256_2"),_=s(589824,256,3,"conv256_down_out"),E=$e(function(){return Js($s(n(256*128),[128,256]),[1,0])});if(i.push({paramPath:"fc"}),r().length!==0)throw new Error("weights remaing after extract: "+r().length);var C={conv32_down:u,conv32_1:l,conv32_2:c,conv32_3:f,conv64_down:d,conv64_1:h,conv64_2:p,conv64_3:m,conv128_down:g,conv128_1:v,conv128_2:x,conv256_down:y,conv256_1:b,conv256_2:w,conv256_down_out:_,fc:E};return{params:C,paramMappings:i}}function aIe(t,e){var n=_u(t,e);function r(o){var s=n(o+"/scale/weights",1),u=n(o+"/scale/biases",1);return{weights:s,biases:u}}function i(o){var s=n(o+"/conv/filters",4),u=n(o+"/conv/bias",1),l=r(o);return{conv:{filters:s,bias:u},scale:l}}function a(o){return{conv1:i(o+"/conv1"),conv2:i(o+"/conv2")}}return{extractConvLayerParams:i,extractResidualLayerParams:a}}function oIe(t){var e=[],n=aIe(t,e),r=n.extractConvLayerParams,i=n.extractResidualLayerParams,a=r("conv32_down"),o=i("conv32_1"),s=i("conv32_2"),u=i("conv32_3"),l=i("conv64_down"),c=i("conv64_1"),f=i("conv64_2"),d=i("conv64_3"),h=i("conv128_down"),p=i("conv128_1"),m=i("conv128_2"),g=i("conv256_down"),v=i("conv256_1"),x=i("conv256_2"),y=i("conv256_down_out"),b=t.fc;if(e.push({originalPath:"fc",paramPath:"fc"}),!pMe(b))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+b);var w={conv32_down:a,conv32_1:o,conv32_2:s,conv32_3:u,conv64_down:l,conv64_1:c,conv64_2:f,conv64_3:d,conv128_down:h,conv128_1:p,conv128_2:m,conv256_down:g,conv256_1:v,conv256_2:x,conv256_down_out:y,fc:b};return ns(t,e),{params:w,paramMappings:e}}function ja(t,e){var n=nIe(t,e.conv1);return n=ij(n,e.conv2),n=St(n,t),n=yn(n),n}function km(t,e){var n=aj(t,e.conv1);n=ij(n,e.conv2);var r=Dp(t,2,2,"valid"),i=sn(r.shape),a=r.shape[3]!==n.shape[3],o=r.shape[1]!==n.shape[1]||r.shape[2]!==n.shape[2];if(o){var s=Gd(n.shape);s[1]=1;var u=sn(s);n=Un([n,u],1);var l=Gd(n.shape);l[2]=1;var c=sn(l);n=Un([n,c],2)}return r=a?Un([r,i],3):r,n=St(r,n),n=yn(n),n}var sIe=function(t){mt(e,t);function e(){return t.call(this,"FaceRecognitionNet")||this}return e.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("FaceRecognitionNet - load model before inference");return $e(function(){var i=n.toBatchTensor(150,!0).toFloat(),a=[122.782,117.001,104.298],o=Tp(i,a).div(je(256)),s=aj(o,r.conv32_down);s=Zn(s,3,2,"valid"),s=ja(s,r.conv32_1),s=ja(s,r.conv32_2),s=ja(s,r.conv32_3),s=km(s,r.conv64_down),s=ja(s,r.conv64_1),s=ja(s,r.conv64_2),s=ja(s,r.conv64_3),s=km(s,r.conv128_down),s=ja(s,r.conv128_1),s=ja(s,r.conv128_2),s=km(s,r.conv256_down),s=ja(s,r.conv256_1),s=ja(s,r.conv256_2),s=km(s,r.conv256_down_out);var u=s.mean([1,2]),l=yy(u,r.fc);return l})},e.prototype.forward=function(n){return Ke(this,void 0,void 0,function(){var r;return Ye(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,or(n)];case 1:return[2,r.apply(this,[i.sent()])]}})})},e.prototype.computeFaceDescriptor=function(n){return Ke(this,void 0,void 0,function(){var r,i,a,o=this;return Ye(this,function(s){switch(s.label){case 0:return[4,or(n)];case 1:return r=s.sent(),i=$e(function(){return Wn(o.forwardInput(r))}),[4,Promise.all(i.map(function(u){return u.data()}))];case 2:return a=s.sent(),i.forEach(function(u){return u.dispose()}),[2,r.isBatchInput?a:a[0]]}})})},e.prototype.getDefaultModelName=function(){return"face_recognition_model"},e.prototype.extractParamsFromWeigthMap=function(n){return oIe(n)},e.prototype.extractParams=function(n){return iIe(n)},e}(ts);function oj(t,e){var n={descriptor:e};return Object.assign({},t,n)}function sj(t,e){var n={age:e};return Object.assign({},t,n)}function uj(t,e,n){var r={gender:e,genderProbability:n};return Object.assign({},t,r)}var lj=function(){function t(e){var n=e===void 0?{}:e,r=n.minFaceSize,i=n.scaleFactor,a=n.maxNumScales,o=n.scoreThresholds,s=n.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=r||20,this._scaleFactor=i||.709,this._maxNumScales=a||10,this._scoreThresholds=o||[.6,.7,.7],this._scaleSteps=s,typeof this._minFaceSize!="number"||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if(typeof this._scaleFactor!="number"||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if(typeof this._maxNumScales!="number"||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||this._scoreThresholds.length!==3||this._scoreThresholds.some(function(u){return typeof u!="number"}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(u){return typeof u!="number"})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(t.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),t}();function uIe(t,e){function n(u,l){var c=ri(t(9*u),[3,3,u,1]),f=Fn(t(u)),d=Fn(t(u)),h=Fn(t(u)),p=Fn(t(u));return e.push({paramPath:l+"/filters"},{paramPath:l+"/batch_norm_scale"},{paramPath:l+"/batch_norm_offset"},{paramPath:l+"/batch_norm_mean"},{paramPath:l+"/batch_norm_variance"}),{filters:c,batch_norm_scale:f,batch_norm_offset:d,batch_norm_mean:h,batch_norm_variance:p}}function r(u,l,c,f,d){var h=ri(t(u*l*c*c),[c,c,u,l]),p=Fn(t(l));return e.push({paramPath:f+"/filters"},{paramPath:f+"/"+(d?"batch_norm_offset":"bias")}),{filters:h,bias:p}}function i(u,l,c,f){var d=r(u,l,c,f,!0),h=d.filters,p=d.bias;return{filters:h,batch_norm_offset:p}}function a(u,l,c){var f=n(u,c+"/depthwise_conv"),d=i(u,l,1,c+"/pointwise_conv");return{depthwise_conv:f,pointwise_conv:d}}function o(){var u=i(3,32,3,"mobilenetv1/conv_0"),l=a(32,64,"mobilenetv1/conv_1"),c=a(64,128,"mobilenetv1/conv_2"),f=a(128,128,"mobilenetv1/conv_3"),d=a(128,256,"mobilenetv1/conv_4"),h=a(256,256,"mobilenetv1/conv_5"),p=a(256,512,"mobilenetv1/conv_6"),m=a(512,512,"mobilenetv1/conv_7"),g=a(512,512,"mobilenetv1/conv_8"),v=a(512,512,"mobilenetv1/conv_9"),x=a(512,512,"mobilenetv1/conv_10"),y=a(512,512,"mobilenetv1/conv_11"),b=a(512,1024,"mobilenetv1/conv_12"),w=a(1024,1024,"mobilenetv1/conv_13");return{conv_0:u,conv_1:l,conv_2:c,conv_3:f,conv_4:d,conv_5:h,conv_6:p,conv_7:m,conv_8:g,conv_9:v,conv_10:x,conv_11:y,conv_12:b,conv_13:w}}function s(){var u=i(1024,256,1,"prediction_layer/conv_0"),l=i(256,512,3,"prediction_layer/conv_1"),c=i(512,128,1,"prediction_layer/conv_2"),f=i(128,256,3,"prediction_layer/conv_3"),d=i(256,128,1,"prediction_layer/conv_4"),h=i(128,256,3,"prediction_layer/conv_5"),p=i(256,64,1,"prediction_layer/conv_6"),m=i(64,128,3,"prediction_layer/conv_7"),g=r(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),v=r(512,9,1,"prediction_layer/box_predictor_0/class_predictor"),x=r(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),y=r(1024,18,1,"prediction_layer/box_predictor_1/class_predictor"),b=r(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),w=r(512,18,1,"prediction_layer/box_predictor_2/class_predictor"),_=r(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),E=r(256,18,1,"prediction_layer/box_predictor_3/class_predictor"),C=r(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),N=r(256,18,1,"prediction_layer/box_predictor_4/class_predictor"),D=r(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),A=r(128,18,1,"prediction_layer/box_predictor_5/class_predictor"),T={box_encoding_predictor:g,class_predictor:v},k={box_encoding_predictor:x,class_predictor:y},F={box_encoding_predictor:b,class_predictor:w},O={box_encoding_predictor:_,class_predictor:E},I={box_encoding_predictor:C,class_predictor:N},M={box_encoding_predictor:D,class_predictor:A};return{conv_0:u,conv_1:l,conv_2:c,conv_3:f,conv_4:d,conv_5:h,conv_6:p,conv_7:m,box_predictor_0:T,box_predictor_1:k,box_predictor_2:F,box_predictor_3:O,box_predictor_4:I,box_predictor_5:M}}return{extractMobilenetV1Params:o,extractPredictionLayerParams:s}}function lIe(t){var e=[],n=rs(t),r=n.extractWeights,i=n.getRemainingWeights,a=uIe(r,e),o=a.extractMobilenetV1Params,s=a.extractPredictionLayerParams,u=o(),l=s(),c=pC(r(5118*4),[1,5118,4]),f={extra_dim:c};if(e.push({paramPath:"output_layer/extra_dim"}),i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{params:{mobilenetv1:u,prediction_layer:l,output_layer:f},paramMappings:e}}function cIe(t,e){var n=_u(t,e);function r(l,c,f){var d=n(l+"/Conv2d_"+c+"_pointwise/weights",4,f+"/filters"),h=n(l+"/Conv2d_"+c+"_pointwise/convolution_bn_offset",1,f+"/batch_norm_offset");return{filters:d,batch_norm_offset:h}}function i(l){var c="mobilenetv1/conv_"+l,f="MobilenetV1/Conv2d_"+l+"_depthwise",d=c+"/depthwise_conv",h=c+"/pointwise_conv",p=n(f+"/depthwise_weights",4,d+"/filters"),m=n(f+"/BatchNorm/gamma",1,d+"/batch_norm_scale"),g=n(f+"/BatchNorm/beta",1,d+"/batch_norm_offset"),v=n(f+"/BatchNorm/moving_mean",1,d+"/batch_norm_mean"),x=n(f+"/BatchNorm/moving_variance",1,d+"/batch_norm_variance");return{depthwise_conv:{filters:p,batch_norm_scale:m,batch_norm_offset:g,batch_norm_mean:v,batch_norm_variance:x},pointwise_conv:r("MobilenetV1",l,h)}}function a(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:i(1),conv_2:i(2),conv_3:i(3),conv_4:i(4),conv_5:i(5),conv_6:i(6),conv_7:i(7),conv_8:i(8),conv_9:i(9),conv_10:i(10),conv_11:i(11),conv_12:i(12),conv_13:i(13)}}function o(l,c){var f=n(l+"/weights",4,c+"/filters"),d=n(l+"/biases",1,c+"/bias");return{filters:f,bias:d}}function s(l){var c=o("Prediction/BoxPredictor_"+l+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+l+"/box_encoding_predictor"),f=o("Prediction/BoxPredictor_"+l+"/ClassPredictor","prediction_layer/box_predictor_"+l+"/class_predictor");return{box_encoding_predictor:c,class_predictor:f}}function u(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:s(0),box_predictor_1:s(1),box_predictor_2:s(2),box_predictor_3:s(3),box_predictor_4:s(4),box_predictor_5:s(5)}}return{extractMobilenetV1Params:a,extractPredictionLayerParams:u}}function fIe(t){var e=[],n=cIe(t,e),r=n.extractMobilenetV1Params,i=n.extractPredictionLayerParams,a=t["Output/extra_dim"];if(e.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!_y(a))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+a);var o={mobilenetv1:r(),prediction_layer:i(),output_layer:{extra_dim:a}};return ns(t,e),{params:o,paramMappings:e}}function za(t,e,n){return $e(function(){var r=sa(t,e.filters,n,"same");return r=St(r,e.batch_norm_offset),NC(r,0,6)})}var dIe=.0010000000474974513;function hIe(t,e,n){return $e(function(){var r=gy(t,e.filters,n,"same");return r=r9(r,e.batch_norm_mean,e.batch_norm_variance,e.batch_norm_offset,e.batch_norm_scale,dIe),NC(r,0,6)})}function pIe(t){return[2,4,6,12].some(function(e){return e===t})?[2,2]:[1,1]}function mIe(t,e){return $e(function(){var n=null,r=za(t,e.conv_0,[2,2]),i=[e.conv_1,e.conv_2,e.conv_3,e.conv_4,e.conv_5,e.conv_6,e.conv_7,e.conv_8,e.conv_9,e.conv_10,e.conv_11,e.conv_12,e.conv_13];if(i.forEach(function(a,o){var s=o+1,u=pIe(s);r=hIe(r,a.depthwise_conv,u),r=za(r,a.pointwise_conv,[1,1]),s===11&&(n=r)}),n===null)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:n}})}function vIe(t,e,n,r,i){var a=t.shape[0],o=Math.min(n,a),s=e.map(function(c,f){return{score:c,boxIndex:f}}).filter(function(c){return c.score>i}).sort(function(c,f){return f.score-c.score}),u=function(c){return c<=r?1:0},l=[];return s.forEach(function(c){if(!(l.length>=o)){for(var f=c.score,d=l.length-1;d>=0;--d){var h=gIe(t,c.boxIndex,l[d]);if(h!==0&&(c.score*=u(h),c.score<=i))break}f===c.score&&l.push(c.boxIndex)}}),l}function gIe(t,e,n){var r=t.arraySync(),i=Math.min(r[e][0],r[e][2]),a=Math.min(r[e][1],r[e][3]),o=Math.max(r[e][0],r[e][2]),s=Math.max(r[e][1],r[e][3]),u=Math.min(r[n][0],r[n][2]),l=Math.min(r[n][1],r[n][3]),c=Math.max(r[n][0],r[n][2]),f=Math.max(r[n][1],r[n][3]),d=(o-i)*(s-a),h=(c-u)*(f-l);if(d<=0||h<=0)return 0;var p=Math.max(i,u),m=Math.max(a,l),g=Math.min(o,c),v=Math.min(s,f),x=Math.max(g-p,0)*Math.max(v-m,0);return x/(d+h-x)}function yIe(t){var e=Wn(Js(t,[1,0])),n=[qn(e[2],e[0]),qn(e[3],e[1])],r=[St(e[0],va(n[0],je(2))),St(e[1],va(n[1],je(2)))];return{sizes:n,centers:r}}function xIe(t,e){var n=yIe(t),r=n.sizes,i=n.centers,a=Wn(Js(e,[1,0])),o=va(kr(Pw(va(a[2],je(5))),r[0]),je(2)),s=St(kr(va(a[0],je(10)),r[0]),i[0]),u=va(kr(Pw(va(a[3],je(5))),r[1]),je(2)),l=St(kr(va(a[1],je(10)),r[1]),i[1]);return Js(Ii([qn(s,o),qn(l,u),St(s,o),St(l,u)]),[1,0])}function bIe(t,e,n){return $e(function(){var r=t.shape[0],i=xIe(wa(Fc(n.extra_dim,[r,1,1]),[-1,4]),wa(t,[-1,4]));i=wa(i,[r,i.shape[0]/r,4]);var a=J7(ro(e,[0,0,1],[-1,-1,-1])),o=ro(a,[0,0,0],[-1,-1,1]);o=wa(o,[r,o.shape[1]]);var s=Wn(i),u=Wn(o);return{boxes:s,scores:u}})}function Gl(t,e){return $e(function(){var n=t.shape[0],r=wa(Da(t,e.box_encoding_predictor),[n,-1,1,4]),i=wa(Da(t,e.class_predictor),[n,-1,3]);return{boxPredictionEncoding:r,classPrediction:i}})}function wIe(t,e,n){return $e(function(){var r=za(t,n.conv_0,[1,1]),i=za(r,n.conv_1,[2,2]),a=za(i,n.conv_2,[1,1]),o=za(a,n.conv_3,[2,2]),s=za(o,n.conv_4,[1,1]),u=za(s,n.conv_5,[2,2]),l=za(u,n.conv_6,[1,1]),c=za(l,n.conv_7,[2,2]),f=Gl(e,n.box_predictor_0),d=Gl(t,n.box_predictor_1),h=Gl(i,n.box_predictor_2),p=Gl(o,n.box_predictor_3),m=Gl(u,n.box_predictor_4),g=Gl(c,n.box_predictor_5),v=Un([f.boxPredictionEncoding,d.boxPredictionEncoding,h.boxPredictionEncoding,p.boxPredictionEncoding,m.boxPredictionEncoding,g.boxPredictionEncoding],1),x=Un([f.classPrediction,d.classPrediction,h.classPrediction,p.classPrediction,m.classPrediction,g.classPrediction],1);return{boxPredictions:v,classPredictions:x}})}var Sy=function(){function t(e){var n=e===void 0?{}:e,r=n.minConfidence,i=n.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=r||.5,this._maxResults=i||100,typeof this._minConfidence!="number"||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if(typeof this._maxResults!="number")throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(t.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),t}(),cj=function(t){mt(e,t);function e(){return t.call(this,"SsdMobilenetv1")||this}return e.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("SsdMobilenetv1 - load model before inference");return $e(function(){var i=n.toBatchTensor(512,!1).toFloat(),a=qn(kr(i,je(.007843137718737125)),je(1)),o=mIe(a,r.mobilenetv1),s=wIe(o.out,o.conv11,r.prediction_layer),u=s.boxPredictions,l=s.classPredictions;return bIe(u,l,r.output_layer)})},e.prototype.forward=function(n){return Ke(this,void 0,void 0,function(){var r;return Ye(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,or(n)];case 1:return[2,r.apply(this,[i.sent()])]}})})},e.prototype.locateFaces=function(n,r){return r===void 0&&(r={}),Ke(this,void 0,void 0,function(){var i,a,o,s,u,l,c,f,d,h,p,m,g,v,x,y,b,w,_,E,C;return Ye(this,function(N){switch(N.label){case 0:return i=new Sy(r),a=i.maxResults,o=i.minConfidence,[4,or(n)];case 1:for(s=N.sent(),u=this.forwardInput(s),l=u.boxes,c=u.scores,f=l[0],d=c[0],h=1;h<l.length;h++)l[h].dispose(),c[h].dispose();return g=(m=Array).from,[4,d.data()];case 2:return p=g.apply(m,[N.sent()]),v=.5,x=vIe(f,p,a,v,o),y=s.getReshapedInputDimensions(0),b=s.inputSize,w=b/y.width,_=b/y.height,E=f.arraySync(),C=x.map(function(D){var A=[Math.max(0,E[D][0]),Math.min(1,E[D][2])].map(function(M){return M*_}),T=A[0],k=A[1],F=[Math.max(0,E[D][1]),Math.min(1,E[D][3])].map(function(M){return M*w}),O=F[0],I=F[1];return new ho(p[D],new UC(O,T,I-O,k-T),{height:s.getInputHeight(0),width:s.getInputWidth(0)})}),f.dispose(),d.dispose(),[2,C]}})})},e.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},e.prototype.extractParamsFromWeigthMap=function(n){return fIe(n)},e.prototype.extractParams=function(n){return lIe(n)},e}(ts);(function(t){mt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(cj);var _Ie=.4,EIe=[new $t(.738768,.874946),new $t(2.42204,2.65704),new $t(4.30971,7.04493),new $t(10.246,4.59428),new $t(12.6868,11.8741)],CIe=[new $t(1.603231,2.094468),new $t(6.041143,7.080126),new $t(2.882459,3.518061),new $t(4.266906,5.178857),new $t(9.041765,10.66308)],NIe=[117.001,114.697,97.404],SIe="tiny_yolov2_model",DIe="tiny_yolov2_separable_conv_model",Fm=function(t){return typeof t=="number"};function AIe(t){if(!t)throw new Error("invalid config: "+t);if(typeof t.withSeparableConvs!="boolean")throw new Error("config.withSeparableConvs has to be a boolean, have: "+t.withSeparableConvs);if(!Fm(t.iouThreshold)||t.iouThreshold<0||t.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+t.iouThreshold);if(!Array.isArray(t.classes)||!t.classes.length||!t.classes.every(function(e){return typeof e=="string"}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(t.classes));if(!Array.isArray(t.anchors)||!t.anchors.length||!t.anchors.map(function(e){return e||{}}).every(function(e){return Fm(e.x)&&Fm(e.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(t.anchors));if(t.meanRgb&&(!Array.isArray(t.meanRgb)||t.meanRgb.length!==3||!t.meanRgb.every(Fm)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(t.meanRgb))}function JC(t){return $e(function(){var e=kr(t,je(.10000000149011612));return St(yn(qn(t,e)),e)})}function os(t,e){return $e(function(){var n=Rl(t,[[0,0],[1,1],[1,1],[0,0]]);return n=sa(n,e.conv.filters,[1,1],"valid"),n=qn(n,e.bn.sub),n=kr(n,e.bn.truediv),n=St(n,e.conv.bias),JC(n)})}function ss(t,e){return $e(function(){var n=Rl(t,[[0,0],[1,1],[1,1],[0,0]]);return n=TC(n,e.depthwise_filter,e.pointwise_filter,[1,1],"valid"),n=St(n,e.bias),JC(n)})}function TIe(t,e){var n=Ny(t,e);function r(o,s){var u=Fn(t(o)),l=Fn(t(o));return e.push({paramPath:s+"/sub"},{paramPath:s+"/truediv"}),{sub:u,truediv:l}}function i(o,s,u){var l=n(o,s,3,u+"/conv"),c=r(s,u+"/bn");return{conv:l,bn:c}}var a=YC(t,e);return{extractConvParams:n,extractConvWithBatchNormParams:i,extractSeparableConvParams:a}}function MIe(t,e,n,r){var i=rs(t),a=i.extractWeights,o=i.getRemainingWeights,s=[],u=TIe(a,s),l=u.extractConvParams,c=u.extractConvWithBatchNormParams,f=u.extractSeparableConvParams,d;if(e.withSeparableConvs){var h=r[0],p=r[1],m=r[2],g=r[3],v=r[4],x=r[5],y=r[6],b=r[7],w=r[8],_=e.isFirstLayerConv2d?l(h,p,3,"conv0"):f(h,p,"conv0"),E=f(p,m,"conv1"),C=f(m,g,"conv2"),N=f(g,v,"conv3"),D=f(v,x,"conv4"),A=f(x,y,"conv5"),T=b?f(y,b,"conv6"):void 0,k=w?f(b,w,"conv7"):void 0,F=l(w||b||y,5*n,1,"conv8");d={conv0:_,conv1:E,conv2:C,conv3:N,conv4:D,conv5:A,conv6:T,conv7:k,conv8:F}}else{var h=r[0],p=r[1],m=r[2],g=r[3],v=r[4],x=r[5],y=r[6],b=r[7],w=r[8],_=c(h,p,"conv0"),E=c(p,m,"conv1"),C=c(m,g,"conv2"),N=c(g,v,"conv3"),D=c(v,x,"conv4"),A=c(x,y,"conv5"),T=c(y,b,"conv6"),k=c(b,w,"conv7"),F=l(w,5*n,1,"conv8");d={conv0:_,conv1:E,conv2:C,conv3:N,conv4:D,conv5:A,conv6:T,conv7:k,conv8:F}}if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{params:d,paramMappings:s}}function IIe(t,e){var n=_u(t,e);function r(s){var u=n(s+"/sub",1),l=n(s+"/truediv",1);return{sub:u,truediv:l}}function i(s){var u=n(s+"/filters",4),l=n(s+"/bias",1);return{filters:u,bias:l}}function a(s){var u=i(s+"/conv"),l=r(s+"/bn");return{conv:u,bn:l}}var o=XC(n);return{extractConvParams:i,extractConvWithBatchNormParams:a,extractSeparableConvParams:o}}function RIe(t,e){var n=[],r=IIe(t,n),i=r.extractConvParams,a=r.extractConvWithBatchNormParams,o=r.extractSeparableConvParams,s;if(e.withSeparableConvs){var u=e.filterSizes&&e.filterSizes.length||9;s={conv0:e.isFirstLayerConv2d?i("conv0"):o("conv0"),conv1:o("conv1"),conv2:o("conv2"),conv3:o("conv3"),conv4:o("conv4"),conv5:o("conv5"),conv6:u>7?o("conv6"):void 0,conv7:u>8?o("conv7"):void 0,conv8:i("conv8")}}else s={conv0:a("conv0"),conv1:a("conv1"),conv2:a("conv2"),conv3:a("conv3"),conv4:a("conv4"),conv5:a("conv5"),conv6:a("conv6"),conv7:a("conv7"),conv8:i("conv8")};return ns(t,n),{params:s,paramMappings:n}}var OR;(function(t){t[t.XS=224]="XS",t[t.SM=320]="SM",t[t.MD=416]="MD",t[t.LG=608]="LG"})(OR||(OR={}));var eN=function(){function t(e){var n=e===void 0?{}:e,r=n.inputSize,i=n.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=r||416,this._scoreThreshold=i||.5,typeof this._inputSize!="number"||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if(typeof this._scoreThreshold!="number"||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(t.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),t}(),fj=function(t){mt(e,t);function e(n){var r=t.call(this,"TinyYolov2")||this;return AIe(n),r._config=n,r}return Object.defineProperty(e.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),e.prototype.runTinyYolov2=function(n,r){var i=os(n,r.conv0);return i=Zn(i,[2,2],[2,2],"same"),i=os(i,r.conv1),i=Zn(i,[2,2],[2,2],"same"),i=os(i,r.conv2),i=Zn(i,[2,2],[2,2],"same"),i=os(i,r.conv3),i=Zn(i,[2,2],[2,2],"same"),i=os(i,r.conv4),i=Zn(i,[2,2],[2,2],"same"),i=os(i,r.conv5),i=Zn(i,[2,2],[1,1],"same"),i=os(i,r.conv6),i=os(i,r.conv7),Da(i,r.conv8,"valid",!1)},e.prototype.runMobilenet=function(n,r){var i=this.config.isFirstLayerConv2d?JC(Da(n,r.conv0,"valid",!1)):ss(n,r.conv0);return i=Zn(i,[2,2],[2,2],"same"),i=ss(i,r.conv1),i=Zn(i,[2,2],[2,2],"same"),i=ss(i,r.conv2),i=Zn(i,[2,2],[2,2],"same"),i=ss(i,r.conv3),i=Zn(i,[2,2],[2,2],"same"),i=ss(i,r.conv4),i=Zn(i,[2,2],[2,2],"same"),i=ss(i,r.conv5),i=Zn(i,[2,2],[1,1],"same"),i=r.conv6?ss(i,r.conv6):i,i=r.conv7?ss(i,r.conv7):i,Da(i,r.conv8,"valid",!1)},e.prototype.forwardInput=function(n,r){var i=this,a=this.params;if(!a)throw new Error("TinyYolov2 - load model before inference");return $e(function(){var o=n.toBatchTensor(r,!1).toFloat();return o=i.config.meanRgb?Tp(o,i.config.meanRgb):o,o=o.div(je(256)),i.config.withSeparableConvs?i.runMobilenet(o,a):i.runTinyYolov2(o,a)})},e.prototype.forward=function(n,r){return Ke(this,void 0,void 0,function(){var i;return Ye(this,function(a){switch(a.label){case 0:return i=this.forwardInput,[4,or(n)];case 1:return[4,i.apply(this,[a.sent(),r])];case 2:return[2,a.sent()]}})})},e.prototype.detect=function(n,r){return r===void 0&&(r={}),Ke(this,void 0,void 0,function(){var i,a,o,s,u,l,c,f,d,h,p,m,g,v,x=this;return Ye(this,function(y){switch(y.label){case 0:return i=new eN(r),a=i.inputSize,o=i.scoreThreshold,[4,or(n)];case 1:return s=y.sent(),[4,this.forwardInput(s,a)];case 2:return u=y.sent(),l=$e(function(){return Wn(u)[0].expandDims()}),c={width:s.getInputWidth(0),height:s.getInputHeight(0)},[4,this.extractBoxes(l,s.getReshapedInputDimensions(0),o)];case 3:return f=y.sent(),u.dispose(),l.dispose(),d=f.map(function(b){return b.box}),h=f.map(function(b){return b.score}),p=f.map(function(b){return b.classScore}),m=f.map(function(b){return x.config.classes[b.label]}),g=Wh(d.map(function(b){return b.rescale(a)}),h,this.config.iouThreshold,!0),v=g.map(function(b){return new B9(h[b],p[b],m[b],d[b],c)}),[2,v]}})})},e.prototype.getDefaultModelName=function(){return""},e.prototype.extractParamsFromWeigthMap=function(n){return RIe(n,this.config)},e.prototype.extractParams=function(n){var r=this.config.filterSizes||e.DEFAULT_FILTER_SIZES,i=r?r.length:void 0;if(i!==7&&i!==8&&i!==9)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+i+" filterSizes in config");return MIe(n,this.config,this.boxEncodingSize,r)},e.prototype.extractBoxes=function(n,r,i){return Ke(this,void 0,void 0,function(){var a,o,s,u,l,c,f,d,h,p,m,g,v,x,y,b,w,_,E,C,N,D,A,T,k,F,O,I,M,B=this;return Ye(this,function(R){switch(R.label){case 0:return a=r.width,o=r.height,s=Math.max(a,o),u=s/a,l=s/o,c=n.shape[1],f=this.config.anchors.length,d=$e(function(){var j=n.reshape([c,c,f,B.boxEncodingSize]),K=j.slice([0,0,0,0],[c,c,f,4]),V=j.slice([0,0,0,4],[c,c,f,1]),L=B.withClassScores?Jo(j.slice([0,0,0,5],[c,c,f,B.config.classes.length]),3):je(0);return[K,V,L]}),h=d[0],p=d[1],m=d[2],g=[],[4,p.array()];case 1:return v=R.sent(),[4,h.array()];case 2:x=R.sent(),y=0,R.label=3;case 3:if(!(y<c))return[3,12];b=0,R.label=4;case 4:if(!(b<c))return[3,11];w=0,R.label=5;case 5:return w<f?(_=cx(v[y][b][w][0]),!i||_>i?(E=(b+cx(x[y][b][w][0]))/c*u,C=(y+cx(x[y][b][w][1]))/c*l,N=Math.exp(x[y][b][w][2])*this.config.anchors[w].x/c*u,D=Math.exp(x[y][b][w][3])*this.config.anchors[w].y/c*l,A=E-N/2,T=C-D/2,k={row:y,col:b,anchor:w},this.withClassScores?[4,this.extractPredictedClass(m,k)]:[3,7]):[3,9]):[3,10];case 6:return M=R.sent(),[3,8];case 7:M={classScore:1,label:0},R.label=8;case 8:F=M,O=F.classScore,I=F.label,g.push(Tr({box:new Ey(A,T,A+N,T+D),score:_,classScore:_*O,label:I},k)),R.label=9;case 9:return w++,[3,5];case 10:return b++,[3,4];case 11:return y++,[3,3];case 12:return h.dispose(),p.dispose(),m.dispose(),[2,g]}})})},e.prototype.extractPredictedClass=function(n,r){return Ke(this,void 0,void 0,function(){var i,a,o,s;return Ye(this,function(u){switch(u.label){case 0:return i=r.row,a=r.col,o=r.anchor,[4,n.array()];case 1:return s=u.sent(),[2,Array(this.config.classes.length).fill(0).map(function(l,c){return s[i][a][o][c]}).map(function(l,c){return{classScore:l,label:c}}).reduce(function(l,c){return l.classScore>c.classScore?l:c})]}})})},e.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],e}(ts),kIe=function(t){mt(e,t);function e(n){n===void 0&&(n=!0);var r=this,i=Object.assign({},{withSeparableConvs:n,iouThreshold:_Ie,classes:["face"]},n?{anchors:CIe,meanRgb:NIe}:{anchors:EIe,withClassScores:!0});return r=t.call(this,i)||this,r}return Object.defineProperty(e.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),e.prototype.locateFaces=function(n,r){return Ke(this,void 0,void 0,function(){var i;return Ye(this,function(a){switch(a.label){case 0:return[4,this.detect(n,r)];case 1:return i=a.sent(),[2,i.map(function(o){return new ho(o.score,o.relativeBox,{width:o.imageWidth,height:o.imageHeight})})]}})})},e.prototype.getDefaultModelName=function(){return this.withSeparableConvs?DIe:SIe},e.prototype.extractParamsFromWeigthMap=function(n){return t.prototype.extractParamsFromWeigthMap.call(this,n)},e}(fj),dj=function(t){mt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n._name="TinyFaceDetectorOptions",n}return e}(eN),Mp=function(){function t(){}return t.prototype.then=function(e){return Ke(this,void 0,void 0,function(){var n;return Ye(this,function(r){switch(r.label){case 0:return n=e,[4,this.run()];case 1:return[2,n.apply(void 0,[r.sent()])]}})})},t.prototype.run=function(){return Ke(this,void 0,void 0,function(){return Ye(this,function(e){throw new Error("ComposableTask - run is not implemented")})})},t}();function Dy(t,e,n,r,i){return i===void 0&&(i=function(a){var o=a.alignedRect;return o}),Ke(this,void 0,void 0,function(){var a,o,s,u,l;return Ye(this,function(c){switch(c.label){case 0:return a=t.map(function(f){return zMe(f)?i(f):f.detection}),s=r,s?[3,5]:e instanceof vn?[4,GC(e,a)]:[3,2];case 1:return u=c.sent(),[3,4];case 2:return[4,HC(e,a)];case 3:u=c.sent(),c.label=4;case 4:s=u,c.label=5;case 5:return o=s,[4,n(o)];case 6:return l=c.sent(),o.forEach(function(f){return f instanceof vn&&f.dispose()}),[2,l]}})})}function tN(t,e,n,r,i){return Ke(this,void 0,void 0,function(){var a=this;return Ye(this,function(o){return[2,Dy([t],e,function(s){return Ke(a,void 0,void 0,function(){return Ye(this,function(u){return[2,n(s[0])]})})},r,i)]})})}function FIe(t){return $e(function(){return Ii(Wn(t,3).reverse(),3)})}var Pm=2,n0=12;function PIe(t,e){var n=Ny(t,e),r=KC(t,e);function i(l,c){var f=Fn(t(l));return e.push({paramPath:c}),f}function a(l,c,f){f===void 0&&(f=!1);var d=n(l[0],l[1],3,c+"/conv1"),h=i(l[1],c+"/prelu1_alpha"),p=n(l[1],l[2],3,c+"/conv2"),m=i(l[2],c+"/prelu2_alpha"),g=n(l[2],l[3],f?2:3,c+"/conv3"),v=i(l[3],c+"/prelu3_alpha");return{conv1:d,prelu1_alpha:h,conv2:p,prelu2_alpha:m,conv3:g,prelu3_alpha:v}}function o(){var l=a([3,10,16,32],"pnet"),c=n(32,2,1,"pnet/conv4_1"),f=n(32,4,1,"pnet/conv4_2");return Tr(Tr({},l),{conv4_1:c,conv4_2:f})}function s(){var l=a([3,28,48,64],"rnet",!0),c=r(576,128,"rnet/fc1"),f=i(128,"rnet/prelu4_alpha"),d=r(128,2,"rnet/fc2_1"),h=r(128,4,"rnet/fc2_2");return Tr(Tr({},l),{fc1:c,prelu4_alpha:f,fc2_1:d,fc2_2:h})}function u(){var l=a([3,32,64,64],"onet"),c=n(64,128,2,"onet/conv4"),f=i(128,"onet/prelu4_alpha"),d=r(1152,256,"onet/fc1"),h=i(256,"onet/prelu5_alpha"),p=r(256,2,"onet/fc2_1"),m=r(256,4,"onet/fc2_2"),g=r(256,10,"onet/fc2_3");return Tr(Tr({},l),{conv4:c,prelu4_alpha:f,fc1:d,prelu5_alpha:h,fc2_1:p,fc2_2:m,fc2_3:g})}return{extractPNetParams:o,extractRNetParams:s,extractONetParams:u}}function OIe(t){var e=rs(t),n=e.extractWeights,r=e.getRemainingWeights,i=[],a=PIe(n,i),o=a.extractPNetParams,s=a.extractRNetParams,u=a.extractONetParams,l=o(),c=s(),f=u();if(r().length!==0)throw new Error("weights remaing after extract: "+r().length);return{params:{pnet:l,rnet:c,onet:f},paramMappings:i}}function BIe(t,e){var n=_u(t,e);function r(c){var f=n(c+"/weights",4,c+"/filters"),d=n(c+"/bias",1);return{filters:f,bias:d}}function i(c){var f=n(c+"/weights",2),d=n(c+"/bias",1);return{weights:f,bias:d}}function a(c){return n(c,1)}function o(c){var f=r(c+"/conv1"),d=a(c+"/prelu1_alpha"),h=r(c+"/conv2"),p=a(c+"/prelu2_alpha"),m=r(c+"/conv3"),g=a(c+"/prelu3_alpha");return{conv1:f,prelu1_alpha:d,conv2:h,prelu2_alpha:p,conv3:m,prelu3_alpha:g}}function s(){var c=o("pnet"),f=r("pnet/conv4_1"),d=r("pnet/conv4_2");return Tr(Tr({},c),{conv4_1:f,conv4_2:d})}function u(){var c=o("rnet"),f=i("rnet/fc1"),d=a("rnet/prelu4_alpha"),h=i("rnet/fc2_1"),p=i("rnet/fc2_2");return Tr(Tr({},c),{fc1:f,prelu4_alpha:d,fc2_1:h,fc2_2:p})}function l(){var c=o("onet"),f=r("onet/conv4"),d=a("onet/prelu4_alpha"),h=i("onet/fc1"),p=a("onet/prelu5_alpha"),m=i("onet/fc2_1"),g=i("onet/fc2_2"),v=i("onet/fc2_3");return Tr(Tr({},c),{conv4:f,prelu4_alpha:d,fc1:h,prelu5_alpha:p,fc2_1:m,fc2_2:g,fc2_3:v})}return{extractPNetParams:s,extractRNetParams:u,extractONetParams:l}}function LIe(t){var e=[],n=BIe(t,e),r=n.extractPNetParams,i=n.extractRNetParams,a=n.extractONetParams,o=r(),s=i(),u=a();return ns(t,e),{params:{pnet:o,rnet:s,onet:u},paramMappings:e}}function Ww(t,e){var n=e[0],r=e[1];return{height:Math.floor(n*t),width:Math.floor(r*t)}}function jIe(t,e,n){for(var r=n[0],i=n[1],a=n0/t,o=[],s=Math.min(r,i)*a,u=0;s>=12;)o.push(a*Math.pow(e,u)),s=s*e,u+=1;return o}var nN=function(t){mt(e,t);function e(n,r,i,a){return t.call(this,{left:n,top:r,right:i,bottom:a},!0)||this}return e}(eu);function hj(t){return $e(function(){return kr(qn(t,je(127.5)),je(.0078125))})}function $c(t,e){return $e(function(){return St(yn(t),kr(e,Yg(yn(Yg(t)))))})}function rN(t,e,n){return n===void 0&&(n=!1),$e(function(){var r=Da(t,e.conv1,"valid");return r=$c(r,e.prelu1_alpha),r=Zn(r,n?[2,2]:[3,3],[2,2],"same"),r=Da(r,e.conv2,"valid"),r=$c(r,e.prelu2_alpha),r=n?r:Zn(r,[3,3],[2,2],"valid"),r=Da(r,e.conv3,"valid"),r=$c(r,e.prelu3_alpha),r})}function $Ie(t,e){return $e(function(){var n=rN(t,e,!0),r=Da(n,e.conv4_1,"valid"),i=Gi(xy(r,3),3),a=Jo(qn(r,i),3),o=Da(n,e.conv4_2,"valid");return{prob:a,regions:o}})}function zIe(t,e){return $e(function(){var n=Ww(e,t.shape.slice(1)),r=n.height,i=n.width,a=FC.resizeBilinear(t,[r,i]),o=hj(a);return Js(o,[0,2,1,3])})}function UIe(t,e,n,r){for(var i=[],a=t.arraySync(),o=0;o<t.shape[0];o++)for(var s=0;s<t.shape[1];s++)a[o][s]>=r&&i.push(new $t(s,o));var u=i.map(function(l){var c=new Ey(Math.round((l.y*Pm+1)/n),Math.round((l.x*Pm+1)/n),Math.round((l.y*Pm+n0)/n),Math.round((l.x*Pm+n0)/n)),f=a[l.y][l.x],d=e.arraySync(),h=new nN(d[l.y][l.x][0],d[l.y][l.x][1],d[l.y][l.x][2],d[l.y][l.x][3]);return{cell:c,score:f,region:h}});return u}function WIe(t,e,n,r,i){i.stage1=[];var a=e.map(function(d){return $e(function(){var h={scale:d},p=zIe(t,d),m=Date.now(),g=$Ie(p,r),v=g.prob,x=g.regions;h.pnet=Date.now()-m;var y=Wn(Wn(v,3)[1])[0],b=Wn(x)[0];return{scoresTensor:y,regionsTensor:b,scale:d,statsForScale:h}})}),o=a.map(function(d){var h=d.scoresTensor,p=d.regionsTensor,m=d.scale,g=d.statsForScale,v=UIe(h,p,m,n);if(h.dispose(),p.dispose(),!v.length)return i.stage1.push(g),[];var x=Date.now(),y=Wh(v.map(function(b){return b.cell}),v.map(function(b){return b.score}),.5);return g.nms=Date.now()-x,g.numBoxes=y.length,i.stage1.push(g),y.map(function(b){return v[b]})}),s=o.reduce(function(d,h){return d.concat(h)},[]),u=[],l=[];if(s.length>0){var c=Date.now(),f=Wh(s.map(function(d){return d.cell}),s.map(function(d){return d.score}),.7);i.stage1_nms=Date.now()-c,l=f.map(function(d){return s[d].score}),u=f.map(function(d){return s[d]}).map(function(d){var h=d.cell,p=d.region;return new Ey(h.left+p.left*h.width,h.top+p.top*h.height,h.right+p.right*h.width,h.bottom+p.bottom*h.height).toSquare().round()})}return{boxes:u,scores:l}}function pj(t,e,n){var r=n.width,i=n.height;return Ke(this,void 0,void 0,function(){var a,o,s,u=this;return Ye(this,function(l){switch(l.label){case 0:return a=pl(t),[4,Promise.all(e.map(function(c){return Ke(u,void 0,void 0,function(){var f,d,h,p,m,g,v,x;return Ye(this,function(y){return f=c.padAtBorders(t.height,t.width),d=f.y,h=f.ey,p=f.x,m=f.ex,g=p-1,v=d-1,x=a.getImageData(g,v,m-g,h-v),[2,Br.isNodejs()?qC(x):createImageBitmap(x)]})})}))];case 1:return o=l.sent(),s=[],o.forEach(function(c){var f=Cy({width:r,height:i}),d=pl(f);d.drawImage(c,0,0,r,i);for(var h=d.getImageData(0,0,r,i).data,p=[],m=0;m<h.length;m+=4)p.push(h[m+2]),p.push(h[m+1]),p.push(h[m]);s.push(p)}),[2,s.map(function(c){var f=$e(function(){var d=Js(ri(c,[1,r,i,3]),[0,2,1,3]).toFloat();return hj(d)});return f})]}})})}function VIe(t,e){return $e(function(){var n=rN(t,e),r=wa(n,[n.shape[0],e.fc1.weights.shape[0]]),i=Ga(r,e.fc1),a=$c(i,e.prelu4_alpha),o=Ga(a,e.fc2_1),s=Gi(xy(o,1),1),u=Jo(qn(o,s),1),l=Ga(a,e.fc2_2),c=Wn(u,1)[1];return{scores:c,regions:l}})}function qIe(t,e,n,r,i){return Ke(this,void 0,void 0,function(){var a,o,s,u,l,c,f,d,h,p,m,g,v,x;return Ye(this,function(y){switch(y.label){case 0:return a=Date.now(),[4,pj(t,e,{width:24,height:24})];case 1:return o=y.sent(),i.stage2_extractImagePatches=Date.now()-a,a=Date.now(),s=o.map(function(b){var w=VIe(b,r);return b.dispose(),w}),i.stage2_rnet=Date.now()-a,u=s.length>1?Un(s.map(function(b){return b.scores})):s[0].scores,f=(c=Array).from,[4,u.data()];case 2:return l=f.apply(c,[y.sent()]),u.dispose(),d=l.map(function(b,w){return{score:b,idx:w}}).filter(function(b){return b.score>n}).map(function(b){var w=b.idx;return w}),h=d.map(function(b){return e[b]}),p=d.map(function(b){return l[b]}),m=[],g=[],h.length>0&&(a=Date.now(),v=Wh(h,p,.7),i.stage2_nms=Date.now()-a,x=v.map(function(b){var w=s[d[b]].regions.arraySync();return new nN(w[0][0],w[0][1],w[0][2],w[0][3])}),g=v.map(function(b){return p[b]}),m=v.map(function(b,w){return h[b].calibrate(x[w])})),s.forEach(function(b){b.regions.dispose(),b.scores.dispose()}),[2,{boxes:m,scores:g}]}})})}function HIe(t,e){return $e(function(){var n=rN(t,e);n=Zn(n,[2,2],[2,2],"same"),n=Da(n,e.conv4,"valid"),n=$c(n,e.prelu4_alpha);var r=wa(n,[n.shape[0],e.fc1.weights.shape[0]]),i=Ga(r,e.fc1),a=$c(i,e.prelu5_alpha),o=Ga(a,e.fc2_1),s=Gi(xy(o,1),1),u=Jo(qn(o,s),1),l=Ga(a,e.fc2_2),c=Ga(a,e.fc2_3),f=Wn(u,1)[1];return{scores:f,regions:l,points:c}})}function GIe(t,e,n,r,i){return Ke(this,void 0,void 0,function(){var a,o,s,u,l,c,f,d,h,p,m,g,v,x,y;return Ye(this,function(b){switch(b.label){case 0:return a=Date.now(),[4,pj(t,e,{width:48,height:48})];case 1:return o=b.sent(),i.stage3_extractImagePatches=Date.now()-a,a=Date.now(),s=o.map(function(w){var _=HIe(w,r);return w.dispose(),_}),i.stage3_onet=Date.now()-a,u=s.length>1?Un(s.map(function(w){return w.scores})):s[0].scores,f=(c=Array).from,[4,u.data()];case 2:return l=f.apply(c,[b.sent()]),u.dispose(),d=l.map(function(w,_){return{score:w,idx:_}}).filter(function(w){return w.score>n}).map(function(w){var _=w.idx;return _}),h=d.map(function(w){var _=s[w].regions.arraySync();return new nN(_[0][0],_[0][1],_[0][2],_[0][3])}),p=d.map(function(w,_){return e[w].calibrate(h[_])}),m=d.map(function(w){return l[w]}),g=[],v=[],x=[],p.length>0&&(a=Date.now(),y=Wh(p,m,.7,!1),i.stage3_nms=Date.now()-a,g=y.map(function(w){return p[w]}),v=y.map(function(w){return m[w]}),x=y.map(function(w,_){return Array(5).fill(0).map(function(E,C){var N=s[w].points.arraySync();return new $t(N[0][C]*(g[_].width+1)+g[_].left,N[0][C+5]*(g[_].height+1)+g[_].top)})})),s.forEach(function(w){w.regions.dispose(),w.scores.dispose(),w.points.dispose()}),[2,{boxes:g,scores:v,points:x}]}})})}var KIe=function(t){mt(e,t);function e(){return t.call(this,"Mtcnn")||this}return e.prototype.load=function(n){return Ke(this,void 0,void 0,function(){return Ye(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,t.prototype.load.call(this,n)]})})},e.prototype.loadFromDisk=function(n){return Ke(this,void 0,void 0,function(){return Ye(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,t.prototype.loadFromDisk.call(this,n)]})})},e.prototype.forwardInput=function(n,r){return r===void 0&&(r={}),Ke(this,void 0,void 0,function(){var i,a,o,s,u,l,c,f,d,h,p,m,g,v,x,y,b,w,_,E,C;return Ye(this,function(N){switch(N.label){case 0:if(i=this.params,!i)throw new Error("Mtcnn - load model before inference");if(a=n.canvases[0],!a)throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return o={},s=Date.now(),u=$e(function(){return FIe(Gi($C.fromPixels(a)).toFloat())}),l=function(D){return u.dispose(),o.total=Date.now()-s,D},c=u.shape.slice(1),f=c[0],d=c[1],h=new lj(r),p=h.minFaceSize,m=h.scaleFactor,g=h.maxNumScales,v=h.scoreThresholds,x=h.scaleSteps,y=(x||jIe(p,m,[f,d])).filter(function(D){var A=Ww(D,[f,d]);return Math.min(A.width,A.height)>n0}).slice(0,g),o.scales=y,o.pyramid=y.map(function(D){return Ww(D,[f,d])}),b=Date.now(),[4,WIe(u,y,v[0],i.pnet,o)];case 1:return w=N.sent(),o.total_stage1=Date.now()-b,w.boxes.length?(o.stage2_numInputBoxes=w.boxes.length,b=Date.now(),[4,qIe(a,w.boxes,v[1],i.rnet,o)]):[2,l({results:[],stats:o})];case 2:return _=N.sent(),o.total_stage2=Date.now()-b,_.boxes.length?(o.stage3_numInputBoxes=_.boxes.length,b=Date.now(),[4,GIe(a,_.boxes,v[2],i.onet,o)]):[2,l({results:[],stats:o})];case 3:return E=N.sent(),o.total_stage3=Date.now()-b,C=E.boxes.map(function(D,A){return QC(WC({},new ho(E.scores[A],new UC(D.left/d,D.top/f,D.width/d,D.height/f),{height:f,width:d})),new CMe(E.points[A].map(function(T){return T.sub(new $t(D.left,D.top)).div(new $t(D.width,D.height))}),{width:D.width,height:D.height}))}),[2,l({results:C,stats:o})]}})})},e.prototype.forward=function(n,r){return r===void 0&&(r={}),Ke(this,void 0,void 0,function(){var i;return Ye(this,function(a){switch(a.label){case 0:return i=this.forwardInput,[4,or(n)];case 1:return[4,i.apply(this,[a.sent(),r])];case 2:return[2,a.sent().results]}})})},e.prototype.forwardWithStats=function(n,r){return r===void 0&&(r={}),Ke(this,void 0,void 0,function(){var i;return Ye(this,function(a){switch(a.label){case 0:return i=this.forwardInput,[4,or(n)];case 1:return[2,i.apply(this,[a.sent(),r])]}})})},e.prototype.getDefaultModelName=function(){return"mtcnn_model"},e.prototype.extractParamsFromWeigthMap=function(n){return LIe(n)},e.prototype.extractParams=function(n){return OIe(n)},e}(ts),YIe=.4,XIe=[new $t(1.603231,2.094468),new $t(6.041143,7.080126),new $t(2.882459,3.518061),new $t(4.266906,5.178857),new $t(9.041765,10.66308)],QIe=[117.001,114.697,97.404],ZIe=function(t){mt(e,t);function e(){var n=this,r={withSeparableConvs:!0,iouThreshold:YIe,classes:["face"],anchors:XIe,meanRgb:QIe,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return n=t.call(this,r)||this,n}return Object.defineProperty(e.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),e.prototype.locateFaces=function(n,r){return Ke(this,void 0,void 0,function(){var i;return Ye(this,function(a){switch(a.label){case 0:return[4,this.detect(n,r)];case 1:return i=a.sent(),[2,i.map(function(o){return new ho(o.score,o.relativeBox,{width:o.imageWidth,height:o.imageHeight})})]}})})},e.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},e.prototype.extractParamsFromWeigthMap=function(n){return t.prototype.extractParamsFromWeigthMap.call(this,n)},e}(fj),ui={ssdMobilenetv1:new cj,tinyFaceDetector:new ZIe,tinyYolov2:new kIe,mtcnn:new KIe,faceLandmark68Net:new rj,faceLandmark68TinyNet:new eIe,faceRecognitionNet:new sIe,faceExpressionNet:new $Me,ageGenderNet:new XMe},mj=function(t){mt(e,t);function e(n,r,i){var a=t.call(this)||this;return a.parentTask=n,a.input=r,a.extractedFaces=i,a}return e}(Mp),iN=function(t){mt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return Ke(this,void 0,void 0,function(){var n,r,i=this;return Ye(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return n=a.sent(),[4,Dy(n,this.input,function(o){return Ke(i,void 0,void 0,function(){return Ye(this,function(s){switch(s.label){case 0:return[4,Promise.all(o.map(function(u){return ui.faceExpressionNet.predictExpressions(u)}))];case 1:return[2,s.sent()]}})})},this.extractedFaces)];case 2:return r=a.sent(),[2,n.map(function(o,s){return ej(o,r[s])})]}})})},e.prototype.withAgeAndGender=function(){return new uN(this,this.input)},e}(mj),aN=function(t){mt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return Ke(this,void 0,void 0,function(){var n,r;return Ye(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return n=i.sent(),n?[4,tN(n,this.input,function(a){return ui.faceExpressionNet.predictExpressions(a)},this.extractedFaces)]:[2];case 2:return r=i.sent(),[2,ej(n,r)]}})})},e.prototype.withAgeAndGender=function(){return new lN(this,this.input)},e}(mj),oN=function(t){mt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.withAgeAndGender=function(){return new cN(this,this.input)},e.prototype.withFaceDescriptors=function(){return new dN(this,this.input)},e}(iN),sN=function(t){mt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.withAgeAndGender=function(){return new fN(this,this.input)},e.prototype.withFaceDescriptor=function(){return new hN(this,this.input)},e}(aN),vj=function(t){mt(e,t);function e(n,r,i){var a=t.call(this)||this;return a.parentTask=n,a.input=r,a.extractedFaces=i,a}return e}(Mp),uN=function(t){mt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return Ke(this,void 0,void 0,function(){var n,r,i=this;return Ye(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return n=a.sent(),[4,Dy(n,this.input,function(o){return Ke(i,void 0,void 0,function(){return Ye(this,function(s){switch(s.label){case 0:return[4,Promise.all(o.map(function(u){return ui.ageGenderNet.predictAgeAndGender(u)}))];case 1:return[2,s.sent()]}})})},this.extractedFaces)];case 2:return r=a.sent(),[2,n.map(function(o,s){var u=r[s],l=u.age,c=u.gender,f=u.genderProbability;return sj(uj(o,c,f),l)})]}})})},e.prototype.withFaceExpressions=function(){return new iN(this,this.input)},e}(vj),lN=function(t){mt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return Ke(this,void 0,void 0,function(){var n,r,i,a,o;return Ye(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return n=s.sent(),n?[4,tN(n,this.input,function(u){return ui.ageGenderNet.predictAgeAndGender(u)},this.extractedFaces)]:[2];case 2:return r=s.sent(),i=r.age,a=r.gender,o=r.genderProbability,[2,sj(uj(n,a,o),i)]}})})},e.prototype.withFaceExpressions=function(){return new aN(this,this.input)},e}(vj),cN=function(t){mt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.withFaceExpressions=function(){return new oN(this,this.input)},e.prototype.withFaceDescriptors=function(){return new dN(this,this.input)},e}(uN),fN=function(t){mt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.withFaceExpressions=function(){return new sN(this,this.input)},e.prototype.withFaceDescriptor=function(){return new hN(this,this.input)},e}(lN),gj=function(t){mt(e,t);function e(n,r){var i=t.call(this)||this;return i.parentTask=n,i.input=r,i}return e}(Mp),dN=function(t){mt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return Ke(this,void 0,void 0,function(){var n,r;return Ye(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return n=i.sent(),[4,Dy(n,this.input,function(a){return Promise.all(a.map(function(o){return ui.faceRecognitionNet.computeFaceDescriptor(o)}))},null,function(a){return a.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return r=i.sent(),[2,r.map(function(a,o){return oj(n[o],a)})]}})})},e.prototype.withFaceExpressions=function(){return new oN(this,this.input)},e.prototype.withAgeAndGender=function(){return new cN(this,this.input)},e}(gj),hN=function(t){mt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return Ke(this,void 0,void 0,function(){var n,r;return Ye(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return n=i.sent(),n?[4,tN(n,this.input,function(a){return ui.faceRecognitionNet.computeFaceDescriptor(a)},null,function(a){return a.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return r=i.sent(),[2,oj(n,r)]}})})},e.prototype.withFaceExpressions=function(){return new sN(this,this.input)},e.prototype.withAgeAndGender=function(){return new fN(this,this.input)},e}(gj),yj=function(t){mt(e,t);function e(n,r,i){var a=t.call(this)||this;return a.parentTask=n,a.input=r,a.useTinyLandmarkNet=i,a}return Object.defineProperty(e.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?ui.faceLandmark68TinyNet:ui.faceLandmark68Net},enumerable:!0,configurable:!0}),e}(Mp),JIe=function(t){mt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return Ke(this,void 0,void 0,function(){var n,r,i,a,o,s=this;return Ye(this,function(u){switch(u.label){case 0:return[4,this.parentTask];case 1:return n=u.sent(),r=n.map(function(l){return l.detection}),this.input instanceof vn?[4,GC(this.input,r)]:[3,3];case 2:return a=u.sent(),[3,5];case 3:return[4,HC(this.input,r)];case 4:a=u.sent(),u.label=5;case 5:return i=a,[4,Promise.all(i.map(function(l){return s.landmarkNet.detectLandmarks(l)}))];case 6:return o=u.sent(),i.forEach(function(l){return l instanceof vn&&l.dispose()}),[2,n.map(function(l,c){return QC(l,o[c])})]}})})},e.prototype.withFaceExpressions=function(){return new oN(this,this.input)},e.prototype.withAgeAndGender=function(){return new cN(this,this.input)},e.prototype.withFaceDescriptors=function(){return new dN(this,this.input)},e}(yj),e4e=function(t){mt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return Ke(this,void 0,void 0,function(){var n,r,i,a,o;return Ye(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return n=s.sent(),n?(r=n.detection,this.input instanceof vn?[4,GC(this.input,[r])]:[3,3]):[2];case 2:return a=s.sent(),[3,5];case 3:return[4,HC(this.input,[r])];case 4:a=s.sent(),s.label=5;case 5:return i=a,[4,this.landmarkNet.detectLandmarks(i[0])];case 6:return o=s.sent(),i.forEach(function(u){return u instanceof vn&&u.dispose()}),[2,QC(n,o)]}})})},e.prototype.withFaceExpressions=function(){return new sN(this,this.input)},e.prototype.withAgeAndGender=function(){return new fN(this,this.input)},e.prototype.withFaceDescriptor=function(){return new hN(this,this.input)},e}(yj),xj=function(t){mt(e,t);function e(n,r){r===void 0&&(r=new Sy);var i=t.call(this)||this;return i.input=n,i.options=r,i}return e}(Mp),bj=function(t){mt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return Ke(this,void 0,void 0,function(){var n,r,i,a;return Ye(this,function(o){switch(o.label){case 0:return n=this,r=n.input,i=n.options,i instanceof lj?[4,ui.mtcnn.forward(r,i)]:[3,2];case 1:return[2,o.sent().map(function(s){return s.detection})];case 2:if(a=i instanceof dj?function(s){return ui.tinyFaceDetector.locateFaces(s,i)}:i instanceof Sy?function(s){return ui.ssdMobilenetv1.locateFaces(s,i)}:i instanceof eN?function(s){return ui.tinyYolov2.locateFaces(s,i)}:null,!a)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,a(r)]}})})},e.prototype.runAndExtendWithFaceDetections=function(){var n=this;return new Promise(function(r){return Ke(n,void 0,void 0,function(){var i;return Ye(this,function(a){switch(a.label){case 0:return[4,this.run()];case 1:return i=a.sent(),[2,r(i.map(function(o){return WC({},o)}))]}})})})},e.prototype.withFaceLandmarks=function(n){return n===void 0&&(n=!1),new JIe(this.runAndExtendWithFaceDetections(),this.input,n)},e.prototype.withFaceExpressions=function(){return new iN(this.runAndExtendWithFaceDetections(),this.input)},e.prototype.withAgeAndGender=function(){return new uN(this.runAndExtendWithFaceDetections(),this.input)},e}(xj);(function(t){mt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return Ke(this,void 0,void 0,function(){var n,r;return Ye(this,function(i){switch(i.label){case 0:return[4,new bj(this.input,this.options)];case 1:return n=i.sent(),r=n[0],n.forEach(function(a){a.score>r.score&&(r=a)}),[2,r]}})})},e.prototype.runAndExtendWithFaceDetection=function(){var n=this;return new Promise(function(r){return Ke(n,void 0,void 0,function(){var i;return Ye(this,function(a){switch(a.label){case 0:return[4,this.run()];case 1:return i=a.sent(),[2,r(i?WC({},i):void 0)]}})})})},e.prototype.withFaceLandmarks=function(n){return n===void 0&&(n=!1),new e4e(this.runAndExtendWithFaceDetection(),this.input,n)},e.prototype.withFaceExpressions=function(){return new aN(this.runAndExtendWithFaceDetection(),this.input)},e.prototype.withAgeAndGender=function(){return new lN(this.runAndExtendWithFaceDetection(),this.input)},e})(xj);function t4e(t,e){return e===void 0&&(e=new Sy),new bj(t,e)}function n4e(t,e){if(t.length!==e.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var n=Array.from(t),r=Array.from(e);return Math.sqrt(n.map(function(i,a){return i-r[a]}).reduce(function(i,a){return i+Math.pow(a,2)},0))}(function(){function t(e,n){n===void 0&&(n=.6),this._distanceThreshold=n;var r=Array.isArray(e)?e:[e];if(!r.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var i=1,a=function(){return"person "+i++};this._labeledDescriptors=r.map(function(o){if(o instanceof Im)return o;if(o instanceof Float32Array)return new Im(a(),[o]);if(o.descriptor&&o.descriptor instanceof Float32Array)return new Im(a(),[o.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}return Object.defineProperty(t.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),t.prototype.computeMeanDistance=function(e,n){return n.map(function(r){return n4e(r,e)}).reduce(function(r,i){return r+i},0)/(n.length||1)},t.prototype.matchDescriptor=function(e){var n=this;return this.labeledDescriptors.map(function(r){var i=r.descriptors,a=r.label;return new IR(a,n.computeMeanDistance(e,i))}).reduce(function(r,i){return r.distance<i.distance?r:i})},t.prototype.findBestMatch=function(e){var n=this.matchDescriptor(e);return n.distance<this.distanceThreshold?n:new IR("unknown",n.distance)},t.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(e){return e.toJSON()})}},t.fromJSON=function(e){var n=e.labeledDescriptors.map(function(r){return Im.fromJSON(r)});return new t(n,e.distanceThreshold)},t})();const wj=async()=>{try{await fetch("/models",{method:"HEAD"}).catch(()=>{console.log("Creating models directory...")});const t="https://raw.githubusercontent.com/justadudewhohacks/face-api.js/master/weights";return await Promise.all([ui.tinyFaceDetector.loadFromUri(t),ui.faceExpressionNet.loadFromUri(t)]),!0}catch(t){return console.error("Error loading models:",t),!1}},r4e=t=>{const e={happy:"happy",sad:"sad",angry:"angry",fearful:"fearful",disgusted:"disgusted",surprised:"surprised",neutral:"neutral"},n=Object.entries(t).reduce((a,[o,s])=>{const u=e[o];return u&&(a[u]=s),a},{});let r="neutral",i=0;return Object.entries(n).forEach(([a,o])=>{o>i&&(i=o,r=a)}),{dominantEmotion:r,emotions:n,timestamp:Date.now()}},_j=async t=>{if(!t||t.paused||t.ended)return null;try{const e=await t4e(t,new dj({scoreThreshold:.3})).withFaceExpressions();if(!e||e.length===0)return null;const n=e[0].expressions;return r4e(n)}catch(e){return console.error("Error detecting emotions:",e),null}},Kd=t=>{const e={happy:"#FFD700",sad:"#6495ED",angry:"#DC143C",surprised:"#9370DB",disgusted:"#32CD32",fearful:"#FF8C00",neutral:"#708090"};return e[t]||e.neutral},r0=t=>{const e={happy:"",sad:"",angry:"",surprised:"",disgusted:"",fearful:"",neutral:""};return e[t]||e.neutral},i4e=t=>{const e={happy:"You seem to be in a good mood!",sad:"You look a bit down. Hope things get better!",angry:"You appear to be upset about something.",surprised:"Something seems to have caught you off guard!",disgusted:"You don't seem pleased with what you're seeing.",fearful:"You seem concerned or worried about something.",neutral:"Your expression is calm and neutral."};return e[t]||e.neutral},a4e=({onWebcamReady:t,isDetecting:e,onToggleDetection:n})=>{const r=X.useRef(null),[i,a]=X.useState(null),[o,s]=X.useState(null);return X.useEffect(()=>{let u=null;return e&&(async()=>{try{u=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480},facingMode:"user"},audio:!1}),r.current&&(r.current.srcObject=u,a(!0),s(null),r.current.onloadedmetadata=()=>{r.current&&t(r.current)})}catch(c){console.error("Error accessing camera:",c),a(!1),c.name==="NotAllowedError"?s("Camera access denied. Please enable camera permissions."):c.name==="NotFoundError"?s("No camera detected on your device."):s("Error accessing camera. Please try again.")}})(),()=>{u&&u.getTracks().forEach(c=>c.stop())}},[e,t]),S.jsxs("div",{className:"relative",children:[S.jsx("div",{className:`rounded-lg overflow-hidden bg-gray-100 ${e?"":"hidden"}`,children:S.jsx("video",{ref:r,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-auto object-cover",style:{transform:"scaleX(-1)"}})}),!e&&S.jsxs("div",{className:"flex flex-col items-center justify-center h-64 bg-gray-100 rounded-lg",children:[S.jsx(TS,{className:"w-12 h-12 text-gray-400 mb-3"}),S.jsx("p",{className:"text-gray-500",children:"Camera is turned off"})]}),i===!1&&S.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-900 bg-opacity-75 rounded-lg",children:S.jsxs("div",{className:"text-center text-white p-4",children:[S.jsx("p",{className:"font-medium mb-2",children:o}),S.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",children:"Retry"})]})}),S.jsx("button",{onClick:n,className:`absolute bottom-4 right-4 p-3 rounded-full shadow-lg transition-colors ${e?"bg-red-500 hover:bg-red-600":"bg-blue-500 hover:bg-blue-600"}`,"aria-label":e?"Turn off camera":"Turn on camera",children:e?S.jsx(TS,{className:"w-5 h-5 text-white"}):S.jsx(cP,{className:"w-5 h-5 text-white"})})]})},o4e=({emotionData:t,isDetecting:e,isLoading:n})=>{if(n)return S.jsxs("div",{className:"flex flex-col items-center justify-center h-64 bg-white rounded-lg shadow-md p-8 text-center",children:[S.jsx(cb,{className:"w-12 h-12 text-blue-500 animate-spin mb-4"}),S.jsx("p",{className:"text-xl font-medium text-gray-700",children:"Loading emotion detection models..."}),S.jsx("p",{className:"text-gray-500 mt-2",children:"This may take a moment"})]});if(!e)return S.jsxs("div",{className:"flex flex-col items-center justify-center h-64 bg-white rounded-lg shadow-md p-8 text-center",children:[S.jsx(cP,{className:"w-12 h-12 text-gray-500 mb-4"}),S.jsx("p",{className:"text-xl font-medium text-gray-700",children:"Camera is not active"}),S.jsx("p",{className:"text-gray-500 mt-2",children:"Enable the camera to start emotion detection"})]});if(!t)return S.jsxs("div",{className:"flex flex-col items-center justify-center h-64 bg-white rounded-lg shadow-md p-8 text-center",children:[S.jsx(YW,{className:"w-12 h-12 text-gray-500 mb-4"}),S.jsx("p",{className:"text-xl font-medium text-gray-700",children:"No face detected"}),S.jsx("p",{className:"text-gray-500 mt-2",children:"Position your face in front of the camera"})]});const{dominantEmotion:r,emotions:i}=t,a=Kd(r),o=r0(r),s=i4e(r);return S.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden transition-all duration-500",style:{borderTop:`4px solid ${a}`},children:S.jsxs("div",{className:"p-6",children:[S.jsxs("div",{className:"flex items-center justify-between mb-4",children:[S.jsx("h2",{className:"text-2xl font-bold text-gray-800 capitalize",children:r}),S.jsx("span",{className:"text-4xl",children:o})]}),S.jsx("p",{className:"text-gray-600 mb-6",children:s}),S.jsx("div",{className:"space-y-3",children:Object.entries(i).map(([u,l])=>S.jsxs("div",{className:"w-full",children:[S.jsxs("div",{className:"flex justify-between mb-1",children:[S.jsx("span",{className:"text-sm font-medium text-gray-700 capitalize",children:u}),S.jsxs("span",{className:"text-sm text-gray-500",children:[Math.round(l*100),"%"]})]}),S.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:S.jsx("div",{className:"h-2.5 rounded-full transition-all duration-300 ease-out",style:{width:`${Math.round(l*100)}%`,backgroundColor:Kd(u)}})})]},u))})]})})},s4e=({history:t})=>{if(t.length===0)return S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[S.jsxs("div",{className:"flex items-center mb-4",children:[S.jsx(MS,{className:"w-5 h-5 text-blue-500 mr-2"}),S.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Emotion History"})]}),S.jsx("p",{className:"text-gray-500 text-center py-4",children:"No emotion history yet"})]});const e=n=>new Date(n).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[S.jsxs("div",{className:"flex items-center mb-4",children:[S.jsx(MS,{className:"w-5 h-5 text-blue-500 mr-2"}),S.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Emotion History"})]}),S.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:t.slice().reverse().map((n,r)=>S.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-md transition-all hover:bg-gray-100",children:[S.jsx("div",{className:"text-2xl mr-3",children:r0(n.dominantEmotion)}),S.jsxs("div",{className:"flex-1",children:[S.jsx("p",{className:"font-medium text-gray-800 capitalize",children:n.dominantEmotion}),S.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[S.jsx(OW,{className:"w-3 h-3 mr-1"}),e(n.timestamp)]})]}),S.jsxs("div",{className:"text-sm font-medium text-gray-700",children:[Math.round(n.emotions[n.dominantEmotion]*100),"%"]})]},r))})]})},u4e=()=>{const[t,e]=X.useState(!1),[n,r]=X.useState(!0),[i,a]=X.useState(!1),[o,s]=X.useState(null),[u,l]=X.useState(null),[c,f]=X.useState([]),[d,h]=X.useState(!1);X.useEffect(()=>{(async()=>{r(!0);try{const v=await wj();e(v)}catch(v){console.error("Failed to initialize models:",v)}finally{r(!1)}})()},[]);const p=X.useCallback(g=>{s(g)},[]),m=X.useCallback(()=>{a(g=>!g),i||l(null)},[i]);return X.useEffect(()=>{let g,v=0;const x=500,y=async b=>{if(o&&i&&t&&b-v>=x){const w=await _j(o);w&&(l(w),(!u||u.dominantEmotion!==w.dominantEmotion||w.timestamp-((u==null?void 0:u.timestamp)||0)>5e3)&&f(E=>{const C=[...E,w];return C.length>20?C.slice(C.length-20):C})),v=b}g=requestAnimationFrame(y)};return o&&i&&t&&(g=requestAnimationFrame(y)),()=>{g&&cancelAnimationFrame(g)}},[o,i,t,u]),S.jsx("div",{className:"min-h-screen bg-gray-100",children:S.jsxs("main",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[d&&S.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 mb-6 rounded-md",children:S.jsxs("div",{className:"flex",children:[S.jsx("div",{className:"flex-shrink-0",children:S.jsx($W,{className:"h-5 w-5 text-blue-500"})}),S.jsxs("div",{className:"ml-3",children:[S.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"How it works"}),S.jsxs("div",{className:"mt-2 text-sm text-blue-700",children:[S.jsx("p",{children:"This application uses your webcam to detect facial expressions and identify emotions in real-time."}),S.jsx("p",{className:"mt-1",children:"All processing happens locally in your browser - no data is sent to any server."}),S.jsx("p",{className:"mt-1",children:"Click the camera button to start/stop emotion detection."})]})]})]})}),S.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[S.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[S.jsx(a4e,{onWebcamReady:p,isDetecting:i,onToggleDetection:m}),S.jsx(o4e,{emotionData:u,isDetecting:i,isLoading:n})]}),S.jsx("div",{children:S.jsx(s4e,{history:c})})]})]})})},ca={home:"text-blue-600",animals:"text-green-600",aquatic:"text-cyan-600",birds:"text-yellow-600",fruits:"text-orange-600",vegetables:"text-emerald-600",flowers:"text-pink-600",vehicles:"text-purple-600",math:"text-indigo-600",tests:"text-red-600",games:"text-pink-600"},BR=[{path:"/",label:"Home",icon:pP,color:ca.home},{path:"/animals",label:"Animals",icon:zW,color:ca.animals},{path:"/aquatic",label:"Aquatic",icon:dP,color:ca.aquatic},{path:"/birds",label:"Birds",icon:lP,color:ca.birds},{path:"/fruits",label:"Fruits",icon:uP,color:ca.fruits},{path:"/vegetables",label:"Vegetables",icon:fP,color:ca.vegetables},{path:"/flowers",label:"Flowers",icon:hP,color:ca.flowers},{path:"/vehicles",label:"Vehicle",icon:FW,color:ca.vehicles},{path:"/math",label:"Math",icon:$2,color:ca.math},{path:"/games",label:"Games",icon:BW,color:ca.games},{path:"/testing",label:"Tests",icon:LW,color:ca.tests,requireAuth:!0}];function LR({children:t}){const{currentUser:e}=zf();return e?S.jsx(S.Fragment,{children:t}):S.jsx(mW,{to:"/login"})}function l4e(){const[t,e]=X.useState(!1),[n,r]=X.useState(!0),[i,a]=X.useState(null),[o,s]=X.useState(null),{currentUser:u,logout:l}=zf(),[c,f]=X.useState(!1);X.useEffect(()=>{(async()=>{r(!0);try{const m=await wj();e(m)}catch(m){console.error("Failed to initialize models:",m)}finally{r(!1)}})()},[]),X.useEffect(()=>{let p,m=0;const g=500,v=async x=>{if(i&&t&&x-m>=g){const y=await _j(i);y&&s(y),m=x}p=requestAnimationFrame(v)};return i&&t&&(p=requestAnimationFrame(v)),()=>{p&&cancelAnimationFrame(p)}},[i,t]);const d=()=>{f(!1)},h=p=>p.requireAuth&&!u?null:S.jsx(Yp,{to:p.path,className:({isActive:m})=>`flex items-center whitespace-nowrap ${m?p.color:"hover:"+p.color} px-3 py-2 rounded-md text-sm font-medium`,onClick:d,children:({isActive:m})=>S.jsxs(S.Fragment,{children:[S.jsx(p.icon,{className:`w-5 h-5 mr-2 ${m?p.color:""}`}),S.jsx("span",{children:p.label})]})},p.path);return S.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[S.jsx(PCe,{onWebcamReady:a}),S.jsxs("nav",{className:"fixed top-0 left-0 right-0 bg-white shadow-lg z-10",children:[S.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4",children:S.jsxs("div",{className:"flex justify-between h-16",children:[S.jsx("div",{className:"flex items-center pr-2 border-r",children:S.jsxs(Yp,{to:"/",className:"flex items-center",children:[S.jsx("img",{src:Xbe,alt:"Kid Learning Logo",className:"h-8 w-8"}),S.jsx("span",{className:"ml-1 text-base font-semibold text-gray-900",children:"KL"})]})}),S.jsx("div",{className:"flex items-center md:hidden",children:S.jsxs("button",{onClick:()=>f(!c),className:"inline-flex items-center justify-center p-2 rounded-md text-gray-600 hover:text-blue-600 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500","aria-expanded":"false",children:[S.jsx("span",{className:"sr-only",children:"Open main menu"}),c?S.jsx(XW,{className:"block h-6 w-6","aria-hidden":"true"}):S.jsx(UW,{className:"block h-6 w-6","aria-hidden":"true"})]})}),S.jsx("div",{className:"hidden md:flex md:items-center md:space-x-1 overflow-x-auto scrollbar-hide",children:BR.map(h)}),S.jsx("div",{className:"hidden md:flex items-center",children:n?S.jsxs("div",{className:"flex items-center space-x-2 px-3 py-1 bg-blue-50 rounded-full text-blue-600 text-sm",children:[S.jsx(cb,{className:"h-4 w-4 animate-spin"}),S.jsx("span",{children:"..."})]}):t?o?S.jsx("div",{className:"flex items-center px-2 py-0.5 rounded-full transition-all duration-300 text-sm",style:{backgroundColor:`${Kd(o.dominantEmotion)}20`},children:S.jsx("span",{className:"text-xl mr-1",children:r0(o.dominantEmotion)})}):S.jsx("div",{className:"flex items-center space-x-1 px-3 py-1 bg-gray-50 rounded-full text-gray-600 text-sm",children:S.jsx("span",{children:"Waiting..."})}):S.jsx("div",{className:"flex items-center space-x-1 px-3 py-1 bg-red-50 rounded-full text-red-600 text-sm",children:S.jsx("span",{children:"Failed"})})}),S.jsx("div",{className:"hidden md:flex items-center space-x-2 ml-2",children:u?S.jsxs("button",{onClick:l,className:"flex items-center text-red-600 hover:text-red-800 text-sm",children:[S.jsx(IS,{className:"w-4 h-4 mr-1"}),S.jsx("span",{children:"Logout"})]}):S.jsx(Yp,{to:"/login",className:({isActive:p})=>p?"text-blue-600 font-medium text-sm":"text-blue-600 hover:text-blue-800 text-sm",children:"Login"})})]})}),S.jsx("div",{className:`md:hidden ${c?"block":"hidden"}`,children:S.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3 bg-white shadow-md",children:[BR.map(h),u?S.jsxs("button",{onClick:()=>{l(),d()},className:"flex w-full items-center text-red-600 hover:text-red-800 px-3 py-2 rounded-md text-sm font-medium",children:[S.jsx(IS,{className:"w-5 h-5 mr-2"}),S.jsx("span",{children:"Logout"})]}):S.jsx(Yp,{to:"/login",className:({isActive:p})=>`flex items-center ${p?"text-blue-600 font-medium":"text-blue-600 hover:text-blue-800"} px-3 py-2 rounded-md text-sm font-medium`,onClick:d,children:"Login"}),S.jsx("div",{className:"px-3 py-2",children:n?S.jsxs("div",{className:"flex items-center space-x-2 px-3 py-1 bg-blue-50 rounded-full text-blue-600 text-sm",children:[S.jsx(cb,{className:"h-4 w-4 animate-spin"}),S.jsx("span",{children:"Loading emotion detection..."})]}):t?o?S.jsxs("div",{className:"flex items-center px-3 py-1 rounded-full transition-all duration-300 text-sm",style:{backgroundColor:`${Kd(o.dominantEmotion)}20`},children:[S.jsx("span",{className:"text-xl mr-1",children:r0(o.dominantEmotion)}),S.jsx("span",{className:"font-medium capitalize",style:{color:Kd(o.dominantEmotion)},children:o.dominantEmotion}),S.jsxs("span",{className:"ml-1 text-xs text-gray-500",children:[Math.round(o.emotions[o.dominantEmotion]*100),"%"]})]}):S.jsx("div",{className:"flex items-center space-x-2 px-3 py-1 bg-gray-50 rounded-full text-gray-600 text-sm",children:S.jsx("span",{children:"Waiting for emotion detection..."})}):S.jsx("div",{className:"flex items-center space-x-2 px-3 py-1 bg-red-50 rounded-full text-red-600 text-sm",children:S.jsx("span",{children:"Failed to load emotion detection"})})})]})})]}),S.jsx("div",{className:"flex-1 pt-16",children:S.jsxs(gW,{children:[S.jsx(tn,{path:"/",element:S.jsx(QW,{})}),S.jsx(tn,{path:"/face",element:S.jsx(u4e,{})}),S.jsx(tn,{path:"/animals",element:S.jsx(JW,{})}),S.jsx(tn,{path:"/aquatic",element:S.jsx(eV,{})}),S.jsx(tn,{path:"/birds",element:S.jsx(tV,{})}),S.jsx(tn,{path:"/fruits",element:S.jsx(iV,{})}),S.jsx(tn,{path:"/vegetables",element:S.jsx(aV,{})}),S.jsx(tn,{path:"/flowers",element:S.jsx(cV,{})}),S.jsx(tn,{path:"/vehicles",element:S.jsx(dV,{})}),S.jsx(tn,{path:"/math",element:S.jsx(kme,{})}),S.jsx(tn,{path:"/login",element:S.jsx(Gbe,{})}),S.jsx(tn,{path:"/signup",element:S.jsx(Kbe,{})}),S.jsx(tn,{path:"/results",element:S.jsx(LR,{children:S.jsx(Ybe,{})})}),S.jsx(tn,{path:"/testing",element:S.jsx(LR,{children:S.jsx(Hbe,{})})}),S.jsx(tn,{path:"/games",element:S.jsx(_Ce,{})}),S.jsx(tn,{path:"/memory-game",element:S.jsx(ECe,{})}),S.jsx(tn,{path:"/whack-a-mole",element:S.jsx(CCe,{})}),S.jsx(tn,{path:"/coloring-book",element:S.jsx(NCe,{})}),S.jsx(tn,{path:"/simple-puzzle",element:S.jsx(DCe,{})}),S.jsx(tn,{path:"/balloon-pop",element:S.jsx(ACe,{})}),S.jsx(tn,{path:"/word-search",element:S.jsx(TCe,{})}),S.jsx(tn,{path:"/counting-game",element:S.jsx(MCe,{})}),S.jsx(tn,{path:"/shape-sorter",element:S.jsx(ICe,{})}),S.jsx(tn,{path:"/catch-stars",element:S.jsx(RCe,{})}),S.jsx(tn,{path:"/animal-sounds",element:S.jsx(FCe,{})})]})})]})}function c4e(){return S.jsx(qbe,{children:S.jsx(l4e,{})})}QF(document.getElementById("root")).render(S.jsx(X.StrictMode,{children:S.jsx(NW,{basename:"/kidlearn",children:S.jsx(c4e,{})})}))});export default f4e();
